Version,Assignee,Created,Created Epoch,Description,Comments
CAMEL-15923,Andrea Cosentino,2020-12-07T06:28:18+0000,1607304498， where 1607304498 is the epoch,,There are no comments yet on this issue.
CAMEL-15922,Unassigned,2020-12-04T09:30:34+0000,1607056234， where 1607056234 is the epoch,The csimple language does not support the following feature in its first release nested functions (${xxx} inside existing ${xxx} functions)) the null safe operator We need a smarter source code generator for this to support this， that supports building up multiple statements and assign to local variables， and branches for the null safe operator， and also to understand types of method calls for nested functions so its of the same type from the java compiler point of view.,There are no comments yet on this issue.
CAMEL-15921,Zoran Regvart,2020-12-03T20:06:58+0000,1607008018， where 1607008018 is the epoch,Would be nice to offer a selection of related blog posts at the bottom of a blog post.,There are no comments yet on this issue.
CAMEL-15920,Unassigned,2020-12-03T16:20:28+0000,1606994428， where 1606994428 is the epoch,Parsing a CSV file fails if the following conditions are met: tab separator last field is empty not all fields are required Example 1CSV: "VOA\t12 abc street\tMelbourne\tVIC\t3000\tAustralia\t\t"The last two fields are empty and the CSV cannot be parsed.Example 2CSV: "VOA\t12 abc street\tMelbourne\tVIC\t3000\tAustralia\t\tNot Empty"The last field is not empty and the CSV can be parsed. Example 3CSV: "VOA，12 abc street，Melbourne，VIC，3000，Australia，，"If the comma separator is used and the last field is empty， the CSV can be parsed.I've just created a test case on current master to demonstrate the bug:Camel-Bindy: csv cannot be parsed if (not required) last field is empty and a tab separator is used by darioxz - Pull Request #1 - darioxz/camel (github.com),There are no comments yet on this issue.
CAMEL-15919,Unassigned,2020-12-03T15:34:28+0000,1606991668， where 1606991668 is the epoch,Currently， specifying "java.io.File" class as response model (for example when the API returns a binary document， aka "Download") in RestOperationResponseMsgDefinition produces an incorrect Swagger / OAS2 / OAS3 definition: "responses" : { "200" : { "description" : "Created PDF file"， "schema" : { "type" : "string"， "format" : "java.io.File" }， }， // ....} The correct way to handle this according to Swagger docs v2 (https://swagger.io/docs/specification/2-0/describing-responses/) is:"responses" : { "200" : { "description" : "Created PDF file"， "schema" : { "type" : "file" }， }， // ....} camel-openapi-java with OAS2 / OAS3 is also affected.,There are no comments yet on this issue.
CAMEL-15918,Unassigned,2020-12-03T15:09:22+0000,1606990162， where 1606990162 is the epoch,The releases page is missing earlier releases for:camel-kcamel-k runtimeOnly a single release is currently listed for each， however there are many more:https://archive.apache.org/dist/camel/camel-k/https://archive.apache.org/dist/camel/camel-k-runtime/,There are no comments yet on this issue.
CAMEL-15917,Unassigned,2020-12-03T15:05:26.131Z,1606989926.131， where 1606989926.131 is the epoch,I'm using camel-resilien4j library:<groupId>org.apache.camel.springboot</groupId><artifactId>camel-spring-boot-dependencies</artifactId><version>3.4.4</version><groupId>org.apache.camel</groupId><artifactId>camel-resilience4j</artifactId>I want to use https://camel.apache.org/components/latest/properties-component.htmlfunctionality for circuit breaker configuration in camel routes definitions.It's needed to be able to add some specific route to some specific group. So I'm trying to do following. <circuitBreaker configurationRef="{{myName}}"> <to uri="direct:someUri"/> </circuitBreaker> But it doesn't work. myName is not resolved using property file. I can't hardcode names. As I can see - ResilienceReifier doesn't even try to resolve it using config.ResilienceReifier#buildResilience4jConfiguration if (definition.getConfigurationRef() != null) { final String ref = definition.getConfigurationRef(); loadProperties(properties， Suppliers.firstNotNull( () -> camelContext.getExtension(Model.class).getResilience4jConfiguration(ref)， () -> mandatoryLookup(ref， Resilience4jConfigurationDefinition.class))， configurer); } so definition (ref) is transferred as is. And it cause an issue， because there is no such config as myName.What I would expect to see， is: if (definition.getConfigurationRef() != null) { /// here is modified code Optional<String> configuredValue = camelContext.getPropertiesComponent().resolveProperty(definition.getConfigurationRef(); final String ref = configuredValue.isPresent() ? configuredValue.get() : definition.getConfigurationRef(); /// end of modified code loadProperties(properties， Suppliers.firstNotNull( () -> camelContext.getExtension(Model.class).getResilience4jConfiguration(ref)， () -> mandatoryLookup(ref， Resilience4jConfigurationDefinition.class))， configurer); } It's simple lookup for configuration value， but it provides a huge flexibility for entire framework. Also， is there anyway， how I can temporary hotfix this issue， in order to proceed with development?,Hide Permalink Claus Ibsen added a comment - 3 days ago All the reifiers for CBs can be improved to resolve that ref as text， there is some parseText method - other reifiers use， then {{ }} is resolved. Take a look at that， and you are welcome to provide PR for this for 3.4.x branch and also the master branch. Show Claus Ibsen added a comment - 3 days ago All the reifiers for CBs can be improved to resolve that ref as text， there is some parseText method - other reifiers use， then {{ }} is resolved. Take a look at that， and you are welcome to provide PR for this for 3.4.x branch and also the master branch. Hide Permalink Alex Liroyd added a comment - 3 days ago Ok. Will see what can I do. Hopefully will send it in day or two Show Alex Liroyd added a comment - 3 days ago Ok. Will see what can I do. Hopefully will send it in day or two Hide Permalink Alex Liroyd added a comment - 2 days ago Provided PRs for both 3.4.x and master Show Alex Liroyd added a comment - 2 days ago Provided PRs for both 3.4.x and master Hide Permalink Alex Liroyd added a comment - 2 days ago Could you please assist， when can I expect to get these changes from maven repository for 3.4.x branch? Show Alex Liroyd added a comment - 2 days ago Could you please assist， when can I expect to get these changes from maven repository for 3.4.x branch? Hide Permalink Alex Liroyd added a comment - 2 days ago Nwm， found it - https://issues.apache.org/jira/projects/CAMEL/versions/12348825 it's end of 2020 Show Alex Liroyd added a comment - 2 days ago Nwm， found it - https://issues.apache.org/jira/projects/CAMEL/versions/12348825 it's end of 2020
CAMEL-15916,Unassigned,2020-12-03T11:53:28+0000,1606978408， where 1606978408 is the epoch,Docs https://camel.apache.org/components/latest/mongodb-component.html do not have step to add ```<repositories> <repository> <id>spring-milestone</id> <name>Spring Maven MILESTONE Repository</name> <url>https://repo.spring.io/libs-milestone</url> </repository></repositories>```to pm.file in order to create mongoDB client according to https://docs.spring.io/spring-data/mongodb/docs/current/reference/html/#reference It's better to add direct link to spring to avoid this issue.Stack-overflow issue https://stackoverflow.com/questions/61313732/configuration-problem-unable-to-locate-spring-namespacehandler-for-xml-schema-n/65125398#65125398 Later I'll add pull request to docs,There are no comments yet on this issue.
CAMEL-15915,Otavio Rodolfo Piske,2020-12-03T10:01:24+0000,1606971684， where 1606971684 is the epoch,There are 5 unit tests in camel-ftp that keeps failing for a long time. Not reproducable on mac osx. So it may be linux.org.apache.camel.component.file.remote.FromFtpDirectoryToBinaryFilesNotStepwiseTest.testFtpRoute 1.1 sec 92 org.apache.camel.component.file.remote.FromFtpDirectoryToBinaryFilesTest.testFtpRoute 1.1 sec 92 org.apache.camel.component.file.remote.FromFtpSetNamesWithMultiDirectoriesTest.testFtpRoute 0.37 sec 92 org.apache.camel.component.file.remote.FromFtpToBinaryFileTest.testFtpRoute 1.1 sec 92 org.apache.camel.component.file.remote.FromFtpToBinaryFilesTest.testFtpRoute 1.2 sec 92,Hide Permalink Claus Ibsen added a comment - 3 days ago CI server report https://ci-builds.apache.org/job/Camel/job/Camel%20JDK11/job/master/lastCompletedBuild/testReport/ Show Claus Ibsen added a comment - 3 days ago CI server report https://ci-builds.apache.org/job/Camel/job/Camel%20JDK11/job/master/lastCompletedBuild/testReport/
CAMEL-15914,Claus Ibsen,2020-12-03T09:55:12+0000,1606971312， where 1606971312 is the epoch,We need to know if csimple is from predicate or expression when loaded on bootstrap,There are no comments yet on this issue.
CAMEL-15913,Zoran Regvart,2020-12-04T13:02:40+0000,1607068960， where 1607068960 is the epoch,The prior releases pages contain some spurious text:'3.4.4 3.6.0 2.25.2'This appears just after the 'camel-spring-boot-dependencies' section above the 'APACHE CAMEL' headingSee for example:https://deploy-preview-500--camel.netlify.app/releases/release-2.22.0/andhttps://deploy-preview-500--camel.netlify.app/releases/release-3.6.0/,Hide Permalink Zoran Regvart added a comment - 2 days ago Thanks for reporting! Show Zoran Regvart added a comment - 2 days ago Thanks for reporting!
CAMEL-15912,Unassigned,2020-12-02T07:13:41+0000,1606875221， where 1606875221 is the epoch,There are 14 standard fonts provided OOB and not able to load custom fonts from file in camel-pdf componentCustom fonts with Apache PDFBox component,There are no comments yet on this issue.
CAMEL-15911,Nicola Ferraro,2020-12-02T09:54:48+0000,1606884888， where 1606884888 is the epoch,There is no need to distribute the Camel K runtime POM， it is already included in the source zip package and folk will be downloading it from Maven central repository， it is of no use to anyone in the distribution.,Hide Permalink Nicola Ferraro added a comment - 4 days ago Updated released files and instructions for next releases Show Nicola Ferraro added a comment - 4 days ago Updated released files and instructions for next releases
CAMEL-15910,Gregor Zurowski,2020-12-01T12:37:03+0000,1606808223， where 1606808223 is the epoch,We need to include source packages for Camel Karaf and Camel Spring Boot as they are released with Camel core release. Since we split out Camel Karaf and Camel Spring Boot sources of those also need to be present with hashes and signatures in ASF distribution.,There are no comments yet on this issue.
CAMEL-15909,Andrea Cosentino,2020-11-30T16:08:27+0000,1606734507， where 1606734507 is the epoch,Like SQS， Kinesis also supports KMS. Would be great to add options KmsMasterKeyId and KmsDataKeyReusePeriodSeconds support.https://aws.amazon.com/blogs/big-data/encrypt-and-decrypt-amazon-kinesis-records-using-aws-kms/,Hide Permalink Andrea Cosentino added a comment - 6 days ago Will do on aws2. Aws components will be deprecated soon Show Andrea Cosentino added a comment - 6 days ago Will do on aws2. Aws components will be deprecated soon
CAMEL-15908,James Netherton,2020-11-30T14:27:55+0000,1606728475， where 1606728475 is the epoch,Similar to CAMEL-15255， there are some additional counter metrics we could add to the MicrometerRoutePolicy for: Total exchanges processed Number of failures handled Number of external redeliveries,There are no comments yet on this issue.
CAMEL-15907,Unassigned,2020-12-02T15:54:37+0000,1606906477， where 1606906477 is the epoch,Release 2.25.2 is present under https://downloads.apache.org/camel/apache-camel/ however it is not listed on the main downloads page.It should either be listed as a current release， or dropped from the mirrors.,Hide Permalink Sebb added a comment - 4 days ago Likewise for https://downloads.apache.org/camel/camel-k/1.2.0/ which does not appear to be listed anywhere. Show Sebb added a comment - 4 days ago Likewise for https://downloads.apache.org/camel/camel-k/1.2.0/ which does not appear to be listed anywhere. Hide Permalink Claus Ibsen added a comment - 4 days ago Deleted svn delete https://dist.apache.org/repos/dist/release/camel/camel-k/1.2.0/ Show Claus Ibsen added a comment - 4 days ago Deleted svn delete https://dist.apache.org/repos/dist/release/camel/camel-k/1.2.0/ Hide Permalink Claus Ibsen added a comment - 4 days ago The download page is being rewamped by Zoran so it includes all the relevant releases. Show Claus Ibsen added a comment - 4 days ago The download page is being rewamped by Zoran so it includes all the relevant releases.
CAMEL-15906,Unassigned,2020-11-30T10:43:50+0000,1606715030， where 1606715030 is the epoch,Download pages such as https://camel.apache.org/releases/release-3.4.4/ must contain a sigs， hashes， a link to KEYS and info on the need to verify downloads and how to do so.AFAICT they only contain the sigs.Please add the missing items.Also many of the links for older releases are broken.,Hide Permalink Sebb added a comment - 6 days ago Also the sig (asc) links are broken. They must not point to the mirrors. They must point to either https://downloads.apache.org/camel/... or https://archive.apache.org/dist/camel/... Show Sebb added a comment - 6 days ago Also the sig (asc) links are broken. They must not point to the mirrors. They must point to either https://downloads.apache.org/camel/ ... or https://archive.apache.org/dist/camel/ ...
CAMEL-15905,Unassigned,2020-11-30T05:38:53+0000,1606696733， where 1606696733 is the epoch,Current master branch has downgraded Open Tracing API dependency to 0.31.0， which is 1) almost 3 years old; 2) blocks Camel upgrade for projects that are using current version of OT API. Please support upgrade to the latest Camel for projects that are using up-to-date Open Tracing.,Hide Permalink Andrea Cosentino added a comment - 1 week ago There is a reason for that， we are waiting for a MP release supporting latest version of OT， when it will be available， it will be updated. Show Andrea Cosentino added a comment - 1 week ago There is a reason for that， we are waiting for a MP release supporting latest version of OT， when it will be available， it will be updated. Hide Permalink Bogdan Ilchyshyn added a comment - 1 week ago Andrea Cosentino， could you please provide us with a link to the issue where this is tracked? Now this activity is obscure for us and there is no way to know when this happens rather than regularly checking Camel source code. Show Bogdan Ilchyshyn added a comment - 1 week ago Andrea Cosentino ， could you please provide us with a link to the issue where this is tracked? Now this activity is obscure for us and there is no way to know when this happens rather than regularly checking Camel source code. Hide Permalink Andrea Cosentino added a comment - 1 week ago https://issues.apache.org/jira/browse/CAMEL-15354 This was the original issue. The version to wait for is the 4.x Show Andrea Cosentino added a comment - 1 week ago https://issues.apache.org/jira/browse/CAMEL-15354 This was the original issue. The version to wait for is the 4.x Hide Permalink Bogdan Ilchyshyn added a comment - 6 days ago Thank you， we will then follow MP updates. Show Bogdan Ilchyshyn added a comment - 6 days ago Thank you， we will then follow MP updates.
CAMEL-15904,Unassigned,2020-11-28T17:38:26.148Z,1606567106.148， where 1606567106.148 is the epoch,A while back (v37?)， the salesforce streaming API started requiring a replayId.Error subscribing to CamelTestTopic: Replay Id not found for channel. Error (id=794472383-90 (-1822401099))Prior to this， the behavior was equivalent to -1 (new events that are broadcast after the client subscribes). If we default `defaultReplayId` to -1， it provides a sensible default for new projects， and is backwards compatible with existing projects that are on old versions of the streaming API.Related， as of v37， it appears that salesforce no longer supplies the Bayeux clientId in broadcast messages:The protocol does not require clientId:The clientId message field MAY be returned in message responses except for failed handshake requests and for publish message responses that were sent without clientId.I'm guessing they made this change to reduce the surface area for clientId leakage. In any case， forthcoming PR removes non-null assertions for clientId since it's not there anymore.,There are no comments yet on this issue.
CAMEL-15903,Unassigned,2020-11-27T13:51:50+0000,1606467110， where 1606467110 is the epoch,The cluster view implementations have a listener attribute where the master component hooks itself to receive leadership change events. When the app instance becomes leader the cluster view will mark that instance as leader then it will trigger the leadershipchangedevent， this will trigger the master component event handler and it will start the delegated consumer and endpoint.The issue happens when the delegated consumer or endpoint fail to start. The exception throw by them will go up in the stack， however， this exception does not affect the leadership， i.e.， once the app instance becomes leader it will stay so even if the delegated components fail to start.Both KubernetesClusterView and FileLockClusterView have this issue.KubernetesClusterView uses KubernetesLeadershipController to run the leadership check at an interval. When it acquires the leadership it updates the configmap with that info and call TimedLeaderNotifier refreshLeadership method to check if the leadership has changed. The issue here is that it will mark itself as leader before firing the leadership changed event. Another issue is that the event is fired in a separete thread， so， when the start of the delegated components fail the exception will "die" together with the thread. When the next scheduled leadership check runs the app instance is already the leader and it will not fire the leadership changed event and the delegated component will never start.FileLockClusterView has a similar issue， it acquires the file lock prior to firing the event， even if the event processing fails it does not rollback the leader selection.Other cluster view implementations might have the same issue.,Hide Permalink EDGAR CHERNICK added a comment - 27/Nov/20 13:51 - edited Claus Ibsen I wanted to fix this issue myself but I'm afraid I might fix it for my scenario and keep others uncovered， since I think this issue might be related with all cluster view implementations. Would you mind giving some direction on how this could fixed ? I may try to submit a PR based on this direction then. Show EDGAR CHERNICK added a comment - 27/Nov/20 13:51 - edited Claus Ibsen I wanted to fix this issue myself but I'm afraid I might fix it for my scenario and keep others uncovered， since I think this issue might be related with all cluster view implementations. Would you mind giving some direction on how this could fixed ? I may try to submit a PR based on this direction then. Hide Permalink Claus Ibsen added a comment - 27/Nov/20 13:59 Edgar， I wonder if you have or can get a stacktrace of that error that is silently ignored. Or can pin point to where it happens in the current code. Show Claus Ibsen added a comment - 27/Nov/20 13:59 Edgar， I wonder if you have or can get a stacktrace of that error that is silently ignored. Or can pin point to where it happens in the current code. Hide Permalink EDGAR CHERNICK added a comment - 27/Nov/20 14:12 I'm using camel to consume from SF streaming api and I got this error when trying to creating a push topic with a name with more than 25 characters. This is the stack trace using FileLockClusterView: org.apache.camel.CamelException: Error creating Topic proposalOpportunityInjectionSync: {errors:[ {"errorCode":"STRING_TOO_LONG"，"message":"Topic Name: data value too large: proposalOpportunityInjectionSync (max length=25)"，"fields":["Name"]} ]，statusCode:400} at org.apache.camel.component.salesforce.internal.streaming.PushTopicHelper.createTopic(PushTopicHelper.java:169) at org.apache.camel.component.salesforce.internal.streaming.PushTopicHelper.createOrUpdateTopic(PushTopicHelper.java:112) at org.apache.camel.component.salesforce.SalesforceConsumer.doStart(SalesforceConsumer.java:312) at org.apache.camel.support.service.BaseService.start(BaseService.java:115) at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) at org.apache.camel.component.master.MasterConsumer.onLeadershipTaken(MasterConsumer.java:133) at org.apache.camel.component.master.MasterConsumer.access$100(MasterConsumer.java:43) at org.apache.camel.component.master.MasterConsumer$LeadershipListener.leadershipChanged(MasterConsumer.java:160) at org.apache.camel.support.cluster.AbstractCamelClusterView.lambda$fireLeadershipChangedEvent$4(AbstractCamelClusterView.java:129) at org.apache.camel.support.cluster.AbstractCamelClusterView.lambda$doWithListener$3(AbstractCamelClusterView.java:119) at org.apache.camel.util.concurrent.LockHelper.doWithReadLock(LockHelper.java:34) at org.apache.camel.support.cluster.AbstractCamelClusterView.doWithListener(AbstractCamelClusterView.java:112) at org.apache.camel.support.cluster.AbstractCamelClusterView.fireLeadershipChangedEvent(AbstractCamelClusterView.java:127) at org.apache.camel.component.file.cluster.FileLockClusterView.tryLock(FileLockClusterView.java:146) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.camel.component.salesforce.api.SalesforceException: {errors:[ {"errorCode":"STRING_TOO_LONG"，"message":"Topic Name: data value too large: proposalOpportunityInjectionSync (max length=25)"，"fields":["Name"]} ]，statusCode:400} at org.apache.camel.component.salesforce.internal.client.DefaultRestClient.createRestException(DefaultRestClient.java:113) at org.apache.camel.component.salesforce.internal.client.AbstractClientBase$1.onComplete(AbstractClientBase.java:231) at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:202) at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:194) at org.eclipse.jetty.client.ResponseNotifier.forwardSuccessComplete(ResponseNotifier.java:228) at org.apache.camel.component.salesforce.internal.client.SalesforceSecurityHandler$SecurityListener.forwardSuccessComplete(SalesforceSecurityHandler.java:269) at org.apache.camel.component.salesforce.internal.client.SalesforceSecurityHandler$SecurityListener.onComplete(SalesforceSecurityHandler.java:182) at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:202) at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:194) at org.eclipse.jetty.client.HttpReceiver.terminateResponse(HttpReceiver.java:470) at org.eclipse.jetty.client.HttpReceiver.responseSuccess(HttpReceiver.java:416) at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.messageComplete(HttpReceiverOverHTTP.java:316) at org.eclipse.jetty.http.HttpParser.parseFields(HttpParser.java:1165) at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:1525) at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.parse(HttpReceiverOverHTTP.java:172) at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.process(HttpReceiverOverHTTP.java:135) at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.receive(HttpReceiverOverHTTP.java:73) at org.eclipse.jetty.client.http.HttpChannelOverHTTP.receive(HttpChannelOverHTTP.java:133) at org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onFillable(HttpConnectionOverHTTP.java:155) at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:305) at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103) at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.onFillable(SslConnection.java:411) at org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:305) at org.eclipse.jetty.io.ssl.SslConnection$2.succeeded(SslConnection.java:159) at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103) at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:333) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:310) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:168) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:126) at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:366) at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765) at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683) ... 1 more Show EDGAR CHERNICK added a comment - 27/Nov/20 14:12 I'm using camel to consume from SF streaming api and I got this error when trying to creating a push topic with a name with more than 25 characters. This is the stack trace using FileLockClusterView: org.apache.camel.CamelException: Error creating Topic proposalOpportunityInjectionSync: {errors:[ {"errorCode":"STRING_TOO_LONG"，"message":"Topic Name: data value too large: proposalOpportunityInjectionSync (max length=25)"，"fields":["Name"]} ]，statusCode:400} at org.apache.camel.component.salesforce.internal.streaming.PushTopicHelper.createTopic(PushTopicHelper.java:169) at org.apache.camel.component.salesforce.internal.streaming.PushTopicHelper.createOrUpdateTopic(PushTopicHelper.java:112) at org.apache.camel.component.salesforce.SalesforceConsumer.doStart(SalesforceConsumer.java:312) at org.apache.camel.support.service.BaseService.start(BaseService.java:115) at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) at org.apache.camel.component.master.MasterConsumer.onLeadershipTaken(MasterConsumer.java:133) at org.apache.camel.component.master.MasterConsumer.access$100(MasterConsumer.java:43) at org.apache.camel.component.master.MasterConsumer$LeadershipListener.leadershipChanged(MasterConsumer.java:160) at org.apache.camel.support.cluster.AbstractCamelClusterView.lambda$fireLeadershipChangedEvent$4(AbstractCamelClusterView.java:129) at org.apache.camel.support.cluster.AbstractCamelClusterView.lambda$doWithListener$3(AbstractCamelClusterView.java:119) at org.apache.camel.util.concurrent.LockHelper.doWithReadLock(LockHelper.java:34) at org.apache.camel.support.cluster.AbstractCamelClusterView.doWithListener(AbstractCamelClusterView.java:112) at org.apache.camel.support.cluster.AbstractCamelClusterView.fireLeadershipChangedEvent(AbstractCamelClusterView.java:127) at org.apache.camel.component.file.cluster.FileLockClusterView.tryLock(FileLockClusterView.java:146) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748) Caused by: org.apache.camel.component.salesforce.api.SalesforceException: {errors:[ {"errorCode":"STRING_TOO_LONG"，"message":"Topic Name: data value too large: proposalOpportunityInjectionSync (max length=25)"，"fields":["Name"]} ]，statusCode:400} at org.apache.camel.component.salesforce.internal.client.DefaultRestClient.createRestException(DefaultRestClient.java:113) at org.apache.camel.component.salesforce.internal.client.AbstractClientBase$1.onComplete(AbstractClientBase.java:231) at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:202) at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:194) at org.eclipse.jetty.client.ResponseNotifier.forwardSuccessComplete(ResponseNotifier.java:228) at org.apache.camel.component.salesforce.internal.client.SalesforceSecurityHandler$SecurityListener.forwardSuccessComplete(SalesforceSecurityHandler.java:269) at org.apache.camel.component.salesforce.internal.client.SalesforceSecurityHandler$SecurityListener.onComplete(SalesforceSecurityHandler.java:182) at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:202) at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:194) at org.eclipse.jetty.client.HttpReceiver.terminateResponse(HttpReceiver.java:470) at org.eclipse.jetty.client.HttpReceiver.responseSuccess(HttpReceiver.java:416) at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.messageComplete(HttpReceiverOverHTTP.java:316) at org.eclipse.jetty.http.HttpParser.parseFields(HttpParser.java:1165) at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:1525) at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.parse(HttpReceiverOverHTTP.java:172) at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.process(HttpReceiverOverHTTP.java:135) at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.receive(HttpReceiverOverHTTP.java:73) at org.eclipse.jetty.client.http.HttpChannelOverHTTP.receive(HttpChannelOverHTTP.java:133) at org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onFillable(HttpConnectionOverHTTP.java:155) at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:305) at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103) at org.eclipse.jetty.io.ssl.SslConnection$DecryptedEndPoint.onFillable(SslConnection.java:411) at org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:305) at org.eclipse.jetty.io.ssl.SslConnection$2.succeeded(SslConnection.java:159) at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103) at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:118) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.runTask(EatWhatYouKill.java:333) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:310) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.tryProduce(EatWhatYouKill.java:168) at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:126) at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:366) at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:765) at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:683) ... 1 more Hide Permalink Luca Burgazzoli added a comment - 2 days ago As far as I remember the idea was that there should be something on top of the master component to deal with routes failures and decide what to do as example， if there's a connectivity glitch and your route either don't even start or report failures， it should be up to the specific routes supervisor to decide to retry or to give up and release the leadership. But I think we should have some configuration option to configure the behaviour of the master component and i.e. auto release the leadership in case of failures. Show Luca Burgazzoli added a comment - 2 days ago As far as I remember the idea was that there should be something on top of the master component to deal with routes failures and decide what to do as example， if there's a connectivity glitch and your route either don't even start or report failures， it should be up to the specific routes supervisor to decide to retry or to give up and release the leadership. But I think we should have some configuration option to configure the behaviour of the master component and i.e. auto release the leadership in case of failures. Hide Permalink EDGAR CHERNICK added a comment - 2 days ago I think I could have something monitoring the master component but I don't think it would help in this scenario actually. In all app instances the master component route is started (and the route it is in as well). The thing that is not started is the "wrapped by master" component/endpoint， that wrapped component starts when master component receives leadership changed events and trigger its start. One thing that I was thinking is， what if the actual error surfaced to the exception handling mechanism (something similar to what bridgeErrorHandler does). This won't fix the issue of not retrying the startup of it on leadership changes but at least will give users visibility that something is going on (they might even be able to "force" the restart of the route on their own based on the exception that was thrown) Show EDGAR CHERNICK added a comment - 2 days ago I think I could have something monitoring the master component but I don't think it would help in this scenario actually. In all app instances the master component route is started (and the route it is in as well). The thing that is not started is the "wrapped by master" component/endpoint， that wrapped component starts when master component receives leadership changed events and trigger its start. One thing that I was thinking is， what if the actual error surfaced to the exception handling mechanism (something similar to what bridgeErrorHandler does). This won't fix the issue of not retrying the startup of it on leadership changes but at least will give users visibility that something is going on (they might even be able to "force" the restart of the route on their own based on the exception that was thrown)
CAMEL-15902,Andrea Cosentino,2020-11-27T12:21:55+0000,1606461715， where 1606461715 is the epoch,[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project camel-opentelemetry-starter: Compilation failure: Compilation failure: [ERROR] /home/oscerd/workspace/apache-camel/camel-spring-boot/components-starter/camel-opentelemetry-starter/src/main/java/org/apache/camel/opentelemetry/starter/OpenTelemetryAutoConfiguration.java:[19，30] package io.opentelemetry.trace does not exist[ERROR] /home/oscerd/workspace/apache-camel/camel-spring-boot/components-starter/camel-opentelemetry-starter/src/main/java/org/apache/camel/opentelemetry/starter/OpenTelemetryAutoConfiguration.java:[35，13] cannot find symbol[ERROR] symbol: class Tracer[ERROR] location: class org.apache.camel.opentelemetry.starter.OpenTelemetryAutoConfiguration Ruben Vargas can you have a look at https://github.com/apache/camel-spring-boot,There are no comments yet on this issue.
CAMEL-15901,Unassigned,2020-11-27T11:55:20+0000,1606460120， where 1606460120 is the epoch,My app work on java 8， but don't work on java 11. I try increase version java -> 11. I loading my test-project when I get exception: https://github.com/Holly-12/cxfjava11When bundle installed in karaf and have status Active I send soap message and get exception: Message part {[http://lama.ru/]}packet was not recognized. (Does it exist in service WSDL?) I get wsdl(http://localhost:8181/cxf/lama?wsdl) and see: <wsdl:definitions xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://lama.ru/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:ns1="http://schemas.xmlsoap.org/soap/http" name="SoapProxyService" targetNamespace="http://lama.ru/"> <wsdl:types> <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://www.lama.ru/test/" elementFormDefault="qualified" targetNamespace="http://www.lama.ru/test/" version="1.0"> <xs:element name="packet" type="tns:packetType"/> <xs:element name="response" type="xs:string"/> <xs:complexType name="packetType"> <xs:sequence> <xs:element name="content" type="xs:anyType"/> </xs:sequence> </xs:complexType> </xs:schema> </wsdl:types> <wsdl:portType name="SoapProxy"></wsdl:portType> <wsdl:binding name="SoapProxyServiceSoapBinding" type="tns:SoapProxy"> <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/> </wsdl:binding> <wsdl:service name="SoapProxyService"> <wsdl:port binding="tns:SoapProxyServiceSoapBinding" name="SoapProxyPort"> <soap:address location="http://localhost:8181/cxf/lama"/> </wsdl:port> </wsdl:service></wsdl:definitions>I see what wsdl don't have operation. But when I run app without karaf and camel only with cxf app work without exception.,There are no comments yet on this issue.
CAMEL-15900,Unassigned,2020-11-27T11:48:40+0000,1606459720， where 1606459720 is the epoch,GeoCoderNominatimProducer can invoke 3rd party location apis via the serverUrl option. To do this， it creates an Apache HttpClient. However， the client is created on every invocation of process()， which is not very efficient. It should be possible to set up the client once， and reuse it.Also none of the endpoint options for configuring a proxy server are passed to the HttpClient. It would be good if they were.,There are no comments yet on this issue.
CAMEL-15899,Andrea Cosentino,2020-11-27T10:23:18+0000,1606454598， where 1606454598 is the epoch,The following exception occurs if the camelroute with a hazel cast topic is restarted WARNUNG: Error processing exchange for hazelcast consumer on object 'null' in cache 'server.trace.event'.. Exchange[ID-1605875260724-0-338]. Caused by: [java.util.concurrent.RejectedExecutionException - null]java.util.concurrent.RejectedExecutionExceptionat org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:435)at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:201)at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:201)at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97)at org.apache.camel.component.hazelcast.listener.CamelListener.sendExchange(CamelListener.java:48)at org.apache.camel.component.hazelcast.listener.CamelMessageListener.onMessage(CamelMessageListener.java:34)at com.hazelcast.topic.impl.TopicService.dispatchEvent(TopicService.java:138)at com.hazelcast.spi.impl.eventservice.impl.LocalEventDispatcher.run(LocalEventDispatcher.java:64)at com.hazelcast.util.executor.StripedExecutor$Worker.process(StripedExecutor.java:244)at com.hazelcast.util.executor.StripedExecutor$Worker.run(StripedExecutor.java:227)SolutionRegister listeners in doStart and remove them in doStop,Hide Permalink Andrea Cosentino added a comment - 27/Nov/20 10:23 Please report the camel version. Show Andrea Cosentino added a comment - 27/Nov/20 10:23 Please report the camel version. Hide Permalink Florian Agsteiner added a comment - 27/Nov/20 10:25 - edited I think all versions are affected including the latest in Github. I added a pull request: https://github.com/apache/camel/pull/4694 Show Florian Agsteiner added a comment - 27/Nov/20 10:25 - edited I think all versions are affected including the latest in Github. I added a pull request: https://github.com/apache/camel/pull/4694 Hide Permalink Andrea Cosentino added a comment - 27/Nov/20 10:29 We'll release 3.7.0 as second LTS， the other LTS is 3.4.x， so we'll need a PR on 3.4.x branch only Show Andrea Cosentino added a comment - 27/Nov/20 10:29 We'll release 3.7.0 as second LTS， the other LTS is 3.4.x， so we'll need a PR on 3.4.x branch only Hide Permalink Andrea Cosentino added a comment - 27/Nov/20 13:09 Can you open a PR against camel-3.4.x? It shouldn't be a cherry-pick， I guess there will be conflicts. Thanks. Show Andrea Cosentino added a comment - 27/Nov/20 13:09 Can you open a PR against camel-3.4.x? It shouldn't be a cherry-pick， I guess there will be conflicts. Thanks.
CAMEL-15898,Zoran Regvart,2020-11-27T08:52:06.277Z,1606449126.277， where 1606449126.277 is the epoch,I can see NULLs in place of headings， although the content seems to be fine. Blogs， Articles， Books (all Hugo content) etc are rendering fine， but Components and sub project headings are not appearing. Has there been a change is the organization of Antora content? Else this may be a problem from the Algolia side.,Hide Permalink Zoran Regvart added a comment - 6 days ago Yeah， I see the same. Really odd， doesn't look there were any changes recently (https://github.com/algolia/docsearch-configs/commits/master/configs/apache_camel.json)， and the selectors (article hN are matched. The only thing I can remember is that that I've tried to [fix the breadcrumbs data](https://github.com/apache/camel-website/commit/3e8d717038d2fa0f6d1dc37dd20cc4cdbb9a798a)， though I don't think that would cause the issue. Show Zoran Regvart added a comment - 6 days ago Yeah， I see the same. Really odd， doesn't look there were any changes recently ( https://github.com/algolia/docsearch-configs/commits/master/configs/apache_camel.json )， and the selectors ( article hN are matched. The only thing I can remember is that that I've tried to [fix the breadcrumbs data] ( https://github.com/apache/camel-website/commit/3e8d717038d2fa0f6d1dc37dd20cc4cdbb9a798a )， though I don't think that would cause the issue. Hide Permalink Zoran Regvart added a comment - 5 days ago I've contacted Algolia support. We'll see what they respond. Show Zoran Regvart added a comment - 5 days ago I've contacted Algolia support. We'll see what they respond. Hide Permalink Zoran Regvart added a comment - 3 days ago Aah， I think I found the issue， the breadcrumb element was changed from div to nav in this commit. I'll make the change in the search configuration over at Algolia. Show Zoran Regvart added a comment - 3 days ago Aah， I think I found the issue， the breadcrumb element was changed from div to nav in this commit . I'll make the change in the search configuration over at Algolia.
CAMEL-15897,Unassigned,2020-11-26T14:37:00+0000,1606383420， where 1606383420 is the epoch,Lets see if we can optimize camel-bean and the bean parameter binding， and method call resolution that happens at runtime.There are situations where we have type information and can optimize for that， and also maybe have a source code generated way for optimal performance and overhead， something like we have with csimple language.,There are no comments yet on this issue.
CAMEL-15896,James Netherton,2020-11-26T10:15:46+0000,1606367746， where 1606367746 is the epoch,It'd be good to do a similar change to CAMEL-15873 and import the Google Cloud libraries-bom in the pubsub component and upgrade to the latest pubsub version.It would also be an opportunity to clean up some of the many redundant version properties for the google cloud components.,There are no comments yet on this issue.
CAMEL-15895,Jean-Baptiste Onofré,2020-11-26T09:06:31.055Z,1606363591.055， where 1606363591.055 is the epoch,Hello， I’m using some camel rest routes and found something unexpected with the examples provided in https://camel.apache.org/manual/latest/rest-dsl.html rest("/say") .get("/hello").to("direct:hello") .get("/bye").consumes("application/json").to("direct:bye") .post("/bye").to("mock:update"); from("direct:hello") .transform().constant("Hello World"); Those routes creates 3 netty consumers visible in JMX， consuming from following endpoints: http://0.0.0.0:0/say/bye?httpMethodRestrict=POST http://0.0.0.0:0/say/bye?httpMethodRestrict=GET http://0.0.0.0:0/say/hello?httpMethodRestrict=GET However， in JMX， I can see only 2 of those endpoints: endpointBaseUri http://0.0.0.0:0/say/bye， with endpointUri http://0.0.0.0:0/say/bye?httpMethodRestrict=GET endpointBaseUri http://0.0.0.0:0/say/hello， with endpointUri http://0.0.0.0:0/say/hello?httpMethodRestrict=GET There is no endpoint for “POST” on “/bye”. Maybe it’s because it would share the same endpointBaseUri than the endpoint for “GET” on “/bye” ? I attached a screenshot if this helps where we can see the 3 consumers and only 2 endpoints. Regards，Nicolas,There are no comments yet on this issue.
CAMEL-15894,Unassigned,2020-11-25T21:36:31+0000,1606322191， where 1606322191 is the epoch,,There are no comments yet on this issue.
CAMEL-15893,Freeman Yue Fang,2020-11-26T08:49:19+0000,1606362559， where 1606362559 is the epoch,Other wise can't access this method from a proxy.For example， if we expose the service in blueprint from one bundle like<bean id="myPolicy" class="org.apache.camel.routepolicy.quartz2.CronScheduledRoutePolicy"> <property name="routeStartTime" value="....."/> <property name="routeStopTime" value="...."/> </bean> <service ref="myPolicy" auto-export="all-classes"/>And refer it in another bundle like this <reference id="remote-policy" interface="org.apache.camel.routepolicy.quartz2.ScheduledRoutePolicy" ext:proxy-method='classes'" /> <route id="route-remote" routePolicyRef="remote-policy" autoStartup="false"> .... </route>Since here the remote-policy reference from aries blueprint is actually a proxy， so we will run into error likeat org.apache.camel.routepolicy.quartz2.ScheduledJob.execute(ScheduledJob.java:62) ~[!/:2.21.0.fuse-770013-redhat-00001] at org.quartz.core.JobRunShell.run(JobRunShell.java:202) [!/:2.3.2.redhat-00007] at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573) [!/:2.3.2.redhat-00007]Caused by: java.lang.IllegalAccessException: Class org.apache.aries.proxy.impl.ProxyHandler$1 can not access a member of class org.apache.camel.routepolicy.quartz2.ScheduledRoutePolicy with modifiers "protected" at sun.reflect.Reflection.ensureMemberAccess(Reflection.java:102) ~[?:1.8.0_221] at java.lang.reflect.AccessibleObject.slowCheckMemberAccess(AccessibleObject.java:296) ~[?:1.8.0_221] at java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:288) ~[?:1.8.0_221] at java.lang.reflect.Method.invoke(Method.java:491) ~[?:1.8.0_221] at org.apache.aries.proxy.impl.ProxyHandler$1.invoke(ProxyHandler.java:54) ~[?:?] at org.apache.aries.proxy.impl.ProxyHandler.invoke(ProxyHandler.java:119) ~[?:?] at org.apache.camel.routepolicy.quartz2.$ScheduledRoutePolicy566505575.onJobExecute(Unknown Source) ~[!/:2.21.0.fuse-770013-redhat-00001] at org.apache.camel.routepolicy.quartz2.ScheduledJob.execute(ScheduledJob.java:53) ~[!/:2.21.0.fuse-770013-redhat-00001]So to make this method available for the proxy， we should change its modifier as "public"If there's no objection， I will make this change,Hide Permalink Claus Ibsen added a comment - 26/Nov/20 08:49 Its bad design to do these cross bundle services as you end up leaking the route policy between different camel contexts， that is not what its intended for. Show Claus Ibsen added a comment - 26/Nov/20 08:49 Its bad design to do these cross bundle services as you end up leaking the route policy between different camel contexts， that is not what its intended for. Hide Permalink Claus Ibsen added a comment - 26/Nov/20 08:49 But sure you are welcome to make that method public Show Claus Ibsen added a comment - 26/Nov/20 08:49 But sure you are welcome to make that method public
CAMEL-15892,Unassigned,2020-11-25T10:04:40+0000,1606280680， where 1606280680 is the epoch,I'm trying to setup a smart JMS DeadLetterChannel where the final uri of the DLQ is computed dynamically， depending on original queue name (eg adding a ".dead" suffix).I have seen in the doc that it's possible by setting the CamelJmsDestinationName header:https://camel.apache.org/components/latest/jms-component.html#_reuse_endpoint_and_send_to_different_destinations_computed_at_runtimeTherefore， I tried this:DefaultErrorHandlerBuilder dlc = deadLetterChannel("jms:queue:dummy") .useOriginalMessage() .maximumRedeliveries(2); dlc.onPrepareFailure( exchange -> { // Override destination exchange.getMessage().setHeader("CamelJmsDestinationName"， "jms:queue:test"); });I have tried many different values for CamelJmsDestinationName : "jms:queue:test" "queue:test" "test"But none of them is working; the header is ignored and the exchange always goes to original uri ("queue:dummy").I'm using Camel 3.6 and camel-sjms2 component bound to an Artemis ActiveMQ broker (the one bundled with Wildfly20):@Resource(mappedName = "java:/ConnectionFactory")private static ConnectionFactory connectionFactory; @Produces@ApplicationScoped@Named("jms")public final Sjms2Component createJmsComponent() { Sjms2Component component = new Sjms2Component(); ConnectionResource pool = new ConnectionFactoryResource(poolSize， connectionFactory); component.setConnectionResource(pool); return component; },Hide Permalink Claus Ibsen added a comment - 25/Nov/20 10:04 Just create a route as the DLC and call it via direct， and in that route you can compute the destination name and route to a jms queue. Show Claus Ibsen added a comment - 25/Nov/20 10:04 Just create a route as the DLC and call it via direct， and in that route you can compute the destination name and route to a jms queue.
CAMEL-15891,Unassigned,2020-11-25T04:57:21+0000,1606262241， where 1606262241 is the epoch,the issue is due to a mistake done by async-http-client team.Commit : https://github.com/AsyncHttpClient/async-http-client/commit/d47c56e7ee80b76a4cffd4770237239cfea0ffd6#diff-5247ce5d437efdde629533d6239bf0c24358bdf0157fa204050e908c48a8c1f3They made the ByteArrayBodyGenerator constructor package level. Due to this change， camel had to adapt and for String type of body， they changed their implementation from ByteArrayBodyGenerator to InputStreamBodyGenerator.In InputStreamBodyGenerator， the content length is by default set to -1. Since， content length was less than 0， NettyRequestFactory in async-http-client was using Transfer-Encoding header instead of Content-Length header. Solution :Async-http-client team corrected their mistake in the following commit :https://github.com/AsyncHttpClient/async-http-client/commit/4469c30f7d54352865ff321b0de0148f9698c9b5#diff-208f8952b67ba2a28d2cb2d6881485f8fc1b2b5df53a841d4a4a48b2ed8aded0 However， the change was not reverted in camel， and hence， this regression has happened.The change needs to be reverted in camel as well. This is causing regression when we are migrating from lower camel versions to higher versions. The change was introduced with the following commit.https://github.com/apache/camel/commit/684ef5786838e051cece2f510d9dafabdc310d02#diff-4d41a9fe212a88af9bc5cddb7e348f8031f39ceaf2263d7275fc4b6dd09e0867,There are no comments yet on this issue.
CAMEL-15890,Unassigned,2020-11-24T21:21:50+0000,1606234910， where 1606234910 is the epoch,When using composite APIs， URLs are not encoded correctly. E.g.， a URL for an upsert in which the Id value contains a space will result in a + for the space. As a result， the value in salesforce will have + instead of space. Since the Id value is in the path portion of the URL， the correct thing to use is "%20".,There are no comments yet on this issue.
CAMEL-15889,Unassigned,2020-11-24T14:59:52+0000,1606211992， where 1606211992 is the epoch,Hello everyone，As the title suggests I have a problem with the use of contextPath in the configuration of the RestController. I have a Spring-boot project where I have implemented SwaggerUi and Apache Camel， I noticed that by entering:restConfiguration().component("servlet").contextPath("/").apiContextPath("/*"); It doesn't add the path in the get calls， in fact the swaggerUi gives me this error:_{ "timestamp": "2020-11-24T14:37:01.573+0000"， "status": 404， "error": "Not Found"， "message": "Not Found"， "path": "/service-activator/ocs/homologation" }_ But putting the context path in application.yml gives the desired effect， making the get call work.For more information on the code I opened this ticket on Stack Owerflow accessible at this link for the same doubt : https://stackoverflow.com/questions/64961716/how-to-use-the-context-path-in-camel-routesIn your documentation regarding the contextPath ( https://camel.apache.org/manual/latest/rest-dsl.html ) I understand that it is not simply used as some users have suggested as simple API-XML documentation， as that should be the job of the .apiContextPath (""). I have already written in the various Camel forums and asked various Camel developers for clarification on the subject without receiving a reply.,Hide Permalink Andrea Cosentino added a comment - 24/Nov/20 14:59 There is a thread on mailing list and you already open the same issue. Please don't duplicate issues. If you are in a hurry or you need a solution sooner than the usual time， there are commercial offerings. Thanks. Show Andrea Cosentino added a comment - 24/Nov/20 14:59 There is a thread on mailing list and you already open the same issue. Please don't duplicate issues. If you are in a hurry or you need a solution sooner than the usual time， there are commercial offerings. Thanks.
CAMEL-15888,Luca Burgazzoli,2020-11-24T10:35:31+0000,1606196131， where 1606196131 is the epoch,,There are no comments yet on this issue.
CAMEL-15887,Luca Burgazzoli,2020-11-24T10:30:58+0000,1606195858， where 1606195858 is the epoch,The PropertiesBindingSupport has code to deal with map/list/arrays but we should add support for properties,There are no comments yet on this issue.
CAMEL-15886,Claus Ibsen,2020-11-24T10:26:58+0000,1606195618， where 1606195618 is the epoch,If a component has option that is collection based (list，map etc) then we should include metadata what the value types are so we know what those are storing.And the configurers should then generate getCollectionValueType in the source code. We do this for endpoints and others. But components is missing.,There are no comments yet on this issue.
CAMEL-15885,Unassigned,2020-11-24T10:26:29+0000,1606195589， where 1606195589 is the epoch,<quarkus-plugin.version>1.8.1.Final</quarkus-plugin.version><dependency> <groupId>org.apache.camel.quarkus</groupId> <artifactId>camel-quarkus-aws-kinesis</artifactId></dependency> Our producer sends zipped messages. When reading those about 1/4 of all msgs cannot be unzipped. When digging into the message blob it became clear that one message contains multiple data blobs. That's probably due to the producer side message aggregation ( https://docs.aws.amazon.com/streams/latest/dev/kinesis-kpl-consumer-deaggregation.html). Instead of a single message the data from the Record entity contains obviously several merged data blobs that I'm unable to read (zip error when trying to decompress). I'd expect to receive several msgs in my processor instead of several msgs merged into one msg blob. from("aws-kinesis://" lsc.getStreamName() "?amazonKinesisClient=client&bridgeErrorHandler=true&maxResultsPerRequest=500&greedy=true&delay=0&runLoggingLevel=TRACE&iteratorType=LATEST") .routeId("vssKinesisStream") .log("LSC message received.") .onException(java.util.zip.ZipException.class).process(exchange -> { metrics.countInvalidPerSec(); }) .stop() .end() .process(exchange -> { metrics.countReceivedPerSec(); Record record = exchange.getIn().getBody(Record.class); String message = extractMessageFromRecord(record); exchange.getIn().setBody(message); metrics.countValidPerSec(); LOG.info("Extracted message: " + message); lastReadMsgAge = Duration.between(record.getApproximateArrivalTimestamp().toInstant()， Instant.now()); },Hide Permalink Andrea Cosentino added a comment - 24/Nov/20 10:26 If this is related to camel-quarkus， report on https://github.com/apache/camel-quarkus Show Andrea Cosentino added a comment - 24/Nov/20 10:26 If this is related to camel-quarkus， report on https://github.com/apache/camel-quarkus Hide Permalink Andrea Cosentino added a comment - 24/Nov/20 10:27 By the way this is the expected behavior. Show Andrea Cosentino added a comment - 24/Nov/20 10:27 By the way this is the expected behavior. Hide Permalink Andrea Cosentino added a comment - 24/Nov/20 10:32 The component is using the synchronous portion of the AWS SDK， what you're talking about is kpl and kcl and they are not used in this component. Show Andrea Cosentino added a comment - 24/Nov/20 10:32 The component is using the synchronous portion of the AWS SDK， what you're talking about is kpl and kcl and they are not used in this component. Hide Permalink m added a comment - 24/Nov/20 10:33 - edited Thanks for your reply. How can one de-aggregate such an aggregated-messages-blob stored in the Record body? Isn't that a missing feature when the KCL supports automatic de-aggregation of KPL user records. Show m added a comment - 24/Nov/20 10:33 - edited Thanks for your reply. How can one de-aggregate such an aggregated-messages-blob stored in the Record body? Isn't that a missing feature when the KCL supports automatic de-aggregation of KPL user records. Hide Permalink Andrea Cosentino added a comment - 24/Nov/20 10:41 I believe you'll have to manage this on the consumer side. By the way， to me， this is not a bug， it's a feature request. Show Andrea Cosentino added a comment - 24/Nov/20 10:41 I believe you'll have to manage this on the consumer side. By the way， to me， this is not a bug， it's a feature request. Hide Permalink Andrea Cosentino added a comment - 24/Nov/20 10:42 And no， it's not a missing feature， since we are focusing on camel-aws2-kinesis， based on v2 of SDK. So camel-aws-kinesis won't be changed or at least， not for new feature. Show Andrea Cosentino added a comment - 24/Nov/20 10:42 And no， it's not a missing feature， since we are focusing on camel-aws2-kinesis， based on v2 of SDK. So camel-aws-kinesis won't be changed or at least， not for new feature. Hide Permalink m added a comment - 24/Nov/20 10:45 How does aws2-kinesis behave different regarding that ? Show m added a comment - 24/Nov/20 10:45 How does aws2-kinesis behave different regarding that ? Hide Permalink Andrea Cosentino added a comment - 24/Nov/20 10:47 This is a particular case， so I'm not sure if we have the same problem on aws2-kinesis too， but there we can add the feature or at least we can investigate how to do that and what is needed， for aws-kinesis it probably makes less sense. Show Andrea Cosentino added a comment - 24/Nov/20 10:47 This is a particular case， so I'm not sure if we have the same problem on aws2-kinesis too， but there we can add the feature or at least we can investigate how to do that and what is needed， for aws-kinesis it probably makes less sense. Hide Permalink Andrea Cosentino added a comment - 24/Nov/20 10:48 At some point we'll deprecate the camel-aws component in favor of camel-aws2 Show Andrea Cosentino added a comment - 24/Nov/20 10:48 At some point we'll deprecate the camel-aws component in favor of camel-aws2
CAMEL-15884,Unassigned,2020-11-23T18:25:24+0000,1606137924， where 1606137924 is the epoch,Generated DTOs do not have a reference to related objects if the related object does not have at least one external ID field. The logic for this was probably that you can't use a related object in upserts if that related object doesn't have an external Id field. There are two issues with this. 1) you can upsert on the standard `Id` field， and 2) there's nowhere to put the related objects returned in a parent-to-child relationship query. e.g. the result from this querySELECT Id， RecordType.Name FROM Contactwill not contain the RecordType object， because RecordType was not in the DTO Java class.,There are no comments yet on this issue.
CAMEL-15883,Unassigned,2020-11-23T18:07:31+0000,1606136851， where 1606136851 is the epoch,There was a question on SO about this functionhttps://stackoverflow.com/questions/64972954/using-apache-camel-for-routing-grpc-traffic-using-the-same-port-per-route#new-answer,There are no comments yet on this issue.
CAMEL-15882,Unassigned,2020-11-23T16:22:12+0000,1606130532， where 1606130532 is the epoch,Currently， upsert is returning a CreateSObjectResult instance， which contains only a subset of the information salesforce returns from an upsert. We need an UpsertSObjectResult class to capture all the information returned from upsert.,There are no comments yet on this issue.
CAMEL-15881,Nicola Ferraro,2020-11-23T14:15:33+0000,1606122933， where 1606122933 is the epoch,I've been working on a re-balancing cluster service implementation that can be used to assign to application instances an equal number of cluster-service locks， when multiple ones are used in the same application. This can be used to re-balance partitions in a cluster of service instances， if locks are 1:1 partition keys.,There are no comments yet on this issue.
CAMEL-15880,Andrea Cosentino,2020-11-23T12:37:47+0000,1606117067， where 1606117067 is the epoch,There are breaking change,There are no comments yet on this issue.
CAMEL-15879,Jiri Ondrusek,2020-11-23T09:44:18+0000,1606106658， where 1606106658 is the epoch,Current avro used in camel is 1.9.1 (see code)Quarkus (and camel-quarkus) are using 1.10.0 (see code)It would be nice to bump avro version in camel to 1.10.0.,Hide Permalink Andrea Cosentino added a comment - 23/Nov/20 09:44 The real trouble here is camel-karaf Show Andrea Cosentino added a comment - 23/Nov/20 09:44 The real trouble here is camel-karaf Hide Permalink Jiri Ondrusek added a comment - 23/Nov/20 10:03 - edited I've just tried to run test with 1.10. It seems that in upgrade of avro-ipc-netty， there is a change from netty 3.x to netty 4.x (commit). Andrea Cosentino Is this the reason of problem for karaf? (execution also showed， that after upgrade there is a problem with closing of `org.apache.avro.ipc.Server` which hangs) In case that problem with karaf can not be solved， I can try to use avro 1.10.0 in camel-quarkus， because there is no karaf feature involved. Then I'll try to solve netty hang in camel-quarkus. Show Jiri Ondrusek added a comment - 23/Nov/20 10:03 - edited I've just tried to run test with 1.10. It seems that in upgrade of avro-ipc-netty， there is a change from netty 3.x to netty 4.x ( commit ). Andrea Cosentino Is this the reason of problem for karaf? (execution also showed， that after upgrade there is a problem with closing of `org.apache.avro.ipc.Server` which hangs) In case that problem with karaf can not be solved， I can try to use avro 1.10.0 in camel-quarkus， because there is no karaf feature involved. Then I'll try to solve netty hang in camel-quarkus. Hide Permalink Andrea Cosentino added a comment - 25/Nov/20 07:35 I remember the last time I tried the bundle for 1.10， there were trouble with the feature. I think it makes sense to do the upgrade in Camel， instead that camel-quarkus. We need to be in sync from top to bottom， diverging is not good. Show Andrea Cosentino added a comment - 25/Nov/20 07:35 I remember the last time I tried the bundle for 1.10， there were trouble with the feature. I think it makes sense to do the upgrade in Camel， instead that camel-quarkus. We need to be in sync from top to bottom， diverging is not good. Hide Permalink Jiri Ondrusek added a comment - 25/Nov/20 13:21 I'll try to prepare upgrade to 1.10.0. There should be no problems with compatibility - camel-quarkus extension with upgraded avro (1.10.0) is passing its integration tests. I'll focus on karaf feature. Show Jiri Ondrusek added a comment - 25/Nov/20 13:21 I'll try to prepare upgrade to 1.10.0. There should be no problems with compatibility - camel-quarkus extension with upgraded avro (1.10.0) is passing its integration tests. I'll focus on karaf feature. Hide Permalink Jiri Ondrusek added a comment - 27/Nov/20 13:19 Upgrade to avro 1.10.1 brings change to netty 4.x. Among other it involves longer times required to close netty server (it takes about 4 seconds - PR). Even with optimization， there is need to close netty server 36 times (for all tests in the module). Which means that the time taken by all the tests is much higher. On my local computer it takes 0:29 before upgrade and 2:44 after upgrade. I'm not sure whether it is acceptable or if some tests should be moved among slower tests. Andrea Cosentino， you are right. Unfortunately it is not possible to update karaf feature. `avro-ipc-jetty` requires javax.servlet.api >= 4.0 and also jetty server. But there is no jetty server available as karaf feature which is using servlet-api >= 4.0. The only solution is to wait for Jetty 10... Refactored tests are prepared in my branch https://github.com/JiriOndrusek/camel/tree/avro-rpc-10.1 Show Jiri Ondrusek added a comment - 27/Nov/20 13:19 Upgrade to avro 1.10.1 brings change to netty 4.x. Among other it involves longer times required to close netty server (it takes about 4 seconds - PR ). Even with optimization， there is need to close netty server 36 times (for all tests in the module). Which means that the time taken by all the tests is much higher. On my local computer it takes 0:29 before upgrade and 2:44 after upgrade. I'm not sure whether it is acceptable or if some tests should be moved among slower tests. Andrea Cosentino ， you are right. Unfortunately it is not possible to update karaf feature . `avro-ipc-jetty` requires javax.servlet.api >= 4.0 and also jetty server. But there is no jetty server available as karaf feature which is using servlet-api >= 4.0. The only solution is to wait for Jetty 10... Refactored tests are prepared in my branch https://github.com/JiriOndrusek/camel/tree/avro-rpc-10.1 Hide Permalink Andrea Cosentino added a comment - 27/Nov/20 13:30 I think we can also decide to drop the camel-avro karaf feature. The Karaf/OSGi effort is becoming more and more best effort. Claus Ibsen wdyt? Show Andrea Cosentino added a comment - 27/Nov/20 13:30 I think we can also decide to drop the camel-avro karaf feature. The Karaf/OSGi effort is becoming more and more best effort. Claus Ibsen wdyt? Hide Permalink Claus Ibsen added a comment - 27/Nov/20 13:57 Yeah its fine to drop karaf feature. Show Claus Ibsen added a comment - 27/Nov/20 13:57 Yeah its fine to drop karaf feature.
CAMEL-15878,Andrea Cosentino,2020-11-23T09:27:12+0000,1606105632， where 1606105632 is the epoch,,Hide Permalink Andrea Cosentino added a comment - 23/Nov/20 09:27 The test weren't correct. Show Andrea Cosentino added a comment - 23/Nov/20 09:27 The test weren't correct.
CAMEL-15877,Andrea Cosentino,2020-11-23T03:10:24+0000,1606083024， where 1606083024 is the epoch,We should be using XStream's whitelist-based Security Framework. Currently getting a lot of this on stderr:Security framework of XStream not explicitly initialized， using predefined black list on your own risk.More info here: XStream Security Framework,There are no comments yet on this issue.
CAMEL-15876,Andrea Tarocchi,2020-11-22T22:21:43+0000,1606065703， where 1606065703 is the epoch,SlackMessage class has non static inner classes that don't work very well with serialization in general and with jackson in particular,There are no comments yet on this issue.
CAMEL-15875,Unassigned,2020-11-22T10:21:19+0000,1606022479， where 1606022479 is the epoch,Hello everyone! I'm new to Camel. I'm trying to set the *contextPath* directly from the route configure as follows:public void configure() {restConfiguration().component("servlet").contextPath("/service/"); //some code here//}But when I go to use swaggerUi for my API， it doesn't automatically take the context-path unless I explicitly insert it in my application.yml:Then when I go to the swagger I should directly expect the default insertion of "/ service /" in my get， but this does not happen if I insert the contextPath from the routes. How can I insert the contextPath in the routes without having to use the camel in the application.yml?,Hide Permalink Andrea Cosentino added a comment - 22/Nov/20 10:21 This seems more a question than a bug. Ask on the user or dev mailing list first Show Andrea Cosentino added a comment - 22/Nov/20 10:21 This seems more a question than a bug. Ask on the user or dev mailing list first Hide Permalink Claus Ibsen added a comment - 22/Nov/20 10:46 For servlet you must configure the context path how you do that with servlets. The context-path in the rest configuration is for documentation / swagger doc generation purposes. Show Claus Ibsen added a comment - 22/Nov/20 10:46 For servlet you must configure the context path how you do that with servlets. The context-path in the rest configuration is for documentation / swagger doc generation purposes. Hide Permalink Federico Trotto added a comment - 22/Nov/20 13:40 Claus Ibsen So I have no way to use the contextPath in the routes to make the swagger automatically insert that path to make my rest calls? Do I have to specify it again in the application.yml? Show Federico Trotto added a comment - 22/Nov/20 13:40 Claus Ibsen So I have no way to use the contextPath in the routes to make the swagger automatically insert that path to make my rest calls? Do I have to specify it again in the application.yml? Hide Permalink Federico Trotto added a comment - 22/Nov/20 13:41 Andrea Cosentino Do you know who or how to bring this issue to some developer's attention? Show Federico Trotto added a comment - 22/Nov/20 13:41 Andrea Cosentino Do you know who or how to bring this issue to some developer's attention? Hide Permalink Federico Trotto added a comment - 23/Nov/20 01:58 my problem is using the Path context in the routes. If the septum in the routes this is not taken into consideration in any way， while if I insert it in the application.yml， when I go to swaggerUI， the get works and recognizes the path. Is there a problem with the contextPath in camel routes or am I missing the use that can be made of it? Show Federico Trotto added a comment - 23/Nov/20 01:58 my problem is using the Path context in the routes. If the septum in the routes this is not taken into consideration in any way， while if I insert it in the application.yml， when I go to swaggerUI， the get works and recognizes the path. Is there a problem with the contextPath in camel routes or am I missing the use that can be made of it?
CAMEL-15874,Unassigned,2020-11-20T15:57:55.095Z,1605869875.095， where 1605869875.095 is the epoch,Consuming AMQP messages from RabbitMQ like the following results in multiple physical connections being set up and used. Instead of using one single connection and multiple channels per connection， as RabbitMQ suggests.<route id="fooRoute"> <!-- ... --> <from uri="rabbitmq:?queue=foo.queue&amp;skipQueueBind=true"/> <!-- ... --></route><route id="barRoute"> <!-- ... --> <from uri="rabbitmq:?queue=bar.queue&amp;skipQueueBind=true"/> <!-- ... --></route>Also using the following configuration ...camel: component: rabbitmq: autoDetectConnectionFactory: true skip-exchange-declare: true connection-factory: cachedConnectionFactory@Configurationpublic class Config{ private final org.springframework.amqp.rabbit.connection.CachingConnectionFactory rabbitConnectionFactory; // ... @Bean com.rabbitmq.client.ConnectionFactory cachedConnectionFactory() { return rabbitConnectionFactory.getRabbitConnectionFactory(); }}... results in the following log output:2020-11-20 16:35:13.854 DEBUG 17625 --- [ main] o.a.c.c.rabbitmq.RabbitMQConsumer : Using executor org.apache.camel.util.concurrent.RejectableThreadPoolExecutor@4cd6f08b[Running， pool size = 0， active threads = 0， queued tasks = 0， completed tasks = 0][rabbitmq://?queue=foo.queue&skipQueueBind=true]2020-11-20 16:35:13.881 DEBUG 17625 --- [ main] o.a.c.c.rabbitmq.RabbitMQConsumer : Created connection: amqp://ebb-client@10.131.67.XXX:5672/2020-11-20 16:35:13.892 DEBUG 17625 --- [ main] o.a.c.component.rabbitmq.RabbitConsumer : Created channel: AMQChannel(amqp://ebb-client@10.131.67.XXX:5672/，1)2020-11-20 16:35:13.903 INFO 17625 --- [ main] o.a.c.i.e.InternalRouteStartupManager : Route: foo_distributorRoute started and consuming from: rabbitmq://...2020-11-20 16:35:13.905 DEBUG 17625 --- [ main] o.a.c.c.rabbitmq.RabbitMQConsumer : Using executor org.apache.camel.util.concurrent.RejectableThreadPoolExecutor@58835bba[Running， pool size = 0， active threads = 0， queued tasks = 0， completed tasks = 0][rabbitmq://?queue=bar.queue&skipQueueBind=true]2020-11-20 16:35:13.914 DEBUG 17625 --- [ main] o.a.c.c.rabbitmq.RabbitMQConsumer : Created connection: amqp://ebb-client@10.131.67.XXX:5672/2020-11-20 16:35:13.918 DEBUG 17625 --- [ main] o.a.c.component.rabbitmq.RabbitConsumer : Created channel: AMQChannel(amqp://ebb-client@10.131.67.XXX:5672/，1)2020-11-20 16:35:13.925 INFO 17625 --- [ main] o.a.c.i.e.InternalRouteStartupManager : Route: bar_distributorRoute started and consuming from: rabbitmq://See the attached screenshots from the RabbitMQ management dashboard.,Hide Permalink Philipp added a comment - 26/Nov/20 07:46 I increased the severity because when connection errors occur， the above described behavior results in: Hundreds of connections are created and canceled instead of only one This does not only increase a huge overhead but also spams the management dashboard "connections" view and the logs of the RabbitMQ Show Philipp added a comment - 26/Nov/20 07:46 I increased the severity because when connection errors occur， the above described behavior results in: Hundreds of connections are created and canceled instead of only one This does not only increase a huge overhead but also spams the management dashboard "connections" view and the logs of the RabbitMQ Hide Permalink Claus Ibsen added a comment - 26/Nov/20 08:51 You have configured both autoDetectConnectionFactory: true and an explicit CF. I would assume you only set one of them. Show Claus Ibsen added a comment - 26/Nov/20 08:51 You have configured both autoDetectConnectionFactory: true and an explicit CF. I would assume you only set one of them. Hide Permalink Jörg Gonschior added a comment - 5 days ago - edited Working with Philipp at the same project. Tested both， but it ends up in multiple connections. The desired scenario of only one connection using multiple channels was not reached. 1. autoDetectConnectionFactory: true # connection-factory: cachedConnectionFactory #inactive pom.xml does not contain: spring-boot-starter-amqp above Configuration class is not present Result: Instead of one connection 2 are added. Both connections are created from the <from uri expression. Name username ... 10.131.65.XXX:60427 ? rabbit-admin 10.131.65.XXX:60425 ? rabbit-admin ... (ASCII art from Rabbit console) 2. autoDetectConnectionFactory: false connection-factory: cachedConnectionFactory #active pom.xml contains: spring-boot-starter-amqp above Configuration class is present Result: Instead of one connection 3 are added. 2 connections with the name "?" are created from the <from uri expression. The third one comes from the dependency spring-boot-starter-amqp. This dependency is needed to be able to use the class org.springframework.amqp.rabbit.connection.CachingConnectionFactory in the config class. Adding this we have to configure the rabbitMQ connection for Spring additionally using the properties: spring: rabbitmq: host: my-simulation-server port: 5672 username: rabbit-admin password: xxx Name username ... 10.131.65.XXX:60420 rabbitConnectionFactory#3b57dba4:0 rabbit-admin 10.131.65.XXX:60427 ? rabbit-admin 10.131.65.XXX:60425 ? rabbit-admin ... (ASCII art from Rabbit console) Show Jörg Gonschior added a comment - 5 days ago - edited Working with Philipp at the same project. Tested both， but it ends up in multiple connections. The desired scenario of only one connection using multiple channels was not reached. 1. autoDetectConnectionFactory: true # connection-factory: cachedConnectionFactory #inactive pom.xml does not contain: spring-boot-starter-amqp above Configuration class is not present Result: Instead of one connection 2 are added. Both connections are created from the <from uri expression. Name username ... 10.131.65.XXX:60427 ? rabbit-admin 10.131.65.XXX:60425 ? rabbit-admin ... (ASCII art from Rabbit console) 2. autoDetectConnectionFactory: false connection-factory: cachedConnectionFactory #active pom.xml contains: spring-boot-starter-amqp above Configuration class is present Result: Instead of one connection 3 are added. 2 connections with the name "?" are created from the <from uri expression. The third one comes from the dependency spring-boot-starter-amqp. This dependency is needed to be able to use the class org.springframework.amqp.rabbit.connection.CachingConnectionFactory in the config class. Adding this we have to configure the rabbitMQ connection for Spring additionally using the properties: spring: rabbitmq: host: my-simulation-server port: 5672 username: rabbit-admin password: xxx Name username ... 10.131.65.XXX:60420 rabbitConnectionFactory#3b57dba4:0 rabbit-admin 10.131.65.XXX:60427 ? rabbit-admin 10.131.65.XXX:60425 ? rabbit-admin ... (ASCII art from Rabbit console)
CAMEL-15873,James Netherton,2020-11-20T15:43:16+0000,1605868996， where 1605868996 is the epoch,Ideally what I'd like to do is upgrade and switch from com.google.apis:google-api-services-bigquery to using com.google.cloud:google-cloud-bigquery. Mainly for Quarkus compatibility.What would also be good， is if the Google cloud libraries-bom was imported so that we don't need to specify all of the dependency versions for the Google cloud related components (BigQuery， gRPC， PubSub).That way we could keep those components compatible with each other and maybe cut down on the amount of version properties that we have to manage.The problem comes with adjusting the bigquery karaf feature. google-cloud-bigquery pulls in some additional dependencies and that means having to create more version properties in the camel parent pom to manege them. Which seems like a needless maintenance overhead when all I need to do in the component is import a BOM to get the dependencies I need.,There are no comments yet on this issue.
CAMEL-15872,Unassigned,2020-11-20T10:33:43+0000,1605850423， where 1605850423 is the epoch,In camel-graphql Authorization header is hard coded to be Bearer -type:https://github.com/apache/camel/blob/aab1568195d9570233c0152f40efc8a6d57e64b2/components/camel-graphql/src/main/java/org/apache/camel/component/graphql/GraphqlEndpoint.java#L114Can you implement possibility to change it to Application with some configuration option? In our graphql servers the JWT token is Authorization: Application TOKEN_HERE,Hide Permalink Andrea Cosentino added a comment - 20/Nov/20 10:33 You're welcome to provide a PR. Show Andrea Cosentino added a comment - 20/Nov/20 10:33 You're welcome to provide a PR. Hide Permalink Andrea Cosentino added a comment - 20/Nov/20 10:34 and make it configurable. Show Andrea Cosentino added a comment - 20/Nov/20 10:34 and make it configurable. Hide Permalink Tapio Piironen added a comment - 20/Nov/20 11:52 Sure， was unsure of coding format but created: https://github.com/apache/camel/pull/4643 Show Tapio Piironen added a comment - 20/Nov/20 11:52 Sure， was unsure of coding format but created: https://github.com/apache/camel/pull/4643 Hide Permalink Claus Ibsen added a comment - 23/Nov/20 16:01 Thanks for the PR Show Claus Ibsen added a comment - 23/Nov/20 16:01 Thanks for the PR
CAMEL-15871,Andrea Cosentino,2020-11-20T06:18:01+0000,1605835081， where 1605835081 is the epoch,Class org.apache.camel.component.milo.server.internal.CamelServerItem replaces name of node. It makes unclear how to get value of OPC/UA node.See row https://github.com/apache/camel/blob/ece054b8f8a05ffa6ddfb8942a140176a5488943/components/camel-milo/src/main/java/org/apache/camel/component/milo/server/internal/CamelServerItem.java#L58,There are no comments yet on this issue.
CAMEL-15870,Andrea Cosentino,2020-11-19T22:06:16+0000,1605805576， where 1605805576 is the epoch,There are problem with openstack4j 3.8 and guava version of dependency.,There are no comments yet on this issue.
CAMEL-15869,Unassigned,2020-11-19T19:20:35+0000,1605795635， where 1605795635 is the epoch,I would like to do a select query with pagination using JPA component. I don't see existing support for something like that while it's a common feature of JPA lib.,Hide Permalink Claus Ibsen added a comment - 19/Nov/20 19:20 camel-jpa is not a jpa lib. Its used for data exchange from a database via jpa. Can you describe more what your use-case is and how that would look like in camel-jpa world ? Show Claus Ibsen added a comment - 19/Nov/20 19:20 camel-jpa is not a jpa lib. Its used for data exchange from a database via jpa. Can you describe more what your use-case is and how that would look like in camel-jpa world ? Hide Permalink Nemanja Žunić added a comment - 19/Nov/20 19:29 - edited I would like to fetch records from the DB table， for example， 5 at a time. Without removing the records in the database. In the same way that you can fetch pages of data using jpa lib - specify page size， page number， query and you get the data. Sounds like a pretty basic use-case but I can't think of the solution with the current jpa component. I managed to do it only with sql component by writing specific query that allows me to fetch data in that way. But I would rather use jpa component because I get data as entity objects which is really handy. Show Nemanja Žunić added a comment - 19/Nov/20 19:29 - edited I would like to fetch records from the DB table， for example， 5 at a time. Without removing the records in the database. In the same way that you can fetch pages of data using jpa lib - specify page size， page number， query and you get the data. Sounds like a pretty basic use-case but I can't think of the solution with the current jpa component. I managed to do it only with sql component by writing specific query that allows me to fetch data in that way. But I would rather use jpa component because I get data as entity objects which is really handy.
CAMEL-15868,Unassigned,2020-11-19T11:38:22+0000,1605767902， where 1605767902 is the epoch,Upgrading camel-core from 2.24.1 to camel-core 3.4.0 and used <feature>camel-catalog</feature>But while installing on karaf container 4.2.6 I am facing below issue.karaf@root()> feature:install camel-catalog Error executing command: No matching features for camel-catalog/0 Any help/suggestion is most welcome!,Hide Permalink Andrea Cosentino added a comment - 19/Nov/20 11:38 Ask on the user mailing list first. Show Andrea Cosentino added a comment - 19/Nov/20 11:38 Ask on the user mailing list first. Hide Permalink Andrea Cosentino added a comment - 19/Nov/20 12:53 In camel 3 the camel-core-catalog is included in camel-core feature. Show Andrea Cosentino added a comment - 19/Nov/20 12:53 In camel 3 the camel-core-catalog is included in camel-core feature. Hide Permalink Andrea Cosentino added a comment - 19/Nov/20 12:54 https://github.com/apache/camel-karaf/blob/master/platforms/karaf/features/src/main/resources/features.xml Show Andrea Cosentino added a comment - 19/Nov/20 12:54 https://github.com/apache/camel-karaf/blob/master/platforms/karaf/features/src/main/resources/features.xml Hide Permalink PrabhuSharma added a comment - 19/Nov/20 15:19 Thank you so much Andrea Cosentino! camel-core-catalog is there as a bundle but can you please help to find feature="camel-catalog" in camel 3. Expected behaviour with camel version 2.15.2/2.24.1 Below url has feature as "camel-catalog" https://repo1.maven.org/maven2/org/apache/camel/karaf/apache-camel/2.15.2/apache-camel-2.15.2-features.xml <feature name="camel-catalog" version="2.15.2" resolver="(obr)" start-level="50"> <feature version="2.15.2">camel-core</feature> <bundle>mvn:org.apache.camel.karaf/camel-karaf-commands-catalog/2.15.2</bundle> </feature> Query - Upgraded camel version 3.4.0 and feature ="camel-catalog" is not there but it require to install in Karaf container So what we can do to resolve this. https://repo1.maven.org/maven2/org/apache/camel/karaf/apache-camel/3.4.0/apache-camel-3.4.0-features.xml Show PrabhuSharma added a comment - 19/Nov/20 15:19 Thank you so much Andrea Cosentino! camel-core-catalog is there as a bundle but can you please help to find feature= "camel-catalog " in camel 3. Expected behaviour with camel version 2.15.2/2.24.1 Below url has feature as "camel-catalog" https://repo1.maven.org/maven2/org/apache/camel/karaf/apache-camel/2.15.2/apache-camel-2.15.2-features.xml <feature name="camel-catalog" version="2.15.2" resolver="(obr)" start-level="50"> <feature version="2.15.2">camel-core</feature> <bundle>mvn:org.apache.camel.karaf/camel-karaf-commands-catalog/2.15.2</bundle> </feature> Query - Upgraded camel version 3.4.0 and feature ="camel-catalog " is not there but it require to install in Karaf container So what we can do to resolve this. https://repo1.maven.org/maven2/org/apache/camel/karaf/apache-camel/3.4.0/apache-camel-3.4.0-features.xml Hide Permalink Andrea Cosentino added a comment - 19/Nov/20 15:22 There is no camel-catalog karaf feature in camel 3 Show Andrea Cosentino added a comment - 19/Nov/20 15:22 There is no camel-catalog karaf feature in camel 3 Hide Permalink PrabhuSharma added a comment - 19/Nov/20 18:38 That's correct! But to resolve camel-catalog installation issue on Karaf container 4.2.6 with camel 3.x what other way I can use. Because before deprecated camel-catalog there should be some alternate way to make it compatible with camel 3.x. Thank you so much so far help Andrea Cosentino! Show PrabhuSharma added a comment - 19/Nov/20 18:38 That's correct! But to resolve camel-catalog installation issue on Karaf container 4.2.6 with camel 3.x what other way I can use. Because before deprecated camel-catalog there should be some alternate way to make it compatible with camel 3.x. Thank you so much so far help Andrea Cosentino! Hide Permalink Andrea Cosentino added a comment - 19/Nov/20 22:05 - edited You cannot use a feature of version 2.x with Camel 3.x. You need to switch to camel 3.x features. There is no way of making a 2.x feature compatible with 3.x， you need to change your feature and be compliant with the new camel 3.x structure. Show Andrea Cosentino added a comment - 19/Nov/20 22:05 - edited You cannot use a feature of version 2.x with Camel 3.x. You need to switch to camel 3.x features. There is no way of making a 2.x feature compatible with 3.x， you need to change your feature and be compliant with the new camel 3.x structure.
CAMEL-15867,Andrea Cosentino,2020-11-19T08:24:32+0000,1605756272， where 1605756272 is the epoch,,There are no comments yet on this issue.
CAMEL-15866,Unassigned,2020-11-19T03:46:16+0000,1605739576， where 1605739576 is the epoch,Starting with salesforce API v37 (from Summer '16 release. Current is v50)， the response to SOSL searches changed. We should support both versions.From salesforce docs:New searchRecords wrapper in response bodyA new searchRecords tag surrounds the content in responses. For example:{ "searchRecords" : [ { "attributes" : { "type" : "Contact"， "url" : "/services/data/v36.0/sobjects/Contact/003xx000004TraiAAC" }， "Id" : "003xx000004TraiAAC"， "FirstName" : "Smith"， "LastName" : "Johnson" }， { "attributes" : { "type" : "Account"， "url" : "/services/data/v36.0/sobjects/Account/001xx000003DHXnAAO" }， "Id" : "001xx000003DHXnAAO"， "NumberOfEmployees" : 100 } ]},There are no comments yet on this issue.
CAMEL-15865,Unassigned,2020-11-22T14:02:21.203Z,1606035741.203， where 1606035741.203 is the epoch,GitHub component can't use username/password anymore because of https://developer.github.com/changes/2020-02-14-deprecating-password-auth/. Important note:All password authentication will return a status code of 401 starting:November 13， 2020 at 16:00 UTCSuch error is returned when using username/passwordorg.eclipse.egit.github.core.client.RequestException: Bad credentials. The API can't be accessed using username/password authentication. Please create a personal access token to access this endpoint: http://github.com/settings/tokens (401),Hide Permalink Mohammadu Milhar Mahas added a comment - 22/Nov/20 14:02 Hi， I'm Mohammadu Milhar Mahas， a second year undergraduate in Computer science at the University of Jaffna， Srilanka. i would like to do this priject for GSoC 2021. please help me get started. https://issues.apache.org/jira/secure/AddComment!default.jspa?id=13338110 Show Mohammadu Milhar Mahas added a comment - 22/Nov/20 14:02 Hi， I'm Mohammadu Milhar Mahas， a second year undergraduate in Computer science at the University of Jaffna， Srilanka. i would like to do this priject for GSoC 2021. please help me get started. https://issues.apache.org/jira/secure/AddComment!default.jspa?id=13338110 Hide Permalink Andrea Cosentino added a comment - 23/Nov/20 08:37 Hello， we'll mark gsoc 2021 issue， this is not one of them， because it's not complex enough. Show Andrea Cosentino added a comment - 23/Nov/20 08:37 Hello， we'll mark gsoc 2021 issue， this is not one of them， because it's not complex enough. Hide Permalink Mohammadu Milhar Mahas added a comment - 23/Nov/20 08:50 Thanks for responding. can you suggest an issue for gsoc 2021? Show Mohammadu Milhar Mahas added a comment - 23/Nov/20 08:50 Thanks for responding. can you suggest an issue for gsoc 2021?
CAMEL-15864,Unassigned,2020-11-18T13:57:24+0000,1605689844， where 1605689844 is the epoch,When passing variable to graphQL query， the docs says to reference a bean in the registry using variables=#beanName syntax. But the contents of this bean is static; there doesn't appear to be a good way to set the values of this bean in a dynamic way， which kind of defeats the purpose to having query variables,There are no comments yet on this issue.
CAMEL-15863,Unassigned,2020-11-17T17:19:14+0000,1605615554， where 1605615554 is the epoch,The Jetty HttpClient default for requestBufferSize is 4k. Since any SOQL queries must fit in this buffer， 4k will be insufficient on almost any project. It can be easily configured via camel.component.salesforce.http-client-properties.requestBufferSize， but discoverability of this is quite low.I think it might be best to make this a component option， and defaulted to 8k. But I'd like feedback before submitting a PR. Zoran Regvart Claus Ibsen,Hide Permalink Zoran Regvart added a comment - 17/Nov/20 17:19 I'm not against adding a component property， there might be an easier way， perhaps we can set the default to 8KB and add a note to the documentation? Show Zoran Regvart added a comment - 17/Nov/20 17:19 I'm not against adding a component property， there might be an easier way， perhaps we can set the default to 8KB and add a note to the documentation? Hide Permalink Jeremy Ross added a comment - 23/Nov/20 16:54 Zoran Regvart Either way is probably fine. A while back I added an httpMaxContentLength option， so I just defaulted to handling this the same way. LMK what you think. Show Jeremy Ross added a comment - 23/Nov/20 16:54 Zoran Regvart Either way is probably fine. A while back I added an httpMaxContentLength option， so I just defaulted to handling this the same way. LMK what you think. Hide Permalink Zoran Regvart added a comment - 23/Nov/20 19:25 Jeremy Ross yeah， add the component property， but I would also change the default so folk are not hit by this too often. Show Zoran Regvart added a comment - 23/Nov/20 19:25 Jeremy Ross yeah， add the component property， but I would also change the default so folk are not hit by this too often.
CAMEL-15862,Andrea Cosentino,2020-11-17T12:52:40+0000,1605599560， where 1605599560 is the epoch,,There are no comments yet on this issue.
CAMEL-15861,James Netherton,2020-11-17T11:00:38+0000,1605592838， where 1605592838 is the epoch,GooglePubSubProducer does some conversion of the message body before it gets sent to the destination topic， so that is of the expected ByteString type. If the payload is String or byte[]， then the conversion is simple. Any other type is serialized via ObjectOutputStream.This is problematic for camel-quarkus and native support because JDK serialization via ObjectOutputStream is not supported. Hence， it'd be nice if there was a way to provide a custom serializer that uses an alternate mechanism. E.g one that uses Jackson -> JSON etc.,There are no comments yet on this issue.
CAMEL-15860,Claus Ibsen,2020-11-16T21:27:05+0000,1605544025， where 1605544025 is the epoch,org.apache.camel.catalog.maven.MavenVersionManager is providing a log boolean which allows to log caught exception (instead of swallowinf them)This is not working when using with Camel Language Server as the stdio is used for the communication of the Language Server Protocol.Using a real logger will allow to access these logs from Camel language Server.,Hide Permalink Claus Ibsen added a comment - 16/Nov/20 21:27 You are welcome to work on a PR Show Claus Ibsen added a comment - 16/Nov/20 21:27 You are welcome to work on a PR Hide Permalink Aurélien Pupier added a comment - 19/Nov/20 13:39 starting to look at it Show Aurélien Pupier added a comment - 19/Nov/20 13:39 starting to look at it Hide Permalink Aurélien Pupier added a comment - 19/Nov/20 13:43 - edited might not be trivial. The logger was removed to avoid "classloader pain in tooling" https://issues.apache.org/jira/browse/CAMEL-11239 in 2017， so in Eclipse Desktop Fuse Tooling On the other hand， Eclipse Fuse Desktop tooling is still on Camel 2.x and there is still no plan to migrate yet. Usage of log in Eclipse Desktop Fuse Tooling was introduced here https://github.com/jbosstools/jbosstools-fuse/commit/930b1f80ff5e04f6816ef7bfb6018935ba0bf8a2 but there is no information on a potential classloader problem Show Aurélien Pupier added a comment - 19/Nov/20 13:43 - edited might not be trivial. The logger was removed to avoid "classloader pain in tooling" https://issues.apache.org/jira/browse/CAMEL-11239 in 2017， so in Eclipse Desktop Fuse Tooling On the other hand， Eclipse Fuse Desktop tooling is still on Camel 2.x and there is still no plan to migrate yet. Usage of log in Eclipse Desktop Fuse Tooling was introduced here https://github.com/jbosstools/jbosstools-fuse/commit/930b1f80ff5e04f6816ef7bfb6018935ba0bf8a2 but there is no information on a potential classloader problem Hide Permalink Claus Ibsen added a comment - 19/Nov/20 19:21 All the logging can also just be removed Show Claus Ibsen added a comment - 19/Nov/20 19:21 All the logging can also just be removed Hide Permalink Aurélien Pupier added a comment - 20/Nov/20 07:56 strongly against removing the logging. it will hide potential issues and make it even harder to debug. Show Aurélien Pupier added a comment - 20/Nov/20 07:56 strongly against removing the logging. it will hide potential issues and make it even harder to debug. Hide Permalink Claus Ibsen added a comment - 20/Nov/20 09:04 Ok yeah eclipse desktop tooling is not planned， so go ahead and submit a PR Show Claus Ibsen added a comment - 20/Nov/20 09:04 Ok yeah eclipse desktop tooling is not planned， so go ahead and submit a PR
CAMEL-15859,Unassigned,2020-11-16T14:46:50+0000,1605520010， where 1605520010 is the epoch,Currently the maven plugin will generate java files for enums even if the user has chosen to not use enums (useStringsForPicklists == true). This results in dead code that's just a liability (see CAMEL-15856).Solution is to not generate enum files if useStringsForPicklists == true and nothing is supplied for picklistToEnums.,There are no comments yet on this issue.
CAMEL-15858,Andrea Cosentino,2020-11-16T10:45:31+0000,1605505531， where 1605505531 is the epoch,Most OpenAPI generator maven plugins support the usage of remote OpenAPI specifications， e.g. from a git repository.This is useful if you have a schema registry in place or when you do a contract first approach using API design tools pushing the created specifications to a git repository.This feature allows to use of http-resources for OpenAPI specifications in the camel-restdsl-openapi-plugin. A support for basic authentication is also necessary for protected resources.I will follow-up with a pull-request.,There are no comments yet on this issue.
CAMEL-15857,Unassigned,2020-11-16T09:24:33+0000,1605500673， where 1605500673 is the epoch,Currently， there is no out of the box support for reading done files while consuming data files.Often done files contain record count or other valuable information， which are good candidates for validation.So， there should be support for reading done files and populate exchange headers,Hide Permalink Raju Parashar added a comment - 16/Nov/20 09:24 Hello Claus Ibsen， As discussed in developers group， please consider this requirement in your release pipeline. Thank you， Raju Parashar Show Raju Parashar added a comment - 16/Nov/20 09:24 Hello Claus Ibsen ， As discussed in developers group， please consider this requirement in your release pipeline. Thank you， Raju Parashar
CAMEL-15856,Unassigned,2020-11-15T20:03:22+0000,1605452602， where 1605452602 is the epoch,In some scenarios， the maven plugin generates the same enum values from different picklist values， e.g."A+" -> A_"A-" -> A_,There are no comments yet on this issue.
CAMEL-15855,Unassigned,2020-11-16T21:26:37+0000,1605543997， where 1605543997 is the epoch,Salesforce field labels can contain characters that need to be escaped in the generated DTOs. Currently， DTOs can end up with strings like this:" Enable "Delete From Field History Archive""As a result， DTOs will not compile.,Hide Permalink Claus Ibsen added a comment - 16/Nov/20 21:26 Thanks for your great work on the salesforce component Show Claus Ibsen added a comment - 16/Nov/20 21:26 Thanks for your great work on the salesforce component
CAMEL-15854,Claus Ibsen,2020-12-06T10:09:14+0000,1607231354， where 1607231354 is the epoch,camel-allcomponent is only for endpoint/component dsl building order.After that there are other components that need to be included.So we need something that generate a pom for the assembly， or if you can tell maven to always do apache-camel last no matter what.,Hide Permalink Claus Ibsen added a comment - Yesterday [WARNING] The following patterns were never triggered in this artifact inclusion filter: o 'org.apache.camel:apt' o 'org.apache.camel:camel-aws-xray' o 'org.apache.camel:camel-elytron' o 'org.apache.camel:camel-etcd3' o 'org.apache.camel:camel-hystrix' o 'org.apache.camel:camel-jasypt' o 'org.apache.camel:camel-leveldb' o 'org.apache.camel:camel-lra' o 'org.apache.camel:camel-microprofile-config' o 'org.apache.camel:camel-microprofile-fault-tolerance' o 'org.apache.camel:camel-microprofile-health' o 'org.apache.camel:camel-opentelemetry' o 'org.apache.camel:camel-opentracing' o 'org.apache.camel:camel-platform-http-vertx' o 'org.apache.camel:camel-reactive-executor-vertx' o 'org.apache.camel:camel-reactor' o 'org.apache.camel:camel-redis' o 'org.apache.camel:camel-resilience4j' o 'org.apache.camel:camel-rxjava' o 'org.apache.camel:camel-shiro' o 'org.apache.camel:camel-spring-security' o 'org.apache.camel:camel-test-cdi' o 'org.apache.camel:camel-test-spring' o 'org.apache.camel:camel-testcontainers-junit5' o 'org.apache.camel:camel-testcontainers-spring' o 'org.apache.camel:camel-testcontainers-spring-junit5' o 'org.apache.camel:camel-threadpoolfactory-vertx' o 'org.apache.camel:camel-tracing' o 'org.apache.camel:camel-undertow-spring-security' o 'org.apache.camel:camel-zipkin' Show Claus Ibsen added a comment - Yesterday [WARNING] The following patterns were never triggered in this artifact inclusion filter: o 'org.apache.camel:apt' o 'org.apache.camel:camel-aws-xray' o 'org.apache.camel:camel-elytron' o 'org.apache.camel:camel-etcd3' o 'org.apache.camel:camel-hystrix' o 'org.apache.camel:camel-jasypt' o 'org.apache.camel:camel-leveldb' o 'org.apache.camel:camel-lra' o 'org.apache.camel:camel-microprofile-config' o 'org.apache.camel:camel-microprofile-fault-tolerance' o 'org.apache.camel:camel-microprofile-health' o 'org.apache.camel:camel-opentelemetry' o 'org.apache.camel:camel-opentracing' o 'org.apache.camel:camel-platform-http-vertx' o 'org.apache.camel:camel-reactive-executor-vertx' o 'org.apache.camel:camel-reactor' o 'org.apache.camel:camel-redis' o 'org.apache.camel:camel-resilience4j' o 'org.apache.camel:camel-rxjava' o 'org.apache.camel:camel-shiro' o 'org.apache.camel:camel-spring-security' o 'org.apache.camel:camel-test-cdi' o 'org.apache.camel:camel-test-spring' o 'org.apache.camel:camel-testcontainers-junit5' o 'org.apache.camel:camel-testcontainers-spring' o 'org.apache.camel:camel-testcontainers-spring-junit5' o 'org.apache.camel:camel-threadpoolfactory-vertx' o 'org.apache.camel:camel-tracing' o 'org.apache.camel:camel-undertow-spring-security' o 'org.apache.camel:camel-zipkin'
CAMEL-15853,Unassigned,2020-11-13T14:25:47+0000,1605259547， where 1605259547 is the epoch,The ElasticsearchProducer doesn't support the SearchTemplateRequest of the high level REST client.https://github.com/apache/camel/blob/master/components/camel-elasticsearch-rest/src/main/java/org/apache/camel/component/elasticsearch/ElasticsearchProducer.java The SearchTemplateRequest allows to execute a search by using an Elasticsearch Search Template as described here:https://www.elastic.co/guide/en/elasticsearch/client/java-rest/master/java-rest-high-search-template.html,There are no comments yet on this issue.
CAMEL-15852,Claus Ibsen,2020-11-13T14:35:19+0000,1605260119， where 1605260119 is the epoch,I'm trying to bind some properties to an object that has a filed of type Map<String， Object> and it looks like that when the keys for the map contain a dot， the the mapping fails.As example: Map<String， Object> properties = mapOf( "resources[0].name"， "knative3"， "resources[0].type"， "endpoint"， "resources[0].metadata[knative.apiVersion]"， "serving.knative.dev/v1"， "resources[0].metadata[knative.kind]"， "Service"，);CamelContext context = new DefaultCamelContext();KnativeEnvironment env = KnativeEnvironment.mandatoryLoadFromProperties(context， properties);List<KnativeResource> res = env.lookup(Knative.Type.endpoint， "knative3").collect(Collectors.toList());assertThat(res).hasSize(1);assertThat(res).first().satisfies(resource -> { assertThat(resource.getName()).isEqualTo("knative3"); assertThat(resource.getMetadata()).isNotEmpty();});This code fails as resource.getMetadata() return an empty map， if the properties are then changed to: Map<String， Object> properties = mapOf( "resources[0].name"， "knative3"， "resources[0].type"， "endpoint"， "resources[0].metadata[knative_apiVersion]"， "serving.knative.dev/v1"， "resources[0].metadata[knative_kind]"， "Service"，);Then the test succeeds.,Hide Permalink Claus Ibsen added a comment - 13/Nov/20 14:35 Ah yeah dont use dots in keys - didnt you learn that in school Yeah lets add support for this， should be possible somewhere in the PBS class somewhere Show Claus Ibsen added a comment - 13/Nov/20 14:35 Ah yeah dont use dots in keys - didnt you learn that in school Yeah lets add support for this， should be possible somewhere in the PBS class somewhere Hide Permalink Luca Burgazzoli added a comment - 13/Nov/20 14:44 Yeah they told me that but you never listen when you are young I'm in the process to remove almost everything from metadata and have proper types but still need to keep them around for backward compatibility for a while Show Luca Burgazzoli added a comment - 13/Nov/20 14:44 Yeah they told me that but you never listen when you are young I'm in the process to remove almost everything from metadata and have proper types but still need to keep them around for backward compatibility for a while
CAMEL-15851,Claus Ibsen,2020-11-13T09:20:48+0000,1605241248， where 1605241248 is the epoch,,There are no comments yet on this issue.
CAMEL-15850,Unassigned,2020-11-13T06:18:08+0000,1605230288， where 1605230288 is the epoch,,Hide Permalink Andrea Cosentino added a comment - 13/Nov/20 06:18 We are using jetty feature in some of our karaf feature and it's not available in the new release of Karaf. I think we need to wait for an alias on 4.3.1 Show Andrea Cosentino added a comment - 13/Nov/20 06:18 We are using jetty feature in some of our karaf feature and it's not available in the new release of Karaf. I think we need to wait for an alias on 4.3.1 Hide Permalink Claus Ibsen added a comment - 13/Nov/20 06:18 There are about 10 features that dont validate Show Claus Ibsen added a comment - 13/Nov/20 06:18 There are about 10 features that dont validate Hide Permalink Claus Ibsen added a comment - 16/Nov/20 21:29 Okay so the karaf team knows about this and works on a fix for 4.3.1 ? Show Claus Ibsen added a comment - 16/Nov/20 21:29 Okay so the karaf team knows about this and works on a fix for 4.3.1 ? Hide Permalink Claus Ibsen added a comment - 2 days ago Is there a new karaf release soon? Show Claus Ibsen added a comment - 2 days ago Is there a new karaf release soon?
CAMEL-15849,Claus Ibsen,2020-11-12T20:23:58+0000,1605194638， where 1605194638 is the epoch,Spring Boot 2.4.0 has been released.,There are no comments yet on this issue.
CAMEL-15848,Unassigned,2020-11-12T14:40:45+0000,1605174045， where 1605174045 is the epoch,Store document， copy document and update document (CheckIn) should accept VersioningState parameter.,Hide Permalink Vladimir added a comment - 12/Nov/20 14:40 I'm working on this. Show Vladimir added a comment - 12/Nov/20 14:40 I'm working on this.
CAMEL-15847,James Netherton,2020-11-12T10:12:18+0000,1605157938， where 1605157938 is the epoch,The Workday component declares a dependency on camel-core. It should be enough to only depend on camel-support like most other components.,There are no comments yet on this issue.
CAMEL-15846,Claus Ibsen,2020-11-12T09:38:46+0000,1605155926， where 1605155926 is the epoch,That was really no longer in use in 3.x.,There are no comments yet on this issue.
CAMEL-15845,James Netherton,2020-11-12T08:59:43+0000,1605153583， where 1605153583 is the epoch,It'd be nice if there was a way to consume GitHub events via the event APIs:https://developer.github.com/v3/activity/events/#eventsThen you can poll and get a handle on activity that occurs on any repo or for stuff that the user is interested in.,Hide Permalink Andrea Cosentino added a comment - 12/Nov/20 08:59 Do you think we can switch from egit to kohsuke github api? I think it is better maintained. Maybe a different component? Show Andrea Cosentino added a comment - 12/Nov/20 08:59 Do you think we can switch from egit to kohsuke github api? I think it is better maintained. Maybe a different component? Hide Permalink James Netherton added a comment - 12/Nov/20 09:19 I was wondering about that. We have CAMEL-14470. Should I hold on submitting a PR for this until it has been investigated? I've already done all of the work to support the events API， it's been lingering on a local branch for some weeks， so wanted to get it contributed if possible. Show James Netherton added a comment - 12/Nov/20 09:19 I was wondering about that. We have CAMEL-14470 . Should I hold on submitting a PR for this until it has been investigated? I've already done all of the work to support the events API， it's been lingering on a local branch for some weeks， so wanted to get it contributed if possible. Hide Permalink Andrea Cosentino added a comment - 12/Nov/20 09:25 Totally fine to push on this. I think we should create a different component eventually， if egit is still fine and maintained. My overall experience was quite good with both， but the kohsuke seems a bit better maintained Show Andrea Cosentino added a comment - 12/Nov/20 09:25 Totally fine to push on this. I think we should create a different component eventually， if egit is still fine and maintained. My overall experience was quite good with both， but the kohsuke seems a bit better maintained
CAMEL-15844,Claus Ibsen,2020-11-11T20:07:48+0000,1605107268， where 1605107268 is the epoch,There are some model and reifier wiring that happens when creating a route via RouteReifier. But this is triggered when starting a route.Lets see if we divide this into two phases init startThen we can do more work in init phase and potentially be able to avoid some of the complexity with error handling and model later on and the clearModel on DefaultRoute that is triggered later.This can aid the runtime route vs model+reifier modularization even more.,There are no comments yet on this issue.
CAMEL-15843,Andrea Cosentino,2020-11-11T12:37:01+0000,1605080221， where 1605080221 is the epoch,This is something coming from camel-aws， but now we are using a different approach with default credential provider https://sdk.amazonaws.com/java/api/latest/index.html?software/amazon/awssdk/auth/credentials/DefaultCredentialsProvider.htmlThe name useIamCredentials is now a bit misleading.,There are no comments yet on this issue.
CAMEL-15842,Unassigned,2020-11-11T06:06:12+0000,1605056772， where 1605056772 is the epoch,camel-cdi has dropped CDI 1.x support but there are some leftovers for 1.x and 2.0 workarounds from the past. We should cleanup this module.See talks athttps://github.com/apache/camel/pull/4562,There are no comments yet on this issue.
CAMEL-15841,Unassigned,2020-11-10T19:18:17.838Z,1605017897.838， where 1605017897.838 is the epoch,my build.gradle isplugins { id 'org.springframework.boot' version '2.3.5.RELEASE' id 'io.spring.dependency-management' version '1.0.10.RELEASE' id 'java'}group = 'com.bvn13'version = '0.0.1-SNAPSHOT'sourceCompatibility = '11'configurations { compileOnly { extendsFrom annotationProcessor }}repositories { mavenCentral()}dependencies { //implementation 'org.springframework.boot:spring-boot-starter-thymeleaf' //implementation 'org.springframework.boot:spring-boot-starter-web' implementation 'org.apache.camel.springboot:camel-spring-boot-starter:3.5.0' implementation 'org.apache.camel:camel-http:3.5.0' implementation 'org.apache.camel:camel-jetty:3.5.0' implementation 'org.apache.camel:camel-gson:3.5.0' compileOnly 'org.projectlombok:lombok' annotationProcessor 'org.projectlombok:lombok' testImplementation('org.springframework.boot:spring-boot-starter-test') { exclude group: 'org.junit.vintage'， module: 'junit-vintage-engine' }}test { useJUnitPlatform()}my route builder is:import org.apache.camel.builder.RouteBuilder;import org.apache.camel.model.dataformat.JsonLibrary;import org.springframework.beans.factory.annotation.Value;import org.springframework.stereotype.Component;import lombok.extern.slf4j.Slf4j;@Slf4j@Componentpublic class EgaisExpirationDateSearcher extends RouteBuilder { private final String host; private final int port; private final String searchEndpoint; public EgaisExpirationDateSearcher( @Value("${app.listen.host}") String host， @Value("${app.listen.port}") int port) { this.host = host; this.port = port; searchEndpoint = "jetty:http://"+host+":"+port+"/expire"; log.info("Listening at: {}"， searchEndpoint); } @Override public void configure() throws Exception { from(searchEndpoint+"?httpMethodRestrict=POST") .log("${body}") // <----------------- .unmarshal().json(JsonLibrary.Gson， SearchRequest.class) .log("${body}") .process((exchange) -> { exchange.getMessage().setBody("HI!"); }) ; }}my application properties are:app: listen: host: localhost port: 9091I have an object as request body:import lombok.Value;@Valuepublic class SearchRequest { String contraInn; String alcoGoodName;}I perform POST HTTP request likecurl -X POST -H "Content-Type: application/json" -d '{"contraInn":123，"alcoGoodName":"name"}' http://localhost:9091/expirenow take a look at pointed line in route builder: .log("${body}") // <-----------------if I comment this line (disable logging) the log has following lines:2020-11-10 22:07:52.172 INFO 1344 --- [ main] c.b.b.e.EgaisConnectorApplication : Started EgaisConnectorApplication in 2.003 seconds (JVM running for 2.982)2020-11-10 22:11:05.575 INFO 1344 --- [tp1753113235-31] route2 : com.bvn13.beerspot.egaisconnector.SearchRequest@2d34001abut when I uncomment pointed line the body seems become empty right after logging:2020-11-10 22:12:40.284 INFO 10924 --- [ main] c.b.b.e.EgaisConnectorApplication : Started EgaisConnectorApplication in 1.932 seconds (JVM running for 2.78)2020-11-10 22:12:46.854 INFO 10924 --- [qtp216919586-31] route2 : {"contraInn":123，"alcoGoodName":"name"}2020-11-10 22:12:46.857 INFO 10924 --- [qtp216919586-31] route2 : nullFirst log message is logged as arrived， then emptied ， unmarshalled to null and logged out as null.Is it normal?,Hide Permalink Andrea Cosentino added a comment - 10/Nov/20 19:20 Please use the mailing list for questions. Show Andrea Cosentino added a comment - 10/Nov/20 19:20 Please use the mailing list for questions. Hide Permalink Andrea Cosentino added a comment - 10/Nov/20 19:21 And have a look at streamcaching. Show Andrea Cosentino added a comment - 10/Nov/20 19:21 And have a look at streamcaching.
CAMEL-15840,Otavio Rodolfo Piske,2020-11-10T12:55:50+0000,1604994950， where 1604994950 is the epoch,Camel is keeping 2 different instances of the configuration object for the AWS 2 SNS component. Subsequently， changes to the object instances cause both of them to be out of sync leading to undefined behavior depending on each copy is read.The problem flow is: A copy of the configuration object if created when instantiating the endpoint: https://github.com/apache/camel/blob/46945de816123cc894846a7e5cfe145f39e76f95/components/camel-aws2-sns/src/main/java/org/apache/camel/component/aws2/sns/Sns2Component.java#L57 The copy object is then set with additional configuration values， such as the topic and topicArn: https://github.com/apache/camel/blob/46945de816123cc894846a7e5cfe145f39e76f95/components/camel-aws2-sns/src/main/java/org/apache/camel/component/aws2/sns/Sns2Component.java#L63-L66 Then， when trying to set the component properties， the configuration object will be overwritten and the changes on step 2 may be lost: https://github.com/apache/camel/blob/46945de816123cc894846a7e5cfe145f39e76f95/components/camel-aws2-sns/src/main/java/org/apache/camel/component/aws2/sns/Sns2Component.java#L69 Under some circumstances， such as when using a custom configuration object this causes the code to overwrite the object.Here's a code snippet of the debug of the content of the parameters Map， used by setProperties to setup the endpoint. The introspection will eventually overwrite the configuration object. 2020-11-10 13:52:33，853 [nectorWithUrl-0] DEBUG org.apache.camel.component.aws2.sns.Sns2Component - Parameters -- Key: accessKey， Value: accesskey2020-11-10 13:52:33，853 [nectorWithUrl-0] DEBUG org.apache.camel.component.aws2.sns.Sns2Component - Parameters -- Key: configuration， Value: #class:org.apache.camel.kafkaconnector.aws.v2.sns.sink.TestSnsConfiguration2020-11-10 13:52:33，853 [nectorWithUrl-0] DEBUG org.apache.camel.component.aws2.sns.Sns2Component - Parameters -- Key: queueUrl， Value: http://localhost:35886/000000000000/ckcsns-6082020-11-10 13:52:33，853 [nectorWithUrl-0] DEBUG org.apache.camel.component.aws2.sns.Sns2Component - Parameters -- Key: region， Value: us-east-12020-11-10 13:52:33，853 [nectorWithUrl-0] DEBUG org.apache.camel.component.aws2.sns.Sns2Component - Parameters -- Key: secretKey， Value: secretkey2020-11-10 13:52:33，853 [nectorWithUrl-0] DEBUG org.apache.camel.component.aws2.sns.Sns2Component - Parameters -- Key: subscribeSNStoSQS， Value: true,There are no comments yet on this issue.
CAMEL-15839,Claus Ibsen,2020-11-11T17:09:24+0000,1605096564， where 1605096564 is the epoch,To help optimize the core， then it would be good to not register error handlers in JMX as there is some tangle from model to the jmx mbean naming.This is a ticket to remember to look into this， as either remove the error handler mbeans as they are not kpi metrics anyway.But there may be another way to keep them with some alternative way of mbean naming we can try first.,Hide Permalink Claus Ibsen added a comment - 11/Nov/20 17:09 JMX MBeans for error handlers removed Show Claus Ibsen added a comment - 11/Nov/20 17:09 JMX MBeans for error handlers removed
CAMEL-15838,Unassigned,2020-11-10T09:13:39+0000,1604981619， where 1604981619 is the epoch,Goal is to use microprofile openapi (therefore + jsonb) instead of io.apicurio.datamodels and jackson. This enables MP applications using camel to not rely on undesired 3rd party libraries.MP OpenAPI provides a factory for its component (model) so this can be portable.Code is likely more or less the same than the existing one but with a fully different stack.,There are no comments yet on this issue.
CAMEL-15837,Alex Dettinger,2020-11-09T18:23:46+0000,1604928226， where 1604928226 is the epoch,,There are no comments yet on this issue.
CAMEL-15836,Claus Ibsen,2020-11-12T11:46:25+0000,1605163585， where 1605163585 is the epoch,We could add to @Metadata so we can markup on components which options can be autowried automatic by its type， but looking up in registry for 1 instance of this type， and use it automatic.Such as JMS connection factory， JDBC DataSources， AWS Clients， Infinispan Client， etc.We had some code in camel-main in 3.6 or older， but this code was "too magic" and introspected all options and whatnot. And this causing longer startup and more memory. And each component generated metadata that took up memory space. That essentially was waste for 99% use cases.But if we have this marked up for specific options only， then we can make this faster and light.,Hide Permalink Claus Ibsen added a comment - 12/Nov/20 11:46 - edited TODO: source code generator DONE TODO: component level DONE TODO: show in docs DONE TODO: endpoint level DONE TODO: language level DONE TODO: data format level DONE TODO: option to turn on|off DONE TODO: regen camel karaf DONE TODO: regen camel spring boot DONE Show Claus Ibsen added a comment - 12/Nov/20 11:46 - edited TODO: source code generator DONE TODO: component level DONE TODO: show in docs DONE TODO: endpoint level DONE TODO: language level DONE TODO: data format level DONE TODO: option to turn on|off DONE TODO: regen camel karaf DONE TODO: regen camel spring boot DONE
CAMEL-15835,Claus Ibsen,2020-11-09T14:52:08+0000,1604915528， where 1604915528 is the epoch,Then it has the same option as spring jms component.,There are no comments yet on this issue.
CAMEL-15834,James Netherton,2020-11-09T09:52:15+0000,1604897535， where 1604897535 is the epoch,Something I observed in camel-quarkus， when the NATS integration test occasionally fails with connection errors， there's also NullPointerException thrown from the consumer doStop().[INFO] Caused by: java.lang.NullPointerException[INFO] at org.apache.camel.component.nats.NatsConsumer.doStop(NatsConsumer.java:71)[INFO] at org.apache.camel.support.service.BaseService.stop(BaseService.java:156)[INFO] at org.apache.camel.support.service.ServiceHelper.stopService(ServiceHelper.java:133)[INFO] at org.apache.camel.support.service.ServiceHelper.stopAndShutdownService(ServiceHelper.java:198)[INFO] at org.apache.camel.impl.engine.RouteService.stopChildService(RouteService.java:352)[INFO] at org.apache.camel.impl.engine.RouteService.doStop(RouteService.java:240)[INFO] at org.apache.camel.support.ChildServiceSupport.stop(ChildServiceSupport.java:86),There are no comments yet on this issue.
CAMEL-15827,Unassigned,2020-11-10T06:23:52+0000,1604971432， where 1604971432 is the epoch,/** * Represents the consumer class which is injected and created by consumers */ @Deprecated Class<?> consumerClass() default Object.class;no information by what it needs to be replaced /** * To associate this endpoint with label(s). * <p/> * Multiple labels can be defined as a comma separated value. * <p/> * The labels is intended for grouping the endpoints， such as <tt>core</tt>， <tt>file</tt>， <tt>messaging</tt>， * <tt>database</tt>， etc. * <p/> * Deprecated: Use the category field instead */ @Deprecated String label() default "";shoudl be easy to replace with category,Hide Permalink Claus Ibsen added a comment - 10/Nov/20 06:23 Yeah remove the first， and change label to a category Show Claus Ibsen added a comment - 10/Nov/20 06:23 Yeah remove the first， and change label to a category
CAMEL-15827,Unassigned,2020-11-10T06:23:52+0000,1604971432， where 1604971432 is the epoch,/** * Represents the consumer class which is injected and created by consumers */ @Deprecated Class<?> consumerClass() default Object.class;no information by what it needs to be replaced /** * To associate this endpoint with label(s). * <p/> * Multiple labels can be defined as a comma separated value. * <p/> * The labels is intended for grouping the endpoints， such as <tt>core</tt>， <tt>file</tt>， <tt>messaging</tt>， * <tt>database</tt>， etc. * <p/> * Deprecated: Use the category field instead */ @Deprecated String label() default "";shoudl be easy to replace with category,Hide Permalink Claus Ibsen added a comment - 10/Nov/20 06:23 Yeah remove the first， and change label to a category Show Claus Ibsen added a comment - 10/Nov/20 06:23 Yeah remove the first， and change label to a category
CAMEL-15827,Unassigned,2020-11-09T08:11:23+0000,1604891483， where 1604891483 is the epoch,XXXComponent contains unused import for CamelContextXXXConsumer contains unused import RuntimeCamelException,Hide Permalink Aurélien Pupier added a comment - 09/Nov/20 08:11 start working on it Show Aurélien Pupier added a comment - 09/Nov/20 08:11 start working on it
CAMEL-15827,Unassigned,2020-11-09T08:15:03+0000,1604891703， where 1604891703 is the epoch,final private Set<Consumer> subscribers = ConcurrentHashMap.newKeySet();,Hide Permalink Aurélien Pupier added a comment - 09/Nov/20 08:15 start working on it Show Aurélien Pupier added a comment - 09/Nov/20 08:15 start working on it
CAMEL-15827,Unassigned,2020-11-09T08:07:38+0000,1604891258， where 1604891258 is the epoch,// TODO: Delete me when you implementy your custom component,Hide Permalink Aurélien Pupier added a comment - 09/Nov/20 08:07 starting to work on it Show Aurélien Pupier added a comment - 09/Nov/20 08:07 starting to work on it
CAMEL-15827,Unassigned,2020-11-06T16:32:19+0000,1604662339， where 1604662339 is the epoch,for instance when using space in the name， several classes contains space in the name which is invalid.Solution: sanitize provided name throw error,Hide Permalink Claus Ibsen added a comment - 06/Nov/20 16:32 Are you talking about the maven archetypes? Show Claus Ibsen added a comment - 06/Nov/20 16:32 Are you talking about the maven archetypes? Hide Permalink Aurélien Pupier added a comment - 09/Nov/20 07:49 yes， I'm talking of the maven archetype to generate a new component Show Aurélien Pupier added a comment - 09/Nov/20 07:49 yes， I'm talking of the maven archetype to generate a new component Hide Permalink Claus Ibsen added a comment - 09/Nov/20 08:36 We have no control of the input class name， its apache maven that generates the project from the archetype. Show Claus Ibsen added a comment - 09/Nov/20 08:36 We have no control of the input class name， its apache maven that generates the project from the archetype. Hide Permalink Aurélien Pupier added a comment - 09/Nov/20 08:41 it seems that a regex can be provided https://issues.apache.org/jira/browse/ARCHETYPE-487 Show Aurélien Pupier added a comment - 09/Nov/20 08:41 it seems that a regex can be provided https://issues.apache.org/jira/browse/ARCHETYPE-487 Hide Permalink Aurélien Pupier added a comment - 09/Nov/20 08:50 another possibility is to sanitize the provided name. it seems that this can be done only after project creation using a Post-generation script https://maven.apache.org/archetype/maven-archetype-plugin/advanced-usage.html#Post-generation_script Show Aurélien Pupier added a comment - 09/Nov/20 08:50 another possibility is to sanitize the provided name. it seems that this can be done only after project creation using a Post-generation script https://maven.apache.org/archetype/maven-archetype-plugin/advanced-usage.html#Post-generation_script
CAMEL-15827,Unassigned,2020-11-06T15:23:28+0000,1604658208， where 1604658208 is the epoch,after creation several warnings and potential errors are left in the code.I will raise subtask for each o fthem.,There are no comments yet on this issue.
CAMEL-15826,Claus Ibsen,2020-11-06T11:49:23+0000,1604645363， where 1604645363 is the epoch,There is some magic autowrie by type on components that discovers complex types on components and check if there is a single item in registry of this type and then auto configure it.Its a bit too magic and requires to introspect each component during bootstrap. This takes up memory.And this is special for camel-main only.,There are no comments yet on this issue.
CAMEL-15825,James Netherton,2020-11-06T11:09:18+0000,1604642958， where 1604642958 is the epoch,Unless I'm missing something， I don't see a way of configuring any aspect of the ScheduledPollConsumer for the GitHub component consumers.So they poll with the default 500 milliseconds， which is not so friendly and quickly results in rate limits being exceeded.,There are no comments yet on this issue.
CAMEL-15824,Claus Ibsen,2020-11-06T06:01:54+0000,1604624514， where 1604624514 is the epoch,We can optimize configurer to not rely on ALL_OPTIONS Map for getting a class type for an option name. This avoid having the big map in memory.,There are no comments yet on this issue.
CAMEL-15823,Claus Ibsen,2020-11-05T18:03:59+0000,1604581439， where 1604581439 is the epoch,We can potentially optimize on each DefaultErrorHandler where it does a copy of redelivery policy and have a private instance. But it may be that the policy is only used as read-only， and state is stored on exchange / in its own task.,There are no comments yet on this issue.
CAMEL-15822,Luigi De Masi,2020-11-05T16:46:22+0000,1604576782， where 1604576782 is the epoch,When both fileExist=Move and tempFile are set， GenericFileProducer.doMoveExistingFile is called， while when tempFile is not set FileMoveExistingStrategy.moveExistingFile. It seems a leftover from 2.X -> 3.x migration.As a result， endpoints like that won't work because GenericFileProducer.doMoveExistingFile doesn't support dynamic subdirectory auto-creation:file://data/file?tempFileName=${file:onlyname}.temp&fileExist=Move&moveExisting=${file:parent}/archive-${date:now:yyyyMMddHHmmssSSS}/${file:onlyname}" it would be nice to have support for partial dynamic subdir name like this : fileExist=Move&moveExisting=archive-${date:now:yyyyMMddHHmmssSSS}/,There are no comments yet on this issue.
CAMEL-15821,Claus Ibsen,2020-12-05T14:18:53+0000,1607159933， where 1607159933 is the epoch,Consider how route templates and lightweight mode may not work together. So we should have a way of using route templates and from those create routes， and then signal to camel that we are done so it can do its optimizations as part of lightweight mode,Hide Permalink Claus Ibsen added a comment - 2 days ago Luca Burgazzoli was there something in camel-k-runtime that adds route templates (kamelets) at a later stage? The out of the box camel-main and route templates are added and initialized before lightweight mode kicks in and locks the camel context model. Show Claus Ibsen added a comment - 2 days ago Luca Burgazzoli was there something in camel-k-runtime that adds route templates (kamelets) at a later stage? The out of the box camel-main and route templates are added and initialized before lightweight mode kicks in and locks the camel context model.
CAMEL-15820,Zineb BENDHIBA,2020-11-05T15:00:09+0000,1604570409， where 1604570409 is the epoch,Improve some code in the component， to compile in native mode for camel-quarkus.Note that on Quarkus， the mode used is Client.The creation of instance is managed by Hazelcast Quarkus Client extension， depending on configuration in application.properties and Hazelcast xml file.The code to change is : The 2 methods getOrCreateHzInstance and getOrCreateHzClientInstance in the class HazelcastDefaultComponent. These 2 methods use reflection and are not relevant for camel-quarkus. The getOrCreateHzInstance won't compile for camel-quarkus even if we make it reflection free. Move those 2 methods from the abstract class， to enable substitution. The HazelcastUtil， must use ClientConfig and HazelcastClient to create new instance instead of Config and Hazelcast Problem of native compilation when injecting DefaultConsumer in classes implementing EntryListener， ItemListener， MapEntryListener， MessageListener.,There are no comments yet on this issue.
CAMEL-15819,Jiri Ondrusek,2020-11-05T15:24:37+0000,1604571877， where 1604571877 is the epoch,I've created simple reproducer， using spring-boot starter: https://github.com/JiriOndrusek/camel-jsonb-reproducer There is only 1 route， which marshals pojo and logs it. Reproducer is working. If you remove dependency to 'johnzon-jsonb' (https://github.com/JiriOndrusek/camel-jsonb-reproducer/blob/main/pom.xml#L101)， it start failing with: Caused by: java.lang.ClassNotFoundException: org.apache.johnzon.jsonb.JohnzonProvider at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581) ~[na:na] at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178) ~[na:na] at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na] at javax.json.bind.spi.JsonbProvider.doLoadProvider(JsonbProvider.java:79) ~[geronimo-jsonb_1.0_spec-1.0.jar:1.0] ... 54 common frames omitted> Problem is caused by the fact， that spi uses jonzon as default provider (see https://github.com/apache/geronimo-specs/blob/trunk/geronimo-jsonb_1.0_spec/src/main/java/javax/json/bind/spi/JsonbProvider.java#L30) Solution could be for example adding jonzon into camel-jsonb or adding to documentation， that provider implementation has to be provided.,Hide Permalink Claus Ibsen added a comment - 05/Nov/20 15:24 I dont see this as a bug. When you use a spec like jsonb， then you need to bring your own favorite implementation - like johnzon or whatelse is out there. So instead the documentation of this should mention this. Show Claus Ibsen added a comment - 05/Nov/20 15:24 I dont see this as a bug. When you use a spec like jsonb， then you need to bring your own favorite implementation - like johnzon or whatelse is out there. So instead the documentation of this should mention this.
CAMEL-15818,Claus Ibsen,2020-11-05T11:24:19+0000,1604557459， where 1604557459 is the epoch,Its not so easy today. The saxon component can do it， but on the language level its harder.,There are no comments yet on this issue.
CAMEL-15817,Omar Al-Safi,2020-11-05T11:31:15+0000,1604557875， where 1604557875 is the epoch,Currently we don't support comments on fields when we generate code only javadoc， hence it will also make sense to add comment support to fields， e.g:// topic@UriPath(label = "common")@Metadata(required = true) private String topic;,Hide Permalink Claus Ibsen added a comment - 05/Nov/20 11:31 What do you mean? @Metadata has a description. Or do you mean actual source code comments like // hello world And if so what is the use-case. I am just curious as I also want to avoid the generators to become to bloated and complex with too many moving parts. - camel-package-maven-plugin is a big set of code already. Show Claus Ibsen added a comment - 05/Nov/20 11:31 What do you mean? @Metadata has a description. Or do you mean actual source code comments like // hello world And if so what is the use-case. I am just curious as I also want to avoid the generators to become to bloated and complex with too many moving parts. - camel-package-maven-plugin is a big set of code already. Hide Permalink Claus Ibsen added a comment - 05/Nov/20 11:33 Ah speaking to quick， just saw the PR. That is reasonable easy to maintain. Show Claus Ibsen added a comment - 05/Nov/20 11:33 Ah speaking to quick， just saw the PR. That is reasonable easy to maintain. Hide Permalink Omar Al-Safi added a comment - 05/Nov/20 11:37 Claus Ibsen as you see in PR， just code comments like // hello which is noting complex here as you mentioned Show Omar Al-Safi added a comment - 05/Nov/20 11:37 Claus Ibsen as you see in PR， just code comments like // hello which is noting complex here as you mentioned
CAMEL-15816,Unassigned,2020-11-05T09:42:30+0000,1604551350， where 1604551350 is the epoch,When we build the website we pull in files from several git repositories and several branches within them. The result of the website build is pushed to the asf-site branch on the camel-website repository and it is now squashed to conserve storage space in git. The commit message in the asf-site branch points to the commit on main branch of the camel-website repository that was the source of the build.It would be useful to have that commit message point to all of the repositories (branches?) that contributed to the website at that point.,There are no comments yet on this issue.
CAMEL-15815,Claus Ibsen,2020-11-05T09:15:13+0000,1604549713， where 1604549713 is the epoch,Hello， I found something which seems unexpected with the enrich processor and Camel 3.6.0. If you consider those 2 routes: from(timer("foo")) .setBody(constant("1")) .enrich("seda://test-${body}"); from(timer("bar")) .setBody(constant("2")) .enrich(seda("test-${body}")); In the log， it says:[mel-1) thread #6 - timer://bar] SedaEndpoint INFO Endpoint seda://test-2 is using shared queue: seda://test-2 with size: 1000[mel-1) thread #5 - timer://foo] SedaEndpoint INFO Endpoint seda://test-$%7Bbody%7D is using shared queue: seda://test-$%7Bbody%7D with size: 1000 So the route using the enrich with “EndpointRouteBuilder style” seems to consider the endpoint URI as a “simple” expression (and resolves it)， and the other one like a “constant” expression (which is what I expected). In the first case， it means that the endpoint is resolved for every exchange processed. It’s possible to “force” the constant expression using this though:from(timer("biz")) .setBody(constant("3")) .enrich().constant(seda("test-${body}")); Regards，Nicolas,Hide Permalink Claus Ibsen added a comment - 05/Nov/20 09:15 We need to do something like we do in toD and wireTap where we have special support for this. This would be for Enrich and pollEnrich EIP both of them Show Claus Ibsen added a comment - 05/Nov/20 09:15 We need to do something like we do in toD and wireTap where we have special support for this. This would be for Enrich and pollEnrich EIP both of them Hide Permalink ncasaux added a comment - 05/Nov/20 09:26 From my tests， the issue is not happening with pollEnrich: from(timer("foo")) .setBody(constant("1")) .pollEnrich("seda://test1-${body}"); from(timer("bar")) .setBody(constant("2")) .pollEnrich(seda("test2-${body}")); [ main] SedaEndpoint INFO Endpoint seda://test1-$%7Bbody%7D is using shared queue: seda://test1-$%7Bbody%7D with size: 1000 [ main] SedaEndpoint INFO Endpoint seda://test2-$%7Bbody%7D is using shared queue: seda://test2-$%7Bbody%7D with size: 1000 Show ncasaux added a comment - 05/Nov/20 09:26 From my tests， the issue is not happening with pollEnrich: from(timer( "foo" )) .setBody(constant( "1" )) .pollEnrich( "seda: //test1-${body}" ); from(timer( "bar" )) .setBody(constant( "2" )) .pollEnrich(seda( "test2-${body}" )); [ main] SedaEndpoint INFO Endpoint seda: //test1-$%7Bbody%7D is using shared queue: seda://test1-$%7Bbody%7D with size: 1000 [ main] SedaEndpoint INFO Endpoint seda: //test2-$%7Bbody%7D is using shared queue: seda://test2-$%7Bbody%7D with size: 1000
CAMEL-15814,Andrea Cosentino,2020-11-05T08:30:43+0000,1604547043， where 1604547043 is the epoch,,There are no comments yet on this issue.
CAMEL-15813,Unassigned,2020-11-04T22:27:31+0000,1604510851， where 1604510851 is the epoch,In order to implement different authentication， metrics and logging options there needs to be an ability to use client interceptors on the grpc channel. Currently， there is no ability to setup these interceptors on the channel because it is setup as a part of a private method in the Component.,There are no comments yet on this issue.
CAMEL-15812,Andrea Cosentino,2020-11-10T14:13:41+0000,1604999621， where 1604999621 is the epoch,We can specify something more through headers.,Hide Permalink Andrea Cosentino added a comment - 10/Nov/20 14:13 Commit consumer has been fixed. Show Andrea Cosentino added a comment - 10/Nov/20 14:13 Commit consumer has been fixed. Hide Permalink Andrea Cosentino added a comment - 10/Nov/20 14:13 Working on branch and tag Show Andrea Cosentino added a comment - 10/Nov/20 14:13 Working on branch and tag
CAMEL-15811,Unassigned,2020-11-04T16:54:10+0000,1604490850， where 1604490850 is the epoch,Starting from camel 3.6， camel-report-maven-plugin validate goal fails to validate simple expressions; on console log I see an error [null] for every expression， also simple ones like ${body.id}.Debugging a bit I found that error is due to a NPE on the ExpressionAdapter created in SimpleExpressionBuilder.bodyOgnlExpression， and more specifically in the init method， that uses CamelContext to resolve bean language. When running from maven goal execution， at a certain point， init method is called with a null CamelContext reference and this causes the NPE.Below an extract of the stacktrace java.lang.NullPointerException at org.apache.camel.language.simple.SimpleExpressionBuilder$28.init(SimpleExpressionBuilder.java:761) at org.apache.camel.language.simple.ast.SimpleFunctionExpression.createExpression(SimpleFunctionExpression.java:61) at org.apache.camel.language.simple.ast.SimpleFunctionStart.doCreateLiteralExpression(SimpleFunctionStart.java:70) at org.apache.camel.language.simple.ast.SimpleFunctionStart.createExpression(SimpleFunctionStart.java:60) at org.apache.camel.language.simple.SimpleExpressionParser.createExpressions(SimpleExpressionParser.java:165) at org.apache.camel.language.simple.SimpleExpressionParser.doParseExpression(SimpleExpressionParser.java:88) at org.apache.camel.language.simple.SimpleExpressionParser.parseExpression(SimpleExpressionParser.java:55) at org.apache.camel.language.simple.SimpleLanguage.createExpression(SimpleLanguage.java:132)In 3.5 *init* method was nor overridden by the ExpressionAdapter nor invoked in SimpleFunctionExpression.createExpression.,There are no comments yet on this issue.
CAMEL-15810,Claus Ibsen,2020-11-04T16:37:18.408Z,1604489838.408， where 1604489838.408 is the epoch,When calling an overloaded method， Camel has to evaluate the parameter types to determine which is the correct method to call. For a parameter that is a simple expression， Camel will evaluate the type， but doesn't recognize it can call a method with a subtype of the expected type.I've included a patch with a test to demonstrate.,Hide Permalink Claus Ibsen added a comment - 05/Nov/20 11:29 Thanks for reporting and for the test case Show Claus Ibsen added a comment - 05/Nov/20 11:29 Thanks for reporting and for the test case
CAMEL-15809,Unassigned,2020-11-04T14:38:47+0000,1604482727， where 1604482727 is the epoch,The compound predicates created by PredicateBuilder should initialize their contained predicates/expressions.,There are no comments yet on this issue.
CAMEL-15808,Unassigned,2020-11-04T14:12:44+0000,1604481164， where 1604481164 is the epoch,For Predicates added viamock.expectedMessagesMatches(Perdicates... predicates) you can end up with NPE because those predicates never get initialized: 2020-11-04 15:11:14，244 [main] ERROR org.apache.camel.component.mock.MockEndpoint - Caught exception on mock://myMock due to: nulljava.lang.NullPointerException: null at org.apache.camel.support.builder.ExpressionBuilder$55.evaluate(ExpressionBuilder.java:1587) ~[camel-support-3.6.0.jar:3.6.0] at org.apache.camel.support.ExpressionAdapter.evaluate(ExpressionAdapter.java:35) ~[camel-support-3.6.0.jar:3.6.0] at org.apache.camel.support.builder.BinaryPredicateSupport.matchesReturningFailureMessage(BinaryPredicateSupport.java:67) ~[camel-support-3.6.0.jar:3.6.0] at org.apache.camel.support.builder.BinaryPredicateSupport.matches(BinaryPredicateSupport.java:56) ~[camel-support-3.6.0.jar:3.6.0] at org.apache.camel.support.builder.PredicateBuilder$2.matches(PredicateBuilder.java:69) ~[camel-support-3.6.0.jar:3.6.0] at org.apache.camel.support.PredicateAssertHelper.doAssertMatches(PredicateAssertHelper.java:50) ~[camel-support-3.6.0.jar:3.6.0] at org.apache.camel.support.PredicateAssertHelper.assertMatches(PredicateAssertHelper.java:45) ~[camel-support-3.6.0.jar:3.6.0] at org.apache.camel.component.mock.AssertionClause.applyAssertionOn(AssertionClause.java:114) ~[camel-mock-3.6.0.jar:3.6.0] at org.apache.camel.component.mock.MockEndpoint$9.assertOnIndex(MockEndpoint.java:813) ~[camel-mock-3.6.0.jar:3.6.0] at org.apache.camel.component.mock.MockEndpoint.onExchange(MockEndpoint.java:1566) ~[camel-mock-3.6.0.jar:3.6.0] at org.apache.camel.component.mock.MockEndpoint$1.process(MockEndpoint.java:303) ~[camel-mock-3.6.0.jar:3.6.0],There are no comments yet on this issue.
CAMEL-15807,Claus Ibsen,2020-11-04T17:53:03+0000,1604494383， where 1604494383 is the epoch,Hello，We noticed a regression in simple expressions that was introduced in Camel 3.6.0.Consider the following routesfrom("timer:foo?repeatCount=1") .setBody(constant("The answer is 42.")) .choice() .when(simple("${body} contains '42'")).log("We have an answer") .otherwise().log("We don't have an answer");It prints the "otherwise" message in Camel 3.6.0 but shouldn't. It works if the contains operator is ' 42' (prefixed by a space) or is 'answer'Can you have a look at it? Thank you very much.,Hide Permalink Antoine DESSAIGNE added a comment - 04/Nov/20 17:53 Thank you very much Claus Ibsen Show Antoine DESSAIGNE added a comment - 04/Nov/20 17:53 Thank you very much Claus Ibsen
CAMEL-15806,Andrea Cosentino,2020-11-04T10:36:35+0000,1604468195， where 1604468195 is the epoch,,There are no comments yet on this issue.
CAMEL-15805,Unassigned,2020-11-03T22:52:31+0000,1604425951， where 1604425951 is the epoch,In a multi module project with camel-report-maven-plugin configured in parent pom， running goal route-coverage from root directory does not produce report for sub modules; instead warnings are printed[WARNING] No route coverage data found for route:... However if the goal is launched from the child project the result route coverage summaryis correctly printed.The problem seems to be that in RouteCoverageMojo RouteCoverageHelper.parseDumpRouteCoverageByRouteId("target/camel-route-coverage"， routeId)) is invoked without adding project base directory.,There are no comments yet on this issue.
CAMEL-15804,Unassigned,2020-11-03T21:33:07+0000,1604421187， where 1604421187 is the epoch,We've developed a data transformation language called DataSonnet. We think it'd offer great value as an officially supported language expression in Camel.A draft PR will be opened against the github repository shortly， this ticket is created to facilitate tracking.,There are no comments yet on this issue.
CAMEL-15803,Andrea Cosentino,2020-11-04T06:01:17+0000,1604451677， where 1604451677 is the epoch,Hi， I downloaded camel 3.6.0 tar.gz file from below link and I found missing some camel libraries like camel-cdihttps://camel.apache.org/download/ I am working in a secure environment and the only way to have all camel jar files is downloading the tar.gz file (we have no access to any maven repo in internet)， can you please amend that in order to start to use camel 3.6.0 in our microservices? Regards，Emmerson.,Hide Permalink Andrea Cosentino added a comment - 04/Nov/20 06:01 This has been fixed for 3.7 and 3.4.5. I don't the uploaded package for 3.6.0 can be amended. Show Andrea Cosentino added a comment - 04/Nov/20 06:01 This has been fixed for 3.7 and 3.4.5. I don't the uploaded package for 3.6.0 can be amended. Hide Permalink Andrea Cosentino added a comment - 04/Nov/20 06:01 You can always download the jar from maven central and add it to the exploded tar Show Andrea Cosentino added a comment - 04/Nov/20 06:01 You can always download the jar from maven central and add it to the exploded tar
CAMEL-15802,Claus Ibsen,2020-11-03T20:34:47+0000,1604417687， where 1604417687 is the epoch,We can make the lightweight unref all the models via changing DefaultModel to be null on CamelContext (eg you cant work on model afterwards) but then it allows the GC to claim all those model classes and remainder reifiers.,Hide Permalink Claus Ibsen added a comment - 03/Nov/20 20:34 - edited TODO error handler builders - untangle from multicast (special) DONE TODO: error handler builders - untangle from default route DONE TODO: RecipientList EIP annotation - inject error handler to use DONE TODO: Transaction error handler DONE TODO named node as source for thread pools - copy over to a simple named node that just has the string data to untangle this. NOT NEEDED TODO: unref route model DONE Show Claus Ibsen added a comment - 03/Nov/20 20:34 - edited TODO error handler builders - untangle from multicast (special) DONE TODO: error handler builders - untangle from default route DONE TODO: RecipientList EIP annotation - inject error handler to use DONE TODO: Transaction error handler DONE TODO named node as source for thread pools - copy over to a simple named node that just has the string data to untangle this. NOT NEEDED TODO: unref route model DONE
CAMEL-15801,Unassigned,2020-11-03T19:53:00+0000,1604415180， where 1604415180 is the epoch,DefaultConfigurerResolver uses a special fallback for configurer names containing the string CamelContext， that tries to resolve a configurer against ExtendedCamelContext FQCN， that usually results into a ExtendedCamelContextConfigurer.In some cases this can lead to ClassCastException due to an explicit cast to ExtendedCamelContext in ExtendedCamelContextConfigurer.configure， for example when using PropertyBindingSupport.Trying to to bind a target bean whose FQCN contains CamelContext (eg my.package.ClassNameWithCamelContextInside) fails with the following exception:Caused by: java.lang.ClassCastException: class my.package.ClassNameWithCamelContextInside cannot be cast to class org.apache.camel.ExtendedCamelContext (my.package.ClassNameWithCamelContextInside and org.apache.camel.ExtendedCamelContext are in unnamed module of loader 'app') at org.apache.camel.impl.ExtendedCamelContextConfigurer.configure(ExtendedCamelContextConfigurer.java:94) at org.apache.camel.support.PropertyBindingSupport.setSimplePropertyViaConfigurer(PropertyBindingSupport.java:847)The problem seems to be in the following snippetif (name.contains("CamelContext")) { // fallback special for camel context itself as we have an extended configurer type = findConfigurer(ExtendedCamelContext.class.getName()， context); },There are no comments yet on this issue.
CAMEL-15800,Unassigned,2020-11-03T17:11:40+0000,1604405500， where 1604405500 is the epoch,As for CAMEL-15250， but this time for camel-k-runtime:https://dist.apache.org/repos/dist/release/camel/camel-k-runtime/,Hide Permalink Claus Ibsen added a comment - 03/Nov/20 17:11 Please put it all in the same JIRA Show Claus Ibsen added a comment - 03/Nov/20 17:11 Please put it all in the same JIRA
CAMEL-15799,Unassigned,2020-11-03T17:01:23+0000,1604404883， where 1604404883 is the epoch,https://dist.apache.org/repos/dist/release/camel/camel-k/ has lots of releases.To reduce the load on the ASF mirrors， projects are required to delete old releases [1]Please can you remove all non-current releases?It's unfair to expect the volunteer 3rd party mirrors to give up more disk space than is necessary.Thanks![1] http://www.apache.org/dev/release.html#when-to-archive,There are no comments yet on this issue.
CAMEL-15798,Unassigned,2020-11-03T17:05:50+0000,1604405150， where 1604405150 is the epoch,Camel-K 1.2.0 was announced on 2929-10-12 [1] however the announce did not include a link to the download page.The source appear to have been uploaded to the ASF mirror system [2]， however I could not find a download page. Please create one and link to it from the website. It should also be included in announce emails going forward; source must be published via packages on the ASF mirror system[1] https://lists.apache.org/thread.html/re7de2c6d2edf74c9886b850f580930b142c19a543f003c550478a794%40%3Cdev.camel.apache.org%3E[2] https://dist.apache.org/repos/dist/release/camel/camel-k/1.2.0/,Hide Permalink Sebb added a comment - 03/Nov/20 17:05 Likewise for Camel-k runtime Show Sebb added a comment - 03/Nov/20 17:05 Likewise for Camel-k runtime
CAMEL-15797,Andrea Cosentino,2020-11-03T15:33:56+0000,1604399636， where 1604399636 is the epoch,with a recent update aws s3 started to send folder keys with the contentType as "application/x-directory; charset=UTF-8" by defaultand the current check in the AWS2S3Consumer.java class only checks for: "application/x-directory".equalsIgnoreCaseon line https://github.com/apache/camel/blob/master/components/camel-aws2-s3/src/main/java/org/apache/camel/component/aws2/s3/AWS2S3Consumer.java#L221with this some keys， specially new ones， are not identified as folders and they are consumed as objects when the `isIncludeFolders` is set to false.,There are no comments yet on this issue.
CAMEL-15796,Claus Ibsen,2020-11-03T10:44:24+0000,1604382264， where 1604382264 is the epoch,The generated lambda classes stay in memory. We can rework the static map in a different way to avoid this.,There are no comments yet on this issue.
CAMEL-15795,Claus Ibsen,2020-11-03T08:58:37+0000,1604375917， where 1604375917 is the epoch,The engine impl should ideally not have references to the model， only during built via reifiers. There are some places where we store reference to the model in the engine， which are not really needed， or can be reduced.,Hide Permalink Claus Ibsen added a comment - 03/Nov/20 08:58 - edited If JMX is disabled we can reduce tangle from DefaultRoute as it wont need to have RouteDefinition stored after routes has been created via reifier DONE Show Claus Ibsen added a comment - 03/Nov/20 08:58 - edited If JMX is disabled we can reduce tangle from DefaultRoute as it wont need to have RouteDefinition stored after routes has been created via reifier DONE
CAMEL-15794,Unassigned,2020-11-03T18:38:51+0000,1604410731， where 1604410731 is the epoch,CxfRsEndpoint contains this code in `invoke*Client`: WebClient client = cfb.createWebClient();((CxfRsEndpoint) getEndpoint()).getChainedCxfRsEndpointConfigurer().configureClient(client);This means， a new client is created on every request (ok， because possibly not thread-safe) and then configured. The configuration step includes an `AbstractSslEndpointConfigurer` which also recreates the SSLSocketFactory on every call， and that includes re-opening and re-reading configured key and trust stores.Doing this on every request obviously degrades performance significantly.,Hide Permalink Claus Ibsen added a comment - 03/Nov/20 18:38 Thanks for the PR Show Claus Ibsen added a comment - 03/Nov/20 18:38 Thanks for the PR
CAMEL-15793,Claus Ibsen,2020-11-02T19:23:41+0000,1604327021， where 1604327021 is the epoch,Camel throws an exception when trying to call a method on an OSGi service reference in Blueprint. For example: <?xml version="1.0" encoding="UTF-8"?><blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"> <reference id="helloWorldServiceRef" interface="com.example.HelloWorldService"/> <camelContext xmlns="http://camel.apache.org/schema/blueprint" id="simple"> <route> <from uri="timer:simple?period=5000"/> <setBody> <method ref="helloWorldServiceRef" method="greet()"/> </setBody> <to uri="log:simplecamel"/> </route> </camelContext></blueprint>Here's the exception thrown:org.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: >>> SetBody[bean[ref:helloWorldServiceRef method:greet()]] <<< in route: Route(route1)[From[timer:simple?period=5000] -> [SetBody[bea... because of Method with name: greet() not found on bean: com.example.HelloWorldServiceImpl@604598c3 of type: Proxy7236e8f2_c140_49c7_a040_ac2eddfcda95 at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:384) ~[?:?] at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:111) ~[?:?] at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:431) ~[?:?] at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:393) ~[?:?] at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2606) ~[!/:3.6.0] at org.apache.camel.support.service.BaseService.init(BaseService.java:83) ~[!/:3.6.0] at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2378) ~[!/:3.6.0] at org.apache.camel.support.service.BaseService.start(BaseService.java:111) ~[!/:3.6.0] at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2395) ~[!/:3.6.0] at org.apache.camel.blueprint.BlueprintCamelContext.start(BlueprintCamelContext.java:241) ~[!/:3.6.0] at org.apache.camel.blueprint.BlueprintCamelContext.maybeStart(BlueprintCamelContext.java:283) ~[!/:3.6.0] at org.apache.camel.blueprint.BlueprintCamelContext.blueprintEvent(BlueprintCamelContext.java:187) [!/:3.6.0] at org.apache.aries.blueprint.container.BlueprintEventDispatcher$3.call(BlueprintEventDispatcher.java:190) [!/:1.10.2] at org.apache.aries.blueprint.container.BlueprintEventDispatcher$3.call(BlueprintEventDispatcher.java:188) [!/:1.10.2] at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_242] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_242] at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_242] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_242] at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_242] at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [?:1.8.0_242] at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [?:1.8.0_242] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_242] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_242] at java.lang.Thread.run(Thread.java:748) [?:1.8.0_242]Caused by: org.apache.camel.component.bean.MethodNotFoundException: Method with name: greet() not found on bean: com.example.HelloWorldServiceImpl@604598c3 of type: Proxy7236e8f2_c140_49c7_a040_ac2eddfcda95 at org.apache.camel.language.bean.BeanExpression.validateHasMethod(BeanExpression.java:268) ~[?:?] at org.apache.camel.language.bean.BeanExpression.init(BeanExpression.java:164) ~[?:?] at org.apache.camel.language.bean.BeanLanguage.createExpression(BeanLanguage.java:173) ~[?:?] at org.apache.camel.reifier.language.MethodCallExpressionReifier.createExpression(MethodCallExpressionReifier.java:57) ~[?:?] at org.apache.camel.reifier.language.ExpressionReifier.createExpression(ExpressionReifier.java:135) ~[?:?] at org.apache.camel.reifier.AbstractReifier.createExpression(AbstractReifier.java:113) ~[?:?] at org.apache.camel.reifier.SetBodyReifier.createProcessor(SetBodyReifier.java:34) ~[?:?] at org.apache.camel.reifier.ProcessorReifier.makeProcessor(ProcessorReifier.java:752) ~[?:?] at org.apache.camel.reifier.ProcessorReifier.addRoutes(ProcessorReifier.java:495) ~[?:?] at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:382) ~[?:?] ... 23 moreThis bug was introduced by this change: https://github.com/apache/camel/commit/47d8ff92de888d923a7f3734080aa5a6d3d5bbcc#diff-d57c2c1fc8e674a5764e3fbe2cdc565dc12ca07541b9d6a2d9345f6c46a3d2e5R97-R107The service reference has a class of Proxy7236e8f2_c140_49c7_a040_ac2eddfcda95 (see the stack trace)， which is a synthetic class， so the type for the BeanInfo is set to its superclass， which in this case is java.lang.Object.,There are no comments yet on this issue.
CAMEL-15792,Matej Melko,2020-11-16T10:29:07+0000,1605504547， where 1605504547 is the epoch,The tests in camel-couchbase need to be migrated to the new test infra. This is currently blocked by https://issues.apache.org/jira/browse/CAMEL-15789,Hide Permalink Matej Melko added a comment - 16/Nov/20 10:29 PR: https://github.com/apache/camel/pull/4613 Show Matej Melko added a comment - 16/Nov/20 10:29 PR: https://github.com/apache/camel/pull/4613
CAMEL-15791,Unassigned,2020-11-02T15:21:17+0000,1604312477， where 1604312477 is the epoch,When trying to bind an AMQP consumer queue via RabbitMQ to the default exchange， the following exception occurs.This happens when declaring it like ... <from uri="rabbitmq:default?queue=foobar"/> <from uri="rabbitmq:amq.default?queue=foobar"/> <from uri="rabbitmq:amqp.default?queue=foobar"/>It's always the same exception:java.io.IOException: null at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:129) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:125) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQChannel.exnWrappingRpc(AMQChannel.java:147) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.ChannelN.queueBind(ChannelN.java:1077) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.recovery.AutorecoveringChannel.queueBind(AutorecoveringChannel.java:393) ~[amqp-client-5.7.3.jar:5.7.3] at org.apache.camel.component.rabbitmq.RabbitMQDeclareSupport.declareAndBindQueue(RabbitMQDeclareSupport.java:135) ~[camel-rabbitmq-3.1.0.jar:3.1.0] at org.apache.camel.component.rabbitmq.RabbitMQDeclareSupport.declareAndBindExchangeWithQueue(RabbitMQDeclareSupport.java:55) ~[camel-rabbitmq-3.1.0.jar:3.1.0] at org.apache.camel.component.rabbitmq.RabbitMQDeclareSupport.declareAndBindExchangesAndQueuesUsing(RabbitMQDeclareSupport.java:36) ~[camel-rabbitmq-3.1.0.jar:3.1.0] at org.apache.camel.component.rabbitmq.RabbitMQEndpoint.declareExchangeAndQueue(RabbitMQEndpoint.java:231) ~[camel-rabbitmq-3.1.0.jar:3.1.0] at org.apache.camel.component.rabbitmq.RabbitConsumer.openChannel(RabbitConsumer.java:356) ~[camel-rabbitmq-3.1.0.jar:3.1.0] at org.apache.camel.component.rabbitmq.RabbitConsumer.reconnect(RabbitConsumer.java:325) ~[camel-rabbitmq-3.1.0.jar:3.1.0] at org.apache.camel.component.rabbitmq.RabbitMQConsumer$StartConsumerCallable.call(RabbitMQConsumer.java:223) ~[camel-rabbitmq-3.1.0.jar:3.1.0] at org.apache.camel.component.rabbitmq.RabbitMQConsumer$StartConsumerCallable.call(RabbitMQConsumer.java:203) ~[camel-rabbitmq-3.1.0.jar:3.1.0] at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na] at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na] at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na] at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]Caused by: com.rabbitmq.client.ShutdownSignalException: channel error; protocol method: #method<channel.close>(reply-code=404， reply-text=NOT_FOUND - no exchange 'default' in vhost '/'， class-id=50， method-id=20) at com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:66) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:36) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:502) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQChannel.privateRpc(AMQChannel.java:293) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQChannel.exnWrappingRpc(AMQChannel.java:141) ~[amqp-client-5.7.3.jar:5.7.3] ... 14 common frames omittedCaused by: com.rabbitmq.client.ShutdownSignalException: channel error; protocol method: #method<channel.close>(reply-code=404， reply-text=NOT_FOUND - no exchange 'default' in vhost '/'， class-id=50， method-id=20) at com.rabbitmq.client.impl.ChannelN.asyncShutdown(ChannelN.java:522) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.ChannelN.processAsync(ChannelN.java:346) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQChannel.handleCompleteInboundCommand(AMQChannel.java:182) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQChannel.handleFrame(AMQChannel.java:114) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQConnection.readFrame(AMQConnection.java:672) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQConnection.access$300(AMQConnection.java:48) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:599) ~[amqp-client-5.7.3.jar:5.7.3] ... 1 common frames omitted,Hide Permalink Andrea Cosentino added a comment - 02/Nov/20 15:21 Report the camel version. It's unclear Show Andrea Cosentino added a comment - 02/Nov/20 15:21 Report the camel version. It's unclear Hide Permalink Philipp added a comment - 02/Nov/20 15:24 - edited Oh， sorry for that I will just add it. <dependency> <groupId>org.apache.camel.springboot</groupId> <artifactId>camel-rabbitmq-starter</artifactId> <version>3.1.0</version> </dependency> Show Philipp added a comment - 02/Nov/20 15:24 - edited Oh， sorry for that I will just add it. <dependency> <groupId>org.apache.camel.springboot</groupId> <artifactId>camel-rabbitmq-starter</artifactId> <version>3.1.0</version> </dependency> Hide Permalink Andrea Cosentino added a comment - 02/Nov/20 15:32 Please try with one of the release in LTS 3.4.4 is the last one or 3.6.0 Show Andrea Cosentino added a comment - 02/Nov/20 15:32 Please try with one of the release in LTS 3.4.4 is the last one or 3.6.0 Hide Permalink Philipp added a comment - 02/Nov/20 16:05 Thanks， we will try. Show Philipp added a comment - 02/Nov/20 16:05 Thanks， we will try. Hide Permalink Philipp added a comment - 03/Nov/20 07:12 Andrea Cosentino but nevertheless: Is it really not possible to bind a queue only to the default exchange with 3.1.0? Seems like one of the core and practical functions of AMQP/RabbitMQ is not supported? Show Philipp added a comment - 03/Nov/20 07:12 Andrea Cosentino but nevertheless: Is it really not possible to bind a queue only to the default exchange with 3.1.0 ? Seems like one of the core and practical functions of AMQP/RabbitMQ is not supported? Hide Permalink Andrea Cosentino added a comment - 03/Nov/20 07:18 3.1.0 was just a release torwards the LTS release 3.4.0， that's why I'm telling to try with an LTS， because we can eventually fix in the next LTS release 3.4.5 or in 3.7.0 (which should be the second LTS of the year). Show Andrea Cosentino added a comment - 03/Nov/20 07:18 3.1.0 was just a release torwards the LTS release 3.4.0， that's why I'm telling to try with an LTS， because we can eventually fix in the next LTS release 3.4.5 or in 3.7.0 (which should be the second LTS of the year). Hide Permalink Andrea Cosentino added a comment - 03/Nov/20 07:18 So the basic suggestion is to move to an LTS release anyway. Show Andrea Cosentino added a comment - 03/Nov/20 07:18 So the basic suggestion is to move to an LTS release anyway. Hide Permalink Philipp added a comment - 20/Nov/20 15:43 Okay thanks， upgrading to 3.4.4 helped. Additionally， we had to bind to the queues like this: <route id="fooRoute"> <!-- ... --> <from uri="rabbitmq:?queue=foo.queue&amp;skipQueueBind=true"/> <!-- ... --> </route> Show Philipp added a comment - 20/Nov/20 15:43 Okay thanks， upgrading to 3.4.4 helped. Additionally， we had to bind to the queues like this: <route id= "fooRoute" > <!-- ... --> <from uri= "rabbitmq:?queue=foo.queue&amp;skipQueueBind=true" /> <!-- ... --> </route>
CAMEL-15790,Claus Ibsen,2020-11-02T13:34:58+0000,1604306098， where 1604306098 is the epoch,for instance， twilio:account/readshould report an error as only "fetch" and "update" are available methods,There are no comments yet on this issue.
CAMEL-15789,Matej Melko,2020-11-11T17:03:17.417Z,1605096197.417， where 1605096197.417 is the epoch,It seems that the bucket part of the URL in the camel-couchbase is not parsed sometimes.When parsing a URL like the ones used in the test code， (for example couchbase:http://localhost/bucket) the code fails to return `bucket` when trying to call the getBucket method of the CouchbaseEndpoint.I attached a reproducer that can be applied using the command following command: patch -p1 < couchbase-reproducer.patch Then， to run the test:cd components/camel-couchbase ; mvn -Dtest=CouchbaseEndpointTest#testParseURI test,Hide Permalink Otavio Rodolfo Piske added a comment - 02/Nov/20 13:21 Obs.: it seems the camel-couchbase component is missing on Apache Jira， therefore I left it out. Show Otavio Rodolfo Piske added a comment - 02/Nov/20 13:21 Obs.: it seems the camel-couchbase component is missing on Apache Jira， therefore I left it out. Hide Permalink Andrea Cosentino added a comment - 02/Nov/20 13:30 The uri is now different， you cannot pass the bucket as part to the base URI， you need to pass it as options ?bucket=bucketname. It was a mess before. Show Andrea Cosentino added a comment - 02/Nov/20 13:30 The uri is now different， you cannot pass the bucket as part to the base URI， you need to pass it as options ?bucket=bucketname. It was a mess before. Hide Permalink Claus Ibsen added a comment - 13/Nov/20 09:45 The unit tests are wrong you call some internal apis. remaning is without query parameters， and query parameters should be in params. Show Claus Ibsen added a comment - 13/Nov/20 09:45 The unit tests are wrong you call some internal apis. remaning is without query parameters， and query parameters should be in params. Hide Permalink Otavio Rodolfo Piske added a comment - 13/Nov/20 09:52 Claus Ibsen just to be sure: do you mean that the reproducer is wrong or do you mean that the unit tests on the code base are wrong (or both)? I created the reproducer based on the unit tests there， so it's possible both are wrong. Show Otavio Rodolfo Piske added a comment - 13/Nov/20 09:52 Claus Ibsen just to be sure: do you mean that the reproducer is wrong or do you mean that the unit tests on the code base are wrong (or both)? I created the reproducer based on the unit tests there， so it's possible both are wrong. Hide Permalink Claus Ibsen added a comment - 13/Nov/20 09:52 Yeah as Andrea says the bucket is a query parameter， so you use ?bucket=mybucket. I fixed your provided test， and updated the old mistaken tests. Show Claus Ibsen added a comment - 13/Nov/20 09:52 Yeah as Andrea says the bucket is a query parameter， so you use ?bucket=mybucket. I fixed your provided test， and updated the old mistaken tests. Hide Permalink Otavio Rodolfo Piske added a comment - 13/Nov/20 09:58 Claus Ibsen thanks Claus， much appreciated! I will give it a try soon. This should unblock a few disabled tests on Camel Kafka Connector. Show Otavio Rodolfo Piske added a comment - 13/Nov/20 09:58 Claus Ibsen thanks Claus， much appreciated! I will give it a try soon. This should unblock a few disabled tests on Camel Kafka Connector.
CAMEL-15788,Unassigned,2020-11-02T10:24:14+0000,1604294654， where 1604294654 is the epoch,It seems there was some change in Camel 3.1 that broke Yammer: replacing explicit ‘function’ string value with name of ‘featureType’ enum makes Yammer API URLs invalid: e.g. https://www.yammer.com/api/v1/messages.json vs https://www.yammer.com/api/v1/*MESSAGES*.json Details: line #28 and line #96 in https://github.com/apache/camel/blame/camel-3.1.x/components/camel-yammer/src/main/java/org/apache/camel/component/yammer/YammerConfiguration.java line #44 in https://github.com/apache/camel/blob/camel-3.1.x/components/camel-yammer/src/main/java/org/apache/camel/component/yammer/YammerMessageProducer.java and other places where use of ‘function’ was replaced with name of “functionType” enum values...,Hide Permalink Claus Ibsen added a comment - 02/Nov/20 10:24 Thanks for reporting and pointing out where in the code the problems are. Show Claus Ibsen added a comment - 02/Nov/20 10:24 Thanks for reporting and pointing out where in the code the problems are.
CAMEL-15787,Unassigned,2020-11-02T06:01:23+0000,1604278883， where 1604278883 is the epoch,When using netty in client mode (create pool of connections). And do not send any requests， all sockets in pool recreate every 5 minutes.It is strange private long producerPoolMinEvictableIdle = 5 * 60 * 1000L config for apache common pool. Default value must be bigger and do not recreate all sockets every 5 minutes,Hide Permalink Claus Ibsen added a comment - 02/Nov/20 06:01 No why do you think that， they are idle for 5 min and gets re-created. You can configure a higher value if you want. Show Claus Ibsen added a comment - 02/Nov/20 06:01 No why do you think that， they are idle for 5 min and gets re-created. You can configure a higher value if you want. Hide Permalink Vladimir added a comment - 02/Nov/20 06:39 But keepAlive mode is enabled， sockets wait data. I see keeAlive timers in system， but sockets close and recreate. When i create sockets from route and then send data with Channed.write from processors， sockets recreate every 5 minutes. I lost data， this is problem. Show Vladimir added a comment - 02/Nov/20 06:39 But keepAlive mode is enabled， sockets wait data. I see keeAlive timers in system， but sockets close and recreate. When i create sockets from route and then send data with Channed.write from processors， sockets recreate every 5 minutes. I lost data， this is problem. Hide Permalink Vladimir added a comment - 02/Nov/20 07:25 https://github.com/apache/camel/pull/4548/commits/4d45fda928b67bc731bce289b0e2d3130955bcd5 Show Vladimir added a comment - 02/Nov/20 07:25 https://github.com/apache/camel/pull/4548/commits/4d45fda928b67bc731bce289b0e2d3130955bcd5
CAMEL-15786,Unassigned,2020-11-02T05:21:33+0000,1604276493， where 1604276493 is the epoch,According to https://camel.apache.org/manual/latest/rest-dsl.html by default the apiVendorExtension option should be set to false. But even when I set it manually to false， the produced JSON for OpenAPI still contains the x- fields like "x-camelContextId"， "x-routeId" etc. I've tried to set this option both in Java using restConfiguration().apiVendorExtension(false) and in application.yml file of my Spring Boot application:camel: rest: api-vendor-extension: falseI've checked it on two versions of Camel (3.4.1， 3.6.0)， both with the same result.Part of my pom.xml file:<dependency> <groupId>org.apache.camel.springboot</groupId> <artifactId>camel-rest-starter</artifactId> <version>3.4.1</version></dependency><dependency> <groupId>org.apache.camel.springboot</groupId> <artifactId>camel-openapi-java-starter</artifactId> <version>3.4.1</version></dependency>Could you please check it? I don't want to expose internal implementation details via OpenAPI JSON file.,Hide Permalink Claus Ibsen added a comment - 02/Nov/20 05:21 If you have the time then you may want to look in the source code if that feature is missing and then look in the -swagger component how it does it， and copy that over to openapi and submit a PR. We love contributions Show Claus Ibsen added a comment - 02/Nov/20 05:21 If you have the time then you may want to look in the source code if that feature is missing and then look in the -swagger component how it does it， and copy that over to openapi and submit a PR. We love contributions
CAMEL-15785,Andrea Cosentino,2020-11-23T18:15:09+0000,1606137309， where 1606137309 is the epoch,Like https://issues.apache.org/jira/browse/CAMEL-15779This will make things easier for people using AWS services,Hide Permalink Andrea Cosentino added a comment - 23/Nov/20 18:15 Done in S3， SNS， SQS Show Andrea Cosentino added a comment - 23/Nov/20 18:15 Done in S3， SNS， SQS
CAMEL-15784,Claus Ibsen,2020-10-31T13:08:41+0000,1604135321， where 1604135321 is the epoch,We can mark services that are used only during bootstrap with a marker interface， and then when camel has been started it can detect those bootstrap services and unload / clear them so they reduce memory etc,Hide Permalink Claus Ibsen added a comment - 31/Oct/20 13:08 - edited We should have a BootstrapFactoryFinder that loads those optional services on startup. DONE Show Claus Ibsen added a comment - 31/Oct/20 13:08 - edited We should have a BootstrapFactoryFinder that loads those optional services on startup. DONE Hide Permalink Claus Ibsen added a comment - 01/Nov/20 17:41 See if we can optimize to avoid all those lambda classes for reifiers that stay in the jvm after starting and clearing the reifier models. Show Claus Ibsen added a comment - 01/Nov/20 17:41 See if we can optimize to avoid all those lambda classes for reifiers that stay in the jvm after starting and clearing the reifier models.
CAMEL-15783,Claus Ibsen,2020-10-30T18:31:35+0000,1604068295， where 1604068295 is the epoch,Add order = int to @Converter so we can tell the source code generator for bulk converters to output the methods in a specific order， so it may not change during rebuild on different JDKs and OSes,There are no comments yet on this issue.
CAMEL-15782,Claus Ibsen,2020-11-01T16:25:18+0000,1604229918， where 1604229918 is the epoch,After camel-main has been started up， then its own properties that it loads into an OrderedProperties is no longer in use， and we can clear it to reclaim memory.,Hide Permalink Claus Ibsen added a comment - 01/Nov/20 16:25 - edited You could in theory use the properties component to resolve those properties at runtime. Show Claus Ibsen added a comment - 01/Nov/20 16:25 - edited You could in theory use the properties component to resolve those properties at runtime.
CAMEL-15781,Claus Ibsen,2020-10-30T16:44:44+0000,1604061884， where 1604061884 is the epoch,Reducing memory， we can reduce 1kb with the 2 regexp which we can do in some simpler code ourselves.,There are no comments yet on this issue.
CAMEL-15780,Unassigned,2020-11-21T22:41:01+0000,1605980461， where 1605980461 is the epoch,Goal are: Ensure user can rely on its JSON-Java mapper implementation Reduce the size of the dependency tree for that concern (openapi generation) but still use camel integration with the rest DSLIf it helps we can extract the model from https://github.com/apache/geronimo-openapi/tree/master/geronimo-openapi-impl/src/main/java/org/apache/geronimo/microprofile/openapi/impl/model in its own jar,Hide Permalink Mohammadu Milhar Mahas added a comment - 21/Nov/20 22:41 Hi， I'm Mohammadu Milhar Mahas， a second year undergraduate in Computer science at the University of Jaffna， Srilanka. i would like to do this priject for GSoC 2021. I'm familiar in Java language . please help me get started. Show Mohammadu Milhar Mahas added a comment - 21/Nov/20 22:41 Hi， I'm Mohammadu Milhar Mahas， a second year undergraduate in Computer science at the University of Jaffna， Srilanka. i would like to do this priject for GSoC 2021. I'm familiar in Java language . please help me get started.
CAMEL-15779,Andrea Cosentino,2020-10-30T16:03:33+0000,1604059413， where 1604059413 is the epoch,Currently both aws.s3 and aws2.s3 IAM optimized client implementations are using a hard-coded InstanceProfileCredentialsProvider. It means that you can only use it from EC2 instance， and it will not work in ECS or Fargate task. It will make much more sense to use a DefaultCredentialsProviderChain (DefaultCredentialsProvider for v2). In this case we will be able to use multiple methods for supplying credentials - Java System Properties， Environment Variables， Credential profiles file， Credentials delivered through the Amazon EC2 container service， Instance profile credentials delivered through the Amazon EC2 metadata service.,There are no comments yet on this issue.
CAMEL-15778,Claus Ibsen,2020-10-30T16:55:02+0000,1604062502， where 1604062502 is the epoch,After camel-main has started up， then its own configurer for configuring camel.main.xxx are no longer in use， and we can clear their state (it has an ALL_OPTIONS) map that has data that can be cleared.,Hide Permalink Claus Ibsen added a comment - 30/Oct/20 16:55 We can have configurers marked as bootstrap = true for those in camel-main etc and then we can make it easier to clear only bootstrap， and leave the components as-is. But if the user dont have any dynamic endpoints / components (such as not using toD， recipient list) then they can clear those as well Show Claus Ibsen added a comment - 30/Oct/20 16:55 We can have configurers marked as bootstrap = true for those in camel-main etc and then we can make it easier to clear only bootstrap， and leave the components as-is. But if the user dont have any dynamic endpoints / components (such as not using toD， recipient list) then they can clear those as well
CAMEL-15777,Andrea Cosentino,2020-11-26T07:51:57+0000,1606359117， where 1606359117 is the epoch,https://github.com/apache/camel/blob/master/components/camel-aws-sqs/src/main/java/org/apache/camel/component/aws/sqs/SqsEndpoint.java#L161AWS AmazonSQS client has a method called listQueues() which only returns the first 1000 queues (alphabetically sorted). If the AWS account has more than 1k queues， camel would not find the queue/route. AmazonSQS allows pagination in order to get the full list of queues.https://docs.aws.amazon.com/AWSSimpleQueueService/latest/APIReference/API_ListQueues.htmlI think it would be useful to implement the pagination for dynamically built routes.,Hide Permalink Andrea Cosentino added a comment - 26/Nov/20 07:51 By the way this can only be for aws2-sqs， we won't change the aws v1 components. Show Andrea Cosentino added a comment - 26/Nov/20 07:51 By the way this can only be for aws2-sqs， we won't change the aws v1 components.
CAMEL-15776,Claus Ibsen,2020-10-30T07:44:19+0000,1604029459， where 1604029459 is the epoch,We can likely remove this as the converter is improved since this old code.,There are no comments yet on this issue.
CAMEL-15775,Andrea Cosentino,2020-10-30T06:06:47+0000,1604023607， where 1604023607 is the epoch,There is a new release today,There are no comments yet on this issue.
CAMEL-15774,David Jencks,2020-10-30T01:48:32+0000,1604008112， where 1604008112 is the epoch,With Antora 3.0.0-alpha.1， include:: instructions can suppress "asciidoctor: ERROR: atlasmap-component.adoc: line 11: include target not found: ..." errors by including [opts=optional]. This modifies tooling to include this in the generated includes for cq bits， updates the generated files correspondingly， and upgrades the Antora version.,Hide Permalink ASF GitHub Bot added a comment - 30/Oct/20 01:48 djencks opened a new pull request #495: URL: https://github.com/apache/camel-website/pull/495 actual Antora version upgrade. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 30/Oct/20 01:48 djencks opened a new pull request #495: URL: https://github.com/apache/camel-website/pull/495 actual Antora version upgrade. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 30/Oct/20 09:18 zregvart merged pull request #495: URL: https://github.com/apache/camel-website/pull/495 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 30/Oct/20 09:18 zregvart merged pull request #495: URL: https://github.com/apache/camel-website/pull/495 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 30/Oct/20 09:18 zregvart commented on pull request #495: URL: https://github.com/apache/camel-website/pull/495#issuecomment-719439534 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 30/Oct/20 09:18 zregvart commented on pull request #495: URL: https://github.com/apache/camel-website/pull/495#issuecomment-719439534 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Zoran Regvart added a comment - 30/Oct/20 09:18 Thanks David Jencks! Show Zoran Regvart added a comment - 30/Oct/20 09:18 Thanks David Jencks !
CAMEL-15773,David Jencks,2020-10-29T22:14:54+0000,1603995294， where 1603995294 is the epoch,The recent change to the Antora xref-validator to validate nav files is useful but bogus as it reclassifies nav files as pages， breaking the index extension used to generate tables.We can work around this by explicitly excluding nav files from the indexTable macro.,There are no comments yet on this issue.
CAMEL-15772,Unassigned,2020-10-29T18:24:02+0000,1603981442， where 1603981442 is the epoch,In order to read compacted topics， the component (consumer) should support the readCompacted option.readCompacted documentation,Hide Permalink Claus Ibsen added a comment - 29/Oct/20 18:24 Thanks for reporting are you able to help contribute this? Show Claus Ibsen added a comment - 29/Oct/20 18:24 Thanks for reporting are you able to help contribute this? Hide Permalink Ludovic Boutros added a comment - 29/Oct/20 18:36 Yes PR available. Show Ludovic Boutros added a comment - 29/Oct/20 18:36 Yes PR available.
CAMEL-15771,Jiri Ondrusek,2020-10-29T15:32:18+0000,1603971138， where 1603971138 is the epoch,Readme files from various fabric8 quickstart are almost the same.e.g. spring-boot ones like: https://github.com/fabric8-quickstarts/spring-boot-camel/blob/master/README.adoc https://github.com/fabric8-quickstarts/spring-boot-cxf-jaxws-xml/blob/master/README.adoc https://github.com/fabric8-quickstarts/spring-boot-camel-infinispan/blob/master/README.adoc ...It would be nice to implement some kind of templating mechanism which will bring for example: similar readme files for various quickstarts - makes it easier to use for users possibility to fix some global problem in doc for various quickstarts in one place probably more benefitsit should be possible to implement such feature using following maven plugin:https://github.com/whelk-io/asciidoc-template-maven-plugin,Hide Permalink Andrea Cosentino added a comment - 29/Oct/20 15:32 I don't think this is an Apache Camel related issue， fabric8 is a different organization. Show Andrea Cosentino added a comment - 29/Oct/20 15:32 I don't think this is an Apache Camel related issue， fabric8 is a different organization.
CAMEL-15770,Andrea Cosentino,2020-10-29T18:57:21+0000,1603983441， where 1603983441 is the epoch,There are 3 pairs of serializer/deserialiser properties on the Kafka component.The inconsistent parts of the names are highlighted ConsumerProducerType*kafka*HeaderDeserializer*kafka*HeaderSerializerBeankeyDeserializerkeySerializer*Class*String FQN*value*Deserializerserializer*Class*String FQN I think it would be worth making these names consistent.CurrentProposedkafkaHeaderDeserializerheaderDeserializerkafkaHeaderSerializerheaderSerializerkeyDeserializerkeyDeserializer keySerializerClasskeySerializervalueDeserializervalueDeserializerserializerClassvalueSerializerIt looks like there was an intent to denote the key- and value- properties as expecting a class FQN string by appending 'Class' to the name. I don't see any other properties that do this so I think the consistent approach is to leave it off.I've made an assumption that valueDeserializer & serializerClass are a pair， as the descriptions don't match. It would be good to take the opportunity to make all six descriptions consistent.,Hide Permalink Andrea Cosentino added a comment - 29/Oct/20 18:57 On the camel side this is done. I need to do more work on SB and examples around. Also add some migration and update documentation. The codebase in main camel is done. Show Andrea Cosentino added a comment - 29/Oct/20 18:57 On the camel side this is done. I need to do more work on SB and examples around. Also add some migration and update documentation. The codebase in main camel is done.
CAMEL-15769,Unassigned,2020-10-29T18:26:34+0000,1603981594， where 1603981594 is the epoch,Sample json message body:{ "text": \{ "div": "some， text" } }DSL.split(jsonpath("text.div"))ResultThe "some， text" string gets split into two pieces: "some" and " text"; (it's split on the comma token).I do not want the above string to be split on comma tokens， but this appears to happen by default when jsonpath returns a single element as a string value. A workaround is to override the default tokenization by providing some string I hope never appears in the json I process. For example:.split(jsonpath("text.div").tokenize("@@@"))If I alter the json as follows， CamelSplitSize is 1 and the output is "some， text" (no split on comma):{ "text": \{ "div": [ "some， text" ] } } I discussed this with Claus on Zulip and this was his response: "Yeah its a bit of corner case， and as you say you can change the token to @@@ or something. To avoid introducing a new option for a case like this， then we can look at if you specify token="false" then its turned off. You are welcome to create a Jira"Only concern with the following is if someone actually wanted to tokenize a string on "false" rather than disable tokenization. Possible I misinterpreted Claus' suggestion though..split(jsonpath("text.div").tokenize("false"))I'd be happy to work on contributing this capability to camel and/or unit test cases to help facilitate a contribution.Thanks in advance,Hide Permalink Claus Ibsen added a comment - 29/Oct/20 18:26 Yeah using "false" is a okay way to tell to not use it. We use also false in recipient list EIP for turning off the delimiter org.apache.camel.processor.RecipientList#IGNORE_DELIMITER_MARKER Show Claus Ibsen added a comment - 29/Oct/20 18:26 Yeah using "false" is a okay way to tell to not use it. We use also false in recipient list EIP for turning off the delimiter org.apache.camel.processor.RecipientList#IGNORE_DELIMITER_MARKER Hide Permalink Claus Ibsen added a comment - 29/Oct/20 18:26 Scott you are very welcome to help work on this. And if you could add an unit test in the PR that would be great Show Claus Ibsen added a comment - 29/Oct/20 18:26 Scott you are very welcome to help work on this. And if you could add an unit test in the PR that would be great Hide Permalink Claus Ibsen added a comment - 12/Nov/20 17:57 Thanks for working on this and the PR Show Claus Ibsen added a comment - 12/Nov/20 17:57 Thanks for working on this and the PR Hide Permalink Claus Ibsen added a comment - 12/Nov/20 18:01 Oh btw wonder if you would mind adding an unit test to camel-jsonpath that uses this new "false" tokenizer. And know you know how to do PRs then we love contributions Show Claus Ibsen added a comment - 12/Nov/20 18:01 Oh btw wonder if you would mind adding an unit test to camel-jsonpath that uses this new "false" tokenizer. And know you know how to do PRs then we love contributions Hide Permalink Scott Carrier added a comment - 12/Nov/20 18:12 Hey Claus - sure thing， I'll go ahead and add a camel-jsonpath unit test for the new "false" tokenizer. I'll just reference this issue in the PR， unless you prefer I open another one. Cheers Show Scott Carrier added a comment - 12/Nov/20 18:12 Hey Claus - sure thing， I'll go ahead and add a camel-jsonpath unit test for the new "false" tokenizer. I'll just reference this issue in the PR， unless you prefer I open another one. Cheers Hide Permalink Claus Ibsen added a comment - 12/Nov/20 20:12 Yes this is fine Show Claus Ibsen added a comment - 12/Nov/20 20:12 Yes this is fine
CAMEL-15768,Zheng Feng,2020-10-28T15:09:30+0000,1603883370， where 1603883370 is the epoch,I just use the camel-example-main to reproducer this issue add the camel-lra dependency in the pom.xml add camel.lra.enabled=true in the application.properties re-compile and run the exampleINFO] Using custom org.apache.camel.example.MyApplication to initiate a CamelContext[INFO] Starting Camel ...23:02:19.058 [org.apache.camel.example.MyApplication.main()] INFO o.a.camel.support.LRUCacheFactory - Detected and using LRUCacheFactory: camel-caffeine-lrucache23:02:19.161 [org.apache.camel.example.MyApplication.main()] INFO o.apache.camel.main.BaseMainSupport - Using properties from: classpath:application.properties;optional=true23:02:19.175 [org.apache.camel.example.MyApplication.main()] INFO o.apache.camel.main.BaseMainSupport - Loaded additional 1 properties from file: src/main/data/foo.properties23:02:19.243 [org.apache.camel.example.MyApplication.main()] INFO o.a.c.i.e.DefaultBeanIntrospection - Invoked: 1 times (overall) [Method: setProperty， Target: org.apache.camel.service.lra.LRASagaService@13db0de， Arguments: [enabled， true]][ERROR] *************************************[ERROR] Error occurred while running main from: org.apache.camel.example.MyApplication[ERROR] java.lang.reflect.InvocationTargetException at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke (Method.java:498) at org.apache.camel.maven.RunMojo$1.run (RunMojo.java:438) at java.lang.Thread.run (Thread.java:748)Caused by: org.apache.camel.PropertyBindingException: Error binding property (camel.lra.enabled=true) with name: enabled on bean: lra-saga-service with value: true at org.apache.camel.main.MainHelper.setPropertiesOnTarget (MainHelper.java:192) at org.apache.camel.main.BaseMainSupport.setLraCheckProperties (BaseMainSupport.java:1041) at org.apache.camel.main.BaseMainSupport.doConfigureCamelContextFromMainConfiguration (BaseMainSupport.java:795) at org.apache.camel.main.BaseMainSupport.autoconfigure (BaseMainSupport.java:435) at org.apache.camel.main.BaseMainSupport.postProcessCamelContext (BaseMainSupport.java:522) at org.apache.camel.main.MainSupport.initCamelContext (MainSupport.java:320) at org.apache.camel.main.Main.doInit (Main.java:106) at org.apache.camel.support.service.BaseService.init (BaseService.java:83) at org.apache.camel.main.MainSupport.run (MainSupport.java:58) at org.apache.camel.main.MainCommandLineSupport.run (MainCommandLineSupport.java:156) at org.apache.camel.example.MyApplication.main (MyApplication.java:38) at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke (Method.java:498) at org.apache.camel.maven.RunMojo$1.run (RunMojo.java:438) at java.lang.Thread.run (Thread.java:748),There are no comments yet on this issue.
CAMEL-15767,Alex Dettinger,2020-10-28T08:18:47+0000,1603858727， where 1603858727 is the epoch,,Hide Permalink Alex Dettinger added a comment - 28/Oct/20 08:18 Fixed here: https://github.com/apache/camel/commit/ede1347be948a3a955243010b8dc6c535d3a6f4b Show Alex Dettinger added a comment - 28/Oct/20 08:18 Fixed here: https://github.com/apache/camel/commit/ede1347be948a3a955243010b8dc6c535d3a6f4b
CAMEL-15766,Claus Ibsen,2020-10-30T09:46:05+0000,1604036765， where 1604036765 is the epoch,When trying to use a custom http-configurer， I believe I am experiencing a regression when upgrading to Camel 3.6.0I am using spring-boot 2.3.4.RELEASE， and I am declaring my custom configurer bean using:camel.component.http.http-client-configurer=#httpClientConfigWhen updating to Camel 3.6.0， that configuration results in: ***************************APPLICATION FAILED TO START***************************Description:Failed to bind properties under 'camel.component.http.http-client-configurer' to org.apache.camel.component.http.HttpClientConfigurer: Property: camel.component.http.http-client-configurer Value: httpClientConfig Origin: class path resource [application.properties]:1:45 Reason: No converter found capable of converting from type [java.lang.String] to type [org.apache.camel.component.http.HttpClientConfigurer]Action:Update your application's configuration See https://github.com/santam85/camel-3.6.0-http-configurer-bean for a reproduction example.,Hide Permalink Dmitry Volodin added a comment - 30/Oct/20 09:46 The debug of the problem 2020-10-30 10:17:15.122 WARN 528990 --- [ main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.apache.camel.component.http.springboot.HttpComponentAutoConfiguration': Unsatisfied dependency expressed through field 'configuration'; nested exception is org.springframework.boot.context.properties.ConfigurationPropertiesBindException: Error creating bean with name 'camel.component.http-org.apache.camel.component.http.springboot.HttpComponentConfiguration': Could not bind properties to 'HttpComponentConfiguration' : prefix=camel.component.http， ignoreInvalidFields=false， ignoreUnknownFields=true; nested exception is org.springframework.boot.context.properties.bind.BindException: Failed to bind properties under 'camel.component.http.http-client-configurer' to org.apache.camel.component.http.HttpClientConfigurer Show Dmitry Volodin added a comment - 30/Oct/20 09:46 The debug of the problem 2020-10-30 10:17:15.122 WARN 528990 --- [ main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.apache.camel.component.http.springboot.HttpComponentAutoConfiguration' : Unsatisfied dependency expressed through field 'configuration' ; nested exception is org.springframework.boot.context.properties.ConfigurationPropertiesBindException: Error creating bean with name 'camel.component.http-org.apache.camel.component.http.springboot.HttpComponentConfiguration' : Could not bind properties to 'HttpComponentConfiguration' : prefix=camel.component.http， ignoreInvalidFields= false ， ignoreUnknownFields= true ; nested exception is org.springframework.boot.context.properties.bind.BindException: Failed to bind properties under 'camel.component.http.http-client-configurer' to org.apache.camel.component.http.HttpClientConfigurer Hide Permalink Claus Ibsen added a comment - 13/Nov/20 10:41 Argh spring boot you are a mystery black box. So its hard to get a hook into your binding system. Writing custom converter from String -> each class is maybe required. And not sure how to get all those type converters automatic registered in spring boot - its annotation magic can be a hell. Show Claus Ibsen added a comment - 13/Nov/20 10:41 Argh spring boot you are a mystery black box. So its hard to get a hook into your binding system. Writing custom converter from String -> each class is maybe required. And not sure how to get all those type converters automatic registered in spring boot - its annotation magic can be a hell. Hide Permalink Dmitry Volodin added a comment - 13/Nov/20 10:45 - edited Claus Ibsen not sure that's related to conversion. It's related to the modified Customizers logic as it's calling later than Spring requires custom httpClientConfig for binding. Show Dmitry Volodin added a comment - 13/Nov/20 10:45 - edited Claus Ibsen not sure that's related to conversion. It's related to the modified Customizers logic as it's calling later than Spring requires custom httpClientConfig for binding. Hide Permalink Claus Ibsen added a comment - 15/Nov/20 18:42 Okay we need to source code generate a converter where we can do the lookup A prototype package org.apache.camel.component.http.springboot; import java.util.LinkedHashSet; import java.util.Set; import org.apache.camel.CamelContext; import org.springframework.core.convert.TypeDescriptor; import org.springframework.core.convert.converter.GenericConverter; public class DeleteMe implements GenericConverter { private final CamelContext camelContext; public DeleteMe(CamelContext camelContext) { this.camelContext = camelContext; } @Override public Set<ConvertiblePair> getConvertibleTypes() { Set<ConvertiblePair> answer = new LinkedHashSet<>(); answer.add(new ConvertiblePair(String.class， org.apache.camel.component.http.HttpClientConfigurer.class)); answer.add(new ConvertiblePair(String.class， org.apache.http.conn.HttpClientConnectionManager.class)); return answer; } @Override public Object convert(Object source， TypeDescriptor sourceType， TypeDescriptor targetType) { if (source == null) { return null; } String ref = source.toString().substring(1); switch (targetType.getName()) { case "org.apache.camel.component.http.HttpClientConfigurer": return camelContext.getRegistry().lookupByNameAndType(ref， org.apache.camel.component.http.HttpClientConfigurer.class); case "org.apache.http.conn.HttpClientConnectionManager": return camelContext.getRegistry().lookupByNameAndType(ref， org.apache.http.conn.HttpClientConnectionManager.class); } return null; } } Show Claus Ibsen added a comment - 15/Nov/20 18:42 Okay we need to source code generate a converter where we can do the lookup A prototype package org.apache.camel.component.http.springboot; import java.util.LinkedHashSet; import java.util.Set; import org.apache.camel.CamelContext; import org.springframework.core.convert.TypeDescriptor; import org.springframework.core.convert.converter.GenericConverter; public class DeleteMe implements GenericConverter { private final CamelContext camelContext; public DeleteMe(CamelContext camelContext) { this .camelContext = camelContext; } @Override public Set<ConvertiblePair> getConvertibleTypes() { Set<ConvertiblePair> answer = new LinkedHashSet<>(); answer.add( new ConvertiblePair( String .class， org.apache.camel.component.http.HttpClientConfigurer.class)); answer.add( new ConvertiblePair( String .class， org.apache.http.conn.HttpClientConnectionManager.class)); return answer; } @Override public Object convert( Object source， TypeDescriptor sourceType， TypeDescriptor targetType) { if (source == null ) { return null ; } String ref = source.toString().substring(1); switch (targetType.getName()) { case "org.apache.camel.component.http.HttpClientConfigurer" : return camelContext.getRegistry().lookupByNameAndType(ref， org.apache.camel.component.http.HttpClientConfigurer.class); case "org.apache.http.conn.HttpClientConnectionManager" : return camelContext.getRegistry().lookupByNameAndType(ref， org.apache.http.conn.HttpClientConnectionManager.class); } return null ; } }
CAMEL-15765,Claus Ibsen,2020-10-28T09:05:39+0000,1603861539， where 1603861539 is the epoch,Working on optimizing the type converters from camel-base to be source code generated as a single class with big if .. else for doing converters.This makes Camel faster and smaller reduces the classes loaded as there are no lambdas classes for each converter does not register in the doublemap with from/to which reduces from 21kb to 3kb heap memory likely faster than the map lookup and with the lambda callBefore this prototype then DefaultTypeConverterRegistry was the 2nd biggest dominator from Camel (context biggest). Now its down to less than 3kb,Hide Permalink Claus Ibsen added a comment - 28/Oct/20 09:05 - edited TODO: Optimize enum to let it converter sooner DONE TODO: New way for type converter loaded to register as single class DONE TODO: Regen type converter loader source with new way for core camel DONE TODO: Report number of converters via loader in new way DONE TODO: Report type converter combos in a new way DONE TODO: camel-cxf test failures DONE TODO: camel-flatpack test failures DONE TODO: camel-netty-http test failures DONE TODO: xml tests failures in core DONE TODO: Potential optimize for == match before instanceof in generated source code DONE TODO: camel-karaf to support bulk type converter loader DONE TODO: camel-cxf converter test failure DONE TODO: sort so methods with deepest class level is first so we match the most concrete from the beginning DONE Show Claus Ibsen added a comment - 28/Oct/20 09:05 - edited TODO: Optimize enum to let it converter sooner DONE TODO: New way for type converter loaded to register as single class DONE TODO: Regen type converter loader source with new way for core camel DONE TODO: Report number of converters via loader in new way DONE TODO: Report type converter combos in a new way DONE TODO: camel-cxf test failures DONE TODO: camel-flatpack test failures DONE TODO: camel-netty-http test failures DONE TODO: xml tests failures in core DONE TODO: Potential optimize for == match before instanceof in generated source code DONE TODO: camel-karaf to support bulk type converter loader DONE TODO: camel-cxf converter test failure DONE TODO: sort so methods with deepest class level is first so we match the most concrete from the beginning DONE
CAMEL-15764,Claus Ibsen,2020-10-27T18:05:40+0000,1603807540， where 1603807540 is the epoch,I noticed some inconsistency when adding native support for Twilio in Camel Quarkus. Consider the following URI:twilio://incoming-phone-number/create?phoneNumber=RAW(+15005550006)Turns out that this leads to the phoneNumber property binding being done reflectively instead of via the configurer.This problem is that ignoreCase is always false here:https://github.com/apache/camel/blob/master/components/camel-twilio/src/generated/java/org/apache/camel/component/twilio/IncomingPhoneNumberEndpointConfigurationConfigurer.java#L33Hence the case logic attempts to match on the exact parameter name， and there is no case block for the camel cased 'phoneNumber'.The obvious workaround is to name the URI param 'phonenumber' or 'PhoneNumber' but the camel-twilio docs all refer to camel cased parameter names.,Hide Permalink Chandrakant Hardahe added a comment - 27/Oct/20 18:05 Thanks James Netherton for reporting it， I'll work on this Show Chandrakant Hardahe added a comment - 27/Oct/20 18:05 Thanks James Netherton for reporting it， I'll work on this
CAMEL-15763,Claus Ibsen,2020-10-31T08:19:21+0000,1604117961， where 1604117961 is the epoch,This can reduce object allocated in heap memory after Camel routes are started. The danger is that new routes cannot be added afterwards. But it may save up to 12-90kb (depending on number of different EIPs in use).,Hide Permalink Claus Ibsen added a comment - 31/Oct/20 08:19 Will use the lightweight option we already have for this as other things are combined into this so that is a better name. And this can also kick start the experiment with the lightweight camel context again. Show Claus Ibsen added a comment - 31/Oct/20 08:19 Will use the lightweight option we already have for this as other things are combined into this so that is a better name. And this can also kick start the experiment with the lightweight camel context again.
CAMEL-15762,Unassigned,2020-10-26T18:54:56+0000,1603724096， where 1603724096 is the epoch,We have many constants on the Exchange interface. But its discouraged to have that on interfaces. If we have a constant class instead to keep those on that would be better. But the Exchange have had these for a long time， os its maybe a Camel 4 change.This also helps reduce the object size of Exchange instances in memory as they dont have reference to those 100+ constants. Today they take up space， and an empty exchange is around 1000-1500 bytes. Its actuall the class instance that takes up extra memory. So not sure if the instances of DefaultExchange will reduce memory， but constant fields on interface is regarded as anti pattern by Java experts.,There are no comments yet on this issue.
CAMEL-15761,Claus Ibsen,2020-10-26T16:42:13+0000,1603716133， where 1603716133 is the epoch,This class has a number of regexp for parsing time from human format to millis.The profile says this class takes up 7kb due to all those regexp patterns. We can make this code use old fashioned code that checks for > 24 and all of that and build the output.Then its a tiny class in size.,There are no comments yet on this issue.
CAMEL-15760,Claus Ibsen,2020-11-02T21:02:21+0000,1604332941， where 1604332941 is the epoch,Whenever refreshing a bundle that creates a camel context via blueprint， the warning below appears in the logs:16:11:44.779 WARN [Blueprint Event Dispatcher: 1] Error occurred while stopping lifecycle strategies. This exception will be ignored.org.osgi.service.blueprint.container.NoSuchComponentException: No component with id 'blueprintBundle' could be found at org.apache.aries.blueprint.container.BlueprintContainerImpl.getComponentInstance(BlueprintContainerImpl.java:805) ~[?:?] at org.apache.camel.blueprint.BlueprintContainerBeanRepository.lookupByType(BlueprintContainerBeanRepository.java:104) ~[?:?] at org.apache.camel.blueprint.BlueprintContainerBeanRepository.lookupByType(BlueprintContainerBeanRepository.java:100) ~[?:?] at org.apache.camel.blueprint.BlueprintContainerBeanRepository.findByType(BlueprintContainerBeanRepository.java:94) ~[?:?] at org.apache.camel.support.DefaultRegistry.findByType(DefaultRegistry.java:203) ~[!/:3.4.4] at org.apache.camel.impl.engine.OnCamelContextLifecycleStrategy.onContextStop(OnCamelContextLifecycleStrategy.java:60) ~[!/:3.4.4] at org.apache.camel.impl.engine.AbstractCamelContext.doStop(AbstractCamelContext.java:2910) [!/:3.4.4] at org.apache.camel.support.service.BaseService.stop(BaseService.java:155) [!/:3.4.4] at org.apache.camel.blueprint.BlueprintCamelContext.blueprintEvent(BlueprintCamelContext.java:194) [!/:3.4.4] at org.apache.aries.blueprint.container.BlueprintEventDispatcher$3.call(BlueprintEventDispatcher.java:190) [!/:1.10.2] at org.apache.aries.blueprint.container.BlueprintEventDispatcher$3.call(BlueprintEventDispatcher.java:188) [!/:1.10.2] at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_242] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_242] at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_242] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_242] at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_242] at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180) [?:1.8.0_242] at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293) [?:1.8.0_242] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_242] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_242] at java.lang.Thread.run(Thread.java:748) [?:1.8.0_242]It appears that the Blueprint container is being destroyed before the camel context， but the camel context tries to access the bundle when stopping. And since the blueprint container is already destroyed， that fails.Reverting this change fixes the warnings: https://issues.apache.org/jira/browse/CAMEL-14332Note: Everything appears to work fine when the bundle is started. Still， the warnings are concerningTo reproduce: Create a bundle with this blueprint.xml<?xml version="1.0" encoding="UTF-8"?><blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"> <camelContext xmlns="http://camel.apache.org/schema/blueprint" id="camelContext"/></blueprint> Install in Karaf Refresh the bundle,Hide Permalink Josh Smith added a comment - 02/Nov/20 21:02 Thanks Claus Ibsen! Could you backport this to 3.4.x as well? Show Josh Smith added a comment - 02/Nov/20 21:02 Thanks Claus Ibsen ! Could you backport this to 3.4.x as well?
CAMEL-15759,Claus Ibsen,2020-10-26T13:46:47+0000,1603705607， where 1603705607 is the epoch,We no longer need the runtime camel-catalog which was in use for some special optimisation with toD - but we now use the endpoint uri factory for this.So we can remove this and move its source code to camel-catalog.,Hide Permalink Claus Ibsen added a comment - 26/Oct/20 13:46 Argh yeah the component extension uses the catalog. It could maybe use the source code generated code instead. Show Claus Ibsen added a comment - 26/Oct/20 13:46 Argh yeah the component extension uses the catalog. It could maybe use the source code generated code instead.
CAMEL-15758,Claus Ibsen,2020-10-26T11:12:25+0000,1603696345， where 1603696345 is the epoch,We should splitup camel-base and have a camel-base-engine， where the engine is for using the routing engine with routes， the DSL， the model and all of that.Then camel-base is vanilla camel and we should have a BasicCamelContext interface that is implemented here.And then leave CamelContext and DefaultCamelContext for todays use with all batteries included.,There are no comments yet on this issue.
CAMEL-15757,Jean-Baptiste Onofré,2020-10-26T09:20:46+0000,1603689646， where 1603689646 is the epoch,,There are no comments yet on this issue.
CAMEL-15756,Andrea Cosentino,2020-10-26T07:33:43+0000,1603683223， where 1603683223 is the epoch,Both the projects are not osgi friendly and they will drop the OSGi support soon.,There are no comments yet on this issue.
CAMEL-15755,Unassigned,2020-10-25T12:44:08+0000,1603615448， where 1603615448 is the epoch,After upgrading to 3.6.0 existing Spring Boot tests in my codebase started to fail. After some investigation I discovered that this is due to my unit tests having a single instance per class as configured using JUnit's @TestInstance(TestInstance.Lifecycle.PER_CLASS)Some changes were introduced in a recent commit that affected the existing behaviour in CamelSpringBootExecutionListener: https://github.com/apache/camel/commit/efc34ab2b98f3697ebb482cf1645fda6f0794797I have remediated my tests by running the following code in a JUnit BeforeEach method within a base test class:// Kotlin@BeforeEachfun init() { SpringCamelContext.setNoStart(false) camelContext.start()}I am currently looking for a more permanent solution to this issue that properly supports single instance JUnit5 Test classes.,Hide Permalink Claus Ibsen added a comment - 25/Oct/20 12:44 You are welcome to dive into the code and see if you can help improve this. Show Claus Ibsen added a comment - 25/Oct/20 12:44 You are welcome to dive into the code and see if you can help improve this.
CAMEL-15754,Dmitry Volodin,2020-10-26T07:13:24+0000,1603682004， where 1603682004 is the epoch,In the GrpcRequestPropagationStreamObserver， the responseStream.onCompleted() is called every time an onNext method is invoked by the client via a grpc call. This does not leverage the Http 2.0 abilities to send the responses back to the client asynchronously.Once the camel route is traversed， the server is sending some response to the client using the onNext method calls. But， sometimes， it may be a good idea to not to send any data immediately and call the onCompleted methods.I propose to allow the camel route to control this behavior with some properties.,Hide Permalink Dmitry Volodin added a comment - 26/Oct/20 07:13 Thanks， Rajasekhar Bhupasamudram for PR. Show Dmitry Volodin added a comment - 26/Oct/20 07:13 Thanks， Rajasekhar Bhupasamudram for PR.
CAMEL-15753,Claus Ibsen,2020-10-25T11:35:11+0000,1603611311， where 1603611311 is the epoch,We have some parts in camel-base that may be better to move out as it may be used by end users as well， like some of the out of the box aggregation strategies.We may consider having camel-base as for internal implementation for camel-core. And if we can get things out of this to camel-support that may be used by end users we have a bit better modularization.,Hide Permalink Claus Ibsen added a comment - 25/Oct/20 11:35 - edited ProcessorFactory to use Object[] instead of Map for custom args (faster) DONE Other modules to depend on camel-core-processor instead of camel-base DONE camel-core-processor & camel-base-processor so we have base vs core (EIP) processors separated DONE internal processor factory DONE camel-core-processor should not use camel-base DONE Show Claus Ibsen added a comment - 25/Oct/20 11:35 - edited ProcessorFactory to use Object[] instead of Map for custom args (faster) DONE Other modules to depend on camel-core-processor instead of camel-base DONE camel-core-processor & camel-base-processor so we have base vs core (EIP) processors separated DONE internal processor factory DONE camel-core-processor should not use camel-base DONE
CAMEL-15752,Andrea Cosentino,2020-10-25T13:53:41+0000,1603619621， where 1603619621 is the epoch,Hi，I have an application using camel-kafka 3.4.4 (which has kafka 2.5.0 as dependency).When I switch to use camel-kafka 3.6.0 (which has kafka 2.6.0 as dependency)， I get the following exception. {{020-10-24 19:23:45 ERROR KafkaThread:49 - Uncaught exception in thread 'kafka-producer-network-thread | raw-packets': java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/JsonNode at org.apache.kafka.common.requests.ApiVersionsRequest$Builder.<clinit>(ApiVersionsRequest.java:36) at org.apache.kafka.clients.NetworkClient.handleConnections(NetworkClient.java:910) at org.apache.kafka.clients.NetworkClient.poll(NetworkClient.java:555) at org.apache.kafka.clients.producer.internals.Sender.runOnce(Sender.java:325) at org.apache.kafka.clients.producer.internals.Sender.run(Sender.java:240) at java.base/java.lang.Thread.run(Thread.java:834) Caused by: java.lang.ClassNotFoundException: com.fasterxml.jackson.databind.JsonNode at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581) at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178) at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522) ... 6 more}}Adding the explicit dependency to jackson-databind as following solves the problem<dependency> <groupId>com.fasterxml.jackson.core</groupId> <artifactId>jackson-databind</artifactId> <version>2.11.3</version></dependency>As reference， this is the parent pom.xml in my project where I set camel-kafka version (but even Kafka version， which is used in other modules).https://github.com/ppatierno/formula1-telemetry-kafka/blob/master/pom.xmland following the pom.xml of the specific application using camel-kafka (where I have to add the jackson-databind reference for fixing the exception).https://github.com/ppatierno/formula1-telemetry-kafka/blob/master/f1-telemetry-udp-kafka/pom.xml,Hide Permalink Andrea Cosentino added a comment - 25/Oct/20 13:53 It's a version problem. In Kafka 2.6.0 the Jackson version is still 2.10.2， but Camel switched to 2.11.3. So we need to declare them explicitly in the POM of camel-kafka and we need to exclude the version from kafka. Show Andrea Cosentino added a comment - 25/Oct/20 13:53 It's a version problem. In Kafka 2.6.0 the Jackson version is still 2.10.2， but Camel switched to 2.11.3. So we need to declare them explicitly in the POM of camel-kafka and we need to exclude the version from kafka.
CAMEL-15751,Dmitry Volodin,2020-10-24T13:55:16+0000,1603533316， where 1603533316 is the epoch,Current camel-grpc module provides both the consumer and producer abilities. But， does not allow the camel route to have control over when the responses are sent back to the client. <route> <from uri="grpc://remotehost:1101/org.apache.camel.component.grpc.PingPong?consumerStrategy=PROPAGATION"/> <process ref="myCustomProcessor" /> </route> Consider the above route as an example for grpc consumer (server streaming call).In the above， myCustomProcessor can modify the Exchange and set a Message， but if it needs to respond to the client multiple times with a time gap - based on business requirement， using responseObserver.onNext() method calls， then it can't. There is a possibility to collect all the responses in a list and send the list items one after the other. But， if the processor needs to wait for certain amount of time to compute the next response， and then invoke the onNext， it is not possible.I think it is a limitation of the camel-grpc component and propose to enhance it by setting the responseObserver as a property in the Exchange object.,Hide Permalink Rajasekhar Bhupasamudram added a comment - 24/Oct/20 13:55 I am a newbie to both apache camel and grpc. Excuse me if there is any any limitation in my understanding. I have completed the code changes for the above and want to give PR. Show Rajasekhar Bhupasamudram added a comment - 24/Oct/20 13:55 I am a newbie to both apache camel and grpc. Excuse me if there is any any limitation in my understanding. I have completed the code changes for the above and want to give PR. Hide Permalink Rajasekhar Bhupasamudram added a comment - 24/Oct/20 16:07 https://github.com/apache/camel/pull/4508/ PR has been given Show Rajasekhar Bhupasamudram added a comment - 24/Oct/20 16:07 https://github.com/apache/camel/pull/4508/ PR has been given Hide Permalink Rajasekhar Bhupasamudram added a comment - 25/Oct/20 01:49 Thanks Claus Ibsen for looking into this. Is this Jira being considered? Have actually written some code and gave PR. How to get his PR reviewed? Thanks， Raj Show Rajasekhar Bhupasamudram added a comment - 25/Oct/20 01:49 Thanks Claus Ibsen for looking into this. Is this Jira being considered? Have actually written some code and gave PR. How to get his PR reviewed? Thanks， Raj Hide Permalink Dmitry Volodin added a comment - 25/Oct/20 05:35 - edited Hi Rajasekhar Bhupasamudram . Could you please separate issues from each other: Base improvement to provide access to stream observer in the camel Exchange Another improvement related to the GrpcRequestPropagationStreamObserver For the second， please open a new one with the case of improvement and leave in the current issue and PR just a new feature Thank you. Show Dmitry Volodin added a comment - 25/Oct/20 05:35 - edited Hi Rajasekhar Bhupasamudram . Could you please separate issues from each other: Base improvement to provide access to stream observer in the camel Exchange Another improvement related to the GrpcRequestPropagationStreamObserver For the second， please open a new one with the case of improvement and leave in the current issue and PR just a new feature Thank you. Hide Permalink Dmitry Volodin added a comment - 25/Oct/20 06:20 Also there are two options for consumer strategy: AGGREGATION and PROPAGATION Can you try to use PROPAGATION， process request and send it later after processing? Show Dmitry Volodin added a comment - 25/Oct/20 06:20 Also there are two options for consumer strategy: AGGREGATION and PROPAGATION Can you try to use PROPAGATION， process request and send it later after processing? Hide Permalink Rajasekhar Bhupasamudram added a comment - 25/Oct/20 07:04 - edited Hi Dmitry Volodin Thanks I have checked the PROPAGATION and AGGREGATION consumer strategies. In my findings， I see that the first one calls the resposneObserver.onCompleted() each time an onNext is called by the client. The later will not close the stream but will simply collect the request and does not send to the camel route - and hence no processing. Sure will open a new Jira for the second improvement. Thanks Show Rajasekhar Bhupasamudram added a comment - 25/Oct/20 07:04 - edited Hi Dmitry Volodin Thanks I have checked the PROPAGATION and AGGREGATION consumer strategies. In my findings， I see that the first one calls the resposneObserver.onCompleted() each time an onNext is called by the client. The later will not close the stream but will simply collect the request and does not send to the camel route - and hence no processing. Sure will open a new Jira for the second improvement. Thanks Hide Permalink Rajasekhar Bhupasamudram added a comment - 25/Oct/20 07:32 Hi Dmitry Volodin， have created a separate Jira for the improvement as an Improvement - CAMEL-15754 Thanks Raj Show Rajasekhar Bhupasamudram added a comment - 25/Oct/20 07:32 Hi Dmitry Volodin ， have created a separate Jira for the improvement as an Improvement - CAMEL-15754 Thanks Raj Hide Permalink Rajasekhar Bhupasamudram added a comment - 25/Oct/20 18:14 - edited Hi Dmitry Volodin， Have completed the changes for the Jiras 15751 and 15754. Could you please look into the PR? Thanks to Andrea Cosentino for approving the changes. Show Rajasekhar Bhupasamudram added a comment - 25/Oct/20 18:14 - edited Hi Dmitry Volodin ， Have completed the changes for the Jiras 15751 and 15754. Could you please look into the PR? Thanks to Andrea Cosentino for approving the changes.
CAMEL-15750,Jiri Ondrusek,2020-10-24T14:51:58+0000,1603536718， where 1603536718 is the epoch,Example: https://github.com/apache/camel-spring-boot-examples/tree/master/camel-example-spring-boot-undertow-spring-securityMake sure port 8081 is not in use.All requests to http://localhost:8082/hi get a 403 response， no matter if I send an oauth Token or not. The oauth token itself seems correct， I have decoded it on jwt.io and it shows that the role is present: { "exp": 1603546060， "iat": 1603546000， "jti": "3392de8c-8309-4187-8b9a-9f8edaefe226"， "iss": "http://localhost:8080/auth/realms/master"， "aud": "account"， "sub": "4612ff79-81a8-4209-a7f7-fd4b963c574e"， "typ": "Bearer"， "azp": "example-service"， "session_state": "693f9c78-2e54-447e-9749-ce6a1288877d"， "acr": "1"， "allowed-origins": [ "http://localhost:8082" ]， "realm_access": { "roles": [ "role01"， "offline_access"， "uma_authorization" ] }， "resource_access": { "account": { "roles": [ "manage-account"， "manage-account-links"， "view-profile" ] } }， "scope": "email profile"， "email_verified": false， "preferred_username": "user01"} The reason seems to be that the camel-undertow-spring-security-starter tries to start two Undertow servlets: the Spring Undertow servlet runs on port 8081， and the Camel Undertow servlet on port 8082. Only the Spring servlet has token security， but not the Camel Undertow Servlet.In the log below you see that the org.springframework.boot.web.embedded.undertow.UndertowWebServer starts on port 8081， and it receives the filter chain with the BearerTokenAuthenticationFilter.Then the org.apache.camel.component.undertow.DefaultUndertowHost comes up on port 8082. The log message Illegal state caused by missing securitProvider but existing allowed roles! which is written for every request to /hi also seems to show that no securityProvider is configured on the DefaultUndertowHost which runs on port 8082. . ____ _ __ _ _ /\\ / ___'_ __ _ _(_)_ __ __ _ \ \ \ \( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \ \\/ ___)| |_)| | | | | || (_| | ) ) ) ) ' |____| .__|_| |_|_| |_\__， | / / / / =========|_|==============|___/=/_/_/_/ :: Spring Boot :: (v2.3.3.RELEASE)2020-10-24 15:08:26.339 INFO 27932 --- [ main] o.a.c.undertow.spring.boot.Application : Starting Application on DZS20N436 with PID 27932 (C:\Users\Schulten\Documents\projekte\camel-spring-boot-examples-3.5.0\camel-example-spring-boot-undertow-spring-security\target\classes started by Schulten in C:\Users\Schulten\Documents\projekte\camel-spring-boot-examples-3.5.0\camel-example-spring-boot-undertow-spring-security)2020-10-24 15:08:26.343 INFO 27932 --- [ main] o.a.c.undertow.spring.boot.Application : No active profile set， falling back to default profiles: default2020-10-24 15:08:28.378 INFO 27932 --- [ main] io.undertow.servlet : Initializing Spring embedded WebApplicationContext2020-10-24 15:08:28.381 INFO 27932 --- [ main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1954 ms2020-10-24 15:08:28.770 INFO 27932 --- [ main] o.s.s.web.DefaultSecurityFilterChain : Creating filter chain: any request， [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5395ea39， org.springframework.security.web.context.SecurityContextPersistenceFilter@5c41d037， org.springframework.security.web.header.HeaderWriterFilter@6d64b553， org.springframework.security.web.csrf.CsrfFilter@12477988， org.springframework.security.web.authentication.logout.LogoutFilter@29a23c3d， org.springframework.security.oauth2.server.resource.web.BearerTokenAuthenticationFilter@43b0ade， org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5ec77191， org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@796d3c9f， org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1517f633， org.springframework.security.web.session.SessionManagementFilter@757529a4， org.springframework.security.web.access.ExceptionTranslationFilter@203dd56b， org.springframework.security.web.access.intercept.FilterSecurityInterceptor@522b2631]2020-10-24 15:08:28.876 INFO 27932 --- [ main] o.apache.camel.support.LRUCacheFactory : Detected and using LRUCacheFactory: camel-caffeine-lrucache2020-10-24 15:08:29.309 INFO 27932 --- [ main] io.undertow : starting server: Undertow - 2.1.3.Final2020-10-24 15:08:29.316 INFO 27932 --- [ main] org.xnio : XNIO version 3.8.0.Final2020-10-24 15:08:29.324 INFO 27932 --- [ main] org.xnio.nio : XNIO NIO Implementation Version 3.8.0.Final2020-10-24 15:08:29.419 INFO 27932 --- [ main] org.jboss.threads : JBoss Threads version 3.1.0.Final2020-10-24 15:08:29.472 INFO 27932 --- [ main] o.s.b.w.e.undertow.UndertowWebServer : Undertow started on port(s) 8081 (http)2020-10-24 15:08:29.490 INFO 27932 --- [ main] o.a.c.s.boot.SpringBootRoutesCollector : Loading additional Camel XML routes from: classpath:camel/*.xml2020-10-24 15:08:29.495 INFO 27932 --- [ main] o.a.c.s.boot.SpringBootRoutesCollector : Loading additional Camel XML route templates from: classpath:camel-template/*.xml2020-10-24 15:08:29.497 INFO 27932 --- [ main] o.a.c.s.boot.SpringBootRoutesCollector : Loading additional Camel XML rests from: classpath:camel-rest/*.xml2020-10-24 15:08:29.652 INFO 27932 --- [ main] o.a.c.impl.engine.AbstractCamelContext : Apache Camel 3.5.0 (camel-1) is starting2020-10-24 15:08:29.655 INFO 27932 --- [ main] o.a.c.impl.engine.AbstractCamelContext : StreamCaching is not in use. If using streams then its recommended to enable stream caching. See more details at http://camel.apache.org/stream-caching.html2020-10-24 15:08:29.656 INFO 27932 --- [ main] o.a.c.impl.engine.AbstractCamelContext : Using HealthCheck: camel-health2020-10-24 15:08:29.669 INFO 27932 --- [ main] o.a.c.c.undertow.DefaultUndertowHost : Starting Undertow server on http://localhost:80822020-10-24 15:08:29.669 INFO 27932 --- [ main] io.undertow : starting server: Undertow - 2.1.3.Final2020-10-24 15:08:29.681 INFO 27932 --- [ main] o.a.c.i.e.InternalRouteStartupManager : Route: route1 started and consuming from: http://localhost:8082/hi2020-10-24 15:08:29.687 INFO 27932 --- [ main] o.a.c.impl.engine.AbstractCamelContext : Total 1 routes， of which 1 are started2020-10-24 15:08:29.688 INFO 27932 --- [ main] o.a.c.impl.engine.AbstractCamelContext : Apache Camel 3.5.0 (camel-1) started in 0.035 seconds2020-10-24 15:08:29.696 INFO 27932 --- [ main] o.a.c.undertow.spring.boot.Application : Started Application in 3.809 seconds (JVM running for 4.35)2020-10-24 15:10:41.530 WARN 27932 --- [ XNIO-2 task-1] o.a.c.c.undertow.UndertowConsumer : Illegal state caused by missing securitProvider but existing allowed roles!2020-10-24 15:13:16.234 WARN 27932 --- [ XNIO-2 task-1] o.a.c.c.undertow.UndertowConsumer : Illegal state caused by missing securitProvider but existing allowed roles!2020-10-24 15:13:53.090 WARN 27932 --- [ XNIO-2 task-1] o.a.c.c.undertow.UndertowConsumer : Illegal state caused by missing securitProvider but existing allowed roles!2020-10-24 15:15:22.183 WARN 27932 --- [ XNIO-2 task-1] o.a.c.c.undertow.UndertowConsumer : Illegal state caused by missing securitProvider but existing allowed roles!2020-10-24 15:16:38.260 WARN 27932 --- [ XNIO-2 task-1] o.a.c.c.undertow.UndertowConsumer : Illegal state caused by missing securitProvider but existing allowed roles!,Hide Permalink Claus Ibsen added a comment - 24/Oct/20 14:51 I would assume you should use the same port number as spring boot， eg in your example 8081. Show Claus Ibsen added a comment - 24/Oct/20 14:51 I would assume you should use the same port number as spring boot， eg in your example 8081. Hide Permalink Dietrich Schulten added a comment - 26/Oct/20 07:42 - edited Please note that I am not using my own example， I am using the official undertow spring security example. Unfortunately using the same port does not help. I changed the port 8082 in the route to 8081 as follows: from("undertow:http://localhost:8081/hi?allowedRoles=role02") .transform(simple("Hello ${in.header." + SpringSecurityProvider.PRINCIPAL_NAME_HEADER + "}!")) .log("content: ${body}"); Both Undertow servlets try to start on the same port， and that fails: 2020-10-26 08:40:36.699 INFO 17448 — [ main] o.s.b.w.e.undertow.UndertowWebServer : Undertow started on port(s) 8081 (http) 2020-10-26 08:40:36.711 INFO 17448 — [ main] o.a.c.s.boot.SpringBootRoutesCollector : Loading additional Camel XML routes from: classpath:camel/*.xml 2020-10-26 08:40:36.712 INFO 17448 — [ main] o.a.c.s.boot.SpringBootRoutesCollector : Loading additional Camel XML route templates from: classpath:camel-template/*.xml 2020-10-26 08:40:36.712 INFO 17448 — [ main] o.a.c.s.boot.SpringBootRoutesCollector : Loading additional Camel XML rests from: classpath:camel-rest/*.xml 2020-10-26 08:40:37.029 INFO 17448 — [ main] o.a.c.impl.engine.AbstractCamelContext : Apache Camel 3.5.0 (camel-1) is starting 2020-10-26 08:40:37.032 INFO 17448 — [ main] o.a.c.impl.engine.AbstractCamelContext : StreamCaching is not in use. If using streams then its recommended to enable stream caching. See more details at [http://camel.apache.org/stream-caching.html] 2020-10-26 08:40:37.033 INFO 17448 — [ main] o.a.c.impl.engine.AbstractCamelContext : Using HealthCheck: camel-health 2020-10-26 08:40:37.049 INFO 17448 — [ main] o.a.c.c.undertow.DefaultUndertowHost : Starting Undertow server on [http://localhost:8081|http://localhost:8081/] 2020-10-26 08:40:37.049 INFO 17448 — [ main] io.undertow : starting server: Undertow - 2.1.3.Final 2020-10-26 08:40:37.076 WARN 17448 — [ main] o.a.c.c.undertow.DefaultUndertowHost : Failed to start Undertow server on [http://localhost:8081|http://localhost:8081/]， reason: java.net.BindException: Address already in use: bind Since the undertow camel spring security component does not seem to work at all， I am changing the severity back to Major. Show Dietrich Schulten added a comment - 26/Oct/20 07:42 - edited Please note that I am not using my own example， I am using the official undertow spring security example. Unfortunately using the same port does not help. I changed the port 8082 in the route to 8081 as follows: from( "undertow:http: //localhost:8081/hi?allowedRoles=role02" ) .transform(simple( "Hello ${in.header." + SpringSecurityProvider.PRINCIPAL_NAME_HEADER + "}!" )) .log( "content: ${body}" ); Both Undertow servlets try to start on the same port， and that fails: 2020-10-26 08:40:36.699 INFO 17448 — [ main] o.s.b.w.e.undertow.UndertowWebServer : Undertow started on port(s) 8081 (http) 2020-10-26 08:40:36.711 INFO 17448 — [ main] o.a.c.s.boot.SpringBootRoutesCollector : Loading additional Camel XML routes from: classpath:camel/*.xml 2020-10-26 08:40:36.712 INFO 17448 — [ main] o.a.c.s.boot.SpringBootRoutesCollector : Loading additional Camel XML route templates from: classpath:camel-template/*.xml 2020-10-26 08:40:36.712 INFO 17448 — [ main] o.a.c.s.boot.SpringBootRoutesCollector : Loading additional Camel XML rests from: classpath:camel- rest /*.xml 2020-10-26 08:40:37.029 INFO 17448 — [ main] o.a.c.impl.engine.AbstractCamelContext : Apache Camel 3.5.0 (camel-1) is starting 2020-10-26 08:40:37.032 INFO 17448 — [ main] o.a.c.impl.engine.AbstractCamelContext : StreamCaching is not in use. If using streams then its recommended to enable stream caching. See more details at [http: //camel.apache.org/stream-caching.html] 2020-10-26 08:40:37.033 INFO 17448 — [ main] o.a.c.impl.engine.AbstractCamelContext : Using HealthCheck: camel-health 2020-10-26 08:40:37.049 INFO 17448 — [ main] o.a.c.c.undertow.DefaultUndertowHost : Starting Undertow server on [http: //localhost:8081|http://localhost:8081/] 2020-10-26 08:40:37.049 INFO 17448 — [ main] io.undertow : starting server: Undertow - 2.1.3.Final 2020-10-26 08:40:37.076 WARN 17448 — [ main] o.a.c.c.undertow.DefaultUndertowHost : Failed to start Undertow server on [http: //localhost:8081|http://localhost:8081/]， reason: java.net.BindException: Address already in use: bind Since the undertow camel spring security component does not seem to work at all， I am changing the severity back to Major. Hide Permalink Dietrich Schulten added a comment - 28/Oct/20 07:55 Apparently the problem arises because the undertow:http endpoint starts its own undertow instance， whereas Spring starts yet another instance. Is it possible to let the route use the Spring undertow instance somehow? Show Dietrich Schulten added a comment - 28/Oct/20 07:55 Apparently the problem arises because the undertow:http endpoint starts its own undertow instance， whereas Spring starts yet another instance. Is it possible to let the route use the Spring undertow instance somehow?
CAMEL-15749,Dmitry Volodin,2020-10-24T11:29:00.191Z,1603524540.191， where 1603524540.191 is the epoch,Hi all，I tried to run my camel configuration (after update to camel 3.6.0， previously running 3.0.6 without an issue) and got following error: org.apache.camel.FailedToCreateRouteException: Failed to create route route1 at: >>> Unmarshal[org.apache.camel.model.dataformat.CsvDataFormat@192613f] <<< in route: Route(route1)[From[direct://test] -> [Unmarshal[org.apache.c... because of Error binding property (commentMarker=#) with name: commentMarker on bean: org.apache.camel.dataformat.csv.CsvDataFormat@42dc5a with value: # at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:384) ~[camel-core-engine-3.6.0.jar:3.6.0] at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:111) ~[camel-core-engine-3.6.0.jar:3.6.0] at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:431) ~[camel-core-engine-3.6.0.jar:3.6.0] at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:393) ~[camel-core-engine-3.6.0.jar:3.6.0] at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2606) ~[camel-base-3.6.0.jar:3.6.0] at org.apache.camel.support.service.BaseService.init(BaseService.java:83) ~[camel-api-3.6.0.jar:3.6.0] at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2378) ~[camel-base-3.6.0.jar:3.6.0] at org.apache.camel.support.service.BaseService.start(BaseService.java:111) ~[camel-api-3.6.0.jar:3.6.0] at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2395) ~[camel-base-3.6.0.jar:3.6.0] at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:130) ~[camel-spring-3.6.0.jar:3.6.0] at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:167) ~[camel-spring-3.6.0.jar:3.6.0] at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172) ~[spring-context-5.2.9.RELEASE.jar:5.2.9.RELEASE] at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165) ~[spring-context-5.2.9.RELEASE.jar:5.2.9.RELEASE] at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139) ~[spring-context-5.2.9.RELEASE.jar:5.2.9.RELEASE] at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:404) ~[spring-context-5.2.9.RELEASE.jar:5.2.9.RELEASE] at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:361) ~[spring-context-5.2.9.RELEASE.jar:5.2.9.RELEASE] at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:898) ~[spring-context-5.2.9.RELEASE.jar:5.2.9.RELEASE] at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:554) ~[spring-context-5.2.9.RELEASE.jar:5.2.9.RELEASE] at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758) [spring-boot-2.3.4.RELEASE.jar:2.3.4.RELEASE] at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750) [spring-boot-2.3.4.RELEASE.jar:2.3.4.RELEASE] at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) [spring-boot-2.3.4.RELEASE.jar:2.3.4.RELEASE] at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) [spring-boot-2.3.4.RELEASE.jar:2.3.4.RELEASE] at org.springframework.boot.SpringApplication.run(SpringApplication.java:1237) [spring-boot-2.3.4.RELEASE.jar:2.3.4.RELEASE] at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226) [spring-boot-2.3.4.RELEASE.jar:2.3.4.RELEASE] at test.App.main(App.java:17) [classes/:na]Caused by: org.apache.camel.PropertyBindingException: Error binding property (commentMarker=#) with name: commentMarker on bean: org.apache.camel.dataformat.csv.CsvDataFormat@42dc5a with value: # at org.apache.camel.support.PropertyBindingSupport.setSimplePropertyViaConfigurer(PropertyBindingSupport.java:849) ~[camel-support-3.6.0.jar:3.6.0] at org.apache.camel.support.PropertyBindingSupport.doSetPropertyValue(PropertyBindingSupport.java:609) ~[camel-support-3.6.0.jar:3.6.0] at org.apache.camel.support.PropertyBindingSupport.doBuildPropertyOgnlPath(PropertyBindingSupport.java:481) ~[camel-support-3.6.0.jar:3.6.0] at org.apache.camel.support.PropertyBindingSupport.doBindProperties(PropertyBindingSupport.java:376) ~[camel-support-3.6.0.jar:3.6.0] at org.apache.camel.support.PropertyBindingSupport.access$100(PropertyBindingSupport.java:87) ~[camel-support-3.6.0.jar:3.6.0] at org.apache.camel.support.PropertyBindingSupport$Builder.bind(PropertyBindingSupport.java:1859) ~[camel-support-3.6.0.jar:3.6.0] at org.apache.camel.reifier.dataformat.DataFormatReifier.configureDataFormat(DataFormatReifier.java:262) ~[camel-core-engine-3.6.0.jar:3.6.0] at org.apache.camel.reifier.dataformat.DataFormatReifier.createDataFormat(DataFormatReifier.java:218) ~[camel-core-engine-3.6.0.jar:3.6.0] at org.apache.camel.reifier.dataformat.DataFormatReifier.getDataFormat(DataFormatReifier.java:194) ~[camel-core-engine-3.6.0.jar:3.6.0] at org.apache.camel.reifier.dataformat.DataFormatReifier.getDataFormat(DataFormatReifier.java:154) ~[camel-core-engine-3.6.0.jar:3.6.0] at org.apache.camel.reifier.UnmarshalReifier.createProcessor(UnmarshalReifier.java:35) ~[camel-core-engine-3.6.0.jar:3.6.0] at org.apache.camel.reifier.ProcessorReifier.makeProcessor(ProcessorReifier.java:752) ~[camel-core-engine-3.6.0.jar:3.6.0] at org.apache.camel.reifier.ProcessorReifier.addRoutes(ProcessorReifier.java:495) ~[camel-core-engine-3.6.0.jar:3.6.0] at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:382) ~[camel-core-engine-3.6.0.jar:3.6.0] ... 24 common frames omittedCaused by: org.apache.camel.NoSuchBeanException: No bean could be found in the registry for: of type: java.lang.Character at org.apache.camel.support.CamelContextHelper.mandatoryLookupAndConvert(CamelContextHelper.java:253) ~[camel-support-3.6.0.jar:3.6.0] at org.apache.camel.support.EndpointHelper.resolveReferenceParameter(EndpointHelper.java:290) ~[camel-support-3.6.0.jar:3.6.0] at org.apache.camel.support.EndpointHelper.resolveReferenceParameter(EndpointHelper.java:250) ~[camel-support-3.6.0.jar:3.6.0] at org.apache.camel.support.component.PropertyConfigurerSupport.property(PropertyConfigurerSupport.java:53) ~[camel-support-3.6.0.jar:3.6.0] at org.apache.camel.dataformat.csv.CsvDataFormatConfigurer.configure(CsvDataFormatConfigurer.java:24) ~[camel-csv-3.6.0.jar:3.6.0] at org.apache.camel.support.PropertyBindingSupport.setSimplePropertyViaConfigurer(PropertyBindingSupport.java:847) ~[camel-support-3.6.0.jar:3.6.0] ... 37 common frames omittedseems like it is impossible to specify '#' hash symbol as commentMarker or delimiter for csv data format. Reproducible with xml configuration only. config files/sample application attached. I appreciate if you take a look at thisBR,Hide Permalink Dmitry Volodin added a comment - 26/Oct/20 17:15 The reason of the problem why it happens， hash symbol (#) is a property binding sign a tries to parse value. For Character it doesn't make sense as it's only one symbol and looks like need to be fixed in core. Show Dmitry Volodin added a comment - 26/Oct/20 17:15 The reason of the problem why it happens， hash symbol (#) is a property binding sign a tries to parse value. For Character it doesn't make sense as it's only one symbol and looks like need to be fixed in core.
CAMEL-15748,Unassigned,2020-10-24T09:41:04.413Z,1603518064.413， where 1603518064.413 is the epoch,Having a route with a paho consumer in a route， if the broker is not reachable at startup， camel context fail fast and shuts down. This can be avoided by setting the SupervisingRouteController， but this way， even if camel context does not fail， the consumer is never able to establish a connection.The reason is that when PahoConsumer starts for the first time， it creates a MqttClient and stores it into client field; the call to client.connect throws an exception due to broker down; @Override protected void doStart() throws Exception { super.doStart(); connectOptions = PahoEndpoint.createMqttConnectOptions(getEndpoint().getConfiguration()); if (client == null) { clientId = getEndpoint().getConfiguration().getClientId(); if (clientId == null) { clientId = "camel-" + MqttClient.generateClientId(); } stopClient = true; client = new MqttClient( getEndpoint().getConfiguration().getBrokerUrl()， clientId， PahoEndpoint.createMqttClientPersistence(getEndpoint().getConfiguration())); LOG.debug("Connecting client: {} to broker: {}"， clientId， getEndpoint().getConfiguration().getBrokerUrl()); client.connect(connectOptions); } // other code omitted for brevity client.subscribe(getEndpoint().getTopic()， getEndpoint().getConfiguration().getQos()); after that doStop is invoked but the client instance is not nullified， because it is not connected @Override protected void doStop() throws Exception { super.doStop(); if (stopClient && client != null && client.isConnected()) { String topic = getEndpoint().getTopic(); // only unsubscribe if we are not durable if (getEndpoint().getConfiguration().isCleanSession()) { LOG.debug("Unsubscribing client: {} from topic: {}"， clientId， topic); client.unsubscribe(topic); } else { LOG.debug("Client: {} is durable so will not unsubscribe from topic: {}"， clientId， topic); } LOG.debug("Disconnecting client: {} from broker: {}"， clientId， getEndpoint().getConfiguration().getBrokerUrl()); client.disconnect(); client = null; } } when the supervisor tries to restart the route， client instance already exists， but the call to client.subscribe fails because the client is not connected.Perhaps always nullify client in doStop should resolve the issue; however I have no idea it this solution will impact in other ways. A better solution may be to handle automatic reconnect in the consumer， like RabbitConsumer does， for example.,Hide Permalink Claus Ibsen added a comment - 24/Oct/20 08:53 Can you try testing with setting the value to null. Supervising route controller is the better way as otherwise having to build in auto reconnection logic in 100+ components each with all kind of their own way is not ideal， vs having camel route controller managing it which can also be consistently managed and monitored. And btw on cloud systems you have readiness checks where the cloud system will restart / reschedule the app. Show Claus Ibsen added a comment - 24/Oct/20 08:53 Can you try testing with setting the value to null. Supervising route controller is the better way as otherwise having to build in auto reconnection logic in 100+ components each with all kind of their own way is not ideal， vs having camel route controller managing it which can also be consistently managed and monitored. And btw on cloud systems you have readiness checks where the cloud system will restart / reschedule the app. Hide Permalink Marco Collovati added a comment - 24/Oct/20 09:36 Also noticed two different behaviours in 3.5 (paho 1.2.4) and 3.6 (paho 1.2.5): in 3.5 MqttClient.connect immediately fails if broker is down， whereas in 3.6 it hangs forever. Show Marco Collovati added a comment - 24/Oct/20 09:36 Also noticed two different behaviours in 3.5 (paho 1.2.4) and 3.6 (paho 1.2.5): in 3.5 MqttClient.connect immediately fails if broker is down， whereas in 3.6 it hangs forever. Hide Permalink Marco Collovati added a comment - 24/Oct/20 09:41 Thank you for the explanation Claus Ibsen. Nullifying client works for me ; i tested it extending `PahoConsumer` and overriding `doStop` as in the attached test PahoConsumerRestartTest.java Show Marco Collovati added a comment - 24/Oct/20 09:41 Thank you for the explanation Claus Ibsen . Nullifying client works for me ; i tested it extending `PahoConsumer` and overriding `doStop` as in the attached test PahoConsumerRestartTest.java Hide Permalink Claus Ibsen added a comment - 24/Oct/20 18:27 Thanks Marco. I wonder if you want to contribute this as a github PR and include the unit test. You can do this on 3.4.x branch and we can forward patch it on master - although most of the time we prefer master first. Show Claus Ibsen added a comment - 24/Oct/20 18:27 Thanks Marco. I wonder if you want to contribute this as a github PR and include the unit test. You can do this on 3.4.x branch and we can forward patch it on master - although most of the time we prefer master first. Hide Permalink Marco Collovati added a comment - 24/Oct/20 18:38 I'll be glad to contribute; I'll open a PR as soon as possible. Show Marco Collovati added a comment - 24/Oct/20 18:38 I'll be glad to contribute; I'll open a PR as soon as possible. Hide Permalink Claus Ibsen added a comment - 25/Oct/20 15:45 Merged to 3.4.x branch DONE TODO: master branch Show Claus Ibsen added a comment - 25/Oct/20 15:45 Merged to 3.4.x branch DONE TODO: master branch Hide Permalink Marco Collovati added a comment - 25/Oct/20 16:30 - edited Claus Ibsen I'm working on a PR for master， but I have a problem with the test. As mentioned above， with paho 1.2.5 the call to MqttClient.connect hangs indefinitely， regardless the connection timeout settings. Can this be handled somehow in test code? The only workaround I found is to set timeToWait on MqttClient and reset it to -1 after connection is established， but I think this is not a good idea client.setTimeToWait(1000 + getEndpoint().getConfiguration().getConnectionTimeout() * 1000); client.connect(connectOptions); client.setTimeToWait(-1); Does it make sense to add a `connectTimeToWait` configuration on PahoConfiguration? Show Marco Collovati added a comment - 25/Oct/20 16:30 - edited Claus Ibsen I'm working on a PR for master， but I have a problem with the test. As mentioned above， with paho 1.2.5 the call to MqttClient.connect hangs indefinitely， regardless the connection timeout settings. Can this be handled somehow in test code? The only workaround I found is to set timeToWait on MqttClient and reset it to -1 after connection is established， but I think this is not a good idea client.setTimeToWait(1000 + getEndpoint().getConfiguration().getConnectionTimeout() * 1000); client.connect(connectOptions); client.setTimeToWait(-1); Does it make sense to add a `connectTimeToWait` configuration on PahoConfiguration? Hide Permalink Claus Ibsen added a comment - 26/Oct/20 13:07 Maybe its a bug in paho 1.2.5 - not sure if you can research this / or get in touch with them so they are aware of this Show Claus Ibsen added a comment - 26/Oct/20 13:07 Maybe its a bug in paho 1.2.5 - not sure if you can research this / or get in touch with them so they are aware of this Hide Permalink Marco Collovati added a comment - 26/Oct/20 21:00 I think the reason of the hang is this change in paho CommsReceiver， inside `run` main loop // paho 1.2.4 if (message != null) { // A new message has arrived clientState.notifyReceivedMsg(message); } else { // fix for bug 719 if (!clientComms.isConnected()) { throw new IOException("Connection is lost."); } } // paho 1.2.5 if (message != null) { // A new message has arrived clientState.notifyReceivedMsg(message); } else { // fix for bug 719 if (!clientComms.isConnected() && !clientComms.isConnecting()) { throw new IOException("Connection is lost."); } } During connection attempt clientComms is in status connecting; when broker is down a null message is received and， in paho 1.2.4，an exception is immediately thrown because clientComms is not connected. In 1.2.5 however the exception is never throw because clientComms is in connecting state and this leads to an infinite loop. The issue 719， mentioned in the comment， is also referred by other issues but none of this are about infinite loops. I can try to do some additional research on paho issue tracker and to get in touch to understand if this is a bug or an expected behavior， but this may take some time because I can do it only on my spare time. Show Marco Collovati added a comment - 26/Oct/20 21:00 I think the reason of the hang is this change in paho CommsReceiver ， inside `run` main loop // paho 1.2.4 if (message != null ) { // A new message has arrived clientState.notifyReceivedMsg(message); } else { // fix for bug 719 if (!clientComms.isConnected()) { throw new IOException( "Connection is lost." ); } } // paho 1.2.5 if (message != null ) { // A new message has arrived clientState.notifyReceivedMsg(message); } else { // fix for bug 719 if (!clientComms.isConnected() && !clientComms.isConnecting()) { throw new IOException( "Connection is lost." ); } } During connection attempt clientComms is in status connecting; when broker is down a null message is received and， in paho 1.2.4，an exception is immediately thrown because clientComms is not connected. In 1.2.5 however the exception is never throw because clientComms is in connecting state and this leads to an infinite loop. The issue 719， mentioned in the comment， is also referred by other issues but none of this are about infinite loops. I can try to do some additional research on paho issue tracker and to get in touch to understand if this is a bug or an expected behavior， but this may take some time because I can do it only on my spare time. Hide Permalink Marco Collovati added a comment - 31/Oct/20 09:30 Opened an issue on paho java issue tracker: https://github.com/eclipse/paho.mqtt.java/issues/843 Waiting for feedback Show Marco Collovati added a comment - 31/Oct/20 09:30 Opened an issue on paho java issue tracker: https://github.com/eclipse/paho.mqtt.java/issues/843 Waiting for feedback Hide Permalink Marco Collovati added a comment - 01/Nov/20 20:03 Created the PR for master. The problem was in the test， not in paho client. When adding a connector to ActiveMQ *BrokerService* the server socket is immediately available，even if BrokerService.start is not invoked. So paho client can establish a connection， but it receives null messages do to socket read time out， and this leads to an infinite loop. Moving addConnector immediately before broker start in test does the trick. Show Marco Collovati added a comment - 01/Nov/20 20:03 Created the PR for master. The problem was in the test， not in paho client. When adding a connector to ActiveMQ * BrokerService * the server socket is immediately available，even if BrokerService.start is not invoked. So paho client can establish a connection， but it receives null messages do to socket read time out， and this leads to an infinite loop. Moving addConnector immediately before broker start in test does the trick.
CAMEL-15747,Denis Istomin,2020-12-05T10:45:32+0000,1607147132， where 1607147132 is the epoch,Currently `regex` property supported by Producer only.Support of `regex` needs to be implemented on Consumer side.There is also Disabled integration test that needs to be fixed.,Hide Permalink Babak Vahdat added a comment - 2 days ago Closing as per discussion in https://github.com/apache/camel/pull/4712 Show Babak Vahdat added a comment - 2 days ago Closing as per discussion in https://github.com/apache/camel/pull/4712
CAMEL-15746,Matej Melko,2020-10-23T16:04:39+0000,1603454679， where 1603454679 is the epoch,It would be good to add support forhttps://github.com/jsurfer/JsonSurferSo we can plug that into camel-jsonpath (and others) and then you can use that in streaming mode， such as splitting big json files (GB sizes).,There are no comments yet on this issue.
CAMEL-15745,Claus Ibsen,2020-11-03T08:06:05+0000,1604372765， where 1604372765 is the epoch,Currently RestDefinition methods: type(Class<?> classType) outType(Class<?> classType)use the methods setType， setOutType from VerbDefinition that accept a string instead of their variants that accept the class or should at least use both variants if they are really needed.The reason for opening this that setting the class name only in verb definition， in my OSGI application， causes ClassNotFoundException in RestBindingReifier#setupJson.As a workaround at the moment， after configuring the RestDefinition object I retrieve the VerbDefinitions in it and set the typeClass and outTypeClass manually there.,Hide Permalink Claus Ibsen added a comment - 03/Nov/20 08:06 Thanks for reporting Show Claus Ibsen added a comment - 03/Nov/20 08:06 Thanks for reporting
CAMEL-15744,Unassigned,2020-10-23T08:32:46+0000,1603427566， where 1603427566 is the epoch,In Mirometer introduces an ability to get technical metrics from Kafka's consumers and producers.It seems to be production-ready since 1.5.4 based on our production experience and available since 1.4.0.See: Micrometer implementation I tried to add a custom implementation to my project to extract those metrics from Camel. I found out that I'm unable to do it for the Kafka Consumer since the actual Kafka Consumer hides deeply inside KafkaConsumer Camel class.At the same time， I'm able to get KafkaProducer from Camel class here. Desired Solution:Add additional CamelKafkaMicrometerRoutePolicy to extract Kafka technical metrics.Add the ability to inject CamelKafkaMicrometerRoutePolicy into Consumer and Producer components. Will this feature be welcomed in Camel?,There are no comments yet on this issue.
CAMEL-15743,Unassigned,2020-10-23T08:11:12+0000,1603426272， where 1603426272 is the epoch,I used DeadLetterChannelBuilder as ErrorHandlerBuilder. I specify the bean named onExceptionProcessor as deadLetterChannel. I expect the bean to handle exceptions when route error.But when I stop any route， the ErrorHandler for the other route will fail. The exception stack is as follows: java.lang.IllegalStateException: SendProcessor has not been started: sendTo(bean://onExceptionProcessor) at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:121) ~[camel-core-2.25.2.jar:2.25.2] at org.apache.camel.processor.FatalFallbackErrorHandler.process(FatalFallbackErrorHandler.java:82) ~[camel-core-2.25.2.jar:2.25.2] at org.apache.camel.processor.RedeliveryErrorHandler.deliverToFailureProcessor(RedeliveryErrorHandler.java:1063) ~[camel-core-2.25.2.jar:2.25.2] at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:474) ~[camel-core-2.25.2.jar:2.25.2] at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:201) ~[camel-core-2.25.2.jar:2.25.2] at org.apache.camel.processor.Pipeline.process(Pipeline.java:138) ~[camel-core-2.25.2.jar:2.25.2] at org.apache.camel.processor.Pipeline.process(Pipeline.java:101) ~[camel-core-2.25.2.jar:2.25.2] at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:201) ~[camel-core-2.25.2.jar:2.25.2] at org.apache.camel.component.jetty.CamelContinuationServlet.doService(CamelContinuationServlet.java:220) ~[camel-jetty-common-2.25.2.jar:2.25.2] at org.apache.camel.http.common.CamelServlet.service(CamelServlet.java:79) ~[camel-http-common-2.25.2.jar:2.25.2] at javax.servlet.http.HttpServlet.service(HttpServlet.java:790) ~[javax.servlet-api-3.1.0.jar:3.1.0] at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:873) ~[jetty-servlet-9.4.18.v20190429.jar:9.4.18.v20190429] at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1623) ~[jetty-servlet-9.4.18.v20190429.jar:9.4.18.v20190429] at org.apache.camel.component.jetty.MultiPartFilter.doFilter(MultiPartFilter.java:51) ~[camel-jetty-common-2.25.2.jar:2.25.2] at org.apache.camel.component.jetty.CamelFilterWrapper.doFilter(CamelFilterWrapper.java:44) ~[camel-jetty-common-2.25.2.jar:2.25.2] at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1610) ~[jetty-servlet-9.4.18.v20190429.jar:9.4.18.v20190429] at org.apache.camel.component.jetty.MultiPartFilter.doFilter(MultiPartFilter.java:51) ~[camel-jetty-common-2.25.2.jar:2.25.2] at org.apache.camel.component.jetty.CamelFilterWrapper.doFilter(CamelFilterWrapper.java:44) ~[camel-jetty-common-2.25.2.jar:2.25.2] at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1610) ~[jetty-servlet-9.4.18.v20190429.jar:9.4.18.v20190429] at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:540) ~[jetty-servlet-9.4.18.v20190429.jar:9.4.18.v20190429] at org.eclipse.jetty.server.handler.ScopedHandler.nextHandle(ScopedHandler.java:255) ~[jetty-server-9.4.18.v20190429.jar:9.4.18.v20190429] at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1345) ~[jetty-server-9.4.18.v20190429.jar:9.4.18.v20190429] at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:203) ~[jetty-server-9.4.18.v20190429.jar:9.4.18.v20190429] at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:480) ~[jetty-servlet-9.4.18.v20190429.jar:9.4.18.v20190429] at org.eclipse.jetty.server.handler.ScopedHandler.nextScope(ScopedHandler.java:201) ~[jetty-server-9.4.18.v20190429.jar:9.4.18.v20190429] at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1247) ~[jetty-server-9.4.18.v20190429.jar:9.4.18.v20190429] at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:144) ~[jetty-server-9.4.18.v20190429.jar:9.4.18.v20190429] at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:132) ~[jetty-server-9.4.18.v20190429.jar:9.4.18.v20190429] at org.eclipse.jetty.server.Server.handle(Server.java:505) ~[jetty-server-9.4.18.v20190429.jar:9.4.18.v20190429] at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:370) ~[jetty-server-9.4.18.v20190429.jar:9.4.18.v20190429] at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:267) ~[jetty-server-9.4.18.v20190429.jar:9.4.18.v20190429] at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:305) ~[jetty-io-9.4.18.v20190429.jar:9.4.18.v20190429] at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:103) ~[jetty-io-9.4.18.v20190429.jar:9.4.18.v20190429] at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:117) ~[jetty-io-9.4.18.v20190429.jar:9.4.18.v20190429] at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:698) ~[jetty-util-9.4.18.v20190429.jar:9.4.18.v20190429] at org.eclipse.jetty.util.thread.QueuedThreadPool$Runner.run(QueuedThreadPool.java:804) ~[jetty-util-9.4.18.v20190429.jar:9.4.18.v20190429] at java.lang.Thread.run(Thread.java:745) [?:1.8.0_111],Hide Permalink Claus Ibsen added a comment - 23/Oct/20 08:11 Camel 2.x is not really active maintained. I suggest to move to Camel 3.x if you can， or find a workaround for your use case. For any chance of us fixing this you should build a sample application as a reproducer or some unit test etc. The more you can help us the better. Show Claus Ibsen added a comment - 23/Oct/20 08:11 Camel 2.x is not really active maintained. I suggest to move to Camel 3.x if you can， or find a workaround for your use case. For any chance of us fixing this you should build a sample application as a reproducer or some unit test etc. The more you can help us the better.
CAMEL-15742,Claus Ibsen,2020-10-22T18:44:44+0000,1603377884， where 1603377884 is the epoch,The 3.6.0 version brakes our route tests.In the code below we have two xpath expressions. Debugging shows， that the second one in split uses Long.class as return type for evaluation which is wrong and split silently fails (No split done).if you remove .setProperty("BOOK_COUNT"， xpath( "//Books/@count"， Long.class))test will pass.Verified by test based on Camel Quarkus :: Examples :: Rest Json<camel-quarkus.version>1.3.0</camel-quarkus.version> <quarkus.version>1.9.0.Final</quarkus.version>package org.acme.rest.json;import org.apache.camel.builder.RouteBuilder;import java.util.concurrent.atomic.AtomicInteger;public class Routes extends RouteBuilder { private AtomicInteger splitCount = new AtomicInteger(); @Override public void configure() throws Exception { from("platform-http:/xpathtest?httpMethodRestrict=POST") .process(exchange -> splitCount.set(0)) .setProperty("BOOK_COUNT"， xpath( "//Books/@count"， Long.class)) .split(xpath("//Books/Book")) .process(exchange -> splitCount.getAndIncrement()) .end() .setBody(exchange -> splitCount.get()) .marshal().json(); }}*TEST: *package org.acme.rest.json;import io.quarkus.test.junit.QuarkusTest;import org.junit.jupiter.api.Test;import static io.restassured.RestAssured.given;import static org.hamcrest.CoreMatchers.is;@QuarkusTestpublic class RestJsonTest { @Test public void xpath() { given() .body("<?xml version=\"1.0\" encoding=\"iso-8859-1\"?>\n" + "<Books count=\"2\"><Book Id=\"1\" ISBN=\"1\"><Titel>First</Titel> </Book>" + "<Book Id=\"2\" ISBN=\"2\"><Titel>SECOND</Titel> </Book>" + "</Books>") .header("Content-Type"， "application/xml") .when() .post("/xpathtest") .then() .statusCode(200) .body(is("2")); }},Hide Permalink Claus Ibsen added a comment - 22/Oct/20 18:44 Try set Object.class as return type for the 2nd Show Claus Ibsen added a comment - 22/Oct/20 18:44 Try set Object.class as return type for the 2nd Hide Permalink Dennis added a comment - 22/Oct/20 20:10 Claus Ibsen I did it as a temp fix already， but it's still a bug， isn't it? Show Dennis added a comment - 22/Oct/20 20:10 Claus Ibsen I did it as a temp fix already， but it's still a bug， isn't it? Hide Permalink Claus Ibsen added a comment - 23/Oct/20 07:12 Yes its a little bug which is now fixed. Thanks for reporting and with the sample code Show Claus Ibsen added a comment - 23/Oct/20 07:12 Yes its a little bug which is now fixed. Thanks for reporting and with the sample code
CAMEL-15741,Unassigned,2020-10-22T17:11:24+0000,1603372284， where 1603372284 is the epoch,I forgot to add the default value as a parameter in the headerAs and exchangePropertyAs. So add new functions for those.https://camel.apache.org/components/latest/languages/joor-language.html,There are no comments yet on this issue.
CAMEL-15740,Claus Ibsen,2020-10-23T11:24:21+0000,1603437861， where 1603437861 is the epoch,We can move the model and builder into its own module so we help keep a cleaner api and separate concerns.Then we havecamel-base -> camel-core-builder -> camel-core-engineThe reifier is a mix that sits between builder and engine to build the actual processors， ideally we may move them into camel-core-builder if that becomes possible， as then we can get to a point where we can dead code eliminate this entire JAR when you have built routes from the builder/model and then at runtime its just the engine. But that is more to untangle to get there.,Hide Permalink Claus Ibsen added a comment - 23/Oct/20 11:24 At first we are moving the reifiers out as they are now seperated. camel-base <- camel-core-reifier camel-base<- camel-core-engine camel-core-reifier <- camel-core-engine Show Claus Ibsen added a comment - 23/Oct/20 11:24 At first we are moving the reifiers out as they are now seperated. camel-base <- camel-core-reifier camel-base<- camel-core-engine camel-core-reifier <- camel-core-engine Hide Permalink Claus Ibsen added a comment - 24/Oct/20 19:52 There is now camel-core-model camel-core-reifier Show Claus Ibsen added a comment - 24/Oct/20 19:52 There is now camel-core-model camel-core-reifier
CAMEL-15739,Claus Ibsen,2020-10-22T16:10:32+0000,1603368632， where 1603368632 is the epoch,Its a more natural placement as in the builder package we have RouteBuilder and others that the end user would be using.Reifier should not be used directly by end users so lets hide it here too.,There are no comments yet on this issue.
CAMEL-15738,Claus Ibsen,2020-10-22T16:05:19+0000,1603368319， where 1603368319 is the epoch,the default value for contentTypeHeader is true in src code， while it's false in the doc,Hide Permalink Freeman Yue Fang added a comment - 22/Oct/20 16:05 I got to know that the doc is auto-generated from code. We have a bunch of dataformats have this property， but expected different default values， please see the list here ./camel-gson/src/main/java/org/apache/camel/component/gson/GsonDataFormat.java: private boolean contentTypeHeader = true; ./camel-protobuf/src/main/java/org/apache/camel/dataformat/protobuf/ProtobufDataFormat.java: private boolean contentTypeHeader; ./camel-xstream/src/main/java/org/apache/camel/dataformat/xstream/AbstractXStreamWrapper.java: private boolean contentTypeHeader = true; ./camel-jacksonxml/src/main/java/org/apache/camel/component/jacksonxml/JacksonXMLDataFormat.java: private boolean contentTypeHeader = true; ./camel-jackson/src/main/java/org/apache/camel/component/jackson/JacksonDataFormat.java: private boolean contentTypeHeader = true; ./camel-castor/src/main/java/org/apache/camel/dataformat/castor/AbstractCastorDataFormat.java: private boolean contentTypeHeader = true; ./camel-thrift/src/main/java/org/apache/camel/dataformat/thrift/ThriftDataFormat.java: private boolean contentTypeHeader; ./camel-jaxb/src/main/java/org/apache/camel/converter/jaxb/JaxbDataFormat.java: private boolean contentTypeHeader = true; ./camel-xmlbeans/src/main/java/org/apache/camel/converter/xmlbeans/XmlBeansDataFormat.java: private boolean contentTypeHeader = true; ./camel-fhir/camel-fhir-component/src/main/java/org/apache/camel/component/fhir/FhirDataFormat.java: private boolean contentTypeHeader = true; ./camel-jibx/src/main/java/org/apache/camel/dataformat/jibx/JibxDataFormat.java: private boolean contentTypeHeader = true; ./camel-fastjson/src/main/java/org/apache/camel/component/fastjson/FastjsonDataFormat.java: private boolean contentTypeHeader = true; Seems this contentTypeHeader is from here How to handle this case if different dataformats expect different default value? Andrea Cosentino? Thanks! Freeman Show Freeman Yue Fang added a comment - 22/Oct/20 16:05 I got to know that the doc is auto-generated from code. We have a bunch of dataformats have this property， but expected different default values， please see the list here ./camel-gson/src/main/java/org/apache/camel/component/gson/GsonDataFormat.java: private boolean contentTypeHeader = true ; ./camel-protobuf/src/main/java/org/apache/camel/dataformat/protobuf/ProtobufDataFormat.java: private boolean contentTypeHeader; ./camel-xstream/src/main/java/org/apache/camel/dataformat/xstream/AbstractXStreamWrapper.java: private boolean contentTypeHeader = true ; ./camel-jacksonxml/src/main/java/org/apache/camel/component/jacksonxml/JacksonXMLDataFormat.java: private boolean contentTypeHeader = true ; ./camel-jackson/src/main/java/org/apache/camel/component/jackson/JacksonDataFormat.java: private boolean contentTypeHeader = true ; ./camel-castor/src/main/java/org/apache/camel/dataformat/castor/AbstractCastorDataFormat.java: private boolean contentTypeHeader = true ; ./camel-thrift/src/main/java/org/apache/camel/dataformat/thrift/ThriftDataFormat.java: private boolean contentTypeHeader; ./camel-jaxb/src/main/java/org/apache/camel/converter/jaxb/JaxbDataFormat.java: private boolean contentTypeHeader = true ; ./camel-xmlbeans/src/main/java/org/apache/camel/converter/xmlbeans/XmlBeansDataFormat.java: private boolean contentTypeHeader = true ; ./camel-fhir/camel-fhir-component/src/main/java/org/apache/camel/component/fhir/FhirDataFormat.java: private boolean contentTypeHeader = true ; ./camel-jibx/src/main/java/org/apache/camel/dataformat/jibx/JibxDataFormat.java: private boolean contentTypeHeader = true ; ./camel-fastjson/src/main/java/org/apache/camel/component/fastjson/FastjsonDataFormat.java: private boolean contentTypeHeader = true ; Seems this contentTypeHeader is from here How to handle this case if different dataformats expect different default value? Andrea Cosentino ? Thanks! Freeman Hide Permalink Claus Ibsen added a comment - 24/Oct/20 07:55 - edited The doc says that the header is only included if the dataformat is capable of doing so. In the ist above its only thrift and protobuf that does not， maybe that boolean should be true and they can do it， or if they cannot do it， we can just add a note to their doc pages about this Show Claus Ibsen added a comment - 24/Oct/20 07:55 - edited The doc says that the header is only included if the dataformat is capable of doing so. In the ist above its only thrift and protobuf that does not， maybe that boolean should be true and they can do it， or if they cannot do it， we can just add a note to their doc pages about this
CAMEL-15737,Claus Ibsen,2020-12-05T14:11:08+0000,1607159468， where 1607159468 is the epoch,Small issue noticed over at the Camel Quarkus project. The AS2 component seems to do its parameter resolution via reflection instead of using the configurer classes.Some more background here:https://github.com/apache/camel-quarkus/issues/1874,Hide Permalink Claus Ibsen added a comment - 2 days ago I have a fixed a general problem for api components with reflection. Can you try again for as2 on camel-quarkus Show Claus Ibsen added a comment - 2 days ago I have a fixed a general problem for api components with reflection. Can you try again for as2 on camel-quarkus
CAMEL-15736,Jiri Ondrusek,2020-10-22T13:23:16+0000,1603358596， where 1603358596 is the epoch,Issue https://issues.apache.org/jira/browse/CAMEL-15679 brought changes to dependencies of camel-leveldb and camel-leveldb-legacy. Both changes have to be reflected in karaf features.,There are no comments yet on this issue.
CAMEL-15735,Jiri Ondrusek,2020-10-22T12:09:10+0000,1603354150， where 1603354150 is the epoch,New component 'camel-leveldb-legacy' was created as a result of issue https://issues.apache.org/jira/browse/CAMEL-15679. Starter has to be added.,There are no comments yet on this issue.
CAMEL-15734,Unassigned,2020-10-22T18:53:58+0000,1603378438， where 1603378438 is the epoch,Karaf just released 4.2.10 version and seems like Jetty is again upgraded and causes incompability issues. Not sure if this is Camel or Karaf project issue， but reporting here. Stack trace below when installing camel-servlet component:2020-10-22T12:29:23，689 | ERROR | Karaf ssh console user karaf | ShellUtil | 36 - org.apache.karaf.shell.core - 4.2.10 | Exception caught while executing command org.apache.karaf.features.internal.util.MultiException: Error restarting bundles: Activator start error in bundle org.ops4j.pax.web.pax-web-jetty [255]. at org.apache.karaf.features.internal.service.Deployer.deploy(Deployer.java:1045) ~[?:?] at org.apache.karaf.features.internal.service.FeaturesServiceImpl.doProvision(FeaturesServiceImpl.java:1062) ~[?:?] at org.apache.karaf.features.internal.service.FeaturesServiceImpl.lambda$doProvisionInThread$13(FeaturesServiceImpl.java:998) ~[?:?] at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?] at java.lang.Thread.run(Thread.java:834) [?:?] Suppressed: org.osgi.framework.BundleException: Activator start error in bundle org.ops4j.pax.web.pax-web-jetty [255]. at org.apache.felix.framework.Felix.activateBundle(Felix.java:2290) ~[?:?] at org.apache.felix.framework.Felix.startBundle(Felix.java:2146) ~[?:?] at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:998) ~[?:?] at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:984) ~[?:?] at org.apache.karaf.features.internal.service.BundleInstallSupportImpl.startBundle(BundleInstallSupportImpl.java:165) ~[?:?] at org.apache.karaf.features.internal.service.FeaturesServiceImpl.startBundle(FeaturesServiceImpl.java:1153) ~[?:?] at org.apache.karaf.features.internal.service.Deployer.deploy(Deployer.java:1037) ~[?:?] at org.apache.karaf.features.internal.service.FeaturesServiceImpl.doProvision(FeaturesServiceImpl.java:1062) ~[?:?] at org.apache.karaf.features.internal.service.FeaturesServiceImpl.lambda$doProvisionInThread$13(FeaturesServiceImpl.java:998) ~[?:?] at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?] at java.lang.Thread.run(Thread.java:834) [?:?] Caused by: java.lang.NoClassDefFoundError: org/eclipse/jetty/server/HttpConfiguration$Customizer at org.ops4j.pax.web.service.jetty.internal.Activator.start(Activator.java:109) ~[?:?] at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:697) ~[?:?] at org.apache.felix.framework.Felix.activateBundle(Felix.java:2240) ~[?:?] ... 12 more Caused by: java.lang.ClassNotFoundException: org.eclipse.jetty.server.HttpConfiguration$Customizer not found by org.eclipse.jetty.aggregate.jetty-all-server [253] at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1639) ~[?:?] at org.apache.felix.framework.BundleWiringImpl.access$200(BundleWiringImpl.java:80) ~[?:?] at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:2053) ~[?:?] at java.lang.ClassLoader.loadClass(ClassLoader.java:522) ~[?:?] at org.apache.felix.framework.BundleWiringImpl.getClassByDelegation(BundleWiringImpl.java:1414) ~[?:?] at org.apache.felix.framework.BundleWiringImpl.searchImports(BundleWiringImpl.java:1660) ~[?:?] at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1590) ~[?:?] at org.apache.felix.framework.BundleWiringImpl.access$200(BundleWiringImpl.java:80) ~[?:?] at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:2053) ~[?:?] at java.lang.ClassLoader.loadClass(ClassLoader.java:522) ~[?:?] at org.ops4j.pax.web.service.jetty.internal.Activator.start(Activator.java:109) ~[?:?] at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:697) ~[?:?] at org.apache.felix.framework.Felix.activateBundle(Felix.java:2240) ~[?:?],Hide Permalink Claus Ibsen added a comment - 22/Oct/20 18:53 Its a jetty issue as they tend to break their apis in their patch releases karaf 4.2.9 <jetty.version>9.4.28.v20200408</jetty.version> karaf 4.2.10 <jetty.version>9.4.31.v20200723</jetty.version> You can use karaf 4.2.9 for Camel 3.4.x. Show Claus Ibsen added a comment - 22/Oct/20 18:53 Its a jetty issue as they tend to break their apis in their patch releases karaf 4.2.9 <jetty.version>9.4.28.v20200408</jetty.version> karaf 4.2.10 <jetty.version>9.4.31.v20200723</jetty.version> You can use karaf 4.2.9 for Camel 3.4.x. Hide Permalink Claus Ibsen added a comment - 22/Oct/20 18:56 If you search via fc:org.eclipse.jetty.server.HttpConfiguration on https://search.maven.org/ you can see the last jetty version that has this class is 9.4.30 Show Claus Ibsen added a comment - 22/Oct/20 18:56 If you search via fc:org.eclipse.jetty.server.HttpConfiguration on https://search.maven.org/ you can see the last jetty version that has this class is 9.4.30 Hide Permalink Claus Ibsen added a comment - 22/Oct/20 18:57 Can you try with a fresh 4.2.10 karaf server (not with restarting bundles) and then install camel-servlet from 3.4.4 on top of that. Show Claus Ibsen added a comment - 22/Oct/20 18:57 Can you try with a fresh 4.2.10 karaf server (not with restarting bundles) and then install camel-servlet from 3.4.4 on top of that. Hide Permalink Claus Ibsen added a comment - 22/Oct/20 19:01 Ah the error says "org.eclipse.jetty.aggregate.jetty-all-server [253]" but this class is not in this JAR - its in jetty-server 9.4.31 and 9.4.32 etc. So its likely an Apache Karaf issue as they use the wrong JARs Show Claus Ibsen added a comment - 22/Oct/20 19:01 Ah the error says "org.eclipse.jetty.aggregate.jetty-all-server [253] " but this class is not in this JAR - its in jetty-server 9.4.31 and 9.4.32 etc. So its likely an Apache Karaf issue as they use the wrong JARs Hide Permalink Claus Ibsen added a comment - 22/Oct/20 19:07 Karaf 4.2.10 works with 3.7-SNAPSHOT And a fresh karaf 4.2.10 also works with camel 3.4.4 karaf@root()> feature:repo-add camel 3.4.4 Adding feature url mvn:org.apache.camel.karaf/apache-camel/3.4.4/xml/features karaf@root()> feature:install camel karaf@root()> feature:install camel-servlet karaf@root()> 122 │ Active │ 50 │ 3.4.4 │ camel-servlet 123 │ Active │ 50 │ 3.4.4 │ camel-servlet-osgi Show Claus Ibsen added a comment - 22/Oct/20 19:07 Karaf 4.2.10 works with 3.7-SNAPSHOT And a fresh karaf 4.2.10 also works with camel 3.4.4 karaf@root()> feature:repo-add camel 3.4.4 Adding feature url mvn:org.apache.camel.karaf/apache-camel/3.4.4/xml/features karaf@root()> feature:install camel karaf@root()> feature:install camel-servlet karaf@root()> 122 │ Active │ 50 │ 3.4.4 │ camel-servlet 123 │ Active │ 50 │ 3.4.4 │ camel-servlet-osgi Hide Permalink Freeman Yue Fang added a comment - 22/Oct/20 19:31 - edited Hi Tapio Piironen; The problem comes from that bundle org.eclipse.jetty.aggregate.jetty-all-server is used， and this is from jetty feature version 8.x， not the expected jetty 9.4.x which contains class org.eclipse.jetty.server.HttpConfiguration$Customizer(Karaf still ships jetty 8.x for backward compatibility) Also I tested， Camel 3.6.0 and 3.4.4 can work with karaf 4.2.10 both with JDK 8 and 11 when installing camel-servlet. With a clean karaf feature:repo-add camel 3.4.4// or 3.6.0 feature:install camel-servlet works for me both with JDK 8 and 11 I believe you installed other features which introduced jetty 8.x before you install camel-servlet， you should avoid it， only one jetty version can be used in one karaf container. Freeman Show Freeman Yue Fang added a comment - 22/Oct/20 19:31 - edited Hi Tapio Piironen ; The problem comes from that bundle org.eclipse.jetty.aggregate.jetty-all-server is used， and this is from jetty feature version 8.x， not the expected jetty 9.4.x which contains class org.eclipse.jetty.server.HttpConfiguration$Customizer(Karaf still ships jetty 8.x for backward compatibility) Also I tested， Camel 3.6.0 and 3.4.4 can work with karaf 4.2.10 both with JDK 8 and 11 when installing camel-servlet. With a clean karaf feature:repo-add camel 3.4.4// or 3.6.0 feature:install camel-servlet works for me both with JDK 8 and 11 I believe you installed other features which introduced jetty 8.x before you install camel-servlet， you should avoid it， only one jetty version can be used in one karaf container. Freeman Hide Permalink Tapio Piironen added a comment - 23/Oct/20 05:37 Hey， Thanks for checking this out. I can install camel-servlet if not installing any other feature before that. This is my feature-install script: feature:repo-add camel 3.4.4 feature:install camel feature:install jndi feature:install jms feature:install jdbc feature:install transaction feature:install camel-ssh feature:install camel-http feature:install camel-ftp feature:install camel-jdbc feature:install camel-velocity feature:install camel-jetty feature:install camel-jsch feature:install camel-quartz feature:install camel-jms feature:install camel-servlet at this point it fails. Will try if can work around this issue by changing the order. And of course if not getting it working will stick to 4.2.9 Show Tapio Piironen added a comment - 23/Oct/20 05:37 Hey， Thanks for checking this out. I can install camel-servlet if not installing any other feature before that. This is my feature-install script: feature:repo-add camel 3.4.4 feature:install camel feature:install jndi feature:install jms feature:install jdbc feature:install transaction feature:install camel-ssh feature:install camel-http feature:install camel-ftp feature:install camel-jdbc feature:install camel-velocity feature:install camel-jetty feature:install camel-jsch feature:install camel-quartz feature:install camel-jms feature:install camel-servlet at this point it fails. Will try if can work around this issue by changing the order. And of course if not getting it working will stick to 4.2.9 Hide Permalink Claus Ibsen added a comment - 23/Oct/20 07:16 You can install the war feature from karaf itself first， then it installs jetty Show Claus Ibsen added a comment - 23/Oct/20 07:16 You can install the war feature from karaf itself first， then it installs jetty
CAMEL-15733,Claus Ibsen,2020-10-22T07:20:49+0000,1603336849， where 1603336849 is the epoch,This feature is not really in use and was over the top. And it makes something hards to untangle.,There are no comments yet on this issue.
CAMEL-15732,Claus Ibsen,2020-10-22T08:36:47+0000,1603341407， where 1603341407 is the epoch,We should untangle reifiers some more from using builder and impl directly， so we can get further ahead of being able to seperate reifier and model from camel-core-engine - eg eventually maybe so you can have those at built time， and then at runtime they can be removed / not needed.,Hide Permalink Claus Ibsen added a comment - 22/Oct/20 08:36 - edited error handlers DONE and route DONE are the remainder now. Show Claus Ibsen added a comment - 22/Oct/20 08:36 - edited error handlers DONE and route DONE are the remainder now. Hide Permalink Claus Ibsen added a comment - 22/Oct/20 14:27 - edited It would be good to move adviceWith away from RouteReifier so we can have it another place as Reifier should not really be exposed to end users DONE Show Claus Ibsen added a comment - 22/Oct/20 14:27 - edited It would be good to move adviceWith away from RouteReifier so we can have it another place as Reifier should not really be exposed to end users DONE Hide Permalink Claus Ibsen added a comment - 23/Oct/20 09:49 - edited lookupErrorHandlerFactory in ErrorHandlerReifier to be moved out of reifier DONE Show Claus Ibsen added a comment - 23/Oct/20 09:49 - edited lookupErrorHandlerFactory in ErrorHandlerReifier to be moved out of reifier DONE
CAMEL-15731,Unassigned,2020-10-22T05:53:23+0000,1603331603， where 1603331603 is the epoch,Currently when reading HL7 messages using camel-mllp we always have to send back some acknowledgment. Even with autoAck=false there has to be some ack set though MLLP_ACKNOWLEDGEMENT property， or the MllpTcpServerConsumer throws MllpInvalidAcknowledgementException. This is a big limitation when migrating for example from Mirth to camel since Mirth supports that (see pages 330-331 in https://www.nextgen.com/-/media/files/nextgen-connect/nextgen-connect-39-user-guide.pdf). The camel-mllp component should allow receiving messages without sending back any ack， the same way Mirth does it. I believe it should stop throwing exceptions if autoAck=false， synchronous=false and no ack is being set by any of the MLLP_ACKNOWLEDGEMENT properties. Or we could introduce new property to support this mode.,Hide Permalink Claus Ibsen added a comment - 22/Oct/20 05:53 Are you able to work on improving this? Show Claus Ibsen added a comment - 22/Oct/20 05:53 Are you able to work on improving this? Hide Permalink Rafal Jaworski added a comment - 22/Oct/20 20:28 Yes， I'll work on that. Show Rafal Jaworski added a comment - 22/Oct/20 20:28 Yes， I'll work on that.
CAMEL-15730,Claus Ibsen,2020-10-21T18:12:21+0000,1603289541， where 1603289541 is the epoch,Due to how the java dsl was designed in the beginning then we have SimpleBuilder that are used for defining simple expressions/predicates which is a bit different than what else is done.But we can untangle that and make it just a facade and transfer the configuration to Simple Language definition like the DSL works in general.We should also untangle SimpleBuilder from the reifier so they are not direct dependent.,Hide Permalink Claus Ibsen added a comment - 21/Oct/20 18:12 There are some places where this reveal where we could improve as some EIPs take in SimpleBuilder and dont transform it to SimpleExpression model as other EIPs does in general. Its for EIPs with special expression options like wiretap， aggregator etc. Show Claus Ibsen added a comment - 21/Oct/20 18:12 There are some places where this reveal where we could improve as some EIPs take in SimpleBuilder and dont transform it to SimpleExpression model as other EIPs does in general. Its for EIPs with special expression options like wiretap， aggregator etc. Hide Permalink Claus Ibsen added a comment - 21/Oct/20 19:10 Okay we got a bit further - however its a bit tougher to make SimpleBuilder not as a predicate/expression but as a intermediate holder that gets replaced when the route model is built. Show Claus Ibsen added a comment - 21/Oct/20 19:10 Okay we got a bit further - however its a bit tougher to make SimpleBuilder not as a predicate/expression but as a intermediate holder that gets replaced when the route model is built.
CAMEL-15729,Unassigned,2020-10-21T14:29:45+0000,1603276185， where 1603276185 is the epoch,This enhancement request was generated from a question on zulipchat:https://camel.zulipchat.com/#narrow/stream/257298-camel/topic/Adding.20a.20trustStore.20for.20graphql/near/213944005We are writing an integration that needs to produce messages to a graphql server. The graphql server is using TLS and its certificate was generated by an internal CA. There does not appear to be a way to provide a trust store to the graphql producer， like there is for say the Kafka integrations. Connections to graphql fail due to the inability to build a trusted certificate chain.Possible non-trivial solutions include assuming the graphql integration is using the apache HTTP client， and setting up a new protocol that uses a custom trust store. Also (using camel-k) using the JVM taint to alter the JSSE configuration / java properties， adding a trust store containing the CA. However both of these solutions require assumptions about the implementation that may not always be true (and we have not tested them yet). Could also use the HTTP[4] integration directly to talk to graphql but this requires coding the REST request manually.If there were a parameter on the graphql integration where we could input a trust store， type， and password， that would be an ideal solution. Or perhaps some other way of modifying the default trust store using camel-k (this would benefit all integrations).,There are no comments yet on this issue.
CAMEL-15728,Unassigned,2020-10-21T12:16:27+0000,1603268187， where 1603268187 is the epoch,Its mention should probably be dropped from org.apache.camel.cdi.CdiCamelContext javadoc,There are no comments yet on this issue.
CAMEL-15727,Unassigned,2020-10-21T12:12:21+0000,1603267941， where 1603267941 is the epoch,seems mock and main dependencies should be dropped in favor of camel-core-languages (and camel-core-engine but it is transitive from language one). Other ones can be added in a camel-cdi-main module or so but are undesired for main deployments IMHO.,There are no comments yet on this issue.
CAMEL-15726,Claus Ibsen,2020-10-21T12:01:48+0000,1603267308， where 1603267308 is the epoch,If you have a simple expressionHello ${body} how are youThen its 3 parts: constant， body， constantAnd at runtime they get evaluated and appended together as string.We could potentially optimize this for constant and pre eval then as string and then skip the noop eval when they are assembled.,There are no comments yet on this issue.
CAMEL-15725,Unassigned,2020-11-03T07:50:56+0000,1604371856， where 1604371856 is the epoch,Needs to exposes the cdi extension in capabilities mainly,Hide Permalink Claus Ibsen added a comment - 03/Nov/20 07:50 We do not support CDI in OSGi - only whats offered in camel-karaf. Show Claus Ibsen added a comment - 03/Nov/20 07:50 We do not support CDI in OSGi - only whats offered in camel-karaf. Hide Permalink Romain Manni-Bucau added a comment - 03/Nov/20 09:10 Claus Ibsen sorry i don't get it， it is just about fixing the manifest.mf and CDI is support in karaf thanks OSGi-CDI spec (aries cdi as impl @asf) so the jar should be fixed IMHO. Show Romain Manni-Bucau added a comment - 03/Nov/20 09:10 Claus Ibsen sorry i don't get it， it is just about fixing the manifest.mf and CDI is support in karaf thanks OSGi-CDI spec (aries cdi as impl @asf) so the jar should be fixed IMHO. Hide Permalink Claus Ibsen added a comment - 03/Nov/20 20:28 Okay if you can provide a PR with your suggested fix then that would be good Show Claus Ibsen added a comment - 03/Nov/20 20:28 Okay if you can provide a PR with your suggested fix then that would be good Hide Permalink Romain Manni-Bucau added a comment - 04/Nov/20 09:17 Here it is https://github.com/apache/camel/pull/4562 Show Romain Manni-Bucau added a comment - 04/Nov/20 09:17 Here it is https://github.com/apache/camel/pull/4562
CAMEL-15724,Unassigned,2020-10-21T11:59:45+0000,1603267185， where 1603267185 is the epoch,JTA is fully optional and when undesired it makes camel-cdi module unusable. Would be great to keep camel-cdi only depending on CDI and have a jta integration either in a new module or in a jta module.,There are no comments yet on this issue.
CAMEL-15723,Unassigned,2020-10-21T09:55:55+0000,1603259755， where 1603259755 is the epoch,Hi，we are getting production errors (NPE) when using a Postgres aggregate repository and Camel code attempts to write to that table (under concurrent use):org.apache.camel.RuntimeCamelException: java.lang.RuntimeException: Error adding to repository lb_data_uploads with key *** at org.apache.camel.RuntimeCamelException.wrapRuntimeCamelException(RuntimeCamelException.java:52) at org.apache.camel.processor.aggregate.jdbc.JdbcAggregationRepository.add(JdbcAggregationRepository.java:142) at org.apache.camel.processor.aggregate.AggregateProcessor.doAggregationRepositoryAdd(AggregateProcessor.java:644) at org.apache.camel.processor.aggregate.AggregateProcessor.doAggregation(AggregateProcessor.java:598) at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:406) at org.apache.camel.processor.aggregate.AggregateProcessor.doInOptimisticLock(AggregateProcessor.java:372) at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:362) at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$RedeliveryTask.doRun(RedeliveryErrorHandler.java:702) at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$RedeliveryTask.run(RedeliveryErrorHandler.java:616) at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:60) at org.apache.camel.processor.Pipeline.process(Pipeline.java:147) at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:286) at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83) at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:40) at org.apache.camel.component.kafka.KafkaConsumer$KafkaFetchRecords.doRun(KafkaConsumer.java:346) at org.apache.camel.component.kafka.KafkaConsumer$KafkaFetchRecords.run(KafkaConsumer.java:222) at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at java.base/java.lang.Thread.run(Thread.java:834) Caused by: java.lang.RuntimeException: Error adding to repository lb_data_uploads with key *** at org.apache.camel.processor.aggregate.jdbc.JdbcAggregationRepository$1.doInTransaction(JdbcAggregationRepository.java:176) at org.apache.camel.processor.aggregate.jdbc.JdbcAggregationRepository$1.doInTransaction(JdbcAggregationRepository.java:149) at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) at org.apache.camel.processor.aggregate.jdbc.JdbcAggregationRepository.add(JdbcAggregationRepository.java:149) at org.apache.camel.processor.aggregate.jdbc.JdbcAggregationRepository.add(JdbcAggregationRepository.java:137) ... 21 common frames omitted Caused by: java.lang.NullPointerException: null at org.apache.camel.processor.aggregate.jdbc.JdbcAggregationRepository$1.doInTransaction(JdbcAggregationRepository.java:167) ... 25 common frames omitted The problematic code seems to be at JdbcAggregationRepository.java line 167:private static final String VERSION_PROPERTY = "CamelOptimisticLockVersion";....long version = exchange.getProperty(VERSION_PROPERTY， Long.class);,Hide Permalink Claus Ibsen added a comment - 21/Oct/20 09:55 I think we fixed something related to this. Can you try latest 3.4.x release. Show Claus Ibsen added a comment - 21/Oct/20 09:55 I think we fixed something related to this. Can you try latest 3.4.x release. Hide Permalink Claus Ibsen added a comment - Yesterday Make sure that the database table has the version coulmn， see the init.sql scripts in src/main/resources Show Claus Ibsen added a comment - Yesterday Make sure that the database table has the version coulmn， see the init.sql scripts in src/main/resources
CAMEL-15722,Luca Burgazzoli,2020-10-21T09:26:35+0000,1603257995， where 1603257995 is the epoch,,There are no comments yet on this issue.
CAMEL-15721,Claus Ibsen,2020-10-21T08:21:54+0000,1603254114， where 1603254114 is the epoch,To optimize simple language if you dosimple("resource:foo.txt")Then foo.txt should be loaded once.,There are no comments yet on this issue.
CAMEL-15720,Claus Ibsen,2020-11-20T10:24:08+0000,1605849848， where 1605849848 is the epoch,When using bean language， method call， ref etc and a method name is specified and its a noarg method (or args is hardcoded) then we can optimize to do less discovery on each invocation and reuse last discovery.,Hide Permalink Claus Ibsen added a comment - 20/Nov/20 10:24 This is a bit tougher to implement. Wonder if we should revisit this with the compiled simple language effort， so we could do something similar to source code generate and compile the bean parameter mapping， which then would be optimized and fast. Show Claus Ibsen added a comment - 20/Nov/20 10:24 This is a bit tougher to implement. Wonder if we should revisit this with the compiled simple language effort， so we could do something similar to source code generate and compile the bean parameter mapping， which then would be optimized and fast.
CAMEL-15719,Unassigned,2020-10-21T04:37:34+0000,1603240654， where 1603240654 is the epoch,Exchange used : Direct Here is stack trace. org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[ID-44ec8b10a24e-39165-1602659361478-0-440281] at org.apache.camel.util.ObjectHelper.wrapCamelExecutionException(ObjectHelper.java:1790) at org.apache.camel.util.ExchangeHelper.extractResultBody(ExchangeHelper.java:697) at org.apache.camel.impl.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:515) at org.apache.camel.impl.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:511) at org.apache.camel.impl.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:163) at org.apache.camel.impl.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:168) at com.mypacakge.async.publish.EventPublisher.publish(EventPublisher.java:61) at sun.reflect.GeneratedMethodAccessor203.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.apache.camel.component.bean.MethodInfo.invoke(MethodInfo.java:472) at org.apache.camel.component.bean.MethodInfo$1.doProceed(MethodInfo.java:291) at org.apache.camel.component.bean.MethodInfo$1.proceed(MethodInfo.java:264) at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:178) at org.apache.camel.component.bean.BeanProducer.process(BeanProducer.java:41) at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145) at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:77) at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:541) at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:198) at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:198) at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97) at org.apache.camel.component.rabbitmq.RabbitConsumer.doHandleDelivery(RabbitConsumer.java:99) at org.apache.camel.component.rabbitmq.RabbitConsumer.handleDelivery(RabbitConsumer.java:74) at com.rabbitmq.client.impl.ConsumerDispatcher$5.run(ConsumerDispatcher.java:144) at com.rabbitmq.client.impl.ConsumerWorkService$WorkPoolRunnable.run(ConsumerWorkService.java:99) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748) Caused by: java.util.concurrent.RejectedExecutionException: null at org.apache.camel.component.rabbitmq.RabbitMQProducer.process(RabbitMQProducer.java:177) at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:198) at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:97) at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:529) at org.apache.camel.impl.ProducerCache$1.doInProducer(ProducerCache.java:497) at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:365) at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:497) at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:225) at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:144) at org.apache.camel.impl.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:161),Hide Permalink Andrea Cosentino added a comment - 21/Oct/20 04:37 Please use at least 2.25.x， which it is the only branch still maintained for 2.x Show Andrea Cosentino added a comment - 21/Oct/20 04:37 Please use at least 2.25.x， which it is the only branch still maintained for 2.x Hide Permalink Claus Ibsen added a comment - 21/Oct/20 04:41 Yeah try with latest 2.25.x and report back. Show Claus Ibsen added a comment - 21/Oct/20 04:41 Yeah try with latest 2.25.x and report back.
CAMEL-15718,Zineb BENDHIBA,2020-10-27T13:18:51.896Z,1603790331.896， where 1603790331.896 is the epoch,I am new to camel. I use a filebeat source that delivers logfile data over the lumberjack v2 batch protocol. As a receiving server I use the camel lumberjack component to further process the data in a camel pipeline.I realized that the LumberjackSessionHandler of camels lumberjack component is not stateless but is being used by camel for all parallel lumberjack connection requests. Thus， new incoming connections with their own batch windows mess up any ongoing process of the already existing window， e.g. window size settings and counting acknowledges.Many different combinations of multicast().parallelProcessing().threads(...) with filebeats workers/pipelines showed the same result.The states of the stateful LumberjackSessionHandler are mixed up and the handling of parallel windows is broken which results in unwanted/unfinished acknowledges. As a result it hangs up the whole communication process to the filebeat source.The LumberjackSessionHandler is not able to handle multiple threads， but camel uses it as it would be able to. How can I tell camel to use separate LumberjackSessionHandlers and processing pipelines for each lumberjack batch request? Or do I misunderstand the concept of how camel uses components?Sorry， I wasn't able to find a more specific "camel-lumberjack" component in the list of issue proposals above so I selected camel-core...,Hide Permalink Jan Bednar added a comment - 20/Oct/20 20:22 All session data in LumberjackSessionHandler are stored as field variables and thus shared between different threads/channels. These variables needs to be moved to Channel attributes - https://netty.io/4.0/api/io/netty/util/AttributeMap.html Like: ctx.channel().attr(AttributeKey.valueOf("LumberjackSessionHandler.state")).set(new LumberjackSessionState()); Show Jan Bednar added a comment - 20/Oct/20 20:22 All session data in LumberjackSessionHandler are stored as field variables and thus shared between different threads/channels. These variables needs to be moved to Channel attributes - https://netty.io/4.0/api/io/netty/util/AttributeMap.html Like: ctx.channel().attr(AttributeKey.valueOf( "LumberjackSessionHandler.state" )).set( new LumberjackSessionState()); Hide Permalink Zineb BENDHIBA added a comment - 23/Oct/20 12:50 Thanks Jan Bednar for the analyse. I'll work on this issue !! Show Zineb BENDHIBA added a comment - 23/Oct/20 12:50 Thanks Jan Bednar for the analyse. I'll work on this issue !! Hide Permalink Zineb BENDHIBA added a comment - 27/Oct/20 08:39 Erik Zimmermann can you tell me what kind of the unwanted acknowledges， and can you tell how many threads do you run in parallel + characteristics on the machine ? Do you know how much time the channel of client waits before closing the channel ? Jan Bednar : the camel consumer creates a dedicated LumberjackSessionHandler for each channel. Each channel has its own LumberjackSessionHandler dedicated. The solution you gave， gets it worse， as I can't even run 100 threads with complete acknowledges， while I can do up to 750 with good acknowledges. Is that consumes more time ? This is why I've done so far: I've been running multiple threads in parallel to have the same bug. (RHEL 8 with 32GB M) From 2 to 20 threads executing in parallel this example https://github.com/apache/camel/blob/f7e2147eb059edbb0bf6a5e0d40ced00706a7251/components/camel-lumberjack/src/test/java/org/apache/camel/component/lumberjack/LumberjackComponentTest.java#L58 ， I can debug easily and confirm that the ChannelIntializer creates a LumberjackSessionHandler for every channel. Up to 750 threads executing this example in parallel， I have all the wanted acknowledges. Between 800 and 1000 threads， I begin to experience that problem : Some acknowledges are not received or are incomplete. But I've never experienced wrong acknowledges， just incomplete or empty. I'm still investigating. But I'd need help to know more about what you've experienced as behavior. Show Zineb BENDHIBA added a comment - 27/Oct/20 08:39 Erik Zimmermann can you tell me what kind of the unwanted acknowledges， and can you tell how many threads do you run in parallel + characteristics on the machine ? Do you know how much time the channel of client waits before closing the channel ? Jan Bednar : the camel consumer creates a dedicated LumberjackSessionHandler for each channel. Each channel has its own LumberjackSessionHandler dedicated. The solution you gave， gets it worse， as I can't even run 100 threads with complete acknowledges， while I can do up to 750 with good acknowledges. Is that consumes more time ? This is why I've done so far: I've been running multiple threads in parallel to have the same bug. (RHEL 8 with 32GB M) From 2 to 20 threads executing in parallel this example https://github.com/apache/camel/blob/f7e2147eb059edbb0bf6a5e0d40ced00706a7251/components/camel-lumberjack/src/test/java/org/apache/camel/component/lumberjack/LumberjackComponentTest.java#L58 ， I can debug easily and confirm that the ChannelIntializer creates a LumberjackSessionHandler for every channel. Up to 750 threads executing this example in parallel， I have all the wanted acknowledges. Between 800 and 1000 threads， I begin to experience that problem : Some acknowledges are not received or are incomplete. But I've never experienced wrong acknowledges， just incomplete or empty. I'm still investigating. But I'd need help to know more about what you've experienced as behavior. Hide Permalink Erik Zimmermann added a comment - 27/Oct/20 13:17 Hi Zineb， many thanks for your investigations so far! I'm running Debian 10， kernel 4.19.67-2， 16GB， Camel 3.5.0， Filebeat 7.9.1， JDK 1.8.0_242. In my integration test scenario I use 2 parallel threads. When I use my tests with mocking I can easily process 100k messages without any error. The effect came up on integration tests in combination with filebeat. When I set filebeats bulk_max_size=8， flush.timeout=1s (see attached filebeat config)， new log messages are packed to bulks windows with the max size of 8 and sent to camel via lumberjack. Sending 10 messages with this configuration will result in two lumberjack bulks: one containing 8 and one 2 messages. Correct behaviour: The first bulk window of 8 messages is processed in the LumberjackSessionHandler and receives a notifyMessageProcessed call on each processed message in the further channel. Thus， after the last sequence number of 8 it sends only one accumulated acknowledge back to filebeat for the whole bulk， closing the channel and everything is well. My experience now is that while processing the 8 messages of the first bulk (say camel-thread-8)， filebeat also sends the second bulk with 2 messages (camel-thread-2) which is totally fine so far. Unfortunately， this second bulk is processed by the same LumberjackMessageHandler instance which is already processing the first bulk. The windowSize and nextAck instance variables of the LumberjackMessageHandler are newly initialized in the middle of an already ongoing process. As a result the handler awaits a different acknowledged sequence number to complete its bulk communication with filebeat， here 2. Lost acks: The camel-thread-8 might be finished with the 8th ack but the LumberjackMessageHandler now awaits the new ack sequence number of 2. The final ack of 8 from the first bulk is never checked again so no accumulated ack is sent to filebeat anymore for the first bulk. The connection stays stalled until it times out. Unwanted acks: The camel-thread-8 might just notifyMessageProcessed its second message and as the handler now waits for the new ack sequence number of 2 from camel-thread-2 it acknowledges the finalization of the second bulk back to filebeat - although it was the second acknowledge coming in from the first bulk. The second bulk communication with filebeat is finalized with the "wrong" acknowledge from the first bulk. The first bulk on the other side can never be finished as 8 will never be checked again. From the observer perspective both cases show the same effect by inappropriately stalled or hung up lumberjack bulk connections. "Do you know how much time the channel of client waits before closing the channel ?" The lumberjack channel immediately finalizes the connection after a suitable ack sequence number was received or stalles the connection if acks come in that are not expected anymore. Show Erik Zimmermann added a comment - 27/Oct/20 13:17 Hi Zineb， many thanks for your investigations so far! I'm running Debian 10， kernel 4.19.67-2， 16GB， Camel 3.5.0， Filebeat 7.9.1， JDK 1.8.0_242. In my integration test scenario I use 2 parallel threads. When I use my tests with mocking I can easily process 100k messages without any error. The effect came up on integration tests in combination with filebeat. When I set filebeats bulk_max_size=8， flush.timeout=1s (see attached filebeat config)， new log messages are packed to bulks windows with the max size of 8 and sent to camel via lumberjack. Sending 10 messages with this configuration will result in two lumberjack bulks: one containing 8 and one 2 messages. Correct behaviour: The first bulk window of 8 messages is processed in the LumberjackSessionHandler and receives a notifyMessageProcessed call on each processed message in the further channel. Thus， after the last sequence number of 8 it sends only one accumulated acknowledge back to filebeat for the whole bulk， closing the channel and everything is well. My experience now is that while processing the 8 messages of the first bulk (say camel-thread-8)， filebeat also sends the second bulk with 2 messages (camel-thread-2) which is totally fine so far. Unfortunately， this second bulk is processed by the same LumberjackMessageHandler instance which is already processing the first bulk. The windowSize and nextAck instance variables of the LumberjackMessageHandler are newly initialized in the middle of an already ongoing process. As a result the handler awaits a different acknowledged sequence number to complete its bulk communication with filebeat， here 2. Lost acks : The camel-thread-8 might be finished with the 8th ack but the LumberjackMessageHandler now awaits the new ack sequence number of 2. The final ack of 8 from the first bulk is never checked again so no accumulated ack is sent to filebeat anymore for the first bulk. The connection stays stalled until it times out. Unwanted acks : The camel-thread-8 might just notifyMessageProcessed its second message and as the handler now waits for the new ack sequence number of 2 from camel-thread-2 it acknowledges the finalization of the second bulk back to filebeat - although it was the second acknowledge coming in from the first bulk. The second bulk communication with filebeat is finalized with the "wrong" acknowledge from the first bulk. The first bulk on the other side can never be finished as 8 will never be checked again. From the observer perspective both cases show the same effect by inappropriately stalled or hung up lumberjack bulk connections. "Do you know how much time the channel of client waits before closing the channel ?" The lumberjack channel immediately finalizes the connection after a suitable ack sequence number was received or stalles the connection if acks come in that are not expected anymore. Hide Permalink Zineb BENDHIBA added a comment - 27/Oct/20 14:18 - edited thanks Erik Zimmermann. I need to do a test with filebeat. I'm not sure but I feel that filebeat will create one channel for the two messages (so the same session)， to send the two window. Maybe configuring more flush time would help. In this integration test ， we have a test with one connection sending 2 window. If we remove this line of code， we will have unwanted acknowledges. Show Zineb BENDHIBA added a comment - 27/Oct/20 14:18 - edited thanks Erik Zimmermann . I need to do a test with filebeat. I'm not sure but I feel that filebeat will create one channel for the two messages (so the same session)， to send the two window. Maybe configuring more flush time would help. In this integration test ， we have a test with one connection sending 2 window. If we remove this line of code ， we will have unwanted acknowledges. Hide Permalink Erik Zimmermann added a comment - 27/Oct/20 15:54 - edited I used flush.timeout=1s to not wait too long in the debugger for the second window to show up. But I think the solution should rather not be dependent on any value of the flush.timeout as thousands of messages/bulks can arrive at any time. It might be a solution for my described 8-2-test case though... Show Erik Zimmermann added a comment - 27/Oct/20 15:54 - edited I used flush.timeout=1s to not wait too long in the debugger for the second window to show up. But I think the solution should rather not be dependent on any value of the flush.timeout as thousands of messages/bulks can arrive at any time. It might be a solution for my described 8-2-test case though... Hide Permalink Zineb BENDHIBA added a comment - 27/Oct/20 18:17 The right problem is withing the same session， if we treat the window in parallel， there is a big mess with the windowSize. I'll continue investigating on that one. Show Zineb BENDHIBA added a comment - 27/Oct/20 18:17 The right problem is withing the same session， if we treat the window in parallel， there is a big mess with the windowSize. I'll continue investigating on that one. Hide Permalink Zineb BENDHIBA added a comment - 30/Oct/20 10:24 Hello， I've proposed a PR : https://github.com/apache/camel/pull/4540 Each channel/session is thread safe in Netty. However， while using lumberjack component， one single session can process multiple windows in parallel， and that causes mess while updating session data. My solution to that : for each Lumberjack session， a new window to process has to wait the ACK sent from the previous one， if exists. In that way， we can assure that session data are not changed by another process. While doing several tests， I've noticed when using Lumberjack without SSL， messages go too fast. I guess it's due to absence of the additional SSL pipeline. And so client loses some messages. I've added a pause of 10 milliseconds and it resolves the problem. I've updated the integration tests to stop pausing between windows and send more windows to the server. I've also added a new integration test for multi threads， to assure that lumberjack is thread safe while processing different sessions. Show Zineb BENDHIBA added a comment - 30/Oct/20 10:24 Hello， I've proposed a PR : https://github.com/apache/camel/pull/4540 Each channel/session is thread safe in Netty. However， while using lumberjack component， one single session can process multiple windows in parallel， and that causes mess while updating session data. My solution to that : for each Lumberjack session， a new window to process has to wait the ACK sent from the previous one， if exists. In that way， we can assure that session data are not changed by another process. While doing several tests， I've noticed when using Lumberjack without SSL， messages go too fast. I guess it's due to absence of the additional SSL pipeline. And so client loses some messages. I've added a pause of 10 milliseconds and it resolves the problem. I've updated the integration tests to stop pausing between windows and send more windows to the server. I've also added a new integration test for multi threads， to assure that lumberjack is thread safe while processing different sessions. Hide Permalink Erik Zimmermann added a comment - 17/Nov/20 08:41 - edited Thanks a lot for the fix Zineb BENDHIBA ! I'm not sure if this fix is able to handle processing mass data， e.g.， coming from external filebeat instances: If all threads in a session have finished processing the current batches of data and the last one finally passes phaser.arriveAndDeregister()， the phaser itself terminates permanently. As I understand the phaser， it does not accept any further registration and stops its service from that point on. Thus， data arriving afterwards will be treated as without the fix. If a thread passes the phaser.arriveAndDeregister()， all waiting threads at the phaser.arriveAndAwaitAdvance() start running all at once and not one after another. As a result the window.size is concurrently messed up again. I don't clearly understand the flush pause during the Ack which might also cause performance reduction? Is it possible to teach camel to also use the LumberjackSessionHandler multi threaded correctly? This would prevent all the messy behaviour of the handler. I saw that camel creates a pool of lumberjack handlers but it only uses the first instance for all sessions. Maybe there is an issue of camels pool handling that leads to the observed behaviour? Show Erik Zimmermann added a comment - 17/Nov/20 08:41 - edited Thanks a lot for the fix Zineb BENDHIBA ! I'm not sure if this fix is able to handle processing mass data， e.g.， coming from external filebeat instances: If all threads in a session have finished processing the current batches of data and the last one finally passes phaser.arriveAndDeregister()， the phaser itself terminates permanently. As I understand the phaser， it does not accept any further registration and stops its service from that point on. Thus， data arriving afterwards will be treated as without the fix. If a thread passes the phaser.arriveAndDeregister()， all waiting threads at the phaser.arriveAndAwaitAdvance() start running all at once and not one after another. As a result the window.size is concurrently messed up again. I don't clearly understand the flush pause during the Ack which might also cause performance reduction? Is it possible to teach camel to also use the LumberjackSessionHandler multi threaded correctly? This would prevent all the messy behaviour of the handler. I saw that camel creates a pool of lumberjack handlers but it only uses the first instance for all sessions. Maybe there is an issue of camels pool handling that leads to the observed behaviour? Hide Permalink Zineb BENDHIBA added a comment - 19/Nov/20 09:55 Hello Erik Zimmermann， I'll look again at this phaser.arriveAndDeregister()， to see if there's a bug. There are 2 things: The bug exists because it is multi-threaded. (there is at least the event loop thread who has to in the same thread， so I guess this is why you said there is one thread for all sessions) The main problem is that the read method in our Netty Handler handles each of the messages in the window， instead of handling all the window. And in Netty， we can send the ACK only from that method. In the way the camel component is developed today : it is impossible to let the session handle multiple windows in parallel and send right ACKs. I'm thinking about changing the solution but it needs a little more time. Show Zineb BENDHIBA added a comment - 19/Nov/20 09:55 Hello Erik Zimmermann ， I'll look again at this phaser.arriveAndDeregister()， to see if there's a bug. There are 2 things: The bug exists because it is multi-threaded. (there is at least the event loop thread who has to in the same thread， so I guess this is why you said there is one thread for all sessions) The main problem is that the read method in our Netty Handler handles each of the messages in the window， instead of handling all the window. And in Netty， we can send the ACK only from that method. In the way the camel component is developed today : it is impossible to let the session handle multiple windows in parallel and send right ACKs. I'm thinking about changing the solution but it needs a little more time.
CAMEL-15717,Jan Bednar,2020-10-20T20:06:49+0000,1603210009， where 1603210009 is the epoch,See problems during latest release http://camel.465427.n5.nabble.com/Apache-Camel-3-6-this-October-tp5887752p5889984.html,There are no comments yet on this issue.
CAMEL-15716,James Netherton,2020-10-21T06:28:54+0000,1603247334， where 1603247334 is the epoch,Hello，I would like to use the component camel-vertx-websocket to do some Stomp over Websocket with an existing Websocket server (ActiveMQ in my use case).However， netty logs keep saying this: Caused by:io.netty.handler.codec.http.websocketx.WebSocketHandshakeException:Invalid subprotocol. Actual: stomp. Expected one of: nullI would like to pass a value for the subprotocol (like v12.stomp)， but I don't know if it's possible.However， I can see in the netty class io.netty.handler.codec.http.websocketx.WebSocketClientHandshaker that there are constructors that can take a subprotocol as a parameter: /** * Base constructor * * @param uri * URL for web socket communications. e.g "ws://myhost.com/mypath". Subsequent web socket frames will be * sent to this URL. * @param version * Version of web socket specification to use to connect to the server * @param subprotocol * Sub protocol request sent to the server. * @param customHeaders * Map of custom headers to add to the client request * @param maxFramePayloadLength * Maximum length of a frame's payload */protected WebSocketClientHandshaker(URI uri， WebSocketVersion version， String subprotocol， HttpHeaders customHeaders， int maxFramePayloadLength) { this(uri， version， subprotocol， customHeaders， maxFramePayloadLength， DEFAULT_FORCE_CLOSE_TIMEOUT_MILLIS);} That would be great if we could pass this subprotocol to netty， to do some Stomp over Websocket,Hide Permalink James Netherton added a comment - 21/Oct/20 06:28 I can take a look into this. It should be quite simple to add support for subprotocols. In VertxWebSocketEndpoint.getWebSocket()， where the WS connection is established with client.webSocket()， it needs to use the signature that allows you to pass an instance of WebSocketConnectOptions， as that can hold info about subprotocols. Show James Netherton added a comment - 21/Oct/20 06:28 I can take a look into this. It should be quite simple to add support for subprotocols. In VertxWebSocketEndpoint.getWebSocket()， where the WS connection is established with client.webSocket()， it needs to use the signature that allows you to pass an instance of WebSocketConnectOptions， as that can hold info about subprotocols.
CAMEL-15715,Claus Ibsen,2020-10-20T19:44:49+0000,1603208689， where 1603208689 is the epoch,Hello everyone，We identified a performance drop in Simple expressions in 3.4.4 compared to 2.25.1Given the following route<?xml version="1.0" encoding="UTF-8"?><routes xmlns="http://camel.apache.org/schema/spring" xmlns:u="http://www.systar.com/aluminium/camel-util"> <route> <from uri="timer:foo?delay=-1&repeatCount=1000000"/> <!-- fake data to have something to work with --> <setBody> <groovy>['a'， 'b'， 'c'， 'd']</groovy> </setBody> <setHeader headerName="raw"> <simple>${body[2]}</simple> </setHeader> <setHeader headerName="string"> <simple resultType="String">${body[2]}</simple> </setHeader> <setHeader headerName="constant"> <constant>constant</constant> </setHeader> <to uri="log:throughput?groupInterval=1000"/> </route></routes>In Camel 3.4.4 I have an average of 10，324 messages per second whereas I have an average of 69，662 messages per second in Camel 2.25.1When extracting JMX TotalProcessingTime attribute on the setHeader processors here what I have for the 1 million messagesSetHeaderCamel 2.25.1Camel 3.4.4raw450645275string393544103constant377470We're using an OSGi environment but I don't think it has an impact here.Can you have a look? What can I do to help?Thank you,Hide Permalink Claus Ibsen added a comment - 20/Oct/20 19:44 Camel 3.6 has some optimizations and improvements to make this fast. Camel 3.7 is the next LTS which is planned for December. Camel 3.4.x will not have any changes in this regard. Show Claus Ibsen added a comment - 20/Oct/20 19:44 Camel 3.6 has some optimizations and improvements to make this fast. Camel 3.7 is the next LTS which is planned for December. Camel 3.4.x will not have any changes in this regard.
CAMEL-15714,Jean-Baptiste Onofré,2020-10-20T15:22:18+0000,1603192938， where 1603192938 is the epoch,,Hide Permalink Andrea Cosentino added a comment - 20/Oct/20 15:22 Do you mean aws2-s3? or only aws-s3? It doesn't make sense for aws-s3， it will be deprecated soon. Show Andrea Cosentino added a comment - 20/Oct/20 15:22 Do you mean aws2-s3? or only aws-s3? It doesn't make sense for aws-s3， it will be deprecated soon.
CAMEL-15713,Claus Ibsen,2020-10-20T11:01:36+0000,1603177296， where 1603177296 is the epoch,,Hide Permalink Claus Ibsen added a comment - 20/Oct/20 11:01 It would be good to allow to inject a bean as singleton scope and do this once (static) as then its really faster and we can use the bean easily in the joor script. Show Claus Ibsen added a comment - 20/Oct/20 11:01 It would be good to allow to inject a bean as singleton scope and do this once (static) as then its really faster and we can use the bean easily in the joor script. Hide Permalink Claus Ibsen added a comment - 20/Oct/20 11:02 So you can do <joor>#bean:foo.callMe(body)</joor> which will invoke the callMe method on the foo bean with the body as input. Show Claus Ibsen added a comment - 20/Oct/20 11:02 So you can do <joor>#bean:foo.callMe(body)</joor> which will invoke the callMe method on the foo bean with the body as input.
CAMEL-15712,Claus Ibsen,2020-10-20T10:11:45+0000,1603174305， where 1603174305 is the epoch,We can optimize to avoid passing in object[] array with parameters when those parameters are not configured (they are just default values).,Hide Permalink Claus Ibsen added a comment - 20/Oct/20 10:11 As this is during init time then its not really a problem. Show Claus Ibsen added a comment - 20/Oct/20 10:11 As this is during init time then its not really a problem.
CAMEL-15711,Zoran Regvart,2020-10-20T11:10:31+0000,1603177831， where 1603177831 is the epoch,We seem to be including pages from Camel Quarkus that do not exist in the EIP documentation. We should not be including those， EIPs documentation resides solely in the main Camel repository.,Hide Permalink Zoran Regvart added a comment - 20/Oct/20 11:10 Manually removed the includes， as it seems they were manually added. Show Zoran Regvart added a comment - 20/Oct/20 11:10 Manually removed the includes， as it seems they were manually added.
CAMEL-15710,Unassigned,2020-10-20T07:14:39+0000,1603163679， where 1603163679 is the epoch,OpenTracingTracer does not activate the span it creates in onExchangeBegin (i.e. does not invoke tracer.activateSpan). Whenever there is processor invoked down the route， and this processor code is instrumented for OpenTracing (for instance， JDBC calls via opentracing-contrib/java-spring-cloud)， the newly created spans are not aware about a trace being active and start a new trace. This leads to all such spans being detached from the route trace. It is a major issue for Camel routes observability via OpenTracing.,Hide Permalink Andrea Cosentino added a comment - 20/Oct/20 07:14 Can you please check with 3.4.4 first? Also can you try with 3.5.0 and the upcoming 3.6.0? Thanks. Show Andrea Cosentino added a comment - 20/Oct/20 07:14 Can you please check with 3.4.4 first? Also can you try with 3.5.0 and the upcoming 3.6.0? Thanks. Hide Permalink Claus Ibsen added a comment - 20/Oct/20 07:27 And after trying with newer versions， are you able to put together a reproducer / sample app / or provide an attempted fix as a PR for review， that would be great thanks Show Claus Ibsen added a comment - 20/Oct/20 07:27 And after trying with newer versions， are you able to put together a reproducer / sample app / or provide an attempted fix as a PR for review， that would be great thanks Hide Permalink Bogdan Ilchyshyn added a comment - 20/Oct/20 10:14 I have checked it on 3.4.4 and 3.5.0， with the same result. Cannot test on 3.6.0 as it is not released yet. I will try to reproduce the problem with an integration test. Show Bogdan Ilchyshyn added a comment - 20/Oct/20 10:14 I have checked it on 3.4.4 and 3.5.0， with the same result. Cannot test on 3.6.0 as it is not released yet. I will try to reproduce the problem with an integration test. Hide Permalink Bogdan Ilchyshyn added a comment - 22/Oct/20 09:05 https://github.com/apache/camel/pull/4490 is created to provide a reproducing test and a fix suggestion. Show Bogdan Ilchyshyn added a comment - 22/Oct/20 09:05 https://github.com/apache/camel/pull/4490 is created to provide a reproducing test and a fix suggestion. Hide Permalink Claus Ibsen added a comment - 23/Oct/20 07:14 Thanks for reporting and the PRs Show Claus Ibsen added a comment - 23/Oct/20 07:14 Thanks for reporting and the PRs
CAMEL-15709,Unassigned,2020-10-20T09:32:30+0000,1603171950， where 1603171950 is the epoch,A producer for azure log analytics for forwarding the logs， similar to what we have for splunk HEC,Hide Permalink Claus Ibsen added a comment - 20/Oct/20 09:32 Anyone is welcome to work on this https://camel.apache.org/manual/latest/contributing.html Show Claus Ibsen added a comment - 20/Oct/20 09:32 Anyone is welcome to work on this https://camel.apache.org/manual/latest/contributing.html Hide Permalink Tibin Lukose added a comment - 20/Oct/20 10:02 Yes， i will contribute as my first commit to amazing camel project Show Tibin Lukose added a comment - 20/Oct/20 10:02 Yes， i will contribute as my first commit to amazing camel project
CAMEL-15708,Claus Ibsen,2020-10-20T09:29:16+0000,1603171756， where 1603171756 is the epoch,"LoopDoWhile" with "delay" in the body of the loop does not see the "end" and calls steps after the "end" during each iteration.How to reproduce: In the test of org.apache.camel.processor.LoopDoWhileTest add "delay" into the route configuration@Override protected RouteBuilder createRouteBuilder() throws Exception { return new RouteBuilder() { @Override public void configure() throws Exception { from("direct:simple").loopDoWhile(simple("${body.length} <= 5")) .to("mock:loop") .transform(body().append("A")) .delay(1000).asyncDelayed() .end().to("mock:result"); from("direct:functional").loopDoWhile().body(String.class， b -> b.length() <= 5) .delay(1000).syncDelayed() .to("mock:loop").transform() .body(String.class， b -> b += "A").end() .to("mock:result"); } }; }After that both tests will falljava.lang.AssertionError: mock://result Body of message: 0. Expected: <AAAAAA> but was: <AA>Expected :<AAAAAA>Actual :<AA><Click to see difference>The syncDelayed or asyncDelayed options does not affect the result.,Hide Permalink Claus Ibsen added a comment - 20/Oct/20 09:29 The delay is a bit special as it has its own block， so you need to have an extra end to end the delay， so the mock:result can be on the outer side. .delay(1000).asyncDelayed().end() Show Claus Ibsen added a comment - 20/Oct/20 09:29 The delay is a bit special as it has its own block， so you need to have an extra end to end the delay， so the mock:result can be on the outer side. .delay(1000).asyncDelayed().end()
CAMEL-15707,Claus Ibsen,2020-10-19T14:38:01+0000,1603103881， where 1603103881 is the epoch,Lets add a little example using camel-coor. We can do a spring xml file， or routes xml file and camel main， and therefore show mostly just configuration， and then use joor langauge for a bit of java code.,There are no comments yet on this issue.
CAMEL-15706,Unassigned,2020-10-19T14:40:59+0000,1603104059， where 1603104059 is the epoch,The UpdateReadmeMojo fails with NPE when executed outside the camel tree， as example when running for the camel-k specific components.This is because there's no check on the presence of the camel-core directory here https://github.com/apache/camel/blob/master/tooling/maven/camel-package-maven-plugin/src/main/java/org/apache/camel/maven/packaging/UpdateReadmeMojo.java#L207,Hide Permalink Claus Ibsen added a comment - 19/Oct/20 14:40 This can be reproduced in camel-k-runtime， by building its components Show Claus Ibsen added a comment - 19/Oct/20 14:40 This can be reproduced in camel-k-runtime， by building its components
CAMEL-15705,Unassigned,2020-10-20T09:32:49+0000,1603171969， where 1603171969 is the epoch,Start karaf 4.2.9 OSGi container， execute:karaf@root()> feature:repo-add camel 2.25.2karaf@root()> feature:install camel-chronicleCaused by: java.io.IOException: Error resolving artifact org.apache.servicemix.bundles:org.apache.servicemix.bundles.xstream-java8:jar:1.4.11.1_1: [Could not find artifact org.apache.servicemix.bundles:org.apache.servicemix.bundles.xstream-java8:jar:1.4.11.1_1 in central (https://repo1.maven.org/maven2/)]The bundle "xstream-java8" has to be corrected to "xstream".,Hide Permalink Claus Ibsen added a comment - 20/Oct/20 09:32 Can you provide a PR for this Show Claus Ibsen added a comment - 20/Oct/20 09:32 Can you provide a PR for this Hide Permalink Xilai Dai added a comment - 20/Oct/20 14:52 PR Created: https://github.com/apache/camel/pull/4485 Show Xilai Dai added a comment - 20/Oct/20 14:52 PR Created: https://github.com/apache/camel/pull/4485
CAMEL-15704,Claus Ibsen,2020-11-21T10:28:46+0000,1605936526， where 1605936526 is the epoch,Lets look at if we can provide an alternative to simple language that gets compiled during initialization of Camel. However for compilation then the csimple would need to have type information when using OGNL method calls as simple is dynamic and uses duck typing.The camel-joor should be more focused on pure Java code script and not a new simple language. jOOR also have some limitations such as cant run with fat-jar style for Spring Boot. Also it wont work on native compiled and it uses a reflective method call to call the joor script.For csimple we can look at byte buddy java assist scan source code via a maven plugin and detect simple language (we do this for the camel-route-parser) and then source code generate in src/generated which then gets compiled with the regular compiler. And then those code can be loaded the same way we do with configurers etc which means no reflection.,Hide Permalink Claus Ibsen added a comment - 21/Nov/20 10:28 - edited TODO: maven plugin to discover csimple languages in java and xml DONE TODO: csimple parser to generate source code DONE TODO: csimple source code generator for binary functions DONE TODO: csimple-joor to do bootstrap compile (no need for maven plugin) DONE TODO: camel-csimple.properties for general configuration and common imports and alias DONE TODO: either use or own basic parser and add some of the same functions and features as simple language REJECTED TODO ... or make SPI hooks into camel-simple parser and use its parser and then from the AST generate source code (requires the simple parser to be decoupled from camel context api) DONE TODO: prototype DONE TODO: documentation DONE TODO: example DONE TODO: spring boot starter DONE Show Claus Ibsen added a comment - 21/Nov/20 10:28 - edited TODO: maven plugin to discover csimple languages in java and xml DONE TODO: csimple parser to generate source code DONE TODO: csimple source code generator for binary functions DONE TODO: csimple-joor to do bootstrap compile (no need for maven plugin) DONE TODO: camel-csimple.properties for general configuration and common imports and alias DONE TODO: either use or own basic parser and add some of the same functions and features as simple language REJECTED TODO ... or make SPI hooks into camel-simple parser and use its parser and then from the AST generate source code (requires the simple parser to be decoupled from camel context api) DONE TODO: prototype DONE TODO: documentation DONE TODO: example DONE TODO: spring boot starter DONE
CAMEL-15703,Unassigned,2020-10-18T08:30:39+0000,1602995439， where 1602995439 is the epoch,I wonder if we should add methods to Exchange and Message that uses java.util.Option as return value.Optional getOptionalProperty(String name)Optional<T> getOptionalProperty(String name， Class<T> type)And ditto for Message with its header and body (although a null body is much more rare),There are no comments yet on this issue.
CAMEL-15702,Andrea Cosentino,2020-10-16T15:53:55+0000,1602849235， where 1602849235 is the epoch,The docs generation in Karaf and probably in Spring Boot too， point to the latest docs for components/dataformats etc. We should avoid this. I fixed the situation on karaf， need to double check on SB,There are no comments yet on this issue.
CAMEL-15701,Andrea Cosentino,2020-10-16T14:27:52+0000,1602844072， where 1602844072 is the epoch,,There are no comments yet on this issue.
CAMEL-15700,Unassigned,2020-12-06T15:52:57+0000,1607251977， where 1607251977 is the epoch,Lets try to have a Karaf feature， this is a best effort activity,Hide Permalink Claus Ibsen added a comment - Yesterday Its going to be a pain as daffodil is not osgi and its a bunch of JARs and scala Show Claus Ibsen added a comment - Yesterday Its going to be a pain as daffodil is not osgi and its a bunch of JARs and scala
CAMEL-15699,Andrea Cosentino,2020-10-16T14:26:54+0000,1602844014， where 1602844014 is the epoch,,There are no comments yet on this issue.
CAMEL-15698,Andrea Cosentino,2020-10-16T14:26:24+0000,1602843984， where 1602843984 is the epoch,,There are no comments yet on this issue.
CAMEL-15697,Claus Ibsen,2020-10-17T08:42:15+0000,1602909735， where 1602909735 is the epoch,jOOR allows to do runtime compilation to java with some limitations. But this can benefit a scripting language in the Camel DSL where we do limited and basic java code with the camel exchange/message etc.This can then be used as a prototype for doing a compiled simple language. However for that we would also like to discover the simple expressions during route source scanning， and make it part of the regular java compiler so its pre compiled. But a first step is to use runtime compile via the javac compiler (requires to be in the JVM).And Java 8 is not supported.,Hide Permalink Claus Ibsen added a comment - 17/Oct/20 08:42 jOOR improvement request https://github.com/jOOQ/jOOR/issues/109 Show Claus Ibsen added a comment - 17/Oct/20 08:42 jOOR improvement request https://github.com/jOOQ/jOOR/issues/109 Hide Permalink Claus Ibsen added a comment - 17/Oct/20 15:45 - edited TODO: Configuration of alias and auto imports which can be done in a seperate file on the classpath like came-joor.properties DONE TODO: Output compile error with line numbers and error point to the code location that failed DONE TODO: Capture time spend compiling and report in logs and when stopping DONE TODO: Default alias for some convenience of getting headers and exchange properties DONE TODO: Maybe convenience for shorthand getter style or even the null safe operator. TODO: Maybe add java.util.Optional API to Exchange and Message for getHeader / getProperty ADDED LOCALLY TODO: More documentation and also use var style as its Java 11 onwards. DONE TODO: jmh tests DONE Show Claus Ibsen added a comment - 17/Oct/20 15:45 - edited TODO: Configuration of alias and auto imports which can be done in a seperate file on the classpath like came-joor.properties DONE TODO: Output compile error with line numbers and error point to the code location that failed DONE TODO: Capture time spend compiling and report in logs and when stopping DONE TODO: Default alias for some convenience of getting headers and exchange properties DONE TODO: Maybe convenience for shorthand getter style or even the null safe operator. TODO: Maybe add java.util.Optional API to Exchange and Message for getHeader / getProperty ADDED LOCALLY TODO: More documentation and also use var style as its Java 11 onwards. DONE TODO: jmh tests DONE Hide Permalink Claus Ibsen added a comment - 18/Oct/20 08:08 Benchmark Mode Cnt Score Error Units JoorTest.joorPredicate thrpt 2 0，081 ops/us JoorTest.simplePredicate thrpt 2 ≈ 10⁻³ ops/us JoorTest.joorPredicate avgt 2 24，033 us/op JoorTest.simplePredicate avgt 2 5447，384 us/op JoorTest.joorPredicate sample 800990 25，099 ± 0，256 us/op JoorTest.joorPredicate:joorPredicate·p0.00 sample 22，688 us/op JoorTest.joorPredicate:joorPredicate·p0.50 sample 23，232 us/op JoorTest.joorPredicate:joorPredicate·p0.90 sample 24，320 us/op JoorTest.joorPredicate:joorPredicate·p0.95 sample 28，576 us/op JoorTest.joorPredicate:joorPredicate·p0.99 sample 50，880 us/op JoorTest.joorPredicate:joorPredicate·p0.999 sample 96，769 us/op JoorTest.joorPredicate:joorPredicate·p0.9999 sample 799，338 us/op JoorTest.joorPredicate:joorPredicate·p1.00 sample 18186，240 us/op JoorTest.simplePredicate sample 7473 5351，417 ± 48，436 us/op JoorTest.simplePredicate:simplePredicate·p0.00 sample 4423，680 us/op JoorTest.simplePredicate:simplePredicate·p0.50 sample 5111，808 us/op JoorTest.simplePredicate:simplePredicate·p0.90 sample 5714，739 us/op JoorTest.simplePredicate:simplePredicate·p0.95 sample 6064，538 us/op JoorTest.simplePredicate:simplePredicate·p0.99 sample 9408，676 us/op JoorTest.simplePredicate:simplePredicate·p0.999 sample 27357，282 us/op JoorTest.simplePredicate:simplePredicate·p0.9999 sample 34668，544 us/op JoorTest.simplePredicate:simplePredicate·p1.00 sample 34668，544 us/op JoorTest.joorPredicate ss 2 3547，848 us/op JoorTest.simplePredicate ss 2 106664，822 us/op [INFO] Tests run: 1， Failures: 0， Errors: 0， Skipped: 0， Time elapsed: 171.399 s - in org.apache.camel.itest.jmh.JoorTest Show Claus Ibsen added a comment - 18/Oct/20 08:08 Benchmark Mode Cnt Score Error Units JoorTest.joorPredicate thrpt 2 0，081 ops/us JoorTest.simplePredicate thrpt 2 ≈ 10⁻³ ops/us JoorTest.joorPredicate avgt 2 24，033 us/op JoorTest.simplePredicate avgt 2 5447，384 us/op JoorTest.joorPredicate sample 800990 25，099 ± 0，256 us/op JoorTest.joorPredicate:joorPredicate·p0.00 sample 22，688 us/op JoorTest.joorPredicate:joorPredicate·p0.50 sample 23，232 us/op JoorTest.joorPredicate:joorPredicate·p0.90 sample 24，320 us/op JoorTest.joorPredicate:joorPredicate·p0.95 sample 28，576 us/op JoorTest.joorPredicate:joorPredicate·p0.99 sample 50，880 us/op JoorTest.joorPredicate:joorPredicate·p0.999 sample 96，769 us/op JoorTest.joorPredicate:joorPredicate·p0.9999 sample 799，338 us/op JoorTest.joorPredicate:joorPredicate·p1.00 sample 18186，240 us/op JoorTest.simplePredicate sample 7473 5351，417 ± 48，436 us/op JoorTest.simplePredicate:simplePredicate·p0.00 sample 4423，680 us/op JoorTest.simplePredicate:simplePredicate·p0.50 sample 5111，808 us/op JoorTest.simplePredicate:simplePredicate·p0.90 sample 5714，739 us/op JoorTest.simplePredicate:simplePredicate·p0.95 sample 6064，538 us/op JoorTest.simplePredicate:simplePredicate·p0.99 sample 9408，676 us/op JoorTest.simplePredicate:simplePredicate·p0.999 sample 27357，282 us/op JoorTest.simplePredicate:simplePredicate·p0.9999 sample 34668，544 us/op JoorTest.simplePredicate:simplePredicate·p1.00 sample 34668，544 us/op JoorTest.joorPredicate ss 2 3547，848 us/op JoorTest.simplePredicate ss 2 106664，822 us/op [INFO] Tests run: 1， Failures: 0， Errors: 0， Skipped: 0， Time elapsed: 171.399 s - in org.apache.camel.itest.jmh.JoorTest Hide Permalink Claus Ibsen added a comment - 19/Oct/20 14:36 Let's wait for null safe operator， as its more a compiled single language feature. Show Claus Ibsen added a comment - 19/Oct/20 14:36 Let's wait for null safe operator， as its more a compiled single language feature.
CAMEL-15696,Unassigned,2020-10-16T08:52:15+0000,1602823935， where 1602823935 is the epoch,Steps to reproduce:git checkout camel-3.5.0cd components/sparkexport CAMEL_SPARK_HIVE_TESTS=truemvn clean test...[ERROR] org.apache.camel.component.spark.SparkProducerTest.shouldExecuteConditionalFrameCount Time elapsed: 0.012 s <<< ERROR!java.util.ServiceConfigurationError: org.apache.spark.sql.sources.DataSourceRegister: Provider org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat could not be instantiated at java.util.ServiceLoader.fail(ServiceLoader.java:232) at java.util.ServiceLoader.access$100(ServiceLoader.java:185) at java.util.ServiceLoader$LazyIterator.nextService(ServiceLoader.java:384) at java.util.ServiceLoader$LazyIterator.next(ServiceLoader.java:404) at java.util.ServiceLoader$1.next(ServiceLoader.java:480) at scala.collection.convert.Wrappers$JIteratorWrapper.next(Wrappers.scala:43) at scala.collection.Iterator$class.foreach(Iterator.scala:742) at scala.collection.AbstractIterator.foreach(Iterator.scala:1194) at scala.collection.IterableLike$class.foreach(IterableLike.scala:72) at scala.collection.AbstractIterable.foreach(Iterable.scala:54) at scala.collection.TraversableLike$class.filterImpl(TraversableLike.scala:258) at scala.collection.TraversableLike$class.filter(TraversableLike.scala:270) at scala.collection.AbstractTraversable.filter(Traversable.scala:104) at org.apache.spark.sql.execution.datasources.DataSource$.lookupDataSource(DataSource.scala:630) at org.apache.spark.sql.DataFrameReader.load(DataFrameReader.scala:194) at org.apache.spark.sql.DataFrameReader.json(DataFrameReader.scala:392) at org.apache.spark.sql.DataFrameReader.json(DataFrameReader.scala:326) at org.apache.camel.component.spark.SparkProducerTest.createCamelRegistry(SparkProducerTest.java:80) at org.apache.camel.test.junit5.CamelTestSupport.createCamelContext(CamelTestSupport.java:730) at org.apache.camel.test.junit5.CamelTestSupport.doSetUp(CamelTestSupport.java:412) at org.apache.camel.test.junit5.CamelTestSupport.setUp(CamelTestSupport.java:367) at sun.reflect.GeneratedMethodAccessor2.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:686) at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60) at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131) at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149) at org.junit.jupiter.engine.extension.TimeoutExtension.interceptLifecycleMethod(TimeoutExtension.java:126) at org.junit.jupiter.engine.extension.TimeoutExtension.interceptBeforeEachMethod(TimeoutExtension.java:76) at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115) at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105) at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106) at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64) at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45) at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37) at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104) at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98) at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeMethodInExtensionContext(ClassBasedTestDescriptor.java:481) at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$synthesizeBeforeEachMethodAdapter$18(ClassBasedTestDescriptor.java:466) at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachMethods$2(TestMethodTestDescriptor.java:169) at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$5(TestMethodTestDescriptor.java:197) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:197) at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachMethods(TestMethodTestDescriptor.java:166) at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:71) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:135) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125) at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122) at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80) at java.util.ArrayList.forEach(ArrayList.java:1259) at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125) at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122) at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80) at java.util.ArrayList.forEach(ArrayList.java:1259) at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125) at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122) at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80) at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32) at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51) at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:248) at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$5(DefaultLauncher.java:211) at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:226) at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:199) at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:132) at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:165) at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:127) at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:377) at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:138) at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:465) at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:451)Caused by: java.lang.NoClassDefFoundError: org/slf4j/bridge/SLF4JBridgeHandler at org.apache.spark.sql.execution.datasources.parquet.ParquetFileFormat.<init>(ParquetFileFormat.scala:65) at sun.reflect.GeneratedConstructorAccessor28.newInstance(Unknown Source) at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) at java.lang.reflect.Constructor.newInstance(Constructor.java:423) at java.lang.Class.newInstance(Class.java:442) at java.util.ServiceLoader$LazyIterator.nextService(ServiceLoader.java:380) ... 86 moreCaused by: java.lang.ClassNotFoundException: org.slf4j.bridge.SLF4JBridgeHandler at java.net.URLClassLoader.findClass(URLClassLoader.java:382) at java.lang.ClassLoader.loadClass(ClassLoader.java:418) at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352) at java.lang.ClassLoader.loadClass(ClassLoader.java:351) ... 92 more,Hide Permalink Peter Palaga added a comment - 16/Oct/20 08:52 Oh， forgot to mention `export CAMEL_SPARK_HIVE_TESTS=true`. Added to the steps to reproduce now. Show Peter Palaga added a comment - 16/Oct/20 08:52 Oh， forgot to mention `export CAMEL_SPARK_HIVE_TESTS=true`. Added to the steps to reproduce now. Hide Permalink Peter Palaga added a comment - 26/Oct/20 11:10 Blocks https://github.com/apache/camel-quarkus/issues/1956 Show Peter Palaga added a comment - 26/Oct/20 11:10 Blocks https://github.com/apache/camel-quarkus/issues/1956
CAMEL-15695,Andrea Cosentino,2020-10-15T17:11:33+0000,1602767493， where 1602767493 is the epoch,We should move camel-archetype-blueprint to camel-karaf and camel-archetype-spring-boot to camel-spring-boot so they are not in the main repo anymore. It causes pain for release as its a chicken and egg problem.Also its better that the archetype is maintained in their own repo instead of core camel.,There are no comments yet on this issue.
CAMEL-15694,Claus Ibsen,2020-10-15T11:54:08+0000,1602748448， where 1602748448 is the epoch,Just a thought. The event notifier is optimized if not in use. But some runtimes like camel-main / camel-quarkus / camel-spring-boot etc uses an event notifier for some listeners on startup / shutdown etc. Not really for exchange events.So we can potentially optimized internally in camel go have 2 sets for events， so if you dont need exchange events then that is empty and we can optimize for that.,Hide Permalink Claus Ibsen added a comment - 15/Oct/20 11:54 We were already prepared for this. So introduced a new SimpleEventNotifierSupport that can be used as base class for events that dont care about exchanges， then camel-core can optimize for that. Show Claus Ibsen added a comment - 15/Oct/20 11:54 We were already prepared for this. So introduced a new SimpleEventNotifierSupport that can be used as base class for events that dont care about exchanges， then camel-core can optimize for that.
CAMEL-15693,Andrea Cosentino,2020-10-15T10:52:53+0000,1602744773， where 1602744773 is the epoch,Actually we have an enum as header. To avoid breaking existing users， I'll add an header with just the plain event type. This would be nice for the ckc related connector.,Hide Permalink Claus Ibsen added a comment - 15/Oct/20 10:52 Oh I think its fine to change the header to use the enum string name， instead of having two. Just add a little note in the upgrade guide. Show Claus Ibsen added a comment - 15/Oct/20 10:52 Oh I think its fine to change the header to use the enum string name， instead of having two. Just add a little note in the upgrade guide. Hide Permalink Jan Bednar added a comment - 15/Oct/20 10:57 Agree about changing that to String with very little note in migration guide. The impact on user should be minimal， as type conversion between String and Enum and vice versa should kick in most cases. Show Jan Bednar added a comment - 15/Oct/20 10:57 Agree about changing that to String with very little note in migration guide. The impact on user should be minimal， as type conversion between String and Enum and vice versa should kick in most cases.
CAMEL-15692,Unassigned,2020-10-16T04:52:00+0000,1602809520， where 1602809520 is the epoch,,Hide Permalink Claus Ibsen added a comment - 16/Oct/20 04:52 Thanks for the work on adding this. Show Claus Ibsen added a comment - 16/Oct/20 04:52 Thanks for the work on adding this.
CAMEL-15691,Unassigned,2020-10-15T08:57:19+0000,1602737839， where 1602737839 is the epoch,,There are no comments yet on this issue.
CAMEL-15690,Claus Ibsen,2020-10-15T09:04:02+0000,1602738242， where 1602738242 is the epoch,It does a lookup of the consumer to handover the exchange on each process. We can optimize this to do this once and reuse same consumer.And then if the consumer is stopped/removed then we need a event listener to tell the producer that the consumer is gone and it needs to clear the state.This avoids the synchronized lookup on each process,Hide Permalink Claus Ibsen added a comment - 15/Oct/20 09:04 Ideally we could wire together the consumer and producers during init phase but the consumers are only created/init/started when the routes are started. So this may require for us to move creating the route consumer to an earlier phase so it can be part of built time optimizations (in general). And then we can still defer its init/start phase to when the route is actually starting up. As a route may be set to autostartup = false， and therefore it may not make sense to do init phase if the route is never started. Show Claus Ibsen added a comment - 15/Oct/20 09:04 Ideally we could wire together the consumer and producers during init phase but the consumers are only created/init/started when the routes are started. So this may require for us to move creating the route consumer to an earlier phase so it can be part of built time optimizations (in general). And then we can still defer its init/start phase to when the route is actually starting up. As a route may be set to autostartup = false， and therefore it may not make sense to do init phase if the route is never started. Hide Permalink Claus Ibsen added a comment - 15/Oct/20 09:04 The consumer is created here https://github.com/apache/camel/blob/4ea9e6c357371682b855d2d79655b41120331b7a/core/camel-base/src/main/java/org/apache/camel/impl/engine/DefaultRoute.java#L562 Show Claus Ibsen added a comment - 15/Oct/20 09:04 The consumer is created here https://github.com/apache/camel/blob/4ea9e6c357371682b855d2d79655b41120331b7a/core/camel-base/src/main/java/org/apache/camel/impl/engine/DefaultRoute.java#L562 Hide Permalink Claus Ibsen added a comment - 15/Oct/20 12:22 Optimize to move state from endpoint to component which makes it easier to optimize wiring between producer and consumers. DONE Show Claus Ibsen added a comment - 15/Oct/20 12:22 Optimize to move state from endpoint to component which makes it easier to optimize wiring between producer and consumers. DONE
CAMEL-15689,Tomohisa Igarashi,2020-10-15T14:45:34+0000,1602758734， where 1602758734 is the epoch,AtlasMap is a data mapping solution with interactive web based user interface for design time. At runtime it has a camel-atlasmap component to process mappings created from GUI as a part of Camel route.https://www.atlasmap.io/camel-atlasmap component has been maintained in AtlasMap project until it is stabilized， and we think now is the time to migrate into Apache Camel repository.,Hide Permalink Tomohisa Igarashi added a comment - 15/Oct/20 14:45 Merged into master - https://github.com/apache/camel/commit/c09aedb78c5f34e80d0d0f4e2ff846e53516fc69 Show Tomohisa Igarashi added a comment - 15/Oct/20 14:45 Merged into master - https://github.com/apache/camel/commit/c09aedb78c5f34e80d0d0f4e2ff846e53516fc69 Hide Permalink Tomohisa Igarashi added a comment - 15/Oct/20 14:50 Note: scheme has been changed from atlas to atlasmap to avoid future conflict. Be aware when migrating from the one delivered from AtlasMap repo. Show Tomohisa Igarashi added a comment - 15/Oct/20 14:50 Note: scheme has been changed from atlas to atlasmap to avoid future conflict. Be aware when migrating from the one delivered from AtlasMap repo.
CAMEL-15688,Andrea Cosentino,2020-10-14T17:14:13+0000,1602681253， where 1602681253 is the epoch,Actually the configuration of the endpoint will fail if you don't specify the bucket into the URI， but you have the possibility of setting the bucket as endpoint parameter， so the endpoint instantation shouldn't fail. Probably it would make sense to avoid going in error in that harsh way,There are no comments yet on this issue.
CAMEL-15687,Unassigned,2020-10-14T15:22:27+0000,1602674547， where 1602674547 is the epoch,,There are no comments yet on this issue.
CAMEL-15686,Claus Ibsen,2020-10-14T08:16:49+0000,1602649009， where 1602649009 is the epoch,Injecting an EndpointProducerBuilder bean that uses a simple expression causes an exception.@Configurationpublic class MyTestRoute extends EndpointRouteBuilder { private static final String MY_TOPIC = "testTopic"; @Autowired private EndpointProducerBuilder myKafkaBean; @Override public void configure() { from(timer("myTimer").repeatCount(1)) .setBody(constant("THIS IS A TEST MESSAGE")) .setProperty("destination2"， constant(MY_TOPIC)) .to("direct:publish-to-kafka2") ; from("direct:publish-to-kafka2") .toD(myKafkaBean) ; from(kafka(MY_TOPIC)) .log("Received: ${body}") ; } @Bean public EndpointProducerBuilder myKafkaBean() { return kafka("${exchangeProperty.destination2}"); }}Exception from org.apache.kafka.clients.Metadata:Metadata response reported invalid topics [${exchangeProperty.destination}]I don't have to use the bean for the error to manifest， it's enough to @Autowire it. It does work for static endpoints: return kafka("myTopic"); // This works fine from an EndpointProducerBuilder beanAnd it does work for dynamic endpoints in URI form: return "kafka:${exchangeProperty.destination}"; // This works fine but you lose type safety Creating beans like this is useful for unit testing as they can be overridden to return mock/direct/whatever-is-useful， without first creating the original endpoint， which can significantly reduce execution time.,Hide Permalink Claus Ibsen added a comment - 14/Oct/20 08:16 Can you try with 3.5 or the 3.6 when its released. It works in an endpoint-dsl route builder. And although you are using bean inject then it may work there too. Show Claus Ibsen added a comment - 14/Oct/20 08:16 Can you try with 3.5 or the 3.6 when its released. It works in an endpoint-dsl route builder. And although you are using bean inject then it may work there too. Hide Permalink Claus Ibsen added a comment - 14/Oct/20 08:19 btw can you post more code of how you use that builder as a client code. As 2nd thought the endpoint dsl is working due to using toD Show Claus Ibsen added a comment - 14/Oct/20 08:19 btw can you post more code of how you use that builder as a client code. As 2nd thought the endpoint dsl is working due to using toD Hide Permalink Franky Georg added a comment - 14/Oct/20 12:47 I've added an usage example in the description. I'm actually struggling to replicate this now - my example above is working perfectly at home with Camel 3.3， 3.4.4， and 3.5. I'll take another look at my failing code when I'm back in the office， but that won't be for a couple days. Show Franky Georg added a comment - 14/Oct/20 12:47 I've added an usage example in the description. I'm actually struggling to replicate this now - my example above is working perfectly at home with Camel 3.3， 3.4.4， and 3.5. I'll take another look at my failing code when I'm back in the office， but that won't be for a couple days. Hide Permalink Franky Georg added a comment - 21/Oct/20 01:50 - edited Updated description with a full test class. Using properties: camel.springboot.main-run-controller=true camel.component.kafka.brokers=localhost:9092 I get no errors in a clean project on 1st PC. In an existing project on 2nd PC: I get no errors in a clean project. The following occurs when adding the same code to my existing project: The 3 expected routes are created The message is sent to Kafka via 'testTopic' The message is received from Kafka via 'testTopic' Camel creates an unexpected new route Route: route7 started and consuming from: kafka://${exchangeProperty.destination2} Camel tries to create a new topic named '${exchangeProperty.destination}' and throws an error about it being an invalid topic name Clearly it's something to do with my existing project/environment. I'll continue trying to narrow it down， but to me it's looking more like a bug than an enhancement request at this point. Show Franky Georg added a comment - 21/Oct/20 01:50 - edited Updated description with a full test class. Using properties: camel.springboot.main-run-controller=true camel.component.kafka.brokers=localhost:9092 I get no errors in a clean project on 1st PC. In an existing project on 2nd PC: I get no errors in a clean project. The following occurs when adding the same code to my existing project: The 3 expected routes are created The message is sent to Kafka via 'testTopic' The message is received from Kafka via 'testTopic' Camel creates an unexpected new route Route: route7 started and consuming from: kafka://${exchangeProperty.destination2 } Camel tries to create a new topic named '${exchangeProperty.destination}' and throws an error about it being an invalid topic name Clearly it's something to do with my existing project/environment. I'll continue trying to narrow it down， but to me it's looking more like a bug than an enhancement request at this point. Hide Permalink Franky Georg added a comment - 22/Oct/20 00:17 So somehow Camel is starting the KafkaEndpointBuilder as its own route. But only in my project， which I can't share. In case there's some conflict， I've tried: removing any use of CamelContext removing any other toD Show Franky Georg added a comment - 22/Oct/20 00:17 So somehow Camel is starting the KafkaEndpointBuilder as its own route. But only in my project， which I can't share. In case there's some conflict， I've tried: removing any use of CamelContext removing any other toD
CAMEL-15685,Unassigned,2020-10-14T07:30:34+0000,1602646234， where 1602646234 is the epoch,it is not clear from the component documentation how to use https4 when in fact that's the easieast way to connect to an HTTPS service without even needing to provide your own packaged version of HTTP4,Hide Permalink Claus Ibsen added a comment - 14/Oct/20 07:30 See here how to get help https://camel.apache.org/community/support/ Dont reopen tickets when its closed by the Camel team Show Claus Ibsen added a comment - 14/Oct/20 07:30 See here how to get help https://camel.apache.org/community/support/ Dont reopen tickets when its closed by the Camel team
CAMEL-15684,Andrea Cosentino,2020-10-13T17:50:14+0000,1602597014， where 1602597014 is the epoch,HipChat was discontinued in February 2019.,There are no comments yet on this issue.
CAMEL-15683,Unassigned,2020-10-13T15:06:25+0000,1602587185， where 1602587185 is the epoch,It would be good to have a camel component for being able to send cellular text messages (SMS and MMS) via the mm7 protocol.This protocol is SOAP based (yeah old world) send to mm7 server via HTTP.,There are no comments yet on this issue.
CAMEL-15682,Claus Ibsen,2020-10-13T13:34:45+0000,1602581685， where 1602581685 is the epoch,Hello，We've recently had an outage in one of our applications built using Apache Camel and specifically using a JDBC-based aggregation on one route.After an unclean exit， the application continued to fail to start up.The only way for us to recover from this situation was to erase the contents of the aggregate repository and recover the lost data manually. Until we executed that， the application was completely offline (this error resulted in a failure that exited the whole JVM)The error we observed during startup:org.apache.camel.FailedToStartRouteException: Failed to start route event.aggregator because of null at org.apache.camel.impl.engine.RouteService.warmUp(RouteService.java:125) at org.apache.camel.impl.engine.InternalRouteStartupManager.doWarmUpRoutes(InternalRouteStartupManager.java:263) at org.apache.camel.impl.engine.InternalRouteStartupManager.safelyStartRouteServices(InternalRouteStartupManager.java:156) at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartOrResumeRoutes(InternalRouteStartupManager.java:114) at org.apache.camel.impl.engine.AbstractCamelContext.doStartCamel(AbstractCamelContext.java:2809) at org.apache.camel.impl.engine.AbstractCamelContext.doStartContext(AbstractCamelContext.java:2657) at org.apache.camel.impl.engine.AbstractCamelContext.doStart(AbstractCamelContext.java:2620) at org.apache.camel.spring.boot.SpringBootCamelContext.doStart(SpringBootCamelContext.java:43) at org.apache.camel.support.service.BaseService.start(BaseService.java:115) at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2452) at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:121) at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:157) at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172) at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165) at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139) at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:404) at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:361) at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:898) at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:554) at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143) at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758) at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750) at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) at org.springframework.boot.SpringApplication.run(SpringApplication.java:1237) at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226) at com.winnowsolutions.vision.annotation.app.MainApplication.main(MainApplication.java:25) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.base/java.lang.reflect.Method.invoke(Method.java:566) at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49) at org.springframework.boot.loader.Launcher.launch(Launcher.java:109) at org.springframework.boot.loader.Launcher.launch(Launcher.java:58) at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:88)Caused by: org.apache.camel.RuntimeCamelException: java.lang.ClassCastException: class java.lang.Integer cannot be cast to class java.lang.Long (java.lang.Integer and java.lang.Long are in module java.base of loader 'bootstrap') at org.apache.camel.RuntimeCamelException.wrapRuntimeCamelException(RuntimeCamelException.java:52) at org.apache.camel.support.ChildServiceSupport.start(ChildServiceSupport.java:67) at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:101) at org.apache.camel.processor.channel.DefaultChannel.doStart(DefaultChannel.java:143) at org.apache.camel.support.service.BaseService.start(BaseService.java:115) at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:87) at org.apache.camel.processor.Pipeline.doStart(Pipeline.java:154) at org.apache.camel.support.service.BaseService.start(BaseService.java:115) at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) at org.apache.camel.support.processor.DelegateAsyncProcessor.doStart(DelegateAsyncProcessor.java:78) at org.apache.camel.support.service.BaseService.start(BaseService.java:115) at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) at org.apache.camel.impl.engine.RouteService.startChildService(RouteService.java:334) at org.apache.camel.impl.engine.RouteService.doWarmUp(RouteService.java:184) at org.apache.camel.impl.engine.RouteService.warmUp(RouteService.java:123) ... 34 common frames omittedCaused by: java.lang.ClassCastException: class java.lang.Integer cannot be cast to class java.lang.Long (java.lang.Integer and java.lang.Long are in module java.base of loader 'bootstrap') at org.apache.camel.processor.aggregate.AggregateProcessor.restoreTimeoutMapFromAggregationRepository(AggregateProcessor.java:894) at org.apache.camel.processor.aggregate.AggregateProcessor.doStart(AggregateProcessor.java:1532) at org.apache.camel.support.service.BaseService.start(BaseService.java:115) at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:101) at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler.doStart(RedeliveryErrorHandler.java:1459) at org.apache.camel.support.ChildServiceSupport.start(ChildServiceSupport.java:60) ... 49 common frames omittedAfter some investigation we have identified that the error is sourced from the way Camel is defaulting certain values when recovering the aggregate contents from the repository; specifically:https://github.com/apache/camel/blob/camel-3.4.2/core/camel-base/src/main/java/org/apache/camel/processor/aggregate/AggregateProcessor.java#L894long timeout = exchange.hasProperties() ? exchange.getProperty(Exchange.AGGREGATED_TIMEOUT， 0， long.class) : 0;This code is problematic if the branch that gets executed is the one where the default 0 (Integer) value is attempted to be cast to the target long variable.Please correct the defaulting outlined in the code above so that it defaults with the correct (Long) type.,Hide Permalink Andrea Cosentino added a comment - 13/Oct/20 13:34 You're welcome to open a PR against master Show Andrea Cosentino added a comment - 13/Oct/20 13:34 You're welcome to open a PR against master
CAMEL-15681,Zineb BENDHIBA,2020-10-14T09:38:49+0000,1602653929， where 1602653929 is the epoch,Improve handling the datasource in the pgevent endpoint， so that it can take a java.sql Datasource and connection type， so that we can use a datasource coming from a specific platform， like quarkus for instance.,Hide Permalink Zineb BENDHIBA added a comment - 14/Oct/20 09:38 the first goal was to use a postresql datasource generated by postrgesql jdbc driver， and I've found that it wasn't compatible with pgjdbc-ng driver I close this JIRA Show Zineb BENDHIBA added a comment - 14/Oct/20 09:38 the first goal was to use a postresql datasource generated by postrgesql jdbc driver， and I've found that it wasn't compatible with pgjdbc-ng driver I close this JIRA
CAMEL-15680,Luigi De Masi,2020-10-13T12:34:30+0000,1602578070， where 1602578070 is the epoch,Add the possibility to filter the blobs to download in the download batch operation， using a regexp,There are no comments yet on this issue.
CAMEL-15679,Jiri Ondrusek,2020-10-13T14:47:35+0000,1602586055， where 1602586055 is the epoch,Current implementation of serialization is based on `org.fusesource.hawtbuf:hawtbuf` and java object serialization. It would be better to use Jackson instead. Here are some reasons: Serialization with Jackson is faster (see http://rick-hightower.blogspot.com/2014/04/which-is-faster-java-object.html) Camel-quarkus can not use java object serialization in native (see https://github.com/oracle/graal/issues/460) Current workaround uses Jackson instead.,Hide Permalink Claus Ibsen added a comment - 13/Oct/20 14:47 Yeah but binary data is harder to represent in json. So this would only work for payloads that are text based， or for binary then it would need to be represented as some kind of blob. But a pluggable serializer would be nice. And yeah its also good to get rid of hawtbuf as that project is EOL. Show Claus Ibsen added a comment - 13/Oct/20 14:47 Yeah but binary data is harder to represent in json. So this would only work for payloads that are text based， or for binary then it would need to be represented as some kind of blob. But a pluggable serializer would be nice. And yeah its also good to get rid of hawtbuf as that project is EOL. Hide Permalink Jiri Ondrusek added a comment - 15/Oct/20 11:07 Claus Ibsen I'm investigating possibilities for the solution. Would it be acceptable to change serialization mechanism completely? I see only one disadvantage， if user has already some data in db file， after upgrade， changed mechanism won't be able to deserialize data back. Is this scenario relevant? If so， current mechanism has to stay and only user can define to use another one. There are several ways of fixing this: it would be nice to use jackson to serialize all except payload. In case that payload is binary， it would be saved as is， in case of object， it would be serialized by Jackson with possible customization by allowing objectMapperCustomizer. (e.g. for the case that serialized object contains some binary parts) Use different mechanism which is working with quarkus as well (I haven't try any to be 100% sure， but there are some serializers like bson， msgpack， ...) From my POV it would be nice to try option 1 - to serialize all except payload as json and content save as binary or serialize into json. WDYT? Show Jiri Ondrusek added a comment - 15/Oct/20 11:07 Claus Ibsen I'm investigating possibilities for the solution. Would it be acceptable to change serialization mechanism completely? I see only one disadvantage， if user has already some data in db file， after upgrade， changed mechanism won't be able to deserialize data back. Is this scenario relevant? If so， current mechanism has to stay and only user can define to use another one. There are several ways of fixing this: it would be nice to use jackson to serialize all except payload. In case that payload is binary， it would be saved as is， in case of object， it would be serialized by Jackson with possible customization by allowing objectMapperCustomizer. (e.g. for the case that serialized object contains some binary parts) Use different mechanism which is working with quarkus as well (I haven't try any to be 100% sure， but there are some serializers like bson， msgpack， ...) From my POV it would be nice to try option 1 - to serialize all except payload as json and content save as binary or serialize into json. WDYT? Hide Permalink Claus Ibsen added a comment - 15/Oct/20 12:51 I think the old hawtbuf should be moved out to a camel-leveldb-legacy or something so users that may use that can keep using it as otherwise their binary data is gone. And then we deprecate it， so it gives time to migrate to the new serializer. But on the cloud platforms then there is maybe also better key/value stores than leveldb so its all a bit of legacy. Show Claus Ibsen added a comment - 15/Oct/20 12:51 I think the old hawtbuf should be moved out to a camel-leveldb-legacy or something so users that may use that can keep using it as otherwise their binary data is gone. And then we deprecate it， so it gives time to migrate to the new serializer. But on the cloud platforms then there is maybe also better key/value stores than leveldb so its all a bit of legacy. Hide Permalink Claus Ibsen added a comment - 21/Oct/20 18:26 We would need spring boot starter for the legacy component， and also karaf features to be updated Show Claus Ibsen added a comment - 21/Oct/20 18:26 We would need spring boot starter for the legacy component， and also karaf features to be updated
CAMEL-15678,Andrea Cosentino,2020-10-13T10:55:20+0000,1602572120， where 1602572120 is the epoch,Camel AWS2 S3 incorectly defines upload part content on multipart upload:org.apache.camel.component.aws2.s3.AWS2S3Producer:193for (int part = 1; filePosition < contentLength; part++) { ... ... String etag = getEndpoint().getS3Client().uploadPart(uploadRequest， RequestBody.fromFile(filePayload)).eTag(); ...} filePayload - is whole file to be uploaded. In case when file size is bigger than partSize (which by default is 25MB) - uploaded amount of content to S3 will be file.size * number_of_parts Fix: define RequsetBody from stream:InputStream inputStream = FileUtils.openInputStream(file);IOUtils.skip(inputStream， filePosition);completedParts.add( CompletedPart.builder() .partNumber(part) .eTag(amazonS3Client.uploadPart(uploadRequest， RequestBody.fromInputStream(inputStream， partSize)).eTag()) .build());,Hide Permalink Andrea Cosentino added a comment - 13/Oct/20 10:55 Can you create a github pull request? Thanks Show Andrea Cosentino added a comment - 13/Oct/20 10:55 Can you create a github pull request? Thanks Hide Permalink Andrea Cosentino added a comment - 13/Oct/20 10:58 Otherwise I'll work on this one soon. Show Andrea Cosentino added a comment - 13/Oct/20 10:58 Otherwise I'll work on this one soon. Hide Permalink Kiril Nugmanov added a comment - 13/Oct/20 11:46 Sure. Will provide in a couple of hours. Show Kiril Nugmanov added a comment - 13/Oct/20 11:46 Sure. Will provide in a couple of hours. Hide Permalink Andrea Cosentino added a comment - 13/Oct/20 11:49 Thanks， please have a look at the localstack and integration tests too Show Andrea Cosentino added a comment - 13/Oct/20 11:49 Thanks， please have a look at the localstack and integration tests too Hide Permalink Kiril Nugmanov added a comment - 13/Oct/20 12:59 https://github.com/apache/camel/pull/4433 Show Kiril Nugmanov added a comment - 13/Oct/20 12:59 https://github.com/apache/camel/pull/4433
CAMEL-15677,Andrea Cosentino,2020-10-13T10:28:23+0000,1602570503， where 1602570503 is the epoch,Since actually it makes sense to use an app for doing stuff in a workspace， some of options we provide are just misleading. Everything is now set in the app configuration and we need to use the bot oauth token to leverage the app. So username， icon_emoji etc. are not useful anymore. My proposal is to deprecate them in 3.6.0 and remove them in 3.7.0,There are no comments yet on this issue.
CAMEL-15676,Claus Ibsen,2020-10-13T14:45:42+0000,1602585942， where 1602585942 is the epoch,openapi-restdsl-generator and accordingly the camel-restdsl-openapi-plugin for maven generate problematic code/xml if there are multiple responses with the same content-type defined for a given path and operation.Example:..."responses": { "200": { "content": { "application/json": { ... } }， "description": "Updated pet." }， "201": { "content": { "application/json": { ... } }， "description": "Created pet." } }...will result in:<rest> <put consumes="application/json" produces="application/json，application/json" uri="/pet"> <param name="body" required="true" type="body"/> <to uri="direct:rest1"/> </put> </rest> The problematic part is the comma-separated list as the value of the produces-attribute， where application/json is listed twice. The Camel route will then， per default， return "application/json，application/json" as the content-type.This invalid content-type causes some problems in third-party tools and frameworks， for example the Citrus testing framework. Although a simple work-around for the example above is to explicitly set the content-type header in the Camel route， I think the current behavior could be easily improved by modifying org.apache.camel.generator.openapi.OperationVisitor to use a set instead of a list for emitting the operationLevelProduces.This would not fix cases， where there are multiple responses with different content-types， such as "application/json，text/xml". But I assume that they are a little bit less common nowadays (at least for us).I will follow-up with a pull-request.,Hide Permalink Claus Ibsen added a comment - 13/Oct/20 14:45 Thanks for reporting and the PR Show Claus Ibsen added a comment - 13/Oct/20 14:45 Thanks for reporting and the PR
CAMEL-15675,James Netherton,2020-10-12T14:38:13+0000,1602499093， where 1602499093 is the epoch,Relates to an issue raised over at the Camel Quarkus project:https://github.com/apache/camel-quarkus/issues/1894,There are no comments yet on this issue.
CAMEL-15674,Guillaume Nodet,2020-10-12T14:12:45+0000,1602497565， where 1602497565 is the epoch,,There are no comments yet on this issue.
CAMEL-15673,Claus Ibsen,2020-10-12T11:45:46+0000,1602488746， where 1602488746 is the epoch,It should be possible to refer to bean by the #type: prefix in all places of the endpoint-dsl. There are some components which does a bit of special handling (due to before property binding support was as powerful as today - it supports #type etc).For example camel-sql， you should be able to do SqlEndpointBuilderFactory.SqlEndpointBuilder builder = sql("SELECT * FROM FOO").dataSource("#type:javax.sql.DataSource");To grab the data source via the type class instead of knowing the bean id etc.,There are no comments yet on this issue.
CAMEL-15672,Andrea Cosentino,2020-10-12T09:53:04+0000,1602481984， where 1602481984 is the epoch,,There are no comments yet on this issue.
CAMEL-15671,Claus Ibsen,2020-10-10T09:37:02.760Z,1602308222.76， where 1602308222.76 is the epoch,We are using the http://camel.apache.org/schema/spring namespace to configure a Camel context from spring.It seems that CamelNamespaceHandler.CamelContextBeanDefinitionParser#doParse unconditionally registers a CamelBeanPostProcessor into the underlying Spring ApplicationContext: there is no guard or configuration option to prevent the execution of CamelNamespaceHandler#injectBeanPostProcessor.This is unfortunate， since we are not using any of the Camel annotations in the beans present in the Spring application context of our application. At the same time， CamelBeanPostProcessor introduces dramatic runtime performance overhead.Specifically， any bean initialized and configured by the Spring application context will be inspected by the camel bena post processor for presence of Camel annotations. In our use-case， Spring @Configurable annotated entities are used， which can have bean creation rates of tens of thousands per second. Without the CamelBeanPostProcessor present， the performance impact of this is negligible. With the CamelBeanPostProcessor present， this introduces significant bottlenecks.See below for the relevant parts of the Camel annotation scanning code dominating this bottleneck (from a JFR recording).The use of the Spring Camel namespace seems to be conflated with the unconditional injection of the CamelBeanPostProcessor， with no configuration or strategy specialization option to separate these.For users using the namespace， but not using the Camel annotations， it would be very useful to have control over this aspect of Camel/Spring integration.,Hide Permalink Taras Tielkes added a comment - 12/Oct/20 06:43 Claus， note that the performance overhead is not on bootstrap in our case. As the application context is creating and wiring new bean instances， the overhead is continuous. Show Taras Tielkes added a comment - 12/Oct/20 06:43 Claus， note that the performance overhead is not on bootstrap in our case. As the application context is creating and wiring new bean instances， the overhead is continuous. Hide Permalink Claus Ibsen added a comment - 12/Oct/20 15:23 You can try on 2.x to create an empty/dummy implementation of the came bean post processor and add it as a <bean> to the registry. Then Camel may pickup your bean and use that instead of the default. Show Claus Ibsen added a comment - 12/Oct/20 15:23 You can try on 2.x to create an empty/dummy implementation of the came bean post processor and add it as a <bean> to the registry. Then Camel may pickup your bean and use that instead of the default. Hide Permalink Claus Ibsen added a comment - 12/Oct/20 17:32 There is an option on 3.6 now to turn the bean post processor off Show Claus Ibsen added a comment - 12/Oct/20 17:32 There is an option on 3.6 now to turn the bean post processor off Hide Permalink Taras Tielkes added a comment - 16/Oct/20 19:49 Claus， Thanks for the quick follow-up on the issue. Just writing here to confirm that your suggested work-around for Camel 2.x behaves as expected. For others experiencing this performance bottleneck， the work-around amounts to overriding the Camel BeanPostProcessor like so: <camelContext id="myCamelContext" xmlns="http://camel.apache.org/schema/spring"> ... </camelContext> <bean id="myCamelContext:beanPostProcessor" class="org.example.camel.NullBeanPostProcessor"/> Where NullBeanPostProcessor looks like this: public class NullBeanPostProcessor implements BeanPostProcessor { @Override public Object postProcessBeforeInitialization(Object bean， String beanName) throws BeansException { return bean; } @Override public Object postProcessAfterInitialization(Object bean， String beanName) throws BeansException { return bean; } } Show Taras Tielkes added a comment - 16/Oct/20 19:49 Claus， Thanks for the quick follow-up on the issue. Just writing here to confirm that your suggested work-around for Camel 2.x behaves as expected. For others experiencing this performance bottleneck， the work-around amounts to overriding the Camel BeanPostProcessor like so: <camelContext id= "myCamelContext" xmlns= "http: //camel.apache.org/schema/spring" > ... </camelContext> <bean id= "myCamelContext:beanPostProcessor" class= "org.example.camel.NullBeanPostProcessor" /> Where NullBeanPostProcessor looks like this: public class NullBeanPostProcessor implements BeanPostProcessor { @Override public Object postProcessBeforeInitialization( Object bean， String beanName) throws BeansException { return bean; } @Override public Object postProcessAfterInitialization( Object bean， String beanName) throws BeansException { return bean; } }
CAMEL-15670,Unassigned,2020-10-12T06:49:02+0000,1602470942， where 1602470942 is the epoch,Something got lost in the xsd file between version 3.0.0-M3 and 3.0.0-M4.The "throttleDefinition" should allow a "tns:to" child element.ok https://camel.apache.org/schema/spring/camel-spring-2.25.2.xsdok https://camel.apache.org/schema/spring/camel-spring-3.0.0-M1.xsdok https://camel.apache.org/schema/spring/camel-spring-3.0.0-M2.xsdok https://camel.apache.org/schema/spring/camel-spring-3.0.0-M3.xsdok https://camel.apache.org/schema/spring/camel-spring.xsdnok https://camel.apache.org/schema/spring/camel-spring-3.0.0-M4.xsdnok https://camel.apache.org/schema/spring/camel-spring-3.0.0-RC1.xsdnok https://camel.apache.org/schema/spring/camel-spring-3.0.0-RC2.xsdnok https://camel.apache.org/schema/spring/camel-spring-3.0.0-RC3.xsdnok https://camel.apache.org/schema/spring/camel-spring-3.0.0.xsdnok https://camel.apache.org/schema/spring/camel-spring-3.0.1.xsdnok https://camel.apache.org/schema/spring/camel-spring-3.1.0.xsdnok https://camel.apache.org/schema/spring/camel-spring-3.2.0.xsdnok https://camel.apache.org/schema/spring/camel-spring-3.3.0.xsdnok https://camel.apache.org/schema/spring/camel-spring-3.4.0.xsdnok https://camel.apache.org/schema/spring/camel-spring-3.4.1.xsdnok https://camel.apache.org/schema/spring/camel-spring-3.4.2.xsdnok https://camel.apache.org/schema/spring/camel-spring-3.4.3.xsdnok https://camel.apache.org/schema/spring/camel-spring-3.4.4.xsdnok https://camel.apache.org/schema/spring/camel-spring-3.5.0.xsd,Hide Permalink Claus Ibsen added a comment - 12/Oct/20 06:49 No its correct， Camel 3 is reworking some parts of the EIPs since 2.x Show Claus Ibsen added a comment - 12/Oct/20 06:49 No its correct， Camel 3 is reworking some parts of the EIPs since 2.x Hide Permalink Kristof Neirynck added a comment - 12/Oct/20 08:14 In that case the documentation of "throttle" isn't up to date. Copying the example code from the documentation at https://camel.apache.org/components/latest/eips/throttle-eip.html Yields this invalid document. <routes xmlns="http://camel.apache.org/schema/spring" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://camel.apache.org/schema/spring https://camel.apache.org/schema/spring/camel-spring-3.5.0.xsd"> <route> <from uri="seda:a"/> <!-- throttle 3 messages per 10 sec --> <throttle timePeriodMillis="10000"> <constant>3</constant> <to uri="log:result"/> <to uri="mock:result"/> </throttle> </route> </routes> Show Kristof Neirynck added a comment - 12/Oct/20 08:14 In that case the documentation of "throttle" isn't up to date. Copying the example code from the documentation at https://camel.apache.org/components/latest/eips/throttle-eip.html Yields this invalid document. <routes xmlns= "http: //camel.apache.org/schema/spring" xmlns:xsi= "http: //www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation= "http: //camel.apache.org/schema/spring https://camel.apache.org/schema/spring/camel-spring-3.5.0.xsd" > <route> <from uri= "seda:a" /> <!-- throttle 3 messages per 10 sec --> <throttle timePeriodMillis= "10000" > <constant>3</constant> <to uri= "log:result" /> <to uri= "mock:result" /> </throttle> </route> </routes> Hide Permalink Claus Ibsen added a comment - 12/Oct/20 08:21 Ah thanks， I am fixing the docs Show Claus Ibsen added a comment - 12/Oct/20 08:21 Ah thanks， I am fixing the docs
CAMEL-15669,Claus Ibsen,2020-10-10T01:40:22.068Z,1602279622.068， where 1602279622.068 is the epoch,module：camel-cloud 3.5.0stack：java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:836)java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:997)java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1304)java.util.concurrent.CountDownLatch.await(CountDownLatch.java:231)org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.await(DefaultAsyncProcessorAwaitManager.java:107)org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:85)org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:41)org.apache.camel.component.resilience4j.ResilienceProcessor$CircuitBreakerTask.call(ResilienceProcessor.java:418)org.apache.camel.component.resilience4j.ResilienceProcessor$CircuitBreakerTask.call(ResilienceProcessor.java:399)io.github.resilience4j.circuitbreaker.CircuitBreaker.lambda$decorateCallable$3(CircuitBreaker.java:700)io.github.resilience4j.circuitbreaker.CircuitBreaker$$Lambda$1027/242448823.call(Unknown Source)Related codes：1、org.apache.camel.component.ribbon.cloud.RibbonServiceLoadBalancer#processwhen server is null，throw RejectedExecutionException：throw new RejectedExecutionException("No active services with name " + serviceName);2、org.apache.camel.impl.cloud.DefaultServiceCallProcessor#processwhen catch Exception，we need “callback.done(true);” for CountDownLatch test code:RouteDefinition definition = from("...");CircuitBreakerDefinition circuitBreakerDefinition = definition .circuitBreaker() .resilience4jConfiguration(resilience4j)......erviceCallDefinition serviceCallDefinition = processorDefinition .serviceCall().name("test-app/api/test/hello");//registry ZooKeeperServiceCallServiceDiscoveryConfiguration conf = new ZooKeeperServiceCallDiscoveryConfiguration(serviceCallDefinition) .nodes("...").basePath("...").connectionTimeout("7000").sessionTimeout("60000");serviceCallDefinition.setServiceDiscoveryConfiguration(conf);//endserviceCallDefinition.end();,Hide Permalink Claus Ibsen added a comment - 10/Oct/20 05:31 Ah yeah it needs a callback.done(true) after that set exception. You are welcome to provide a patch or a PR to fix this. Show Claus Ibsen added a comment - 10/Oct/20 05:31 Ah yeah it needs a callback.done(true) after that set exception. You are welcome to provide a patch or a PR to fix this.
CAMEL-15668,Unassigned,2020-10-10T00:40:24.099Z,1602276024.099， where 1602276024.099 is the epoch,I'm calling an external system and trying to catch the http exception but can't start the route as I receive the following error: Caused by: java.lang.ClassNotFoundException: org.apache.camel.common.http.HttpOperationFailedExceptionthis is the relevant part of the route I'm executing and I've attached the pom.xml <route id="A4-A5-flow"> <from id="commit-orders" uri="direct:a3-to-a4" /> <setHeader headerName="CamelHttpMethod"> <constant>POST</constant> </setHeader> <to uri="http://localhost:8090/api/commitOrder?bridgeEndpoint=true" /> <!-- exception handling http calls --> <onException> <exception>org.apache.camel.common.http.HttpOperationFailedException</exception> <redeliveryPolicy maximumRedeliveries="3" redeliveryDelay="2000" /> <handled> <constant>true</constant> </handled> </onException> <unmarshal> <custom ref="my-reply" /> </unmarshal> <to uri="direct:a5-to-a6" /> </route>pom.xmlas you can see I included all possible libraries containing that class,Hide Permalink Claus Ibsen added a comment - 10/Oct/20 05:33 You are using Red Hat Fuse， so you should contract Red Hat about customer support. Show Claus Ibsen added a comment - 10/Oct/20 05:33 You are using Red Hat Fuse， so you should contract Red Hat about customer support.
CAMEL-15667,Matej Melko,2020-10-09T20:06:49+0000,1602259609， where 1602259609 is the epoch,Atlassian jira-rest-java-client-core brings older versions of jettison and httpclient that causes problems in camel-k (after upgrade to java-11) and potentially in camel quarkus.,There are no comments yet on this issue.
CAMEL-15666,Jan Bednar,2020-10-09T18:46:58+0000,1602254818， where 1602254818 is the epoch,String `className` argument in `PackageDataFormatMojo#doParseJavaClassSource` contains full name including generic types and because of that: Mojo fails on windows buildjava.nio.file.InvalidPathException: Illegal char <<> at index 65: org/apache/camel/dataformat/univocity/AbstractUniVocityDataFormat<TsvFormat，TsvWriterSettings，TsvWriter，TsvParserSettings，TsvParser，UniVocityTsvDataFormat>.java Options from classes with generics are excluded on linux build - `Files.isRegularFile` returns false for invalid names in Linux.I will fix this today， so it can be part of 3.6 release.,Hide Permalink Jan Bednar added a comment - 09/Oct/20 18:46 dab61fe7e45a4002e7f88ec178244b30d7f8445f Show Jan Bednar added a comment - 09/Oct/20 18:46 dab61fe7e45a4002e7f88ec178244b30d7f8445f
CAMEL-15665,Claus Ibsen,2020-10-09T12:43:05.567Z,1602232985.567， where 1602232985.567 is the epoch,Hi everyone， we are using the Camel-onException error handling and found that the exception-handling is sometimes not executed in case of error. When StreamCaching is enabled in the route and an error happens during TypeConversion， the exception handling is not executed but the process just fails. I attached a scenario to reproduce the problem to this mail (ExceptionHandling.java). Best regards，Manuel,Hide Permalink Claus Ibsen added a comment - 09/Oct/20 13:42 I had a look， so before I forget， then we need to consider what the stream caching should behave when the onException path is being routed. As it would essentially attempt to convert again. So it may need to turn this off in case of first error. Or silently let subsequent failures be ignored. To allow the onException routing to continue. Show Claus Ibsen added a comment - 09/Oct/20 13:42 I had a look， so before I forget， then we need to consider what the stream caching should behave when the onException path is being routed. As it would essentially attempt to convert again. So it may need to turn this off in case of first error. Or silently let subsequent failures be ignored. To allow the onException routing to continue. Hide Permalink Manuel Shenavai added a comment - 27/Oct/20 14:13 Hi Claus， thanks for providing a fix. We need to consume this fix in our 2.x codeline. However， the fix contains 3.x coding: exchange.adapt(ExtendedExchange.class).setRedeliveryExhausted(true); Is it planned to also fix the problem in the 2.x codeline? Thanks in advance & Best regards， Manuel Show Manuel Shenavai added a comment - 27/Oct/20 14:13 Hi Claus， thanks for providing a fix. We need to consume this fix in our 2.x codeline. However， the fix contains 3.x coding: exchange.adapt(ExtendedExchange.class).setRedeliveryExhausted(true); Is it planned to also fix the problem in the 2.x codeline? Thanks in advance & Best regards， Manuel Hide Permalink Andrea Cosentino added a comment - 27/Oct/20 14:14 No， it's not planned for 2.x. Show Andrea Cosentino added a comment - 27/Oct/20 14:14 No， it's not planned for 2.x. Hide Permalink Manuel Shenavai added a comment - 27/Oct/20 15:18 Hi Andrea Cosentino， thanks for your reply. Do you know if there is a equivalent of the 3.x code that we could use in our 2.x codeline? (exchange.adapt(ExtendedExchange.class).setRedeliveryExhausted(true)) Best regards， Manuel Show Manuel Shenavai added a comment - 27/Oct/20 15:18 Hi Andrea Cosentino ， thanks for your reply. Do you know if there is a equivalent of the 3.x code that we could use in our 2.x codeline? (exchange.adapt(ExtendedExchange.class).setRedeliveryExhausted(true)) Best regards， Manuel
CAMEL-15664,Luca Burgazzoli,2020-10-09T11:51:13+0000,1602229873， where 1602229873 is the epoch,When an URI is computed out of a set of parameter with either the new URI endpoint assembler or the catalog helper， secret properties should be wrapped by RAW() so encoded data don't break URI encoding,There are no comments yet on this issue.
CAMEL-15663,Unassigned,2020-10-09T10:55:35+0000,1602226535， where 1602226535 is the epoch,When the camel-json-validator throws an error occurs it shows only in log "JSON validation error with 1 errors. Exchange[ID-700bc59e90f0-1601310667823-12-4]" ${exception.message} shows no details as well. The following ${exception.getErrors()} shows all details what is wrong in the JSON structure. For convenience it would be helpfull when the error message itself contains these details.,There are no comments yet on this issue.
CAMEL-15662,Unassigned,2020-11-03T07:45:42+0000,1604371542， where 1604371542 is the epoch,feature:install camel-json-validator on Karaf 4.2.9. It causes an error java.lang.ArrayIndexOutOfBoundsException: Index 19 out of bounds for length 19at aQute.bnd.osgi.Clazz.parseClassFile(Clazz.java:576)at aQute.bnd.osgi.Clazz.parseClassFile(Clazz.java:494)at aQute.bnd.osgi.Clazz.parseClassFileWithCollector(Clazz.java:483)at aQute.bnd.osgi.Clazz.parseClassFile(Clazz.java:473)at aQute.bnd.osgi.Analyzer.analyzeJar(Analyzer.java:2177)at aQute.bnd.osgi.Analyzer.analyzeBundleClasspath(Analyzer.java:2083)at aQute.bnd.osgi.Analyzer.analyze(Analyzer.java:138)at aQute.bnd.osgi.Analyzer.calcManifest(Analyzer.java:616)at org.ops4j.pax.swissbox.bnd.BndUtils.createBundle(BndUtils.java:161)at org.ops4j.pax.url.wrap.internal.Connection.getInputStream(Connection.java:83)at java.base/java.net.URL.openStream(URL.java:1140)at org.apache.karaf.features.internal.download.impl.SimpleDownloadTask.download(SimpleDownloadTask.java:78)at org.apache.karaf.features.internal.download.impl.AbstractRetryableDownloadTask.run(AbstractRetryableDownloadTask.java:60)at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)at java.base/java.lang.Thread.run(Thread.java:834)java.lang.ArrayIndexOutOfBoundsException: Index 19 out of bounds for length 19at aQute.bnd.osgi.Clazz.parseClassFile(Clazz.java:576)at aQute.bnd.osgi.Clazz.parseClassFile(Clazz.java:494)at aQute.bnd.osgi.Clazz.parseClassFileWithCollector(Clazz.java:483)at aQute.bnd.osgi.Clazz.parseClassFile(Clazz.java:473)at aQute.bnd.osgi.Analyzer.analyzeJar(Analyzer.java:2177)at aQute.bnd.osgi.Analyzer.analyzeBundleClasspath(Analyzer.java:2083)at aQute.bnd.osgi.Analyzer.analyze(Analyzer.java:138)at aQute.bnd.osgi.Analyzer.calcManifest(Analyzer.java:616)at org.ops4j.pax.swissbox.bnd.BndUtils.createBundle(BndUtils.java:161)at org.ops4j.pax.url.wrap.internal.Connection.getInputStream(Connection.java:83)at java.base/java.net.URL.openStream(URL.java:1140)at org.apache.karaf.features.internal.download.impl.SimpleDownloadTask.download(SimpleDownloadTask.java:78)at org.apache.karaf.features.internal.download.impl.AbstractRetryableDownloadTask.run(AbstractRetryableDownloadTask.java:60)at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)at java.base/java.lang.Thread.run(Thread.java:834),Hide Permalink Claus Ibsen added a comment - 03/Nov/20 07:45 dding feature url mvn:org.apache.camel.karaf/apache-camel/3.7.0-SNAPSHOT/xml/features karaf@root()> feature:install camel karaf@root()> feature:install camel-json-validator java.lang.ArrayIndexOutOfBoundsException: Index 19 out of bounds for length 19 Show Claus Ibsen added a comment - 03/Nov/20 07:45 dding feature url mvn:org.apache.camel.karaf/apache-camel/3.7.0-SNAPSHOT/xml/features karaf@root()> feature:install camel karaf@root()> feature:install camel-json-validator java.lang.ArrayIndexOutOfBoundsException: Index 19 out of bounds for length 19 Hide Permalink Claus Ibsen added a comment - 03/Nov/20 07:47 If you install the bundles in the feature manually then it works - its not a Camel bug but something in Karaf. Show Claus Ibsen added a comment - 03/Nov/20 07:47 If you install the bundles in the feature manually then it works - its not a Camel bug but something in Karaf. Hide Permalink Claus Ibsen added a comment - 03/Nov/20 07:49 Its also only a WARN the bundle is install and working. Show Claus Ibsen added a comment - 03/Nov/20 07:49 Its also only a WARN the bundle is install and working.
CAMEL-15661,Denis Istomin,2020-10-08T13:47:36+0000,1602150456， where 1602150456 is the epoch,Currently there are: unit-tests integration tests， that runs manually using real cloud azure services (need to specify `accountName`， `accessKey`)Proposal: Use Testcontainers and Azurite for integration tesing Reuse integration tests codebase Enable testcontainers integration tests by default Do not remove possibilty to run integration tests on cloud azure services using different maven profile,Hide Permalink Denis Istomin added a comment - 08/Oct/20 13:47 Andrea Cosentino， is it OK to run integration tests with testcontainers by default? Show Denis Istomin added a comment - 08/Oct/20 13:47 Andrea Cosentino ， is it OK to run integration tests with testcontainers by default? Hide Permalink Andrea Cosentino added a comment - 09/Oct/20 07:19 Yes， it is. Show Andrea Cosentino added a comment - 09/Oct/20 07:19 Yes， it is.
CAMEL-15660,Claus Ibsen,2020-10-08T15:51:39+0000,1602157899， where 1602157899 is the epoch,Noticed that in seda.json we have some boolean type with default values as "true" and others as true"type": "boolean"， "javaType": "boolean"， "deprecated": false， "secret": false， "defaultValue": "false"vs "type": "boolean"， "javaType": "boolean"， "deprecated": false， "secret": false， "defaultValue": false，,Hide Permalink Chandrakant Hardahe added a comment - 08/Oct/20 15:51 Hi Claus Ibsen， I'll work on this， Thanks Show Chandrakant Hardahe added a comment - 08/Oct/20 15:51 Hi Claus Ibsen ， I'll work on this， Thanks Hide Permalink Claus Ibsen added a comment - 13/Oct/20 08:21 I took a little look and there are some other problems， so I am working on a fix as we want this for 3.6 release. Show Claus Ibsen added a comment - 13/Oct/20 08:21 I took a little look and there are some other problems， so I am working on a fix as we want this for 3.6 release. Hide Permalink Claus Ibsen added a comment - 13/Oct/20 09:17 We had the same problem for number types Show Claus Ibsen added a comment - 13/Oct/20 09:17 We had the same problem for number types
CAMEL-15659,Claus Ibsen,2020-10-08T11:33:12+0000,1602142392， where 1602142392 is the epoch,I mistakenly removed those manually added configurers on the languages as this is used by camel-main to configure them without reflection.That's the only used place we use that. We dont source code generate configurer for them， so they are hand manitained.,There are no comments yet on this issue.
CAMEL-15658,Zineb BENDHIBA,2020-10-08T09:18:22+0000,1602134302， where 1602134302 is the epoch,using test-containers,There are no comments yet on this issue.
CAMEL-15657,Unassigned,2020-10-08T09:13:43+0000,1602134023， where 1602134023 is the epoch,jdk15 initiated the process of removing biased locking from the JVM asper JEP 374 (https://openjdk.java.net/jeps/374). That release switchedthe default setting from enabled to disabled. The plan is to see if anyusers squeal and， if not， proceed to remove it in jdk16 or jdk17.,Hide Permalink Claus Ibsen added a comment - 08/Oct/20 09:13 Lets look at whether we use any synchronized (lock) { } or synchronized methods that may be affected. First priority is around runtime routing of messages via the routing engine. The bootstrap with initializating Camel is not a problem as there is a single thread doing this work. Old collection classes like Vector or Hashtable is not in use. Show Claus Ibsen added a comment - 08/Oct/20 09:13 Lets look at whether we use any synchronized (lock) { } or synchronized methods that may be affected. First priority is around runtime routing of messages via the routing engine. The bootstrap with initializating Camel is not a problem as there is a single thread doing this work. Old collection classes like Vector or Hashtable is not in use. Hide Permalink Claus Ibsen added a comment - 08/Oct/20 09:16 For fast performance tests we only have a set of jmh tests that tests specific pieces of camel like its type converter， simple language etc. We could add a little bit bigger test that does some more extensive routing and let it be concurrent with seda/aggregator and whatnot. And then run the test with with biased locking on or off (there should be a JVM switch for that). Show Claus Ibsen added a comment - 08/Oct/20 09:16 For fast performance tests we only have a set of jmh tests that tests specific pieces of camel like its type converter， simple language etc. We could add a little bit bigger test that does some more extensive routing and let it be concurrent with seda/aggregator and whatnot. And then run the test with with biased locking on or off (there should be a JVM switch for that).
CAMEL-15656,Omar Al-Safi,2020-10-08T08:30:08+0000,1602131408， where 1602131408 is the epoch,Currently， in camel azure storage blob， in order to download a blob， you will need to specify the blob name， however it will make also make sense to download all blobs within the container as similar to Amazon S3 component.,There are no comments yet on this issue.
CAMEL-15655,Omar Al-Safi,2020-10-08T08:19:16+0000,1602130756， where 1602130756 is the epoch,A placeholder for potential camel-azure-cosmodb component， here is important info: https://docs.microsoft.com/en-us/azure/cosmos-db/introduction https://github.com/Azure/azure-sdk-for-java/tree/master/sdk/cosmos/azure-cosmos,There are no comments yet on this issue.
CAMEL-15654,Claus Ibsen,2020-10-08T06:56:52+0000,1602125812， where 1602125812 is the epoch,Especially the bean language with its bean/method options can be used during runtime and also for dynamic expressions.And we pass on data from camel-api to their implementations via HashMap. But we can optimize this to a basic object[] but then we need to have fixed parameter ordering.,There are no comments yet on this issue.
CAMEL-15653,Viral Gohel,2020-10-08T05:55:25.120Z,1602122125.12， where 1602122125.12 is the epoch,When there are multiple SJMS-Batch consumers in a camel context it is currently very difficult to work out which one some of the log messages apply to because many don't include the URI or queue name and happen outside the context of a route (so route MDC logging doesn't help).Suggested improvements: Thread names should include the destination name. The standard jms component consumers already do this. Most log messages (especially error messages) should include the destination name.It may be appropriate to use the consumer URI without query parameters instead of the destination name - I'm not sure if there is a standard approach used by other components. Examples of current log messages from a spring boot app:2020-10-08 10:38:31.313 WARN ||| 12468 --- [Camel (camel-1) thread #21 - AsyncStartStopListener] o.a.c.c.sjms.batch.SjmsBatchConsumer : Error starting consumer after 1 attempts. Will try again in 5000 millis.. Caused by: [org.apache.qpid.jms.exceptions.JMSSecuritySaslException - Client failed to authenticate using SASL: PLAIN]2020-10-07 14:11:44.351 INFO ||| 27720 --- [Camel (camel-1) thread #15 - SjmsBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : Shutdown signal received - rolling back batch Example of current thread name from SJMS-Batch consumer: "Camel (camel-1) thread #13 - SjmsBatchConsumer" Queue name in AsyncStartStopListener might be helpful too - currently: "Camel (camel-1) thread #6 - AsyncStartStopListener" In contrast， the standard JMS component includes the queue name in the thread name and in error messages:2020-10-08 10:38:35.245 WARN ||| 12468 --- [Camel (camel-1) thread #12 - JmsConsumer[myQueueName]] c.c.j.DefaultJmsMessageListenerContainer : Setup of JMS message listener invoker failed for destination 'myQueueName' - trying to recover. Cause: The transport is not running.,Hide Permalink Brad Harvey added a comment - 08/Oct/20 06:00 sjmsbatchloggingpatch.txt contains proposed changes. The AsyncStartStopListener was using a shared executor service at the component level， so it couldn't be used as-is to give the threads names including the destination name. It was only ever used by the consumer to submit a single task， so I have replaced this with creating a thread directly via executor service manager. The other changes are adding the destination name to various log messages. I didn't change debug/trace - I figure anyone enabling that level of detail could/should include the thread name in the logs. Show Brad Harvey added a comment - 08/Oct/20 06:00 sjmsbatchloggingpatch.txt contains proposed changes. The AsyncStartStopListener was using a shared executor service at the component level， so it couldn't be used as-is to give the threads names including the destination name. It was only ever used by the consumer to submit a single task， so I have replaced this with creating a thread directly via executor service manager. The other changes are adding the destination name to various log messages. I didn't change debug/trace - I figure anyone enabling that level of detail could/should include the thread name in the logs. Hide Permalink Brad Harvey added a comment - 21/Oct/20 02:18 Hi Viral Gohel， is it possible for this to be included in the next 3.4.x release， e.g. 3.4.5? Thanks， Brad. Show Brad Harvey added a comment - 21/Oct/20 02:18 Hi Viral Gohel ， is it possible for this to be included in the next 3.4.x release， e.g. 3.4.5? Thanks， Brad. Hide Permalink Claus Ibsen added a comment - Yesterday Thanks for the patch Brad Show Claus Ibsen added a comment - Yesterday Thanks for the patch Brad
CAMEL-15652,Claus Ibsen,2020-10-07T19:26:21+0000,1602084381， where 1602084381 is the epoch,So we can avoid the bean lookup in registry for each exchange， but do eager init. If we have scope， then you can set it as scope=singleton|request|prototype.For example in <setProperty name="user"> <simple>${bean:myBean?method=getRandomUser}</simple> </setProperty>Then we lookup the bean by name myBean for each exchange. If we have scope=singleton， we can do this eager， and also see if we can do method selection if possible - eg getRandomUser if there is only 1 method - then use that.,There are no comments yet on this issue.
CAMEL-15651,Djordje Bajic,2020-10-07T14:12:33+0000,1602065553， where 1602065553 is the epoch,I found some code that can be improved and i would like to refactor it a little.,There are no comments yet on this issue.
CAMEL-15650,Viral Gohel,2020-10-15T16:11:58+0000,1602763918， where 1602763918 is the epoch,The camel-spark is using older version of spark. We should upgrade to 3.x and this also uses hadoop 3.x so we can get rid of the last hadoop 2.x dependency.There is no apache karaf problem as spark and hadoop are not there as features (dont work in osgi anyway),Hide Permalink Peter Palaga added a comment - 15/Oct/20 16:11 +1 for upgrading. Spark 2.x does not seem to support Java 11. I am getting errors similar to https://stackoverflow.com/questions/53583199/spark-error-unsupported-class-file-major-version Show Peter Palaga added a comment - 15/Oct/20 16:11 +1 for upgrading. Spark 2.x does not seem to support Java 11. I am getting errors similar to https://stackoverflow.com/questions/53583199/spark-error-unsupported-class-file-major-version Hide Permalink Peter Palaga added a comment - 15/Oct/20 19:59 See also CAMEL-15696 Show Peter Palaga added a comment - 15/Oct/20 19:59 See also CAMEL-15696 Hide Permalink Peter Palaga added a comment - 26/Oct/20 11:10 Blocks https://github.com/apache/camel-quarkus/issues/1955 Show Peter Palaga added a comment - 26/Oct/20 11:10 Blocks https://github.com/apache/camel-quarkus/issues/1955
CAMEL-15649,Unassigned,2020-10-07T09:45:06+0000,1602049506， where 1602049506 is the epoch,Build failed in Window machine and OpenJDK 1.8Caused by: org.jasypt.exceptions.EncryptionInitializationException: java.security.NoSuchAlgorithmException: NativePRNG SecureRandom not availableCaused by: org.jasypt.exceptions.EncryptionInitializationException: java.security.NoSuchAlgorithmException: NativePRNG SecureRandom not available at org.jasypt.iv.RandomIvGenerator.<init>(RandomIvGenerator.java:74) at org.apache.camel.component.jasypt.springboot.EncryptedPropertiesCustomConfigurationBeansTest$TestConfiguration.environmentVariablesConfiguration(EncryptedPropertiesCustomConfigurationBeansTest.java:70) at org.apache.camel.component.jasypt.springboot.EncryptedPropertiesCustomConfigurationBeansTest$TestConfiguration$$EnhancerBySpringCGLIB$$20dd0596.CGLIB$environmentVariablesConfiguration$0(<generated>) at org.apache.camel.component.jasypt.springboot.EncryptedPropertiesCustomConfigurationBeansTest$TestConfiguration$$EnhancerBySpringCGLIB$$20dd0596$$FastClassBySpringCGLIB$$4c453f93.invoke(<generated>) at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) at org.apache.camel.component.jasypt.springboot.EncryptedPropertiesCustomConfigurationBeansTest$TestConfiguration$$EnhancerBySpringCGLIB$$20dd0596.environmentVariablesConfiguration(<generated>) at jdk.internal.reflect.GeneratedMethodAccessor75.invoke(Unknown Source) at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.base/java.lang.reflect.Method.invoke(Method.java:564) at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ... 67 moreCaused by: java.security.NoSuchAlgorithmException: NativePRNG SecureRandom not available at java.base/sun.security.jca.GetInstance.getInstance(GetInstance.java:159) at java.base/java.security.SecureRandom.getInstance(SecureRandom.java:381) at org.jasypt.iv.RandomIvGenerator.<init>(RandomIvGenerator.java:72) ... 77 more,Hide Permalink Alex Park added a comment - 07/Oct/20 09:45 Test case successful with "Windows-PRNG" Algorithm in Windows. So， code change made and sent PR. Show Alex Park added a comment - 07/Oct/20 09:45 Test case successful with "Windows-PRNG" Algorithm in Windows. So， code change made and sent PR.
CAMEL-15648,James Netherton,2020-10-07T08:36:29+0000,1602045389， where 1602045389 is the epoch,Small issue noticed when integrating camel-crypto with camel-quarkus:https://github.com/apache/camel-quarkus/issues/1881,There are no comments yet on this issue.
CAMEL-15647,Andrea Cosentino,2020-10-07T07:35:33+0000,1602041733， where 1602041733 is the epoch,We need to set the system property accordingly,There are no comments yet on this issue.
CAMEL-15646,Claus Ibsen,2020-10-07T14:46:03+0000,1602067563， where 1602067563 is the epoch,Can somebody help to create a jira for this because I don't have the permission?Please use below codes to reproduce.@Named("ConvertType")@Log4j2public class ConvertType implements Processor { private static final Logger logger = LoggerFactory.getLogger(ConvertType.class); @Override public void process(Exchange exchange) { Document a = new Document(MongoDbConstants.MONGO_ID， "testInsert1"); a.append("MyId"， 1).toJson(); Document b = new Document(MongoDbConstants.MONGO_ID， "testInsert2"); b.append("MyId"， 2).toJson(); Document c = new Document(MongoDbConstants.MONGO_ID， "testInsert3"); c.append("MyId"， 3).toJson(); List<Document> taxGroupList = new ArrayList<Document>(); taxGroupList.add(a); taxGroupList.add(b); taxGroupList.add(c); exchange.getIn().setBody(taxGroupList); // From MongoDbProducer.java#L428 // https://github.com/apache/camel/blob/af7e383e9fc1d25ce9665f74d33672cc5b507952/components/camel-mongodb/src/main/java/org/apache/camel/component/mongodb/MongoDbProducer.java#L428 Object insert = exchange.getContext().getTypeConverter().tryConvertTo(Document.class， exchange， exchange.getIn().getBody()); if (insert == null) logger.info(Document.class.getTypeName() + " mismatched with " + exchange.getIn().getBody().getClass().getTypeName()); else logger.info(Document.class.getTypeName() + " matched with " + exchange.getIn().getBody().getClass().getTypeName()); } }from(fromKafka) .process("ConvertType");,Hide Permalink Welly Hong added a comment - 07/Oct/20 14:46 - edited The issue only happened in Camel Spring boot project. The insert object returns null in the camel java project but not in Camel Spring boot project. After debugged， I found exchange.getContext() is using org.apache.camel.spring.boot package in the Camel Spring boot project. But in the Camel java project， exchange.getContext() is using org.apache.camel.impl package. logger.info(exchange.getContext().getClass().getPackageName()); I believed a quick dirty fix is to change https://github.com/apache/camel/blob/af7e383e9fc1d25ce9665f74d33672cc5b507952/components/camel-mongodb/src/main/java/org/apache/camel/component/mongodb/MongoDbProducer.java#L428 // code placeholder Object insert = (new DefaultCamelContext()).getTypeConverter().tryConvertTo(Document.class， exchangexchange， exchange.getIn().getBody()); Show Welly Hong added a comment - 07/Oct/20 14:46 - edited The issue only happened in Camel Spring boot project. The insert object returns null in the camel java project but not in Camel Spring boot project. After debugged， I found exchange.getContext() is using org.apache.camel.spring.boot package in the Camel Spring boot project. But in the Camel java project， exchange.getContext() is using org.apache.camel.impl package. logger.info(exchange.getContext().getClass().getPackageName()); I believed a quick dirty fix is to change https://github.com/apache/camel/blob/af7e383e9fc1d25ce9665f74d33672cc5b507952/components/camel-mongodb/src/main/java/org/apache/camel/component/mongodb/MongoDbProducer.java#L428 // code placeholder Object insert = ( new DefaultCamelContext()).getTypeConverter().tryConvertTo(Document.class， exchangexchange， exchange.getIn().getBody()); Hide Permalink Chandrakant Hardahe added a comment - 07/Oct/20 18:36 Thanks Welly Hong for reporting it， I'll work on this Show Chandrakant Hardahe added a comment - 07/Oct/20 18:36 Thanks Welly Hong for reporting it， I'll work on this Hide Permalink Claus Ibsen added a comment - 14/Oct/20 08:58 I am fixing this currently to get this into 3.6 Show Claus Ibsen added a comment - 14/Oct/20 08:58 I am fixing this currently to get this into 3.6
CAMEL-15645,Unassigned,2020-10-06T18:14:37+0000,1601993677， where 1601993677 is the epoch,This component has test failures. And it looks like that meecrowave is not compatible or dont work with newer tomcat versions or junit 5 or something.Its a pain to maintain and if it keeps being bad， then we will deprecate it asap and remove it.,There are no comments yet on this issue.
CAMEL-15644,Claus Ibsen,2020-10-06T12:24:46+0000,1601972686， where 1601972686 is the epoch,While using the toD-Tag in combination with the camel-salesforce component a NullPointerException occurs on route startup. It doesn't appears with the to-Tag. Stacktrace:org.apache.camel.FailedToStartRouteException: Failed to start route isp.route.user.ISPSFO001 because of null at org.apache.camel.impl.engine.RouteService.warmUp(RouteService.java:125) ~[!/:3.4.3] at org.apache.camel.impl.engine.InternalRouteStartupManager.doWarmUpRoutes(InternalRouteStartupManager.java:263) ~[!/:3.4.3] at org.apache.camel.impl.engine.InternalRouteStartupManager.safelyStartRouteServices(InternalRouteStartupManager.java:156) ~[!/:3.4.3] at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartOrResumeRoutes(InternalRouteStartupManager.java:114) ~[!/:3.4.3] at org.apache.camel.impl.engine.AbstractCamelContext.doStartCamel(AbstractCamelContext.java:2809) ~[!/:3.4.3] at org.apache.camel.impl.engine.AbstractCamelContext.doStartContext(AbstractCamelContext.java:2657) ~[!/:3.4.3] at org.apache.camel.impl.engine.AbstractCamelContext.doStart(AbstractCamelContext.java:2620) ~[!/:3.4.3] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.4.3] at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2452) ~[!/:3.4.3] at org.apache.camel.blueprint.BlueprintCamelContext.start(BlueprintCamelContext.java:241) ~[!/:3.4.3] at org.apache.camel.blueprint.BlueprintCamelContext.maybeStart(BlueprintCamelContext.java:283) ~[!/:3.4.3] at org.apache.camel.blueprint.BlueprintCamelContext.blueprintEvent(BlueprintCamelContext.java:187) [!/:3.4.3] at org.apache.aries.blueprint.container.BlueprintEventDispatcher$3.call(BlueprintEventDispatcher.java:190) [!/:1.10.2] at org.apache.aries.blueprint.container.BlueprintEventDispatcher$3.call(BlueprintEventDispatcher.java:188) [!/:1.10.2] at java.util.concurrent.FutureTask.run(Unknown Source) [?:?] at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [?:?] at java.util.concurrent.FutureTask.run(Unknown Source) [?:?] at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [?:?] at java.util.concurrent.FutureTask.run(Unknown Source) [?:?] at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source) [?:?] at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [?:?] at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [?:?] at java.lang.Thread.run(Unknown Source) [?:?]Caused by: org.apache.camel.RuntimeCamelException: Cannot auto create component: salesforce at org.apache.camel.impl.engine.AbstractCamelContext.getComponent(AbstractCamelContext.java:546) ~[!/:3.4.3] at org.apache.camel.impl.engine.AbstractCamelContext.getComponent(AbstractCamelContext.java:504) ~[!/:3.4.3] at org.apache.camel.processor.SendDynamicProcessor.doStart(SendDynamicProcessor.java:343) ~[?:?] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:101) ~[!/:3.4.3] at org.apache.camel.processor.channel.DefaultChannel.doStart(DefaultChannel.java:143) ~[?:?] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:87) ~[!/:3.4.3] at org.apache.camel.processor.Pipeline.doStart(Pipeline.java:154) ~[?:?] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:101) ~[!/:3.4.3] at org.apache.camel.processor.TryProcessor.doStart(TryProcessor.java:137) ~[?:?] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:101) ~[!/:3.4.3] at org.apache.camel.processor.channel.DefaultChannel.doStart(DefaultChannel.java:143) ~[?:?] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:87) ~[!/:3.4.3] at org.apache.camel.processor.Pipeline.doStart(Pipeline.java:154) ~[?:?] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[!/:3.4.3] at org.apache.camel.support.processor.DelegateAsyncProcessor.doStart(DelegateAsyncProcessor.java:78) ~[?:?] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[!/:3.4.3] at org.apache.camel.impl.engine.RouteService.startChildService(RouteService.java:334) ~[!/:3.4.3] at org.apache.camel.impl.engine.RouteService.doWarmUp(RouteService.java:184) ~[!/:3.4.3] at org.apache.camel.impl.engine.RouteService.warmUp(RouteService.java:123) ~[!/:3.4.3] ... 22 moreCaused by: java.lang.NullPointerException at org.apache.camel.component.salesforce.SalesforceComponent.doStart(SalesforceComponent.java:341) ~[?:?] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.4.3] at org.apache.camel.impl.engine.AbstractCamelContext.startService(AbstractCamelContext.java:3025) ~[!/:3.4.3] at org.apache.camel.impl.engine.AbstractCamelContext.getComponent(AbstractCamelContext.java:541) ~[!/:3.4.3] at org.apache.camel.impl.engine.AbstractCamelContext.getComponent(AbstractCamelContext.java:504) ~[!/:3.4.3] at org.apache.camel.processor.SendDynamicProcessor.doStart(SendDynamicProcessor.java:343) ~[?:?] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:101) ~[!/:3.4.3] at org.apache.camel.processor.channel.DefaultChannel.doStart(DefaultChannel.java:143) ~[?:?] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:87) ~[!/:3.4.3] at org.apache.camel.processor.Pipeline.doStart(Pipeline.java:154) ~[?:?] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:101) ~[!/:3.4.3] at org.apache.camel.processor.TryProcessor.doStart(TryProcessor.java:137) ~[?:?] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:101) ~[!/:3.4.3] at org.apache.camel.processor.channel.DefaultChannel.doStart(DefaultChannel.java:143) ~[?:?] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:87) ~[!/:3.4.3] at org.apache.camel.processor.Pipeline.doStart(Pipeline.java:154) ~[?:?] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[!/:3.4.3] at org.apache.camel.support.processor.DelegateAsyncProcessor.doStart(DelegateAsyncProcessor.java:78) ~[?:?] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.4.3] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[!/:3.4.3] at org.apache.camel.impl.engine.RouteService.startChildService(RouteService.java:334) ~[!/:3.4.3] at org.apache.camel.impl.engine.RouteService.doWarmUp(RouteService.java:184) ~[!/:3.4.3] at org.apache.camel.impl.engine.RouteService.warmUp(RouteService.java:123) ~[!/:3.4.3] ... 22 more,There are no comments yet on this issue.
CAMEL-15643,Claus Ibsen,2020-10-06T12:15:19+0000,1601972119， where 1601972119 is the epoch,We can pre-compiled an xpath expression and put in the pool， so at least there is 1 ready during inititalization， otherwise its created on-demand.We may want to add an option to turn this off.,Hide Permalink Claus Ibsen added a comment - 06/Oct/20 12:15 Did the same for camel-saxon Show Claus Ibsen added a comment - 06/Oct/20 12:15 Did the same for camel-saxon
CAMEL-15642,Claus Ibsen,2020-10-06T17:13:20+0000,1601990000， where 1601990000 is the epoch,Add option to SpEL language to pre-compile as we can do this now with the eager init.The option should allow to turn this off， as this is how it was now， compiled on demand.,Hide Permalink Claus Ibsen added a comment - 06/Oct/20 17:13 Looked at this， and the SpEL compiler is not capable of compiling many expressions as this is very limited to only static known state. So all the compilation attempts are in vain. Show Claus Ibsen added a comment - 06/Oct/20 17:13 Looked at this， and the SpEL compiler is not capable of compiling many expressions as this is very limited to only static known state. So all the compilation attempts are in vain.
CAMEL-15641,Claus Ibsen,2020-10-06T07:29:32+0000,1601954972， where 1601954972 is the epoch,We can leverage init() to eager init some of these expressions in the simple language that it creates during parsing.,There are no comments yet on this issue.
CAMEL-15640,Jan Bednar,2020-10-05T22:11:04+0000,1601921464， where 1601921464 is the epoch,Sometimes you need to process messages in parallel and also ensure order of messages per key. Kafka is great for this with its partitioning and ActiveMQ with message groups， but in small single instance project may be broker overkill.I needed that feature in one project and solved it with something what doesnt look nice， similar to this pseudo code:final int consumers = 10;from("direct:source") .process(exchange -> exchange.getMessage().setHeader("partition"， exchange.getMessage().getHeader("partition_key") .hashCode() % consumers) ) .toD("seda:partition_${header.partition}");for (int i = 0; i < consumers; i++) { from("seda:partition_" + i) .to("direct:target");}It would be great to have something like Partition component (or maybe better Partition EIP?)It can be similar to seda， but with following features. Pluggable PartitionStrategy with pluggable Expression for partition key. Default can be HashPartitionStrategy. Message will be assigned to Thread based on following algorithm: target_thread_id = hash % concurrentConsumers Community feedback/discussion about this feature welcomed.,There are no comments yet on this issue.
CAMEL-15639,Claus Ibsen,2020-10-05T17:41:45.616Z,1601905305.616， where 1601905305.616 is the epoch,camel-rabbitmq - Add support for requeue at the Consumer levelCurrently， in the rabbitmq while producing the record we need to set the below header to re-queue the datarabbitmq.REQUEUE - To requue Use case: From the other applicaiton or producer missed to add the above header， re-queue will not be happen if we failed to acknowledge. In this case， consumer can decide wheather the produced record can be requeue or not. However， above header will always have highest preference at the producer level. Since， the produced force fully says this data cannot be re-queue. Consumer property will not be considered. Consumer property will be consider only if this header (rabbitmq.REQUEUE) is not available in the message body __,Hide Permalink Ayyanar added a comment - 05/Oct/20 17:43 - edited Claus Ibsen can you have a look at it Show Ayyanar added a comment - 05/Oct/20 17:43 - edited Claus Ibsen can you have a look at it Hide Permalink Claus Ibsen added a comment - 06/Oct/20 18:15 Do NOT change priority level in hope of us working on this quicker. Show Claus Ibsen added a comment - 06/Oct/20 18:15 Do NOT change priority level in hope of us working on this quicker. Hide Permalink Claus Ibsen added a comment - 08/Oct/20 16:54 Thanks for the patch Show Claus Ibsen added a comment - 08/Oct/20 16:54 Thanks for the patch
CAMEL-15638,Jan Bednar,2020-10-05T20:20:10+0000,1601914810， where 1601914810 is the epoch,Utilize some diff library to print details about failed check. Extend `ResultCollector` with List<Diff>.Eg this one looks good and is Apache 2 licensed.https://github.com/java-diff-utils/java-diff-utils,Hide Permalink Jan Bednar added a comment - 05/Oct/20 20:20 c3850ba80548b639a2bb636983d5b1c497971085 Show Jan Bednar added a comment - 05/Oct/20 20:20 c3850ba80548b639a2bb636983d5b1c497971085
CAMEL-15637,James Netherton,2020-10-05T14:08:18+0000,1601892498， where 1601892498 is the epoch,,There are no comments yet on this issue.
CAMEL-15636,Claus Ibsen,2020-10-05T14:03:11.173Z,1601892191.173， where 1601892191.173 is the epoch,We can do this faster and smarter as part of discovering other annotations and that pattern can only be InOnly or InOut in Camel 3,There are no comments yet on this issue.
CAMEL-15635,Alex Dettinger,2020-10-05T12:08:33+0000,1601885313， where 1601885313 is the epoch,,Hide Permalink Alex Dettinger added a comment - 05/Oct/20 12:08 Linked to KUDU-3200. Show Alex Dettinger added a comment - 05/Oct/20 12:08 Linked to KUDU-3200 . Hide Permalink Alex Dettinger added a comment - 22/Oct/20 17:19 Should be fixed with Kudu 1.14， though the release may not be available that soon. Show Alex Dettinger added a comment - 22/Oct/20 17:19 Should be fixed with Kudu 1.14， though the release may not be available that soon.
CAMEL-15634,Claus Ibsen,2020-10-05T11:59:25.222Z,1601884765.222， where 1601884765.222 is the epoch,Wonder if we can optimize this during camel-bean bootstrap to avoid having thrown exception that are being swalled. If we can find another way as a thrown exception is excepnsive.,There are no comments yet on this issue.
CAMEL-15633,Zineb BENDHIBA,2020-10-05T11:06:05+0000,1601881565， where 1601881565 is the epoch,upgrade from 0.10.1 to 0.15.0,There are no comments yet on this issue.
CAMEL-15632,Zineb BENDHIBA,2020-10-07T10:16:48+0000,1602051408， where 1602051408 is the epoch,Mock the Google Maps API to perform unit tests even if we don't have the API key,Hide Permalink Zineb BENDHIBA added a comment - 07/Oct/20 10:16 I closed the old PR due to rejections. Instead I want to add the possibility to set the GeoApiContext. So that there's a way to mock the API while using camel geocoder. Show Zineb BENDHIBA added a comment - 07/Oct/20 10:16 I closed the old PR due to rejections. Instead I want to add the possibility to set the GeoApiContext. So that there's a way to mock the API while using camel geocoder.
CAMEL-15631,Omar Al-Safi,2020-10-05T08:39:49+0000,1601872789， where 1601872789 is the epoch,Debezium 1.3 has been released. Would make sense to upgrade the components as well,There are no comments yet on this issue.
CAMEL-15630,Claus Ibsen,2020-10-04T08:54:22.617Z,1601787262.617， where 1601787262.617 is the epoch,Lookup this once during bootstrap， as the cost of lookup per invocation is higher on spring as it throws an exception for bean not found,There are no comments yet on this issue.
CAMEL-15629,Unassigned,2020-10-04T08:50:27+0000,1601787027， where 1601787027 is the epoch,I looked for PDFs but found none. However html page links to non-existent page where PDF may have been previously.,There are no comments yet on this issue.
CAMEL-15628,Claus Ibsen,2020-10-03T10:54:06+0000,1601708046， where 1601708046 is the epoch,[ thread #10 - seda://dataQueue] SedaConsumer WARN Error processing exchange. Exchange[]. Caused by: [java.lang.ArrayIndexOutOfBoundsException - Index 27 out of bounds for length 27]java.lang.ArrayIndexOutOfBoundsException: Index 27 out of bounds for length 27 at java.util.LinkedList.toArray(LinkedList.java:1057) ~[?:?] at java.util.LinkedList.addAll(LinkedList.java:412) ~[?:?] at java.util.LinkedList.addAll(LinkedList.java:391) ~[?:?] at java.util.LinkedList.<init>(LinkedList.java:123) ~[?:?] at org.apache.camel.support.ExchangeHelper.safeCopyProperties(ExchangeHelper.java:932) ~[camel-support-3.6.0-SNAPSHOT.jar:3.6.0-SNAPSHOT] at org.apache.camel.support.ExchangeHelper.copyExchangeAndSetCamelContext(ExchangeHelper.java:849) ~[camel-support-3.6.0-SNAPSHOT.jar:3.6.0-SNAPSHOT] at org.apache.camel.support.ExchangeHelper.copyExchangeAndSetCamelContext(ExchangeHelper.java:835) ~[camel-support-3.6.0-SNAPSHOT.jar:3.6.0-SNAPSHOT] at org.apache.camel.component.seda.SedaConsumer.prepareExchange(SedaConsumer.java:229) ~[camel-seda-3.6.0-SNAPSHOT.jar:3.6.0-SNAPSHOT] at org.apache.camel.component.seda.SedaConsumer.doRun(SedaConsumer.java:185) [camel-seda-3.6.0-SNAPSHOT.jar:3.6.0-SNAPSHOT] at org.apache.camel.component.seda.SedaConsumer.run(SedaConsumer.java:130) [camel-seda-3.6.0-SNAPSHOT.jar:3.6.0-SNAPSHOT] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?] at java.lang.Thread.run(Thread.java:834) [?:?],Hide Permalink Claus Ibsen added a comment - 03/Oct/20 10:54 This is only if you turn on message history (not by default) Show Claus Ibsen added a comment - 03/Oct/20 10:54 This is only if you turn on message history (not by default)
CAMEL-15627,Claus Ibsen,2020-10-03T07:40:38+0000,1601696438， where 1601696438 is the epoch,Some expressions have init logic to setup resources and whatnot. But some places we call init on evaluate/matches. Instead we should ensure init is first-class so we dont need to have this runtime check overhead.Just follow this where its used in the codeorg.apache.camel.Expression#init,There are no comments yet on this issue.
CAMEL-15626,Unassigned,2020-10-03T07:12:25+0000,1601694745， where 1601694745 is the epoch,Its mostly in some unit tests， but StringBuilder is better than StringBuffer. Also when biased locking is removed from JVM in the future.And there is this on leftcamel-base/src/main/java/org/apache/camel/processor/aggregate/StringAggregationStrategy.java: StringBuffer result; // Aggregate in StringBuffer instead of StringBuilder， to make it thread safegit grep StringBuffer,There are no comments yet on this issue.
CAMEL-15625,Unassigned,2020-10-03T05:59:07+0000,1601690347， where 1601690347 is the epoch,Maybe something we can do alahttps://twitter.com/maciejwalkowiak/status/1312169318155653121?s=20,There are no comments yet on this issue.
CAMEL-15624,Unassigned,2020-10-03T00:25:42.669Z,1601670342.669， where 1601670342.669 is the epoch,I'm trying to test an rest api with camel-undertow-starter v3.5.0 and want to configure the hostOptions to control the threads referred by this， https://camel.apache.org/camel-spring-boot/latest/undertow-starter.htmlHere is my configuration as an example， camel.component.undertow.host-options.io-threads=2camel.component.undertow.host-options.worker-threads=5In my STS 4.0， it complains error as java.lang.String type. (screenshot attached)this property actually doesn't recognised on runtime undertow component.With some of investigation， I found a clue from the maven tooling. Will send a PR if I could fix this. UPDATE: I sent 2 PRs to fix this issue on /camel and /camel-spring-boot. camel-wordpress in camel PR should be merged in advance， camel-wordpress-starter in camel-spring-boot is referring the module for the source auto generation.,Hide Permalink Alex Park added a comment - 03/Oct/20 09:58 This is actually source code generation problem.... I found a code where the suppressed the complex types into String in camel-spring-boot-generator-maven-plugin. SpringBootAutoConfigurationMojo.java Line: 686~700. screenshot attached. In the comment， it says spring-boot doesn't support complex types. After I removed the block of codes， and I compiled and fixed the camel-undertow-starter auto config problem successfully. And the all properties in host-options are working!!! Fantastic!! However， it's source generation tools for all camel springboot starters. When I run all unit test cases I've got another errors in other 4 modules. camel-activemq-starter : compile error by generated codes for Long type value camel-debezium-mongodb-starter : compile error by generated codes for Long type value camel-reactive-streams-starter : compile error in ReactiveStreamsServiceAutoConfiguration.java camel-wordpress-starter : compile error by conflicting class name WordpressComponentConfiguration with camel-wordpress module. I'm working on it.... Show Alex Park added a comment - 03/Oct/20 09:58 This is actually source code generation problem.... I found a code where the suppressed the complex types into String in camel-spring-boot-generator-maven-plugin. SpringBootAutoConfigurationMojo.java Line: 686~700. screenshot attached. In the comment， it says spring-boot doesn't support complex types. After I removed the block of codes， and I compiled and fixed the camel-undertow-starter auto config problem successfully. And the all properties in host-options are working!!! Fantastic!! However， it's source generation tools for all camel springboot starters. When I run all unit test cases I've got another errors in other 4 modules. camel-activemq-starter : compile error by generated codes for Long type value camel-debezium-mongodb-starter : compile error by generated codes for Long type value camel-reactive-streams-starter : compile error in ReactiveStreamsServiceAutoConfiguration.java camel-wordpress-starter : compile error by conflicting class name WordpressComponentConfiguration with camel-wordpress module. I'm working on it.... Hide Permalink Alex Park added a comment - 03/Oct/20 13:59 sent 2 PRs to fix this issue. Regarding of 4 other module issues. camel-activemq-starter : compile error by generated codes for Long type value => actually referring in camel-jms config， some properties declared long type， but java.time.Duration on @UriParam camel-debezium-mongodb-starter : compile error by generated codes for Long type value => in camel-debezium-mongodb， some properties declared long & int type， but java.time.Duration on @UriParam camel-reactive-streams-starter : compile error in ReactiveStreamsServiceAutoConfiguration.java => Fixed logic to handle complex type camel-wordpress-starter : compile error by conflicting class name WordpressComponentConfiguration with camel-wordpress module. => This one is conflicted with WordpressComponentConfiguration in camel-wordpress after fixing complex types. So， I reviewed camel-wordpress and refactored class name to avoid conflicts and it should be correct name by document. A function convertDurationToMillisec() added to fix #1 and #2 issue . Show Alex Park added a comment - 03/Oct/20 13:59 sent 2 PRs to fix this issue. Regarding of 4 other module issues. camel-activemq-starter : compile error by generated codes for Long type value => actually referring in camel-jms config， some properties declared long type， but java.time.Duration on @UriParam camel-debezium-mongodb-starter : compile error by generated codes for Long type value => in camel-debezium-mongodb， some properties declared long & int type， but java.time.Duration on @UriParam camel-reactive-streams-starter : compile error in ReactiveStreamsServiceAutoConfiguration.java => Fixed logic to handle complex type camel-wordpress-starter : compile error by conflicting class name WordpressComponentConfiguration with camel-wordpress module. => This one is conflicted with WordpressComponentConfiguration in camel-wordpress after fixing complex types. So， I reviewed camel-wordpress and refactored class name to avoid conflicts and it should be correct name by document. A function convertDurationToMillisec() added to fix #1 and #2 issue .
CAMEL-15623,Claus Ibsen,2020-10-02T15:41:05+0000,1601638865， where 1601638865 is the epoch,I have two bundles with blueprint.blueprint 1 bundle:<bean id="impl" class="com.example.InterfaceImpl"/><service ref="impl" interface="com.example.Interface"/>blueprint 2 bundle: <reference id="impl" interface="com.example.Interface"/><camelContext xmlns="http://camel.apache.org/schema/blueprint"> <route> <from uri="timer:s?period=1000"/> <bean ref="impl" method="hi" /> </route></camelContext> and I get exception Caused by: org.apache.camel.component.bean.MethodNotFoundException: Method with name: hi not found on bean: com.example.InterfaceImpl of type: Proxy06b9dc80_2890_4f85_8bea_320bc0a4d9cb,Hide Permalink Borodina Valery added a comment - 02/Oct/20 15:41 I search in camel-bean https://github.com/apache/camel/blob/992a6b9685f4db49236e540af2546548cf99a7d3/components/camel-bean/src/main/java/org/apache/camel/component/bean/RegistryBean.java#L177 what proxy not extended com.example.InterfaceImpl Show Borodina Valery added a comment - 02/Oct/20 15:41 I search in camel-bean https://github.com/apache/camel/blob/992a6b9685f4db49236e540af2546548cf99a7d3/components/camel-bean/src/main/java/org/apache/camel/component/bean/RegistryBean.java#L177 what proxy not extended com.example.InterfaceImpl Hide Permalink Andrea Cosentino added a comment - 02/Oct/20 15:43 Please， don't mark every issue you open as critical. Show Andrea Cosentino added a comment - 02/Oct/20 15:43 Please， don't mark every issue you open as critical. Hide Permalink Claus Ibsen added a comment - 02/Oct/20 15:52 I think there is another ticket about something like this. Show Claus Ibsen added a comment - 02/Oct/20 15:52 I think there is another ticket about something like this.
CAMEL-15622,Claus Ibsen,2020-10-02T18:58:48+0000,1601650728， where 1601650728 is the epoch,Hi，I have this stack: camel spring boot starter camel-sql component camel endpoint DSLI have this code:.to(sql("classpath:sql/zentiva.sql").dataSource("zentivaDataSource"))If I use instance of DataSource object and set it in .datasource(dataSourceBean()) there is actually a problem that camel is looking in springbootcamelcontext for the name of the result of dataSourceBean.toString() which might be like HikariDataSource (null). Lookup for wrong bean name happens inorg.apache.camel.support.CamelContextHelper#mandatoryLookupAndConvertRoute with bean instance is not working properly. As a workaround， we have to use name of the bean.,Hide Permalink Avinash Dongre added a comment - 02/Oct/20 18:58 In the camel-sql component， the parameters map holds the key-value pair for "datasource" and its configured instance. But this instance is being treated as "String" and being looked up in the registry. I think we can simply use this datasource if it turns out to be an instance of the DataSource class otherwise we can look it up as usual. @Override protected Endpoint createEndpoint(String uri， String remaining， Map<String， Object> parameters) throws Exception { DataSource target = null; // endpoint options overrule component configured datasource DataSource ds = resolveAndRemoveReferenceParameter(parameters， "dataSource"， DataSource.class); Show Avinash Dongre added a comment - 02/Oct/20 18:58 In the camel-sql component， the parameters map holds the key-value pair for "datasource" and its configured instance. But this instance is being treated as "String" and being looked up in the registry. I think we can simply use this datasource if it turns out to be an instance of the DataSource class otherwise we can look it up as usual. @Override protected Endpoint createEndpoint( String uri， String remaining， Map< String ， Object > parameters) throws Exception { DataSource target = null ; // endpoint options overrule component configured datasource DataSource ds = resolveAndRemoveReferenceParameter(parameters， "dataSource" ， DataSource.class); Hide Permalink Adam Ostrožlík added a comment - 03/Oct/20 07:55 - edited What about resolving this issue in lower level in org.apache.camel.support.DefaultComponent#resolveAndRemoveReferenceParameter(java.util.Map<java.lang.String，java.lang.Object>， java.lang.String， java.lang.Class<T>) There are parameter and also type specified (in this case "dataSource" and DataSource.class). The algorithm would just get the parameter and If types match， it would simply return the value from parameters without any transformation. Maybe something like this? public < T extends Object > T resolveAndRemoveReferenceParameter(Map < String， Object > parameters， String key， Class < T > type) { if (parameters.containsKey(key) && type.isInstance(parameters.get(key).getClass()) { return type.cast(parameters.get(key)); } return resolveAndRemoveReferenceParameter(parameters， key， type， null); } Show Adam Ostrožlík added a comment - 03/Oct/20 07:55 - edited What about resolving this issue in lower level in org.apache.camel.support.DefaultComponent#resolveAndRemoveReferenceParameter(java.util.Map<java.lang. String ，java.lang. Object >， java.lang. String ， java.lang. Class <T>) There are parameter and also type specified (in this case "dataSource" and DataSource.class). The algorithm would just get the parameter and If types match， it would simply return the value from parameters without any transformation. Maybe something like this? public < T extends Object > T resolveAndRemoveReferenceParameter(Map < String ， Object > parameters， String key， Class < T > type) { if (parameters.containsKey(key) && type.isInstance(parameters.get(key).getClass()) { return type. cast (parameters.get(key)); } return resolveAndRemoveReferenceParameter(parameters， key， type， null ); } Hide Permalink Avinash Dongre added a comment - 09/Oct/20 01:25 Adam Ostrožlík: This is even better. This will also address the same problem in other components. Are you going to provide a pull request to fix this? Show Avinash Dongre added a comment - 09/Oct/20 01:25 Adam Ostrožlík : This is even better. This will also address the same problem in other components. Are you going to provide a pull request to fix this? Hide Permalink Adam Ostrožlík added a comment - 09/Oct/20 04:57 Sure， I will provide it， probably today but tomorrow at latest Show Adam Ostrožlík added a comment - 09/Oct/20 04:57 Sure， I will provide it， probably today but tomorrow at latest Hide Permalink Adam Ostrožlík added a comment - 10/Oct/20 17:28 Proposed fix in https://github.com/apache/camel/pull/4414 Show Adam Ostrožlík added a comment - 10/Oct/20 17:28 Proposed fix in https://github.com/apache/camel/pull/4414 Hide Permalink Claus Ibsen added a comment - 12/Oct/20 11:26 Thanks for reporting and the PR Show Claus Ibsen added a comment - 12/Oct/20 11:26 Thanks for reporting and the PR
CAMEL-15621,Unassigned,2020-10-02T13:34:52+0000,1601631292， where 1601631292 is the epoch,currently， if I havepublic class PartialRoute extends RouteBuilder { public void configure() { from("file:src/data?noop=true"); }}the org.apache.camel.parser.RouteBuilderParser.parseRouteBuilderTree(JavaClassSource， String， String， boolean) method is returning an empty list.i'm expecting that i tis returning a list of one element with the "from",Hide Permalink Aurélien Pupier added a comment - 02/Oct/20 13:34 looking to provide a Pull Request Show Aurélien Pupier added a comment - 02/Oct/20 13:34 looking to provide a Pull Request
CAMEL-15620,Unassigned,2020-10-02T12:32:58+0000,1601627578， where 1601627578 is the epoch,AWS Kinesis requires CBOR so would be nice to provide it as transitive dependency of the component.,There are no comments yet on this issue.
CAMEL-15619,Jiri Ondrusek,2020-10-02T12:31:32+0000,1601627492， where 1601627492 is the epoch,Serialization and deserialization of `ShiroSecurityToken` is used in this component. (see https://github.com/apache/camel/blob/master/components/camel-shiro/src/main/java/org/apache/camel/component/shiro/security/ShiroSecurityHelper.java#L36 and https://github.com/apache/camel/blob/master/components/camel-shiro/src/main/java/org/apache/camel/component/shiro/security/ShiroSecurityProcessor.java#L126) Graal VM doesn't support `ObjectOutputStream.writeObject()` (see https://github.com/oracle/graal/issues/460). Which makes it impossible for camel-quarkus to make this component work in native (https://github.com/apache/camel-quarkus/issues/1844). There is a simple solution， to refactor serialization into a mechanism， which allows some kind of overriding.(for example: Provide serialization interface. then quarkus could provide its own implementation),There are no comments yet on this issue.
CAMEL-15618,Unassigned,2020-10-02T08:56:44+0000,1601614604， where 1601614604 is the epoch,Hi，I am trying to use the kubernetes component to an https-kubernetes-master but the component is doing only HTTP requests， is there a way to force the component to do HTTPS?Below stacktrace: io.fabric8.kubernetes.client.KubernetesClientException: Failure executing: POST at: http://kubernetes.default/k8s/clusters/c-9rw6k/apis/batch/v1/namespaces/withoutistio/jobs. Message: Client sent an HTTP request to an HTTPS server.. Message History (complete message history is disabled)---------------------------------------------------------------------------------------------------------------------------------------RouteId ProcessorId Processor Elapsed (ms)[journey.sftcontrol] [journey.sftcontrol] [from[http://0.0.0.0:8080/myms/public/task?httpMethodRestrict=POST%2] [ 1198] ...[kubernetes-jobcrea] [to1 ] [kubernetes-job:///kubernetes.default/k8s/clusters/c-9rw6k?oauthToken=kube] [ 0] Stacktrace---------------------------------------------------------------------------------------------------------------------------------------io.fabric8.kubernetes.client.KubernetesClientException: Failure executing: POST at: http://kubernetes.default/k8s/clusters/c-9rw6k/apis/batch/v1/namespaces/withoutistio/jobs. Message: Client sent an HTTP request to an HTTPS server.. at io.fabric8.kubernetes.client.dsl.base.OperationSupport.requestFailure(OperationSupport.java:568) at io.fabric8.kubernetes.client.dsl.base.OperationSupport.assertResponseCode(OperationSupport.java:507) at io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleResponse(OperationSupport.java:471) at io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleResponse(OperationSupport.java:430) at io.fabric8.kubernetes.client.dsl.base.OperationSupport.handleCreate(OperationSupport.java:251) at io.fabric8.kubernetes.client.dsl.base.BaseOperation.handleCreate(BaseOperation.java:848) at io.fabric8.kubernetes.client.dsl.base.BaseOperation.create(BaseOperation.java:368) at org.apache.camel.component.kubernetes.job.KubernetesJobProducer.doCreateJob(KubernetesJobProducer.java:149) at org.apache.camel.component.kubernetes.job.KubernetesJobProducer.process(KubernetesJobProducer.java:76) at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:67) at org.apache.camel.processor.SendProcessor.lambda$process$2(SendProcessor.java:186) at org.apache.camel.impl.engine.DefaultProducerCache.doInAsyncProducer(DefaultProducerCache.java:309) at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:186) at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:60) at org.apache.camel.processor.Pipeline.process(Pipeline.java:147) at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:286) at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83) at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:40) at org.apache.camel.component.undertow.UndertowConsumer.handleRequest(UndertowConsumer.java:230) at io.undertow.server.Connectors.executeRootHandler(Connectors.java:370) at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:830) at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35) at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:2019) at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1558) at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1449) at java.lang.Thread.run(Thread.java:748),Hide Permalink Andrea Cosentino added a comment - 02/Oct/20 08:56 This seems more a request for the user or dev mailing list Show Andrea Cosentino added a comment - 02/Oct/20 08:56 This seems more a request for the user or dev mailing list Hide Permalink Emmerson added a comment - 02/Oct/20 09:00 Hi， the component can not speak with https server， I think this can be cosidered and issue. Show Emmerson added a comment - 02/Oct/20 09:00 Hi， the component can not speak with https server， I think this can be cosidered and issue. Hide Permalink Andrea Cosentino added a comment - 02/Oct/20 09:09 The title seems more like a question. Let's leave this open then. Please add a reproducer. Show Andrea Cosentino added a comment - 02/Oct/20 09:09 The title seems more like a question. Let's leave this open then. Please add a reproducer. Hide Permalink Emmerson added a comment - 02/Oct/20 09:17 Thank you， 1) You need to have a kubernetes cluster where masters will exposing the API via HTTPS. 2) you can use this example https://github.com/Emmerson-Miranda/camel/tree/master/camel3-cdi/cdi-k8s-pocs 3) replace src/main/resources/application.properties master-url and token with the ones for your cluster. Show Emmerson added a comment - 02/Oct/20 09:17 Thank you， 1) You need to have a kubernetes cluster where masters will exposing the API via HTTPS. 2) you can use this example https://github.com/Emmerson-Miranda/camel/tree/master/camel3-cdi/cdi-k8s-pocs 3) replace src/main/resources/application.properties master-url and token with the ones for your cluster.
CAMEL-15617,Unassigned,2020-10-01T20:23:06+0000,1601569386， where 1601569386 is the epoch,When Camel receives a PubSub message with reserved Google PubSub attributes these are set on a Camel header and passed on to any message sender. These reserved attributes are not allowed to be set on an outgoing message so this throws an error.INVALID_ARGUMENT: The request contains an attribute key that is not valid (key=googclient_deliveryattempt). Attribute keys must be non-empty and must not begin with 'goog' (case-insensitive).1) We can filter out these reserved attributes before sending.2) We could also use another Camel header to store the reserved attributes which will not be used when sending.3) We could also map all attributes to headers and vice versa like we do with other transports. The real issues with this is that PubSub only supports string values as attributes. And we still need to filter out the reserved attributes.I think we should implement option 1 regardless， to make sure this never cause issues again. Perhaps combine it with option 2 to map to "googclient_deliveryattempt" attribute to the "CamelGooglePubsub.DeliveryAttempt" header.I've already prepared a fix based on the proposed solution 1: https://github.com/apache/camel/pull/4343,There are no comments yet on this issue.
CAMEL-15616,Ramu,2020-10-06T06:42:10+0000,1601952130， where 1601952130 is the epoch,We are using 9.9.x but there is a 10.x release out,Hide Permalink Andrea Cosentino added a comment - 06/Oct/20 06:42 Please look at the Karaf feature too Ramu Show Andrea Cosentino added a comment - 06/Oct/20 06:42 Please look at the Karaf feature too Ramu Hide Permalink Claus Ibsen added a comment - 09/Oct/20 11:45 - edited Had to revert this as this causes camel-xj to fail (it has a number of test failures). It seems now that it genearates wrong output when it does xml to json transformation. https://github.com/apache/camel/commit/7738cc3e4541a8fd8dfd5a99b4f794bc5ffa1416 Show Claus Ibsen added a comment - 09/Oct/20 11:45 - edited Had to revert this as this causes camel-xj to fail (it has a number of test failures). It seems now that it genearates wrong output when it does xml to json transformation. https://github.com/apache/camel/commit/7738cc3e4541a8fd8dfd5a99b4f794bc5ffa1416
CAMEL-15615,Andrea Cosentino,2020-10-09T10:28:05+0000,1602224885， where 1602224885 is the epoch,If you try to run a simple route like this one:from("infinispan://mycache?hosts=localhost&sync=false&eventTypes=CACHE_ENTRY_CREATED") from("infinispan://mycache?hosts=localhost&sync=false&eventTypes=CACHE_ENTRY_CREATED") .log("Header ${header.CamelInfinispanEventType}");This will fail with the following WARN2020-10-01 20:39:06，042 [-async-pool-1-2] WARN HeaderDecoder - ISPN004039: Unable to complete reading event from server 127.0.0.1/127.0.0.1:112222020-10-01 20:39:06，042 [-async-pool-1-2] WARN HeaderDecoder - ISPN004039: Unable to complete reading event from server 127.0.0.1/127.0.0.1:11222org.infinispan.client.hotrod.exceptions.HotRodClientException: ISPN004034: Unable to unmarshall bytes 636F6170 at org.infinispan.client.hotrod.marshall.MarshallerUtil.bytes2obj(MarshallerUtil.java:72) ~[infinispan-client-hotrod-11.0.3.Final.jar:11.0.3.Final] at org.infinispan.client.hotrod.DataFormat.keyToObj(DataFormat.java:103) ~[infinispan-client-hotrod-11.0.3.Final.jar:11.0.3.Final] at org.infinispan.client.hotrod.impl.protocol.Codec21.readCacheEvent(Codec21.java:78) ~[infinispan-client-hotrod-11.0.3.Final.jar:11.0.3.Final] at org.infinispan.client.hotrod.impl.transport.netty.HeaderDecoder.decode(HeaderDecoder.java:156) [infinispan-client-hotrod-11.0.3.Final.jar:11.0.3.Final] at org.infinispan.client.hotrod.impl.transport.netty.HintedReplayingDecoder.callDecode(HintedReplayingDecoder.java:94) [infinispan-client-hotrod-11.0.3.Final.jar:11.0.3.Final] at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276) [netty-codec-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) [netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) [netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357) [netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.handler.timeout.IdleStateHandler.channelRead(IdleStateHandler.java:286) [netty-handler-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) [netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) [netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357) [netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) [netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379) [netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365) [netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) [netty-transport-4.1.51.Final.jar:4.1.51.Final] at io.netty.channel.epoll.AbstractEpollStreamChannel$EpollStreamUnsafe.epollInReady(AbstractEpollStreamChannel.java:792) [netty-transport-native-epoll-4.1.51.Final-linux-x86_64.jar:4.1.51.Final] at io.netty.channel.epoll.EpollEventLoop.processReady(EpollEventLoop.java:475) [netty-transport-native-epoll-4.1.51.Final-linux-x86_64.jar:4.1.51.Final] at io.netty.channel.epoll.EpollEventLoop.run(EpollEventLoop.java:378) [netty-transport-native-epoll-4.1.51.Final-linux-x86_64.jar:4.1.51.Final] at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989) [netty-common-4.1.51.Final.jar:4.1.51.Final] at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) [netty-common-4.1.51.Final.jar:4.1.51.Final] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_252] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_252] at java.lang.Thread.run(Thread.java:748) [?:1.8.0_252]Caused by: java.lang.IllegalStateException: Unexpected tag : 99 (Field number : 12， Wire type : 3) at org.infinispan.protostream.WrappedMessage.readMessage(WrappedMessage.java:364) ~[protostream-4.3.3.Final.jar:?] at org.infinispan.protostream.ProtobufUtil.fromWrappedByteArray(ProtobufUtil.java:161) ~[protostream-4.3.3.Final.jar:?] at org.infinispan.commons.marshall.ProtoStreamMarshaller.objectFromByteBuffer(ProtoStreamMarshaller.java:45) ~[infinispan-commons-11.0.3.Final.jar:11.0.3.Final] at org.infinispan.commons.marshall.AbstractMarshaller.objectFromByteBuffer(AbstractMarshaller.java:82) ~[infinispan-commons-11.0.3.Final.jar:11.0.3.Final] at org.infinispan.client.hotrod.marshall.MarshallerUtil.bytes2obj(MarshallerUtil.java:56) ~[infinispan-client-hotrod-11.0.3.Final.jar:11.0.3.Final] ... 24 more,Hide Permalink Andrea Cosentino added a comment - 09/Oct/20 10:28 This turns out to be related to the encoding of the cache. It's important to define the encoding on the cache configuration， otherwise we'll need this Warning. We need to add some documentation about this. So I'll leave this open. Show Andrea Cosentino added a comment - 09/Oct/20 10:28 This turns out to be related to the encoding of the cache. It's important to define the encoding on the cache configuration， otherwise we'll need this Warning. We need to add some documentation about this. So I'll leave this open. Hide Permalink Andrea Cosentino added a comment - 12/Oct/20 16:19 Docs updated with a note. Show Andrea Cosentino added a comment - 12/Oct/20 16:19 Docs updated with a note.
CAMEL-15614,Alex Dettinger,2020-10-01T16:40:22+0000,1601556022， where 1601556022 is the epoch,,There are no comments yet on this issue.
CAMEL-15613,Unassigned,2020-10-01T16:04:01.528Z,1601553841.528， where 1601553841.528 is the epoch,Noticed a different behaviour of Camel timer with 3.5.0 when compared with Camel version 2.24.3. In 3.5.0. Camel timer fires events as if it is fixedRate is true (even if I explicitly make it false in the Camel URL). The same code behaves differently in Camel 2.24.3. I am attaching sample code for 3.5.0 version.,Hide Permalink Chandrakant Hardahe added a comment - 01/Oct/20 17:11 Thanks Sreejesh for reporting this， let me look at the reproducer Show Chandrakant Hardahe added a comment - 01/Oct/20 17:11 Thanks Sreejesh for reporting this， let me look at the reproducer Hide Permalink Jan Bednar added a comment - 01/Oct/20 17:24 Timer component is working correctly. You have used delay EIP， which is non blocking by default since Camel 3. https://camel.apache.org/components/latest/eips/delay-eip.html https://github.com/apache/camel/commit/d17a41fb6182e2991c31cb256bc093bace6b5e26 Just replace .delay(60000) with .delay(60000).syncDelayed() and you will see the timer is actually correctly blocked. Show Jan Bednar added a comment - 01/Oct/20 17:24 Timer component is working correctly. You have used delay EIP， which is non blocking by default since Camel 3. https://camel.apache.org/components/latest/eips/delay-eip.html https://github.com/apache/camel/commit/d17a41fb6182e2991c31cb256bc093bace6b5e26 Just replace .delay(60000) with .delay(60000).syncDelayed() and you will see the timer is actually correctly blocked. Hide Permalink Sreejesh added a comment - 02/Oct/20 05:13 Thank you so much! Working as expected. Didn't know that the behavior changed in 3. Show Sreejesh added a comment - 02/Oct/20 05:13 Thank you so much! Working as expected. Didn't know that the behavior changed in 3.
CAMEL-15612,Unassigned,2020-10-01T14:39:38.032Z,1601548778.032， where 1601548778.032 is the epoch,Hello， we use shade-plugin for build and deploy services to k8s.After starting the service builded by the maven-shade-plugin， it is impossible to find the standart converter from String to DOM Document. At the same time， when launched through maven-camel-plugin， everything works fine. Example project in attachment.Example route:from("timer:foo?period=1000") .setBody(constant("<root>simple xml</root>")) .process(x->{ Document doc = x.getMessage().getBody(Document.class); if (doc == null) x.setProperty("MSG"， "impossible converted String to DOM"); else x.setProperty("MSG"， "String to DOM converted"); }) .log("${exchangeProperty.MSG}"); Log out by camel-plugin: String to DOM convertedLog out by shade-plugin: impossible converted String to DOM,Hide Permalink Claus Ibsen added a comment - 01/Oct/20 15:06 There is a FAQ about uber JAR and what to do with shading Show Claus Ibsen added a comment - 01/Oct/20 15:06 There is a FAQ about uber JAR and what to do with shading Hide Permalink Claus Ibsen added a comment - 01/Oct/20 15:17 FAQ is here https://camel.apache.org/manual/latest/faq/how-do-i-use-a-big-uber-jar.html Show Claus Ibsen added a comment - 01/Oct/20 15:17 FAQ is here https://camel.apache.org/manual/latest/faq/how-do-i-use-a-big-uber-jar.html Hide Permalink Jan Bednar added a comment - 01/Oct/20 16:18 And here https://camel.apache.org/manual/latest/faq/how-to-create-executable-jar-camel-main.html Show Jan Bednar added a comment - 01/Oct/20 16:18 And here https://camel.apache.org/manual/latest/faq/how-to-create-executable-jar-camel-main.html Hide Permalink Shmakov Alexey added a comment - 02/Oct/20 04:53 thanks Show Shmakov Alexey added a comment - 02/Oct/20 04:53 thanks
CAMEL-15611,Claus Ibsen,2020-10-01T18:06:07+0000,1601561167， where 1601561167 is the epoch,with this kind of xml route:<camel:camelContext id="camel" xmlns:camel="http://camel.apache.org/schema/spring"> <camel:route id="a route"> <camel:from uri="direct:cafe"/> <camel:to uri="direct:drink"/> </camel:route></camel:camelContext>the XmlRouteParser.parseXmlRouteTree is throwing an NPE due to the combination of CAMEL-15610 and that there is no support of prefix namespaces.With CAMEL-15509 fixed， it will return an empty list.It is expected to have 2 elements in the list， one for the from and one for from,Hide Permalink Chandrakant Hardahe added a comment - 01/Oct/20 18:06 Thanks Aurélien Pupier for reporting it， I'll work into this Show Chandrakant Hardahe added a comment - 01/Oct/20 18:06 Thanks Aurélien Pupier for reporting it， I'll work into this Hide Permalink Aurélien Pupier added a comment - 13/Oct/20 08:15 Chandrakant Hardahe Any news on this improvement? There was a call for cutting the 3.6 release https://camel.zulipchat.com/#narrow/stream/257298-camel/topic/Last.20minute.20for.20Camel.203.2E6/near/212820278 Show Aurélien Pupier added a comment - 13/Oct/20 08:15 Chandrakant Hardahe Any news on this improvement? There was a call for cutting the 3.6 release https://camel.zulipchat.com/#narrow/stream/257298-camel/topic/Last.20minute.20for.20Camel.203.2E6/near/212820278 Hide Permalink Claus Ibsen added a comment - 13/Oct/20 09:27 Okay as we are cutting 3.6 then I fixed this Show Claus Ibsen added a comment - 13/Oct/20 09:27 Okay as we are cutting 3.6 then I fixed this
CAMEL-15610,Unassigned,2020-10-01T13:40:46+0000,1601545246， where 1601545246 is the epoch,java.lang.NullPointerException at org.apache.camel.parser.helper.CamelXmlTreeParserHelper.parseCamelRouteTree(CamelXmlTreeParserHelper.java:47) at org.apache.camel.parser.XmlRouteParser.parseXmlRouteTree(XmlRouteParser.java:99) at com.github.cameltooling.lsp.internal.documentsymbol.DocumentSymbolXMLProcessor.getSymbolInformations(DocumentSymbolXMLProcessor.java:56)minimal test to reproduce: @Test void minimalTestShowingNPE() throws IOException { String textTotest = "<camelContext id=\"camel\" xmlns=\"http://camel.apache.org/schema/spring\">\r\n" + "\r\n" + " <route id=\"a route\">\r\n" + " </route>\r\n" + "\r\n" + "</camelContext>\n"; File camelFile = File.createTempFile("camelFile"， ".xml"); Files.write(textTotest.getBytes()， camelFile); XmlRouteParser.parseXmlRouteTree(new ByteArrayInputStream(textTotest.getBytes())， ""， camelFile.getAbsolutePath()); },Hide Permalink Aurélien Pupier added a comment - 01/Oct/20 13:40 looking to provide a PR Show Aurélien Pupier added a comment - 01/Oct/20 13:40 looking to provide a PR
CAMEL-15609,Andrea Cosentino,2020-10-01T09:54:14+0000,1601531654， where 1601531654 is the epoch,It makes sense， instead of having only the header.,There are no comments yet on this issue.
CAMEL-15608,James Netherton,2020-10-01T08:17:36+0000,1601525856， where 1601525856 is the epoch,Currently the platform-http-vertx component does not handle multipart uploads.We should add attachment support like the other camel HTTP component consumers have.,There are no comments yet on this issue.
CAMEL-15607,Luca Burgazzoli,2020-10-01T07:41:56+0000,1601523716， where 1601523716 is the epoch,,Hide Permalink Claus Ibsen added a comment - 01/Oct/20 07:41 This code should not only be done once during initial resolve // as first iteration， check if there is a language instance for the given name // bound to the registry answer = ResolverHelper.lookupLanguageInRegistryWithFallback(getCamelContextReference()， language); if (answer != null) { Language old = languages.put(language， answer); // if the language has already been loaded， thus it is already registered // in the local language cache， we can return it as it has already been // initialized and configured if (old == answer) { return answer; } We should not lookup in registry each time. A language is not a prototype scoped resource. Its some old cruft from spring xml <bean> for custom languages where you can define it as prototype. But we dont want this kind of weird feature. Show Claus Ibsen added a comment - 01/Oct/20 07:41 This code should not only be done once during initial resolve // as first iteration， check if there is a language instance for the given name // bound to the registry answer = ResolverHelper.lookupLanguageInRegistryWithFallback(getCamelContextReference()， language); if (answer != null) { Language old = languages.put(language， answer); // if the language has already been loaded， thus it is already registered // in the local language cache， we can return it as it has already been // initialized and configured if (old == answer) { return answer; } We should not lookup in registry each time. A language is not a prototype scoped resource. Its some old cruft from spring xml <bean> for custom languages where you can define it as prototype. But we dont want this kind of weird feature.
CAMEL-15606,Claus Ibsen,2020-10-02T10:41:34+0000,1601620894， where 1601620894 is the epoch,We can optimize the simple language parser for the bean function to resolve the language once during parsing - but this requires to propagate the camel context so it can resolve the language during parsing,Hide Permalink Claus Ibsen added a comment - 02/Oct/20 10:41 - edited There are potential a few other parts in SimpleFunctionExpression we can now eager create expressions instead of when exchange is evaluated. DONE Show Claus Ibsen added a comment - 02/Oct/20 10:41 - edited There are potential a few other parts in SimpleFunctionExpression we can now eager create expressions instead of when exchange is evaluated. DONE
CAMEL-15605,Claus Ibsen,2020-10-01T18:39:09+0000,1601563149， where 1601563149 is the epoch,Some of the languages can be configured with various options like bean/xtokenizer/xpath etc， however this makes those languages non singleton， which hampers performance as the language is resolved for each message which then is a bottleneck.Instead we should introduce a createExpression api that takes var args as parameters so they can be provided on-demand and the language can be singleton.,Hide Permalink Claus Ibsen added a comment - 01/Oct/20 18:39 - edited Last language to fix is xquery. DONE Show Claus Ibsen added a comment - 01/Oct/20 18:39 - edited Last language to fix is xquery. DONE
CAMEL-15604,Jan Bednar,2020-10-04T17:17:49+0000,1601817469， where 1601817469 is the epoch,MongoDB 4.3.1 added support for allowDiskUse flag with find queries.https://jira.mongodb.org/browse/SERVER-43683We currently set that flag only for for aggregation operations.Reported on mailing listhttp://camel.465427.n5.nabble.com/Camel-Mongodb-sorting-with-allowDiskUse-not-working-tc5886534.html,Hide Permalink Jan Bednar added a comment - 04/Oct/20 17:17 af7e383e9fc1d25ce9665f74d33672cc5b507952 Show Jan Bednar added a comment - 04/Oct/20 17:17 af7e383e9fc1d25ce9665f74d33672cc5b507952
CAMEL-15603,Andrea Cosentino,2020-09-30T17:18:17+0000,1601471897， where 1601471897 is the epoch,Infinispan 11 is secured by default https://infinispan.org/blog/2020/06/15/infinispan-11/As of today the only way we have to add security credentials is through using a Hot Rod Client placed in registry. We need to make these configurations explicit.,There are no comments yet on this issue.
CAMEL-15602,Claus Ibsen,2020-09-30T16:17:32+0000,1601468252， where 1601468252 is the epoch,camel.beans.mongo: '#class:com.mongodb.client.MongoClients#create("mongodb://mongoadmin:password@mongodb.mongodb:27017")'And if we want to use ENV variables for username and password then its currently not possible with"mongodb://env:XXX:env:YYY@mongodb.mongodb:27017",Hide Permalink Claus Ibsen added a comment - 30/Sep/20 16:17 Or if you do username=mongoadmin password=mongoadmin mongoServer=mongodb.mongodb mongoServerPort=27017 connectionBeanDef=#class:com.mongodb.client.MongoClients#create("mongodb://username:password@mongoServer:mongoServerport") Show Claus Ibsen added a comment - 30/Sep/20 16:17 Or if you do username=mongoadmin password=mongoadmin mongoServer=mongodb.mongodb mongoServerPort=27017 connectionBeanDef=#class:com.mongodb.client.MongoClients#create("mongodb:// username : password @ mongoServer : mongoServerport ")
CAMEL-15601,Guillaume Nodet,2020-09-30T14:48:05+0000,1601462885， where 1601462885 is the epoch,,There are no comments yet on this issue.
CAMEL-15600,Luca Burgazzoli,2020-09-30T13:32:57+0000,1601458377， where 1601458377 is the epoch,Reported against camel-k: https://github.com/apache/camel-k-runtime/issues/513,There are no comments yet on this issue.
CAMEL-15599,Unassigned,2020-09-30T11:50:01+0000,1601452201， where 1601452201 is the epoch,So you can integrate with external schema registry Apicuriohttps://www.apicur.io/registry/,Hide Permalink Claus Ibsen added a comment - 30/Sep/20 11:50 See this example https://github.com/Apicurio/apicurio-registry-demo/blob/master/src/main/java/io/apicurio/registry/demo/simple/avro/SimpleAvroConsumerApp.java Show Claus Ibsen added a comment - 30/Sep/20 11:50 See this example https://github.com/Apicurio/apicurio-registry-demo/blob/master/src/main/java/io/apicurio/registry/demo/simple/avro/SimpleAvroConsumerApp.java Hide Permalink Claus Ibsen added a comment - 30/Sep/20 12:27 The apicurio options will be put in a single class and documented https://github.com/Apicurio/apicurio-registry/issues/886 Show Claus Ibsen added a comment - 30/Sep/20 12:27 The apicurio options will be put in a single class and documented https://github.com/Apicurio/apicurio-registry/issues/886 Hide Permalink Claus Ibsen added a comment - 08/Oct/20 06:46 https://github.com/Apicurio/apicurio-registry/blob/2.0.x/utils/serde/src/main/java/io/apicurio/registry/utils/serde/SerdeConfig.java Show Claus Ibsen added a comment - 08/Oct/20 06:46 https://github.com/Apicurio/apicurio-registry/blob/2.0.x/utils/serde/src/main/java/io/apicurio/registry/utils/serde/SerdeConfig.java
CAMEL-15598,Claus Ibsen,2020-09-30T11:22:43+0000,1601450563， where 1601450563 is the epoch,There is some old cruft code at try { // doesn't exist in old version of Kafka client so detect // and only call the method if // the field/config actually exists Field f = ProducerConfig.class.getDeclaredField("PARTITIONER_CLASS_CONFIG"); if (f != null) { loadParitionerClass(resolver， props); } } catch (NoSuchFieldException e) { // ignore } catch (SecurityException e) { // ignore },There are no comments yet on this issue.
CAMEL-15597,Unassigned,2020-09-30T05:25:29+0000,1601429129， where 1601429129 is the epoch,As today we use CXF behind the scenes but we can explore a replacement with a modern reactive web client such as Vert.x HTTP,There are no comments yet on this issue.
CAMEL-15596,Ramu,2020-10-04T03:34:09+0000,1601768049， where 1601768049 is the epoch,Start karaf 4.2.9 OSGi container， execute:karaf@root()> feature:repo-add camel 2.25.2karaf@root()> feature:install camel-jacksonxmlError executing command: Unable to resolve root: missing requirement [root] osgi.identity; osgi.identity=camel-jacksonxml; type=karaf.feature; version="[2.25.2，2.25.2]"; filter:="(&(osgi.identity=camel-jacksonxml)(type=karaf.feature)(version>=2.25.2)(version<=2.25.2))" [caused by: Unable to resolve camel-jacksonxml/2.25.2: missing requirement [camel-jacksonxml/2.25.2] osgi.identity; osgi.identity=org.apache.camel.camel-jacksonxml; type=osgi.bundle; version="[2.25.2，2.25.2]"; resolution:=mandatory [caused by: Unable to resolve org.apache.camel.camel-jacksonxml/2.25.2: missing requirement [org.apache.camel.camel-jacksonxml/2.25.2] osgi.wiring.package; filter:="(&(osgi.wiring.package=com.fasterxml.jackson.dataformat.xml)(version>=2.3.0)(!(version>=3.0.0)))" [caused by: Unable to resolve com.fasterxml.jackson.dataformat.jackson-dataformat-xml/2.9.10: missing requirement [com.fasterxml.jackson.dataformat.jackson-dataformat-xml/2.9.10] osgi.wiring.package; filter:="(&(osgi.wiring.package=org.codehaus.stax2)(version>=4.2.0)(!(version>=5.0.0)))"]]],Hide Permalink Ramu added a comment - 04/Oct/20 03:34 Xilai Dai 2.24.2， 2.25.2 is very old. Please try with camel 3.5 Show Ramu added a comment - 04/Oct/20 03:34 Xilai Dai 2.24.2， 2.25.2 is very old. Please try with camel 3.5 Hide Permalink Xilai Dai added a comment - 10/Oct/20 03:01 Yes， for sure the camel-jacksonxml feature works on camel 3.x as the stax2 api is switched to the 4.x there. But some of the users/customers are still on the Camel 2.25.x or on the way to migrate to Camel 3， even though the EOL of Camel 2 is next year. If there is a plan for 2.25.3 release， it would be good to be fixed it on the camel-2.25.x branch. Show Xilai Dai added a comment - 10/Oct/20 03:01 Yes， for sure the camel-jacksonxml feature works on camel 3.x as the stax2 api is switched to the 4.x there. But some of the users/customers are still on the Camel 2.25.x or on the way to migrate to Camel 3， even though the EOL of Camel 2 is next year. If there is a plan for 2.25.3 release， it would be good to be fixed it on the camel-2.25.x branch. Hide Permalink Claus Ibsen added a comment - 10/Oct/20 05:34 Can you try with karaf 4.2.1， as that is the version camel 2.25.x was tested against. Just to see if it works on older karaf version and its something in karaf change that is causing a problem like this. Show Claus Ibsen added a comment - 10/Oct/20 05:34 Can you try with karaf 4.2.1， as that is the version camel 2.25.x was tested against. Just to see if it works on older karaf version and its something in karaf change that is causing a problem like this. Hide Permalink Xilai Dai added a comment - 10/Oct/20 07:18 Claus Ibsen， the same Error on karaf 4.2.1. After the jackson was switched to 2.9.10， it requires stax2 api 4.x， that's the problem. Show Xilai Dai added a comment - 10/Oct/20 07:18 Claus Ibsen ， the same Error on karaf 4.2.1. After the jackson was switched to 2.9.10， it requires stax2 api 4.x， that's the problem.
CAMEL-15595,Unassigned,2020-09-29T18:19:25+0000,1601389165， where 1601389165 is the epoch,at the moment simple calculations with maths operators like: addition multiplication division subtraction modulusare not supported in simple language. It is true that you could use groovy or javascript， but given simple syntax overall prevalence in camel it would make it easier to support this directly.,There are no comments yet on this issue.
CAMEL-15594,Freeman Yue Fang,2020-09-29T16:12:18+0000,1601381538， where 1601381538 is the epoch,,There are no comments yet on this issue.
CAMEL-15593,Unassigned,2020-09-29T13:30:32+0000,1601371832， where 1601371832 is the epoch,I am used camel-cxf(3.5.0) and hibernate in karaf.camel-cxf 3.5.0 - > cxf 3.4.0 -> woodstox 6.2.1 -> stax2 API 4.2.1hubernate -> woodstox 4.4.1 -> stax2 API 3.1.4When I try get SessionFactory I get org/codehaus/stax2/ri/EmptyIterator.getInstance()Lorg/codehaus/stax2/ri/EmptyIterator; (loaded from jar:bundle://327.0:0/Unable to render embedded object: File (bundle://330.0:0/) not found./ by woodstox-core-asl [330]).,Hide Permalink Andrea Cosentino added a comment - 29/Sep/20 13:30 Please use a descriptive title. Show Andrea Cosentino added a comment - 29/Sep/20 13:30 Please use a descriptive title. Hide Permalink Borodina Valery added a comment - 29/Sep/20 13:41 Before version 3.4 all work， but cxf update to Woodstox 6.2.x (https://issues.apache.org/jira/browse/CXF-8129) Show Borodina Valery added a comment - 29/Sep/20 13:41 Before version 3.4 all work， but cxf update to Woodstox 6.2.x ( https://issues.apache.org/jira/browse/CXF-8129 ) Hide Permalink Andrea Cosentino added a comment - 29/Sep/20 13:43 Use the 3.4.4 release which it's an LTS， for the moment. 3.5.0 is a development release and non LTS. Show Andrea Cosentino added a comment - 29/Sep/20 13:43 Use the 3.4.4 release which it's an LTS， for the moment. 3.5.0 is a development release and non LTS.
CAMEL-15592,Zoran Regvart,2020-11-03T14:00:28+0000,1604394028， where 1604394028 is the epoch,The links for 3.3.0 are all broken; either remove from the download page or change the links to point to the archive server.https://camel.apache.org/download/,Hide Permalink Zoran Regvart added a comment - 03/Nov/20 14:00 We were asked to remove older releases from distribution site. Currently there are only a couple of release archives present. For sources we could point to GitHub releases， those won't be signed though. We can't point to any binary releases， as they are removed from distribution site. Removal from distribution site happens manually， usually when we release newer versions， the website builds a list of releases from JIRA， so those two events are not connected. We can't manually remove certain releases from the website as those pages are generated automatically from JIRA data. We would need more metadata or more automation around this to have the distribution and the releases pages synced. Show Zoran Regvart added a comment - 03/Nov/20 14:00 We were asked to remove older releases from distribution site. Currently there are only a couple of release archives present. For sources we could point to GitHub releases， those won't be signed though. We can't point to any binary releases， as they are removed from distribution site. Removal from distribution site happens manually， usually when we release newer versions， the website builds a list of releases from JIRA， so those two events are not connected. We can't manually remove certain releases from the website as those pages are generated automatically from JIRA data. We would need more metadata or more automation around this to have the distribution and the releases pages synced. Hide Permalink Sebb added a comment - 03/Nov/20 15:55 Download pages must not link to non-approved code. However it looks like the broken links have been removed. Show Sebb added a comment - 03/Nov/20 15:55 Download pages must not link to non-approved code. However it looks like the broken links have been removed. Hide Permalink Zoran Regvart added a comment - 03/Nov/20 16:12 Sebb not sure how to do that， as stated above， the two events are not linked. Data for the website comes from JIRA and the removal from distribution can happen independently of that. I'm more concerned that users can't access signed source/binaries for older versions that having a broken link on the downloads. Show Zoran Regvart added a comment - 03/Nov/20 16:12 Sebb not sure how to do that， as stated above， the two events are not linked. Data for the website comes from JIRA and the removal from distribution can happen independently of that. I'm more concerned that users can't access signed source/binaries for older versions that having a broken link on the downloads. Hide Permalink Zoran Regvart added a comment - 03/Nov/20 16:19 I think this needs to be discussed on the dev mailing list. In JIRA， I have learned there is a way to [archive releases](https://confluence.atlassian.com/adminjiraserver071/managing-versions-802592484.html#Managingversions-archiveArchiveaversion)， that might be a way to do this. Show Zoran Regvart added a comment - 03/Nov/20 16:19 I think this needs to be discussed on the dev mailing list. In JIRA， I have learned there is a way to [archive releases] ( https://confluence.atlassian.com/adminjiraserver071/managing-versions-802592484.html#Managingversions-archiveArchiveaversion )， that might be a way to do this. Hide Permalink Zoran Regvart added a comment - 03/Nov/20 16:30 Actually， I'm wrong on this， those pages are driven by release notes. We can delete ones that are no longer available for download. Show Zoran Regvart added a comment - 03/Nov/20 16:30 Actually， I'm wrong on this， those pages are driven by release notes . We can delete ones that are no longer available for download. Hide Permalink Zoran Regvart added a comment - 6 days ago Not sure if this changed at ASF， I don't know what was served if a release wasn't available， right now it seems to offer a link to the release archives. I would not call that broken. Not sure if there is work to be done here. Offering the link and even if that link leads to the archive instead of the mirror allows folk to download the release. Show Zoran Regvart added a comment - 6 days ago Not sure if this changed at ASF， I don't know what was served if a release wasn't available， right now it seems to offer a link to the release archives. I would not call that broken. Not sure if there is work to be done here. Offering the link and even if that link leads to the archive instead of the mirror allows folk to download the release. Hide Permalink Zoran Regvart added a comment - 6 days ago Sebb please reopen if you think we need to do anything here. Show Zoran Regvart added a comment - 6 days ago Sebb please reopen if you think we need to do anything here. Hide Permalink Sebb added a comment - 6 days ago The links for 3.5.0 are broken now. Show Sebb added a comment - 6 days ago The links for 3.5.0 are broken now. Hide Permalink Zoran Regvart added a comment - 6 days ago Sebb to me this looks like an issue that needs to be filed at INFRA， we're using the dyn/closer.lua and it isn't offering archived release for 3.5.0. That is， this works: http://www.apache.org/dyn/closer.cgi/camel/apache-camel/3.5.0/apache-camel-3.5.0.zip This doesn't: http://www.apache.org/dyn/closer.lua?filename=camel/apache-camel/3.5.0/apache-camel-3.5.0.zip&action=download We can change the URLs on the download page from: http://www.apache.org/dyn/closer.lua?filename=camel/apache-camel/3.5.0/apache-camel-3.5.0.zip&action=download to: http://www.apache.org/dyn/closer.lua/camel/apache-camel/3.5.0/apache-camel-3.5.0.zip Which seems to work， but that would not offer direct download. Sebb what option would you like to peruse? Show Zoran Regvart added a comment - 6 days ago Sebb to me this looks like an issue that needs to be filed at INFRA， we're using the dyn/closer.lua and it isn't offering archived release for 3.5.0. That is， this works: http: //www.apache.org/dyn/closer.cgi/camel/apache-camel/3.5.0/apache-camel-3.5.0.zip This doesn't: http: //www.apache.org/dyn/closer.lua?filename=camel/apache-camel/3.5.0/apache-camel-3.5.0.zip&action=download We can change the URLs on the download page from: http: //www.apache.org/dyn/closer.lua?filename=camel/apache-camel/3.5.0/apache-camel-3.5.0.zip&action=download to: http: //www.apache.org/dyn/closer.lua/camel/apache-camel/3.5.0/apache-camel-3.5.0.zip Which seems to work， but that would not offer direct download. Sebb what option would you like to peruse? Hide Permalink Sebb added a comment - 6 days ago The problem is that 3.5.0 is not on the mirrors， see: https://downloads.apache.org/camel/apache-camel/ The following link only seems to work: http://www.apache.org/dyn/closer.cgi/camel/apache-camel/3.5.0/apache-camel-3.5.0.zip Read it carefully and you will see that it says: "The requested file or directory is not on the mirrors." Instead， it offers a download from the archives. Show Sebb added a comment - 6 days ago The problem is that 3.5.0 is not on the mirrors ， see: https://downloads.apache.org/camel/apache-camel/ The following link only seems to work: http://www.apache.org/dyn/closer.cgi/camel/apache-camel/3.5.0/apache-camel-3.5.0.zip Read it carefully and you will see that it says: "The requested file or directory is not on the mirrors." Instead， it offers a download from the archives. Hide Permalink Sebb added a comment - 6 days ago Note that the links for the sigs and hashes for 3.5.0 are broken for the same reason - the files are missing. Show Sebb added a comment - 6 days ago Note that the links for the sigs and hashes for 3.5.0 are broken for the same reason - the files are missing. Hide Permalink Zoran Regvart added a comment - 6 days ago This is direct consequence of issues like CAMEL-15250， CAMEL-15799， CAMEL-15800， CAMEL-7013， CAMEL-8889 and CAMEL-9563. Sebb you created those issues， I'm having a really difficult time understanding what is required from us. I offered one solution to point to the URLs like http://www.apache.org/dyn/closer.lua/camel/apache-camel/3.5.0/apache-camel-3.5.0.zip， and if it wasn't clear would include all download URLs， I've also noted the consequence that direct download links would not be possible then. Can you comment on that option? Show Zoran Regvart added a comment - 6 days ago This is direct consequence of issues like CAMEL-15250 ， CAMEL-15799 ， CAMEL-15800 ， CAMEL-7013 ， CAMEL-8889 and CAMEL-9563 . Sebb you created those issues， I'm having a really difficult time understanding what is required from us. I offered one solution to point to the URLs like http://www.apache.org/dyn/closer.lua/camel/apache-camel/3.5.0/apache-camel-3.5.0.zip ， and if it wasn't clear would include all download URLs， I've also noted the consequence that direct download links would not be possible then. Can you comment on that option? Hide Permalink Sebb added a comment - 6 days ago - edited I'll try again: The download page links to 3.5.0 However the release is not present on the mirrors， which is why the URLs don't work. c.f. http://www.apache.org/dyn/closer.lua/camel/apache-camel/3.5.0/apache-camel-3.5.0.zip and http://www.apache.org/dyn/closer.lua/camel/apache-camel/3.6.0/apache-camel-3.6.0.zip Since 3.5.0 was released fairly recently， I assume it is still current， and should therefore be on the download page. It looks like someone may have incorrectly deleted the 3.5.0 release files: — $ svn log -v https://dist.apache.org/repos/dist/release/camel/apache-camel/ -l 1 r42292 | davsclaus | 2020-11-04 06:10:37 +0000 (Wed， 04 Nov 2020) | 3 lines Changed paths: D /release/camel/apache-camel/3.5.0 Deleting old releases — If you restore the 3.5.0 directory， the problems should go away. Show Sebb added a comment - 6 days ago - edited I'll try again: The download page links to 3.5.0 However the release is not present on the mirrors ， which is why the URLs don't work. c.f. http://www.apache.org/dyn/closer.lua/camel/apache-camel/3.5.0/apache-camel-3.5.0.zip and http://www.apache.org/dyn/closer.lua/camel/apache-camel/3.6.0/apache-camel-3.6.0.zip Since 3.5.0 was released fairly recently， I assume it is still current， and should therefore be on the download page. It looks like someone may have incorrectly deleted the 3.5.0 release files: — $ svn log -v https://dist.apache.org/repos/dist/release/camel/apache-camel/ -l 1 r42292 | davsclaus | 2020-11-04 06:10:37 +0000 (Wed， 04 Nov 2020) | 3 lines Changed paths: D /release/camel/apache-camel/3.5.0 Deleting old releases — If you restore the 3.5.0 directory， the problems should go away. Hide Permalink Claus Ibsen added a comment - 6 days ago - edited Only 2.2.5.x， 3.4.x LTS and the latest non LTS release (today that is 3.6.0) are current. Any other release is EOL Show Claus Ibsen added a comment - 6 days ago - edited Only 2.2.5.x， 3.4.x LTS and the latest non LTS release (today that is 3.6.0) are current. Any other release is EOL Hide Permalink Sebb added a comment - 6 days ago In which case 3.5.0 should be dropped from the download page. Show Sebb added a comment - 6 days ago In which case 3.5.0 should be dropped from the download page. Hide Permalink Zoran Regvart added a comment - 5 days ago I've reworked the download page， preview is here， comments on the PR are welcome. Show Zoran Regvart added a comment - 5 days ago I've reworked the download page， preview is here ， comments on the PR are welcome. Hide Permalink Sebb added a comment - 5 days ago Download page hash and sig links are broken; these files must be linked from https://downloads.apache.org/camel/... or (old style) https://www.apache.org/dist/camel/... The links for camel-k-runtime-1.5.0-source-release.zip are all wrong because the file is called apache-camel-k-runtime-1.5.0-source-release.zip Please double-check all the changes! Show Sebb added a comment - 5 days ago Download page hash and sig links are broken; these files must be linked from https://downloads.apache.org/camel/ ... or (old style) https://www.apache.org/dist/camel/ ... The links for camel-k-runtime-1.5.0-source-release.zip are all wrong because the file is called apache-camel-k-runtime-1.5.0-source-release.zip Please double-check all the changes! Hide Permalink Zoran Regvart added a comment - 4 days ago I've found documentation on this on the infra website and changed the URLs to comply. Preview is up to date with those changes. Show Zoran Regvart added a comment - 4 days ago I've found documentation on this on the infra website and changed the URLs to comply. Preview is up to date with those changes. Hide Permalink Sebb added a comment - 4 days ago Link for apache-camel-k-runtime-1.5.0-source-release.zip.sha512 is broken. The uploaded hashes for the download are md5 and sha1 which are no longer to be used. They should be deleted and replaced with a sha512 hash. The /releases/ pages don't have KEYS links， nor is there any info on download verifications. Show Sebb added a comment - 4 days ago Link for apache-camel-k-runtime-1.5.0-source-release.zip.sha512 is broken. The uploaded hashes for the download are md5 and sha1 which are no longer to be used. They should be deleted and replaced with a sha512 hash. The /releases/ pages don't have KEYS links， nor is there any info on download verifications. Hide Permalink Zoran Regvart added a comment - 4 days ago Sebb the issues from your last comment should be resolved. Show Zoran Regvart added a comment - 4 days ago Sebb the issues from your last comment should be resolved. Hide Permalink Sebb added a comment - 4 days ago Broken hashes in page https://deploy-preview-500--camel.netlify.app/releases/release-2.18.0/ Same for 2.22.2 and probably all releases in between. Looks like the generation process does not allow for older releases that used md5 or sha1 hashes. Show Sebb added a comment - 4 days ago Broken hashes in page https://deploy-preview-500--camel.netlify.app/releases/release-2.18.0/ Same for 2.22.2 and probably all releases in between. Looks like the generation process does not allow for older releases that used md5 or sha1 hashes. Hide Permalink Zoran Regvart added a comment - 4 days ago Yeah， I've added that all releases done prior and including 2018-11-10 have sha1 hashes and after that date sha512 hashes. Perhaps it would make sense to go through the archive and create sha512 hashes. Show Zoran Regvart added a comment - 4 days ago Yeah， I've added that all releases done prior and including 2018-11-10 have sha1 hashes and after that date sha512 hashes. Perhaps it would make sense to go through the archive and create sha512 hashes. Hide Permalink Zoran Regvart added a comment - 3 days ago Changes are now live on the website. Show Zoran Regvart added a comment - 3 days ago Changes are now live on the website.
CAMEL-15591,Colm O hEigeartaigh,2020-09-29T09:43:36+0000,1601358216， where 1601358216 is the epoch,For camel-zipfile + camel-tarfile， there is no limit on the size of uncompressed data， potentially leading to an OOM Error. Instead we should have a configurable limit.,There are no comments yet on this issue.
CAMEL-15590,Luca Burgazzoli,2020-09-29T07:05:08+0000,1601348708， where 1601348708 is the epoch,To have better control over the route template creation process we should add a consumer to the CamelContext::addRouteFromTemplate that is invoked with the result of RouteTemplateDefinition::asRouteDefinition to post process the route generated by the template before it is added to the Camel Context,There are no comments yet on this issue.
CAMEL-15589,Unassigned,2020-09-29T05:41:06.867Z,1601343666.867， where 1601343666.867 is the epoch,I was trying to use EhCache with Apache Camel using Sprin Boot. While it works as expected. there is an exception on startup. It does not cause any issues in the functionality I guess (according to my test， everything works as expected). But is there any way to avoid that exception?{{}} {{{{2020-09-28 23:46:38，397 [main][DEBUG] org.apache.camel.component.cache.CacheManagerFactory - Turning off EHCache update checker ... 2020-09-28 23:46:38，400 [main][WARN ] org.apache.camel.component.cache.CacheManagerFactory - Error turning off EHCache update checker. Beware information sent over the internet! java.lang.NoSuchFieldException: updateCheck at java.base/java.lang.Class.getDeclaredField(Class.java:2411) at org.apache.camel.component.cache.CacheManagerFactory.getInstance(CacheManagerFactory.java:40) at org.apache.camel.component.cache.CacheEndpoint.initializeCache(CacheEndpoint.java:120) at org.apache.camel.component.cache.CacheProducer.doStart(CacheProducer.java:45) at org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:72}}}} My EhCache Configuration XML: {{<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="ehcache.xsd" updateCheck="false" monitoring="autodetect" dynamicConfig="true"><cache name="cache1" maxEntriesLocalHeap="10000" maxEntriesLocalDisk="1000" eternal="false" diskSpoolBufferSizeMB="20" timeToIdleSeconds="300" timeToLiveSeconds="600" memoryStoreEvictionPolicy="LFU" transactionalMode="off"> <persistence strategy="localTempSwap" /> </cache></ehcache> }} I have tried to set the updateCheck as false， no luck. I even tried to remove the updateCheck field itself from the XML， even that did not help (though it started fine with the same exception).Thanks for your time.I have uploaded sample code to test.,Hide Permalink Claus Ibsen added a comment - 29/Sep/20 09:30 Camel 2.x is EOL and this is just a WARN and not an error. Camel 3 does not do the update check， and is using a newer version where they dont do this anymore. Show Claus Ibsen added a comment - 29/Sep/20 09:30 Camel 2.x is EOL and this is just a WARN and not an error. Camel 3 does not do the update check， and is using a newer version where they dont do this anymore.
CAMEL-15588,Andrea Cosentino,2020-09-28T19:51:11+0000,1601308271， where 1601308271 is the epoch,An updated version of swagger-core has been released to address incompatibilities with the newer versions of jackson.Deprecated methods have been removed and swagger-core will throw exceptions similar to: java.lang.NoSuchMethodError: 'com.fasterxml.jackson.databind.JavaType com.fasterxml.jackson.databind.introspect.AnnotatedMember.getType(com.fasterxml.jackson.databind.type.TypeBindings)'See https://github.com/swagger-api/swagger-core/issues/3554 for info,There are no comments yet on this issue.
CAMEL-15587,Claus Ibsen,2020-09-30T19:40:29.009Z,1601480429.009， where 1601480429.009 is the epoch,Look into reported on user forumhttp://camel.465427.n5.nabble.com/Performance-regression-with-bean-and-ognl-expressions-in-Simple-language-version-3-4-x-td5883836.htmlAnd reproducer on github athttps://github.com/dchirov/camel-performance-sample,Hide Permalink Claus Ibsen added a comment - 30/Sep/20 19:19 Thanks for the sample， so I can see the issue is that the bean langauge is no longe singleton in 3.x which causes a new instance to be created per use Show Claus Ibsen added a comment - 30/Sep/20 19:19 Thanks for the sample， so I can see the issue is that the bean langauge is no longe singleton in 3.x which causes a new instance to be created per use Hide Permalink Claus Ibsen added a comment - 30/Sep/20 19:39 Okay so will work on something， this is related to bean language moved out of core， and its configured in a different way than in 2.x Show Claus Ibsen added a comment - 30/Sep/20 19:39 Okay so will work on something， this is related to bean language moved out of core， and its configured in a different way than in 2.x
CAMEL-15586,Claus Ibsen,2020-09-28T08:38:43+0000,1601267923， where 1601267923 is the epoch,Like the other http clients we can optimize for toD,There are no comments yet on this issue.
CAMEL-15585,Unassigned,2020-09-27T17:29:18+0000,1601213358， where 1601213358 is the epoch,Hello!I found some small things that can be refactored.,There are no comments yet on this issue.
CAMEL-15584,Claus Ibsen,2020-09-27T13:35:18+0000,1601199318， where 1601199318 is the epoch,The default uuid generator was from old days based on ActiveMQ that as a broker had the need to generate UUID that are unique across a fleet of brokers (hosts) and therefore it included the hostname in the id. This has the drawback today as the hostname needs to be resolved once which does a DNS lookup (its not an ip adr) and therefore it can delay the startup.Also on graalvm， quarkus etc then we use the new vanilla generator instead. Also we dont want to native compile and get the hostname of the os that compiled.The vanilla generates is fast and generate unique ids， also across a fleet of nodes. So lets consider switching to it.Also discussed on the chat forumhttps://camel.zulipchat.com/#narrow/stream/257298-camel/topic/DefaultUUIDGenerator.20inet.20call.20timeout.20issue,There are no comments yet on this issue.
CAMEL-15583,Unassigned,2020-09-26T06:56:07+0000,1601088967， where 1601088967 is the epoch,Is it possible to create an EDI component (or a transformation EIP) to create EDI files? Camel Smooks seems to be not in active development.,Hide Permalink Claus Ibsen added a comment - 26/Sep/20 06:56 There is no active open source EDI project - its a business where you often would need to use some commercial software. For example trace financial has a EDI mapper that works with Apache Camel. There are other tools also. https://www.tracefinancial.com/standards/edi-transformations Show Claus Ibsen added a comment - 26/Sep/20 06:56 There is no active open source EDI project - its a business where you often would need to use some commercial software. For example trace financial has a EDI mapper that works with Apache Camel. There are other tools also. https://www.tracefinancial.com/standards/edi-transformations
CAMEL-15582,Unassigned,2020-09-25T16:15:02+0000,1601036102， where 1601036102 is the epoch,Apache Camel has over 300+ type converters available for use out of the box. As a developer， I can add more type converters as well. But is there any way where I can find the full list of Camel Type converters available out of the box? I searched in Camel source in GitHub， however could not get a list. This would help me in taking a decision whether I should provide an implementation or I can use the one already available in Camel.I know many components can add Type Converters when we add them to class path. I just wanted to know the ones already available with Camel core (or the most useful ones). It would be helpful if you publish this information in your website.,There are no comments yet on this issue.
CAMEL-15581,James Netherton,2020-09-25T15:18:36+0000,1601032716， where 1601032716 is the epoch,I noticed an issue when trying to use the camel-main configuration property camel.main.xml-rests in Camel Quarkus. It results in:2020-09-25 15:33:25，811 ERROR [org.apa.cam.qua.mai.CamelMainRuntime] (main) Failed to start application: org.apache.camel.RuntimeCamelException: org.apache.camel.xml.io.XmlPullParserException: Expected starting tag '{http://camel.apache.org/schema/spring}routes'， read starting tag '{http://camel.apache.org/schema/spring}rests' instead at org.apache.camel.RuntimeCamelException.wrapRuntimeException(RuntimeCamelException.java:66) at org.apache.camel.main.DefaultRoutesCollector.collectXmlRestsFromDirectory(DefaultRoutesCollector.java:219),There are no comments yet on this issue.
CAMEL-15580,Viral Gohel,2020-09-25T15:21:07.843Z,1601032867.843， where 1601032867.843 is the epoch,There is a race condition between the SJMS Batch Consumer route start thread and the batch consumption loop thread. When it triggers the batch consumption loop exits early and the SJMS Batch Consumer does not read any JMS messages.In short: The AtomicBoolean running is used as a flag to shut down the batch consumption loop The batch consumption loop is submitted to another thread and only after that running is changed to true This means sometimes the batch consumption loop sees running as false during startupThe easiest way to reproduce it is to add a sleep into SJMSBatchConsumer$StartConsumerTask#run final List<AtomicBoolean> triggers = new ArrayList<>();for (int i = 0; i < consumerCount; i++) { BatchConsumptionLoop loop = new BatchConsumptionLoop(); loop.setKeepAliveDelay(keepAliveDelay); triggers.add(loop.getCompletionTimeoutTrigger()); /* * Note: Batch consumption loop is submitted to another thread here */ jmsConsumerExecutors.submit(loop);}if (completionInterval > 0) { // trigger completion based on interval timeoutCheckerExecutorService.scheduleAtFixedRate(new CompletionIntervalTask(triggers)， completionInterval， completionInterval， TimeUnit.MILLISECONDS);}if (attempt > 1) { LOG.info("Successfully refreshed connection after {} attempts."， attempt);}/* * Note: Add this sleep to reproduce the race condition， simulating * this thread being pre-empted by other work */Thread.sleep(100); LOG.info("Started {} consumer(s) for {}:{}"， consumerCount， destinationName， completionSize);/* * Note: running is only changed to true here but the batch consumption loop * that reads this values was submitted to another thread earlier */running.set(true);return; The batch consumption loop checks the running flag like this: private void consumeBatchesOnLoop(final Session session， final MessageConsumer consumer) throws JMSException { final boolean usingTimeout = completionTimeout > 0; LOG.trace("BatchConsumptionTask +++ start +++"); while (running.get()) { Usually there's a second check that would cause everything to loop again - it may see running as false but see isStarting() as true. }while (running.get() || isStarting()); But with asyncStartListener enabled I think that isStarting() is likely to be false as well. I believe this issue is causing fairly frequent intermittent test failures in our CI environment (jenkins slaves in kubernetes， linux). But I've been unable to reproduce it on my laptop (windows) without adding the artificial delay on the main thread. I've been able to get thread dumps from the CI environment showing the executor waiting for a task instead of executing the batch consumption loop"Camel (camel-8) thread #125 - SjmsBatchConsumer" java.lang.Thread.State: WAITING at sun.misc.Unsafe.park(Native Method) at java.util.concurrent.locks.LockSupport.park(LockSupport.java:175) at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2039) at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442) at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1074) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1134) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748) Usually they should look like this:"Camel (camel-8) thread #123 - SjmsBatchConsumer" java.lang.Thread.State: TIMED_WAITING at java.lang.Object.wait(Native Method) at org.apache.activemq.FifoMessageDispatchChannel.dequeue(FifoMessageDispatchChannel.java:74) at org.apache.activemq.ActiveMQMessageConsumer.dequeue(ActiveMQMessageConsumer.java:486) at org.apache.activemq.ActiveMQMessageConsumer.receive(ActiveMQMessageConsumer.java:653) at org.apache.camel.component.sjms.batch.SjmsBatchConsumer$BatchConsumptionLoop$BatchConsumptionTask.consumeBatchesOnLoop(SjmsBatchConsumer.java:429) at org.apache.camel.component.sjms.batch.SjmsBatchConsumer$BatchConsumptionLoop$BatchConsumptionTask.access$1300(SjmsBatchConsumer.java:383) at org.apache.camel.component.sjms.batch.SjmsBatchConsumer$BatchConsumptionLoop.run(SjmsBatchConsumer.java:326) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.run(FutureTask.java:266) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748) I also get tracing logs where the batch consumption tasks starts & ends very quickly. Line 4377: 2020-09-24 03:16:41.567 DEBUG||| 4604 --- [artStopListener] o.a.c.c.sjms.batch.SjmsBatchConsumer : Attempt #1. Starting 1 consumer(s) for myqueue:300 Line 4415: 2020-09-24 03:16:41.576 TRACE||| 4604 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : BatchConsumptionTask +++ start +++ Line 4416: 2020-09-24 03:16:41.576 TRACE||| 4604 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : BatchConsumptionTask +++ end +++ Line 4435: 2020-09-24 03:16:41.568 INFO ||| 4604 --- [artStopListener] o.a.c.c.sjms.batch.SjmsBatchConsumer : Started 1 consumer(s) for myqueue:300 Side note: Could the queue name be added to the thread name? The JMS component consumers do that.,Hide Permalink Brad Harvey added a comment - 25/Sep/20 15:13 I added this to SjmsBatchConsumerTest to try to reproduce. I didn't have any luck reproducing on my laptop until I added the Thread.sleep mentioned in the description - a sleep of 10 ms causes it to fail about half the time， higher sleeps fail more often. @Test public void testStartupRaceCondition() throws Exception { final int routeCount = 10; final int consumerCount = 1; List<String> queues = new ArrayList<>(); String queueNamePrefix = getQueueName(); // setup routeCount routes， each reading from its own queue but all writing to the same mock endpoint for (int i = 0; i < routeCount; i++) { String queueName = queueNamePrefix + "_" + i; queues.add(queueName); String routeId = "batchConsumer_" + i; context.addRoutes(new RouteBuilder() { public void configure() throws Exception { int completionTimeout = 1000; int completionSize = 1; fromF("sjms-batch:%s?completionTimeout=%s&completionSize=%s&consumerCount=%s&aggregationStrategy=#testStrategy&keepAliveDelay=100&asyncStartListener=true"， queueName， completionTimeout， completionSize， consumerCount) .routeId(routeId).autoStartup(true) .split(body()) .to("mock:split"); } }); } context.start(); // expect to receive routeCount messages to the mock endpoint MockEndpoint mockSplit = getMockEndpoint("mock:split"); mockSplit.setExpectedMessageCount(routeCount); // send one message to all the queues queues.forEach(queueName -> template.sendBody("sjms:queue:" + queueName， queueName)); assertMockEndpointsSatisfied(); } Show Brad Harvey added a comment - 25/Sep/20 15:13 I added this to SjmsBatchConsumerTest to try to reproduce. I didn't have any luck reproducing on my laptop until I added the Thread.sleep mentioned in the description - a sleep of 10 ms causes it to fail about half the time， higher sleeps fail more often. @Test public void testStartupRaceCondition() throws Exception { final int routeCount = 10; final int consumerCount = 1; List< String > queues = new ArrayList<>(); String queueNamePrefix = getQueueName(); // setup routeCount routes， each reading from its own queue but all writing to the same mock endpoint for ( int i = 0; i < routeCount; i++) { String queueName = queueNamePrefix + "_" + i; queues.add(queueName); String routeId = "batchConsumer_" + i; context.addRoutes( new RouteBuilder() { public void configure() throws Exception { int completionTimeout = 1000; int completionSize = 1; fromF( "sjms-batch:%s?completionTimeout=%s&completionSize=%s&consumerCount=%s&aggregationStrategy=#testStrategy&keepAliveDelay=100&asyncStartListener= true " ， queueName， completionTimeout， completionSize， consumerCount) .routeId(routeId).autoStartup( true ) .split(body()) .to( "mock:split" ); } }); } context.start(); // expect to receive routeCount messages to the mock endpoint MockEndpoint mockSplit = getMockEndpoint( "mock:split" ); mockSplit.setExpectedMessageCount(routeCount); // send one message to all the queues queues.forEach(queueName -> template.sendBody( "sjms:queue:" + queueName， queueName)); assertMockEndpointsSatisfied(); } Hide Permalink Brad Harvey added a comment - 25/Sep/20 15:22 I suspect setting running to true prior to kicking off the batch consumption tasks will solve it. potentialPatch.txt Show Brad Harvey added a comment - 25/Sep/20 15:22 I suspect setting running to true prior to kicking off the batch consumption tasks will solve it. potentialPatch.txt Hide Permalink Claus Ibsen added a comment - 26/Sep/20 06:57 Yeah that sounds reasonable. Show Claus Ibsen added a comment - 26/Sep/20 06:57 Yeah that sounds reasonable. Hide Permalink Claus Ibsen added a comment - 30/Sep/20 18:17 I have backported to 3.4.x branch Show Claus Ibsen added a comment - 30/Sep/20 18:17 I have backported to 3.4.x branch
CAMEL-15579,Claus Ibsen,2020-09-26T08:35:54+0000,1601094954， where 1601094954 is the epoch,For example org.apache.camel.component.file.FileEndpointConfigurer#getAllOptions is returning a new map with static information.We can turn that into a static block in the generated source and return a static instance， this optimizes the JVM.,Hide Permalink Claus Ibsen added a comment - 26/Sep/20 08:35 One issue is if the configurer has super class， then we need to merge them together Show Claus Ibsen added a comment - 26/Sep/20 08:35 One issue is if the configurer has super class， then we need to merge them together Hide Permalink Claus Ibsen added a comment - 27/Sep/20 15:32 Another way would be to make the generated configurer run after the json generation so it can read the json metadata and have a full list of all options (also from super) then we can create a single static map Show Claus Ibsen added a comment - 27/Sep/20 15:32 Another way would be to make the generated configurer run after the json generation so it can read the json metadata and have a full list of all options (also from super) then we can create a single static map Hide Permalink Claus Ibsen added a comment - 27/Sep/20 15:41 Okay we have access to the full list of options (also from super) via the componetModel， so we should be able to do this Show Claus Ibsen added a comment - 27/Sep/20 15:41 Okay we have access to the full list of options (also from super) via the componetModel， so we should be able to do this Hide Permalink Claus Ibsen added a comment - 28/Sep/20 05:20 - edited After all elements have been added to the map， we can recreate the map to refill from a known size and let the old be garbage collected， so it does not take up extra space when it grows during adding. Argh this is only for hash map we use sorted map for some of the others NOT A PROBLEM Show Claus Ibsen added a comment - 28/Sep/20 05:20 - edited After all elements have been added to the map， we can recreate the map to refill from a known size and let the old be garbage collected， so it does not take up extra space when it grows during adding. Argh this is only for hash map we use sorted map for some of the others NOT A PROBLEM
CAMEL-15578,Unassigned,2020-09-25T12:12:21+0000,1601021541， where 1601021541 is the epoch,In case of Loop EIP and you shutdown Camel then we can make the loop break out earlier as today it continues until it has reached the end of the loop.For this we need a new option that the user can turn on to allow this.,Hide Permalink Chandrakant Hardahe added a comment - 25/Sep/20 12:12 I reproduced this issue and it really needs to be fixed， I want to work on this. Show Chandrakant Hardahe added a comment - 25/Sep/20 12:12 I reproduced this issue and it really needs to be fixed， I want to work on this.
CAMEL-15577,Jiri Ondrusek,2020-09-25T08:28:48+0000,1601008128， where 1601008128 is the epoch,There is a difference in implementation of parameter `allowTemplateFromHeader` in various templating components and missing implementation in stringtemplate component. Description from documentation (of "allowTemplateFromHeader"):Whether to allow to use resource template from header or not (default false). Enabling this allows to specify dynamic templates via message header. However this can be seen as a potential security vulnerability if the header is coming from a malicious user， so use this with care.Common sense says that with this parameter I can send template via header.Which is implemented for example in velocity component (see https://github.com/apache/camel/blob/master/components/camel-velocity/src/main/java/org/apache/camel/component/velocity/VelocityEndpoint.java#L185)In stringtemplate component there is only functionality about providing own variable map (see https://github.com/apache/camel/blob/master/components/camel-stringtemplate/src/main/java/org/apache/camel/component/stringtemplate/StringTemplateEndpoint.java#L104) - the same functionality in velocity is called 'supplementalContext' In stringtemplate documentation is a described usage of this custom context map:You can define the custom context map by setting the message header "CamelStringTemplateVariableMap" just like the below code. Errors: parameter "CamelStringTemplateVariableMap" is applied only when "allowTemplateFromHeader" is set to true there is no way of providing template via header. Fix should remove dependency between "CamelStringTemplateVariableMap" and "allowTemplateFromHeader" add a new parameter to allow definition of template via header Fix problem with template via header based on other templating components (e.g. velocity),There are no comments yet on this issue.
CAMEL-15576,Claus Ibsen,2020-09-24T16:05:57+0000,1600949157， where 1600949157 is the epoch,Hello，The HTTP method is not correctly retrieved by component camel-tracing when， from the Camel route， the HTTP method is set using something else than a String (like HttpMethods.POST for example)Info from Claus:Ah I can see the little bughttps://github.com/apache/camel/blob/master/components/camel-tracing/src/main/java/org/apache/camel/tracing/decorators/AbstractHttpSpanDecorator.java#L33This one checks only if its a string type， but you use a constant or enum etc.,Hide Permalink Avinash Dongre added a comment - 24/Sep/20 16:05 Hi ncasaux， Please let me know if you are going to work on this otherwise I'll try and have a look Show Avinash Dongre added a comment - 24/Sep/20 16:05 Hi ncasaux ， Please let me know if you are going to work on this otherwise I'll try and have a look Hide Permalink ncasaux added a comment - 25/Sep/20 08:28 Hi Avinash Dongre I never commited anything on Camel. For the moment I prefer to report issues ! Show ncasaux added a comment - 25/Sep/20 08:28 Hi Avinash Dongre I never commited anything on Camel. For the moment I prefer to report issues !
CAMEL-15575,Otavio Rodolfo Piske,2020-09-25T12:07:59+0000,1601021279， where 1601021279 is the epoch,I noticed a few places on the codebase where the exceptions are being printed directly to the standard output instead of being redirected to the logger. This may prevent users from seeing exception messages in some circumstances.,Hide Permalink Otavio Rodolfo Piske added a comment - 25/Sep/20 12:07 Affected components: camel-chatscript， camel-activemq， camel-as2-api， camel-aws-s3， camel-corda， camel-aws2-s3， camel-cxf， camel-cxf-transport， camel-digitalocean， camel-docker， camel-dropbox， camel-cxf-transport， camel-elytron， camel-google-bigquery， camel-google-calendar camel-google-drive， camel-grpc， camel-jira， camel-hazelcast， camel-irc， camel-jira， camel-ldap， camel-ldif， camel-lucene， camel-mina， camel-minio， camel-mllp， camel-netty-http， camel-netty， camel-rabbitmq， camel-saxon， camel-soroush， camel-stomp， camel-test-junit5， camel-test， camel-undertow， camel-websocket， camel-xmlsecurity， camel-xmpp Show Otavio Rodolfo Piske added a comment - 25/Sep/20 12:07 Affected components: camel-chatscript， camel-activemq， camel-as2-api， camel-aws-s3， camel-corda， camel-aws2-s3， camel-cxf， camel-cxf-transport， camel-digitalocean， camel-docker， camel-dropbox， camel-cxf-transport， camel-elytron， camel-google-bigquery， camel-google-calendar camel-google-drive， camel-grpc， camel-jira， camel-hazelcast， camel-irc， camel-jira， camel-ldap， camel-ldif， camel-lucene， camel-mina， camel-minio， camel-mllp， camel-netty-http， camel-netty， camel-rabbitmq， camel-saxon， camel-soroush， camel-stomp， camel-test-junit5， camel-test， camel-undertow， camel-websocket， camel-xmlsecurity， camel-xmpp
CAMEL-15574,Otavio Rodolfo Piske,2020-09-24T14:54:43+0000,1600944883， where 1600944883 is the epoch,We should move core/camel-test-infra to its own root folder like camel-infra.It does not really belong so much in core itself.Discussed on Camel dev mailing list also,Hide Permalink Otavio Rodolfo Piske added a comment - 24/Sep/20 14:54 Hey， as agreed， I am assigning this one to myself and will fix it. Show Otavio Rodolfo Piske added a comment - 24/Sep/20 14:54 Hey， as agreed， I am assigning this one to myself and will fix it.
CAMEL-15573,Luca Burgazzoli,2020-09-24T09:16:46+0000,1600924606， where 1600924606 is the epoch,In addition to suport RoutesBuilders， camel-main should support LambdaRouteBuilder out of the box， something like:main.configure().addRoutesBuilder(b -> b.from(...));,There are no comments yet on this issue.
CAMEL-15572,Unassigned,2020-09-23T16:07:08+0000,1600862828， where 1600862828 is the epoch,Assuming we have a route template defined as follow:routeTemplate("echo-fail") .templateParameter("prefix") .from("direct:#property:routeId") .setBody().simple("{{prefix}}-${body}");That we instantiate with something like:TemplatedRouteBuilder.builder(context， "echo-fail") .parameter("prefix"， "terst") .parameter("routeId"， "myROuteId") .add();The generated route does not have the #property:routeId resolved. Originally reported here: https://github.com/apache/camel-k-runtime/issues/500#issuecomment-697303190,Hide Permalink Luca Burgazzoli added a comment - 23/Sep/20 16:07 - edited Claus Ibsen Nicola Ferraro It turns out that the #property: syntax is only supported by PropertyBindingSupport so to fix it we would need to support #property in the property component which is not easy. I think implementing https://github.com/apache/camel-k-runtime/issues/490 would be a much better solution. Show Luca Burgazzoli added a comment - 23/Sep/20 16:07 - edited Claus Ibsen Nicola Ferraro It turns out that the #property: syntax is only supported by PropertyBindingSupport so to fix it we would need to support #property in the property component which is not easy. I think implementing https://github.com/apache/camel-k-runtime/issues/490 would be a much better solution. Hide Permalink Claus Ibsen added a comment - 26/Sep/20 08:08 You should use {{ }} syntax. But yeah its better to use knative or a new component for this part Show Claus Ibsen added a comment - 26/Sep/20 08:08 You should use {{ }} syntax. But yeah its better to use knative or a new component for this part
CAMEL-15571,Unassigned,2020-09-23T12:47:35+0000,1600850855， where 1600850855 is the epoch,As a result of copying from OrderedProperties to Properties， the order of properties is changed https://github.com/apache/camel/blob/master/core/camel-base/src/main/java/org/apache/camel/component/properties/AbstractLocationPropertiesSource.java public Properties loadProperties(Predicate<String> filter) { Properties answer = new Properties(); for (String name : properties.stringPropertyNames()){ if (filter.test(name)) answer.put(name， properties.get(name)); } return answer; } So when creating beans from the application.properties file， the order of their creation changes and beans that depend on other beans are created earlier and do not see the desired beans in the registry https://camel.apache.org/components/latest/others/main.html#_specifying_custom_beans For example， in this application.properties #bus config camel.beans.busConFactory=#class:org.apache.activemq.ActiveMQConnectionFactory camel.beans.busConFactory.brokerURL=vm://amq-test-bus?broker.persistent=false camel.beans.busPoolFactory=#class:org.apache.activemq.pool.PooledConnectionFactory camel.beans.busPoolFactory.connectionFactory=#busConFactory camel.beans.busPoolFactory.maxConnections=3 camel.beans.busJmsConfig=#class:org.apache.camel.component.activemq.ActiveMQConfiguration camel.beans.busJmsConfig.connectionFactory=#busPoolFactory camel.beans.busJmsConfig.concurrentConsumers=2 camel.beans.busJmsConfig.preserveMessageQos=true camel.beans.busJmsConfig.transacted=true camel.beans.BUS=#class:org.apache.camel.component.activemq.ActiveMQComponent camel.beans.BUS.configuration=#busJmsConfig Bean "camel.beans.BUS" created before "camel.beans.busJmsConfig" and it did not work,Hide Permalink Chandrakant Hardahe added a comment - 23/Sep/20 12:47 Thanks Shmakov Alexey for reporting it， I'll work on this Show Chandrakant Hardahe added a comment - 23/Sep/20 12:47 Thanks Shmakov Alexey for reporting it， I'll work on this Hide Permalink Claus Ibsen added a comment - 24/Sep/20 11:49 Should be easy to fix as you just need to use ordered Properties answer = new OrderedProperties(); Show Claus Ibsen added a comment - 24/Sep/20 11:49 Should be easy to fix as you just need to use ordered Properties answer = new OrderedProperties(); Hide Permalink Chandrakant Hardahe added a comment - 24/Sep/20 11:52 Yes Claus Ibsen， PR is ready， will raise soon Show Chandrakant Hardahe added a comment - 24/Sep/20 11:52 Yes Claus Ibsen ， PR is ready， will raise soon
CAMEL-15570,Unassigned,2020-09-23T08:15:07+0000,1600834507， where 1600834507 is the epoch,Add template based component (like camel-velocity， freemarker etc) using this new libraryhttps://github.com/casid/jte,There are no comments yet on this issue.
CAMEL-15569,Jan Bednar,2020-09-22T19:43:05.996Z,1600789385.996， where 1600789385.996 is the epoch,I'm trying to implement a timer using Camel 3.5 at Gradle project with OpenJDK8 as nextfrom("timer://watchexpiration?fixedRate=true&period=600000&delay=0")...But， after build the fat jar using 1. Build with: ./gradlew build 2. Run with: java -jar build/libs/app.jarAfter that I receive the next error at consoleCaused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: timer://watchexpiration?delay=0&fixedRate=true&period=600000 due to: Error binding property (delay=0) with name: delay on bean: timer://watchexpiration?delay=0&fixedRate=true&period=600000 with value: 0 at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:888) at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:777) at org.apache.camel.support.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:58) at org.apache.camel.reifier.AbstractReifier.resolveEndpoint(AbstractReifier.java:177) at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:250) at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:112)But If I run using ./gradlew run then works fine as I expected. I don't want to use any frameworks for this project. I feel this is just a config issue or something is wrong with my configuration I guess.How can I fix it?build.gradle plugins { id 'java' id 'application' id 'com.github.sherter.google-java-format' version '0.8'}repositories { jcenter()}dependencies { implementation 'com.google.guava:guava:29.0-jre' testImplementation 'org.junit.jupiter:junit-jupiter-api:5.6.2' testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.6.2' // Camel compile group: 'org.apache.camel'， name: 'camel-core'， version: '3.5.0' compile group: 'org.apache.camel'， name: 'camel-file'， version: '3.5.0' compile group: 'org.apache.camel'， name: 'camel-file-watch'， version: '3.5.0' compile group: 'org.apache.camel'， name: 'camel-xstream'， version: '3.5.0' compile group: 'org.apache.camel'， name: 'camel-gson'， version: '3.5.0' compile group: 'org.apache.camel'， name: 'camel-rest'， version: '3.5.0' compile group: 'org.apache.camel'， name: 'camel-servlet'， version: '3.5.0' compile group: 'org.apache.camel'， name: 'camel-http'， version: '3.5.0' compile group: 'org.apache.camel'， name: 'camel-jackson'， version: '3.5.0' compile group: 'org.apache.camel'， name: 'camel-quartz'， version: '3.5.0' compile group: 'org.apache.camel'， name: 'camel-timer'， version: '3.5.0' compile group: 'org.slf4j'， name: 'slf4j-simple'， version: '1.7.30' compile group: 'org.slf4j'， name: 'slf4j-api'， version: '1.7.30' // Dev Libs compileOnly("org.projectlombok:lombok:1.18.12") annotationProcessor("org.projectlombok:lombok:1.18.12") compile group: 'org.apache.commons'， name: 'commons-csv'， version: '1.4'}application { mainClassName = 'com.eip.App'}configurations { // configuration that holds jars to include in the jar extraLibs}jar { manifest { attributes( 'Main-Class': 'com.beam.agent.App' ) } from { configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) } }}test { useJUnitPlatform()}googleJavaFormat { exclude '**/App.java'},Hide Permalink Jan Bednar added a comment - 22/Sep/20 22:25 Please dont create Jira issue for something， what is clearly your error and not a bug in Apache Camel. We are active on mailing list， zulip and StackOverflow and ready to help you. Jira is here for reporting bugs. First read this - https://camel.apache.org/manual/latest/support.html Please refrain from immediately opening a ticket in the issue tracker unless you are certain it’s a problem in the Camel software. If you are in doubt， we appreciate asking the mailing list， or Chat room first. And then look at my answer to your question on SO - https://stackoverflow.com/a/64018354/8576169 Shadowing jars is quite magic， because you need to handle duplicate entries somehow. In Apache Camel there are many META-INF service files， which are getting overwritten with your simple jar approach. Use com.github.johnrengelman.shadow which is allowing you to customize merging process. shadowJar { mergeServiceFiles() // Tell plugin to merge duplicate service files manifest { attributes 'Main-Class': 'com.eip.App' } } apply plugin: 'com.github.johnrengelman.shadow' Show Jan Bednar added a comment - 22/Sep/20 22:25 Please dont create Jira issue for something， what is clearly your error and not a bug in Apache Camel. We are active on mailing list， zulip and StackOverflow and ready to help you. Jira is here for reporting bugs. First read this - https://camel.apache.org/manual/latest/support.html Please refrain from immediately opening a ticket in the issue tracker unless you are certain it’s a problem in the Camel software. If you are in doubt， we appreciate asking the mailing list ， or Chat room first. And then look at my answer to your question on SO - https://stackoverflow.com/a/64018354/8576169 Shadowing jars is quite magic， because you need to handle duplicate entries somehow. In Apache Camel there are many META-INF service files， which are getting overwritten with your simple jar approach. Use com.github.johnrengelman.shadow which is allowing you to customize merging process. shadowJar { mergeServiceFiles() // Tell plugin to merge duplicate service files manifest { attributes 'Main- Class ' : 'com.eip.App' } } apply plugin: 'com.github.johnrengelman.shadow'
CAMEL-15568,Unassigned,2020-09-22T19:22:52+0000,1600788172， where 1600788172 is the epoch,We are using Apache Camel 3.2.0. We update camel routes at runtime using below code. // update routes in camel contexts. Definitions are in XML filesModelCamelContext mcc = camelContext.adapt(ModelCamelContext.class); mcc.addRouteDefinitions(workflowDefinitionsList); // workflowDefinitionsList is the list of XML routes Problem Statement: Dynamic routes updates causes few requests to fail at runtime. When these routes are being updated， we also call getRoute to serve live traffic.Since addRouteDefinitions first delete routes given in workflowDefinitionsList from camel context and then add those routes back to camelcontext， These routes won't be available for few mili second and that causes request to fails.Route route = exchange.getContext().getRoute(workflowRouteId); // get routeSince there can be only one CamelContext per Application， I am not sure how can I resolve this issue. Is there any other method available where we can PATCH routes changes at runtime. Dynamic route updates shouldn't cause few requests to fails. Here is camel 3 code for addRouteDefinitions method where routes are being removed and added:public synchronized void addRouteDefinitions(Collection<RouteDefinition> routeDefinitions) throws Exception { if (routeDefinitions != null && !routeDefinitions.isEmpty()) { List<RouteDefinition> list = new ArrayList(); routeDefinitions.forEach((r) -> { if (this.routeFilter == null || (Boolean)this.routeFilter.apply(r)) { list.add(r); } }); this.removeRouteDefinitions(list); this.routeDefinitions.addAll(list); if (this.shouldStartRoutes()) { ((ModelCamelContext)this.getCamelContext().adapt(ModelCamelContext.class)).startRouteDefinitions(list); } }} We are not able to updates routes in camelcontext frequently because of this issue. Everytime we update routes in camelcontext that causes us some FCI since we have high traffic in our application.,Hide Permalink Jan Bednar added a comment - 22/Sep/20 19:22 Hot reload of routes is not supported usage of this API. There are projects in Camel ecosystem much more suitable for this， like camel-quarkus or camel-k. You can also deploy your app in some application server， which support hot deploy (like Karaf， Fuse). If you need more help with this， please ask on mailing list， gitter， or StackOverflow. This is not a bug. https://camel.apache.org/manual/latest/support.html Show Jan Bednar added a comment - 22/Sep/20 19:22 Hot reload of routes is not supported usage of this API. There are projects in Camel ecosystem much more suitable for this， like camel-quarkus or camel-k. You can also deploy your app in some application server， which support hot deploy (like Karaf， Fuse). If you need more help with this， please ask on mailing list， gitter， or StackOverflow. This is not a bug. https://camel.apache.org/manual/latest/support.html Hide Permalink Minal Bhalodi added a comment - 22/Sep/20 22:17 Jan Bednar Thanks for the quick response. I already posted on stack-overflow 5 days ago and also sent email in mailing list mentioned in the above link but didn't get any response so had to create this bug. https://stackoverflow.com/questions/63931881/dynamic-routes-updates-issue-in-apache-camel Show Minal Bhalodi added a comment - 22/Sep/20 22:17 Jan Bednar Thanks for the quick response. I already posted on stack-overflow 5 days ago and also sent email in mailing list mentioned in the above link but didn't get any response so had to create this bug. https://stackoverflow.com/questions/63931881/dynamic-routes-updates-issue-in-apache-camel Hide Permalink Minal Bhalodi added a comment - 23/Sep/20 00:18 Jan Bednar any reason that hot reload is not supported in camel-core-engine? can I expect this feature to come out in future? Show Minal Bhalodi added a comment - 23/Sep/20 00:18 Jan Bednar any reason that hot reload is not supported in camel-core-engine? can I expect this feature to come out in future? Hide Permalink Jan Bednar added a comment - 23/Sep/20 01:07 This is not about core engine， but about all components， EIPs and services which would need custom logic to support that. Eg how to reload Jetty consumer? You cannot have app listening on the same port twice. Every component would need to be super smart in order to decide which change can be done on runtime on underlying library， what needs restart， it would need to compare old and new value to decide what kind of change this is. And every single component will have its own requirements to support runtime changes. All this effort will make implementation of components unmaintanable for something， what container like OSGI already does by design. And for something， what can be solved by your architectural decision (Eg NGINX reverse proxy， which will handle failover during that few millis of downtime). There are no plans to support that in near future ( eg comment in CAMEL-10138 ) . This is job for containers like OSGI which can do this natively. This is my point of view. If you want broader discussion， or you think you have some idea how to do that without rewriting all components， please join camel.zulipchat.com Show Jan Bednar added a comment - 23/Sep/20 01:07 This is not about core engine， but about all components， EIPs and services which would need custom logic to support that. Eg how to reload Jetty consumer? You cannot have app listening on the same port twice. Every component would need to be super smart in order to decide which change can be done on runtime on underlying library， what needs restart， it would need to compare old and new value to decide what kind of change this is. And every single component will have its own requirements to support runtime changes. All this effort will make implementation of components unmaintanable for something， what container like OSGI already does by design. And for something， what can be solved by your architectural decision (Eg NGINX reverse proxy， which will handle failover during that few millis of downtime). There are no plans to support that in near future ( eg comment in CAMEL-10138 ) . This is job for containers like OSGI which can do this natively. This is my point of view. If you want broader discussion， or you think you have some idea how to do that without rewriting all components， please join camel.zulipchat.com
CAMEL-15567,Claus Ibsen,2020-09-22T07:24:24+0000,1600745064， where 1600745064 is the epoch,Today we have to use camel-catalog to build endpoint uris via a set of properties/map. As the catalog has all the components and its a json file then it requires to load the json and parse it and use the catalog api to generate the endpoint.Maybe we could source code generate java code that can generate this for the component that we can embed inside each component JAR like we do for configurers.This would also be faster.We can then fallback to the catalog json based if no source code was generated (such as 3rd party components).,Hide Permalink Claus Ibsen added a comment - 22/Sep/20 07:24 See comments on https://github.com/apache/camel-k-runtime/pull/486 Show Claus Ibsen added a comment - 22/Sep/20 07:24 See comments on https://github.com/apache/camel-k-runtime/pull/486 Hide Permalink Claus Ibsen added a comment - 25/Sep/20 09:53 As we would generate this for all components then we dont need the catalog as fallback - as it would just make things a little bit more complex. Custom assemblers can be added to registry which will be used first. Show Claus Ibsen added a comment - 25/Sep/20 09:53 As we would generate this for all components then we dont need the catalog as fallback - as it would just make things a little bit more complex. Custom assemblers can be added to registry which will be used first. Hide Permalink Claus Ibsen added a comment - 25/Sep/20 11:25 - edited TODO: Generate source code for list of known endpoint options which is needed by send dynamic aware (we can use configurer as it already do that) Show Claus Ibsen added a comment - 25/Sep/20 11:25 - edited TODO: Generate source code for list of known endpoint options which is needed by send dynamic aware (we can use configurer as it already do that) Hide Permalink Claus Ibsen added a comment - 25/Sep/20 11:47 You can now do Map<String， Object> params = new HashMap<>(); params.put("loggerName"， "foo"); params.put("groupSize"， "123"); params.put("showExchangePattern"， false); params.put("logMask"， true); // should find the source code generated assembler via classpath EndpointUriAssembler assembler = context.adapt(ExtendedCamelContext.class).getEndpointUriAssembler("log"); String uri = assembler.buildUri(context， "log"， params); Assertions.assertEquals("log:foo?groupSize=123&logMask=true&showExchangePattern=false"， uri); Show Claus Ibsen added a comment - 25/Sep/20 11:47 You can now do Map< String ， Object > params = new HashMap<>(); params.put( "loggerName" ， "foo" ); params.put( "groupSize" ， "123" ); params.put( "showExchangePattern" ， false ); params.put( "logMask" ， true ); // should find the source code generated assembler via classpath EndpointUriAssembler assembler = context.adapt(ExtendedCamelContext.class).getEndpointUriAssembler( "log" ); String uri = assembler.buildUri(context， "log" ， params); Assertions.assertEquals( "log:foo?groupSize=123&logMask= true &showExchangePattern= false " ， uri); Hide Permalink Claus Ibsen added a comment - 25/Sep/20 11:50 - edited TODO: buildUri should not accept camel context but lets make the assembler camel context aware and inject it automatic DONE Show Claus Ibsen added a comment - 25/Sep/20 11:50 - edited TODO: buildUri should not accept camel context but lets make the assembler camel context aware and inject it automatic DONE Hide Permalink Claus Ibsen added a comment - 25/Sep/20 12:54 - edited TODO: Rename to EndpointUriFactory DONE Show Claus Ibsen added a comment - 25/Sep/20 12:54 - edited TODO: Rename to EndpointUriFactory DONE Hide Permalink Claus Ibsen added a comment - 26/Sep/20 08:26 Removed the cache DONE Show Claus Ibsen added a comment - 26/Sep/20 08:26 Removed the cache DONE
CAMEL-15566,Andrea Cosentino,2020-09-22T07:05:34+0000,1600743934， where 1600743934 is the epoch,,There are no comments yet on this issue.
CAMEL-15565,Claus Ibsen,2020-09-22T05:05:19+0000,1600736719， where 1600736719 is the epoch,,Hide Permalink Claus Ibsen added a comment - 22/Sep/20 05:05 If there is an existing bean such as foo that has been registered then you should be able to do camel.beans.foo.someNameHere=123 So we can lookup bean by id foo and set the value. Today you need to create a new bean first via camel.beans.foo = #class:com.MyFoo Show Claus Ibsen added a comment - 22/Sep/20 05:05 If there is an existing bean such as foo that has been registered then you should be able to do camel.beans.foo.someNameHere=123 So we can lookup bean by id foo and set the value. Today you need to create a new bean first via camel.beans.foo = #class:com.MyFoo
CAMEL-15564,Unassigned,2020-09-22T04:23:50+0000,1600734230， where 1600734230 is the epoch,USING THE JDBC BASED AGGREGATION REPOSITORY in cluster architecture， set different correlation Id in each instance， so the aggregated message will be picked up by instance which saved data in table.But randomly get below issue once read data from table then deserialize exchange， once issue occur message won't be deleted from table when new message come in will read data then constantly throw exception.java.lang.RuntimeException: Error getting key wgc_1_ACE_NOT_VALID from repository CRD_INT.FI_QAS_PRICE_AGG at org.apache.camel.processor.aggregate.jdbc.JdbcAggregationRepository$3.doInTransaction(JdbcAggregationRepository.java:293) at org.apache.camel.processor.aggregate.jdbc.JdbcAggregationRepository$3.doInTransaction(JdbcAggregationRepository.java:282) at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) at org.apache.camel.processor.aggregate.jdbc.JdbcAggregationRepository.get(JdbcAggregationRepository.java:282) at org.apache.camel.processor.aggregate.jdbc.JdbcAggregationRepository.get(JdbcAggregationRepository.java:274) at org.apache.camel.processor.aggregate.AggregateProcessor$AggregationTimeoutMap.onEviction(AggregateProcessor.java:1186) at org.apache.camel.processor.aggregate.AggregateProcessor$AggregationTimeoutMap.onEviction(AggregateProcessor.java:1152) at org.apache.camel.support.DefaultTimeoutMap.purge(DefaultTimeoutMap.java:229) at org.apache.camel.processor.aggregate.AggregateProcessor$AggregationTimeoutMap.purge(AggregateProcessor.java:1166) at org.apache.camel.support.DefaultTimeoutMap.run(DefaultTimeoutMap.java:179) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748)Caused by: java.io.StreamCorruptedException: BigInteger: signum-magnitude mismatch at java.math.BigInteger.readObject(BigInteger.java:4525) at sun.reflect.GeneratedMethodAccessor70.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184) at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2257) at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2148) at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1647) at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2366) at java.io.ObjectInputStream.defaultReadObject(ObjectInputStream.java:613) at java.math.BigDecimal.readObject(BigDecimal.java:3779) at sun.reflect.GeneratedMethodAccessor69.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184) at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2257) at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2148) at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1647) at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2366) at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2290) at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2148) at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1647) at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2366) at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2290) at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2148) at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1647) at java.io.ObjectInputStream.readObject(ObjectInputStream.java:483) at java.io.ObjectInputStream.readObject(ObjectInputStream.java:441) at java.util.ArrayList.readObject(ArrayList.java:799) at sun.reflect.GeneratedMethodAccessor79.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:1184) at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2257) at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2148) at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1647) at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2366) at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2290) at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2148) at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1647) at java.io.ObjectInputStream.readObject(ObjectInputStream.java:483) at java.io.ObjectInputStream.readObject(ObjectInputStream.java:441) at org.apache.camel.processor.aggregate.jdbc.JdbcCamelCodec.decode(JdbcCamelCodec.java:88) at org.apache.camel.processor.aggregate.jdbc.JdbcCamelCodec.unmarshallExchange(JdbcCamelCodec.java:58) at org.apache.camel.processor.aggregate.jdbc.JdbcAggregationRepository$3.doInTransaction(JdbcAggregationRepository.java:288) ... 16 common frames omitted Upgrade to camel 3.4.3 there is still deserialize issue.at org.apache.camel.processor.aggregate.AggregateProcessor.doInOptimisticLock(AggregateProcessor.java:372) at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$RedeliveryTask.doRun(RedeliveryErrorHandler.java:702) at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:60) at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:40) at org.apache.camel.component.jms.EndpointMessageListener.onMessage(EndpointMessageListener.java:128) at org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:736) at org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:696) at org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:674) at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1189) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)Caused by: java.io.InvalidClassException: java.math.BigInteger; local class incompatible: stream classdesc serialVersionUID = -8286623314374558947， local class serialVersionUID = -8287574255936472291 at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1830) at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1647) at java.math.BigDecimal.readObject(BigDecimal.java:3779) at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:2366) at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2290) at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2148) at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2148) at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1647) at java.util.ArrayList.readObject(ArrayList.java:799) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2257) at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2148) at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1647) at java.io.ObjectInputStream.readObject(ObjectInputStream.java:441) at org.apache.camel.processor.aggregate.jdbc.JdbcCamelCodec.decode(JdbcCamelCodec.java:96) at org.apache.camel.processor.aggregate.jdbc.JdbcCamelCodec.unmarshallExchange(JdbcCamelCodec.java:67) ... 29 common frames omitted,Hide Permalink Claus Ibsen added a comment - 22/Sep/20 04:23 Wonder if you have different JDK versions in your nodes or something. Show Claus Ibsen added a comment - 22/Sep/20 04:23 Wonder if you have different JDK versions in your nodes or something. Hide Permalink Claus Ibsen added a comment - 22/Sep/20 04:33 Okay are you storing something in your exchange as body/header/property that is of java.lang.BigDecimal type? Show Claus Ibsen added a comment - 22/Sep/20 04:33 Okay are you storing something in your exchange as body/header/property that is of java.lang.BigDecimal type? Hide Permalink Leo Guo added a comment - 22/Sep/20 05:36 Thanks for your support， there is same JDK version in nodes， and in my understanding even though there is different JDK version in nodes， since I set different correlation Id for different instances so message will be picked up by same instance which saved， there shouldn't be any serialVersionUID mismatch issue. In my case use Oracle as DB， when I use camel v2.25.1 I have AGGREGATED_SIZE set in header as Number type， the mapping type in java by default should be BigDecimal， is there any issue if use BigDecimal data type in exchange? Below issue also raised from out team， and for temporary solution once I upgrade to camel v3.4.3， I just customize our own repo to solve below issue， will utilize your fix in next relase. https://issues.apache.org/jira/browse/CAMEL-15489 Show Leo Guo added a comment - 22/Sep/20 05:36 Thanks for your support， there is same JDK version in nodes， and in my understanding even though there is different JDK version in nodes， since I set different correlation Id for different instances so message will be picked up by same instance which saved， there shouldn't be any serialVersionUID mismatch issue. In my case use Oracle as DB， when I use camel v2.25.1 I have AGGREGATED_SIZE set in header as Number type， the mapping type in java by default should be BigDecimal， is there any issue if use BigDecimal data type in exchange? Below issue also raised from out team， and for temporary solution once I upgrade to camel v3.4.3， I just customize our own repo to solve below issue， will utilize your fix in next relase. https://issues.apache.org/jira/browse/CAMEL-15489 Hide Permalink Leo Guo added a comment - 22/Sep/20 09:03 - edited Hi Claus Ibsen， Any suggestion? Currently we are pending on this issue， many thanks if any idea. I can't see implement Serializable/serialVersionUID defined in DefaultExchange class， is that cause this issue? Show Leo Guo added a comment - 22/Sep/20 09:03 - edited Hi Claus Ibsen ， Any suggestion? Currently we are pending on this issue， many thanks if any idea. I can't see implement Serializable/serialVersionUID defined in DefaultExchange class， is that cause this issue? Hide Permalink Andrea Cosentino added a comment - 22/Sep/20 10:09 Please don't be too eager. If you need immediate support you can use commercial offerings. https://camel.apache.org/manual/latest/commercial-camel-offerings.html Show Andrea Cosentino added a comment - 22/Sep/20 10:09 Please don't be too eager. If you need immediate support you can use commercial offerings. https://camel.apache.org/manual/latest/commercial-camel-offerings.html
CAMEL-15563,Claus Ibsen,2020-09-22T00:16:26.481Z,1600719386.481， where 1600719386.481 is the epoch,HelloUsing camel 3.3.0 in a quarkus app， on startup we get a log statement like this:Sep 22， 2020 12:08:35 AM org.apache.camel.main.BaseMainSupport autoconfigureINFO: Auto-configuration summary:Sep 22， 2020 12:08:36 AM org.apache.camel.main.BaseMainSupport lambda$autoconfigure$0INFO: camel.component.activemq.password=passwordSep 22， 2020 12:08:36 AM org.apache.camel.main.BaseMainSupport lambda$autoconfigure$0INFO: camel.component.activemq.username=usernameWe would expect to see， based on BaseMainSupport.java the following:INFO: camel.component.activemq.password=xxxxxxWhen I debug this I see the following on BaseMainSupport.autoconfigure(CamelContext camelContext) (line 536): We can work around by disabling the auto-configuration summary or disabling the logger for BaseMainSupport.,Hide Permalink Claus Ibsen added a comment - 22/Sep/20 04:58 Yeah I have reproduced the issue， and its indeed a little bug Show Claus Ibsen added a comment - 22/Sep/20 04:58 Yeah I have reproduced the issue， and its indeed a little bug
CAMEL-15562,Unassigned,2020-09-21T18:45:50+0000,1600699550， where 1600699550 is the epoch,A number of component support resuming operation from a given point in time or index but each component implement its own logic and it is currently not possible to use an external system to store such information.Because of that， even if the source support resuming from a point， we sometime still need to use an idempotent consumer which is ok but inefficient because the consumer may need to re-process events from the source as it lacks a way to retrieve from where it left.We should provide a generic mechanism to implement such logic so that: it should be possible to restart a camel application without having to re-process events from the source even without the need of an idempotent repository (for sources that support resuming) in case of sources that support partitioning， it should be possible to consume data from an elastic pool of camel consumers as the information about the consumer state is stored in an external repository so the system can rebalance the load anc new consumer can start where others have leftInProgressRepositoryThis repository is similar to the IndempotentRepository except it should allow to query the status of the entries.InProgressStrategyA simple strategy that automatically update the InProgressRepository according to some headers like: CamelInProgressID: the key of the event CamelInProgressValue: the value (opaque) CamelInProgressStatus: the status of the consumer for the given key (i.e. could be InProgress when the consumer is processing a file and become Done when the file is fully processed)We should also implement a mechanism to be able to consistently determine the "partition key" according to the active consumers.,There are no comments yet on this issue.
CAMEL-15561,Andrea Cosentino,2020-09-21T17:04:28+0000,1600693468， where 1600693468 is the epoch,,There are no comments yet on this issue.
CAMEL-15560,Luca Burgazzoli,2020-09-21T12:02:52+0000,1600675372， where 1600675372 is the epoch,In camel-k we have a mechanism to load routes written in different languages， in camel instead we only support XML. We should move the generic loader to Camel from Camel K and leave the implementations where they fit better. I'm proposing to remove the following methods from the ExtendedCamelContext and replace them with a generic discovery mechanism similar to the one used for components & co to find the appropriate loader based on the file extension. /** * Sets a custom {@link XMLRoutesDefinitionLoader} to be used. */ void setXMLRoutesDefinitionLoader(XMLRoutesDefinitionLoader xmlRoutesDefinitionLoader); /** * Gets the {@link XMLRoutesDefinitionLoader} to be used. */ XMLRoutesDefinitionLoader getXMLRoutesDefinitionLoader();,Hide Permalink Claus Ibsen added a comment - 21/Sep/20 12:02 Yeah this is a good idea and it has been developed and hardened at camel-k so it should be good and safe to port to camel core Show Claus Ibsen added a comment - 21/Sep/20 12:02 Yeah this is a good idea and it has been developed and hardened at camel-k so it should be good and safe to port to camel core
CAMEL-15559,Claus Ibsen,2020-09-21T09:27:18.747Z,1600666038.747， where 1600666038.747 is the epoch,for instance:camel.main.xml-routes = classpath:routes/my-routes.xmlreports a validation error althoughcamel.main.xml-routes= classpath:routes/my-routes.xml is working fine,There are no comments yet on this issue.
CAMEL-15558,Unassigned,2020-09-21T10:29:10+0000,1600669750， where 1600669750 is the epoch,Hello ! I’m trying to use this simple route with Camel 3.4.3 and springboot : from("timer:hello?repeatCount=1&delay=1000").routeId("hello") .to("log:1") .pollEnrich("file:d:\\temp?noop=true&fileName=dummy.csv"，5000) .to("log:2"); I run it without the file dummy.csv， to test the timeout option. The timeout functionality does not seem to work， as you can see in the log， there’s no delay between log1 and log2: 2020-09-19 11:39:30.099 INFO 186564 --- [- timer://hello] 1 : Exchange[ExchangePattern: InOnly， BodyType: null， Body: [Body is null]]2020-09-19 11:39:30.107 INFO 186564 --- [- timer://hello] o.a.camel.component.file.FileEndpoint : Endpoint is configured with noop=true so forcing endpoint to be idempotent as well2020-09-19 11:39:30.107 INFO 186564 --- [- timer://hello] o.a.camel.component.file.FileEndpoint : Using default memory based idempotent repository with cache max size: 10002020-09-19 11:39:30.208 INFO 186564 --- [- timer://hello] 2 : Exchange[ExchangePattern: InOnly， BodyType: null， Body: [Body is null]] However， with Camel 2.24.3 It seems to work as expected as we can see the 5 sec delay between log1 and log2: 2020-09-19 11:38:50.242 INFO 151696 --- [- timer://hello] 1 : Exchange[ExchangePattern: InOnly， BodyType: null， Body: [Body is null]]2020-09-19 11:38:50.244 INFO 151696 --- [- timer://hello] o.a.camel.processor.interceptor.Tracer : ID-ITEM-S74991-1600508328077-0-1 >>> (hello) log://1 --> pollEnrich[constant{file:d:\temp?noop=true&fileName=dummy.csv}] <<< Pattern:InOnly， Headers:{breadcrumbId=ID-ITEM-S74991-1600508328077-0-1， firedTime=Sat Sep 19 11:38:50 CEST 2020}， BodyType:null， Body:[Body is null]2020-09-19 11:38:50.259 INFO 151696 --- [- timer://hello] o.a.camel.component.file.FileEndpoint : Endpoint is configured with noop=true so forcing endpoint to be idempotent as well2020-09-19 11:38:50.259 INFO 151696 --- [- timer://hello] o.a.camel.component.file.FileEndpoint : Using default memory based idempotent repository with cache max size: 10002020-09-19 11:38:55.355 INFO 151696 --- [- timer://hello] o.a.camel.processor.interceptor.Tracer : ID-ITEM-S74991-1600508328077-0-1 >>> (hello) pollEnrich[constant{file:d:\temp?noop=true&fileName=dummy.csv}] --> log://2 <<< Pattern:InOnly， Headers:{breadcrumbId=ID-ITEM-S74991-1600508328077-0-1， CamelToEndpoint=file://d:%5Ctemp?fileName=dummy.csv&noop=true， firedTime=Sat Sep 19 11:38:50 CEST 2020}， BodyType:null， Body:[Body is null]2020-09-19 11:38:55.355 INFO 151696 --- [- timer://hello] 2 : Exchange[ExchangePattern: InOnly， BodyType: null， Body: [Body is null]],Hide Permalink Chandrakant Hardahe added a comment - 21/Sep/20 10:29 Thanks ncasaux for reporting it， I'll work on this Show Chandrakant Hardahe added a comment - 21/Sep/20 10:29 Thanks ncasaux for reporting it， I'll work on this
CAMEL-15557,Unassigned,2020-09-20T10:54:43+0000,1600584883， where 1600584883 is the epoch,If you have a route with a Multicast with parallel processing and a timeout and a sub-route in the multicast which is creating an OutputStreamCache before the timeout and is writing to the OutputStreamCache after the timeout then the created file is never deleted from the file system. Similar situation as described in https://issues.apache.org/jira/browse/CAMEL-15532. The difference to https://issues.apache.org/jira/browse/CAMEL-15532 is that the OutputStreamCache is created before the timeout; in CAMEL-15532 the OutputStreamCache was created after the timeout and also the writing to the OutputStreamCache happened after the timeout.With our current concept to determine the UnitOfWork which removes via the onDone event the created file， we can only determine the described situation and throw an exception. See provided patch.,There are no comments yet on this issue.
CAMEL-15556,Jan Bednar,2020-09-19T11:56:23+0000,1600502183， where 1600502183 is the epoch,Now we have check， which fails if git tree is dirty. This is serving its purpose， but it is hard to keep master green with many commits. Lets modify master workflow， to create automated PR instead of failing.,There are no comments yet on this issue.
CAMEL-15555,Unassigned,2020-09-19T15:09:53+0000,1600513793， where 1600513793 is the epoch,When: using Camel with CDI having routes defined in multiple beans one bean defines the route template another bean attempts to create a route from that templateI would expect that the route templates are configured before any routes that build from them.What happens is non-deterministic based on the order the RoutesBuilder instances are provided by the CDI runtime. In a good case， the template bean is processed first and all is as-expected. However， when the template bean is provided after any bean that attempts to build from it we get the error:Caused by: java.lang.IllegalArgumentException: Cannot find RouteTemplate with id ListProcess{{ at org.apache.camel.quarkus.core.BaseModel.addRouteFromTemplate(BaseModel.java:167)}}{{ at org.apache.camel.quarkus.core.FastCamelContext.addRouteFromTemplate(FastCamelContext.java:188)}}{{ at org.apache.camel.builder.TemplatedRouteBuilder.add(TemplatedRouteBuilder.java:104)}}Attempted a workaround by annotating the template bean with @Priority(1)， however this had no effect.,Hide Permalink Claus Ibsen added a comment - 19/Sep/20 15:09 Thanks for reporting. You are welcome to dive into the lovely code of camel-cdi to see if something can be improved. Show Claus Ibsen added a comment - 19/Sep/20 15:09 Thanks for reporting. You are welcome to dive into the lovely code of camel-cdi to see if something can be improved.
CAMEL-15554,Unassigned,2020-09-18T15:38:31+0000,1600429111， where 1600429111 is the epoch,Some 3rd party does not have fully javadoc for their own APIs， so we need to fill in the gapshttps://camel.apache.org/components/latest/braintree-component.html#_query_api_parameters_14_apis,There are no comments yet on this issue.
CAMEL-15553,Claus Ibsen,2020-09-18T15:02:35+0000,1600426955， where 1600426955 is the epoch,I'm subclassing camel-jms component and need to add additional configuration bean with some uri parameters. Unfortunately， when generating configurers， the plugin creates only one getOrCreateConfiguration method (for parent JmsConfiguration bean) in component configurer and tries to reference parameters within my additional configuration bean using this method， creating invalid java code. I was able to circumvent this by adding parameters directly to my subclassed component， but this is ugly and adds unnecessary code to component (also cannot reuse the configuration bean in subclassed endpoint). Below is link to example component demonstrating the issue: https://github.com/vdobos-tr/camel-maven-plugin-issue,Hide Permalink Claus Ibsen added a comment - 18/Sep/20 15:02 - edited You should use this goal for 3rd party components org.apache.camel.maven.packaging.GenerateComponentMojo That said there may still be some limitations or something we dont yet support for what you do. Show Claus Ibsen added a comment - 18/Sep/20 15:02 - edited You should use this goal for 3rd party components org.apache.camel.maven.packaging.GenerateComponentMojo That said there may still be some limitations or something we dont yet support for what you do. Hide Permalink Vladimir Dobos added a comment - 18/Sep/20 16:04 Updated github example with camel-package-maven-plugin and generate-component goal (aka org.apache.camel.maven.packaging.GenerateComponentMojo)) as suggested. Does not fix the issue. This plugin generates identical incorrect configurer as camel-component-maven-plugin for component. Show Vladimir Dobos added a comment - 18/Sep/20 16:04 Updated github example with camel-package-maven-plugin and generate-component goal (aka org.apache.camel.maven.packaging.GenerateComponentMojo)) as suggested. Does not fix the issue. This plugin generates identical incorrect configurer as camel-component-maven-plugin for component. Hide Permalink Claus Ibsen added a comment - 21/Sep/20 11:43 Btw a bit unrelated questions. Whats your reason for extending camel-jms? I am asking if whether maybe what you do is something others could need and we could add this out of the box. Show Claus Ibsen added a comment - 21/Sep/20 11:43 Btw a bit unrelated questions. Whats your reason for extending camel-jms? I am asking if whether maybe what you do is something others could need and we could add this out of the box. Hide Permalink Claus Ibsen added a comment - 21/Sep/20 11:44 Having a 2nd configuration class like that wasn't intended， but lets see what we can improve here in the source code generators Show Claus Ibsen added a comment - 21/Sep/20 11:44 Having a 2nd configuration class like that wasn't intended， but lets see what we can improve here in the source code generators Hide Permalink Vladimir Dobos added a comment - 21/Sep/20 13:09 Claus Ibsen answering you question about reason to subclass: IBM MQ issues - we are using ACCOUNTING_TOKEN header in IBM MQ， which requires me to set special property (either read or write) on each created jms destination object. setBooleanProperty(WMQConstants.WMQ_MQMD_READ_ENABLED， true/false) etc. see https://www.ibm.com/support/knowledgecenter/SSFKSJ_9.0.0/com.ibm.mq.dev.doc/q032340_.htm This can be solved paritially using DestinationResolver abstraction. Unfortunately， this is not a solution for temporary queues (DestinationResolver is not used there and it is also not suitable to be used). Also， camel-jms does not call destination resolver in one of cases when replying on from(jms:...) using EndpointMessageListener/EndpointMessageListenerAsyncCallback. There is also no proper way to distinguish if the queue property should be set for read or write (if its in or out queue in DestinationResolver). I originally intended to try fix this in camel-jms (even got managerial aproval to spend some time on that) and submit PR， but as camel-jms is quite complicated beast (there is a LOT of code that looks never used and I have no idea why it is still there， even after spending few weeks inside of camel-jms and spring-jms)， I was quite anxious to start messing with it. I need to add custom code (implemented as standard processors) before each send-to-queue and after each recieve-from-queue event to facilitate custom messaging format (convergent evolution web service-like XML format， with some additional features like caller/backend identity and more). Our customer is trying to replace part of their ESB with microservices using Apache Camel and by subclassing camel-jms I'm making this custom format transparent for their integration developers (first iteration had this implemented as routes and processors， but this becomes tricky with more complex routes). I'm fully aware that camel-jms is not well suited (and was obviously not intended) for the amount of extension I need from it (some private， internal and final classes， had to copy lot of code). Proper way for me would be to fork entire camel-jms， but im part of slow-moving enterprise project (15 years and counting， still in production， still adding features) and unfortunately we don't have resources to maintain and update full forks， so by subclassing it I'm making it easier for me(or someone else) to compare changes and rebase on newer camel releases in the future. We already have "ancient" forks of apache synapse and atomikos as part of different subproject， and I would REALLY like to avoid repeating that situation Show Vladimir Dobos added a comment - 21/Sep/20 13:09 Claus Ibsen answering you question about reason to subclass: IBM MQ issues - we are using ACCOUNTING_TOKEN header in IBM MQ， which requires me to set special property (either read or write) on each created jms destination object. setBooleanProperty(WMQConstants.WMQ_MQMD_READ_ENABLED， true/false) etc. see https://www.ibm.com/support/knowledgecenter/SSFKSJ_9.0.0/com.ibm.mq.dev.doc/q032340_.htm This can be solved paritially using DestinationResolver abstraction. Unfortunately， this is not a solution for temporary queues (DestinationResolver is not used there and it is also not suitable to be used). Also， camel-jms does not call destination resolver in one of cases when replying on from(jms:...) using EndpointMessageListener/EndpointMessageListenerAsyncCallback. There is also no proper way to distinguish if the queue property should be set for read or write (if its in or out queue in DestinationResolver). I originally intended to try fix this in camel-jms (even got managerial aproval to spend some time on that) and submit PR， but as camel-jms is quite complicated beast (there is a LOT of code that looks never used and I have no idea why it is still there， even after spending few weeks inside of camel-jms and spring-jms)， I was quite anxious to start messing with it. I need to add custom code (implemented as standard processors) before each send-to-queue and after each recieve-from-queue event to facilitate custom messaging format (convergent evolution web service-like XML format， with some additional features like caller/backend identity and more). Our customer is trying to replace part of their ESB with microservices using Apache Camel and by subclassing camel-jms I'm making this custom format transparent for their integration developers (first iteration had this implemented as routes and processors， but this becomes tricky with more complex routes). I'm fully aware that camel-jms is not well suited (and was obviously not intended) for the amount of extension I need from it (some private， internal and final classes， had to copy lot of code). Proper way for me would be to fork entire camel-jms， but im part of slow-moving enterprise project (15 years and counting， still in production， still adding features) and unfortunately we don't have resources to maintain and update full forks， so by subclassing it I'm making it easier for me(or someone else) to compare changes and rebase on newer camel releases in the future. We already have "ancient" forks of apache synapse and atomikos as part of different subproject， and I would REALLY like to avoid repeating that situation Hide Permalink Claus Ibsen added a comment - 21/Sep/20 19:03 Thanks for the detailed explanation. Yeah spring-jms is some complex code， but its been around for over a decade and battle tested， and so has camel-jms. The JMS spec and brokers have many bells and whistles and hence there are some parts of this that seems "who uses this". The source code generator has been fixed for 3.6 onwards. And for 3.4.x you can copy the generated source code and put in your own src/main folder and modify to handle the 2 configuration classes Show Claus Ibsen added a comment - 21/Sep/20 19:03 Thanks for the detailed explanation. Yeah spring-jms is some complex code， but its been around for over a decade and battle tested， and so has camel-jms. The JMS spec and brokers have many bells and whistles and hence there are some parts of this that seems "who uses this". The source code generator has been fixed for 3.6 onwards. And for 3.4.x you can copy the generated source code and put in your own src/main folder and modify to handle the 2 configuration classes Hide Permalink Claus Ibsen added a comment - 21/Sep/20 19:05 And btw this is the plugin name you should really use for end users <plugin> <groupId>org.apache.camel</groupId> <artifactId>camel-component-maven-plugin</artifactId> <version>${camel.version}</version> <configuration> <!-- set to true to make build fail fast if missing documentation in docs files --> <failFast>false</failFast> </configuration> <executions> <execution> <id>generate</id> <goals> <goal>generate</goal> </goals> <phase>process-classes</phase> </execution> </executions> </plugin> <plugin> <groupId>org.codehaus.mojo</groupId> <artifactId>build-helper-maven-plugin</artifactId> <version>3.2.0</version> <executions> <execution> <phase>initialize</phase> <goals> <goal>add-source</goal> <goal>add-resource</goal> </goals> <configuration> <sources> <source>src/generated/java</source> </sources> <resources> <resource> <directory>src/generated/resources</directory> </resource> </resources> </configuration> </execution> </executions> </plugin> Show Claus Ibsen added a comment - 21/Sep/20 19:05 And btw this is the plugin name you should really use for end users <plugin> <groupId>org.apache.camel</groupId> <artifactId>camel-component-maven-plugin</artifactId> <version>${camel.version}</version> <configuration> <!-- set to true to make build fail fast if missing documentation in docs files --> <failFast> false </failFast> </configuration> <executions> <execution> <id>generate</id> <goals> <goal>generate</goal> </goals> <phase>process-classes</phase> </execution> </executions> </plugin> <plugin> <groupId>org.codehaus.mojo</groupId> <artifactId>build-helper-maven-plugin</artifactId> <version>3.2.0</version> <executions> <execution> <phase>initialize</phase> <goals> <goal>add-source</goal> <goal>add-resource</goal> </goals> <configuration> <sources> <source>src/generated/java</source> </sources> <resources> <resource> <directory>src/generated/resources</directory> </resource> </resources> </configuration> </execution> </executions> </plugin>
CAMEL-15552,Jan Bednar,2020-09-18T17:44:44+0000,1600436684， where 1600436684 is the epoch,If this step fails， it should report the modified files to make it easier to fix. Upgrade UnicornGlobal/has-changes-action if has-changes-action#2 gets merged or find alternative approach otherwise.,Hide Permalink Jan Bednar added a comment - 18/Sep/20 17:44 Switched to fork bedlaj/has-changes-action temporarilly with 4c1e3cdf4ccd64a66cc0ff8a86fbd6e7f6e82670. I am keeping this issue open to do not forget to change back to upstream， if has-changes-action#2 gets merged. Show Jan Bednar added a comment - 18/Sep/20 17:44 Switched to fork bedlaj/has-changes-action temporarilly with 4c1e3cdf4ccd64a66cc0ff8a86fbd6e7f6e82670 . I am keeping this issue open to do not forget to change back to upstream， if has-changes-action#2 gets merged.
CAMEL-15551,Unassigned,2020-09-18T12:02:33.258Z,1600416153.258， where 1600416153.258 is the epoch,We are connecting to Artemis broker(2.13.0) deployed in Docker Container using Camel JMS Component (Version 2.25.1) We are connecting to Artemis broker(2.13.0) deployed in Docker Container using Camel JMS Component (Version 2.25.1) When we have multiple consumer routes we are facing below exception ，: ActiveMQSecurityException[errorType=SECURITY_EXCEPTION message=AMQ229031: Unable to validate user from /host:52202. Username: null; SSL certificate subject DN: unavailable[main] DEBUG org.apache.camel.component.jms.DefaultJmsMessageListenerContainer - Could not establish shared JMS Connection - leaving it up to asynchronous invokers to establish a Connection as soon as possiblejavax.jms.JMSSecurityException: AMQ229031: Unable to validate user from /localhost:52486. Username: null; SSL certificate subject DN: unavailable at org.apache.activemq.artemis.core.protocol.core.impl.ChannelImpl.sendBlocking(ChannelImpl.java:467) at org.apache.activemq.artemis.core.protocol.core.impl.ChannelImpl.sendBlocking(ChannelImpl.java:361) at org.apache.activemq.artemis.core.protocol.core.impl.ActiveMQClientProtocolManager.createSessionContext(ActiveMQClientProtocolManager.java:300) at org.apache.activemq.artemis.core.protocol.core.impl.ActiveMQClientProtocolManager.createSessionContext(ActiveMQClientProtocolManager.java:249) at org.apache.activemq.artemis.core.client.impl.ClientSessionFactoryImpl.createSessionChannel(ClientSessionFactoryImpl.java:1366) at org.apache.activemq.artemis.core.client.impl.ClientSessionFactoryImpl.createSessionInternal(ClientSessionFactoryImpl.java:691) at org.apache.activemq.artemis.core.client.impl.ClientSessionFactoryImpl.createSession(ClientSessionFactoryImpl.java:316) at org.apache.activemq.artemis.jms.client.ActiveMQConnection.authorize(ActiveMQConnection.java:684) at org.apache.activemq.artemis.jms.client.ActiveMQConnectionFactory.createConnectionInternal(ActiveMQConnectionFactory.java:920) at org.apache.activemq.artemis.jms.client.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:299) at org.apache.activemq.artemis.jms.client.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:294)The same works when we have single consumer routes.When we connect to Standalone broker both single and multiple consumer route worksWhen I use Artemis core library with plain java classes without camel JMScomponent then we are able to make connection for more than 1 consumers.,Hide Permalink Claus Ibsen added a comment - 18/Sep/20 12:02 Please get in touch via mailing list or chat room first to get help， before anything is established as a blocker bug. You do not get faster help for creating a JIRA and say its a blocker. Show Claus Ibsen added a comment - 18/Sep/20 12:02 Please get in touch via mailing list or chat room first to get help， before anything is established as a blocker bug. You do not get faster help for creating a JIRA and say its a blocker. Hide Permalink Claus Ibsen added a comment - 18/Sep/20 12:03 See here how to get help from the community https://camel.apache.org/community/support/ Show Claus Ibsen added a comment - 18/Sep/20 12:03 See here how to get help from the community https://camel.apache.org/community/support/ Hide Permalink Ramarajan R added a comment - 18/Sep/20 12:03 Hi Claus， Apologize， I am raising ticket for the first time. please pardon me . will do the same. Thanks. R Ramarajan. Show Ramarajan R added a comment - 18/Sep/20 12:03 Hi Claus， Apologize， I am raising ticket for the first time. please pardon me . will do the same. Thanks. R Ramarajan. Hide Permalink Ramarajan R added a comment - 21/Sep/20 16:27 Hi claus/team， The issue is fixed with Artemis 2.15.0. https://issues.apache.org/jira/browse/ARTEMIS-2905 Thanks for your guidance. Thanks， R ramarajan. Show Ramarajan R added a comment - 21/Sep/20 16:27 Hi claus/team， The issue is fixed with Artemis 2.15.0. https://issues.apache.org/jira/browse/ARTEMIS-2905 Thanks for your guidance. Thanks， R ramarajan.
CAMEL-15550,Pasquale Congiusti,2020-09-18T10:49:20+0000,1600411760， where 1600411760 is the epoch,While working on camel-quarkus extension for ssh component I realized that there is no documentation mentioning that the SSH component is based on SSHD-core library with BouncyCastle security provider. This provider is explicitly chose by the camel-ssh component versus the EdDSA which would be the alternative. We should add a little mention so the user know behind the hood the security provider used is going to be BouncyCastle.,Hide Permalink Pasquale Congiusti added a comment - 18/Sep/20 10:49 Will be closed by https://github.com/apache/camel/pull/4246 Show Pasquale Congiusti added a comment - 18/Sep/20 10:49 Will be closed by https://github.com/apache/camel/pull/4246
CAMEL-15549,Claus Ibsen,2020-09-20T11:36:06+0000,1600587366， where 1600587366 is the epoch,Currently we dont have that information in the component json， but you can only find out by looking into the source code.So we need a way to specify: consumerOnly， producerOnly per api method.,Hide Permalink Claus Ibsen added a comment - 20/Sep/20 11:36 The as2 component has a bit backwards with server api name = consumer， and client api name = producer Show Claus Ibsen added a comment - 20/Sep/20 11:36 The as2 component has a bit backwards with server api name = consumer， and client api name = producer Hide Permalink Claus Ibsen added a comment - 20/Sep/20 11:48 - edited Define consumer and producer only camel-as2 DONE camel-box DONE camel-braintree DONE camel-fhir DONE camel-google-calendar DONE camel-google-drive DONE camel-google-mail DONE camel-google-sheets DONE camel-twilio DONE camel-zendesk DONE Show Claus Ibsen added a comment - 20/Sep/20 11:48 - edited Define consumer and producer only camel-as2 DONE camel-box DONE camel-braintree DONE camel-fhir DONE camel-google-calendar DONE camel-google-drive DONE camel-google-mail DONE camel-google-sheets DONE camel-twilio DONE camel-zendesk DONE
CAMEL-15548,James Netherton,2020-09-18T06:30:58+0000,1600396258， where 1600396258 is the epoch,When using mvel， it seems there is no short way of accessing headers. You always have to go via the exchange message object. E.g:return "The result is " + (request.headers.numA + request.headers.numB);It'd be nicer if it worked like most of the other templating components and have access to a headers object like:return "The result is " + (headers.numA + headers.numB);,There are no comments yet on this issue.
CAMEL-15547,Unassigned,2020-09-17T18:51:37+0000,1600354297， where 1600354297 is the epoch,When declaring an http endpoint for an URL with a query string using endpoint dsl the target URL is incorrect due to appended value to the last parameter. Consider the following route snippet:....to(http("myhost/mypath?param1=a&param2=b").httpMethod("GET"))... The endpoint URI computed by AbstractEndpointBuilder is: myhost/mypath?param1=a&param2=b?httpMethod=GET (spot the double question mark) }}and this leads to a wrong http request to {{http://myhost/mypath?param1=a&param2=b%3FhttpMethod%3DGET.If the query string is removed from the URI and provided as Exchange.HTTP_QUERY header the final HTTP URL is correct. The same route without endpoint dsl works fine…to("http://myhost/mypath?param1=a&param2=b&httpMethod=GET")… The problem may be in the following code in AbstractEndpointBuilder.computeUri， where a query string computed with endpoint parameters is added to the target path without checking for the presence of a question mark.String query = URISupport.createQueryString(params， encode);answer = new NormalizedUri(targetScheme + "://" + targetPath + "?" + query);I don't know if this is the desired behavior and potential query string part of URIs should be provided in other ways (eg as header) or if it is a bug. Here is a test to replicate the problem @Override protected RoutesBuilder createRouteBuilder() throws Exception { return new EndpointRouteBuilder() { @Override public void configure() throws Exception { restConfiguration().port(9999); rest().get("path/xyz") .to("log:myLogger?level=INFO&showAll=true") .to("mock:result"); from(direct("test")) .to(http("localhost:9999/path/xyz?param1=1&param1=2").httpMethod("GET")); from(direct("test2")) .to("http://localhost:9999/path/xyz?param1=1&param2=2&httpMethod=GET"); } }; } // Test passes @Test public void testRoute() throws InterruptedException { MockEndpoint mockEndpoint = getMockEndpoint("mock:result"); mockEndpoint.expectedHeaderReceived("param1"， "1"); mockEndpoint.expectedHeaderReceived("param2"， "2"); template.sendBody("direct:test2"， null); mockEndpoint.assertIsSatisfied(); } // Test fails with // java.lang.AssertionError: mock://result Header with name param1 for message: 0. Expected: <1> but was: <[1， 2%3FhttpMethod%3DGET]> // Expected :<1> // Actual :<[1， 2%3FhttpMethod%3DGET]> @Test public void testEndpointDslRoute() throws InterruptedException { MockEndpoint mockEndpoint = getMockEndpoint("mock:result"); mockEndpoint.expectedHeaderReceived("param1"， "1"); mockEndpoint.expectedHeaderReceived("param2"， "2"); template.sendBody("direct:test"， null); mockEndpoint.assertIsSatisfied(); },Hide Permalink Chandrakant Hardahe added a comment - 17/Sep/20 18:51 Thanks Marco Collovati for reporting it， I'll work on this Show Chandrakant Hardahe added a comment - 17/Sep/20 18:51 Thanks Marco Collovati for reporting it， I'll work on this
CAMEL-15546,Unassigned,2020-09-17T17:01:25+0000,1600347685， where 1600347685 is the epoch,when I use shuffle query param in file consumer， the consumer not picking files randomly from("file:\\\folder?maxMessagesPerPoll=1&delete=true&readLockMinLength=0&readLock=changed&readLockTimeout=1000&readLockCheckInterval=1000&shuffle=true),Hide Permalink Jan Bednar added a comment - 17/Sep/20 17:01 Please read the docs. This is clearly documented. eagerMaxMessagesPerPoll - Allows for controlling whether the limit from maxMessagesPerPoll is eager or not. If eager then the limit is during the scanning of files. Where as false would scan all files， and then perform sorting. Setting this option to false allows for sorting all files first， and then limit the poll. Mind that this requires a higher memory usage as all file details are in memory to perform the sorting. And next time prefer get in touch on other channels before opening a bug. https://camel.apache.org/manual/latest/support.html We prefer people to get in touch first using the mailing list， or Chat room. Or take time to read FAQs， or search in the mailing list archives to find answers. Unfortunately some people create a JIRA ticket as first thing. Please don’t do that! Only if you are sure it really is a bug， etc. JIRA tickets create noise for the Camel team to react on issues that are not bugs but already covered in FAQs， in the mailing lists， etc.， or in the existing documentation. Also on the mailing lists there are more people active to help you better. Show Jan Bednar added a comment - 17/Sep/20 17:01 Please read the docs. This is clearly documented. eagerMaxMessagesPerPoll - Allows for controlling whether the limit from maxMessagesPerPoll is eager or not. If eager then the limit is during the scanning of files. Where as false would scan all files， and then perform sorting. Setting this option to false allows for sorting all files first， and then limit the poll. Mind that this requires a higher memory usage as all file details are in memory to perform the sorting. And next time prefer get in touch on other channels before opening a bug. https://camel.apache.org/manual/latest/support.html We prefer people to get in touch first using the mailing list， or Chat room. Or take time to read FAQs， or search in the mailing list archives to find answers. Unfortunately some people create a JIRA ticket as first thing. Please don’t do that! Only if you are sure it really is a bug， etc. JIRA tickets create noise for the Camel team to react on issues that are not bugs but already covered in FAQs， in the mailing lists， etc.， or in the existing documentation. Also on the mailing lists there are more people active to help you better.
CAMEL-15545,Unassigned,2020-09-17T16:54:04+0000,1600347244， where 1600347244 is the epoch,I want to run the apache camel file route on multiple nodes and the source folder is same for both nodes and expecting route process files parallelly when I tried the running camel on multiple nodes， files are processing in a round-robin fashion，Example:- Node1 will pick 1 file (Node2 is waiting for node1 to process)after node1 processing， node2 will pick a new file (Node1 will wait for node2 to process file) I want both nodes should process files parallelly Route :from("file:\\\folder?maxMessagesPerPoll=1&delete=true&readLockMinLength=0&readLock=changed&readLockTimeout=1000&readLockCheckInterval=1000),Hide Permalink Jan Bednar added a comment - 17/Sep/20 16:54 Ask on mailing list， zulip or stackoverflow. See https://camel.apache.org/manual/latest/support.html . Also please stop cloning the issue， this one was already closed as invalid yesterday CAMEL-15537 and you will not get answer here. Show Jan Bednar added a comment - 17/Sep/20 16:54 Ask on mailing list， zulip or stackoverflow. See https://camel.apache.org/manual/latest/support.html . Also please stop cloning the issue， this one was already closed as invalid yesterday CAMEL-15537 and you will not get answer here.
CAMEL-15544,Unassigned,2020-09-17T14:45:12+0000,1600339512， where 1600339512 is the epoch,When using either parameter tempFileName or tempPrefix with a relative path， the component will not create the final target directory and moving/renaming the file from the temp location will fail.Both tests below will fail when placing them in FtpProducerTempPrefixTest@Testpublic void testWriteUsingRelativeTempPrefix() throws Exception { sendFile("ftp://admin@localhost:" + getPort() + "/upload/user/claus?binary=false&password=admin" + "&tempPrefix=../tmp/tmp_"， "Hello World"， "claus.txt"); Thread.sleep(500); File file = new File(FTP_ROOT_DIR + "/upload/user/claus/claus.txt"); assertTrue(file.exists()， "The uploaded file should exists"); assertEquals("Hello World"， IOConverter.toString(file， null));}@Testpublic void testWriteUsingRelativeTempFileName() throws Exception { sendFile("ftp://admin@localhost:" + getPort() + "/upload/user/claus?binary=false&password=admin" + "&tempFileName=../tmp/${file:name.noext}.tmp"， "Hello World"， "claus.txt"); Thread.sleep(500); File file = new File(FTP_ROOT_DIR + "/upload/user/claus/claus.txt"); assertTrue(file.exists()， "The uploaded file should exists"); assertEquals("Hello World"， IOConverter.toString(file， null));},Hide Permalink Jan Bednar added a comment - 17/Sep/20 14:45 - edited Option jailStartingDirectory is true by default， preventing you from writing outside of starting path. Please test with `jailStartingDirectory=false` and if it works， please close this issue as this is desirable behavior. Show Jan Bednar added a comment - 17/Sep/20 14:45 - edited Option jailStartingDirectory is true by default， preventing you from writing outside of starting path. Please test with `jailStartingDirectory=false` and if it works， please close this issue as this is desirable behavior. Hide Permalink Oliver Limberg added a comment - 17/Sep/20 15:00 - edited I am not navigating outside of the starting path. I understand starting path at the users FTP directory or in this case FTP_ROOT_DIR. However， I just tried with the additional Parameter and both tests still fail // code placeholder org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[] at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45) at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:692) at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:594) at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:590) at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:220) at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:212) at org.apache.camel.component.file.remote.FtpServerTestSupport.sendFile(FtpServerTestSupport.java:145) at org.apache.camel.component.file.remote.FtpProducerTempPrefixTest.testWriteUsingRelativeTempFileName(FtpProducerTempPrefixTest.java:59) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.base/java.lang.reflect.Method.invoke(Method.java:566) at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688) at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60) at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131) at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149) at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140) at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84) at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115) at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105) at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106) at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64) at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45) at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37) at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104) at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98) at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206) at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131) at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129) at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126) at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84) at java.base/java.util.ArrayList.forEach(ArrayList.java:1540) at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129) at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126) at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84) at java.base/java.util.ArrayList.forEach(ArrayList.java:1540) at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129) at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126) at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84) at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32) at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51) at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108) at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96) at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75) at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69) at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47) at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242) at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)Caused by: org.apache.camel.component.file.GenericFileOperationFailedException: Cannot rename file from: upload/user/tmp/claus.tmp to: upload/user/claus/claus.txt at org.apache.camel.component.file.GenericFileProducer.processExchange(GenericFileProducer.java:211) at org.apache.camel.component.file.remote.RemoteFileProducer.process(RemoteFileProducer.java:59) at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:66) at org.apache.camel.processor.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:217) at org.apache.camel.processor.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:111) at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83) at org.apache.camel.processor.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:108) at org.apache.camel.impl.engine.DefaultProducerCache.send(DefaultProducerCache.java:189) at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:175) at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:171) at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:152) at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:218) ... 68 more Show Oliver Limberg added a comment - 17/Sep/20 15:00 - edited I am not navigating outside of the starting path. I understand starting path at the users FTP directory or in this case FTP_ROOT_DIR. However， I just tried with the additional Parameter and both tests still fail // code placeholder org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[] at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45) at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:692) at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:594) at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:590) at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:220) at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:212) at org.apache.camel.component.file.remote.FtpServerTestSupport.sendFile(FtpServerTestSupport.java:145) at org.apache.camel.component.file.remote.FtpProducerTempPrefixTest.testWriteUsingRelativeTempFileName(FtpProducerTempPrefixTest.java:59) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.base/java.lang.reflect.Method.invoke(Method.java:566) at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688) at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60) at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131) at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149) at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140) at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84) at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115) at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105) at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106) at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64) at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45) at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37) at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104) at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98) at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206) at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131) at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129) at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126) at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84) at java.base/java.util.ArrayList.forEach(ArrayList.java:1540) at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129) at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126) at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84) at java.base/java.util.ArrayList.forEach(ArrayList.java:1540) at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129) at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126) at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84) at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32) at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51) at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108) at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88) at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54) at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67) at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52) at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96) at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75) at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69) at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47) at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242) at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70)Caused by: org.apache.camel.component.file.GenericFileOperationFailedException: Cannot rename file from: upload/user/tmp/claus.tmp to: upload/user/claus/claus.txt at org.apache.camel.component.file.GenericFileProducer.processExchange(GenericFileProducer.java:211) at org.apache.camel.component.file.remote.RemoteFileProducer.process(RemoteFileProducer.java:59) at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:66) at org.apache.camel.processor.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:217) at org.apache.camel.processor.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:111) at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83) at org.apache.camel.processor.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:108) at org.apache.camel.impl.engine.DefaultProducerCache.send(DefaultProducerCache.java:189) at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:175) at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:171) at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:152) at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeader(DefaultProducerTemplate.java:218) ... 68 more Hide Permalink Jan Bednar added a comment - 17/Sep/20 15:10 Your starting directory is `/upload/user/claus` and your temp files are saved in `/upload/user/tmp` so yes， you are navigating outside of starting path. Thanks for testing with `jailStartingDirectory=false`. Show Jan Bednar added a comment - 17/Sep/20 15:10 Your starting directory is `/upload/user/claus` and your temp files are saved in `/upload/user/tmp` so yes， you are navigating outside of starting path. Thanks for testing with `jailStartingDirectory=false`. Hide Permalink Oliver Limberg added a comment - 17/Sep/20 15:20 Thanks for clarification about the definition of starting path. But if `jailStartingDirectory` is true by default， should the creation of the temporary file already fail? Executing the tests shows the temporary file is created outside of the starting path and the starting path itself i not created. Show Oliver Limberg added a comment - 17/Sep/20 15:20 Thanks for clarification about the definition of starting path. But if `jailStartingDirectory` is true by default， should the creation of the temporary file already fail? Executing the tests shows the temporary file is created outside of the starting path and the starting path itself i not created. Hide Permalink Jan Bednar added a comment - 17/Sep/20 15:23 Yes， this should probably also fail earlier. Lets keep this issue open to analyze. Show Jan Bednar added a comment - 17/Sep/20 15:23 Yes， this should probably also fail earlier. Lets keep this issue open to analyze.
CAMEL-15543,Unassigned,2020-09-17T13:53:47+0000,1600336427， where 1600336427 is the epoch,I have a simple route where I write some string to an output file and then trying to append the contents of the original file. But it ignores and it overwrites the file. {{from("file://inputFolder")}} *{{{{.routeId("InputFolderToTestSedaRoute") .setProperty("myFileConsumedBody"， simple("${body}")) .setBody(constant("FIRST LINE!"))}}}}* *{{.to("file://{{outputFolder") .setBody(simple("${exchangeProperty.myFileConsumedBody}"))}}}}* {{.log("** STEP 100: ${headers} :**")}} *{{{{.delay(10000) .to("file://outputFolder?fileExist=Append") ;}}}}*I added delay to observe what happens. If there is an input file named myFile.txt， Camel picks that file as expected. It keeps the file to an custome exchange property as in the code. It opens a file named myFile.txt and writes the content "FIRST LINE!" in it and waits for the delay to expire. I can open and verify the contents， everything looks good. Once delay expires， Camel overwrites the file myFile.txt with the original content it picked from input folder (even though I have asked Camel to append).,Hide Permalink Jan Bednar added a comment - 17/Sep/20 13:53 - edited This is fixed in 2.24.3. Please reopen if you have same issue in 2.24.3， 3.0.0， 2.25.0 or later. The linked issue also mentions workaround， if you cant upgrade. Show Jan Bednar added a comment - 17/Sep/20 13:53 - edited This is fixed in 2.24.3. Please reopen if you have same issue in 2.24.3， 3.0.0， 2.25.0 or later. The linked issue also mentions workaround， if you cant upgrade.
CAMEL-15542,Zoran Regvart,2020-09-17T07:01:38+0000,1600311698， where 1600311698 is the epoch,On the top right corner there is a link to zulip chat (between github and twitter icons)https://camel.apache.org/We should have an icon for the chat,Hide Permalink Claus Ibsen added a comment - 17/Sep/20 07:01 There is something odd as the brand-logos.svg has zulip entry， but on my browser its not shown. Changing the element to id=twitter or github works. Show Claus Ibsen added a comment - 17/Sep/20 07:01 There is something odd as the brand-logos.svg has zulip entry， but on my browser its not shown. Changing the element to id=twitter or github works. Hide Permalink Claus Ibsen added a comment - 17/Sep/20 07:05 Ah there are 2 brand logo files， and gitter is in the other one ./documentation/_/img/brand-logos.svg ./public/_/img/brand-logos.svg ./antora-ui-camel/public/_/img/brand-logos.svg ./antora-ui-camel/src/img/brand-logos.svg Show Claus Ibsen added a comment - 17/Sep/20 07:05 Ah there are 2 brand logo files， and gitter is in the other one ./documentation/_/img/brand-logos.svg ./public/_/img/brand-logos.svg ./antora-ui-camel/public/_/img/brand-logos.svg ./antora-ui-camel/src/img/brand-logos.svg Hide Permalink Claus Ibsen added a comment - 17/Sep/20 07:06 Zoran Regvart not sure what the build system of the website is， but the zulip svg logo inside ./antora-ui-camel/src/img/brand-logos.svg is not copied over into the other files. Show Claus Ibsen added a comment - 17/Sep/20 07:06 Zoran Regvart not sure what the build system of the website is， but the zulip svg logo inside ./antora-ui-camel/src/img/brand-logos.svg is not copied over into the other files. Hide Permalink Jan Bednar added a comment - 17/Sep/20 18:32 Is this still the case? On my side it is OK after clearing browser cache and site-shot.com sees also correct version - https://www.site-shot.com/RALRCPkTEeqgSAJCrBEAAg . Show Jan Bednar added a comment - 17/Sep/20 18:32 Is this still the case? On my side it is OK after clearing browser cache and site-shot.com sees also correct version - https://www.site-shot.com/RALRCPkTEeqgSAJCrBEAAg . Hide Permalink Claus Ibsen added a comment - 18/Sep/20 04:51 Yeah it was local browser cache and also stale file of camel-website build. Show Claus Ibsen added a comment - 18/Sep/20 04:51 Yeah it was local browser cache and also stale file of camel-website build. Hide Permalink Zoran Regvart added a comment - 24/Sep/20 18:33 The icon is the one for Gitter， we need to use the Zulip icon. Show Zoran Regvart added a comment - 24/Sep/20 18:33 The icon is the one for Gitter， we need to use the Zulip icon. Hide Permalink Zoran Regvart added a comment - 24/Sep/20 18:34 The website should show the Zulip logo in few minutes. Show Zoran Regvart added a comment - 24/Sep/20 18:34 The website should show the Zulip logo in few minutes.
CAMEL-15541,Luigi De Masi,2020-09-18T15:46:50+0000,1600429610， where 1600429610 is the epoch,At the moment the camel-jasypt-starter doesn't do anything. Add auto-configuration that registers the necessary beans to allow properties decryption inside and outside the camel context.,Hide Permalink Claus Ibsen added a comment - 18/Sep/20 15:46 Thanks for the PR Show Claus Ibsen added a comment - 18/Sep/20 15:46 Thanks for the PR
CAMEL-15540,Unassigned,2020-09-17T04:45:29+0000,1600303529， where 1600303529 is the epoch,I made a small route from("sftp://...").to("ftp://...")which downloads a lot of files recursively. This results in a lot of empty directories， that i have to clean up manually afterwards. In my opinion， this behavior could be improved by deleting directories， when all files within it have been downloaded.I acknowledge that there are some grey zones. What if directories are initially empty? They should probably not get deleted， as they have not been "flagged" as having downloadable content.I'm just throwing a ball in the air here， because i feel the current functionality seems - inconvenient.,Hide Permalink Claus Ibsen added a comment - 17/Sep/20 04:45 This has never been the case， the file component doesnt delete directories either. House cleaning like this is the job of the host of the FTP server. They can have a script that runs through their file system and remove empty directories that they run periodically. Its too complex and surprising if Camel starts playing such role. Its there for picking up files. Show Claus Ibsen added a comment - 17/Sep/20 04:45 This has never been the case， the file component doesnt delete directories either. House cleaning like this is the job of the host of the FTP server. They can have a script that runs through their file system and remove empty directories that they run periodically. Its too complex and surprising if Camel starts playing such role. Its there for picking up files. Hide Permalink Michael Jensen Garde added a comment - 17/Sep/20 15:33 Thanks for the reply. I see. Such a change would have to many implications， so i agree with most of what you say. However， if there is no option to administrate the ftp (and file) server， I'm left with the same issue as before. In my opinion， Camel (ftp component at least) does more than picking up files. As the delete=true option is available Camel also performs some of cleanup. Show Michael Jensen Garde added a comment - 17/Sep/20 15:33 Thanks for the reply. I see. Such a change would have to many implications， so i agree with most of what you say. However， if there is no option to administrate the ftp (and file) server， I'm left with the same issue as before. In my opinion， Camel (ftp component at least) does more than picking up files. As the delete=true option is available Camel also performs some of cleanup.
CAMEL-15539,Claus Ibsen,2020-09-16T15:07:44+0000,1600254464， where 1600254464 is the epoch,If you configure a message id strategy then its currently only used on consumer side in Camel for SOAP replies.It should be used in producer as well， in the WebTemplate where there is some callback action that you can use it with.,There are no comments yet on this issue.
CAMEL-15538,Unassigned,2020-09-16T15:04:43+0000,1600254283， where 1600254283 is the epoch,it will allow to use computing power of a Quantum computer. to launch job on a Quantum Computer to listen to result from the job on a Quantum computerhttps://qiskit.org/documentation/apidoc/ibmq-provider.htmlavailable library is written in Python so migth be quite some work https://github.com/Qiskit/qiskit-ibmq-provideror maybe it can be rewritten using directly the REST API for IBM Quantum https://api.quantum-computing.ibm.com/v2/documentation.html?_ga=2.200951015.870923672.1604673144-1500770967.1598614684,There are no comments yet on this issue.
CAMEL-15537,Unassigned,2020-09-16T13:22:50+0000,1600248170， where 1600248170 is the epoch,I want to run the apache camel file route on multiple nodes and the source is the same for both nodes and expecting route process files parallelly when I tried same file are processing in round-robin fashion，Example:- Node1 will pick 1 file (Node2 is waiting for node1 to process)after node1 processing node2 will pick new file (Node1 will wait for node2 to process file) I want both nodes should process files parallelly Route : from("file:\\\folder?maxMessagesPerPoll=1&delete=true&readLockMinLength=0&readLock=changed&readLockTimeout=1000&readLockCheckInterval=1000),Hide Permalink Andrea Cosentino added a comment - 16/Sep/20 13:22 this is a question for the mailing list， it's not an issue and it seems more like "can i do this? or how I can do this?". So please start from the mailing list. Show Andrea Cosentino added a comment - 16/Sep/20 13:22 this is a question for the mailing list， it's not an issue and it seems more like "can i do this? or how I can do this?". So please start from the mailing list. Hide Permalink sravan added a comment - 16/Sep/20 15:15 Hi ， Could you help me in implementation. On Wed， Sep 16， 2020， 6:53 PM Andrea Cosentino (Jira) <jira@apache.org> Show sravan added a comment - 16/Sep/20 15:15 Hi ， Could you help me in implementation. On Wed， Sep 16， 2020， 6:53 PM Andrea Cosentino (Jira) <jira@apache.org>
CAMEL-15536,Jan Bednar,2020-09-16T09:54:30+0000,1600235670， where 1600235670 is the epoch,People are creating PRs with changes， which will be discarded after build (mainly generated adoc files) and Github action currently passes without errors. It would be nice to add one step to github action， which will check for uncommited changes after build and fail， if working tree is dirty.,There are no comments yet on this issue.
CAMEL-15535,Unassigned,2020-09-16T09:36:56.038Z,1600234616.038， where 1600234616.038 is the epoch,When processing a code 39 barcode it would be helpful to add additional headers to the exchange.For example if you unmarshal a barcode that is rotated 180 degrees the orientation is included in the result object.Result result = reader.decode(bitmap， this.readerHintMap);,Hide Permalink Chandrakant Hardahe added a comment - 16/Sep/20 12:03 Hi Paddy Daly Thanks for reporting it， I'll work on this. Show Chandrakant Hardahe added a comment - 16/Sep/20 12:03 Hi Paddy Daly Thanks for reporting it， I'll work on this. Hide Permalink Chandrakant Hardahe added a comment - 16/Sep/20 19:48 - edited Hi Paddy Daly， I verified the use case for 180 degrees orientation. It would be really nice if you can suggest what additional headers we can add to the exchange， i.e If we can add header Orientation with respective value Should we add all the values to header which is in resultMetadata ? Show Chandrakant Hardahe added a comment - 16/Sep/20 19:48 - edited Hi Paddy Daly ， I verified the use case for 180 degrees orientation. It would be really nice if you can suggest what additional headers we can add to the exchange， i.e If we can add header Orientation with respective value Should we add all the values to header which is in resultMetadata ? Hide Permalink Paddy Daly added a comment - 16/Sep/20 20:02 Hi Chandrankant Thanks for looking into this so quickly. My immediate use case requires just the orientation but from having a quick look the following seems worth investigating. public enum ResultMetadataType { OTHER， ORIENTATION， BYTE_SEGMENTS， ERROR_CORRECTION_LEVEL， ISSUE_NUMBER， SUGGESTED_PRICE， POSSIBLE_COUNTRY， UPC_EAN_EXTENSION， PDF417_EXTRA_METADATA， STRUCTURED_APPEND_SEQUENCE， STRUCTURED_APPEND_PARITY; private ResultMetadataType() { } } In addition to that it seems like returning the position of the barcode could be of interest， this looks like it is stored in the ResultPoint object. public final class Result { private final String text; private final byte[] rawBytes; private final int numBits; private ResultPoint[] resultPoints; private final BarcodeFormat format; private Map<ResultMetadataType， Object> resultMetadata; private final long timestamp; Sorry， I'll investigate tomorrow and attempt to give a more concrete response. Show Paddy Daly added a comment - 16/Sep/20 20:02 Hi Chandrankant Thanks for looking into this so quickly. My immediate use case requires just the orientation but from having a quick look the following seems worth investigating. public enum ResultMetadataType { OTHER， ORIENTATION， BYTE_SEGMENTS， ERROR_CORRECTION_LEVEL， ISSUE_NUMBER， SUGGESTED_PRICE， POSSIBLE_COUNTRY， UPC_EAN_EXTENSION， PDF417_EXTRA_METADATA， STRUCTURED_APPEND_SEQUENCE， STRUCTURED_APPEND_PARITY; private ResultMetadataType() { } } In addition to that it seems like returning the position of the barcode could be of interest， this looks like it is stored in the ResultPoint object. public final class Result { private final String text; private final byte [] rawBytes; private final int numBits; private ResultPoint[] resultPoints; private final BarcodeFormat format; private Map<ResultMetadataType， Object > resultMetadata; private final long timestamp; Sorry， I'll investigate tomorrow and attempt to give a more concrete response.
CAMEL-15534,Andrea Cosentino,2020-09-15T13:44:40+0000,1600163080， where 1600163080 is the epoch,There is an issue when I create KafkaStreams app which get messages sent from telegram， transform it and sent back to telegram， camel-telegram cannot parse chatId from header - https://gist.github.com/Frawless/564623a3fffb258a036f424e09402dc5 The problem is on this line I think - https://github.com/apache/camel/blob/camel-3.5.0/components/camel-telegram/src/main/java/org/apache/camel/component/telegram/TelegramProducer.java#L83 I have tried to remove the cast and instead of it use String.valueOf()and it's working fine for me. However， I am not sure if this suitable solution (maybe there is something better already implemented in camel).,Hide Permalink Otavio Rodolfo Piske added a comment - 15/Sep/20 13:44 Cross-referencing the issue on CKC: https://github.com/apache/camel-kafka-connector/issues/463 Show Otavio Rodolfo Piske added a comment - 15/Sep/20 13:44 Cross-referencing the issue on CKC: https://github.com/apache/camel-kafka-connector/issues/463
CAMEL-15533,Andrea Cosentino,2020-09-15T05:28:58+0000,1600133338， where 1600133338 is the epoch,[3] Exception in thread "main" org.apache.camel.FailedToStartRouteException: Failed to start route route2 because of null[3] at org.apache.camel.impl.engine.RouteService.warmUp(RouteService.java:125)[3] at org.apache.camel.impl.engine.InternalRouteStartupManager.doWarmUpRoutes(InternalRouteStartupManager.java:263)[3] at org.apache.camel.impl.engine.InternalRouteStartupManager.safelyStartRouteServices(InternalRouteStartupManager.java:156)[3] at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartOrResumeRoutes(InternalRouteStartupManager.java:114)[3] at org.apache.camel.impl.engine.AbstractCamelContext.doStartCamel(AbstractCamelContext.java:2809)[3] at org.apache.camel.impl.engine.AbstractCamelContext.doStartContext(AbstractCamelContext.java:2657)[3] at org.apache.camel.impl.engine.AbstractCamelContext.doStart(AbstractCamelContext.java:2620)[3] at org.apache.camel.support.service.BaseService.start(BaseService.java:115)[3] at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2452)[3] at org.apache.camel.k.main.ApplicationRuntime$MainAdapter.doStart(ApplicationRuntime.java:208)[3] at org.apache.camel.support.service.BaseService.start(BaseService.java:115)[3] at org.apache.camel.main.MainSupport.run(MainSupport.java:60)[3] at org.apache.camel.k.main.ApplicationRuntime.run(ApplicationRuntime.java:72)[3] at org.apache.camel.k.main.Application.main(Application.java:42)[3] Caused by: java.lang.NullPointerException[3] at org.apache.camel.component.slack.SlackConsumer.getChannelId(SlackConsumer.java:137)[3] at org.apache.camel.component.slack.SlackConsumer.<init>(SlackConsumer.java:54)[3] at org.apache.camel.component.slack.SlackEndpoint.createConsumer(SlackEndpoint.java:84)[3] at org.apache.camel.impl.engine.DefaultRoute.addServices(DefaultRoute.java:560)[3] at org.apache.camel.impl.engine.DefaultRoute.onStartingServices(DefaultRoute.java:166)[3] at org.apache.camel.impl.engine.RouteService.doWarmUp(RouteService.java:153)[3] at org.apache.camel.impl.engine.RouteService.warmUp(RouteService.java:123)[3] ... 13 more,There are no comments yet on this issue.
CAMEL-15532,Andrea Cosentino,2020-09-14T15:49:00+0000,1600084140， where 1600084140 is the epoch,If you have a route with a Multicast with parallel processing and a timeout and a sub-route in the multicast which is creating a StreamCache after the timeout then the created stream cache file is never deleted from the file system.,There are no comments yet on this issue.
CAMEL-15531,Zineb BENDHIBA,2020-09-14T13:30:51+0000,1600075851， where 1600075851 is the epoch,This upgrade of code is needed to use optaplanner-quarkus extension， and also for users not using config file anymore. SolverManager can be used easily with spring boot and quarkus， using DI.,There are no comments yet on this issue.
CAMEL-15530,Andrea Cosentino,2020-09-13T18:23:05+0000,1600006985， where 1600006985 is the epoch,When using Camel aws2-s3 component and the `includeFolders` option as false， some `ResponseInputStream` objects are left unclosed and are causing the aws sdk connection pool to get full. example of Route: from("aws2-s3://{{aws.s3.sftpBucket}}?amazonS3Client=#amazonS3&delay=1000" + "&includeFolders=false") .to("file:/tmp/?fileName=${header.CamelAwsS3Key}")this results in the exception appearing in the logs after some seconds: Caused by: [software.amazon.awssdk.core.exception.SdkClientException - Unable to execute HTTP request: Timeout waiting for connection from pool]software.amazon.awssdk.core.exception.SdkClientException: Unable to execute HTTP request: Timeout waiting for connection from pool at software.amazon.awssdk.core.exception.SdkClientException$BuilderImpl.build(SdkClientException.java:98) at software.amazon.awssdk.core.exception.SdkClientException.create(SdkClientException.java:43) at software.amazon.awssdk.core.internal.http.pipeline.stages.utils.RetryableStageHelper.setLastException(RetryableStageHelper.java:199) at software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:66) at software.amazon.awssdk.core.internal.http.pipeline.stages.RetryableStage.execute(RetryableStage.java:34) at software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) at software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:56) at software.amazon.awssdk.core.internal.http.StreamManagingStage.execute(StreamManagingStage.java:36) at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.executeWithTimer(ApiCallTimeoutTrackingStage.java:80) at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:60) at software.amazon.awssdk.core.internal.http.pipeline.stages.ApiCallTimeoutTrackingStage.execute(ApiCallTimeoutTrackingStage.java:42) at software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) at software.amazon.awssdk.core.internal.http.pipeline.RequestPipelineBuilder$ComposingRequestPipelineStage.execute(RequestPipelineBuilder.java:206) at software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:37) at software.amazon.awssdk.core.internal.http.pipeline.stages.ExecutionFailureExceptionReportingStage.execute(ExecutionFailureExceptionReportingStage.java:26) at software.amazon.awssdk.core.internal.http.AmazonSyncHttpClient$RequestExecutionBuilderImpl.execute(AmazonSyncHttpClient.java:189) at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.invoke(BaseSyncClientHandler.java:121) at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.doExecute(BaseSyncClientHandler.java:147) at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.execute(BaseSyncClientHandler.java:101) at software.amazon.awssdk.core.client.handler.SdkSyncClientHandler.execute(SdkSyncClientHandler.java:45) at software.amazon.awssdk.awscore.client.handler.AwsSyncClientHandler.execute(AwsSyncClientHandler.java:55) at software.amazon.awssdk.services.s3.DefaultS3Client.listObjects(DefaultS3Client.java:4792) at org.apache.camel.component.aws2.s3.AWS2S3Consumer.poll(AWS2S3Consumer.java:138) at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:190) at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:107) at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at java.base/java.lang.Thread.run(Thread.java:834)Caused by: org.apache.http.conn.ConnectionPoolTimeoutException: Timeout waiting for connection from pool at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.leaseConnection(PoolingHttpClientConnectionManager.java:316) at org.apache.http.impl.conn.PoolingHttpClientConnectionManager$1.get(PoolingHttpClientConnectionManager.java:282) at jdk.internal.reflect.GeneratedMethodAccessor305.invoke(Unknown Source) at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.base/java.lang.reflect.Method.invoke(Method.java:566) at software.amazon.awssdk.http.apache.internal.conn.ClientConnectionRequestFactory$Handler.invoke(ClientConnectionRequestFactory.java:83) at com.sun.proxy.$Proxy137.get(Unknown Source) at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:190) at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186) at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185) at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83) at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56) at software.amazon.awssdk.http.apache.internal.impl.ApacheSdkHttpClient.execute(ApacheSdkHttpClient.java:72) at software.amazon.awssdk.http.apache.ApacheHttpClient.execute(ApacheHttpClient.java:232) at software.amazon.awssdk.http.apache.ApacheHttpClient.access$500(ApacheHttpClient.java:98) at software.amazon.awssdk.http.apache.ApacheHttpClient$1.call(ApacheHttpClient.java:213) The issue doesn't repeat when the `includeFolders` is kept as true.,Hide Permalink Filipe Portes added a comment - 13/Sep/20 18:23 PR: https://github.com/apache/camel/pull/4209 Show Filipe Portes added a comment - 13/Sep/20 18:23 PR: https://github.com/apache/camel/pull/4209
CAMEL-15529,Jean-Baptiste Onofré,2020-09-13T05:40:07+0000,1599961207， where 1599961207 is the epoch,Currently， inner camel features reference other feature using just "version"， which means [version，). It means that users could have issue as some different camel versions can be involved in the features resolution.A workaround is to blacklist other Camel features/features repository in etc/org.apache.karaf.features.xml.The actual fix is actual to define the concrete target version using [version，version].,There are no comments yet on this issue.
CAMEL-15528,Jan Bednar,2020-09-12T19:36:33+0000,1599924993， where 1599924993 is the epoch,It is broken by CAMEL-15210 and CAMEL-15478 ( 4df55c268b6f8755f6dafd81a4df825c902c61b5 ),There are no comments yet on this issue.
CAMEL-15527,Jan Bednar,2020-09-14T08:01:46+0000,1600056106， where 1600056106 is the epoch,We should make sure， the project generated with archetype can be actually built to avoid regressions like: CAMEL-14234 CAMEL-15525 CAMEL-14142This can be done with maven-archetype-plugin:integration-test goal.,Hide Permalink Jan Bednar added a comment - 14/Sep/20 08:01 Merged to master with 364a8ce88b24e7e21b2f11238c7defa4110da119. One failing test will be fixed with CAMEL-15528 Show Jan Bednar added a comment - 14/Sep/20 08:01 Merged to master with 364a8ce88b24e7e21b2f11238c7defa4110da119 . One failing test will be fixed with CAMEL-15528
CAMEL-15526,Andrea Cosentino,2020-09-13T00:22:05+0000,1599942125， where 1599942125 is the epoch,Hi，When consuming Gzip file from S3 using AWS2-S3 component， file not downlaoding properly;Same code working for AWS-S3， after upgrading to AWS2-S3， this code not working. Task: 1. Download "myfile.csv.gzip" file from S3.2. GUnzip file and send to processor. 3. Processor will send file to http end point using multipart upload.Here is the code used. {{}}from("aws2-s3://mybucket?amazonS3Client=#amazonS3Client&deleteAfterRead=false&delay=5000&synchronous=true&includeBody=true&autocloseBody=false&prefix=myfile.csv.gz"){{ .unmarshal().gzipDeflater()}}{{ .process(@Override public void process(Exchange exchange) throws Exception {}}{{ MultipartEntityBuilder multipartEntityBuilder = MultipartEntityBuilder.create(); String filename = exchange.getIn().getHeader(AWS2S3Constants.KEY， String.class); String body = exchange.getIn().getBody(String.class); ContentBody cd = new InputStreamBody(new ByteArrayInputStream(body.getBytes())， ContentType.MULTIPART_FORM_DATA， "temp.csv"); multipartEntityBuilder.addPart("file"， cd); System.out.println(cd); exchange.getOut().setBody(multipartEntityBuilder.build()) .to("direct:httproute");}}{{}}Stack Trace:Stack Trace[main] WARN software.amazon.awssdk.profiles.internal.ProfileFileReader - Ignoring profile 'plugins' on line 6 because it did not start with 'profile ' and it was not 'default'.[main] INFO org.apache.camel.support.LRUCacheFactory - Detected and using LRUCacheFactory: camel-caffeine-lrucache[main] INFO org.apache.camel.component.http.HttpComponent - Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@1b73be9f[main] INFO org.apache.camel.component.http.HttpComponent - Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@35a9782c[main] INFO org.apache.camel.impl.engine.AbstractCamelContext - Apache Camel 3.4.2 (camel-1) is starting[main] INFO org.apache.camel.impl.engine.AbstractCamelContext - StreamCaching is not in use. If using streams then its recommended to enable stream caching. See more details at http://camel.apache.org/stream-caching.html[main] INFO org.apache.camel.impl.engine.AbstractCamelContext - Using HealthCheck: camel-health[main] INFO org.apache.camel.impl.engine.InternalRouteStartupManager - Route: route1 started and consuming from: aws2-s3://mybucket[main] INFO org.apache.camel.impl.engine.InternalRouteStartupManager - Route: route2 started and consuming from: direct://httproute[main] INFO org.apache.camel.impl.engine.AbstractCamelContext - Total 3 routes， of which 3 are started[main] INFO org.apache.camel.impl.engine.AbstractCamelContext - Apache Camel 3.4.2 (camel-1) started in 1.496 seconds[Camel (camel-1) thread #1 - aws2-s3://mybucket] INFO consuming - Consumer Fired![Camel (camel-1) thread #1 - aws2-s3://mybucket] INFO route1 - Replay Message Sent to file:s3out input_2020-07-01-07-20-31-796_0.csv.gz[Camel (camel-1) thread #1 - aws2-s3://mybucket] ERROR org.apache.camel.processor.errorhandler.DefaultErrorHandler - Failed delivery for (MessageId: ID-DGHANTA-Mac-1599955541230-0-1 on ExchangeId: ID-DGHANTA-Mac-1599955541230-0-1). Exhausted after delivery attempt: 1 caught: java.util.zip.ZipException: Not in GZIP formatMessage History (complete message history is disabled)---------------------------------------------------------------------------------------------------------------------------------------RouteId ProcessorId Processor Elapsed (ms)[route1 ] [route1 ] [from[aws2-s3://mybucket?amazonS3Client=%23] [ 250] ...[route1 ] [unmarshal1 ] [unmarshal[org.apache.camel.model.dataformat.GzipDataFormat@d41f816] ] [ 0]Stacktrace---------------------------------------------------------------------------------------------------------------------------------------java.util.zip.ZipException: Not in GZIP format at java.util.zip.GZIPInputStream.readHeader(GZIPInputStream.java:165) at java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:79) at java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:91) at org.apache.camel.dataformat.deflater.GzipDeflaterDataFormat.unmarshal(GzipDeflaterDataFormat.java:62) at org.apache.camel.support.processor.UnmarshalProcessor.process(UnmarshalProcessor.java:64) at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:60) at org.apache.camel.processor.Pipeline.process(Pipeline.java:147) at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:286) at org.apache.camel.component.aws2.s3.AWS2S3Consumer.processBatch(AWS2S3Consumer.java:200) at org.apache.camel.component.aws2.s3.AWS2S3Consumer.poll(AWS2S3Consumer.java:113) at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:187) at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:106) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748)Regards，Dinesh{{}},Hide Permalink Dinesh added a comment - 13/Sep/20 00:22 Updated Stack trace. Show Dinesh added a comment - 13/Sep/20 00:22 Updated Stack trace.
CAMEL-15525,Otavio Rodolfo Piske,2020-09-12T09:34:20+0000,1599888860， where 1599888860 is the epoch,When you generate a project using the command below， the main class on the pom file does not match the actual pom file generated. mvn archetype:generate -B -DarchetypeGroupId=org.apache.camel.archetypes -DarchetypeArtifactId=camel-archetype-java -DarchetypeVersion=3.4.3 -DgroupId=camel-passo-a-passo -DartifactId=primeiro-app-camel -Dversion=1.0.0-SNAPSHOT -Dpackage=primeiro.app.camelOn the pom.xml: <configuration> <logClasspath>true</logClasspath> <mainClass>primeiro.app.camel.MainApp</mainClass></configuration>On the project: find src -iname '*.java'src/main/java/primeiro/app/camel/MainApp.javasrc/main/java/primeiro/app/camel/MyRouteBuilder.java,Hide Permalink Otavio Rodolfo Piske added a comment - 12/Sep/20 09:34 Fix verified locally. Should be available on the next releases. Show Otavio Rodolfo Piske added a comment - 12/Sep/20 09:34 Fix verified locally. Should be available on the next releases.
CAMEL-15524,Luca Burgazzoli,2020-09-11T12:35:58+0000,1599813358， where 1599813358 is the epoch,The camel-caffeine component uri now has a path param that is used to set the cache name: caffeine-cache://cacheName[?options]but the param is never taken into account and if you want to use a pre-configured cache from the registry， you need to add an additional option， like: caffeine-cache://cacheName?cache=#myCacheI think we can reuse the cacheName path param to lookup a cache from the registry and if not found， fall-back to creating an embedded one.,There are no comments yet on this issue.
CAMEL-15523,Andrea Cosentino,2020-09-11T05:47:19+0000,1599788839， where 1599788839 is the epoch,,There are no comments yet on this issue.
CAMEL-15522,Unassigned,2020-09-11T05:09:15+0000,1599786555， where 1599786555 is the epoch,I'm trying to configure Camel AWS Xray tracing via this code Route: <bean id="xRayStrategy" class="org.apache.camel.component.aws.xray.TraceAnnotatedTracingStrategy" /><bean id="aws-xray-tracer" class="org.apache.camel.component.aws.xray.XRayTracer" > <property name="tracingStrategy" ref="xRayStrategy"/></bean><camelContext id="zedoc" trace="true" errorHandlerRef="zedocRetryErrorHandler" xmlns="http://camel.apache.org/schema/spring"> <jmxAgent id="agent"/> <errorHandler id="zedocRetryErrorHandler" type="DeadLetterChannel" deadLetterUri="file://{{zedoc.dead.letter.folder}}/" useOriginalMessage="true" onPrepareFailureRef="failureProcessor"> <redeliveryPolicy maximumRedeliveries="5" retryAttemptedLogLevel="WARN" backOffMultiplier="2" useExponentialBackOff="true"/> </errorHandler> <route autoStartup="true" id="fileToMllpServer"> <from uri="file://{{zedoc.hl7.folder}}?delete=true"/> <convertBodyTo type="java.lang.String"/> <log message="The Message body is: ${body}"/> <to uri="netty:tcp://{{zedoc.tcp.host}}:{{zedoc.tcp.port}}?sync=false&amp;decoders=#hl7decoder&amp;encoders=#hl7encoder&amp;ssl=true&amp;sslContextParameters=#sslContextParameters"/> </route> <route autoStartup="true" id="mllpServer"> <from uri="netty:tcp://{{zedoc.tcp.host}}:{{zedoc.tcp.port}}?sync=false&amp;decoders=#hl7decoder&amp;encoders=#hl7encoder&amp;needClientAuth=true&amp;ssl=true&amp;sslContextParameters=#sslContextParameters"/> <log message="The Message body is: ${body}"/> <bean ref="textToJms" method="processADT"/> <log message="The Message body is: ${body}"/> <to uri="amqp:queue:{{zedoc.mq.org}}.{{zedoc.mq.queue}}"/> <!--<to id="_kafka1" uri="kafka:{{producer.topic}}"/>--> </route></camelContext>POM:<!-- aws x-ray --> <dependency> <groupId>org.apache.camel</groupId> <artifactId>camel-aws-xray</artifactId> <version>3.4.3</version></dependency><dependency> <groupId>com.amazonaws</groupId> <artifactId>aws-xray-recorder-sdk-core</artifactId> <version>2.7.1</version></dependency><dependency> <groupId>com.amazonaws</groupId> <artifactId>aws-xray-recorder-sdk-aws-sdk</artifactId> <version>2.7.1</version></dependency> Processor:public class ADT01Processor { final Logger logger = LoggerFactory.getLogger(ADT01Processor.class); @Handler public String processADT(Exchange exchange) throws Exception { ADT_A01 inMsg = exchange.getIn().getBody(ADT_A01.class); Terser t = new Terser(inMsg); // create JSON Patient p = new Patient(); String recipientId = t.get("/.PID-3-1"); if(recipientId == null || recipientId.isEmpty()){ throw new Exception("HL7 don't have PID-3-1 that used for mandatory recipientId field"); } Identifier id = new Identifier(recipientId， recipientId); p.addIdetifier(id); String name = t.get("/.PID-5-2"); Name n = new Name(name); p.addName(n); EnrollPatientA01 a01 = new EnrollPatientA01(p); MQMessage outMsg = new MQMessage("fakeGroup"); outMsg.setRawMessage(a01); // stringify Gson gson = new Gson(); String stringifyied = gson.toJson(outMsg); logger.info(stringifyied); return stringifyied; }} And got an errorjava.lang.IllegalStateException: Failed to load ApplicationContext at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:123) ~[spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190) ~[spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132) ~[spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244) ~[spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:98) ~[spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$5(ClassBasedTestDescriptor.java:341) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:346) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:341) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195) ~[na:na] at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177) ~[na:na] at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1655) ~[na:na] at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484) ~[na:na] at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474) ~[na:na] at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312) ~[na:na] at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na] at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na] at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658) ~[na:na] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:340) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:263) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:256) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at java.base/java.util.Optional.orElseGet(Optional.java:369) ~[na:na] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:255) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:29) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:108) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:107) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:71) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:107) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:107) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:75) ~[junit-platform-engine-1.6.2.jar:1.6.2] at java.base/java.util.ArrayList.forEach(ArrayList.java:1541) ~[na:na] at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80) ~[junit-platform-engine-1.6.2.jar:1.6.2] at java.base/java.util.ArrayList.forEach(ArrayList.java:1541) ~[na:na] at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220) ~[junit-platform-launcher-1.3.1.jar:1.3.1] at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188) ~[junit-platform-launcher-1.3.1.jar:1.3.1] at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202) ~[junit-platform-launcher-1.3.1.jar:1.3.1] at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181) ~[junit-platform-launcher-1.3.1.jar:1.3.1] at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128) ~[junit-platform-launcher-1.3.1.jar:1.3.1] at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150) ~[surefire-junit-platform-2.22.2.jar:2.22.2] at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124) ~[surefire-junit-platform-2.22.2.jar:2.22.2] at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384) ~[surefire-booter-2.22.2.jar:2.22.2] at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345) ~[surefire-booter-2.22.2.jar:2.22.2] at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126) ~[surefire-booter-2.22.2.jar:2.22.2] at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418) ~[surefire-booter-2.22.2.jar:2.22.2] Caused by: org.apache.camel.FailedToCreateRouteException: Failed to create route mllpServer at: >>> Bean[ref:textToJms method:processADT] <<< in route: Route(mllpServer)[From[netty:tcp://zedoc.tcp.host:{{zedo... because of class org.apache.camel.processor.WrapProcessor cannot be cast to class org.apache.camel.component.bean.BeanProcessor (org.apache.camel.processor.WrapProcessor and org.apache.camel.component.bean.BeanProcessor are in unnamed module of loader 'app') at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:393) ~[camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:117) ~[camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:368) ~[camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:342) ~[camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2612) ~[camel-base-3.4.3.jar:3.4.3] at org.apache.camel.support.service.BaseService.init(BaseService.java:83) ~[camel-api-3.4.3.jar:3.4.3] at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2435) ~[camel-base-3.4.3.jar:3.4.3] at org.apache.camel.support.service.BaseService.start(BaseService.java:111) ~[camel-api-3.4.3.jar:3.4.3] at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2452) ~[camel-base-3.4.3.jar:3.4.3] at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:121) ~[camel-spring-3.4.3.jar:3.4.3] at org.apache.camel.spring.CamelContextFactoryBean.start(CamelContextFactoryBean.java:381) ~[camel-spring-3.4.3.jar:3.4.3] at org.apache.camel.spring.CamelContextFactoryBean.onApplicationEvent(CamelContextFactoryBean.java:428) ~[camel-spring-3.4.3.jar:3.4.3] at org.apache.camel.spring.CamelContextFactoryBean.onApplicationEvent(CamelContextFactoryBean.java:96) ~[camel-spring-3.4.3.jar:3.4.3] at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:404) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:361) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:898) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:554) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE] at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE] at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE] at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE] at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120) ~[spring-boot-test-2.3.3.RELEASE.jar:2.3.3.RELEASE] at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] ... 65 common frames omitted Caused by: java.lang.ClassCastException: class org.apache.camel.processor.WrapProcessor cannot be cast to class org.apache.camel.component.bean.BeanProcessor (org.apache.camel.processor.WrapProcessor and org.apache.camel.component.bean.BeanProcessor are in unnamed module of loader 'app') at org.apache.camel.component.aws.xray.TraceAnnotatedTracingStrategy.wrapProcessorInInterceptors(TraceAnnotatedTracingStrategy.java:54) ~[camel-aws-xray-3.5.0.jar:3.5.0] at org.apache.camel.processor.channel.DefaultChannel.initChannel(DefaultChannel.java:243) ~[camel-base-3.4.3.jar:3.4.3] at org.apache.camel.reifier.ProcessorReifier.wrapChannel(ProcessorReifier.java:585) ~[camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.reifier.ProcessorReifier.wrapChannel(ProcessorReifier.java:544) ~[camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.reifier.ProcessorReifier.wrapProcessor(ProcessorReifier.java:540) ~[camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.reifier.ProcessorReifier.makeProcessor(ProcessorReifier.java:782) ~[camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.reifier.ProcessorReifier.addRoutes(ProcessorReifier.java:511) ~[camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:391) ~[camel-core-engine-3.4.3.jar:3.4.3] ... 91 common frames omitted[ERROR] Tests run: 1， Failures: 0， Errors: 1， Skipped: 0， Time elapsed: 5.388 s <<< FAILURE! - in com.zedoc.integration.hl7.ZedocIntegartionTest [ERROR] contextLoads Time elapsed: 0.001 s <<< ERROR! java.lang.IllegalStateException: Failed to load ApplicationContext Caused by: org.apache.camel.FailedToCreateRouteException: Failed to create route mllpServer at: >>> Bean[ref:textToJms method:processADT] <<< in route: Route(mllpServer)[From[netty:tcp://zedoc.tcp.host:{{zedo... because of class org.apache.camel.processor.WrapProcessor cannot be cast to class org.apache.camel.component.bean.BeanProcessor (org.apache.camel.processor.WrapProcessor and org.apache.camel.component.bean.BeanProcessor are in unnamed module of loader 'app') Caused by: java.lang.ClassCastException: class org.apache.camel.processor.WrapProcessor cannot be cast to class org.apache.camel.component.bean.BeanProcessor (org.apache.camel.processor.WrapProcessor and org.apache.camel.component.bean.BeanProcessor are in unnamed module of loader 'app'),Hide Permalink Andrea Cosentino added a comment - 11/Sep/20 05:09 The version of aws xray used in camel is 2.6.1， can you please try with that version as first step? Show Andrea Cosentino added a comment - 11/Sep/20 05:09 The version of aws xray used in camel is 2.6.1， can you please try with that version as first step? Hide Permalink Andrii Melashchenko added a comment - 11/Sep/20 05:29 <dependency> <groupId>com.amazonaws</groupId> <artifactId>aws-xray-recorder-sdk-core</artifactId> <version>2.6.1</version> </dependency> <dependency> <groupId>com.amazonaws</groupId> <artifactId>aws-xray-recorder-sdk-aws-sdk</artifactId> <version>2.6.1</version> </dependency> same error Show Andrii Melashchenko added a comment - 11/Sep/20 05:29 <dependency> <groupId>com.amazonaws</groupId> <artifactId>aws-xray-recorder-sdk-core</artifactId> <version>2.6.1</version> </dependency> <dependency> <groupId>com.amazonaws</groupId> <artifactId>aws-xray-recorder-sdk-aws-sdk</artifactId> <version>2.6.1</version> </dependency> same error Hide Permalink Andrea Cosentino added a comment - 11/Sep/20 05:38 There is this line that makes me think you have a mixing in your classpath at org.apache.camel.component.aws.xray.TraceAnnotatedTracingStrategy.wrapProcessorInInterceptors(TraceAnnotatedTracingStrategy.java:54) ~[camel-aws-xray-3.5.0.jar:3.5.0] it should be 3.4.3 Show Andrea Cosentino added a comment - 11/Sep/20 05:38 There is this line that makes me think you have a mixing in your classpath at org.apache.camel.component.aws.xray.TraceAnnotatedTracingStrategy.wrapProcessorInInterceptors(TraceAnnotatedTracingStrategy.java:54) ~ [camel-aws-xray-3.5.0.jar:3.5.0] it should be 3.4.3 Hide Permalink Andrii Melashchenko added a comment - 11/Sep/20 05:50 yep java.lang.IllegalStateException: Failed to load ApplicationContext at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~[spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:123) ~[spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190) ~[spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132) ~[spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244) ~[spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:98) ~[spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$5(ClassBasedTestDescriptor.java:341) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:346) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:341) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195) ~[na:na] at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177) ~[na:na] at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1655) ~[na:na] at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484) ~[na:na] at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474) ~[na:na] at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312) ~[na:na] at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na] at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na] at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658) ~[na:na] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:340) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:263) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:256) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at java.base/java.util.Optional.orElseGet(Optional.java:369) ~[na:na] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:255) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:29) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:108) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:107) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:71) ~[junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:107) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:107) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:75) ~[junit-platform-engine-1.6.2.jar:1.6.2] at java.base/java.util.ArrayList.forEach(ArrayList.java:1541) ~[na:na] at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80) ~[junit-platform-engine-1.6.2.jar:1.6.2] at java.base/java.util.ArrayList.forEach(ArrayList.java:1541) ~[na:na] at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51) ~[junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220) ~[junit-platform-launcher-1.3.1.jar:1.3.1] at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188) ~[junit-platform-launcher-1.3.1.jar:1.3.1] at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202) ~[junit-platform-launcher-1.3.1.jar:1.3.1] at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181) ~[junit-platform-launcher-1.3.1.jar:1.3.1] at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128) ~[junit-platform-launcher-1.3.1.jar:1.3.1] at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150) ~[surefire-junit-platform-2.22.2.jar:2.22.2] at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124) ~[surefire-junit-platform-2.22.2.jar:2.22.2] at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384) ~[surefire-booter-2.22.2.jar:2.22.2] at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345) ~[surefire-booter-2.22.2.jar:2.22.2] at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126) ~[surefire-booter-2.22.2.jar:2.22.2] at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418) ~[surefire-booter-2.22.2.jar:2.22.2] Caused by: org.apache.camel.FailedToCreateRouteException: Failed to create route mllpServer at: >>> Bean[ref:textToJms method:processADT] <<< in route: Route(mllpServer)[From[netty:tcp://zedoc.tcp.host:zedo... because of class org.apache.camel.processor.WrapProcessor cannot be cast to class org.apache.camel.component.bean.BeanProcessor (org.apache.camel.processor.WrapProcessor and org.apache.camel.component.bean.BeanProcessor are in unnamed module of loader 'app') at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:393) ~[camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:117) ~[camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:368) ~[camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:342) ~[camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2612) ~[camel-base-3.4.3.jar:3.4.3] at org.apache.camel.support.service.BaseService.init(BaseService.java:83) ~[camel-api-3.4.3.jar:3.4.3] at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2435) ~[camel-base-3.4.3.jar:3.4.3] at org.apache.camel.support.service.BaseService.start(BaseService.java:111) ~[camel-api-3.4.3.jar:3.4.3] at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2452) ~[camel-base-3.4.3.jar:3.4.3] at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:121) ~[camel-spring-3.4.3.jar:3.4.3] at org.apache.camel.spring.CamelContextFactoryBean.start(CamelContextFactoryBean.java:381) ~[camel-spring-3.4.3.jar:3.4.3] at org.apache.camel.spring.CamelContextFactoryBean.onApplicationEvent(CamelContextFactoryBean.java:428) ~[camel-spring-3.4.3.jar:3.4.3] at org.apache.camel.spring.CamelContextFactoryBean.onApplicationEvent(CamelContextFactoryBean.java:96) ~[camel-spring-3.4.3.jar:3.4.3] at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:404) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:361) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:898) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:554) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE] at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE] at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE] at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) ~[spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE] at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120) ~[spring-boot-test-2.3.3.RELEASE.jar:2.3.3.RELEASE] at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~[spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~[spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] ... 65 common frames omitted Caused by: java.lang.ClassCastException: class org.apache.camel.processor.WrapProcessor cannot be cast to class org.apache.camel.component.bean.BeanProcessor (org.apache.camel.processor.WrapProcessor and org.apache.camel.component.bean.BeanProcessor are in unnamed module of loader 'app') at org.apache.camel.component.aws.xray.TraceAnnotatedTracingStrategy.wrapProcessorInInterceptors(TraceAnnotatedTracingStrategy.java:53) ~[camel-aws-xray-3.4.3.jar:3.4.3] at org.apache.camel.processor.channel.DefaultChannel.initChannel(DefaultChannel.java:243) ~[camel-base-3.4.3.jar:3.4.3] at org.apache.camel.reifier.ProcessorReifier.wrapChannel(ProcessorReifier.java:585) ~[camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.reifier.ProcessorReifier.wrapChannel(ProcessorReifier.java:544) ~[camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.reifier.ProcessorReifier.wrapProcessor(ProcessorReifier.java:540) ~[camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.reifier.ProcessorReifier.makeProcessor(ProcessorReifier.java:782) ~[camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.reifier.ProcessorReifier.addRoutes(ProcessorReifier.java:511) ~[camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:391) ~[camel-core-engine-3.4.3.jar:3.4.3] ... 91 common frames omitted[ERROR] Tests run: 1， Failures: 0， Errors: 1， Skipped: 0， Time elapsed: 4.363 s <<< FAILURE! - in com.zedoc.integration.hl7.ZedocIntegartionTest [ERROR] contextLoads Time elapsed: 0.001 s <<< ERROR! java.lang.IllegalStateException: Failed to load ApplicationContext Caused by: org.apache.camel.FailedToCreateRouteException: Failed to create route mllpServer at: >>> Bean[ref:textToJms method:processADT] <<< in route: Route(mllpServer)[From[netty:tcp://{{zedoc.tcp.host:{{zedo... because of class org.apache.camel.processor.WrapProcessor cannot be cast to class org.apache.camel.component.bean.BeanProcessor (org.apache.camel.processor.WrapProcessor and org.apache.camel.component.bean.BeanProcessor are in unnamed module of loader 'app') Caused by: java.lang.ClassCastException: class org.apache.camel.processor.WrapProcessor cannot be cast to class org.apache.camel.component.bean.BeanProcessor (org.apache.camel.processor.WrapProcessor and org.apache.camel.component.bean.BeanProcessor are in unnamed module of loader 'app') Show Andrii Melashchenko added a comment - 11/Sep/20 05:50 yep java.lang.IllegalStateException: Failed to load ApplicationContext at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132) ~ [spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:123) ~ [spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190) ~ [spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132) ~ [spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:244) ~ [spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:98) ~ [spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$5(ClassBasedTestDescriptor.java:341) ~ [junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:346) ~ [junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassBasedTestDescriptor.java:341) ~ [junit-jupiter-engine-5.6.2.jar:5.6.2] at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195) ~ [na:na] at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177) ~ [na:na] at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1655) ~ [na:na] at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484) ~ [na:na] at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474) ~ [na:na] at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312) ~ [na:na] at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~ [na:na] at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~ [na:na] at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658) ~ [na:na] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:340) ~ [junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:263) ~ [junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$2(ClassBasedTestDescriptor.java:256) ~ [junit-jupiter-engine-5.6.2.jar:5.6.2] at java.base/java.util.Optional.orElseGet(Optional.java:369) ~ [na:na] at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$3(ClassBasedTestDescriptor.java:255) ~ [junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:29) ~ [junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:108) ~ [junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:107) ~ [junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:71) ~ [junit-jupiter-engine-5.6.2.jar:5.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$1(NodeTestTask.java:107) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:107) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:75) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at java.base/java.util.ArrayList.forEach(ArrayList.java:1541) ~ [na:na] at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at java.base/java.util.ArrayList.forEach(ArrayList.java:1541) ~ [na:na] at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:125) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:135) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:123) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:122) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:80) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51) ~ [junit-platform-engine-1.6.2.jar:1.6.2] at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220) ~ [junit-platform-launcher-1.3.1.jar:1.3.1] at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188) ~ [junit-platform-launcher-1.3.1.jar:1.3.1] at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202) ~ [junit-platform-launcher-1.3.1.jar:1.3.1] at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181) ~ [junit-platform-launcher-1.3.1.jar:1.3.1] at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128) ~ [junit-platform-launcher-1.3.1.jar:1.3.1] at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:150) ~ [surefire-junit-platform-2.22.2.jar:2.22.2] at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:124) ~ [surefire-junit-platform-2.22.2.jar:2.22.2] at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384) ~ [surefire-booter-2.22.2.jar:2.22.2] at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345) ~ [surefire-booter-2.22.2.jar:2.22.2] at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126) ~ [surefire-booter-2.22.2.jar:2.22.2] at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418) ~ [surefire-booter-2.22.2.jar:2.22.2] Caused by: org.apache.camel.FailedToCreateRouteException: Failed to create route mllpServer at: >>> Bean [ref:textToJms method:processADT] <<< in route: Route(mllpServer)[From[netty:tcp:// zedoc.tcp.host : zedo... because of class org.apache.camel.processor.WrapProcessor cannot be cast to class org.apache.camel.component.bean.BeanProcessor (org.apache.camel.processor.WrapProcessor and org.apache.camel.component.bean.BeanProcessor are in unnamed module of loader 'app') at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:393) ~ [camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:117) ~ [camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:368) ~ [camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:342) ~ [camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2612) ~ [camel-base-3.4.3.jar:3.4.3] at org.apache.camel.support.service.BaseService.init(BaseService.java:83) ~ [camel-api-3.4.3.jar:3.4.3] at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2435) ~ [camel-base-3.4.3.jar:3.4.3] at org.apache.camel.support.service.BaseService.start(BaseService.java:111) ~ [camel-api-3.4.3.jar:3.4.3] at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2452) ~ [camel-base-3.4.3.jar:3.4.3] at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:121) ~ [camel-spring-3.4.3.jar:3.4.3] at org.apache.camel.spring.CamelContextFactoryBean.start(CamelContextFactoryBean.java:381) ~ [camel-spring-3.4.3.jar:3.4.3] at org.apache.camel.spring.CamelContextFactoryBean.onApplicationEvent(CamelContextFactoryBean.java:428) ~ [camel-spring-3.4.3.jar:3.4.3] at org.apache.camel.spring.CamelContextFactoryBean.onApplicationEvent(CamelContextFactoryBean.java:96) ~ [camel-spring-3.4.3.jar:3.4.3] at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172) ~ [spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165) ~ [spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139) ~ [spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:404) ~ [spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:361) ~ [spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:898) ~ [spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:554) ~ [spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758) ~ [spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE] at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750) ~ [spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE] at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~ [spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE] at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) ~ [spring-boot-2.3.3.RELEASE.jar:2.3.3.RELEASE] at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:120) ~ [spring-boot-test-2.3.3.RELEASE.jar:2.3.3.RELEASE] at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) ~ [spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124) ~ [spring-test-5.2.8.RELEASE.jar:5.2.8.RELEASE] ... 65 common frames omitted Caused by: java.lang.ClassCastException: class org.apache.camel.processor.WrapProcessor cannot be cast to class org.apache.camel.component.bean.BeanProcessor (org.apache.camel.processor.WrapProcessor and org.apache.camel.component.bean.BeanProcessor are in unnamed module of loader 'app') at org.apache.camel.component.aws.xray.TraceAnnotatedTracingStrategy.wrapProcessorInInterceptors(TraceAnnotatedTracingStrategy.java:53) ~ [camel-aws-xray-3.4.3.jar:3.4.3] at org.apache.camel.processor.channel.DefaultChannel.initChannel(DefaultChannel.java:243) ~ [camel-base-3.4.3.jar:3.4.3] at org.apache.camel.reifier.ProcessorReifier.wrapChannel(ProcessorReifier.java:585) ~ [camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.reifier.ProcessorReifier.wrapChannel(ProcessorReifier.java:544) ~ [camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.reifier.ProcessorReifier.wrapProcessor(ProcessorReifier.java:540) ~ [camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.reifier.ProcessorReifier.makeProcessor(ProcessorReifier.java:782) ~ [camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.reifier.ProcessorReifier.addRoutes(ProcessorReifier.java:511) ~ [camel-core-engine-3.4.3.jar:3.4.3] at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:391) ~ [camel-core-engine-3.4.3.jar:3.4.3] ... 91 common frames omitted [ERROR] Tests run: 1， Failures: 0， Errors: 1， Skipped: 0， Time elapsed: 4.363 s <<< FAILURE! - in com.zedoc.integration.hl7.ZedocIntegartionTest [ERROR] contextLoads Time elapsed: 0.001 s <<< ERROR! java.lang.IllegalStateException: Failed to load ApplicationContext Caused by: org.apache.camel.FailedToCreateRouteException: Failed to create route mllpServer at: >>> Bean [ref:textToJms method:processADT] <<< in route: Route(mllpServer)[From[netty:tcp://{{zedoc.tcp.host :{{zedo... because of class org.apache.camel.processor.WrapProcessor cannot be cast to class org.apache.camel.component.bean.BeanProcessor (org.apache.camel.processor.WrapProcessor and org.apache.camel.component.bean.BeanProcessor are in unnamed module of loader 'app') Caused by: java.lang.ClassCastException: class org.apache.camel.processor.WrapProcessor cannot be cast to class org.apache.camel.component.bean.BeanProcessor (org.apache.camel.processor.WrapProcessor and org.apache.camel.component.bean.BeanProcessor are in unnamed module of loader 'app') Hide Permalink Claus Ibsen added a comment - 28/Sep/20 11:43 - edited How do you run this， as it smells about some classloading problems Show Claus Ibsen added a comment - 28/Sep/20 11:43 - edited How do you run this， as it smells about some classloading problems Hide Permalink Claus Ibsen added a comment - 13/Oct/20 07:32 Can you put a reproducer and attach as either .zip file to this ticket， or put the reproducer on github or someplace for us to use to reproduce this issue. Show Claus Ibsen added a comment - 13/Oct/20 07:32 Can you put a reproducer and attach as either .zip file to this ticket， or put the reproducer on github or someplace for us to use to reproduce this issue.
CAMEL-15521,Andrea Cosentino,2020-09-11T04:44:27+0000,1599785067， where 1599785067 is the epoch,Hi，I am using Apache Camel 3.4.3 for creating a route involving InfluxDB.While trying to create the connection bean with the following code:InfluxDB influxDB = InfluxDBFactory.connect("http://localhost:8086");influxDB.query(new Query("CREATE DATABASE " + "drivers"， "drivers"));CamelContext camelContext = new DefaultCamelContext();camelContext.getRegistry().bind("connectionBean"， influxDB);I get the following exception on the first line while trying to connect to the InfluxDB server:WARNING: An illegal reflective access operation has occurredWARNING: An illegal reflective access operation has occurredWARNING: Illegal reflective access by retrofit2.Platform (file:/home/ppatiern/.m2/repository/com/squareup/retrofit2/retrofit/2.8.1/retrofit-2.8.1.jar) to constructor java.lang.invoke.MethodHandles$Lookup(java.lang.Class，int)WARNING: Please consider reporting this to the maintainers of retrofit2.PlatformWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operationsWARNING: All illegal access operations will be denied in a future releaseException in thread "main" java.lang.NoClassDefFoundError: kotlin/jvm/internal/Intrinsics at okhttp3.logging.HttpLoggingInterceptor.<init>(HttpLoggingInterceptor.kt) at okhttp3.logging.HttpLoggingInterceptor.<init>(HttpLoggingInterceptor.kt:40) at okhttp3.logging.HttpLoggingInterceptor.<init>(HttpLoggingInterceptor.kt) at org.influxdb.impl.InfluxDBImpl.<init>(InfluxDBImpl.java:146) at org.influxdb.impl.InfluxDBImpl.<init>(InfluxDBImpl.java:120) at org.influxdb.impl.InfluxDBImpl.<init>(InfluxDBImpl.java:187) at org.influxdb.InfluxDBFactory.connect(InfluxDBFactory.java:30) at io.ppatierno.formula1.F1KafkaInfluxDBApp.main(F1KafkaInfluxDBApp.java:17)Caused by: java.lang.ClassNotFoundException: kotlin.jvm.internal.Intrinsics at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581) at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178) at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522) ... 8 more,Hide Permalink Claus Ibsen added a comment - 11/Sep/20 04:44 I think that is a WARNING from Java 11 itself. Do you see something more， that is an exception causing the app/camel to fail to start/run ? And how do you run this Show Claus Ibsen added a comment - 11/Sep/20 04:44 I think that is a WARNING from Java 11 itself. Do you see something more， that is an exception causing the app/camel to fail to start/run ? And how do you run this Hide Permalink Andrea Cosentino added a comment - 11/Sep/20 05:41 The warning is related to this https://github.com/square/retrofit/issues/3341 But the error is related to logging-interceptor library， we may need to downgrade to 3.x and avoid using 4.x Show Andrea Cosentino added a comment - 11/Sep/20 05:41 The warning is related to this https://github.com/square/retrofit/issues/3341 But the error is related to logging-interceptor library， we may need to downgrade to 3.x and avoid using 4.x
CAMEL-15520,Otavio Rodolfo Piske,2020-09-10T11:31:17+0000,1599723077， where 1599723077 is the epoch,Creating a task to map， discuss and clean the warnings about usage of deprecated methods， classes and types on the code.,Hide Permalink Otavio Rodolfo Piske added a comment - 10/Sep/20 11:31 Changing from getOut to getMessage or getIn cause change of behavior: camel-reactor: ReactorStreamsServiceTest.java:[220，29] camel-rxjava: RxJavaStreamsServiceTest.java:[195，13] Show Otavio Rodolfo Piske added a comment - 10/Sep/20 11:31 Changing from getOut to getMessage or getIn cause change of behavior: camel-reactor: ReactorStreamsServiceTest.java: [220，29] camel-rxjava: RxJavaStreamsServiceTest.java: [195，13]
CAMEL-15519,Andrea Cosentino,2020-09-10T10:58:24+0000,1599721104， where 1599721104 is the epoch,Hello，I am testing kubernetes-pods consumer and in the first test it works fine， then I run a kubernetes job (this create internally a Pod) and I get a "No type converter available" exception in the console. The pod consumer source code is here: https://github.com/Emmerson-Miranda/camel/blob/master/camel3-cdi/cdi-k8s-pocs/src/main/java/edu/emmerson/camel/k8s/jobs/camel_k8s_jobs/KubernetesRouteConsumerPods.java The pod creation source code is here https://github.com/Emmerson-Miranda/camel/blob/master/camel3-cdi/cdi-k8s-pocs/src/main/java/edu/emmerson/camel/k8s/jobs/camel_k8s_jobs/KubernetesCreateJob.java Bellow the stacktrace [ https://192.168.64.3:8443/...] KubernetesRouteConsumerPods INFO KEEPING pod name: job-1599734811571-rls7l[ XNIO-1 task-1] UndertowConsumer WARN Caused by: [org.apache.camel.NoTypeConversionAvailableException - No type converter available to convert from type: io.fabric8.kubernetes.api.model.batch.Job to the required type: java.nio.ByteBuffer with value Job(apiVersion=batch/v1， kind=Job， metadata=ObjectMeta(annotations=null， clusterName=null， creationTimestamp=2020-09-10T10:46:51Z， deletionGracePeriodSeconds=null， deletionTimestamp=null， finalizers=[]， generateName=null， generation=null， labels={app=jobFromCamelApp， jobLabelKey1=value1， jobLabelKey2=value2}， managedFields=[ManagedFieldsEntry(apiVersion=batch/v1， fieldsType=FieldsV1， fieldsV1=FieldsV1(additionalProperties={f:metadata={f:labels={.={}， f:app={}， f:jobLabelKey1={}， f:jobLabelKey2={}}}， f:spec={f:activeDeadlineSeconds={}， f:backoffLimit={}， f:completions={}， f:parallelism={}， f:template={f:metadata={f:annotations={.={}， f:jobMetadataAnnotation1={}}， f:labels={.={}， f:app={}， f:orderId={}， f:podLabelKey1={}， f:podLabelKey2={}}}， f:spec={f:containers={k:{"name":"pi"}={.={}， f:command={}， f:image={}， f:imagePullPolicy={}， f:name={}， f:resources={}， f:terminationMessagePath={}， f:terminationMessagePolicy={}}}， f:dnsPolicy={}， f:restartPolicy={}， f:schedulerName={}， f:securityContext={}， f:terminationGracePeriodSeconds={}}}， f:ttlSecondsAfterFinished={}}})， manager=okhttp， operation=Update， time=2020-09-10T10:46:51Z， additionalProperties={})]， name=job-1599734811571， namespace=default， ownerReferences=[]， resourceVersion=1688691， selfLink=/apis/batch/v1/namespaces/default/jobs/job-1599734811571， uid=df5c8ed7-1436-4c57-854a-5703fa3baed8， additionalProperties={})， spec=JobSpec(activeDeadlineSeconds=7200， backoffLimit=6， completions=1， manualSelector=null， parallelism=1， selector=LabelSelector(matchExpressions=[]， matchLabels={controller-uid=df5c8ed7-1436-4c57-854a-5703fa3baed8}， additionalProperties={})， template=PodTemplateSpec(metadata=ObjectMeta(annotations={jobMetadataAnnotation1=random value}， clusterName=null， creationTimestamp=null， deletionGracePeriodSeconds=null， deletionTimestamp=null， finalizers=[]， generateName=null， generation=null， labels={app=podFromCamelApp， controller-uid=df5c8ed7-1436-4c57-854a-5703fa3baed8， job-name=job-1599734811571， orderId=54702d2c-554b-4fa8-91ef-9e4e7abfe055， podLabelKey1=value1， podLabelKey2=value2}， managedFields=[]， name=null， namespace=null， ownerReferences=[]， resourceVersion=null， selfLink=null， uid=null， additionalProperties={})， spec=PodSpec(activeDeadlineSeconds=null， affinity=null， automountServiceAccountToken=null， containers=[Container(args=[]， command=[echo， Job created from Apache Camel code at Thu Sep 10 11:46:51 BST 2020]， env=[]， envFrom=[]， image=perl， imagePullPolicy=Always， lifecycle=null， livenessProbe=null， name=pi， ports=[]， readinessProbe=null， resources=ResourceRequirements(limits=null， requests=null， additionalProperties={})， securityContext=null， startupProbe=null， stdin=null， stdinOnce=null， terminationMessagePath=/dev/termination-log， terminationMessagePolicy=File， tty=null， volumeDevices=[]， volumeMounts=[]， workingDir=null， additionalProperties={})]， dnsConfig=null， dnsPolicy=ClusterFirst， enableServiceLinks=null， ephemeralContainers=[]， hostAliases=[]， hostIPC=null， hostNetwork=null， hostPID=null， hostname=null， imagePullSecrets=[]， initContainers=[]， nodeName=null， nodeSelector=null， overhead=null， preemptionPolicy=null， priority=null， priorityClassName=null， readinessGates=[]， restartPolicy=OnFailure， runtimeClassName=null， schedulerName=default-scheduler， securityContext=PodSecurityContext(fsGroup=null， fsGroupChangePolicy=null， runAsGroup=null， runAsNonRoot=null， runAsUser=null， seLinuxOptions=null， supplementalGroups=[]， sysctls=[]， windowsOptions=null， additionalProperties={})， serviceAccount=null， serviceAccountName=null， shareProcessNamespace=null， subdomain=null， terminationGracePeriodSeconds=30， tolerations=[]， topologySpreadConstraints=[]， volumes=[]， additionalProperties={})， additionalProperties={})， ttlSecondsAfterFinished=null， additionalProperties={})， status=JobStatus(active=null， completionTime=null， conditions=[]， failed=null， startTime=null， succeeded=null， additionalProperties={})， additionalProperties={})]org.apache.camel.NoTypeConversionAvailableException: No type converter available to convert from type: io.fabric8.kubernetes.api.model.batch.Job to the required type: java.nio.ByteBuffer with value Job(apiVersion=batch/v1， kind=Job， metadata=ObjectMeta(annotations=null， clusterName=null， creationTimestamp=2020-09-10T10:46:51Z， deletionGracePeriodSeconds=null， deletionTimestamp=null， finalizers=[]， generateName=null， generation=null， labels={app=jobFromCamelApp， jobLabelKey1=value1， jobLabelKey2=value2}， managedFields=[ManagedFieldsEntry(apiVersion=batch/v1， fieldsType=FieldsV1， fieldsV1=FieldsV1(additionalProperties={f:metadata={f:labels={.={}， f:app={}， f:jobLabelKey1={}， f:jobLabelKey2={}}}， f:spec={f:activeDeadlineSeconds={}， f:backoffLimit={}， f:completions={}， f:parallelism={}， f:template={f:metadata={f:annotations={.={}， f:jobMetadataAnnotation1={}}， f:labels={.={}， f:app={}， f:orderId={}， f:podLabelKey1={}， f:podLabelKey2={}}}， f:spec={f:containers={k:{"name":"pi"}={.={}， f:command={}， f:image={}， f:imagePullPolicy={}， f:name={}， f:resources={}， f:terminationMessagePath={}， f:terminationMessagePolicy={}}}， f:dnsPolicy={}， f:restartPolicy={}， f:schedulerName={}， f:securityContext={}， f:terminationGracePeriodSeconds={}}}， f:ttlSecondsAfterFinished={}}})， manager=okhttp， operation=Update， time=2020-09-10T10:46:51Z， additionalProperties={})]， name=job-1599734811571， namespace=default， ownerReferences=[]， resourceVersion=1688691， selfLink=/apis/batch/v1/namespaces/default/jobs/job-1599734811571， uid=df5c8ed7-1436-4c57-854a-5703fa3baed8， additionalProperties={})， spec=JobSpec(activeDeadlineSeconds=7200， backoffLimit=6， completions=1， manualSelector=null， parallelism=1， selector=LabelSelector(matchExpressions=[]， matchLabels={controller-uid=df5c8ed7-1436-4c57-854a-5703fa3baed8}， additionalProperties={})， template=PodTemplateSpec(metadata=ObjectMeta(annotations={jobMetadataAnnotation1=random value}， clusterName=null， creationTimestamp=null， deletionGracePeriodSeconds=null， deletionTimestamp=null， finalizers=[]， generateName=null， generation=null， labels={app=podFromCamelApp， controller-uid=df5c8ed7-1436-4c57-854a-5703fa3baed8， job-name=job-1599734811571， orderId=54702d2c-554b-4fa8-91ef-9e4e7abfe055， podLabelKey1=value1， podLabelKey2=value2}， managedFields=[]， name=null， namespace=null， ownerReferences=[]， resourceVersion=null， selfLink=null， uid=null， additionalProperties={})， spec=PodSpec(activeDeadlineSeconds=null， affinity=null， automountServiceAccountToken=null， containers=[Container(args=[]， command=[echo， Job created from Apache Camel code at Thu Sep 10 11:46:51 BST 2020]， env=[]， envFrom=[]， image=perl， imagePullPolicy=Always， lifecycle=null， livenessProbe=null， name=pi， ports=[]， readinessProbe=null， resources=ResourceRequirements(limits=null， requests=null， additionalProperties={})， securityContext=null， startupProbe=null， stdin=null， stdinOnce=null， terminationMessagePath=/dev/termination-log， terminationMessagePolicy=File， tty=null， volumeDevices=[]， volumeMounts=[]， workingDir=null， additionalProperties={})]， dnsConfig=null， dnsPolicy=ClusterFirst， enableServiceLinks=null， ephemeralContainers=[]， hostAliases=[]， hostIPC=null， hostNetwork=null， hostPID=null， hostname=null， imagePullSecrets=[]， initContainers=[]， nodeName=null， nodeSelector=null， overhead=null， preemptionPolicy=null， priority=null， priorityClassName=null， readinessGates=[]， restartPolicy=OnFailure， runtimeClassName=null， schedulerName=default-scheduler， securityContext=PodSecurityContext(fsGroup=null， fsGroupChangePolicy=null， runAsGroup=null， runAsNonRoot=null， runAsUser=null， seLinuxOptions=null， supplementalGroups=[]， sysctls=[]， windowsOptions=null， additionalProperties={})， serviceAccount=null， serviceAccountName=null， shareProcessNamespace=null， subdomain=null， terminationGracePeriodSeconds=30， tolerations=[]， topologySpreadConstraints=[]， volumes=[]， additionalProperties={})， additionalProperties={})， ttlSecondsAfterFinished=null， additionalProperties={})， status=JobStatus(active=null， completionTime=null， conditions=[]， failed=null， startTime=null， succeeded=null， additionalProperties={})， additionalProperties={}) at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:216) ~[camel-base-3.4.2.jar:3.4.2] at org.apache.camel.impl.converter.CoreTypeConverterRegistry.mandatoryConvertTo(CoreTypeConverterRegistry.java:168) ~[camel-base-3.4.2.jar:3.4.2] at org.apache.camel.component.undertow.UndertowConsumer.sendResponse(UndertowConsumer.java:259) ~[camel-undertow-3.4.2.jar:3.4.2] at org.apache.camel.component.undertow.UndertowConsumer.handleRequest(UndertowConsumer.java:231) [camel-undertow-3.4.2.jar:3.4.2] at io.undertow.server.Connectors.executeRootHandler(Connectors.java:370) [undertow-core-2.1.2.Final.jar:2.1.2.Final] at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:830) [undertow-core-2.1.2.Final.jar:2.1.2.Final] at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35) [jboss-threads-3.1.0.Final.jar:3.1.0.Final] at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:2019) [jboss-threads-3.1.0.Final.jar:3.1.0.Final] at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1558) [jboss-threads-3.1.0.Final.jar:3.1.0.Final] at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1423) [jboss-threads-3.1.0.Final.jar:3.1.0.Final] at java.lang.Thread.run(Thread.java:748) [?:1.8.0_252][ https://192.168.64.3:8443/...] KubernetesRouteConsumerPods INFO Got event from Pod: job-1599734811571-rls7l， action: MODIFIED Phase: Pending,Hide Permalink Emmerson added a comment - 10/Sep/20 10:58 Is there a way to avoid this without wait for a new camel version ? Thanks Show Emmerson added a comment - 10/Sep/20 10:58 Is there a way to avoid this without wait for a new camel version ? Thanks Hide Permalink Andrea Cosentino added a comment - 10/Sep/20 11:59 Need to investigate the problem Show Andrea Cosentino added a comment - 10/Sep/20 11:59 Need to investigate the problem Hide Permalink Emmerson added a comment - 15/Sep/20 00:45 I fix that warning registering a custom converter. https://github.com/Emmerson-Miranda/camel/blob/master/camel3-cdi/cdi-k8s-pocs/src/main/java/edu/emmerson/camel/k8s/jobs/camel_k8s_jobs/converters/JobToByteBufferConverter.java Show Emmerson added a comment - 15/Sep/20 00:45 I fix that warning registering a custom converter. https://github.com/Emmerson-Miranda/camel/blob/master/camel3-cdi/cdi-k8s-pocs/src/main/java/edu/emmerson/camel/k8s/jobs/camel_k8s_jobs/converters/JobToByteBufferConverter.java
CAMEL-15518,Unassigned,2020-09-09T17:01:40+0000,1599656500， where 1599656500 is the epoch,The name of the configurer for the the ExtendedCamelContext is wrong as it uses the FQCN of the implementation class (org.apache.camel.impl.ExtendedCamelContext) instead of the interface one (org.apache.camel.ExtendedCamelContext).Maybe the @Configurer annotation should allow to set the name of the factory file.,Hide Permalink Claus Ibsen added a comment - 09/Sep/20 17:01 - edited So in the pom.xml of the camel-core-engine you can do a mapping. However to avoid OSGi split package problems then the generated configurer is moved into impl package org.apache.camel.ExtendedCamelContext=org.apache.camel.impl.ExtendedCamelContext However the service manifest file has in the wrong name. Show Claus Ibsen added a comment - 09/Sep/20 17:01 - edited So in the pom.xml of the camel-core-engine you can do a mapping. However to avoid OSGi split package problems then the generated configurer is moved into impl package org.apache.camel.ExtendedCamelContext=org.apache.camel.impl.ExtendedCamelContext However the service manifest file has in the wrong name. Hide Permalink Luca Burgazzoli added a comment - 09/Sep/20 17:43 Yeah， wonder if we can add a parameter to the @Configurer to set the name of the configurer @Configurer("org.apache.camel.ExtendedCamelContext") org.apache.camel.impl.ExtendedCamelContext { } if not provided， the name of the class is used Show Luca Burgazzoli added a comment - 09/Sep/20 17:43 Yeah， wonder if we can add a parameter to the @Configurer to set the name of the configurer @Configurer( "org.apache.camel.ExtendedCamelContext" ) org.apache.camel.impl.ExtendedCamelContext { } if not provided， the name of the class is used Hide Permalink Claus Ibsen added a comment - 09/Sep/20 18:09 Yeah well its even more special as that is not an annotation currently as it was a chicken-egg situation as you cant have camel-api generate configurer (you need camel-api built first). So they are generated via pom.xml instructions in camel-core-engine. Where all the configurers are in core camel. There is a fix in the maven plugin that generate the source as it already has a fqn=new fqn mapping where you can just say <class>org.apache.camel.ExtendedCamelContext=org.apache.camel.impl.ExtendedCamelContext<class> I fixed that and are rebuilding and testing before submitting a PR Show Claus Ibsen added a comment - 09/Sep/20 18:09 Yeah well its even more special as that is not an annotation currently as it was a chicken-egg situation as you cant have camel-api generate configurer (you need camel-api built first). So they are generated via pom.xml instructions in camel-core-engine. Where all the configurers are in core camel. There is a fix in the maven plugin that generate the source as it already has a fqn=new fqn mapping where you can just say <class>org.apache.camel.ExtendedCamelContext=org.apache.camel.impl.ExtendedCamelContext<class> I fixed that and are rebuilding and testing before submitting a PR Hide Permalink Claus Ibsen added a comment - 09/Sep/20 18:34 There is a PR here https://github.com/apache/camel/pull/4181 Unfortunately there are some regen files with it so there is a little bit of noise Show Claus Ibsen added a comment - 09/Sep/20 18:34 There is a PR here https://github.com/apache/camel/pull/4181 Unfortunately there are some regen files with it so there is a little bit of noise
CAMEL-15517,Omar Al-Safi,2020-09-09T08:37:23+0000,1599626243， where 1599626243 is the epoch,Currently， we only support producer on a single event. However， it will make sense to also add producing on events list as well,There are no comments yet on this issue.
CAMEL-15516,Alex Dettinger,2020-09-08T14:11:44+0000,1599559904， where 1599559904 is the epoch,,There are no comments yet on this issue.
CAMEL-15515,Claus Ibsen,2020-09-08T12:38:13+0000,1599554293， where 1599554293 is the epoch,We should deprecate basicPropertyBinding as it was a fail safe for 3.0 in the beginning to use old way of reflection based configuration.But it has evolved and works fine now， so lets deprecate it， and remove it after the next LTS release.,There are no comments yet on this issue.
CAMEL-15514,Unassigned,2020-09-08T11:45:49+0000,1599551149， where 1599551149 is the epoch,Upon using camel-rest-openapi component in a route， I have discovered that if an operationId is not defined in OpenApi specification the operation can not be called.Since operationId is an optional parameter as defined by OpenApi 3 standard， I think that improving the component to be able to auto generate missing operationIds from operation path and http method would benefit users of this component.As an example， you can find one published OpenApi specification that does not define operationIds: https://app.swaggerhub.com/apis/liferayinc/commerce-admin-catalog/v1.0#/info,Hide Permalink Aljaž Plohl added a comment - 08/Sep/20 11:45 I have created this issue to be able to submit a Github PR， as I have already implemented this improvement. Show Aljaž Plohl added a comment - 08/Sep/20 11:45 I have created this issue to be able to submit a Github PR， as I have already implemented this improvement. Hide Permalink Claus Ibsen added a comment - 09/Sep/20 12:18 Thanks for reporting and the PR Show Claus Ibsen added a comment - 09/Sep/20 12:18 Thanks for reporting and the PR
CAMEL-15513,Unassigned,2020-09-08T09:02:26+0000,1599541346， where 1599541346 is the epoch,in camel-any23 features the rdf4j-model and rdf4j-rio-api jars does not have symbolic name and version<bundle dependency='true'>wrap:mvn:org.eclipse.rdf4j/rdf4j-model/${rdf4j-model-version}</bundle> <bundle dependency='true'>wrap:mvn:org.eclipse.rdf4j/rdf4j-rio-api/${rdf4j-rio-version}</bundle>I propose to add them <bundle dependency='true'>wrap:mvn:org.eclipse.rdf4j/rdf4j-model/${rdf4j-model-version}$Bundle-SymbolicName=rdf4j-model&Bundle-Version=${rdf4j-model-version}</bundle> <bundle dependency='true'>wrap:mvn:org.eclipse.rdf4j/rdf4j-rio-api/${rdf4j-rio-version}$Bundle-SymbolicName=rdf4j-rio-api&Bundle-Version=${rdf4j-rio-version}</bundle>,Hide Permalink Andrea Cosentino added a comment - 08/Sep/20 09:02 You're welcome to open a PR Show Andrea Cosentino added a comment - 08/Sep/20 09:02 You're welcome to open a PR Hide Permalink Claus Ibsen added a comment - 08/Sep/20 10:17 Isnt this more of a karaf wrap "problem" that it can compute this information and show that as symbolic information. We use wrap in other places and dont do all that extra stuff. I suggest to take this up with Apache Karaf team to improve Karaf. Show Claus Ibsen added a comment - 08/Sep/20 10:17 Isnt this more of a karaf wrap "problem" that it can compute this information and show that as symbolic information. We use wrap in other places and dont do all that extra stuff. I suggest to take this up with Apache Karaf team to improve Karaf. Hide Permalink Terrien Jean-Yves added a comment - 15/Sep/20 07:57 Thank https://issues.apache.org/jira/browse/KARAF-6853?filter=-2 Show Terrien Jean-Yves added a comment - 15/Sep/20 07:57 Thank https://issues.apache.org/jira/browse/KARAF-6853?filter=-2 Hide Permalink Claus Ibsen added a comment - 15/Sep/20 08:07 Thanks yeah lets make Karaf better in this regard. Show Claus Ibsen added a comment - 15/Sep/20 08:07 Thanks yeah lets make Karaf better in this regard.
CAMEL-15512,Luca Burgazzoli,2020-09-08T10:24:40+0000,1599546280， where 1599546280 is the epoch,The RestConfigurationDefinition defines swagger as default API component to be used but since we have both swagger and openapi， we should remove the default and let Camel auto discover the component base on what it is on the classpath.,Hide Permalink Claus Ibsen added a comment - 08/Sep/20 10:24 When regen spring boot then it will pickup this change Show Claus Ibsen added a comment - 08/Sep/20 10:24 When regen spring boot then it will pickup this change
CAMEL-15511,Andrea Cosentino,2020-09-08T08:43:06+0000,1599540186， where 1599540186 is the epoch,the camel-ahc feature add async-http-client and async-http-client-netty-utils with wrap protocol <bundle dependency='true'>wrap:mvn:org.asynchttpclient/async-http-client/${ahc-version}$Export-Package=org.asynchttpclient.*;version=${ahc-version}</bundle> <bundle dependency='true'>wrap:mvn:org.asynchttpclient/async-http-client-netty-utils/${ahc-version}$Export-Package=org.asynchttpclient.netty.util.*;version=${ahc-version}</bundle>but sync-http-client.jar and async-http-client-netty-utils.jar are bundles with an osgi manifestBnd-LastModified: 1586331593189Build-Jdk: 1.8.0_242Built-By: slandelleBundle-Description: The Async Http Client (AHC) classes.Bundle-License: http://www.apache.org/licenses/LICENSE-2.0.txtBundle-ManifestVersion: 2Bundle-Name: Asynchronous Http ClientBundle-SymbolicName: org.asynchttpclient.async-http-clientBundle-Vendor: The AsyncHttpClient ProjectBundle-Version: 2.12.1Created-By: Apache Maven Bundle Plugin...Manifest-Version: 1.0Bnd-LastModified: 1586331569314Build-Jdk: 1.8.0_242Built-By: slandelleBundle-Description: The Async Http Client (AHC) library's purpose is to allow Java applications to easily execute HTTP requests and async hronously process the response.Bundle-License: http://www.apache.org/licenses/LICENSE-2.0.txtBundle-ManifestVersion: 2Bundle-Name: Asynchronous Http Client Netty UtilsBundle-SymbolicName: org.asynchttpclient.async-http-client-netty-utilsBundle-Vendor: The AsyncHttpClient ProjectBundle-Version: 2.12.1Created-By: Apache Maven Bundle Plugin... I propose to replace them with<bundle dependency='true'>mvn:org.asynchttpclient/async-http-client/${ahc-version}/bundle> <bundle dependency='true'>mvn:org.asynchttpclient/async-http-client-netty-utils/${ahc-version}</bundle> Bye,Hide Permalink Terrien Jean-Yves added a comment - 08/Sep/20 08:43 Sorry The same goes with wrap:mvn:com.typesafe.netty/netty-reactive-streams/$ {netty-reactive-streams-version} Show Terrien Jean-Yves added a comment - 08/Sep/20 08:43 Sorry The same goes with wrap:mvn:com.typesafe.netty/netty-reactive-streams/$ {netty-reactive-streams-version}
CAMEL-15510,Omar Al-Safi,2020-10-08T08:43:54+0000,1602132234， where 1602132234 is the epoch,It will be interesting to add a component that uses vertx kafka client as it supports async operations out of the box and most of the heavy lifting (e.g: implementation threads for consumer groups tasks) being done by the client， hence adding it as camel component shouldn't be a big task,Hide Permalink Omar Al-Safi added a comment - 08/Oct/20 08:43 by the way Claus Ibsen Andrea Cosentino， do you think is worth to add this component to camel? Show Omar Al-Safi added a comment - 08/Oct/20 08:43 by the way Claus Ibsen Andrea Cosentino ， do you think is worth to add this component to camel? Hide Permalink Andrea Cosentino added a comment - 08/Oct/20 08:46 I think it's a good alternative and it would be worth to have it， I don't know if we can have feature parity with the camel-kafka component， but it's just a matter of documentation in that case. I'm +1 Show Andrea Cosentino added a comment - 08/Oct/20 08:46 I think it's a good alternative and it would be worth to have it， I don't know if we can have feature parity with the camel-kafka component， but it's just a matter of documentation in that case. I'm +1 Hide Permalink Claus Ibsen added a comment - 08/Oct/20 08:59 Yeah sure and yeah its not a goal for them to have same feature set. Let this be the async vertx'ish component for camel. Show Claus Ibsen added a comment - 08/Oct/20 08:59 Yeah sure and yeah its not a goal for them to have same feature set. Let this be the async vertx'ish component for camel. Hide Permalink Omar Al-Safi added a comment - 08/Oct/20 09:05 Cool thanks for the input， then I will try to get out with version 3.7.0 Show Omar Al-Safi added a comment - 08/Oct/20 09:05 Cool thanks for the input， then I will try to get out with version 3.7.0
CAMEL-15509,Andrea Cosentino,2020-09-08T07:00:43+0000,1599534043， where 1599534043 is the epoch,,There are no comments yet on this issue.
CAMEL-15508,Andrea Cosentino,2020-09-07T15:01:25+0000,1599476485， where 1599476485 is the epoch,,There are no comments yet on this issue.
CAMEL-15507,James Netherton,2020-09-07T14:52:25+0000,1599475945， where 1599475945 is the epoch,Something I noticed with the vertx-http component， is that if the target endpoint returns an error response code， the way in which the error state is handled is slightly different to other Camel HTTP client components.Usually the HTTP response code， response body etc are only set on the HttpOperationFailedException. camel-vertx-http does this， but it also sets them on the exchange just as if when the response is successful.The behaviour should be consistent with the other components.,There are no comments yet on this issue.
CAMEL-15506,Alex Dettinger,2020-09-07T13:55:59+0000,1599472559， where 1599472559 is the epoch,Do not use reflection on the annotation proxy in BeanAnnotationExpressionFactory. This is JVM implementation detail and some VMs (like SubstrateVM) may not implement it.,There are no comments yet on this issue.
CAMEL-15505,Claus Ibsen,2020-09-07T18:46:25+0000,1599489985， where 1599489985 is the epoch,quickfixj-all depends on quickfixj-dictgenerator that does not seem to be required at runtime,Hide Permalink Claus Ibsen added a comment - 07/Sep/20 18:46 Contributions is welcome https://camel.apache.org/manual/latest/contributing.html Show Claus Ibsen added a comment - 07/Sep/20 18:46 Contributions is welcome https://camel.apache.org/manual/latest/contributing.html
CAMEL-15504,Jan Bednar,2020-09-07T01:23:35+0000,1599427415， where 1599427415 is the epoch,Eg. Payara AS exports TransactionManager at JNDI.java:appserver/TransactionManagerIn Camel CDI is currently hardcoded JNDIjava:/TransactionManagerSee https://stackoverflow.com/questions/55353883/apache-camel-in-payara-lookup-failed-for-java-transactionmanagerCurrent solution is to remap this with web.xml， it would be nice to find way to make this configurable directly in Apache Camel. Alternate approach can be similar to Spring， which tries to resolve TransactionManager from following JNDI names - https://github.com/spring-projects/spring-framework/blob/master/spring-tx/src/main/java/org/springframework/transaction/jta/JtaTransactionManager.javapublic static final String DEFAULT_USER_TRANSACTION_NAME = "java:comp/UserTransaction";public static final String[] FALLBACK_TRANSACTION_MANAGER_NAMES = new String[] {"java:comp/TransactionManager"， "java:appserver/TransactionManager"， "java:pm/TransactionManager"， "java:/TransactionManager"};,There are no comments yet on this issue.
CAMEL-15503,Viral Gohel,2020-09-05T15:41:11.819Z,1599306071.819， where 1599306071.819 is the epoch,Classes defined in RestDefinition type and outType are not generating correctly in openapi schema. This worked in the older older camel-swagger-java component， the schema was generating with all object definitions correctly. Please see this question on stack overflow for more details. https://stackoverflow.com/questions/63691670/apache-camel-camel-openapi-java-schema-definitions-not-generating-correctly Sample project with the issue happening is attached.,Hide Permalink Viral Gohel added a comment - 06/Sep/20 06:02 I will take a look into this. Show Viral Gohel added a comment - 06/Sep/20 06:02 I will take a look into this. Hide Permalink Stephen added a comment - 16/Sep/20 23:41 Is this the same as CAMEL-15158? Show Stephen added a comment - 16/Sep/20 23:41 Is this the same as CAMEL-15158 ? Hide Permalink Kate Hennessy added a comment - 17/Sep/20 17:12 Hi Stephen， this might be the same issue; the other Jira is a little vague so I'm not 100% sure they are talking about the component schema definitions here. Show Kate Hennessy added a comment - 17/Sep/20 17:12 Hi Stephen， this might be the same issue; the other Jira is a little vague so I'm not 100% sure they are talking about the component schema definitions here. Hide Permalink Claus Ibsen added a comment - 13/Oct/20 07:44 This can also be seen by comparing camel-swagger-java and camel-openapi-java in the unit test RestOpenApiReaderModelBookOrderTest swagger outputs: { "swagger" : "2.0"， "host" : "localhost:8080"， "basePath" : "/api"， "tags" : [ { "name" : "dude"， "description" : "Book order service" } ]， "schemes" : [ "http" ]， "paths" : { "/books/{id}" : { "get" : { "tags" : [ "dude" ]， "summary" : "Find order by id"， "operationId" : "verb1"， "consumes" : [ "application/json" ]， "produces" : [ "application/json" ]， "parameters" : [ { "name" : "id"， "in" : "path"， "description" : "The id of the order to get"， "required" : true， "type" : "integer" } ]， "responses" : { "200" : { "description" : "The order returned"， "responseSchema" : { "originalRef" : "BookOrder"， "$ref" : "#/definitions/BookOrder" }， "schema" : { "originalRef" : "BookOrder"， "$ref" : "#/definitions/BookOrder" } } }， "x-camelContextId" : "camel-1"， "x-routeId" : "route1" } }， "/books/books/{id}/line/{lineNum}" : { "get" : { "tags" : [ "dude" ]， "operationId" : "verb2"， "consumes" : [ "application/json" ]， "produces" : [ "application/json" ]， "parameters" : [ { "name" : "id"， "in" : "path"， "required" : true， "type" : "string" }， { "name" : "lineNum"， "in" : "path"， "required" : true， "type" : "string" } ]， "responses" : { "200" : { "description" : "Output type"， "responseSchema" : { "originalRef" : "LineItem"， "$ref" : "#/definitions/LineItem" }， "schema" : { "originalRef" : "LineItem"， "$ref" : "#/definitions/LineItem" } } }， "x-camelContextId" : "camel-1"， "x-routeId" : "route2" } } }， "definitions" : { "LineItem" : { "type" : "object"， "required" : [ "isbn"， "name" ]， "properties" : { "isbn" : { "type" : "string"， "description" : "ISBN of the book" }， "name" : { "type" : "string"， "description" : "Name of the book" } }， "description" : "Order line"， "x-className" : { "type" : "string"， "format" : "org.apache.camel.swagger.LineItem" } }， "BookOrder" : { "type" : "object"， "required" : [ "id"， "items" ]， "properties" : { "id" : { "type" : "string"， "description" : "The id of the order" }， "items" : { "type" : "array"， "description" : "The books ordered"， "items" : { "originalRef" : "LineItem"， "$ref" : "#/definitions/LineItem" } } }， "description" : "Represents a book order"， "x-className" : { "type" : "string"， "format" : "org.apache.camel.swagger.BookOrder" } } } } openapi outputs { "swagger" : "2.0"， "host" : "localhost:8080"， "basePath" : "/api"， "schemes" : [ "http" ]， "paths" : { "/books/{id}" : { "get" : { "consumes" : [ "application/json" ]， "produces" : [ "application/json" ]， "tags" : [ "dude" ]， "parameters" : [ { "name" : "id"， "description" : "The id of the order to get"， "in" : "path"， "required" : true， "type" : "integer" } ]， "responses" : { "200" : { "description" : "The order returned"， "schema" : { "$ref" : "#/definitions/BookOrder" } } }， "operationId" : "verb1"， "summary" : "Find order by id"， "x-camelContextId" : "camel-1"， "x-routeId" : "route1" } }， "/books/books/{id}/line/{lineNum}" : { "get" : { "consumes" : [ "application/json" ]， "produces" : [ "application/json" ]， "tags" : [ "dude" ]， "parameters" : [ { "name" : "id"， "in" : "path"， "required" : true， "type" : "string" }， { "name" : "lineNum"， "in" : "path"， "required" : true， "type" : "string" } ]， "responses" : { "200" : { "description" : "Output type"， "schema" : { "$ref" : "#/definitions/LineItem" } } }， "operationId" : "verb2"， "x-camelContextId" : "camel-1"， "x-routeId" : "route2" } } }， "definitions" : { "BookOrder" : { "type" : "BookOrder"， "x-className" : { "format" : "org.apache.camel.openapi.BookOrder"， "type" : "string" } }， "LineItem" : { "type" : "LineItem"， "x-className" : { "format" : "org.apache.camel.openapi.LineItem"， "type" : "string" } } }， "tags" : [ { "name" : "dude"， "description" : "Book order service" } ] } Show Claus Ibsen added a comment - 13/Oct/20 07:44 This can also be seen by comparing camel-swagger-java and camel-openapi-java in the unit test RestOpenApiReaderModelBookOrderTest swagger outputs: { "swagger" : "2.0" ， "host" : "localhost:8080" ， "basePath" : "/api" ， "tags" : [ { "name" : "dude" ， "description" : "Book order service" } ]， "schemes" : [ "http" ]， "paths" : { "/books/{id}" : { "get" : { "tags" : [ "dude" ]， "summary" : "Find order by id" ， "operationId" : "verb1" ， "consumes" : [ "application/json" ]， "produces" : [ "application/json" ]， "parameters" : [ { "name" : "id" ， "in" : "path" ， "description" : "The id of the order to get" ， "required" : true ， "type" : "integer" } ]， "responses" : { "200" : { "description" : "The order returned" ， "responseSchema" : { "originalRef" : "BookOrder" ， "$ref" : "#/definitions/BookOrder" }， "schema" : { "originalRef" : "BookOrder" ， "$ref" : "#/definitions/BookOrder" } } }， "x-camelContextId" : "camel-1" ， "x-routeId" : "route1" } }， "/books/books/{id}/line/{lineNum}" : { "get" : { "tags" : [ "dude" ]， "operationId" : "verb2" ， "consumes" : [ "application/json" ]， "produces" : [ "application/json" ]， "parameters" : [ { "name" : "id" ， "in" : "path" ， "required" : true ， "type" : "string" }， { "name" : "lineNum" ， "in" : "path" ， "required" : true ， "type" : "string" } ]， "responses" : { "200" : { "description" : "Output type" ， "responseSchema" : { "originalRef" : "LineItem" ， "$ref" : "#/definitions/LineItem" }， "schema" : { "originalRef" : "LineItem" ， "$ref" : "#/definitions/LineItem" } } }， "x-camelContextId" : "camel-1" ， "x-routeId" : "route2" } } }， "definitions" : { "LineItem" : { "type" : "object" ， "required" : [ "isbn" ， "name" ]， "properties" : { "isbn" : { "type" : "string" ， "description" : "ISBN of the book" }， "name" : { "type" : "string" ， "description" : "Name of the book" } }， "description" : "Order line" ， "x-className" : { "type" : "string" ， "format" : "org.apache.camel.swagger.LineItem" } }， "BookOrder" : { "type" : "object" ， "required" : [ "id" ， "items" ]， "properties" : { "id" : { "type" : "string" ， "description" : "The id of the order" }， "items" : { "type" : "array" ， "description" : "The books ordered" ， "items" : { "originalRef" : "LineItem" ， "$ref" : "#/definitions/LineItem" } } }， "description" : "Represents a book order" ， "x-className" : { "type" : "string" ， "format" : "org.apache.camel.swagger.BookOrder" } } } } openapi outputs { "swagger" : "2.0" ， "host" : "localhost:8080" ， "basePath" : "/api" ， "schemes" : [ "http" ]， "paths" : { "/books/{id}" : { "get" : { "consumes" : [ "application/json" ]， "produces" : [ "application/json" ]， "tags" : [ "dude" ]， "parameters" : [ { "name" : "id" ， "description" : "The id of the order to get" ， "in" : "path" ， "required" : true ， "type" : "integer" } ]， "responses" : { "200" : { "description" : "The order returned" ， "schema" : { "$ref" : "#/definitions/BookOrder" } } }， "operationId" : "verb1" ， "summary" : "Find order by id" ， "x-camelContextId" : "camel-1" ， "x-routeId" : "route1" } }， "/books/books/{id}/line/{lineNum}" : { "get" : { "consumes" : [ "application/json" ]， "produces" : [ "application/json" ]， "tags" : [ "dude" ]， "parameters" : [ { "name" : "id" ， "in" : "path" ， "required" : true ， "type" : "string" }， { "name" : "lineNum" ， "in" : "path" ， "required" : true ， "type" : "string" } ]， "responses" : { "200" : { "description" : "Output type" ， "schema" : { "$ref" : "#/definitions/LineItem" } } }， "operationId" : "verb2" ， "x-camelContextId" : "camel-1" ， "x-routeId" : "route2" } } }， "definitions" : { "BookOrder" : { "type" : "BookOrder" ， "x-className" : { "format" : "org.apache.camel.openapi.BookOrder" ， "type" : "string" } }， "LineItem" : { "type" : "LineItem" ， "x-className" : { "format" : "org.apache.camel.openapi.LineItem" ， "type" : "string" } } }， "tags" : [ { "name" : "dude" ， "description" : "Book order service" } ] } Hide Permalink Claus Ibsen added a comment - 13/Oct/20 07:51 This requires that openapi-java has something like annotations etc we can use to markup the model classes and that we can then use some api to parse to get that detailed information. Show Claus Ibsen added a comment - 13/Oct/20 07:51 This requires that openapi-java has something like annotations etc we can use to markup the model classes and that we can then use some api to parse to get that detailed information. Hide Permalink Claus Ibsen added a comment - 13/Oct/20 07:52 I suggest to get in touch with the apicurio team about what they offer Show Claus Ibsen added a comment - 13/Oct/20 07:52 I suggest to get in touch with the apicurio team about what they offer Hide Permalink Claus Ibsen added a comment - 13/Oct/20 07:52 Its the readClass methods in RestModelConverters that needs to have such feature. Compare this with the camel-swagger etc. Show Claus Ibsen added a comment - 13/Oct/20 07:52 Its the readClass methods in RestModelConverters that needs to have such feature. Compare this with the camel-swagger etc.
CAMEL-15502,Claus Ibsen,2020-09-04T06:44:59+0000,1599187499， where 1599187499 is the epoch,If using enums such as GET_USERIt would be great if the enum type converter also support a dash style， so you can sayaction=get-useraction=GET_USERaction=GetUseraction=getUserWe do ignore case and also match as-is， eg if the enum was GETUSER and not GET_USER,There are no comments yet on this issue.
CAMEL-15501,James Netherton,2020-09-03T10:30:00+0000,1599114600， where 1599114600 is the epoch,Right now custom router configuration is possible at the endpoint level and via the registry. It should be made possible to set the router directly on the VertxWebsocketComponent.,There are no comments yet on this issue.
CAMEL-15500,Andrea Cosentino,2020-09-03T08:21:36+0000,1599106896， where 1599106896 is the epoch,This is a related issue to CAMEL-15499， but this one applies to the camel-azure-storage-blob component. The syntax on the component json uses "syntax": "azure-storage-blob:containerName" but it looks like it should use something like "syntax": "azure-storage-blob:/accountName/containerName".,There are no comments yet on this issue.
CAMEL-15499,Andrea Cosentino,2020-09-04T05:48:07+0000,1599184087， where 1599184087 is the epoch,This is related to the Camel Kafka Connector issue 409. Which causes the connector to fail to properly create the URI for the azure-storage-queue connector. It seems to me that this is the cause for the wrong URI: azure-storage-queue.json from master (3.5) azure-storage-queue.json from camel-3.4.xSince this is fed into the AbstractCamelCatalog.doAsEndpointUri which is called - at one point - as part of the TaskHelper.buildUrl I think the format of the syntax in that json file should be azure-storage-queue:/accountName/queueName.,Hide Permalink Andrea Cosentino added a comment - 04/Sep/20 05:48 I still need to finish this one， the other CAMEL-15500 is done. Show Andrea Cosentino added a comment - 04/Sep/20 05:48 I still need to finish this one， the other CAMEL-15500 is done.
CAMEL-15498,Claus Ibsen,2020-09-03T07:34:53+0000,1599104093， where 1599104093 is the epoch,Today we can parse javadoc， or .txt files with API signatures.The javadoc is a bit brittle， so lets build one that uses java source parsing， which we can use Roaster to do (we do that in other camel tools).,There are no comments yet on this issue.
CAMEL-15497,Claus Ibsen,2020-09-03T13:04:32.741Z,1599123872.741， where 1599123872.741 is the epoch,Hi Team，@Claus Ibsen @Andrea CosentinoVersions used (Karaf 4.2.8 ， camel 2.24.3 ，FIX 4.4) (drop down not showing the Fix 4.4 so selected Future /Latest version available i am trying to connect the quick-fix component but required config.cfg file (normally it will be there in classpath)， we want to externalize the config.cfg because clients can change the quick-fix(raptor) component details such as (below details might very form environment to environment like DEV/QA/SDN etc.SenderCompID/TargetCompID/SocketConnectPort etc.But when try to load from external file i.e config.cfg. getting error as unable to load .Even though file path， i am able to load it properly(karaf/etc/config.cfg)*[image attached*]but when i add it to the path with quick-fix component its throwing the error that unable to load.Example: normally we load it from classpath，which works perfectly below point 1 and 2. Route:(client/config.cfg in the classpath src/main/resource/client/config.cfg)1. .to("quickfix:client/config.cfg?sessionID=FIX.4.4:BANZAI->EXEC")2. from("quickfix:client/config.cfg?sessionID=FIX.4.4:BANZAI->EXEC&lazyCreateEngine=false&exchangePattern=InOut")but if you see above client/config.cfg is in classpath of our project. but want to externalize it and place it inside the karaf/etc like other .cfg/.properties file but which is not working.Please do needful as its affecting our release also(as usual ，we are externalizing this property for other keys to read by using <cm:property-placeholder)fixprotocol.cfg#topic or Queue configurationKey=valueKey1=value1#for fix cfg.name=config.cfgcfg.path.name=karaf.etcSource code Route:public class FixClientRouter extends RouteBuilder {@PropertyInject(value = "cfg.name") private String cfgFileName;@PropertyInject(value = "cfg.path.name") private String cfgpathName; @Override public void configure() throws Exception {String externalPath=System.getProperty(cfgpathName) + File.separator + cfgFileName;*/output exernalPath= C:\Ajay\MyDocs\IntegrationProject\DIS\karafsetup\apache-karaf-4.2.8\etc\config.cfg */from(ENDPOINT_FIX_COMPONENT) .routeId(ENDPOINT_FIX_COMPONENT_ROUTEID) .log(LoggingLevel.INFO， LOG_MSG， "fix protocol:connecting to raptor ") .doTry() / Using the existing(created in second route /new session* to explicitly send the on an EVENT (Based on Request) */ .to("quickfix:"externalPath"?sessionID=FIX.4.4:BANZAI->EXEC")//not working //.to("quickfix:file:"str"?sessionID=FIX.4.4:BANZAI->EXEC") //not working .log(LoggingLevel.INFO，"fix converted data sent to raptor successfully!!!!!") .endDoTry() .doCatch(Exception.class) //............logs .end() .end();*/For reply from Raptor/IRIS and Session Creation， two way communication- Keep Establishing the communication on bundle start) */ from("quickfix:"externalPath"?sessionID=FIX.4.4:BANZAI->EXEC&lazyCreateEngine=false&exchangePattern=InOut") .routeId(ENDPOINT_RAPTOR_CONNECTION_ROUTEID) .filter(PredicateBuilder.or( header(QuickfixjEndpoint.EVENT_CATEGORY_KEY) .isEqualTo(QuickfixjEventCategory.AdminMessageSent)， header(QuickfixjEndpoint.EVENT_CATEGORY_KEY) .isEqualTo(QuickfixjEventCategory.AppMessageSent)， header(QuickfixjEndpoint.EVENT_CATEGORY_KEY) .isEqualTo(QuickfixjEventCategory.AdminMessageReceived)， header(QuickfixjEndpoint.EVENT_CATEGORY_KEY) .isEqualTo(QuickfixjEventCategory.AppMessageReceived))) .log(LoggingLevel.INFO， LOG_MSG， "heartBeat ...........=${body}") .end();Error: C*aused by: java.lang.IllegalArgumentException: Could not load file:C:\Ajay\MyDocs\IntegrationProject\DIS\karafsetup\apache-karaf-4.2.8\etc\config.cfgat org.apache.camel.component.quickfixj.QuickfixjEngine.loadSettings(QuickfixjEngine.java:255) ~[?:?]at org.apache.camel.component.quickfixj.QuickfixjComponent.createEndpoint(QuickfixjComponent.java:79) ~[?:?]at* org.apache.camel.impl.DefaultComponent.createEndpoint(DefaultComponent.java:130) ~[!/:2.24.3]at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:705) ~[!/:2.24.3]at org.apache.camel.util.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:80) ~[!/:2.24.3]at org.apache.camel.model.RouteDefinition.resolveEndpoint(RouteDefinition.java:227) ~[!/:2.24.3]at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:116) ~[!/:2.24.3]at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:122) ~[!/:2.24.3]at org.apache.camel.model.SendDefinition.resolveEndpoint(SendDefinition.java:62) ~[!/:2.24.3]at org.apache.camel.model.SendDefinition.createProcessor(SendDefinition.java:56) ~[!/:2.24.3]at org.apache.camel.model.ProcessorDefinition.createProcessor(ProcessorDefinition.java:518) ~[!/:2.24.3]at org.apache.camel.model.ProcessorDefinition.createOutputsProcessorImpl(ProcessorDefinition.java:481) ~[!/:2.24.3]at org.apache.camel.model.ProcessorDefinition.createOutputsProcessor(ProcessorDefinition.java:448) ~[!/:2.24.3]at org.apache.camel.model.TryDefinition.createProcessor(TryDefinition.java:77) ~[!/:2.24.3]at org.apache.camel.model.ProcessorDefinition.makeProcessorImpl(ProcessorDefinition.java:569) ~[!/:2.24.3]at org.apache.camel.model.ProcessorDefinition.makeProcessor(ProcessorDefinition.java:530) ~[!/:2.24.3]at org.apache.camel.model.ProcessorDefinition.addRoutes(ProcessorDefinition.java:240) ~[!/:2.24.3]at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1349) ~[!/:2.24.3]... 25 moreThanks Ajay Patil,Hide Permalink Andrea Cosentino added a comment - 03/Sep/20 07:24 as reported in the documentation: https://camel.apache.org/components/2.x/quickfix-component.html#_uri_format The config file must be in classpath. Show Andrea Cosentino added a comment - 03/Sep/20 07:24 as reported in the documentation: https://camel.apache.org/components/2.x/quickfix-component.html#_uri_format The config file must be in classpath. Hide Permalink Andrea Cosentino added a comment - 03/Sep/20 07:25 This is an improvement for Camel 3.6.0， eventually. Show Andrea Cosentino added a comment - 03/Sep/20 07:25 This is an improvement for Camel 3.6.0， eventually. Hide Permalink Andrea Cosentino added a comment - 03/Sep/20 07:34 - edited One attempt you could do is specify the configurationName as "file://C:\Ajay\MyDocs\IntegrationProject\DIS\karafsetup\apache-karaf-4.2.8\etc\config.cfg" Also the configuration file in karaf needs to be under KARAF_HOME/etc as reported in the guide too https://karaf.apache.org/manual/latest/#_files So place your file there and try. Show Andrea Cosentino added a comment - 03/Sep/20 07:34 - edited One attempt you could do is specify the configurationName as "file://C:\Ajay\MyDocs\IntegrationProject\DIS\karafsetup\apache-karaf-4.2.8\etc\config.cfg" Also the configuration file in karaf needs to be under KARAF_HOME/etc as reported in the guide too https://karaf.apache.org/manual/latest/#_files So place your file there and try. Hide Permalink Andrea Cosentino added a comment - 03/Sep/20 08:57 Try to put the file under etc in karaf installation. There is a comment about this Show Andrea Cosentino added a comment - 03/Sep/20 08:57 Try to put the file under etc in karaf installation. There is a comment about this Hide Permalink Andrea Cosentino added a comment - 03/Sep/20 08:59 - edited The fix version is the next version with this fixed if any fix will be done. We won't do any new feature or improvements on 2.24.x or 2.25.x， so the eventually fix version is 3.6.0. there won't be a 2.24.4 for sure Show Andrea Cosentino added a comment - 03/Sep/20 08:59 - edited The fix version is the next version with this fixed if any fix will be done. We won't do any new feature or improvements on 2.24.x or 2.25.x， so the eventually fix version is 3.6.0. there won't be a 2.24.4 for sure Hide Permalink AjayPatil2611 added a comment - 03/Sep/20 09:00 No luck same error. Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: quickfix://file://C:%5CAjay%5CMyDocs%5CIntegrationProject%5CDIS%5Ckarafsetup%5Capache-karaf-4.2.8%5Cetc%5Cconfig.cfg?sessionID=FIX.4.4%3ABANZAI-%3EEXEC due to: Could not load file://C:\Ajay\MyDocs\IntegrationProject\DIS\karafsetup\apache-karaf-4.2.8\etc\config.cfg at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:752) ~[!/:2.24.3] at org.apache.camel.util.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:80) ~[!/:2.24.3] at org.apache.camel.model.RouteDefinition.resolveEndpoint(RouteDefinition.java:227) ~[!/:2.24.3] at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:116) ~[!/:2.24.3] at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:122) ~[!/:2.24.3] at org.apache.camel.model.SendDefinition.resolveEndpoint(SendDefinition.java:62) ~[!/:2.24.3] at org.apache.camel.model.SendDefinition.createProcessor(SendDefinition.java:56) ~[!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.createProcessor(ProcessorDefinition.java:518) ~[!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.createOutputsProcessorImpl(ProcessorDefinition.java:481) ~[!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.createOutputsProcessor(ProcessorDefinition.java:448) ~[!/:2.24.3] at org.apache.camel.model.TryDefinition.createProcessor(TryDefinition.java:77) ~[!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.makeProcessorImpl(ProcessorDefinition.java:569) ~[!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.makeProcessor(ProcessorDefinition.java:530) ~[!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.addRoutes(ProcessorDefinition.java:240) ~[!/:2.24.3] at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1349) ~[!/:2.24.3] ... 25 more Caused by: java.lang.IllegalArgumentException: Could not load file://C:\Ajay\MyDocs\IntegrationProject\DIS\karafsetup\apache-karaf-4.2.8\etc\config.cfg at org.apache.camel.component.quickfixj.QuickfixjEngine.loadSettings(QuickfixjEngine.java:255) ~[?:?] at org.apache.camel.component.quickfixj.QuickfixjComponent.createEndpoint(QuickfixjComponent.java:79) ~[?:?] at org.apache.camel.impl.DefaultComponent.createEndpoint(DefaultComponent.java:130) ~[!/:2.24.3] at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:705) ~[!/:2.24.3] at org.apache.camel.util.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:80) ~[!/:2.24.3] at org.apache.camel.model.RouteDefinition.resolveEndpoint(RouteDefinition.java:227) ~[!/:2.24.3] at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:116) ~[!/:2.24.3] at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:122) ~[!/:2.24.3] at org.apache.camel.model.SendDefinition.resolveEndpoint(SendDefinition.java:62) ~[!/:2.24.3] at org.apache.camel.model.SendDefinition.createProcessor(SendDefinition.java:56) ~[!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.createProcessor(ProcessorDefinition.java:518) ~[!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.createOutputsProcessorImpl(ProcessorDefinition.java:481) ~[!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.createOutputsProcessor(ProcessorDefinition.java:448) ~[!/:2.24.3] at org.apache.camel.model.TryDefinition.createProcessor(TryDefinition.java:77) ~[!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.makeProcessorImpl(ProcessorDefinition.java:569) ~[!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.makeProcessor(ProcessorDefinition.java:530) ~[!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.addRoutes(ProcessorDefinition.java:240) ~[!/:2.24.3] at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1349) ~[!/:2.24.3] ... 25 more Show AjayPatil2611 added a comment - 03/Sep/20 09:00 No luck same error. Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: quickfix:// file://C:%5CAjay%5CMyDocs%5CIntegrationProject%5CDIS%5Ckarafsetup%5Capache-karaf-4.2.8%5Cetc%5Cconfig.cfg?sessionID=FIX.4.4%3ABANZAI-%3EEXEC due to: Could not load file://C:\Ajay\MyDocs\IntegrationProject\DIS\karafsetup\apache-karaf-4.2.8\etc\config.cfg at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:752) ~ [!/:2.24.3] at org.apache.camel.util.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:80) ~ [!/:2.24.3] at org.apache.camel.model.RouteDefinition.resolveEndpoint(RouteDefinition.java:227) ~ [!/:2.24.3] at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:116) ~ [!/:2.24.3] at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:122) ~ [!/:2.24.3] at org.apache.camel.model.SendDefinition.resolveEndpoint(SendDefinition.java:62) ~ [!/:2.24.3] at org.apache.camel.model.SendDefinition.createProcessor(SendDefinition.java:56) ~ [!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.createProcessor(ProcessorDefinition.java:518) ~ [!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.createOutputsProcessorImpl(ProcessorDefinition.java:481) ~ [!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.createOutputsProcessor(ProcessorDefinition.java:448) ~ [!/:2.24.3] at org.apache.camel.model.TryDefinition.createProcessor(TryDefinition.java:77) ~ [!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.makeProcessorImpl(ProcessorDefinition.java:569) ~ [!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.makeProcessor(ProcessorDefinition.java:530) ~ [!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.addRoutes(ProcessorDefinition.java:240) ~ [!/:2.24.3] at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1349) ~ [!/:2.24.3] ... 25 more Caused by: java.lang.IllegalArgumentException: Could not load file://C:\Ajay\MyDocs\IntegrationProject\DIS\karafsetup\apache-karaf-4.2.8\etc\config.cfg at org.apache.camel.component.quickfixj.QuickfixjEngine.loadSettings(QuickfixjEngine.java:255) ~ [?:?] at org.apache.camel.component.quickfixj.QuickfixjComponent.createEndpoint(QuickfixjComponent.java:79) ~ [?:?] at org.apache.camel.impl.DefaultComponent.createEndpoint(DefaultComponent.java:130) ~ [!/:2.24.3] at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:705) ~ [!/:2.24.3] at org.apache.camel.util.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:80) ~ [!/:2.24.3] at org.apache.camel.model.RouteDefinition.resolveEndpoint(RouteDefinition.java:227) ~ [!/:2.24.3] at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:116) ~ [!/:2.24.3] at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:122) ~ [!/:2.24.3] at org.apache.camel.model.SendDefinition.resolveEndpoint(SendDefinition.java:62) ~ [!/:2.24.3] at org.apache.camel.model.SendDefinition.createProcessor(SendDefinition.java:56) ~ [!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.createProcessor(ProcessorDefinition.java:518) ~ [!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.createOutputsProcessorImpl(ProcessorDefinition.java:481) ~ [!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.createOutputsProcessor(ProcessorDefinition.java:448) ~ [!/:2.24.3] at org.apache.camel.model.TryDefinition.createProcessor(TryDefinition.java:77) ~ [!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.makeProcessorImpl(ProcessorDefinition.java:569) ~ [!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.makeProcessor(ProcessorDefinition.java:530) ~ [!/:2.24.3] at org.apache.camel.model.ProcessorDefinition.addRoutes(ProcessorDefinition.java:240) ~ [!/:2.24.3] at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1349) ~ [!/:2.24.3] ... 25 more Hide Permalink AjayPatil2611 added a comment - 03/Sep/20 09:01 any work around ，do you think as of now and FIX version is 4.4 ，not 3.6. Show AjayPatil2611 added a comment - 03/Sep/20 09:01 any work around ，do you think as of now and FIX version is 4.4 ，not 3.6. Hide Permalink AjayPatil2611 added a comment - 03/Sep/20 09:02 Try to put the file under etc in karaf installation. There is a comment about this :: i had tried also but no luck Show AjayPatil2611 added a comment - 03/Sep/20 09:02 Try to put the file under etc in karaf installation. There is a comment about this :: i had tried also but no luck Hide Permalink AjayPatil2611 added a comment - 03/Sep/20 09:04 - edited i think， when we combine quickfix +file or quickfix component with string its creating issue Show AjayPatil2611 added a comment - 03/Sep/20 09:04 - edited i think， when we combine quickfix +file or quickfix component with string its creating issue Hide Permalink Andrea Cosentino added a comment - 03/Sep/20 09:04 What is 4.4? Camel 4 doesn't exist Show Andrea Cosentino added a comment - 03/Sep/20 09:04 What is 4.4? Camel 4 doesn't exist Hide Permalink AjayPatil2611 added a comment - 03/Sep/20 09:05 - edited i am talking about fix protocol version ，not camel version， now i get it ，its my bad ，its issue fix version ，not fix protocol version (FIX4.4 (raptor protocol) here you go Show AjayPatil2611 added a comment - 03/Sep/20 09:05 - edited i am talking about fix protocol version ，not camel version， now i get it ，its my bad ，its issue fix version ，not fix protocol version (FIX4.4 (raptor protocol) here you go Hide Permalink Andrea Cosentino added a comment - 03/Sep/20 09:06 Please create a reproducer and we can have a look. Luca Burgazzoli can you help on this? Show Andrea Cosentino added a comment - 03/Sep/20 09:06 Please create a reproducer and we can have a look. Luca Burgazzoli can you help on this? Hide Permalink Andrea Cosentino added a comment - 03/Sep/20 09:07 The fix version is referred to camel. Btw the fix version for this is 3.6.0 because it"s an improvement. I think I know the workflow a bit Show Andrea Cosentino added a comment - 03/Sep/20 09:07 The fix version is referred to camel. Btw the fix version for this is 3.6.0 because it"s an improvement. I think I know the workflow a bit Hide Permalink AjayPatil2611 added a comment - 03/Sep/20 09:09 sorry Andrea Cosentino you mean to add code snippet or sample project for reproducing the same. can you please clarify Show AjayPatil2611 added a comment - 03/Sep/20 09:09 sorry Andrea Cosentino you mean to add code snippet or sample project for reproducing the same. can you please clarify Hide Permalink Andrea Cosentino added a comment - 03/Sep/20 09:13 Sample project. Show Andrea Cosentino added a comment - 03/Sep/20 09:13 Sample project. Hide Permalink Andrea Cosentino added a comment - 03/Sep/20 09:25 What I'm saying is just that this is not a bug， you have to add this file to your classpath. So being able to load from an external file is a new feature， and new feature should be introduced in new releases. Camel 2.24.x won't be released anymore， camel 2.25.x is already at 2.25.2 and we can't change behavior there. Camel 3.4.x is an LTS release， so we backport only bug fixes. The next major release of camel with new feature is 3.6.0. If a new feature is needed here， it will be included in 3.6.0. I still believe you're doing something wrong with the way you're declaring the file stuff， but the way you reported the route and the explanation are a bit confusing， so maybe it's better to have a reproducer and start from there. Did you read the Karaf configuration guide for files? https://karaf.apache.org/manual/latest/#_files Show Andrea Cosentino added a comment - 03/Sep/20 09:25 What I'm saying is just that this is not a bug， you have to add this file to your classpath. So being able to load from an external file is a new feature， and new feature should be introduced in new releases. Camel 2.24.x won't be released anymore， camel 2.25.x is already at 2.25.2 and we can't change behavior there. Camel 3.4.x is an LTS release， so we backport only bug fixes. The next major release of camel with new feature is 3.6.0. If a new feature is needed here， it will be included in 3.6.0. I still believe you're doing something wrong with the way you're declaring the file stuff， but the way you reported the route and the explanation are a bit confusing， so maybe it's better to have a reproducer and start from there. Did you read the Karaf configuration guide for files? https://karaf.apache.org/manual/latest/#_files Hide Permalink AjayPatil2611 added a comment - 03/Sep/20 09:30 i understood， actually when you mentioned the fix version ，i thought you are talking FIX-Protocol Version i.e. https://www.onixs.biz/fix-dictionary/4.4/fields_by_tag.html later understood that， this improvement will be fixed in next camel 3.6.0. its my mad. as in my mind Fix means， FIX Protocol version running Show AjayPatil2611 added a comment - 03/Sep/20 09:30 i understood， actually when you mentioned the fix version ，i thought you are talking FIX-Protocol Version i.e. https://www.onixs.biz/fix-dictionary/4.4/fields_by_tag.html later understood that， this improvement will be fixed in next camel 3.6.0. its my mad. as in my mind Fix means， FIX Protocol version running Hide Permalink AjayPatil2611 added a comment - 03/Sep/20 09:37 Yes i had read. and tried with environment variables also such ${karaf.home}\config.cfg or karaf.etc\config.cfg https://camel.apache.org/manual/latest/using-propertyplaceholder.html i am creating the sample project and ll update soon. and mean while， it would be great， at least some work around for this issue Show AjayPatil2611 added a comment - 03/Sep/20 09:37 Yes i had read. and tried with environment variables also such ${karaf.home}\config.cfg or karaf.etc \config.cfg https://camel.apache.org/manual/latest/using-propertyplaceholder.html i am creating the sample project and ll update soon. and mean while， it would be great， at least some work around for this issue Hide Permalink Luca Burgazzoli added a comment - 03/Sep/20 09:43 Something like that could work: Map<String， QuickfixjConfiguration> configurations = new HashMap<>(); configurations.put( "qf"， new QuickfixjConfiguration() { @Override public SessionSettings createSessionSettings() throws ConfigError { return new SessionSettings("data/qf.cfg"); } } ); QuickfixjComponent component = new QuickfixjComponent(); component.setConfigurations(configurations); getContext().addComponent("quickfix"， component); from("direct:start") .to("quickfix:qf?sessionID=FIX.4.4:BANZAI->EXEC"); NOTE: is is an hack so use it as you own risk Show Luca Burgazzoli added a comment - 03/Sep/20 09:43 Something like that could work: Map< String ， QuickfixjConfiguration> configurations = new HashMap<>(); configurations.put( "qf" ， new QuickfixjConfiguration() { @Override public SessionSettings createSessionSettings() throws ConfigError { return new SessionSettings( "data/qf.cfg" ); } } ); QuickfixjComponent component = new QuickfixjComponent(); component.setConfigurations(configurations); getContext().addComponent( "quickfix" ， component); from( "direct:start" ) .to( "quickfix:qf?sessionID=FIX.4.4:BANZAI->EXEC" ); NOTE: is is an hack so use it as you own risk Hide Permalink AjayPatil2611 added a comment - 03/Sep/20 11:54 - edited Luca Burgazzoli no luck same error as above only Show AjayPatil2611 added a comment - 03/Sep/20 11:54 - edited Luca Burgazzoli no luck same error as above only Hide Permalink Luca Burgazzoli added a comment - 03/Sep/20 12:19 You need to debug it， I cannot help more without a proper reproducer Show Luca Burgazzoli added a comment - 03/Sep/20 12:19 You need to debug it， I cannot help more without a proper reproducer Hide Permalink Claus Ibsen added a comment - 03/Sep/20 12:23 This is not a chat room - this is JIRA. This issue is reported about an improvement to be able to load quickfix configurations file via file system and not only classpath. To build your own workaround in current released Camel then please talk about this elsewhere， where this does not add noise. For prioritized and fast help then look at https://camel.apache.org/manual/latest/commercial-camel-offerings.html Show Claus Ibsen added a comment - 03/Sep/20 12:23 This is not a chat room - this is JIRA. This issue is reported about an improvement to be able to load quickfix configurations file via file system and not only classpath. To build your own workaround in current released Camel then please talk about this elsewhere， where this does not add noise. For prioritized and fast help then look at https://camel.apache.org/manual/latest/commercial-camel-offerings.html Hide Permalink AjayPatil2611 added a comment - 03/Sep/20 13:01 - edited Hi Claus sorry and thanks， here you go the reproducible sample projects (Attached) 1. quickfix-fix4.4-sample.zip 2. quickfixj-server.zip 3. config.cfg & trading.fix44.protocol.cfg Please make sure that before installing the bundle. you place the "config.cfg" and "trading.fix44.protocol.cfg" file inside the apache-karaf-4.2.8\etc folder. and if you required，you can please start quickfixj-server maven project as spring boot application. karaf@root()> bundle:install mvn:com.ajay.sample.integration/quickfix-fix4.4-sample/0.0.1-SNAPSHOT Luca Burgazzoli please do let me know if you are able to reproduce or not. i will try to find out solution. meanwhile if you find any solution please do let me know. Claus Ibsen Andrea Cosentino Luca Burgazzoli thanks for the help Show AjayPatil2611 added a comment - 03/Sep/20 13:01 - edited Hi Claus sorry and thanks， here you go the reproducible sample projects (Attached) 1. quickfix-fix4.4-sample.zip 2. quickfixj-server.zip 3. config.cfg & trading.fix44.protocol.cfg Please make sure that before installing the bundle. you place the "config.cfg" and "trading.fix44.protocol.cfg" file inside the apache-karaf-4.2.8\etc folder. and if you required，you can please start quickfixj-server maven project as spring boot application. karaf@root()> bundle:install mvn:com.ajay.sample.integration/quickfix-fix4.4-sample/0.0.1-SNAPSHOT Luca Burgazzoli please do let me know if you are able to reproduce or not. i will try to find out solution. meanwhile if you find any solution please do let me know. Claus Ibsen Andrea Cosentino Luca Burgazzoli thanks for the help Hide Permalink AjayPatil2611 added a comment - 07/Sep/20 07:45 Sorry forgot update here (on September 3-4) work around solution has been addressed for this issue for camel 2.24.3 thank you once again all. Show AjayPatil2611 added a comment - 07/Sep/20 07:45 Sorry forgot update here (on September 3-4) work around solution has been addressed for this issue for camel 2.24.3 thank you once again all.
CAMEL-15496,Unassigned,2020-09-03T10:05:15+0000,1599113115， where 1599113115 is the epoch,See this questionhttps://github.com/apache/camel-kafka-connector/issues/323 The camel-rabbitmq-sink-connector needs to have support to add additional headers.While doing so， the basic AMQP properties were also couldn't be added. The source kafka connector could be from any source. The headers and properties related to AMQP message cannot/should not be added at the source level. So， it should always be possible to add and manipulate the headers and properties via configuration. There should be a support to add these headers and properties in the camel sink connectors via configuration.,Hide Permalink Ganesh added a comment - 03/Sep/20 10:05 The following method can invoke a bean when the value contains "#bean:" or "#" org.apache.camel.support.EndpointHelper#resolveReferenceParameter(org.apache.camel.CamelContext， java.lang.String， java.lang.Class<T>， boolean) For my use-case I want to invoke a method in the bean.. Should this have also support for invoking the method ? Let's say with the syntax "#bean:<beanRef>?method=<methodName>" The above is supported in the Camel Route.. Is there any specific reason why it is not supported in the value ? Show Ganesh added a comment - 03/Sep/20 10:05 The following method can invoke a bean when the value contains "#bean:" or "#" org.apache.camel.support.EndpointHelper#resolveReferenceParameter(org.apache.camel.CamelContext， java.lang.String， java.lang.Class<T>， boolean) For my use-case I want to invoke a method in the bean.. Should this have also support for invoking the method ? Let's say with the syntax "#bean:<beanRef>?method=<methodName>" The above is supported in the Camel Route.. Is there any specific reason why it is not supported in the value ? Hide Permalink Ganesh added a comment - 03/Sep/20 10:08 - edited Claus Ibsen， Could you please give the comment? Asking you because you had worked in similar configuration side. I use the `camel-rabbitmq-sink-kafka-connector` and in that I have the following configuration. Here the bean is available for me but I couldn't invoke the method `generateUuid`. "camel.beans.uuidGenerator": "#class:org.apache.camel.impl.engine.DefaultUuidGenerator"， "camel.sink.endpoint.additionalHeaders": "#bean:addHeaders"， "camel.beans.addHeaders": "#class:org.apache.camel.support.beans.SimpleDataHolderBean"， "camel.beans.addHeaders.mapData[UUID]": "#bean:uuidGenerator?method=generateUuid"， Show Ganesh added a comment - 03/Sep/20 10:08 - edited Claus Ibsen ， Could you please give the comment? Asking you because you had worked in similar configuration side. I use the `camel-rabbitmq-sink-kafka-connector` and in that I have the following configuration. Here the bean is available for me but I couldn't invoke the method `generateUuid`. "camel.beans.uuidGenerator" : "# class: org.apache.camel.impl.engine.DefaultUuidGenerator" ， "camel.sink.endpoint.additionalHeaders" : "#bean:addHeaders" ， "camel.beans.addHeaders" : "# class: org.apache.camel.support.beans.SimpleDataHolderBean" ， "camel.beans.addHeaders.mapData[UUID]" : "#bean:uuidGenerator?method=generateUuid" ，
CAMEL-15495,James Netherton,2020-09-02T14:22:43+0000,1599042163， where 1599042163 is the epoch,I made a mistake in the DefaultVertxHttpBinding implementation in that if the content-type exchange header is set， it gets stripped by the HeaderFilterStrategy， and is never set on the Vert.x HttpRequest object.The workaround until a fix is available would be to extend DefaultVertxHttpBinding and override populateRequestHeaders so that content-type can be set properly.,There are no comments yet on this issue.
CAMEL-15494,Unassigned,2020-09-01T19:55:41+0000,1598975741， where 1598975741 is the epoch,Please document how to add Http/2 Protocol to the camel-undertow component.,There are no comments yet on this issue.
CAMEL-15493,Unassigned,2020-09-01T12:18:16+0000,1598948296， where 1598948296 is the epoch,Microprofile Configuration supports CDI injection of properties as lists or arrays and can cause the Camel Cdi extension to throw a NPE during container startup: Caused by: org.apache.webbeans.exception.WebBeansException: java.lang.NullPointerException at org.apache.webbeans.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:371) at org.apache.webbeans.event.NotificationManager.invokeObserverMethod(NotificationManager.java:819) at org.apache.webbeans.event.NotificationManager.fireEvent(NotificationManager.java:715) ... 53 more Caused by: java.lang.NullPointerException at org.apache.camel.cdi.CdiCamelExtension.lambda$shouldDeployDefaultCamelContext$9(CdiCamelExtension.java:320) at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:174) at java.util.HashMap$KeySpliterator.tryAdvance(HashMap.java:1569) at java.util.stream.ReferencePipeline.forEachWithCancel(ReferencePipeline.java:126) at java.util.stream.AbstractPipeline.copyIntoWithCancel(AbstractPipeline.java:498) at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:485) at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471) at java.util.stream.MatchOps$MatchOp.evaluateSequential(MatchOps.java:230) at java.util.stream.MatchOps$MatchOp.evaluateSequential(MatchOps.java:196) at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) at java.util.stream.ReferencePipeline.anyMatch(ReferencePipeline.java:449) at org.apache.camel.cdi.CdiCamelExtension.shouldDeployDefaultCamelContext(CdiCamelExtension.java:325) at org.apache.camel.cdi.CdiCamelExtension.afterBeanDiscovery(CdiCamelExtension.java:276) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) at org.apache.webbeans.event.ObserverMethodImpl.invoke(ObserverMethodImpl.java:404) at org.apache.webbeans.event.ContainerEventObserverMethodImpl.invoke(ContainerEventObserverMethodImpl.java:85) at org.apache.webbeans.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:365) ... 55 more This occurs when CdiCamelExtension.shouldDeployDefaultCamelContext encounters a bean for an array type because the Class.getPackage method returns null for arrays:private boolean shouldDeployDefaultCamelContext(Set<Bean<?>> beans) { return beans.stream() // Is there a Camel bean with the @Default qualifier? // Excluding internal components... .filter(bean -> !bean.getBeanClass().getPackage().equals(getClass().getPackage())) Switching around the equals check should fix it.,Hide Permalink Andrea Cosentino added a comment - 01/Sep/20 12:18 Contributions are welcome Kent Fung Show Andrea Cosentino added a comment - 01/Sep/20 12:18 Contributions are welcome Kent Fung Hide Permalink Kent Fung added a comment - 03/Sep/20 15:04 Hello Andrea Cosentino， I've submitted a PR. Show Kent Fung added a comment - 03/Sep/20 15:04 Hello Andrea Cosentino ， I've submitted a PR.
CAMEL-15492,Andrea Cosentino,2020-09-01T07:15:37+0000,1598930137， where 1598930137 is the epoch,,There are no comments yet on this issue.
CAMEL-15491,Unassigned,2020-09-01T05:24:30+0000,1598923470， where 1598923470 is the epoch,I was working on a Camel Karaf to Quarkus integration migration and the way to use the built-in auto-configurations in those two is very different. I haven't worked much with either combination as I'm a subcontractor. In the documentation for this component there was no clear indication as to how the configuration worked in the Quarkus environment. After creating an issue about this on the quarkus-camel github repo， the eventual fix for this was to manually instantiate the component with the configuration I needed.I was then asked to open an issue here. To me the biggest problem was that the information I needed wasn't available in the context it needed to be ie. the documentation on component configuration options. I'm not very familiar with either Camel or Quarkus. This information really needs to be clearer， since there are many new people like me coming in to these technologies.,There are no comments yet on this issue.
CAMEL-15490,Unassigned,2020-09-01T02:43:31+0000,1598913811， where 1598913811 is the epoch,[WARNING] The requested profile "enable-schemagen" could not be activated because it does not exist.[WARNING] The requested profile "apt" could not be activated because it does not exist.[ERROR] Failed to execute goal org.apache.maven.plugins:maven-javadoc-plugin:3.2.0:jar (attach-javadocs) on project camel-format-plugin: MavenReportException: Error while generating Javadoc: [ERROR] Exit code: 1 - javadoc: error - The code being documented uses modules but the packages defined in https://docs.oracle.com/javase/8/docs/api/ are in the unnamed module.[ERROR] [ERROR] Command line was: /home/jenkins/tools/hudson.model.JDK/jdk11-8/jdk-11.0.8+10/bin/javadoc @options @packages[ERROR] [ERROR] Refer to the generated Javadoc files in '/home/jenkins/workspace/fuse-8.0-base-jdk11@projects/camel/init/camel-format-plugin/target/apidocs' dir.[ERROR] -> [Help 1]org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-javadoc-plugin:3.2.0:jar (attach-javadocs) on project camel-format-plugin: MavenReportException: Error while generating Javadoc: Exit code: 1 - javadoc: error - The code being documented uses modules but the packages defined in https://docs.oracle.com/javase/8/docs/api/ are in the unnamed module.Command line was: /home/jenkins/tools/hudson.model.JDK/jdk11-8/jdk-11.0.8+10/bin/javadoc @options @packagesRefer to the generated Javadoc files in '/home/jenkins/workspace/fuse-8.0-base-jdk11@projects/camel/init/camel-format-plugin/target/apidocs' dir. at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:215) at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156) at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148) at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117) at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81) at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56) at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128) at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305) at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192) at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105) at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957) at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289) at org.apache.maven.cli.MavenCli.main (MavenCli.java:193) at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method) at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62) at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke (Method.java:566) at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282) at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225) at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406) at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)Caused by: org.apache.maven.plugin.MojoExecutionException: MavenReportException: Error while generating Javadoc: Exit code: 1 - javadoc: error - The code being documented uses modules but the packages defined in https://docs.oracle.com/javase/8/docs/api/ are in the unnamed module.Command line was: /home/jenkins/tools/hudson.model.JDK/jdk11-8/jdk-11.0.8+10/bin/javadoc @options @packagesRefer to the generated Javadoc files in '/home/jenkins/workspace/fuse-8.0-base-jdk11@projects/camel/init/camel-format-plugin/target/apidocs' dir. at org.apache.maven.plugins.javadoc.AbstractJavadocMojo.failOnError (AbstractJavadocMojo.java:6814) at org.apache.maven.plugins.javadoc.JavadocJar.doExecute (JavadocJar.java:203) at org.apache.maven.plugins.javadoc.AbstractJavadocMojo.execute (AbstractJavadocMojo.java:1935) at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137) at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210) at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156) at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148) at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117) at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81) at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56) at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128) at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305) at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192) at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105) at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957) at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289) at org.apache.maven.cli.MavenCli.main (MavenCli.java:193) at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method) at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62) at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke (Method.java:566) at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282) at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225) at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406) at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)Caused by: org.apache.maven.reporting.MavenReportException: Exit code: 1 - javadoc: error - The code being documented uses modules but the packages defined in https://docs.oracle.com/javase/8/docs/api/ are in the unnamed module.Command line was: /home/jenkins/tools/hudson.model.JDK/jdk11-8/jdk-11.0.8+10/bin/javadoc @options @packagesRefer to the generated Javadoc files in '/home/jenkins/workspace/fuse-8.0-base-jdk11@projects/camel/init/camel-format-plugin/target/apidocs' dir. at org.apache.maven.plugins.javadoc.AbstractJavadocMojo.doExecuteJavadocCommandLine (AbstractJavadocMojo.java:5861) at org.apache.maven.plugins.javadoc.AbstractJavadocMojo.executeJavadocCommandLine (AbstractJavadocMojo.java:5737) at org.apache.maven.plugins.javadoc.AbstractJavadocMojo.executeReport (AbstractJavadocMojo.java:2176) at org.apache.maven.plugins.javadoc.JavadocJar.doExecute (JavadocJar.java:199) at org.apache.maven.plugins.javadoc.AbstractJavadocMojo.execute (AbstractJavadocMojo.java:1935) at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137) at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:210) at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:156) at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:148) at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117) at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81) at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56) at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128) at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305) at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192) at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105) at org.apache.maven.cli.MavenCli.execute (MavenCli.java:957) at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:289) at org.apache.maven.cli.MavenCli.main (MavenCli.java:193) at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method) at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62) at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke (Method.java:566) at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282) at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225) at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406) at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)[ERROR] [ERROR] Re-run Maven using the -X switch to enable full debug logging.[ERROR] [ERROR] For more information about the errors and possible solutions， please read the following articles:[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException[ERROR] [ERROR] After correcting the problems， you can resume the build with the command[ERROR] mvn <args> -rf :camel-format-plugin[Pipeline] },There are no comments yet on this issue.
CAMEL-15489,Unassigned,2020-09-01T02:33:06.027Z,1598913186.027， where 1598913186.027 is the epoch,Camel-sql : JdbcAggregationRepository uses the underlying jdbcTemplate and calls the queryForMap operation and on the VERSION column it type case it to the LONG by Default without checking if the Java Data Type is different or not. With Oracle and Java， it get bbvy default converted into the BIGDECIMAL and hence type case doesnt work with Object， can only work with Primitive data types. Exception Stacktrace: java.lang.ClassCastException: java.math.BigDecimal cannot be cast to java.lang.Longjava.lang.ClassCastException: java.math.BigDecimal cannot be cast to java.lang.Long at org.apache.camel.processor.aggregate.jdbc.JdbcAggregationRepository$4.doInTransaction(JdbcAggregationRepository.java:334) at org.apache.camel.processor.aggregate.jdbc.JdbcAggregationRepository$4.doInTransaction(JdbcAggregationRepository.java:325) at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) at org.apache.camel.processor.aggregate.jdbc.JdbcAggregationRepository.get(JdbcAggregationRepository.java:325) at org.apache.camel.processor.aggregate.jdbc.JdbcAggregationRepository.get(JdbcAggregationRepository.java:319) at org.apache.camel.processor.aggregate.AggregateProcessor.doAggregation(AggregateProcessor.java:483) at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:406) at org.apache.camel.processor.aggregate.AggregateProcessor.doInOptimisticLock(AggregateProcessor.java:372) at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:362) at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$RedeliveryTask.doRun(RedeliveryErrorHandler.java:702) at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$RedeliveryTask.run(RedeliveryErrorHandler.java:616) at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:60) at org.apache.camel.processor.Pipeline.process(Pipeline.java:147) at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:286) at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83) at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:40) at org.apache.camel.component.jms.EndpointMessageListener.onMessage(EndpointMessageListener.java:128) at org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:736) at org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:696) at org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:674) at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:318) at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:257) at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1189) at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1179) at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:1076) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748),Hide Permalink Claus Ibsen added a comment - 01/Sep/20 08:27 Thanks for reporting， do you want to attempt to work on a PR with a fix? You can get the value as an Object and then check if its big decimal or not and then handle it accordingly. Show Claus Ibsen added a comment - 01/Sep/20 08:27 Thanks for reporting， do you want to attempt to work on a PR with a fix? You can get the value as an Object and then check if its big decimal or not and then handle it accordingly. Hide Permalink Chandrakant Hardahe added a comment - 02/Sep/20 13:10 - edited I'm working on it， Thanks!! Show Chandrakant Hardahe added a comment - 02/Sep/20 13:10 - edited I'm working on it， Thanks!! Hide Permalink Claus Ibsen added a comment - 03/Sep/20 04:23 Thanks for reporting and the PR Show Claus Ibsen added a comment - 03/Sep/20 04:23 Thanks for reporting and the PR
CAMEL-15488,Unassigned,2020-08-31T14:47:43+0000,1598870863， where 1598870863 is the epoch,We use 0.5.5， but 0.5.6 is released,There are no comments yet on this issue.
CAMEL-15487,Unassigned,2020-08-31T15:34:00+0000,1598873640， where 1598873640 is the epoch,Like you can do with regular routeshttps://camel.apache.org/manual/latest/lambda-route-builder.htmlIt should be possible to do for templates. As a RouteBuilder can also be a template then its possible， however its the work that registers this behind the scene that assume its a route and not a template.So maybe its better to have a LambdaRouteBuilderTemplate functional interface,Hide Permalink Claus Ibsen added a comment - 31/Aug/20 15:34 Okay we can get this to work as-is today， so all good @BindToRegistry public LambdaRouteBuilder myTemplate() { return rb -> rb.routeTemplate("myTemplate") .from("quartz:foo?cron=myCron") .log("${body}"); } Show Claus Ibsen added a comment - 31/Aug/20 15:34 Okay we can get this to work as-is today， so all good @BindToRegistry public LambdaRouteBuilder myTemplate() { return rb -> rb.routeTemplate("myTemplate") .from("quartz:foo?cron= myCron ") .log("${body}"); }
CAMEL-15486,Unassigned,2020-08-31T10:17:19+0000,1598854639， where 1598854639 is the epoch,As soon you add the dependency <dependency> <groupId>org.springframework.cloud</groupId> <artifactId>spring-cloud-contract-wiremock</artifactId> <version>2.2.3.RELEASE</version> <scope>test</scope> </dependency>to your project， the mocking of the endpoints breaks.I've created a simple example to reproduce the issue: https://github.com/erard22/spring-boot-camel-bug-demo @Componentpublic class SimpleCamelRoute extends RouteBuilder { @Override public void configure() { from("direct:processMessage") .to("file:output"); }}@CamelSpringBootTest@SpringBootTest(classes = DemoApplication.class)@ContextConfiguration@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_EACH_TEST_METHOD)@MockEndpoints("file:*")class SimpleCamelRouteTest { @Autowired private CamelContext camelContext; @Produce("direct:processMessage") private ProducerTemplate producer; @EndpointInject("mock://file:output") private MockEndpoint mockCamel; @Test void processMessage_successful() throws Exception { mockCamel.expectedBodiesReceived("foo"); producer.sendBodyAndHeaders("foo"， Collections.emptyMap()); mockCamel.assertIsSatisfied(); }}java.lang.AssertionError: mock://file:output Received message count. Expected: <1> but was: <0>Expected :<1>Actual :<0>,Hide Permalink Claus Ibsen added a comment - 31/Aug/20 10:17 Try without that dirties context and otherwise thinker with the test. And what does that spring dependency do， maybe it does something that causes the restart to fail and in line of this camel too Show Claus Ibsen added a comment - 31/Aug/20 10:17 Try without that dirties context and otherwise thinker with the test. And what does that spring dependency do， maybe it does something that causes the restart to fail and in line of this camel too Hide Permalink Michel Erard added a comment - 31/Aug/20 10:59 - edited Indeed， the line Starting CamelContext with name [camelContext] is missing in the output. I'll have a closer look. Show Michel Erard added a comment - 31/Aug/20 10:59 - edited Indeed， the line Starting CamelContext with name [camelContext] is missing in the output. I'll have a closer look. Hide Permalink Michel Erard added a comment - 07/Sep/20 11:48 - edited So， found out what the problem is. The Wiremock dependency has the class WireMockTestExecutionListener that does load the application context in the TestExecutionListener#beforeTestClass method that is executed earlier than the method CamelSpringBootExecutionListener#prepareTestInstance(). Means when this code is executed the camel context is already started: // we are customizing the Camel context with // CamelAnnotationsHandler so we do not want to start it // automatically， which would happen when SpringCamelContext // is added to Spring ApplicationContext， so we set the flag // not to start it just yet SpringCamelContext.setNoStart(true); System.setProperty("skipStartingCamelContext"， "true"); I see two solutions: Implement {{beforeTestClass }}as well and move this code there Check if the context is already started and stop it in that case. Show Michel Erard added a comment - 07/Sep/20 11:48 - edited So， found out what the problem is. The Wiremock dependency has the class WireMockTestExecutionListener that does load the application context in the TestExecutionListener#beforeTestClass method that is executed earlier than the method CamelSpringBootExecutionListener#prepareTestInstance() . Means when this code is executed the camel context is already started: // we are customizing the Camel context with // CamelAnnotationsHandler so we do not want to start it // automatically， which would happen when SpringCamelContext // is added to Spring ApplicationContext， so we set the flag // not to start it just yet SpringCamelContext.setNoStart( true ); System .setProperty( "skipStartingCamelContext" ， " true " ); I see two solutions: Implement {{beforeTestClass }}as well and move this code there Check if the context is already started and stop it in that case. Hide Permalink Claus Ibsen added a comment - 07/Sep/20 18:45 You are welcome to work on #1 and provide a PR against master branch， thanks. Show Claus Ibsen added a comment - 07/Sep/20 18:45 You are welcome to work on #1 and provide a PR against master branch， thanks. Hide Permalink Michel Erard added a comment - 09/Sep/20 08:03 will do Show Michel Erard added a comment - 09/Sep/20 08:03 will do Hide Permalink Claus Ibsen added a comment - 10/Sep/20 08:46 Thanks Michael for the reporting and the PR Show Claus Ibsen added a comment - 10/Sep/20 08:46 Thanks Michael for the reporting and the PR
CAMEL-15485,Ramu,2020-08-31T09:32:27+0000,1598851947， where 1598851947 is the epoch,,Hide Permalink Claus Ibsen added a comment - 31/Aug/20 09:32 See the camel-example-spring-boot which has been migrated to JUnit 5. A bunch of the other examples (which has unit tests) are on JUnit 4. We should migrate them to junit 5 and do something similar to as in camel-example-spring-boot does Show Claus Ibsen added a comment - 31/Aug/20 09:32 See the camel-example-spring-boot which has been migrated to JUnit 5. A bunch of the other examples (which has unit tests) are on JUnit 4. We should migrate them to junit 5 and do something similar to as in camel-example-spring-boot does
CAMEL-15484,Andrea Cosentino,2020-08-31T08:56:53+0000,1598849813， where 1598849813 is the epoch,On the documentation page of camel-mail there is an example how to process attachments of an email. But this example is outdated with camel 3 as there is no exchange.getIn().getAttachments() method anymore:https://camel.apache.org/components/latest/mail-component.html#_consuming_mails_with_attachment_sample,Hide Permalink Andrea Cosentino added a comment - 31/Aug/20 08:56 We can improve that by saying camel-attachments is needed. Show Andrea Cosentino added a comment - 31/Aug/20 08:56 We can improve that by saying camel-attachments is needed. Hide Permalink Claus Ibsen added a comment - 31/Aug/20 09:10 Yeah and you need to use extended exchange or something to get hold of attachments， see the unit tests of camel-mail (or the migration/upgrade guides) Show Claus Ibsen added a comment - 31/Aug/20 09:10 Yeah and you need to use extended exchange or something to get hold of attachments， see the unit tests of camel-mail (or the migration/upgrade guides) Hide Permalink Claus Ibsen added a comment - 31/Aug/20 09:35 Its documented nicely in the v2 -> v3 migration guide https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_attachments_api_on_message Show Claus Ibsen added a comment - 31/Aug/20 09:35 Its documented nicely in the v2 -> v3 migration guide https://camel.apache.org/manual/latest/camel-3-migration-guide.html#_attachments_api_on_message Hide Permalink Claus Ibsen added a comment - 31/Aug/20 10:19 PR is welcome https://camel.apache.org/manual/latest/contributing.html Show Claus Ibsen added a comment - 31/Aug/20 10:19 PR is welcome https://camel.apache.org/manual/latest/contributing.html Hide Permalink Uday Kiran added a comment - 07/Oct/20 03:50 Updated the Documentation and here is the PR for the same. https://github.com/apache/camel/pull/4375 Show Uday Kiran added a comment - 07/Oct/20 03:50 Updated the Documentation and here is the PR for the same. https://github.com/apache/camel/pull/4375 Hide Permalink Andrea Cosentino added a comment - 08/Oct/20 06:53 Thanks Uday Kiran Next time， if you select an already assigned issue， maybe ask before submitting a PR or working on that， to avoid overlapping work. I didn't start working on this， so not a problem. It's more a general thought. Show Andrea Cosentino added a comment - 08/Oct/20 06:53 Thanks Uday Kiran Next time， if you select an already assigned issue， maybe ask before submitting a PR or working on that， to avoid overlapping work. I didn't start working on this， so not a problem. It's more a general thought.
CAMEL-15483,Unassigned,2020-09-01T05:20:44.655Z,1598923244.655， where 1598923244.655 is the epoch,The camel bean docs needs to be little bit updated，https://camel.apache.org/components/latest/others/main.html#_defining_a_map_bean Bean reference is missing camel.beans.foo.company[name] = Acmecamel.beans.foo.company[country] = USAcamel.beans.foo.company[zip] = 92010 where 'foo' is the bean reference name.https://camel.apache.org/components/latest/others/main.html#_defining_a_list_beancamel.beans.foo.projects[0] = Camelcamel.beans.foo.projects[1] = Kafkacamel.beans.foo.projects[2] = Quarkus,Hide Permalink Claus Ibsen added a comment - 31/Aug/20 06:31 The examples are correct they define a map or list at the root level (no foo indirection). Show Claus Ibsen added a comment - 31/Aug/20 06:31 The examples are correct they define a map or list at the root level (no foo indirection). Hide Permalink Ganesh added a comment - 01/Sep/20 05:21 @Test public void testBindBeans() throws Exception { MyFoo myFoo = new MyFoo(); Main main = new Main(); main.configure().addRoutesBuilder(new MyRouteBuilder()); main.addProperty("camel.beans.company[name]"， "Acme"); main.addProperty("camel.beans.company[country]"， "USA"); main.addProperty("camel.beans.company[zip]"， "92010"); main.start(); CamelContext camelContext = main.getCamelContext(); assertNotNull(camelContext); Object mapObj = camelContext.getRegistry().lookupByName("company"); assertNotNull(mapObj); // But the registry has three maps with keys "company[name]"， "company[country]"， "company[zip]" Show Ganesh added a comment - 01/Sep/20 05:21 @Test public void testBindBeans() throws Exception { MyFoo myFoo = new MyFoo(); Main main = new Main(); main.configure().addRoutesBuilder( new MyRouteBuilder()); main.addProperty( "camel.beans.company[name]" ， "Acme" ); main.addProperty( "camel.beans.company[country]" ， "USA" ); main.addProperty( "camel.beans.company[zip]" ， "92010" ); main.start(); CamelContext camelContext = main.getCamelContext(); assertNotNull(camelContext); Object mapObj = camelContext.getRegistry().lookupByName( "company" ); assertNotNull(mapObj); // But the registry has three maps with keys "company[name]" ， "company[country]" ， "company[zip]"
CAMEL-15482,Matej Melko,2020-08-31T10:19:19+0000,1598854759， where 1598854759 is the epoch,If the example use camel-csv as dependency then it should be changed to camel-csv-starter， and the group id should be org.apache.camel.springboot,Hide Permalink Claus Ibsen added a comment - 31/Aug/20 10:19 PR is welcome https://camel.apache.org/manual/latest/contributing.html Show Claus Ibsen added a comment - 31/Aug/20 10:19 PR is welcome https://camel.apache.org/manual/latest/contributing.html Hide Permalink Matej Melko added a comment - 30/Sep/20 11:34 I can look at this Show Matej Melko added a comment - 30/Sep/20 11:34 I can look at this Hide Permalink Matej Melko added a comment - 01/Oct/20 15:40 PR: https://github.com/apache/camel-spring-boot-examples/pull/12 Show Matej Melko added a comment - 01/Oct/20 15:40 PR: https://github.com/apache/camel-spring-boot-examples/pull/12
CAMEL-15481,Claus Ibsen,2020-08-29T09:22:05+0000,1598678525， where 1598678525 is the epoch,If a node becomes master during startup up camel context itself， then the managed routes should be delayed started until camel is fully started， as you otherwise can have some race conditions and starting routes concurrently etc.,There are no comments yet on this issue.
CAMEL-15480,Unassigned,2020-08-30T10:44:36.628Z,1598769876.628， where 1598769876.628 is the epoch,I get an error when I want to get the property as indicated herehttps://camel.apache.org/components/2.x/languages/groovy-language.html through properties.resolve("test_name") (in JavaSctipt this works) ErrorNo signature of method: java.util.LinkedHashMap.resolve() is applicable for argument types: (java.lang.String) values: [test_name]Possible solutions: remove(java.lang.Object)， remove(java.lang.Object)， remove(java.lang.Object， java.lang.Object)， clone()at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:58)at org.codehaus.groovy.runtime.callsite.PojoMetaClassSite.call(PojoMetaClassSite.java:49)at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:48)at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:113)at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:125)at script1598627841751704336236.run(script1598627841751704336236.groovy:1) And I also found the same question on https://stackoverflow.com/questions/25472136/apache-camel-groovy-scripting/39465657. It turns out that there is an error in the documentation and you can't get a property in the groovy?,Hide Permalink Claus Ibsen added a comment - 28/Aug/20 17:41 Ah you need camel-script-groovy as its part of the java scripting api - try with that. Mind that JCR scripting is deprecated in 2.x and removed in 3.x Show Claus Ibsen added a comment - 28/Aug/20 17:41 Ah you need camel-script-groovy as its part of the java scripting api - try with that. Mind that JCR scripting is deprecated in 2.x and removed in 3.x Hide Permalink Claus Ibsen added a comment - 28/Aug/20 17:44 Removed the docs for 3.x as JCR scripting is removed. Show Claus Ibsen added a comment - 28/Aug/20 17:44 Removed the docs for 3.x as JCR scripting is removed. Hide Permalink Mikhail Lukyanov added a comment - 30/Aug/20 10:53 Claus Ibsen In a project， I have camel-groovy and camel-script I have the next route in Spring XML And when I run it I get the error described above in the issue. But this works fine. Do I need any other libraries besides camel-groovy and camel-script? camel-script-groovy， what is it? I don find any info about this library. Show Mikhail Lukyanov added a comment - 30/Aug/20 10:53 Claus Ibsen In a project， I have camel-groovy and camel-script I have the next route in Spring XML And when I run it I get the error described above in the issue. But this works fine. Do I need any other libraries besides camel-groovy and camel-script? camel-script-groovy， what is it? I don find any info about this library. Hide Permalink Claus Ibsen added a comment - 31/Aug/20 06:32 I am not sure what you are trying to do with your groovy script? What do you want to do? Show Claus Ibsen added a comment - 31/Aug/20 06:32 I am not sure what you are trying to do with your groovy script? What do you want to do? Hide Permalink Mikhail Lukyanov added a comment - 31/Aug/20 06:40 I want to take the value from the previously set property and write it as the body of the message. This works for javascript， but don't work for groovy， although such a possibility is indicated in the documentation https://camel.apache.org/components/2.x/languages/groovy-language.html (properties.resolve("test_name")). And this problem is not with me alone https://stackoverflow.com/questions/25472136/apache-camel-groovy-scripting/39465657 Show Mikhail Lukyanov added a comment - 31/Aug/20 06:40 I want to take the value from the previously set property and write it as the body of the message. This works for javascript， but don't work for groovy， although such a possibility is indicated in the documentation https://camel.apache.org/components/2.x/languages/groovy-language.html (properties.resolve("test_name")). And this problem is not with me alone https://stackoverflow.com/questions/25472136/apache-camel-groovy-scripting/39465657 Hide Permalink Claus Ibsen added a comment - 31/Aug/20 06:54 Just use <transform> <exchangeProperty propertyName="foo"/> </transform> Show Claus Ibsen added a comment - 31/Aug/20 06:54 Just use <transform> <exchangeProperty propertyName="foo"/> </transform> Hide Permalink Mikhail Lukyanov added a comment - 31/Aug/20 10:07 This is not exchangeProp， this is property from Properties component https://camel.apache.org/components/latest/properties-component.html. I would like to get this property exactly through the groovy script， for use in the further logic of this script. I cannot do this， does it not work as described? Show Mikhail Lukyanov added a comment - 31/Aug/20 10:07 This is not exchangeProp， this is property from Properties component https://camel.apache.org/components/latest/properties-component.html . I would like to get this property exactly through the groovy script， for use in the further logic of this script. I cannot do this， does it not work as described? Hide Permalink Claus Ibsen added a comment - 31/Aug/20 10:15 Maybe not， check the unit tests of camel 2.x in camel-groovy and camel-script-groovy. Show Claus Ibsen added a comment - 31/Aug/20 10:15 Maybe not， check the unit tests of camel 2.x in camel-groovy and camel-script-groovy.
CAMEL-15479,Claus Ibsen,2020-08-28T17:36:57+0000,1598621817， where 1598621817 is the epoch,Hey there，I'm in the process of piecing together a Camel application using learnings from your Spring boot examples. I already have a demo application which simply leaves the CamelContext open via Thread.sleep， so my plan was to add the spring-boot dependencies and implement a proper Service. However， I'm currently unsure about the purpose of two dependencies: spring-boot vs. camel-spring-boot-starter.The Camel documentation regarding spring-boot only ever mentions including the camel-spring-boot-starter dependency， however all of the linked examples rely on a root project which uses the spring-boot project as its parent.This leads me to the following questions， which I hope you can clarify for me: What is the role of spring-boot vs. camel-spring-boot-starter? If I want to set up a Maven project using these components would I use spring-boot as the parent and include camel-spring-boot-starter as a dependency? (as well as all the other camel dependencies I'd need to get the project running of course) There often seem to be two versions of the "same" dependency: A default one and a "...-starter" one (e.g. camel-jackson and camel-jackson-starter). In a Camel-Spring-Boot application would I only ever use the '...-starter' variants， or do these serve a different purpose?I hope my questions are clear and you can clarify a few things for me. Thank you again for your help! Kind Regards,Hide Permalink Claus Ibsen added a comment - 28/Aug/20 17:36 Only use the -starter JARs that is the way with spring boot. Its also documented here about a BOM you can import https://camel.apache.org/camel-spring-boot/latest/index.html Show Claus Ibsen added a comment - 28/Aug/20 17:36 Only use the -starter JARs that is the way with spring boot. Its also documented here about a BOM you can import https://camel.apache.org/camel-spring-boot/latest/index.html Hide Permalink Claus Ibsen added a comment - 28/Aug/20 17:58 Updated that doc page for Camel 3.5 Show Claus Ibsen added a comment - 28/Aug/20 17:58 Updated that doc page for Camel 3.5 Hide Permalink Franz J. Lanzendorfer added a comment - 29/Aug/20 13:49 Hi Claus! Thank your clearing things up for me. Turns out I also had some reading-up to do regarding Maven's dependency management. I'm looking forward to tinkering with Camel Spring Boot now. Kind Regards Show Franz J. Lanzendorfer added a comment - 29/Aug/20 13:49 Hi Claus! Thank your clearing things up for me. Turns out I also had some reading-up to do regarding Maven's dependency management. I'm looking forward to tinkering with Camel Spring Boot now. Kind Regards
CAMEL-15478,Claus Ibsen,2020-08-28T08:00:17+0000,1598587217， where 1598587217 is the epoch,For example twillio has 30+ api methods where each has its own set of configuration class with UriParam options.We should add label=xxx for those generated UriParam that tell what api they are from. This allows end users to better see this in the documentation， which we can then include all of these now as well， so there will be a lot more options to see in the docs.We could also add a new attribute to UriParam like apiMethod or qualifier or something to seperate this and make the doc generator build a table for each api separately. This may make it nicer.,Hide Permalink Claus Ibsen added a comment - 28/Aug/20 08:00 - edited And with this qualifier we can also make endpoint DSL know about this and make it like advanced() .. end() block as well. Show Claus Ibsen added a comment - 28/Aug/20 08:00 - edited And with this qualifier we can also make endpoint DSL know about this and make it like advanced() .. end() block as well. Hide Permalink Claus Ibsen added a comment - 01/Sep/20 09:23 - edited We should also add an option to the component json top structure to tell its an api component: api = true|false DONE Show Claus Ibsen added a comment - 01/Sep/20 09:23 - edited We should also add an option to the component json top structure to tell its an api component: api = true|false DONE Hide Permalink Claus Ibsen added a comment - 01/Sep/20 12:13 UriParams ( apiName = "xxx" ) DONE So we now know which configuration is for which api method. Show Claus Ibsen added a comment - 01/Sep/20 12:13 UriParams ( apiName = "xxx" ) DONE So we now know which configuration is for which api method. Hide Permalink Claus Ibsen added a comment - 01/Sep/20 12:51 - edited api component generator of enums generate them with UPPERCASE("human name here") kind. So it would be good for the json metadata tooling to handle this， so it can use the "human names" as its enums in the generated schema instead of the ugly uppercased. As workaround we have sometimes manually added enums="aaa，bbb，ccc" in the source code. But lets make the tooling smarter. See the api components such as twillio DONE Show Claus Ibsen added a comment - 01/Sep/20 12:51 - edited api component generator of enums generate them with UPPERCASE("human name here") kind. So it would be good for the json metadata tooling to handle this， so it can use the "human names" as its enums in the generated schema instead of the ugly uppercased. As workaround we have sometimes manually added enums="aaa，bbb，ccc" in the source code. But lets make the tooling smarter. See the api components such as twillio DONE Hide Permalink Claus Ibsen added a comment - 01/Sep/20 13:03 - edited Also I wonder if we can make the api component maven plugin able to generate methodNameEnum class from the methods that it has discovered on a proxy class - for example zendesk. Today we only have a string type， but there are maybe 100+ methods you can use via Zendesk java client. DONE Show Claus Ibsen added a comment - 01/Sep/20 13:03 - edited Also I wonder if we can make the api component maven plugin able to generate methodNameEnum class from the methods that it has discovered on a proxy class - for example zendesk. Today we only have a string type， but there are maybe 100+ methods you can use via Zendesk java client. DONE Hide Permalink Claus Ibsen added a comment - 01/Sep/20 13:58 - edited Include api method names in json metadata Include per api method a map of its configuration options per method DONE Show Claus Ibsen added a comment - 01/Sep/20 13:58 - edited Include api method names in json metadata Include per api method a map of its configuration options per method DONE Hide Permalink Claus Ibsen added a comment - 01/Sep/20 14:29 - edited We can then after this update the generated documentation to include tables for each api method with their unique configuration options. DONE Show Claus Ibsen added a comment - 01/Sep/20 14:29 - edited We can then after this update the generated documentation to include tables for each api method with their unique configuration options. DONE Hide Permalink Claus Ibsen added a comment - 02/Sep/20 07:11 - edited Make camel-catalog tooling able to validate and parse uris with this new information DONE Show Claus Ibsen added a comment - 02/Sep/20 07:11 - edited Make camel-catalog tooling able to validate and parse uris with this new information DONE Hide Permalink Claus Ibsen added a comment - 02/Sep/20 13:23 Look at what we can do for APIs like zendesk that has 230 methods but not grouped into different api sets， so its one long list of parameters all together. Maybe we can make some grouping pattern matching in the api component maven plugin to break this up a little. Show Claus Ibsen added a comment - 02/Sep/20 13:23 Look at what we can do for APIs like zendesk that has 230 methods but not grouped into different api sets， so its one long list of parameters all together. Maybe we can make some grouping pattern matching in the api component maven plugin to break this up a little. Hide Permalink Claus Ibsen added a comment - 02/Sep/20 15:36 - edited API method may have no additional options， but it should be listed in the json metadata DONE Show Claus Ibsen added a comment - 02/Sep/20 15:36 - edited API method may have no additional options， but it should be listed in the json metadata DONE Hide Permalink Claus Ibsen added a comment - 02/Sep/20 18:13 - edited Look at the description harvester in camel-braintree. We only have for a few options， and some have text cut and not the complete sentence. DONE Show Claus Ibsen added a comment - 02/Sep/20 18:13 - edited Look at the description harvester in camel-braintree. We only have for a few options， and some have text cut and not the complete sentence. DONE Hide Permalink Claus Ibsen added a comment - 03/Sep/20 05:03 - edited API components should gather information about methodName enums per api name and generate that detail in the json file， so we know what methods they support. DONE Show Claus Ibsen added a comment - 03/Sep/20 05:03 - edited API components should gather information about methodName enums per api name and generate that detail in the json file， so we know what methods they support. DONE Hide Permalink Claus Ibsen added a comment - 03/Sep/20 09:29 - edited Overloaded API methods， need to separate them more properly with api names， eg accept， accept_1， accept_2 etc DONE Show Claus Ibsen added a comment - 03/Sep/20 09:29 - edited Overloaded API methods， need to separate them more properly with api names， eg accept， accept_1， accept_2 etc DONE Hide Permalink Claus Ibsen added a comment - 04/Sep/20 08:03 - edited We can avoid the custom value -> enum converter and use the out of the box from camel-core as its been enhanced. DONE Show Claus Ibsen added a comment - 04/Sep/20 08:03 - edited We can avoid the custom value -> enum converter and use the out of the box from camel-core as its been enhanced. DONE Hide Permalink Claus Ibsen added a comment - 04/Sep/20 11:46 Add @ApiParams annotation for api based configuration classes DONE Show Claus Ibsen added a comment - 04/Sep/20 11:46 Add @ApiParams annotation for api based configuration classes DONE Hide Permalink Claus Ibsen added a comment - 04/Sep/20 11:54 - edited ApiMethodNames should be reverse aliased so they in the json and docs use the name the end user would know/use. For example twilio creator => create fetcher => fetch We have alias information now， so lets just present this in the docs. WONT FIX Show Claus Ibsen added a comment - 04/Sep/20 11:54 - edited ApiMethodNames should be reverse aliased so they in the json and docs use the name the end user would know/use. For example twilio creator => create fetcher => fetch We have alias information now， so lets just present this in the docs. WONT FIX Hide Permalink Claus Ibsen added a comment - 04/Sep/20 12:37 - edited Deprecate old javadoc parser and swap it out with the java source parser Then we can remove the javadoc plugin for apis as we then dont need that DONE Show Claus Ibsen added a comment - 04/Sep/20 12:37 - edited Deprecate old javadoc parser and swap it out with the java source parser Then we can remove the javadoc plugin for apis as we then dont need that DONE Hide Permalink Claus Ibsen added a comment - 06/Sep/20 10:58 - edited javasource parser should be able to start from inner class (eg foo$bar) which is done in camel-google-sheets DONE Show Claus Ibsen added a comment - 06/Sep/20 10:58 - edited javasource parser should be able to start from inner class (eg foo$bar) which is done in camel-google-sheets DONE Hide Permalink Claus Ibsen added a comment - 07/Sep/20 14:59 - edited Brilliant google - so we have 2 level of inner classes (that has the api methods) on a public class so we need to deal with this in the javaparser DONE Show Claus Ibsen added a comment - 07/Sep/20 14:59 - edited Brilliant google - so we have 2 level of inner classes (that has the api methods) on a public class so we need to deal with this in the javaparser DONE Hide Permalink Claus Ibsen added a comment - 08/Sep/20 12:21 - edited apiProperties needs to be in more layers apiName description + methodName + signature + description ++ properties So we have properties on the method level and high level description for api and method as well. Implement this for the source code generator of the configurer classes DONE Implement this for the component json generator DONE Show Claus Ibsen added a comment - 08/Sep/20 12:21 - edited apiProperties needs to be in more layers apiName description + methodName + signature + description ++ properties So we have properties on the method level and high level description for api and method as well. Implement this for the source code generator of the configurer classes DONE Implement this for the component json generator DONE Hide Permalink Claus Ibsen added a comment - 11/Sep/20 11:39 - edited Include more information in documentation (take from api-document.vm) DONE Show Claus Ibsen added a comment - 11/Sep/20 11:39 - edited Include more information in documentation (take from api-document.vm) DONE Hide Permalink Claus Ibsen added a comment - 15/Sep/20 08:23 Deprecate the file signature parser as it lacks features that we have with the java source parser DONE Show Claus Ibsen added a comment - 15/Sep/20 08:23 Deprecate the file signature parser as it lacks features that we have with the java source parser DONE Hide Permalink Claus Ibsen added a comment - 15/Sep/20 08:35 - edited camel-fhir and camel-olingo2， and camel-olingo4 should migrate to use javaSource parser instead of signatureFile DONE Show Claus Ibsen added a comment - 15/Sep/20 08:35 - edited camel-fhir and camel-olingo2， and camel-olingo4 should migrate to use javaSource parser instead of signatureFile DONE Hide Permalink Claus Ibsen added a comment - 15/Sep/20 14:32 Remove old javadoc and signature file parser as they become obsolete DONE Show Claus Ibsen added a comment - 15/Sep/20 14:32 Remove old javadoc and signature file parser as they become obsolete DONE Hide Permalink Claus Ibsen added a comment - 15/Sep/20 14:42 - edited twilio may loose java.net.Url in a generic parameter (its rather complex to parse parameter types when they have type variables and whatnot) DONE Show Claus Ibsen added a comment - 15/Sep/20 14:42 - edited twilio may loose java.net.Url in a generic parameter (its rather complex to parse parameter types when they have type variables and whatnot) DONE Hide Permalink Claus Ibsen added a comment - 16/Sep/20 04:59 Add docs in the 3.6 upgrade guide about this change and its affects Show Claus Ibsen added a comment - 16/Sep/20 04:59 Add docs in the 3.6 upgrade guide about this change and its affects Hide Permalink Claus Ibsen added a comment - 16/Sep/20 10:50 - edited Generate component documentation with information about api/methods and all their options. DONE Show Claus Ibsen added a comment - 16/Sep/20 10:50 - edited Generate component documentation with information about api/methods and all their options. DONE Hide Permalink Claus Ibsen added a comment - 16/Sep/20 10:50 - edited Add method signature to api methods which we can display in the documentation as it may help end users to understand the API better. DONE Show Claus Ibsen added a comment - 16/Sep/20 10:50 - edited Add method signature to api methods which we can display in the documentation as it may help end users to understand the API better. DONE Hide Permalink Claus Ibsen added a comment - 16/Sep/20 10:51 - edited apiName in component json should generate its enum in nice camel-dash style instead of UPPERCASE as today. DONE Show Claus Ibsen added a comment - 16/Sep/20 10:51 - edited apiName in component json should generate its enum in nice camel-dash style instead of UPPERCASE as today. DONE Hide Permalink Aurélien Pupier added a comment - 16/Sep/20 11:21 apiName in component json should generate its enum in nice camel-dash style instead of UPPERCASE as today. Just to be sure. it is impacting only newly added apiName in the Catalog? Will several writing supported UPPERCASE and camel-dash or only camel-dash? By the way， "nice" is relative. Coming from a Java world， I personally prefer Camel case than dashed notation. Show Aurélien Pupier added a comment - 16/Sep/20 11:21 apiName in component json should generate its enum in nice camel-dash style instead of UPPERCASE as today. Just to be sure. it is impacting only newly added apiName in the Catalog? Will several writing supported UPPERCASE and camel-dash or only camel-dash? By the way， "nice" is relative. Coming from a Java world， I personally prefer Camel case than dashed notation. Hide Permalink Claus Ibsen added a comment - 16/Sep/20 13:39 - edited Restructure json - apis{} - name - description + methods{} - name - description + signatures[] - apiProperties{} + apis{} + methods{} + properties{} - name - kind - ... To split general information about api and api methods vs properties DONE Show Claus Ibsen added a comment - 16/Sep/20 13:39 - edited Restructure json - apis{} - name - description + methods{} - name - description + signatures[] - apiProperties{} + apis{} + methods{} + properties{} - name - kind - ... To split general information about api and api methods vs properties DONE Hide Permalink Claus Ibsen added a comment - 16/Sep/20 15:04 - edited Add back vm template for adding api documentation since the api model restructure DONE Show Claus Ibsen added a comment - 16/Sep/20 15:04 - edited Add back vm template for adding api documentation since the api model restructure DONE Hide Permalink Claus Ibsen added a comment - 17/Sep/20 07:08 - edited Include aliases in component json files DONE Show Claus Ibsen added a comment - 17/Sep/20 07:08 - edited Include aliases in component json files DONE Hide Permalink Claus Ibsen added a comment - 17/Sep/20 14:22 - edited Leverage the nullableOption as a way of knowing if a parameter is required or not DONE Show Claus Ibsen added a comment - 17/Sep/20 14:22 - edited Leverage the nullableOption as a way of knowing if a parameter is required or not DONE
CAMEL-15477,Omar Al-Safi,2020-08-28T07:05:22+0000,1598583922， where 1598583922 is the epoch,Actually there is a mixing of unit tests， integration test and remote tests.,There are no comments yet on this issue.
CAMEL-15476,Andrea Cosentino,2020-08-28T00:08:30+0000,1598558910， where 1598558910 is the epoch,,There are no comments yet on this issue.
CAMEL-15475,Unassigned,2020-08-27T11:16:44+0000,1598512604， where 1598512604 is the epoch,Changing the HttpReturnDataNotInputStreamConvertableTest test case in order to remove the deprecate the usage of getOut causes the test to fail. Replacing it with getMessage() causes: `... <This is the response> but was: <>` Replacing it with getIn() causes: `... <This is the response> but was: <>` This test likely needs more comprehensive changes.,There are no comments yet on this issue.
CAMEL-15474,Claus Ibsen,2020-08-27T13:12:02+0000,1598519522， where 1598519522 is the epoch,api components are generated from some existing Java library via a maven plugin that generate source code and grabs method signatures from javadoc.We should include parameter description for these method signatures so we have documentation for them too.Currently we generate empty POJO classes for these method signatures.,Hide Permalink Claus Ibsen added a comment - 27/Aug/20 13:12 Unfortunately the api parser was written a long time ago with a mix of regexp and html javadoc parsing via stax so its a bit messy. Would been nicer to use javapoet or roaster to just parse the source code more reliablly. But the old code is being enhanced to incl parameter docs via the javadoc. Got some more details now for those big api components we didnt have before. But need to fiddle to make the javadoc parsing more robust as the javadoc has messy html text that barfs the parser. Show Claus Ibsen added a comment - 27/Aug/20 13:12 Unfortunately the api parser was written a long time ago with a mix of regexp and html javadoc parsing via stax so its a bit messy. Would been nicer to use javapoet or roaster to just parse the source code more reliablly. But the old code is being enhanced to incl parameter docs via the javadoc. Got some more details now for those big api components we didnt have before. But need to fiddle to make the javadoc parsing more robust as the javadoc has messy html text that barfs the parser.
CAMEL-15473,Andrea Cosentino,2020-08-27T10:07:18+0000,1598508438， where 1598508438 is the epoch,Hi! I'm currently looking through your examples for Camel Spring Boot integration and am having an issue with Camel SB Examples :: REST DSL and Swagger. As opposed to the other example where an API specification should be generated I can get this example to run， however when I try to access the API specification (http://localhost:8080/api/api-doc) I get the following exception:org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]{{ at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:47) ~[camel-api-3.4.3.jar:3.4.3]}}{{ at org.apache.camel.support.DefaultExchange.setException(DefaultExchange.java:425) ~[camel-support-3.4.3.jar:3.4.3]}}{{ at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:70) ~[camel-support-3.4.3.jar:3.4.3]}}{{ at org.apache.camel.component.rest.RestApiProducer.process(RestApiProducer.java:39) ~[camel-rest-3.4.3.jar:3.4.3]}}{{ at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:168) ~[camel-base-3.4.3.jar:3.4.3]}}{{ at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.4.3.jar:3.4.3]}}{{ at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.4.3.jar:3.4.3]}}{{ at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:60) ~[camel-base-3.4.3.jar:3.4.3]}}{{ at org.apache.camel.processor.Pipeline.process(Pipeline.java:147) ~[camel-base-3.4.3.jar:3.4.3]}}{{ at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:286) ~[camel-base-3.4.3.jar:3.4.3]}}{{ at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83) ~[camel-base-3.4.3.jar:3.4.3]}}{{ at org.apache.camel.support.AsyncProcessorSupport.process(AsyncProcessorSupport.java:40) ~[camel-support-3.4.3.jar:3.4.3]}}{{ at org.apache.camel.http.common.CamelServlet.doService(CamelServlet.java:214) ~[camel-http-common-3.4.3.jar:3.4.3]}}{{ at org.apache.camel.http.common.CamelServlet.service(CamelServlet.java:80) ~[camel-http-common-3.4.3.jar:3.4.3]}}{{ at javax.servlet.http.HttpServlet.service(HttpServlet.java:584) ~[jakarta.servlet-api-4.0.4.jar:4.0.4]}}{{ at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.2.8.RELEASE.jar:5.2.8.RELEASE]}}{{ at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.8.RELEASE.jar:5.2.8.RELEASE]}}{{ at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.2.8.RELEASE.jar:5.2.8.RELEASE]}}{{ at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.8.RELEASE.jar:5.2.8.RELEASE]}}{{ at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.2.8.RELEASE.jar:5.2.8.RELEASE]}}{{ at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) ~[spring-web-5.2.8.RELEASE.jar:5.2.8.RELEASE]}}{{ at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:132) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43) ~[undertow-core-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46) ~[undertow-core-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60) ~[undertow-core-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43) ~[undertow-core-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43) ~[undertow-core-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43) ~[undertow-core-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:269) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:78) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:133) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:130) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:249) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:78) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:99) ~[undertow-servlet-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.server.Connectors.executeRootHandler(Connectors.java:370) ~[undertow-core-2.1.3.Final.jar:2.1.3.Final]}}{{ at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:830) ~[undertow-core-2.1.3.Final.jar:2.1.3.Final]}}{{ at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35) ~[jboss-threads-3.1.0.Final.jar:3.1.0.Final]}}{{ at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:2019) ~[jboss-threads-3.1.0.Final.jar:3.1.0.Final]}}{{ at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1558) ~[jboss-threads-3.1.0.Final.jar:3.1.0.Final]}}{{ at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1449) ~[jboss-threads-3.1.0.Final.jar:3.1.0.Final]}}{{ at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]}}Caused by: java.lang.NoSuchMethodError: com.fasterxml.jackson.databind.introspect.AnnotatedMember.getType(Lcom/fasterxml/jackson/databind/type/TypeBindings;)Lcom/fasterxml/jackson/databind/JavaType;{{ at io.swagger.jackson.ModelResolver.resolve(ModelResolver.java:425) ~[swagger-core-1.5.24.jar:1.5.24]}}{{ at io.swagger.jackson.ModelResolver.resolve(ModelResolver.java:203) ~[swagger-core-1.5.24.jar:1.5.24]}}{{ at io.swagger.converter.ModelConverterContextImpl.resolve(ModelConverterContextImpl.java:103) ~[swagger-core-1.5.24.jar:1.5.24]}}{{ at io.swagger.converter.ModelConverters.read(ModelConverters.java:76) ~[swagger-core-1.5.24.jar:1.5.24]}}{{ at io.swagger.converter.ModelConverters.read(ModelConverters.java:67) ~[swagger-core-1.5.24.jar:1.5.24]}}{{ at org.apache.camel.swagger.RestModelConverters.readClass(RestModelConverters.java:33) ~[camel-swagger-java-3.4.3.jar:3.4.3]}}{{ at org.apache.camel.swagger.RestSwaggerReader.appendModels(RestSwaggerReader.java:755) ~[camel-swagger-java-3.4.3.jar:3.4.3]}}{{ at org.apache.camel.swagger.RestSwaggerReader.parse(RestSwaggerReader.java:225) ~[camel-swagger-java-3.4.3.jar:3.4.3]}}{{ at org.apache.camel.swagger.RestSwaggerReader.read(RestSwaggerReader.java:111) ~[camel-swagger-java-3.4.3.jar:3.4.3]}}{{ at org.apache.camel.swagger.RestSwaggerSupport.renderResourceListing(RestSwaggerSupport.java:240) ~[camel-swagger-java-3.4.3.jar:3.4.3]}}{{ at org.apache.camel.swagger.RestSwaggerProcessor.process(RestSwaggerProcessor.java:119) ~[camel-swagger-java-3.4.3.jar:3.4.3]}}{{ at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:67) ~[camel-support-3.4.3.jar:3.4.3]}}{{ ... 57 common frames omitted}} My research led me to the following issue threads:https://github.com/jersey/jersey/issues/3783 andhttps://github.com/FasterXML/jackson-databind/issues/1865 Is there any way for me to get this example running， maybe by importing another version of the Jackson dependency? Kind Regards，Franz J. Lanzendorfer,Hide Permalink Andrea Cosentino added a comment - 27/Aug/20 10:07 Swagger Java used under the hood is 1.5.24， which in turn is using Jackson 2.9， while 3.4.3 is based on Jackson 2.10， I'll try to have a look. Show Andrea Cosentino added a comment - 27/Aug/20 10:07 Swagger Java used under the hood is 1.5.24， which in turn is using Jackson 2.9， while 3.4.3 is based on Jackson 2.10， I'll try to have a look. Hide Permalink Andrea Cosentino added a comment - 27/Aug/20 16:15 https://github.com/apache/camel-spring-boot-examples/blob/master/camel-example-spring-boot-rest-swagger/pom.xml Please set the jackson dependencies in dependencyManagement as in this pom. It works on master and I'll backport on 3.4.x Show Andrea Cosentino added a comment - 27/Aug/20 16:15 https://github.com/apache/camel-spring-boot-examples/blob/master/camel-example-spring-boot-rest-swagger/pom.xml Please set the jackson dependencies in dependencyManagement as in this pom. It works on master and I'll backport on 3.4.x Hide Permalink Franz J. Lanzendorfer added a comment - 28/Aug/20 07:58 Hi Andrea， it works now with the new dependencies. Thank you for your help， have a great weekend! Show Franz J. Lanzendorfer added a comment - 28/Aug/20 07:58 Hi Andrea， it works now with the new dependencies. Thank you for your help， have a great weekend!
CAMEL-15472,Unassigned,2020-08-27T08:45:24+0000,1598503524， where 1598503524 is the epoch,Hi! I'm currently looking through your examples for Camel Spring Boot integration and am having an issue with getting Camel SB Examples :: REST DSL and OpenApi to run. As you may recall from https://issues.apache.org/jira/browse/CAMEL-15465 I've switched the version of the root project to 3.4.3 to get the examples to build. I can build the projects fine now. However when I try to run the mentioned example (via mvn spring-boot:run) I get the following exceptions at startup:{{org.apache.camel.FailedToStartRouteException: Failed to start route route1 because of null}}{{ {{ at org.apache.camel.impl.engine.RouteService.warmUp(RouteService.java:125) ~[camel-base-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.impl.engine.InternalRouteStartupManager.doWarmUpRoutes(InternalRouteStartupManager.java:263) ~[camel-base-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.impl.engine.InternalRouteStartupManager.safelyStartRouteServices(InternalRouteStartupManager.java:156) ~[camel-base-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartOrResumeRoutes(InternalRouteStartupManager.java:114) ~[camel-base-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.impl.engine.AbstractCamelContext.doStartCamel(AbstractCamelContext.java:2809) ~[camel-base-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.impl.engine.AbstractCamelContext.doStartContext(AbstractCamelContext.java:2657) ~[camel-base-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.impl.engine.AbstractCamelContext.doStart(AbstractCamelContext.java:2620) ~[camel-base-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.spring.boot.SpringBootCamelContext.doStart(SpringBootCamelContext.java:43) ~[camel-spring-boot-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[camel-api-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2452) ~[camel-base-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:121) ~[camel-spring-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:157) ~[camel-spring-3.4.3.jar:3.4.3]}}}}{{ {{ at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE]}}}}{{ {{ at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE]}}}}{{ {{ at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE]}}}}{{ {{ at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:404) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE]}}}}{{ {{ at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:361) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE]}}}}{{ {{ at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:898) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE]}}}}{{ {{ at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:554) ~[spring-context-5.2.8.RELEASE.jar:5.2.8.RELEASE]}}}}{{ {{ at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:143) ~[spring-boot-2.3.2.RELEASE.jar:2.3.2.RELEASE]}}}}{{ {{ at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758) ~[spring-boot-2.3.2.RELEASE.jar:2.3.2.RELEASE]}}}}{{ {{ at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750) ~[spring-boot-2.3.2.RELEASE.jar:2.3.2.RELEASE]}}}}{{ {{ at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~[spring-boot-2.3.2.RELEASE.jar:2.3.2.RELEASE]}}}}{{ {{ at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) ~[spring-boot-2.3.2.RELEASE.jar:2.3.2.RELEASE]}}}}{{ {{ at org.springframework.boot.SpringApplication.run(SpringApplication.java:1237) ~[spring-boot-2.3.2.RELEASE.jar:2.3.2.RELEASE]}}}}{{ {{ at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226) ~[spring-boot-2.3.2.RELEASE.jar:2.3.2.RELEASE]}}}}{{ {{ at org.apache.camel.example.springboot.Application.main(Application.java:30) ~[classes/:na]}}}}{{ Caused by: org.apache.camel.RuntimeCamelException: java.lang.IllegalStateException: Cannot find RestApiProcessorFactory in Registry or classpath (such as the camel-openapi-java component)}}{{ {{ at org.apache.camel.RuntimeCamelException.wrapRuntimeCamelException(RuntimeCamelException.java:52) ~[camel-api-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.support.ChildServiceSupport.start(ChildServiceSupport.java:67) ~[camel-support-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[camel-api-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:101) ~[camel-api-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.processor.channel.DefaultChannel.doStart(DefaultChannel.java:143) ~[camel-base-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[camel-api-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[camel-api-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:87) ~[camel-api-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.processor.Pipeline.doStart(Pipeline.java:154) ~[camel-base-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[camel-api-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[camel-api-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.support.processor.DelegateAsyncProcessor.doStart(DelegateAsyncProcessor.java:78) ~[camel-support-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[camel-api-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[camel-api-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.impl.engine.RouteService.startChildService(RouteService.java:334) ~[camel-base-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.impl.engine.RouteService.doWarmUp(RouteService.java:184) ~[camel-base-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.impl.engine.RouteService.warmUp(RouteService.java:123) ~[camel-base-3.4.3.jar:3.4.3]}}}}{{ {{ ... 26 common frames omitted}}}}{{ Caused by: java.lang.IllegalStateException: Cannot find RestApiProcessorFactory in Registry or classpath (such as the camel-openapi-java component)}}{{ {{ at org.apache.camel.component.rest.RestApiEndpoint.createProducer(RestApiEndpoint.java:207) ~[camel-rest-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.support.DefaultEndpoint.createAsyncProducer(DefaultEndpoint.java:200) ~[camel-support-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.processor.SendProcessor.doStart(SendProcessor.java:232) ~[camel-base-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[camel-api-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[camel-api-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:101) ~[camel-api-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler.doStart(RedeliveryErrorHandler.java:1459) ~[camel-base-3.4.3.jar:3.4.3]}}}}{{ {{ at org.apache.camel.support.ChildServiceSupport.start(ChildServiceSupport.java:60) ~[camel-support-3.4.3.jar:3.4.3]}}}}I tried adding a dependency to camel-openapi-java， but still get the same error. Maybe you could point me in the right direction here. Cheers!,Hide Permalink Franz J. Lanzendorfer added a comment - 27/Aug/20 08:45 Just a quick update after some more research: The camel-example-spring-boot-rest-swagger is working fine. Since these two projects are basically the same besides the dependency they use for the API specification code I'm assuming there's a possible bug in camel-openapi-java-starter itself? Show Franz J. Lanzendorfer added a comment - 27/Aug/20 08:45 Just a quick update after some more research: The camel-example-spring-boot-rest-swagger is working fine. Since these two projects are basically the same besides the dependency they use for the API specification code I'm assuming there's a possible bug in camel-openapi-java-starter itself?
CAMEL-15471,Andrea Cosentino,2020-08-27T07:00:57+0000,1598497257， where 1598497257 is the epoch,,There are no comments yet on this issue.
CAMEL-15470,Claus Ibsen,2020-08-27T07:00:05+0000,1598497205， where 1598497205 is the epoch,https://ci-builds.apache.org/job/Camel/job/Apache%20Camel/job/master/81/testReport/junit/org.apache.camel.component.crypto.cms/SpringComponentTest/execute/All the sign tests are failing.It seems to be related to doInit vs doStart optimizations.,There are no comments yet on this issue.
CAMEL-15469,Unassigned,2020-08-26T09:57:14+0000,1598421434， where 1598421434 is the epoch,,There are no comments yet on this issue.
CAMEL-15468,Unassigned,2020-08-26T09:40:49+0000,1598420449， where 1598420449 is the epoch,,There are no comments yet on this issue.
CAMEL-15467,Unassigned,2020-08-30T06:40:23+0000,1598755223， where 1598755223 is the epoch,They all fail on JDK14. Not sure what is the problem.,Hide Permalink Claus Ibsen added a comment - 30/Aug/20 06:40 The tests now pass Show Claus Ibsen added a comment - 30/Aug/20 06:40 The tests now pass
CAMEL-15466,Jean-Baptiste Onofré,2020-08-26T08:33:44+0000,1598416424， where 1598416424 is the epoch,,There are no comments yet on this issue.
CAMEL-15465,Unassigned,2020-08-26T07:54:26+0000,1598414066， where 1598414066 is the epoch,Hi! I checked out your spring boot examples from https://github.com/apache/camel-spring-boot-examples/ and tried to run "camel-example-spring-boot". However， when I try to run or build it I get a Maven error.C:\...\camel-spring-boot-examples\camel-example-spring-boot>mvn spring-boot:run[INFO] Scanning for projects...[ERROR] [ERROR] Some problems were encountered while processing the POMs:[FATAL] Non-resolvable parent POM for org.apache.camel.springboot.example:examples:3.5.0-SNAPSHOT: Could not find artifact org.apache.camel.springboot:spring-boot:pom:3.5.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ org.apache.camel.springboot.example:examples:3.5.0-SNAPSHOT， C:\Adesso\examples\camel-spring-boot-examples\pom.xml， line 24， column 13I haven't made any changes to the project， so I assume this is some kind of configuration error? I'd be glad if you could point me in the right direction of what's going wrong here.Cheers!,Hide Permalink Andrea Cosentino added a comment - 26/Aug/20 07:54 First run a full build of the repo Show Andrea Cosentino added a comment - 26/Aug/20 07:54 First run a full build of the repo Hide Permalink Franz J. Lanzendorfer added a comment - 26/Aug/20 11:31 Hi Andrea， thank you for your quick feedback! I tried building via Maven (my local version is 3.6.3) and running the "mvnw.cmd"-script (not sure what that's supposed to do honestly) and I run into the same errors. Here are the console outputs: C:\...\camel-spring-boot-examples>mvn [INFO] Scanning for projects... [ERROR] [ERROR] Some problems were encountered while processing the POMs: [FATAL] Non-resolvable parent POM for org.apache.camel.springboot.example:examples:3.5.0-SNAPSHOT: Could not find artifact org.apache.camel.springboot:spring-boot:pom:3.5.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 24， column 13 {{ @}} [ERROR] The build could not read 1 project -> [Help 1] [ERROR] [ERROR] The project org.apache.camel.springboot.example:examples:3.5.0-SNAPSHOT (C:\...\camel-spring-boot-examples\pom.xml) has 1 error [ERROR] Non-resolvable parent POM for org.apache.camel.springboot.example:examples:3.5.0-SNAPSHOT: Could not find artifact org.apache.camel.springboot:spring-boot:pom:3.5.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 24， column 13 -> [Help 2] [ERROR] [ERROR] To see the full stack trace of the errors， re-run Maven with the -e switch. [ERROR] Re-run Maven using the -X switch to enable full debug logging. [ERROR] [ERROR] For more information about the errors and possible solutions， please read the following articles: [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException [ERROR] [Help 2] http://cwiki.apache.org/confluence/display/MAVEN/UnresolvableModelException C:\...\camel-spring-boot-examples>mvnw.cmd [INFO] Scanning for projects... [ERROR] [ERROR] Some problems were encountered while processing the POMs: [FATAL] Non-resolvable parent POM for org.apache.camel.springboot.example:examples:3.5.0-SNAPSHOT: Could not find artifact org.apache.camel.springboot:spring-boot:pom:3.5.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 24， column 13 {{ @}} [ERROR] The build could not read 1 project -> [Help 1] [ERROR] [ERROR] The project org.apache.camel.springboot.example:examples:3.5.0-SNAPSHOT (C:\...\camel-spring-boot-examples\pom.xml) has 1 error [ERROR] Non-resolvable parent POM for org.apache.camel.springboot.example:examples:3.5.0-SNAPSHOT: Could not find artifact org.apache.camel.springboot:spring-boot:pom:3.5.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 24， column 13 -> [Help 2] [ERROR] [ERROR] To see the full stack trace of the errors， re-run Maven with the -e switch. [ERROR] Re-run Maven using the -X switch to enable full debug logging. [ERROR] [ERROR] For more information about the errors and possible solutions， please read the following articles: [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException [ERROR] [Help 2] http://cwiki.apache.org/confluence/display/MAVEN/UnresolvableModelException Show Franz J. Lanzendorfer added a comment - 26/Aug/20 11:31 Hi Andrea， thank you for your quick feedback! I tried building via Maven (my local version is 3.6.3) and running the "mvnw.cmd"-script (not sure what that's supposed to do honestly) and I run into the same errors. Here are the console outputs: C:\...\camel-spring-boot-examples>mvn [INFO] Scanning for projects... [ERROR] [ERROR] Some problems were encountered while processing the POMs: [FATAL] Non-resolvable parent POM for org.apache.camel.springboot.example:examples:3.5.0-SNAPSHOT: Could not find artifact org.apache.camel.springboot:spring-boot:pom:3.5.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 24， column 13 {{ @}} [ERROR] The build could not read 1 project -> [Help 1] [ERROR] [ERROR] The project org.apache.camel.springboot.example:examples:3.5.0-SNAPSHOT (C:\...\camel-spring-boot-examples\pom.xml) has 1 error [ERROR] Non-resolvable parent POM for org.apache.camel.springboot.example:examples:3.5.0-SNAPSHOT: Could not find artifact org.apache.camel.springboot:spring-boot:pom:3.5.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 24， column 13 -> [Help 2] [ERROR] [ERROR] To see the full stack trace of the errors， re-run Maven with the -e switch. [ERROR] Re-run Maven using the -X switch to enable full debug logging. [ERROR] [ERROR] For more information about the errors and possible solutions， please read the following articles: [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException [ERROR] [Help 2] http://cwiki.apache.org/confluence/display/MAVEN/UnresolvableModelException C:\...\camel-spring-boot-examples>mvnw.cmd [INFO] Scanning for projects... [ERROR] [ERROR] Some problems were encountered while processing the POMs: [FATAL] Non-resolvable parent POM for org.apache.camel.springboot.example:examples:3.5.0-SNAPSHOT: Could not find artifact org.apache.camel.springboot:spring-boot:pom:3.5.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 24， column 13 {{ @}} [ERROR] The build could not read 1 project -> [Help 1] [ERROR] [ERROR] The project org.apache.camel.springboot.example:examples:3.5.0-SNAPSHOT (C:\...\camel-spring-boot-examples\pom.xml) has 1 error [ERROR] Non-resolvable parent POM for org.apache.camel.springboot.example:examples:3.5.0-SNAPSHOT: Could not find artifact org.apache.camel.springboot:spring-boot:pom:3.5.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 24， column 13 -> [Help 2] [ERROR] [ERROR] To see the full stack trace of the errors， re-run Maven with the -e switch. [ERROR] Re-run Maven using the -X switch to enable full debug logging. [ERROR] [ERROR] For more information about the errors and possible solutions， please read the following articles: [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException [ERROR] [Help 2] http://cwiki.apache.org/confluence/display/MAVEN/UnresolvableModelException Hide Permalink Claus Ibsen added a comment - 26/Aug/20 11:36 - edited You can type mvn clean install -P fastinstall from the root folder. Or you can checkout a released version instead of SNAPSHOT https://github.com/apache/camel-spring-boot/tree/camel-spring-boot-3.4.3 Show Claus Ibsen added a comment - 26/Aug/20 11:36 - edited You can type mvn clean install -P fastinstall from the root folder. Or you can checkout a released version instead of SNAPSHOT https://github.com/apache/camel-spring-boot/tree/camel-spring-boot-3.4.3 Hide Permalink Franz J. Lanzendorfer added a comment - 26/Aug/20 12:01 Hi Claus， I switched the version of org.apache.camel.springboot:spring-boot to 3.4.3 in the root project and now it works. Thank you both for your quick feedback! With this I consider this issue as resolved. Kind Regards Show Franz J. Lanzendorfer added a comment - 26/Aug/20 12:01 Hi Claus， I switched the version of org.apache.camel.springboot:spring-boot to 3.4.3 in the root project and now it works. Thank you both for your quick feedback! With this I consider this issue as resolved. Kind Regards Hide Permalink Lou Soto added a comment - 06/Oct/20 00:44 - edited Hi Claus， I just cloned this project but cannot successfully build， it any ideas? I'm getting this error， tried: mvn clean install -P fastinstall， does not work. Thanks! The project org.apache.camel.springboot.example:examples:3.6.0-SNAPSHOT (/Users/lous-laptop/Documents/Jhipster-book/camel-spring-boot-examples/pom.xml) has 1 error [ERROR] Non-resolvable parent POM for org.apache.camel.springboot.example:examples:3.6.0-SNAPSHOT: Could not find artifact org.apache.camel.springboot:spring-boot:pom:3.6.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 24， column 13 -> Show Lou Soto added a comment - 06/Oct/20 00:44 - edited Hi Claus， I just cloned this project but cannot successfully build， it any ideas? I'm getting this error， tried: mvn clean install -P fastinstall， does not work. Thanks! The project org.apache.camel.springboot.example:examples:3.6.0-SNAPSHOT (/Users/lous-laptop/Documents/Jhipster-book/camel-spring-boot-examples/pom.xml) has 1 error [ERROR] Non-resolvable parent POM for org.apache.camel.springboot.example:examples:3.6.0-SNAPSHOT: Could not find artifact org.apache.camel.springboot:spring-boot:pom:3.6.0-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 24， column 13 ->
CAMEL-15464,Unassigned,2020-08-25T20:37:06+0000,1598373426， where 1598373426 is the epoch,https://ci-builds.apache.org/job/Camel/job/Camel%20JDK11/job/master/81/#showFailuresLink,There are no comments yet on this issue.
CAMEL-15463,Claus Ibsen,2020-08-25T12:22:47+0000,1598343767， where 1598343767 is the epoch,Not sure what the usual process is， but the CXF 3.4.0 upgrade pulls in Jakarta JAXB 2.3.3 and the current camel version is set to 2.3.2. So I assume these should be aligned.,Hide Permalink Claus Ibsen added a comment - 25/Aug/20 12:22 Yeah its actually a glashfish jaxb as well that needs to be upgraded from 2.3.2 to 2.3.3 also Show Claus Ibsen added a comment - 25/Aug/20 12:22 Yeah its actually a glashfish jaxb as well that needs to be upgraded from 2.3.2 to 2.3.3 also
CAMEL-15462,Unassigned,2020-08-25T08:30:45+0000,1598329845， where 1598329845 is the epoch,,Hide Permalink Claus Ibsen added a comment - 25/Aug/20 08:30 [INFO] Discovered 2 routes [INFO] Route coverage summary: File: spring/camelContext.xml Route: save_data Line # Count Route ------ ----- ----- 65 3 from 68 3 log 70 3 convertBodyTo 71 3 doTry 73 3 to 75 3 to 78 2 log 80 2 log 81 2 setBody 84 0 doCatch 88 1 log 89 1 setBody Coverage: 11 out of 12 (91.7%) Show Claus Ibsen added a comment - 25/Aug/20 08:30 [INFO] Discovered 2 routes [INFO] Route coverage summary: File: spring/camelContext.xml Route: save_data Line # Count Route ------ ----- ----- 65 3 from 68 3 log 70 3 convertBodyTo 71 3 doTry 73 3 to 75 3 to 78 2 log 80 2 log 81 2 setBody 84 0 doCatch 88 1 log 89 1 setBody Coverage: 11 out of 12 (91.7%)
CAMEL-15461,Jean-Baptiste Onofré,2020-08-25T08:03:53+0000,1598328233， where 1598328233 is the epoch,Jedis bundle 3.1.0_1 doesn't contain the org.slf4j package import. I fixed that in jedis 3.3.0_2 bundle.,Hide Permalink Claus Ibsen added a comment - 25/Aug/20 08:03 You dont need to create JIRAs per bundle upgrade. Show Claus Ibsen added a comment - 25/Aug/20 08:03 You dont need to create JIRAs per bundle upgrade.
CAMEL-15460,Unassigned,2020-08-25T07:25:18+0000,1598325918， where 1598325918 is the epoch,This is a follow-up of issue CAMEL-15299.During reconnect currently the expectation is that NOOP command throws an exception in case the client is not connected to the server anymore， but it might also just return false when not successful. During debugging I found that there is still a pending command (eg. retrieve of a file) which should be read before the NOOP， otherwise the NOOP response is not read correctly.Will prepare a PR.,Hide Permalink Claus Ibsen added a comment - 25/Aug/20 07:25 Sounds good Show Claus Ibsen added a comment - 25/Aug/20 07:25 Sounds good Hide Permalink Claus Ibsen added a comment - 25/Aug/20 11:41 Thanks for reporting and the PR Show Claus Ibsen added a comment - 25/Aug/20 11:41 Thanks for reporting and the PR Hide Permalink Claus Ibsen added a comment - 26/Aug/20 05:17 Had to revert some parts of this as it breaks the tests of camel-ftp. Please next time run all tests of camel-ftp before providing PR. Show Claus Ibsen added a comment - 26/Aug/20 05:17 Had to revert some parts of this as it breaks the tests of camel-ftp. Please next time run all tests of camel-ftp before providing PR.
CAMEL-15459,Freeman Yue Fang,2020-08-24T23:01:38+0000,1598295698， where 1598295698 is the epoch,,There are no comments yet on this issue.
CAMEL-15458,Claus Ibsen,2020-08-24T11:57:23+0000,1598255843， where 1598255843 is the epoch,Seehttps://camel.apache.org/components/latest/vshttps://camel.apache.org/camel-spring-boot/latest/list.htmlThe table in spring boot should be like in camel-core,There are no comments yet on this issue.
CAMEL-15457,Claus Ibsen,2020-08-24T09:55:11+0000,1598248511， where 1598248511 is the epoch,A recent [comit|https://github.com/apache/camel/pull/3976] causes NullPointer exceptions in some circumstances， though they are caught and logged as "WARN".Output from the test testCamelRouteEvents() in MicrometerExchangeEventNotifierTest in master branch:11:44:32.741 [main] WARN org.apache.camel.support.EventHelper - Error notifying event ID-devbox-1598261669122-0-1 exchange Exchange[ID-devbox-1598261669122-0-1] sending to: direct://in. This exception will be ignored.11:44:32.741 [main] WARN org.apache.camel.support.EventHelper - Error notifying event ID-devbox-1598261669122-0-1 exchange Exchange[ID-devbox-1598261669122-0-1] sending to: direct://in. This exception will be ignored.java.lang.NullPointerException: null at java.util.Objects.requireNonNull(Objects.java:221) ~[?:?] at io.micrometer.core.instrument.ImmutableTag.<init>(ImmutableTag.java:35) ~[micrometer-core-1.5.4.jar:1.5.4] at io.micrometer.core.instrument.Tag.of(Tag.java:29) ~[micrometer-core-1.5.4.jar:1.5.4] at io.micrometer.core.instrument.Tags.of(Tags.java:254) ~[micrometer-core-1.5.4.jar:1.5.4] at org.apache.camel.component.micrometer.eventnotifier.MicrometerExchangeEventNotifierNamingStrategy.getInflightExchangesTags(MicrometerExchangeEventNotifierNamingStrategy.java:58) ~[classes/:?] at org.apache.camel.component.micrometer.eventnotifier.MicrometerExchangeEventNotifier.handleExchangeEvent(MicrometerExchangeEventNotifier.java:80) ~[classes/:?] at org.apache.camel.component.micrometer.eventnotifier.MicrometerExchangeEventNotifier.notify(MicrometerExchangeEventNotifier.java:65) ~[classes/:?] at org.apache.camel.support.EventHelper.doNotifyEvent(EventHelper.java:1236) ~[classes/:?] at org.apache.camel.support.EventHelper.notifyExchangeSending(EventHelper.java:700) ~[classes/:?]The problem is that the MicrometerExchangeEventNotifier tries to build/update a metric on inflight exchanges in a route based on an ExchangeEvent with no associated fromRoute/fromRouteId. Events such as "ExchangeSendingEvent"， as is created in the test， is an example of such an ExchangeEvent.,Hide Permalink Claus Ibsen added a comment - 24/Aug/20 09:55 What version of Camel do you use? Show Claus Ibsen added a comment - 24/Aug/20 09:55 What version of Camel do you use? Hide Permalink Claus Ibsen added a comment - 24/Aug/20 10:02 Thanks found out its only related to upcoming 3.5 release. Show Claus Ibsen added a comment - 24/Aug/20 10:02 Thanks found out its only related to upcoming 3.5 release. Hide Permalink Espen Andreassen added a comment - 24/Aug/20 14:11 Hi! I see you implemented a fix and resolved the issue， thank you for the prompt effort! Unfortionatly， the fix is somewhat incompatible with prometheus it seems: Prometheus requires that all meters with the same name have the same set of tag keys. There is already an existing meter named 'CamelExchangesInflight' containing tag keys [camelContext， serviceName]. The meter you are attempting to register has keys [camelContext， routeId， serviceName]. My suggestion is to add/move the check you introduced in the MicrometerExchangeEventNotifierNamingStrategy to the method handleExchangeEvent() in MicrometerExchangeEventNotifier. That way we don't create the inflight metric at all in cases where no fromRouteId() can be extracted， which isn't really usefull in my opinion any way. Could be an idea to check for the precense of fromEndpoint as well， as this can also potentially return null. Something like this: private void handleExchangeEvent(ExchangeEvent exchangeEvent) { Exchange exchange = exchangeEvent.getExchange(); if (exchange.getFromRouteId() != null && exchange.getFromEndpoint() != null) { String name = namingStrategy.getInflightExchangesName(exchange， exchange.getFromEndpoint()); Tags tags = namingStrategy.getInflightExchangesTags(exchangeEvent， exchange.getFromEndpoint()); Gauge.builder(name， () -> getInflightExchangesInRoute(exchangeEvent)) .tags(tags) .register(getMeterRegistry()); } } Show Espen Andreassen added a comment - 24/Aug/20 14:11 Hi! I see you implemented a fix and resolved the issue， thank you for the prompt effort! Unfortionatly， the fix is somewhat incompatible with prometheus it seems: Prometheus requires that all meters with the same name have the same set of tag keys. There is already an existing meter named 'CamelExchangesInflight' containing tag keys [camelContext， serviceName]. The meter you are attempting to register has keys [camelContext， routeId， serviceName]. My suggestion is to add/move the check you introduced in the MicrometerExchangeEventNotifierNamingStrategy to the method handleExchangeEvent() in MicrometerExchangeEventNotifier. That way we don't create the inflight metric at all in cases where no fromRouteId() can be extracted， which isn't really usefull in my opinion any way. Could be an idea to check for the precense of fromEndpoint as well， as this can also potentially return null. Something like this: private void handleExchangeEvent(ExchangeEvent exchangeEvent) { Exchange exchange = exchangeEvent.getExchange(); if (exchange.getFromRouteId() != null && exchange.getFromEndpoint() != null ) { String name = namingStrategy.getInflightExchangesName(exchange， exchange.getFromEndpoint()); Tags tags = namingStrategy.getInflightExchangesTags(exchangeEvent， exchange.getFromEndpoint()); Gauge.builder(name， () -> getInflightExchangesInRoute(exchangeEvent)) .tags(tags) .register(getMeterRegistry()); } } Hide Permalink Claus Ibsen added a comment - 24/Aug/20 14:14 Can you provide a PR with your suggested fix thanks Show Claus Ibsen added a comment - 24/Aug/20 14:14 Can you provide a PR with your suggested fix thanks Hide Permalink Espen Andreassen added a comment - 24/Aug/20 14:18 Yes， I will provide no later than by the end of tomorrow. Show Espen Andreassen added a comment - 24/Aug/20 14:18 Yes， I will provide no later than by the end of tomorrow. Hide Permalink Claus Ibsen added a comment - 24/Aug/20 17:43 Thanks for the fast PR with the fix Show Claus Ibsen added a comment - 24/Aug/20 17:43 Thanks for the fast PR with the fix
CAMEL-15456,Unassigned,2020-08-24T08:59:45+0000,1598245185， where 1598245185 is the epoch,https://github.com/apache/camel/blob/2f8f4c20675a4545fec5c8bcbdd1f0d88b15423f/core/camel-core-engine/src/generated/resources/org/apache/camel/model/dataformat/base64.json#L16https://github.com/apache/camel/blob/2f8f4c20675a4545fec5c8bcbdd1f0d88b15423f/catalog/camel-catalog/src/generated/resources/org/apache/camel/catalog/models/base64.json#L16in description it is mentioned that "CRLF" is the default value but there is no default value provided.nota: as it is special characters not sure how it should be written in the json catalog,Hide Permalink Claus Ibsen added a comment - 24/Aug/20 08:59 This is actually okay as-is as we just mention it in the docs， we dont want to have that special character as json default value. Show Claus Ibsen added a comment - 24/Aug/20 08:59 This is actually okay as-is as we just mention it in the docs， we dont want to have that special character as json default value. Hide Permalink Aurélien Pupier added a comment - 24/Aug/20 09:03 this doesn't sound ok as-is for current Eclipse Fuse Tooling state. it would require a specific handling without including it in the catalog. See FUSETOOLS-3362 are there other places where there is this misleading behavior in the catalog? Show Aurélien Pupier added a comment - 24/Aug/20 09:03 this doesn't sound ok as-is for current Eclipse Fuse Tooling state. it would require a specific handling without including it in the catalog. See FUSETOOLS-3362 are there other places where there is this misleading behavior in the catalog? Hide Permalink Claus Ibsen added a comment - 24/Aug/20 09:07 Just "see it" as an option that did not mention what it uses default in the description. Then its like any regular option. Show Claus Ibsen added a comment - 24/Aug/20 09:07 Just "see it" as an option that did not mention what it uses default in the description. Then its like any regular option. Hide Permalink Aurélien Pupier added a comment - 24/Aug/20 09:11 for other options， the default value is displayed directly in the field. The default options are also cleaned from the source xml. In this case， it is the empty string which is cleared which is causing the confusion to the user (and maybe forbidding him/her a very specific use case) Show Aurélien Pupier added a comment - 24/Aug/20 09:11 for other options， the default value is displayed directly in the field. The default options are also cleaned from the source xml. In this case， it is the empty string which is cleared which is causing the confusion to the user (and maybe forbidding him/her a very specific use case)
CAMEL-15455,Claus Ibsen,2020-08-24T15:17:18+0000,1598267838， where 1598267838 is the epoch,Expressions in parameters are destroyed by url-encoding during url creation in AbstractEndpointBuilder (using little non-sensical example to make reproduction setup easier).For example:.toD(seda("someName").size("${header.size}"))will be translated by AbstractEndpointBuilder#computeUri (which uses URISupport#createQueryString) toseda://someName?size=%24%7Bheader.size%7DThis will， of course， throw exception on endpoint creation.For some reason， thrown exception is url-decoded， so parameter names will look OK， even when they are broken (this makes the error more difficult to spot)...java.lang.String to the required type: int with value ${header.size} due to org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: java.lang.Integer with value ${header.size} due to java.lang.NumberFormatException: For input string: "${header.size}"...Enclosing expressions in RAW(..)， fixes the issue， it is however quite suboptimal.Following workaround will work:.toD(seda("someName").size("RAW(${header.size})")),Hide Permalink Claus Ibsen added a comment - 24/Aug/20 15:17 So this is more about toD being dynamic and you are using simple expressions for those parameters. A regular to would not accept ${header.xxx} in the size parameter. And therefore we may not have noticed this before. Show Claus Ibsen added a comment - 24/Aug/20 15:17 So this is more about toD being dynamic and you are using simple expressions for those parameters. A regular to would not accept ${header.xxx} in the size parameter. And therefore we may not have noticed this before. Hide Permalink Vladimir Dobos added a comment - 24/Aug/20 17:09 Yes， it is about using expression in parameters in toD (originally noticed this because I have requestTimeout in jms-component dependant on few runtime parameters) From what I found in my limited debugging time， when getUrl() is called on AbstractEndpointBuilder， url query parameters are assembled url-encoded (default behaviour of URISupport#createQueryString)， which then makes SendDynamicProcessor not evaluate the parameter values as expressions when creating/retrieving dynamic endpoint. When passing plain string in toD， it is not be url-encoded before expressions are evaluated. Show Vladimir Dobos added a comment - 24/Aug/20 17:09 Yes， it is about using expression in parameters in toD (originally noticed this because I have requestTimeout in jms-component dependant on few runtime parameters) From what I found in my limited debugging time， when getUrl() is called on AbstractEndpointBuilder， url query parameters are assembled url-encoded (default behaviour of URISupport#createQueryString)， which then makes SendDynamicProcessor not evaluate the parameter values as expressions when creating/retrieving dynamic endpoint. When passing plain string in toD， it is not be url-encoded before expressions are evaluated. Hide Permalink Claus Ibsen added a comment - 24/Aug/20 17:40 Yeah that is a good observation， so we may want to allow the endpoint dsl to build with encoded and non encoding depending on the EIP pattern. As others would depend on current behaviour. And then check if those options are using simple expressions， eg ${ } or $simple{ } style which is what you used in your example. Show Claus Ibsen added a comment - 24/Aug/20 17:40 Yeah that is a good observation， so we may want to allow the endpoint dsl to build with encoded and non encoding depending on the EIP pattern. As others would depend on current behaviour. And then check if those options are using simple expressions， eg ${ } or $simple{ } style which is what you used in your example.
CAMEL-15454,Claus Ibsen,2020-08-24T07:39:41+0000,1598240381， where 1598240381 is the epoch,,There are no comments yet on this issue.
CAMEL-15453,Claus Ibsen,2020-08-24T06:12:30.856Z,1598235150.856， where 1598235150.856 is the epoch,In camel-jdbc modifying the code to replace calls to getOut with getMessage， as instructed by the javadoc， leads to a test failure in JdbcOptionsTest.testInsertCommit. The code fails because this assertion fails. In other words， the call to mock.getExchanges().get(0).getIn().getBody(String.class); does return a body when applying these changes. I am attaching a patch that can be used to reproduce the issue. To apply the patch， from the camel-jdbc component directory， use patch -p3 < jdbc-deprecations.patch. Note 1: Removing the assertion doesn't seem to affect the results of the testNote 2: JdbcOptionsTest is not even modified by the patch.,Hide Permalink Otavio Rodolfo Piske added a comment - 26/Aug/20 08:16 - edited The problem may be caused because of this: https://github.com/apache/camel/blob/4ea9e6c357371682b855d2d79655b41120331b7a/core/camel-support/src/main/java/org/apache/camel/support/DefaultExchange.java#L393 -- If an out message is not available， the in one is returned. So， to retain previous behavior， we can just test if the getMessage "equals" to the sent one and infer that the out one was null. -- I'll adjust this when I send the PR. -- Claus Ibsen IMHO， this ticket is not really applicable and could be closed. The statement above is not correct. Show Otavio Rodolfo Piske added a comment - 26/Aug/20 08:16 - edited The problem may be caused because of this: https://github.com/apache/camel/blob/4ea9e6c357371682b855d2d79655b41120331b7a/core/camel-support/src/main/java/org/apache/camel/support/DefaultExchange.java#L393 -- If an out message is not available， the in one is returned. So， to retain previous behavior， we can just test if the getMessage "equals" to the sent one and infer that the out one was null. -- I'll adjust this when I send the PR. -- Claus Ibsen IMHO， this ticket is not really applicable and could be closed. The statement above is not correct. Hide Permalink Claus Ibsen added a comment - 26/Aug/20 14:51 Yeah the SQL insert would cause an empty body. I have fixed this to keep the body as that is what other SQL componnents would do. Show Claus Ibsen added a comment - 26/Aug/20 14:51 Yeah the SQL insert would cause an empty body. I have fixed this to keep the body as that is what other SQL componnents would do. Hide Permalink Claus Ibsen added a comment - 26/Aug/20 14:51 Thanks for the patches Show Claus Ibsen added a comment - 26/Aug/20 14:51 Thanks for the patches
CAMEL-15452,Claus Ibsen,2020-08-23T13:17:59+0000,1598174279， where 1598174279 is the epoch,So you can turn off reflection and only use configurers. As by default then reflection is fallback if no configurer is available.But you may want to forbid reflection totally (such as for native graalvm apps),There are no comments yet on this issue.
CAMEL-15451,Andrea Cosentino,2020-08-23T06:51:48+0000,1598151108， where 1598151108 is the epoch,[INFO][INFO] Results:[INFO][ERROR] Errors:[ERROR] org.apache.camel.component.aws2.s3.S3ComponentConfigurationTest.createEndpointWithCredentialsAndClientExistInRegistry[ERROR] Run 1: S3ComponentConfigurationTest.createEndpointWithCredentialsAndClientExistInRegistry:42 » SdkClient[ERROR] Run 2: S3ComponentConfigurationTest.createEndpointWithCredentialsAndClientExistInRegistry:42 » SdkClient[ERROR] Run 3: S3ComponentConfigurationTest.createEndpointWithCredentialsAndClientExistInRegistry:42 » SdkClient[INFO][ERROR] org.apache.camel.component.aws2.s3.S3ComponentConfigurationTest.createEndpointWithCredentialsAndClientExistInRegistryWithAutodiscover[ERROR] Run 1: S3ComponentConfigurationTest.createEndpointWithCredentialsAndClientExistInRegistryWithAutodiscover:54 » SdkClient[ERROR] Run 2: S3ComponentConfigurationTest.createEndpointWithCredentialsAndClientExistInRegistryWithAutodiscover:54 » SdkClient[ERROR] Run 3: S3ComponentConfigurationTest.createEndpointWithCredentialsAndClientExistInRegistryWithAutodiscover:54 » SdkClient[INFO][INFO][ERROR] Tests run: 9， Failures: 0， Errors: 2， Skipped: 0,Hide Permalink Andrea Cosentino added a comment - 23/Aug/20 06:51 Jdk11? Show Andrea Cosentino added a comment - 23/Aug/20 06:51 Jdk11? Hide Permalink Claus Ibsen added a comment - 23/Aug/20 06:52 Yes JDK 11 on osx. Apache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f) Maven home: /opt/apache-maven-3.6.3 Java version: 11.0.7， vendor: AdoptOpenJDK， runtime: /Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home Default locale: en_DK， platform encoding: UTF-8 OS name: "mac os x"， version: "10.14.6"， arch: "x86_64"， family: "mac" Show Claus Ibsen added a comment - 23/Aug/20 06:52 Yes JDK 11 on osx. Apache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f) Maven home: /opt/apache-maven-3.6.3 Java version: 11.0.7， vendor: AdoptOpenJDK， runtime: /Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home Default locale: en_DK， platform encoding: UTF-8 OS name: "mac os x"， version: "10.14.6"， arch: "x86_64"， family: "mac" Hide Permalink Claus Ibsen added a comment - 23/Aug/20 06:54 Can you reproduce that test failure? If not it may be that I have some changes in the works and its on my side. But just wanted to create a ticket to not forget about this test failure Show Claus Ibsen added a comment - 23/Aug/20 06:54 Can you reproduce that test failure? If not it may be that I have some changes in the works and its on my side. But just wanted to create a ticket to not forget about this test failure Hide Permalink Claus Ibsen added a comment - 23/Aug/20 06:54 [ERROR] org.apache.camel.component.aws2.s3.S3ComponentConfigurationTest.createEndpointWithCredentialsAndClientExistInRegistryWithAutodiscover Time elapsed: 1.777 s <<< ERROR! software.amazon.awssdk.core.exception.SdkClientException: Unable to load region from any of the providers in the chain software.amazon.awssdk.regions.providers.DefaultAwsRegionProviderChain@316a598d: [software.amazon.awssdk.regions.providers.SystemSettingsRegionProvider@7d199c68: Unable to load region from system settings. Region must be specified either via environment variable (AWS_REGION) or system property (aws.region).， software.amazon.awssdk.regions.providers.AwsProfileRegionProvider@63411512: No region provided in profile: default， software.amazon.awssdk.regions.providers.InstanceProfileRegionProvider@35cd68d4: Unable to contact EC2 metadata service.] at software.amazon.awssdk.core.exception.SdkClientException$BuilderImpl.build(SdkClientException.java:98) at software.amazon.awssdk.regions.providers.AwsRegionProviderChain.getRegion(AwsRegionProviderChain.java:70) at software.amazon.awssdk.awscore.client.builder.AwsDefaultClientBuilder.regionFromDefaultProvider(AwsDefaultClientBuilder.java:202) at software.amazon.awssdk.awscore.client.builder.AwsDefaultClientBuilder.resolveRegion(AwsDefaultClientBuilder.java:184) at software.amazon.awssdk.awscore.client.builder.AwsDefaultClientBuilder.finalizeChildConfiguration(AwsDefaultClientBuilder.java:135) at software.amazon.awssdk.core.client.builder.SdkDefaultClientBuilder.syncClientConfiguration(SdkDefaultClientBuilder.java:154) at software.amazon.awssdk.services.s3.DefaultS3ClientBuilder.buildClient(DefaultS3ClientBuilder.java:27) at software.amazon.awssdk.services.s3.DefaultS3ClientBuilder.buildClient(DefaultS3ClientBuilder.java:22) at software.amazon.awssdk.core.client.builder.SdkDefaultClientBuilder.build(SdkDefaultClientBuilder.java:126) at org.apache.camel.component.aws2.s3.S3ComponentConfigurationTest.createEndpointWithCredentialsAndClientExistInRegistryWithAutodiscover(S3ComponentConfigurationTest.java:54) Show Claus Ibsen added a comment - 23/Aug/20 06:54 [ERROR] org.apache.camel.component.aws2.s3.S3ComponentConfigurationTest.createEndpointWithCredentialsAndClientExistInRegistryWithAutodiscover Time elapsed: 1.777 s <<< ERROR! software.amazon.awssdk.core.exception.SdkClientException: Unable to load region from any of the providers in the chain software.amazon.awssdk.regions.providers.DefaultAwsRegionProviderChain@316a598d: [software.amazon.awssdk.regions.providers.SystemSettingsRegionProvider@7d199c68: Unable to load region from system settings. Region must be specified either via environment variable (AWS_REGION) or system property (aws.region).， software.amazon.awssdk.regions.providers.AwsProfileRegionProvider@63411512: No region provided in profile: default， software.amazon.awssdk.regions.providers.InstanceProfileRegionProvider@35cd68d4: Unable to contact EC2 metadata service.] at software.amazon.awssdk.core.exception.SdkClientException$BuilderImpl.build(SdkClientException.java:98) at software.amazon.awssdk.regions.providers.AwsRegionProviderChain.getRegion(AwsRegionProviderChain.java:70) at software.amazon.awssdk.awscore.client.builder.AwsDefaultClientBuilder.regionFromDefaultProvider(AwsDefaultClientBuilder.java:202) at software.amazon.awssdk.awscore.client.builder.AwsDefaultClientBuilder.resolveRegion(AwsDefaultClientBuilder.java:184) at software.amazon.awssdk.awscore.client.builder.AwsDefaultClientBuilder.finalizeChildConfiguration(AwsDefaultClientBuilder.java:135) at software.amazon.awssdk.core.client.builder.SdkDefaultClientBuilder.syncClientConfiguration(SdkDefaultClientBuilder.java:154) at software.amazon.awssdk.services.s3.DefaultS3ClientBuilder.buildClient(DefaultS3ClientBuilder.java:27) at software.amazon.awssdk.services.s3.DefaultS3ClientBuilder.buildClient(DefaultS3ClientBuilder.java:22) at software.amazon.awssdk.core.client.builder.SdkDefaultClientBuilder.build(SdkDefaultClientBuilder.java:126) at org.apache.camel.component.aws2.s3.S3ComponentConfigurationTest.createEndpointWithCredentialsAndClientExistInRegistryWithAutodiscover(S3ComponentConfigurationTest.java:54) Hide Permalink Claus Ibsen added a comment - 23/Aug/20 13:15 Ah okay so its s3 client build that is causing this. Maybe we can use mockito to mock it for the testing as its only used for checking if the camel-aws3 is using this client from the registry or creating its own client etc. Show Claus Ibsen added a comment - 23/Aug/20 13:15 Ah okay so its s3 client build that is causing this. Maybe we can use mockito to mock it for the testing as its only used for checking if the camel-aws3 is using this client from the registry or creating its own client etc. Hide Permalink Andrea Cosentino added a comment - 24/Aug/20 09:05 Locally I'm not able to reproduce this. Show Andrea Cosentino added a comment - 24/Aug/20 09:05 Locally I'm not able to reproduce this. Hide Permalink Claus Ibsen added a comment - 25/Aug/20 05:25 The CI server has the same error https://ci-builds.apache.org/job/Camel/job/Camel%20JDK11/job/master/78/testReport/junit/org.apache.camel.component.aws2.s3/S3ComponentConfigurationTest/createEndpointWithCredentialsAndClientExistInRegistry/ Show Claus Ibsen added a comment - 25/Aug/20 05:25 The CI server has the same error https://ci-builds.apache.org/job/Camel/job/Camel%20JDK11/job/master/78/testReport/junit/org.apache.camel.component.aws2.s3/S3ComponentConfigurationTest/createEndpointWithCredentialsAndClientExistInRegistry/ Hide Permalink Andrea Cosentino added a comment - 25/Aug/20 05:33 It should be fixed now， can you double check locally? Show Andrea Cosentino added a comment - 25/Aug/20 05:33 It should be fixed now， can you double check locally? Hide Permalink Claus Ibsen added a comment - 25/Aug/20 05:37 Yes it works， thanks Show Claus Ibsen added a comment - 25/Aug/20 05:37 Yes it works， thanks
CAMEL-15450,Claus Ibsen,2020-08-23T06:26:41+0000,1598149601， where 1598149601 is the epoch,Hello，I recently found that when using ClusteredRoutePolicyFactory ， adding a route to a CamelContext that has been started gives an error. follow is exceptionn stakorg.apache.camel.FailedToCreateRouteException: Failed to create route ns1/1: Route(ns1/1)[[From[timer:pocTimer?period=10s]] -> [SetHeader... because of java.lang.RuntimeException: java.lang.NullPointerExceptionorg.apache.camel.FailedToCreateRouteException: Failed to create route ns1/1: Route(ns1/1)[[From[timer:pocTimer?period=10s]] -> [SetHeader... because of java.lang.RuntimeException: java.lang.NullPointerException at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:217) at org.apache.camel.impl.DefaultCamelContext.startRoute(DefaultCamelContext.java:1139) at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:3736) at org.apache.camel.impl.DefaultCamelContext.addRouteDefinitions(DefaultCamelContext.java:1071) at com.netease.cloud.nsf.server.DefaultServer.onAdd(DefaultServer.java:65) at com.netease.cloud.nsf.resource.DefaultResourceManager.lambda$compareAndNotify$0(DefaultResourceManager.java:51) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748)Caused by: org.apache.camel.RuntimeCamelException: java.lang.RuntimeException: java.lang.NullPointerException at org.apache.camel.impl.cluster.ClusteredRoutePolicyFactory.createRoutePolicy(ClusteredRoutePolicyFactory.java:65) at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1304) at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:212) ... 8 moreCaused by: java.lang.RuntimeException: java.lang.NullPointerException at org.apache.camel.impl.cluster.ClusteredRoutePolicy.setCamelContext(ClusteredRoutePolicy.java:140) at org.apache.camel.impl.cluster.ClusteredRoutePolicy.forNamespace(ClusteredRoutePolicy.java:350) at org.apache.camel.impl.cluster.ClusteredRoutePolicyFactory.createRoutePolicy(ClusteredRoutePolicyFactory.java:63) ... 10 moreCaused by: java.lang.NullPointerException at org.apache.camel.impl.cluster.ClusteredRoutePolicy.onCamelContextStarted(ClusteredRoutePolicy.java:285) at org.apache.camel.impl.cluster.ClusteredRoutePolicy.access$800(ClusteredRoutePolicy.java:49) at org.apache.camel.impl.cluster.ClusteredRoutePolicy$CamelContextStartupListener.onCamelContextStarted(ClusteredRoutePolicy.java:338) at org.apache.camel.impl.cluster.ClusteredRoutePolicy$CamelContextStartupListener.onCamelContextStarted(ClusteredRoutePolicy.java:323) at org.apache.camel.impl.DefaultCamelContext.addStartupListener(DefaultCamelContext.java:1565) at org.apache.camel.impl.cluster.ClusteredRoutePolicy.setCamelContext(ClusteredRoutePolicy.java:136) ... 12 more then i locate the cause:ClusteredRoutePolicyFactory will call ClusteredRoutePolicy.forNamespaceClusteredRoutePolicy.forNamespace rely on ClusteredRoutePolicy.setCamelContextSetCamelContext will determine if the CamelContext has been started， and if so， the following logic will be executedprivate void onCamelContextStarted() { LOGGER.debug("Apply cluster policy (stopped-routes='{}'， started-routes='{}')"， stoppedRoutes.stream().map(Route::getId).collect(Collectors.joining("，"))， startedRoutes.stream().map(Route::getId).collect(Collectors.joining("，")) ); clusterView.addEventListener(leadershipEventListener);}But at this point the clusterView is still not initialized.It will be initialized when the ClusteredRoutePolicy.start() is called.,There are no comments yet on this issue.
CAMEL-15449,Unassigned,2020-08-23T08:03:41+0000,1598155421， where 1598155421 is the epoch,I'm not quite sure what exception handling looks like when it's getting passed around but this callback code is swallowing the exception:https://github.com/apache/camel/blob/master/components/camel-salesforce/camel-salesforce-component/src/main/java/org/apache/camel/component/salesforce/internal/client/DefaultBulkApiClient.java#L318-L327Exception coming into this callback was (paraphrasing) "Salesforce didn't like one of the parameters to the REST API" and then this code tries to unmarshal the response and throws an unmarshalling error.Workaround for now is to fix the API error so this code can unmarshal successfully.,Hide Permalink Claus Ibsen added a comment - 23/Aug/20 08:03 Yeah I think instead of catching only SalesforceException it should be Exception / Throwable to ensure the callback is invoked. Wonder if you would be able to work on a potential fix， and maybe test it on your system. We love contributions https://camel.apache.org/community/support/ Show Claus Ibsen added a comment - 23/Aug/20 08:03 Yeah I think instead of catching only SalesforceException it should be Exception / Throwable to ensure the callback is invoked. Wonder if you would be able to work on a potential fix， and maybe test it on your system. We love contributions https://camel.apache.org/community/support/ Hide Permalink Michael Genereux added a comment - 24/Aug/20 16:44 Is the original developer available in case I have questions of intent? Show Michael Genereux added a comment - 24/Aug/20 16:44 Is the original developer available in case I have questions of intent?
CAMEL-15448,Unassigned,2020-08-22T01:29:49+0000,1598045389， where 1598045389 is the epoch,This task is about to add tag and correlation context (equivalent of opentracing baggage) support to opentelemetry implementation. This should work in the same way as opentracing， but using opentelemetry API.,There are no comments yet on this issue.
CAMEL-15447,Peter Palaga,2020-08-21T16:22:55+0000,1598012575， where 1598012575 is the epoch,Original report https://github.com/apache/camel-quarkus/issues/1563Reproducible with restConfiguration().component("platform-http").bindingMode(RestBindingMode.off) // and output using pretty print .dataFormatProperty("prettyPrint"， "true") // setup context path and port number that api will use .contextPath("api/v1") .port(8080) .host("0.0.0.0") // add OpenApi api-doc out of the box .apiContextPath("/api-doc") .apiProperty("api.title"， "API Title") .apiProperty("api.description"， "API Description") .apiProperty("api.version"， "1.0.0") // and enable CORS .apiProperty("cors"， "true");rest() .get("/alive") .id("api-alive") .produces("text/plain") .responseMessage() .code(200).message("Alive") .endResponseMessage() .route().transform().constant("alive") .end();,There are no comments yet on this issue.
CAMEL-15446,Guillaume Nodet,2020-08-21T15:38:01+0000,1598009881， where 1598009881 is the epoch,The AbstractCamelContext class provides two similar methods:Endpoint doGetEndpoint(String uri， boolean normalized， boolean prototype) Endpoint doGetEndpoint(String uri， Map<String， Object> parameters， boolean normalized)would be nice to have them merged to reduce the rissk of bugs like https://issues.apache.org/jira/browse/CAMEL-15445,Hide Permalink Claus Ibsen added a comment - 21/Aug/20 15:38 I suspect that we have two because of endpoint-dsl and also internal optimizations with normalized vs non-normalized uris. Show Claus Ibsen added a comment - 21/Aug/20 15:38 I suspect that we have two because of endpoint-dsl and also internal optimizations with normalized vs non-normalized uris.
CAMEL-15445,Luca Burgazzoli,2020-08-21T13:41:58+0000,1598002918， where 1598002918 is the epoch,While working on a camel-quarkus issue I've found that the order on which onInit and createEndpoint ar inveked is not the same when endpoint are defined using endpointds vs standard uri.in case of endpoint dsl:1. createEndpoint2. onInitin case of endpoint url:1. onInit2. createEndpoint,There are no comments yet on this issue.
CAMEL-15444,Unassigned,2020-08-21T12:18:25+0000,1597997905， where 1597997905 is the epoch,There are some tests with an incorrect order for test assertions. This is not， by any means， a major problem ... however， it makes the test reports a bit hard to read. It can also cause a bit of confusion when investigating issues.Should be a trivial change， but there are lots of files， so I am logging this as an issue.,Hide Permalink Otavio Rodolfo Piske added a comment - 21/Aug/20 12:18 I'll send a PR for these. Show Otavio Rodolfo Piske added a comment - 21/Aug/20 12:18 I'll send a PR for these.
CAMEL-15443,Unassigned,2020-08-21T12:28:17+0000,1597998497， where 1597998497 is the epoch,The camel-spring-boot-dependencies lists all the different camel spring boot starters and a bunch of other dependencies. Include Spring Framework. But it does not include spring-jcl.When using it together with the actual spring-framework-bom like<?xml version="1.0" encoding="UTF-8"?><project xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://maven.apache.org/POM/4.0.0" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"> <modelVersion>4.0.0</modelVersion> <properties> <camel.version>3.4.2</camel.version> <spring-framework.version>5.2.8.RELEASE</spring-framework.version> </properties> <dependencyManagement> <dependencies> <dependency> <groupId>org.apache.camel.springboot</groupId> <artifactId>camel-spring-boot-dependencies</artifactId> <version>${camel.version}</version> <type>pom</type> <scope>import</scope> </dependency> <dependency> <groupId>org.springframework</groupId> <artifactId>spring-framework-bom</artifactId> <version>${spring-framework.version}</version> <type>pom</type> <scope>import</scope> </dependency> </dependencies> </dependencyManagement></project>It results in different versions of Spring Framework:[WARNING] Rule 1: org.apache.maven.plugins.enforcer.RequireSameVersions failed with message:Found entries with different versionsEntries with version 5.2.7.RELEASE - org.springframework:spring-core:jar (dependency)Entries with version 5.2.8.RELEASE - org.springframework:spring-jcl:jar (dependency),Hide Permalink Claus Ibsen added a comment - 21/Aug/20 12:28 See the spring boot examples where you import SB before Camel https://github.com/apache/camel-spring-boot-examples/blob/master/camel-example-spring-boot-activemq/pom.xml Show Claus Ibsen added a comment - 21/Aug/20 12:28 See the spring boot examples where you import SB before Camel https://github.com/apache/camel-spring-boot-examples/blob/master/camel-example-spring-boot-activemq/pom.xml Hide Permalink Hack Kampbjørn added a comment - 21/Aug/20 12:41 This is a reduced example. The actual two bom includes many other dependencies too. It's not that easy to just swap the import order. In our Spring Boot application we do that. Import first Spring Boot dependencies and then camel. But in our legacy application we do it the other way around. First the legacy dependencies which includes camel. And this also forces some downgrades before importing Spring Boot dependencies. If you want this camel-spring-boot-dependencies to be useful the order should not result in different versions. I prefer a proper camel-spring-boot-bom (CAMEL-15428) without the extra dependencies. Show Hack Kampbjørn added a comment - 21/Aug/20 12:41 This is a reduced example. The actual two bom includes many other dependencies too. It's not that easy to just swap the import order. In our Spring Boot application we do that. Import first Spring Boot dependencies and then camel. But in our legacy application we do it the other way around. First the legacy dependencies which includes camel. And this also forces some downgrades before importing Spring Boot dependencies. If you want this camel-spring-boot-dependencies to be useful the order should not result in different versions. I prefer a proper camel-spring-boot-bom ( CAMEL-15428 ) without the extra dependencies. Hide Permalink Claus Ibsen added a comment - 21/Aug/20 12:48 Yeah lets regard this as a duplicate of CAMEL-15428 as then you can fiddle how you like it. Show Claus Ibsen added a comment - 21/Aug/20 12:48 Yeah lets regard this as a duplicate of CAMEL-15428 as then you can fiddle how you like it.
CAMEL-15442,Zineb BENDHIBA,2020-08-21T07:22:45+0000,1597980165， where 1597980165 is the epoch,Add attributes related to JIRA CAMEL-15409,There are no comments yet on this issue.
CAMEL-15441,Jean-Baptiste Onofré,2020-08-24T12:56:31+0000,1598259391， where 1598259391 is the epoch,spring-data 2.3.x bundles haven been updated containing fixes on the packages. Camel features repository should use this.,Hide Permalink Andrea Cosentino added a comment - 24/Aug/20 12:56 This needs to be reverted on 3.5.x on camel and camel-karaf if we're going to release before the bundles release Show Andrea Cosentino added a comment - 24/Aug/20 12:56 This needs to be reverted on 3.5.x on camel and camel-karaf if we're going to release before the bundles release
CAMEL-15440,Jean-Baptiste Onofré,2020-08-24T12:55:37+0000,1598259337， where 1598259337 is the epoch,Elasticsearch ServiceMix Bundle changed to provide all packages， and elasticsearch-client bundle has been removed.Camel features repository has to be updated.,Hide Permalink Andrea Cosentino added a comment - 24/Aug/20 12:55 This need to be reverted on 3.5.x if we'll release before the bundles release Show Andrea Cosentino added a comment - 24/Aug/20 12:55 This need to be reverted on 3.5.x if we'll release before the bundles release Hide Permalink Jean-Baptiste Onofré added a comment - 24/Aug/20 16:09 Andrea Cosentino the purpose is to release the bundles in coming days (I started the preparation). So， it should be OK. Side node: the camel elasticsearch and redis features just don't work at it is (the bundles are not accurate). I'm also fixing an issue on the jedis bundle. Show Jean-Baptiste Onofré added a comment - 24/Aug/20 16:09 Andrea Cosentino the purpose is to release the bundles in coming days (I started the preparation). So， it should be OK. Side node: the camel elasticsearch and redis features just don't work at it is (the bundles are not accurate). I'm also fixing an issue on the jedis bundle.
CAMEL-15439,Claus Ibsen,2020-08-26T13:50:10+0000,1598435410， where 1598435410 is the epoch,Assuming we have a class likepackage my.package;@Configurerclass MyClass {}Then the camel maven plugin creates an entry inMETA-INF/services/org/apache/camel/configurer/MyClassWhich is fine as long as the use of configure does not get traction but as there's no qualifier for the class， it may happen that we have some naming clash.Maybe the configurer should generateMETA-INF/services/org/apache/camel/configurer/my.package.MyClassinstead,Hide Permalink Claus Ibsen added a comment - 26/Aug/20 13:50 Okay the long name is on the way. If you have the old way you can delete src/generated and re-generated to build with long name Show Claus Ibsen added a comment - 26/Aug/20 13:50 Okay the long name is on the way. If you have the old way you can delete src/generated and re-generated to build with long name
CAMEL-15438,Claus Ibsen,2020-08-23T08:06:33+0000,1598155593， where 1598155593 is the epoch,It would be nice if the PropertiesBindingSupport would directly support dash style properties so the builder could have an additional option to control if converting from dash to camel case is required， like: PropertyBindingSupport.build() .withIgnoreCase(true) .withDash(true) .withCamelContext(context) .withTarget(target) .withProperties(properties) .bind();,Hide Permalink Claus Ibsen added a comment - 23/Aug/20 08:06 I think you can use dash keys today. Show Claus Ibsen added a comment - 23/Aug/20 08:06 I think you can use dash keys today. Hide Permalink Luca Burgazzoli added a comment - 24/Aug/20 06:36 Has this changed recently ? Show Luca Burgazzoli added a comment - 24/Aug/20 06:36 Has this changed recently ? Hide Permalink Claus Ibsen added a comment - 24/Aug/20 07:45 Ah this is via camel-main， if you use that. The PropertyBindingSupport does not have dash support Show Claus Ibsen added a comment - 24/Aug/20 07:45 Ah this is via camel-main， if you use that. The PropertyBindingSupport does not have dash support Hide Permalink Claus Ibsen added a comment - 24/Aug/20 08:12 Okay so how far should we go with dashes? camel-main support dash style ala: camel.component.seda.blocking-queue-factory But you cannot do camel-component-seda-blocking-queue-factory The latter would be hard to support as we would then need to use "trial and error" to find out if the dash represents a nested level or just a name with mixed case. Show Claus Ibsen added a comment - 24/Aug/20 08:12 Okay so how far should we go with dashes? camel-main support dash style ala: camel.component.seda.blocking-queue-factory But you cannot do camel-component-seda-blocking-queue-factory The latter would be hard to support as we would then need to use "trial and error" to find out if the dash represents a nested level or just a name with mixed case. Hide Permalink Claus Ibsen added a comment - 24/Aug/20 08:19 So reflection already support dash to camel case (out of the box) (hardcoded to true). So lets make it for configurer so its the same， and then let it be default out of the box. Show Claus Ibsen added a comment - 24/Aug/20 08:19 So reflection already support dash to camel case (out of the box) (hardcoded to true). So lets make it for configurer so its the same， and then let it be default out of the box. Hide Permalink Luca Burgazzoli added a comment - 24/Aug/20 09:03 I think we should support dashes only in keys， not for OGNL separators. (camel.component is a little special as it is a virtual path but， that's fine IMHO) Show Luca Burgazzoli added a comment - 24/Aug/20 09:03 I think we should support dashes only in keys， not for OGNL separators. (camel.component is a little special as it is a virtual path but， that's fine IMHO)
CAMEL-15437,Claus Ibsen,2020-08-25T07:41:41+0000,1598326901， where 1598326901 is the epoch,The properties binding component now support flat properties onlyso if oyu need to bind nesting object， you need to use an OGNL like syntax but it would be nice to support also "map of maps" as example to do the binding from as example JSON.Assuming we have a class like:class Bar { String name;}class Foo { Bar bar;}The it would be nice if we can bind from map like:Map<Object， Object> properties = Map.of( Map.of( "bar"， Map.of("name"， "test") ));Then one could use PropertyBindingSupport as usual:Foo target = new Foo();PropertyBindingSupport.build() .withCamelContext(context) .withTarget(target) .withProperties(properties) .withRemoveParameters(false) .bind();The same copde using flat properties would look like:Foo target = new Foo();PropertyBindingSupport.build() .withCamelContext(context) .withTarget(target) .withProperties("bar.name"， "test") .withRemoveParameters(false) .bind();,Hide Permalink Claus Ibsen added a comment - 25/Aug/20 07:41 I think at first we should add a new option to indicate that the properties is a map of maps (instead of some magic convention to try to guess). But what can a good name for such option be. So maybe just use .map( ... here goes map of map ) Instead of .properties Show Claus Ibsen added a comment - 25/Aug/20 07:41 I think at first we should add a new option to indicate that the properties is a map of maps (instead of some magic convention to try to guess). But what can a good name for such option be. So maybe just use .map( ... here goes map of map ) Instead of .properties Hide Permalink Luca Burgazzoli added a comment - 25/Aug/20 08:01 would it make sense to do it case by case using instanceOf on the value of a key ? Show Luca Burgazzoli added a comment - 25/Aug/20 08:01 would it make sense to do it case by case using instanceOf on the value of a key ? Hide Permalink Claus Ibsen added a comment - 25/Aug/20 08:06 Yeah I thought also about .flatternProperties(true | false) Hmm the instanceof seems also but lets make an option first to make it explicit， then we can look at if we can auto detect and if that is better Show Claus Ibsen added a comment - 25/Aug/20 08:06 Yeah I thought also about .flatternProperties(true | false) Hmm the instanceof seems also but lets make an option first to make it explicit， then we can look at if we can auto detect and if that is better Hide Permalink Luca Burgazzoli added a comment - 25/Aug/20 08:10 or I guess we can have some overloaded withProperties method， like: withProperties(Properties) -> flat withProperties(Map) -> it may be a map of map Show Luca Burgazzoli added a comment - 25/Aug/20 08:10 or I guess we can have some overloaded withProperties method， like: withProperties(Properties) -> flat withProperties(Map) -> it may be a map of map Hide Permalink Claus Ibsen added a comment - 25/Aug/20 08:32 Using java.util.Properties is not something people really do as end users， so I think this make its a bit more cumbersome Show Claus Ibsen added a comment - 25/Aug/20 08:32 Using java.util.Properties is not something people really do as end users， so I think this make its a bit more cumbersome Hide Permalink Claus Ibsen added a comment - 26/Aug/20 07:58 PBS is also used by Camel internally to bind stuff， and via spring boot etc. I am not so keen on changing to use Properties for flat， and Map for map of maps style. There is the flattern option you can turn on and use in camel-k， and then it works safely for all. Show Claus Ibsen added a comment - 26/Aug/20 07:58 PBS is also used by Camel internally to bind stuff， and via spring boot etc. I am not so keen on changing to use Properties for flat， and Map for map of maps style. There is the flattern option you can turn on and use in camel-k， and then it works safely for all. Hide Permalink Luca Burgazzoli added a comment - 26/Aug/20 08:12 fine with me Show Luca Burgazzoli added a comment - 26/Aug/20 08:12 fine with me
CAMEL-15436,Omar Al-Safi,2020-08-20T13:41:40+0000,1597916500， where 1597916500 is the epoch,Currently， if you have createAppendBlob=true， the component will create the file every-time and won't ignore it if the file exists， hence it should ignore the file creation if it exists in the storgage blob account. Same goes for createPageBlob=true,There are no comments yet on this issue.
CAMEL-15435,Jean-Baptiste Onofré,2020-08-20T13:28:25+0000,1597915705， where 1597915705 is the epoch,I have a Camel application using Blueprint XML running on Karaf 4.2.9. Some routes call methods on beans that are OSGi services. When I try to upgrade to version 3.4.2 (from 3.4.0) Camel is no longer finding method in bean. Error at startup reads: "Failed to create route XXX at…” Caused by: org.apache.camel.component.bean.MethodNotFoundException: Method with name: XXXX not found on bean: XXXX@XXXX of type: Proxy3d58f1a3_9d5b_4a54_aa71_e8a0574b6da9 at org.apache.camel.component.bean.DefaultBeanProcessorFactory.createBeanProcessor(DefaultBeanProcessorFactory.java:146) ~[?:?] at org.apache.camel.reifier.BeanReifier.createProcessor(BeanReifier.java:47) ~[?:?] at org.apache.camel.reifier.ProcessorReifier.makeProcessor(ProcessorReifier.java:766) ~[?:?] at org.apache.camel.reifier.ProcessorReifier.addRoutes(ProcessorReifier.java:511) ~[?:?] at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:391) ~[?:?] ... 22 more,There are no comments yet on this issue.
CAMEL-15434,Unassigned,2020-08-20T13:18:25+0000,1597915105， where 1597915105 is the epoch,Similar to Azure EventHubs component which accepts connectionString as alternative to connect to the service， we can do the same for Azure Blob and Azure Queue components,There are no comments yet on this issue.
CAMEL-15433,Guillaume Nodet,2020-08-20T09:31:23+0000,1597901483， where 1597901483 is the epoch,The catalog generates a bunch of files. The problem is that those files are re-generated when the catalog/camel-catalog module is built， so that when a developper modifies a component without rebuilding the whole project， those modifications may be missed， and thus leads to an incomplete commit.The idea is to move the generators that depends on a given component inside the build of that component， so that the changes would be effective immediately.,There are no comments yet on this issue.
CAMEL-15432,Omar Al-Safi,2020-08-20T08:31:01+0000,1597897861， where 1597897861 is the epoch,While I was looking at our components reference documentation， I have noticed Azure Event Hubs is not grouped under Azure categoryFYI Aemie,Hide Permalink Aemie added a comment - 20/Aug/20 08:31 I can group it under Azure， it requires the addition of small components within its documentation. Show Aemie added a comment - 20/Aug/20 08:31 I can group it under Azure， it requires the addition of small components within its documentation. Hide Permalink Omar Al-Safi added a comment - 20/Aug/20 08:36 oh so is just missing this metadata :group: Azure? I will add it shortly now Show Omar Al-Safi added a comment - 20/Aug/20 08:36 oh so is just missing this metadata :group: Azure ? I will add it shortly now Hide Permalink Andrea Cosentino added a comment - 20/Aug/20 08:37 Yes， exactly Show Andrea Cosentino added a comment - 20/Aug/20 08:37 Yes， exactly Hide Permalink Omar Al-Safi added a comment - 20/Aug/20 08:40 I have added the group metadata in here: https://raw.githubusercontent.com/apache/camel/master/components/camel-azure-eventhubs/src/main/docs/azure-eventhubs-component.adoc Thank you for the tip Show Omar Al-Safi added a comment - 20/Aug/20 08:40 I have added the group metadata in here: https://raw.githubusercontent.com/apache/camel/master/components/camel-azure-eventhubs/src/main/docs/azure-eventhubs-component.adoc Thank you for the tip Hide Permalink Aemie added a comment - 20/Aug/20 09:51 Omar Al-Safi yea， that's the only thing required to do! Show Aemie added a comment - 20/Aug/20 09:51 Omar Al-Safi yea， that's the only thing required to do!
CAMEL-15431,Unassigned,2020-08-20T06:56:12+0000,1597892172， where 1597892172 is the epoch,Some of the log messages are creating redundant arrays. This is not necessarily a problem， but can be a bit confusing when trying to identify the log placeholders and diagnose issues. Here's one example: https://github.com/apache/camel/blob/4ea9e6c357371682b855d2d79655b41120331b7a/core/camel-xml-jaxp/src/main/java/org/apache/camel/converter/jaxp/XmlConverter.java#L934 Also happens on 3.4.3.,Hide Permalink Otavio Rodolfo Piske added a comment - 20/Aug/20 06:56 I'll send a PR for this. Show Otavio Rodolfo Piske added a comment - 20/Aug/20 06:56 I'll send a PR for this.
CAMEL-15430,Otavio Rodolfo Piske,2020-08-20T06:43:37+0000,1597891417， where 1597891417 is the epoch,While investigating an issue I found some circumstances where invalid log placeholders are present. They would cause the log messages to be printed like this:Error message: {}It's a minor issue， but could be confusing for debugging. Here's one example: https://github.com/apache/camel/blob/4ea9e6c357371682b855d2d79655b41120331b7a/core/camel-xml-jaxp/src/main/java/org/apache/camel/converter/jaxp/XmlConverter.java#L1005 The last item， the exception object， will not be displayed. Instead， the stackTrace will be printed and the {} will be shown on the message. This also happens on 3.4.3.,Hide Permalink Otavio Rodolfo Piske added a comment - 20/Aug/20 06:43 I'll send a PR for this. Show Otavio Rodolfo Piske added a comment - 20/Aug/20 06:43 I'll send a PR for this. Hide Permalink Guillaume Nodet added a comment - 20/Aug/20 08:12 I think we may want to add a parameter with the value: e.getMessage() to the call in this case. Show Guillaume Nodet added a comment - 20/Aug/20 08:12 I think we may want to add a parameter with the value: e.getMessage() to the call in this case.
CAMEL-15429,Unassigned,2020-08-20T03:13:41+0000,1597878821， where 1597878821 is the epoch,Add Spring Boot Starter for camel-oaipmh,There are no comments yet on this issue.
CAMEL-15428,Claus Ibsen,2020-08-19T15:14:18+0000,1597835658， where 1597835658 is the epoch,Hi! In Spring Cloud Contract I wanted to reference camel project versions without providing versions for each of them. So I referenced the `camel-dependencies` project in the dependencies management section.The problem is that also includes all the non project related library versions (e.g. had a conflict with jackson-databind， Camel downgraded my library).It would be great to have a `camel-bom` module that would include only camel related projects without any other dependencies. Then `camel-dependencies` would import `camel-bom` and all the necessary dependencies.,Hide Permalink Claus Ibsen added a comment - 19/Aug/20 15:14 For spring boot see the examples how there is a camel SB BOM For example at https://github.com/apache/camel-spring-boot-examples/tree/master/camel-example-spring-boot-activemq Show Claus Ibsen added a comment - 19/Aug/20 15:14 For spring boot see the examples how there is a camel SB BOM For example at https://github.com/apache/camel-spring-boot-examples/tree/master/camel-example-spring-boot-activemq Hide Permalink Marcin Grzejszczak added a comment - 19/Aug/20 15:23 Maybe I wasn't too clear. I am the maintainer of Spring Cloud Contract and I know how BOMs work The problem is that when I add the camel `dependencies` pom， it's breaking my dependencies. What I would like to have is just a definition of camel based projects. https://mvnrepository.com/artifact/org.apache.camel.springboot/camel-spring-boot-dependencies/3.4.3 - you're enforcing versions of projects (e.g. com.fasterxml.jackson.dataformat » jackson-dataformat-yaml 2.10.4) or <dependency> <groupId>httpunit</groupId> <artifactId>httpunit</artifactId> <version>1.7</version> </dependency> <dependency> <groupId>io.apicurio</groupId> <artifactId>apicurio-data-models</artifactId> <version>1.0.16.Final</version> </dependency> <dependency> <groupId>io.krakens</groupId> <artifactId>java-grok</artifactId> <version>0.1.9</version> </dependency> <dependency> <groupId>io.methvin</groupId> <artifactId>directory-watcher</artifactId> <version>0.9.10</version> </dependency> From my perspective I don't care about these versions nor do I want to override my versions. What I want to have is the whole management section of Camel specific projects. That's why I'd prefer to have a BOM and `-dependencies` that reference the BOM. Show Marcin Grzejszczak added a comment - 19/Aug/20 15:23 Maybe I wasn't too clear. I am the maintainer of Spring Cloud Contract and I know how BOMs work The problem is that when I add the camel `dependencies` pom， it's breaking my dependencies. What I would like to have is just a definition of camel based projects. https://mvnrepository.com/artifact/org.apache.camel.springboot/camel-spring-boot-dependencies/3.4.3 - you're enforcing versions of projects (e.g. com.fasterxml.jackson.dataformat » jackson-dataformat-yaml 2.10.4) or <dependency> <groupId>httpunit</groupId> <artifactId>httpunit</artifactId> <version>1.7</version> </dependency> <dependency> <groupId>io.apicurio</groupId> <artifactId>apicurio-data-models</artifactId> <version>1.0.16.Final</version> </dependency> <dependency> <groupId>io.krakens</groupId> <artifactId>java-grok</artifactId> <version>0.1.9</version> </dependency> <dependency> <groupId>io.methvin</groupId> <artifactId>directory-watcher</artifactId> <version>0.9.10</version> </dependency> From my perspective I don't care about these versions nor do I want to override my versions. What I want to have is the whole management section of Camel specific projects. That's why I'd prefer to have a BOM and `-dependencies` that reference the BOM. Hide Permalink Stephane Nicoll added a comment - 19/Aug/20 15:24 - edited camel-spring-boot-dependencies is the problem. It not only provides dependency management for Camel but also for a bunch of 3rd party libraries. If two boms provide dependency management for the same thing， you get a warning in Maven. Spring Boot does this because it relates to "platform dependency management" rather than providing a bom for Spring Boot artitacts. I don't have an opinion if Camel is considered as a development platform but I think it would be worthwhile to have bom in the strict sense of the term. I would welcome a camel-spring-boot-bom on start.spring.io that only defines Camel artifacts actually. Show Stephane Nicoll added a comment - 19/Aug/20 15:24 - edited camel-spring-boot-dependencies is the problem. It not only provides dependency management for Camel but also for a bunch of 3rd party libraries. If two boms provide dependency management for the same thing， you get a warning in Maven. Spring Boot does this because it relates to "platform dependency management" rather than providing a bom for Spring Boot artitacts. I don't have an opinion if Camel is considered as a development platform but I think it would be worthwhile to have bom in the strict sense of the term. I would welcome a camel-spring-boot-bom on start.spring.io that only defines Camel artifacts actually. Hide Permalink Claus Ibsen added a comment - 19/Aug/20 15:32 Ah okay so a BOM with only camel-xxx. Yeah we have one in Camel at https://github.com/apache/camel/blob/master/bom/camel-bom/pom.xml But you are looking for something similar that has only the Camel -starter JARs in its BOM. Yeah that is a good idea. Show Claus Ibsen added a comment - 19/Aug/20 15:32 Ah okay so a BOM with only camel-xxx. Yeah we have one in Camel at https://github.com/apache/camel/blob/master/bom/camel-bom/pom.xml But you are looking for something similar that has only the Camel -starter JARs in its BOM. Yeah that is a good idea. Hide Permalink Stephane Nicoll added a comment - 19/Aug/20 15:35 Yeah camel-spring-boot-bom that would import the bom you've just referenced (thank you!) + all the Spring Boot integration for camel. Show Stephane Nicoll added a comment - 19/Aug/20 15:35 Yeah camel-spring-boot-bom that would import the bom you've just referenced (thank you!) + all the Spring Boot integration for camel. Hide Permalink Claus Ibsen added a comment - 19/Aug/20 16:30 It would also be good to backport this for 3.4.x branch as its our active LTS branch currently， and it will help the user experience for camel on spring boot Show Claus Ibsen added a comment - 19/Aug/20 16:30 It would also be good to backport this for 3.4.x branch as its our active LTS branch currently， and it will help the user experience for camel on spring boot Hide Permalink Claus Ibsen added a comment - 24/Aug/20 12:08 There is a BOM now for 3.5 onwards https://github.com/apache/camel-spring-boot-examples/blob/master/camel-example-spring-boot/pom.xml#L55 Working on 3.4.4 support too (but backporting takes time) Show Claus Ibsen added a comment - 24/Aug/20 12:08 There is a BOM now for 3.5 onwards https://github.com/apache/camel-spring-boot-examples/blob/master/camel-example-spring-boot/pom.xml#L55 Working on 3.4.4 support too (but backporting takes time) Hide Permalink Marcin Grzejszczak added a comment - 24/Aug/20 13:23 Great! When are you planning to release 3.4.4 ? Show Marcin Grzejszczak added a comment - 24/Aug/20 13:23 Great! When are you planning to release 3.4.4 ? Hide Permalink Claus Ibsen added a comment - 24/Aug/20 13:54 Oh it may be a little while as 3.4.3 was released 9 days ago Show Claus Ibsen added a comment - 24/Aug/20 13:54 Oh it may be a little while as 3.4.3 was released 9 days ago Hide Permalink Hack Kampbjørn added a comment - 02/Nov/20 11:15 The camel-spring-boot-bom in 3.4.4 still imports external libraries like scala-library via parent. <parent> <groupId>org.apache.camel.springboot</groupId> <artifactId>tooling</artifactId> <version>3.4.4</version> </parent> And org.apache.camel.springboot:tooling has another parent <parent> <groupId>org.apache.camel.springboot</groupId> <artifactId>spring-boot</artifactId> <version>3.4.4</version> </parent> And org.apache.camel.springboot:spring-boot has dependency management including <dependency> <groupId>org.apache.camel</groupId> <artifactId>camel-parent</artifactId> <version>${camel-version}</version> <type>pom</type> <scope>import</scope> </dependency> And this org.apache.camel:camel-parent has many external dependencies like <dependency> <groupId>org.scala-lang</groupId> <artifactId>scala-library</artifactId> <version>${scala-version}</version> </dependency> Show Hack Kampbjørn added a comment - 02/Nov/20 11:15 The camel-spring-boot-bom in 3.4.4 still imports external libraries like scala-library via parent. <parent> <groupId>org.apache.camel.springboot</groupId> <artifactId>tooling</artifactId> <version>3.4.4</version> </parent> And org.apache.camel.springboot:tooling has another parent <parent> <groupId>org.apache.camel.springboot</groupId> <artifactId>spring-boot</artifactId> <version>3.4.4</version> </parent> And org.apache.camel.springboot:spring-boot has dependency management including <dependency> <groupId>org.apache.camel</groupId> <artifactId>camel-parent</artifactId> <version>${camel-version}</version> <type>pom</type> <scope> import </scope> </dependency> And this org.apache.camel:camel-parent has many external dependencies like <dependency> <groupId>org.scala-lang</groupId> <artifactId>scala-library</artifactId> <version>${scala-version}</version> </dependency> Hide Permalink Claus Ibsen added a comment - 02/Nov/20 13:10 Hack thanks for reporting， can you create a new ticket Show Claus Ibsen added a comment - 02/Nov/20 13:10 Hack thanks for reporting， can you create a new ticket Hide Permalink Claus Ibsen added a comment - 02/Nov/20 15:20 Okay fixed this for 3.4.5 and 3.7.0 Show Claus Ibsen added a comment - 02/Nov/20 15:20 Okay fixed this for 3.4.5 and 3.7.0
CAMEL-15427,Omar Al-Safi,2020-08-19T13:47:46+0000,1597830466， where 1597830466 is the epoch,Per title,There are no comments yet on this issue.
CAMEL-15426,Claus Ibsen,2020-08-19T14:11:31.463Z,1597831891.463， where 1597831891.463 is the epoch,camel main has two test resources:src/test/resources/META-INF/services/org/apache/camel/configurer/MySecondBarsrc/test/resources/META-INF/services/org/apache/camel/configurer/MySecondFooThese seem to end up being packaged in the camel-main JAR:jar tvf camel-main-3.5.0-SNAPSHOT.jar | grep MySecond 108 Wed Jan 22 15:10:16 GMT 2020 META-INF/services/org/apache/camel/configurer/MySecondBar 108 Wed Jan 22 15:10:16 GMT 2020 META-INF/services/org/apache/camel/configurer/MySecondFoo,Hide Permalink Claus Ibsen added a comment - 19/Aug/20 13:36 Yeah I have a fix for this on something I work on ， but its part of other stuff that is not ready for merging so stay tuned for a few days. Show Claus Ibsen added a comment - 19/Aug/20 13:36 Yeah I have a fix for this on something I work on ， but its part of other stuff that is not ready for merging so stay tuned for a few days. Hide Permalink Luca Burgazzoli added a comment - 21/Aug/20 15:24 Patch applied: https://github.com/apache/camel/pull/4115 Show Luca Burgazzoli added a comment - 21/Aug/20 15:24 Patch applied: https://github.com/apache/camel/pull/4115
CAMEL-15425,Unassigned,2020-08-19T09:13:07+0000,1597813987， where 1597813987 is the epoch,It seems that the toString method of SalesforceLoginConfig leaks the user password. I am not sure if there is some masking that happens behind the scenes， but out of precaution I am reporting this one. Also happens on master.,Hide Permalink Otavio Rodolfo Piske added a comment - 19/Aug/20 09:13 I'll send a PR for this one as well. Show Otavio Rodolfo Piske added a comment - 19/Aug/20 09:13 I'll send a PR for this one as well.
CAMEL-15424,Unassigned,2020-08-19T08:26:08+0000,1597811168， where 1597811168 is the epoch,The code is de-referencing the collaborator before checking whether it is null， which can cause an NPE. It can also happen on 3.4.3. Caused by: java.lang.NullPointerException at org.apache.camel.component.box.api.BoxCollaborationsManager.addFolderCollaboration(BoxCollaborationsManager.java:90) at org.apache.camel.component.box.BoxCollaborationsManagerTest.lambda$testAddFolderCollaborationNullFolderId$1(BoxCollaborationsManagerTest.java:37) at org.junit.jupiter.api.AssertThrows.assertThrows(AssertThrows.java:55) ... 66 more,Hide Permalink Otavio Rodolfo Piske added a comment - 19/Aug/20 08:26 I have the patch and reproducer ready. I'll send a PR soon. Show Otavio Rodolfo Piske added a comment - 19/Aug/20 08:26 I have the patch and reproducer ready. I'll send a PR soon.
CAMEL-15423,Unassigned,2020-08-19T06:42:24+0000,1597804944， where 1597804944 is the epoch,Hi thereI have integrated camel and consult to perform leader election when it come to polling. So far everything is working as expected. If I kill on of my pods then another pod becomes the leader. One thing I have noticed is that when I invalidate the session via Consul UI the camel service throws the following exception: com.orbitz.consul.ConsulException: Consul request failed with status [404]: Session id 'da77a3a5-dbf8-49ab-9a46-f759b325895b' not foundcom.orbitz.consul.ConsulException: Consul request failed with status [404]: Session id 'da77a3a5-dbf8-49ab-9a46-f759b325895b' not found at com.orbitz.consul.util.Http.ensureResponseSuccessful(Http.java:61) at com.orbitz.consul.util.Http.extract(Http.java:33) at com.orbitz.consul.SessionClient.renewSession(SessionClient.java:80) at com.orbitz.consul.SessionClient.renewSession(SessionClient.java:69) at org.apache.camel.component.consul.cluster.ConsulClusterView$Watcher.watch(ConsulClusterView.java:279) at org.apache.camel.component.consul.cluster.ConsulClusterView$Watcher.onComplete(ConsulClusterView.java:252) at com.orbitz.consul.KeyValueClient$1.onComplete(KeyValueClient.java:167) at com.orbitz.consul.util.Http$1.onResponse(Http.java:80) at retrofit2.OkHttpCall$1.onResponse(OkHttpCall.java:129) at okhttp3.RealCall$AsyncCall.execute(RealCall.java:174) at okhttp3.internal.NamedRunnable.run(NamedRunnable.java:32) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at java.base/java.lang.Thread.run(Thread.java:834)Which I would expect it to happen. But this continues until I have to manually kill the pod and restart the camel service. Is there anyway to perform a retry X times and then acquire a new session? I couldn't see any configuration that would enable this， unless this is the expected behaviour. Any help would be appreciated.,There are no comments yet on this issue.
CAMEL-15422,Claus Ibsen,2020-08-18T15:34:33+0000,1597750473， where 1597750473 is the epoch,As the endpoint parameter can be used to set a custom scheduler using # lookup style， and then it would be better to let it be Object type as neutral， as you can also use spring， or quartz to refer to built-in schedulers.,There are no comments yet on this issue.
CAMEL-15421,Unassigned,2020-08-18T08:03:29.329Z,1597723409.329， where 1597723409.329 is the epoch,There is no symbol rendered with AsciiDoc admonitions on pages generated by Antora.E.g. on this page https://camel.apache.org/camel-quarkus/latest/list-of-camel-quarkus-extensions.html there is a Tip that is missing the usual bulb icon or similar. We are probably missing some css for fa icon-tip.,Hide Permalink Aemie added a comment - 18/Aug/20 08:05 Peter Palaga after tweaking the CSS to make the icon appear， I could observe the following in the picture， and based on what Antora Docs have information regarding admonition， it appears as such with the text itself. Do you need modification in the picture or it is sufficient enough within the picture? Show Aemie added a comment - 18/Aug/20 08:05 Peter Palaga after tweaking the CSS to make the icon appear， I could observe the following in the picture， and based on what Antora Docs have information regarding admonition， it appears as such with the text itself. Do you need modification in the picture or it is sufficient enough within the picture? Hide Permalink ASF GitHub Bot added a comment - 18/Aug/20 13:36 AemieJ opened a new pull request #466: URL: https://github.com/apache/camel-website/pull/466 The AsciiDoc admonitions weren't being rendered on the antora pages. Hence， I made a few tweaks to the CSS for the admonitions to be rendered. ![admonition-block-antora](https://user-images.githubusercontent.com/44139348/90519558-d2196100-e185-11ea-808f-b6b0e7c96be3.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 18/Aug/20 13:36 AemieJ opened a new pull request #466: URL: https://github.com/apache/camel-website/pull/466 The AsciiDoc admonitions weren't being rendered on the antora pages. Hence， I made a few tweaks to the CSS for the admonitions to be rendered. ! [admonition-block-antora] ( https://user-images.githubusercontent.com/44139348/90519558-d2196100-e185-11ea-808f-b6b0e7c96be3.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Peter Palaga added a comment - 18/Aug/20 15:39 I am fine with the shown rendering as long as you like it. BTW， in Antora default UI the admonitions look like this: https://docs.antora.org/antora-ui-default/templates/ Show Peter Palaga added a comment - 18/Aug/20 15:39 I am fine with the shown rendering as long as you like it. BTW， in Antora default UI the admonitions look like this: https://docs.antora.org/antora-ui-default/templates/ Hide Permalink Aemie added a comment - 18/Aug/20 16:00 Yes， I observed their default UI at https://docs.antora.org/antora/2.3/asciidoc/admonitions/ as well but based on the CSS that was present， I tweaked only a few values to the original. For now， the admonition is rendering on the page. Show Aemie added a comment - 18/Aug/20 16:00 Yes， I observed their default UI at https://docs.antora.org/antora/2.3/asciidoc/admonitions/ as well but based on the CSS that was present， I tweaked only a few values to the original. For now， the admonition is rendering on the page. Hide Permalink ASF GitHub Bot added a comment - 18/Aug/20 20:45 zregvart commented on pull request #466: URL: https://github.com/apache/camel-website/pull/466#issuecomment-675710999 Awesome， thanks! Perhaps we could tweak the background coluor a bit， that green is a bit off brand for Camel. It can be changed here: https://github.com/apache/camel-website/blob/c86e67a1b072cd004325a1b7ff80a4d537a97345/antora-ui-camel/src/css/vars.css#L87 Perhaps a lighter version of the ASF blue would suit us better? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 18/Aug/20 20:45 zregvart commented on pull request #466: URL: https://github.com/apache/camel-website/pull/466#issuecomment-675710999 Awesome， thanks! Perhaps we could tweak the background coluor a bit， that green is a bit off brand for Camel. It can be changed here: https://github.com/apache/camel-website/blob/c86e67a1b072cd004325a1b7ff80a4d537a97345/antora-ui-camel/src/css/vars.css#L87 Perhaps a lighter version of the ASF blue would suit us better? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 18/Aug/20 20:47 zregvart commented on pull request #466: URL: https://github.com/apache/camel-website/pull/466#issuecomment-675712075 I've fiddled with this a bit， I think it looks a bit nicer without the rounded corners: ![Screenshot_2020-08-18 Camel Quarkus extensions reference Apache Camel(1)](https://user-images.githubusercontent.com/1306050/90563869-b70a1980-e1a4-11ea-9285-26f87cd2bcc8.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 18/Aug/20 20:47 zregvart commented on pull request #466: URL: https://github.com/apache/camel-website/pull/466#issuecomment-675712075 I've fiddled with this a bit， I think it looks a bit nicer without the rounded corners: ! [Screenshot_2020-08-18 Camel Quarkus extensions reference Apache Camel(1)] ( https://user-images.githubusercontent.com/1306050/90563869-b70a1980-e1a4-11ea-9285-26f87cd2bcc8.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 20/Aug/20 21:32 zregvart commented on pull request #466: URL: https://github.com/apache/camel-website/pull/466#issuecomment-677917189 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 20/Aug/20 21:32 zregvart commented on pull request #466: URL: https://github.com/apache/camel-website/pull/466#issuecomment-677917189 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 20/Aug/20 21:32 zregvart merged pull request #466: URL: https://github.com/apache/camel-website/pull/466 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 20/Aug/20 21:32 zregvart merged pull request #466: URL: https://github.com/apache/camel-website/pull/466 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Zoran Regvart added a comment - 20/Aug/20 21:33 Thanks Aemie! Show Zoran Regvart added a comment - 20/Aug/20 21:33 Thanks Aemie !
CAMEL-15420,Unassigned,2020-08-17T10:33:17.058Z,1597645997.058， where 1597645997.058 is the epoch,If http path specified in endpoint uri instead of Exchange.HTTP_PATH header than dynamic aware ignores Exchange.HTTP_QUERY and set it as null.Sending message to routefrom("direct:dynamicAware") .setHeader(Exchange.HTTP_PATH， constant("dynamicAware")) .setHeader(Exchange.HTTP_QUERY， constant("par1=val1&par2=val2")) .toD("http://localhost:" + localServer.getLocalPort());will return exchange with getIn().getHeader(Exchange.HTTP_QUERY) equal to "par1=val1&par2=val2".But， sending message to route from("direct:dynamicAwareWithoutPathHeader") .setHeader(Exchange.HTTP_QUERY， constant("par1=val1&par2=val2")) .toD("http://localhost:" + localServer.getLocalPort() + "/dynamicAware");removes header Exchange.HTTP_QUERY from result. Here is full code of test: (also attached as a .java file)public class HttpSendDynamicAwareHeadersTest extends BaseHttpTest { private HttpServer localServer; @BeforeEach @Override public void setUp() throws Exception { localServer = ServerBootstrap.bootstrap(). setHttpProcessor(getBasicHttpProcessor()). setConnectionReuseStrategy(getConnectionReuseStrategy()). setResponseFactory(getHttpResponseFactory()). setExpectationVerifier(getHttpExpectationVerifier()). setSslContext(getSSLContext()). registerHandler("/dynamicAware"， new BasicValidationHandler(GET.name()， null， null， null)). create(); localServer.start(); super.setUp(); } @AfterEach @Override public void tearDown() throws Exception { super.tearDown(); if (localServer != null) { localServer.stop(); } } @Override protected RoutesBuilder createRouteBuilder() throws Exception { return new RouteBuilder() { @Override public void configure() throws Exception { from("direct:dynamicAware") .setHeader(Exchange.HTTP_PATH， constant("dynamicAware")) .setHeader(Exchange.HTTP_QUERY， constant("par1=val1&par2=val2")) .toD("http://localhost:" + localServer.getLocalPort()); from("direct:dynamicAwareWithoutPathHeader") .setHeader(Exchange.HTTP_QUERY， constant("par1=val1&par2=val2")) .toD("http://localhost:" + localServer.getLocalPort() + "/dynamicAware"); } }; } @Test public void testDynamicAwareHeaders() throws Exception { Exchange e = fluentTemplate.to("direct:dynamicAware").send(); assertNotNull(e.getIn().getHeader(Exchange.HTTP_QUERY)); e = fluentTemplate.to("direct:dynamicAwareWithoutPathHeader").send(); assertNotNull(e.getIn().getHeader(Exchange.HTTP_QUERY)); }},Hide Permalink Chandrakant Hardahe added a comment - 18/Aug/20 15:38 Artem St， Thanks for reporting it and providing the test case， I'm working on it Show Chandrakant Hardahe added a comment - 18/Aug/20 15:38 Artem St ， Thanks for reporting it and providing the test case， I'm working on it Hide Permalink Chandrakant Hardahe added a comment - 18/Aug/20 19:30 Artem St， Did you refer the doc https://camel.apache.org/components/latest/http-component.html ? It says，"URI parameters. Will override existing URI parameters set directly on the endpoint." I hope it answers the query. Show Chandrakant Hardahe added a comment - 18/Aug/20 19:30 Artem St ， Did you refer the doc https://camel.apache.org/components/latest/http-component.html ? It says，"URI parameters. Will override existing URI parameters set directly on the endpoint." I hope it answers the query. Hide Permalink Artem St added a comment - 18/Aug/20 19:53 Chandrakant Hardahe， thanks for your replay. Yes， I saw the docs， but I do not have a query parameters in my URI's， only path. I did not realize if I had a path specified in my URI I cant use a HTTP_QUERY header. Is it a correct behavior? Show Artem St added a comment - 18/Aug/20 19:53 Chandrakant Hardahe ， thanks for your replay. Yes， I saw the docs， but I do not have a query parameters in my URI's， only path. I did not realize if I had a path specified in my URI I cant use a HTTP_QUERY header. Is it a correct behavior? Hide Permalink Artem St added a comment - 18/Aug/20 20:23 - edited Chandrakant Hardahe， also， if you change attached test to use .to() and not .toD() the test works fine. Should not it be a same behavior for .to and .toD? To be clear， in this route Exchange.HTTP_QUERY header will be removed: from("direct:dynamicAwareWithoutPathHeader") .setHeader(Exchange.HTTP_QUERY， constant("par1=val1&par2=val2")) .toD("http://localhost:" + localServer.getLocalPort() + "/dynamicAware"); But in this route Exchange.HTTP_QUERY header will contain "par1=val1&par2=val2" value: from("direct:dynamicAwareWithoutPathHeader") .setHeader(Exchange.HTTP_QUERY， constant("par1=val1&par2=val2")) .to("http://localhost:" + localServer.getLocalPort() + "/dynamicAware"); Show Artem St added a comment - 18/Aug/20 20:23 - edited Chandrakant Hardahe ， also， if you change attached test to use .to() and not .toD() the test works fine. Should not it be a same behavior for .to and .toD? To be clear， in this route Exchange.HTTP_QUERY header will be removed: from( "direct:dynamicAwareWithoutPathHeader" ) .setHeader(Exchange.HTTP_QUERY， constant( "par1=val1&par2=val2" )) .toD( "http: //localhost:" + localServer.getLocalPort() + "/dynamicAware" ); But in this route Exchange.HTTP_QUERY header will contain "par1=val1&par2=val2" value: from( "direct:dynamicAwareWithoutPathHeader" ) .setHeader(Exchange.HTTP_QUERY， constant( "par1=val1&par2=val2" )) .to( "http: //localhost:" + localServer.getLocalPort() + "/dynamicAware" ); Hide Permalink Chandrakant Hardahe added a comment - 19/Aug/20 16:35 - edited Thanks Artem St， I verified the same， I agree it should be the same behavior. I'll raise PR for it. Show Chandrakant Hardahe added a comment - 19/Aug/20 16:35 - edited Thanks Artem St ， I verified the same， I agree it should be the same behavior. I'll raise PR for it. Hide Permalink Claus Ibsen added a comment - 23/Aug/20 16:35 Thanks for reporting and the PR Show Claus Ibsen added a comment - 23/Aug/20 16:35 Thanks for reporting and the PR Hide Permalink Artem St added a comment - 23/Aug/20 16:51 Claus Ibsen， is it possible to have this fix in 2.24.xx version? Should it be a new push request in 2.24 branch? Show Artem St added a comment - 23/Aug/20 16:51 Claus Ibsen ， is it possible to have this fix in 2.24.xx version? Should it be a new push request in 2.24 branch? Hide Permalink Jan Bednar added a comment - 23/Aug/20 20:15 2.24.x is EOL and there is no planned release for this branch. You can open backport PR against branch camel-2.25.x if it helps you. Show Jan Bednar added a comment - 23/Aug/20 20:15 2.24.x is EOL and there is no planned release for this branch. You can open backport PR against branch camel-2.25.x if it helps you.
CAMEL-15419,Unassigned,2020-08-16T19:57:57+0000,1597593477， where 1597593477 is the epoch,In camel-website README.md (under Build the website content) we are told to use yarn format command to format the code， but this command is not defined : $ yarn format yarn run v1.22.0 error Command "format" not found. info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.,Hide Permalink ASF GitHub Bot added a comment - 16/Aug/20 19:57 ARUNMANNURU opened a new pull request #463: URL: https://github.com/apache/camel-website/pull/463 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 16/Aug/20 19:57 ARUNMANNURU opened a new pull request #463: URL: https://github.com/apache/camel-website/pull/463 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 16/Aug/20 20:02 ARUNMANNURU closed pull request #463: URL: https://github.com/apache/camel-website/pull/463 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 16/Aug/20 20:02 ARUNMANNURU closed pull request #463: URL: https://github.com/apache/camel-website/pull/463 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Zoran Regvart added a comment - 17/Aug/20 22:40 I see， thanks for raising this issue. yarn format script is supported only on the Antora UI theme， to invoke it one must be in the antora-ui-camel directory. Show Zoran Regvart added a comment - 17/Aug/20 22:40 I see， thanks for raising this issue. yarn format script is supported only on the Antora UI theme， to invoke it one must be in the antora-ui-camel directory. Hide Permalink ASF GitHub Bot added a comment - 21/Aug/20 18:32 amdmdi opened a new pull request #470: URL: https://github.com/apache/camel-website/pull/470 "yarn format" is supported only in antora-ui-camel dir As per Zoran's suggestion in JIRA: "yarn format script is supported only on the Antora UI theme， to invoke it one must be in the antora-ui-camel directory." ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 21/Aug/20 18:32 amdmdi opened a new pull request #470: URL: https://github.com/apache/camel-website/pull/470 "yarn format" is supported only in antora-ui-camel dir As per Zoran's suggestion in JIRA: "yarn format script is supported only on the Antora UI theme， to invoke it one must be in the antora-ui-camel directory." ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 22/Aug/20 17:59 zregvart commented on pull request #470: URL: https://github.com/apache/camel-website/pull/470#issuecomment-678672117 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 22/Aug/20 17:59 zregvart commented on pull request #470: URL: https://github.com/apache/camel-website/pull/470#issuecomment-678672117 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 22/Aug/20 17:59 zregvart merged pull request #470: URL: https://github.com/apache/camel-website/pull/470 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 22/Aug/20 17:59 zregvart merged pull request #470: URL: https://github.com/apache/camel-website/pull/470 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org
CAMEL-15418,Claus Ibsen,2020-08-15T10:32:30.052Z,1597473150.052， where 1597473150.052 is the epoch,In Swagger Java Library， custom converter can be provided to enrich the Swagger Definition. It can be achieved by extending io.swagger.converter.ModelConverter in the custom converter then， the custom converter will be loaded by the io.swagger.converter.ModelConverters using the Service Loading Mechanism. Note: The loaded custom converters are available only in ModelConverters.getInstance().In camel-swagger-java， the above customisation is not possible because org.apache.camel.swagger.RestModelConverters is derived from io.swagger.converter.ModelConverters and invokes the base class methods. So， the org.apache.camel.swagger.RestModelConverters is unaware of the custom converter and the enrichment is not possible.,Hide Permalink Claus Ibsen added a comment - 24/Aug/20 14:00 Thanks for reporting and the patch. Show Claus Ibsen added a comment - 24/Aug/20 14:00 Thanks for reporting and the patch.
CAMEL-15417,Unassigned,2020-08-14T11:18:52+0000,1597389532， where 1597389532 is the epoch,Add optional fileName property， that so user can assign different name on every new copy of the document. For example:original name picture.jpgnew name Copy of picture.jpg. Some repositories (for example alfresco) allows only documents with unique name to be copied in one directory.,There are no comments yet on this issue.
CAMEL-15416,Unassigned,2020-08-14T08:32:41+0000,1597379561， where 1597379561 is the epoch,Spring Boot， Quarkus and Karaf etc may need a bit time to be ready for Kafka 2.6.x,There are no comments yet on this issue.
CAMEL-15415,Claus Ibsen,2020-08-14T06:28:38+0000,1597372118， where 1597372118 is the epoch,Also upgrade the LTS branch,There are no comments yet on this issue.
CAMEL-15414,Unassigned,2020-08-29T12:17:34+0000,1598689054， where 1598689054 is the epoch,Are there any new options we need to add to camel-kafka also?,Hide Permalink Claus Ibsen added a comment - 29/Aug/20 12:17 There is a new for a SMX bundle 2.5.1 release， there is only 2.5.0 Show Claus Ibsen added a comment - 29/Aug/20 12:17 There is a new for a SMX bundle 2.5.1 release， there is only 2.5.0
CAMEL-15413,Claus Ibsen,2020-08-26T08:32:46+0000,1598416366， where 1598416366 is the epoch,Lets consider renaming this new class. Also rename the documentation， and in camel-quarkus， and camel-spring-boot as well.,Hide Permalink Claus Ibsen added a comment - 26/Aug/20 08:32 Need to rename example and in camel-quarkus Show Claus Ibsen added a comment - 26/Aug/20 08:32 Need to rename example and in camel-quarkus Hide Permalink Claus Ibsen added a comment - 26/Aug/20 08:47 - edited examples DONE quarkus (https://github.com/apache/camel-quarkus/pull/1610) DONE remove deprecate API (when quarkus PR merged) DONE Show Claus Ibsen added a comment - 26/Aug/20 08:47 - edited examples DONE quarkus ( https://github.com/apache/camel-quarkus/pull/1610 ) DONE remove deprecate API (when quarkus PR merged) DONE
CAMEL-15412,Unassigned,2020-08-14T20:00:50+0000,1597420850， where 1597420850 is the epoch,I want to download a file from Box and the setHeader doesn't accept objects when setting the header. The required output parameter is a OutputStream. The integration tests use the component directly as opposed to the URLs or setHeader methods. I would have expected the outputstream payload to be in the Message coming out of the endpoint. The REST component documentation looks more like what I was expecting.My variation of the example from the docs that doesn't work:from("timer:test?period=3600") .setHeader("CamelBox.fileId"， constant("12345678") .setHeader("CamelBox.output"， new ByteArrayOutputStream()) .to("box://files/download") .to("file://out");Using Camel thinking， I tried this code first but I understand if this component wants to be special with its headers and stuff.from("timer:test?period=3600") .to("box://files/download?fileId=123456789") .to("file://out"); Again， please let me know what I can do to help.,Hide Permalink Michael Genereux added a comment - 14/Aug/20 20:00 Here's the workaround. I hope it's right. object BoxRouteBuilder extends RouteBuilder() { override def configure(): Unit = { from(timer("box_start") .process(new Processor { override def process(exchange: Exchange): Unit = { val message = exchange.getMessage() message .setHeader("CamelBox.fileId"， "12345678") exchange.getMessage() .setHeader("CamelBox.output"， stream) } }) .to("box:files/download") .to(kafka("box_file_list") } } Show Michael Genereux added a comment - 14/Aug/20 20:00 Here's the workaround. I hope it's right. object BoxRouteBuilder extends RouteBuilder() { override def configure(): Unit = { from(timer( "box_start" ) .process( new Processor { override def process(exchange: Exchange): Unit = { val message = exchange.getMessage() message .setHeader( "CamelBox.fileId" ， "12345678" ) exchange.getMessage() .setHeader( "CamelBox.output" ， stream) } }) .to( "box:files/download" ) .to(kafka( "box_file_list" ) } }
CAMEL-15411,Unassigned,2020-08-14T03:44:54+0000,1597362294， where 1597362294 is the epoch,Add a small example for the new camel-oaipmh component,There are no comments yet on this issue.
CAMEL-15410,Unassigned,2020-08-13T16:25:36+0000,1597321536， where 1597321536 is the epoch,When passing query parameters to a REST producer the encoding behavior is inconsistent. Consider the following:.to("rest:get:bw-web-api/v1/objects/employees?host=agresso&companyId=RD&select=personId，personName&disconnect=true")The resulting request payload， as observed with Wireshark， is:GET /bw-web-api/v1/objects/employees?companyId=RD&disconnect=true&select=personId%252CpersonName HTTP/1.1\r\nNote that the comma has been double-encoded resulting in transmission of %252C instead of the expected %2C.If instead the problem string is passed as a parameter via a header， the comma is correctly encoded:.setHeader("select"， simple("personId，personName")).to("rest:get:bw-web-api/v1/objects/employees?host=agresso&companyId=RD&select={select}&disconnect=true"),Hide Permalink Kris Boutilier added a comment - 13/Aug/20 16:25 - edited It's not immediately clear if it's related to the above， but I'm also having issues with + vs %20 encoding of spaces when passed in via headers and， because the target server is pedantic， requests that use application/x-www-form-urlencoded style encoding are failing. For example， this: .setHeader("filter"， simple("date(time/date) ge 2020-06-01 and personId eq 'R10019'")) .to("rest:get:bw-web-api/v1/objects/timesheets?host=agresso&companyId=RD&select={select}&filter={filter}&onWorkFlow=true&noWorkflow=true") results in a payload of: GET /bw-web-api/v1/objects/timesheets?companyId=RD&filter=date%28time%2Fdate%29+ge+2020-06-01+and+personId+eq+%27R10019%27&noWorkflow=true&onWorkFlow=true&select=personId%2Cperiod%2Ctime%28*%29 HTTP/1.1\r\n however the server is expecting to see this encoding: GET /bw-web-api/v1/objects/timesheets?companyId=RD&filter=date%28time%2Fdate%29%20ge%202020-06-01%20and%20personId%20eq%20%27R10019%27&onWorkflow=true&noWorkflow=true&select=personId%2Cperiod%2Ctime%28*%29 HTTP/1.1\r\n Show Kris Boutilier added a comment - 13/Aug/20 16:25 - edited It's not immediately clear if it's related to the above， but I'm also having issues with + vs %20 encoding of spaces when passed in via headers and， because the target server is pedantic， requests that use application/x-www-form-urlencoded style encoding are failing. For example， this: .setHeader( "filter" ， simple( "date(time/date) ge 2020-06-01 and personId eq 'R10019' " )) .to( " rest :get:bw-web-api/v1/objects/timesheets?host=agresso&companyId=RD&select={select}&filter={filter}&onWorkFlow= true &noWorkflow= true " ) results in a payload of: GET /bw-web-api/v1/objects/timesheets?companyId=RD&filter=date%28time%2Fdate%29+ge+2020-06-01+and+personId+eq+%27R10019%27&noWorkflow= true &onWorkFlow= true &select=personId%2Cperiod%2Ctime%28*%29 HTTP/1.1\r\n however the server is expecting to see this encoding: GET /bw-web-api/v1/objects/timesheets?companyId=RD&filter=date%28time%2Fdate%29%20ge%202020-06-01%20and%20personId%20eq%20%27R10019%27&onWorkflow= true &noWorkflow= true &select=personId%2Cperiod%2Ctime%28*%29 HTTP/1.1\r\n
CAMEL-15409,Zineb BENDHIBA,2020-08-13T15:04:11+0000,1597316651， where 1597316651 is the epoch,Add the possibility to have operations on graphs in the camel-arangodb component,There are no comments yet on this issue.
CAMEL-15408,Unassigned,2020-08-13T12:48:18+0000,1597308498， where 1597308498 is the epoch,,There are no comments yet on this issue.
CAMEL-15407,Christoph Deppisch,2020-08-13T12:49:18+0000,1597308558， where 1597308558 is the epoch,The merge operation in OData V2 can be used to update individual fields on an entity. The operation should perform an incremental update without replacing all the contents of an entry. In particular the request updates only the properties indicated in the request body， and leaves untouched any other property not mentioned in its current state.When the camel-olingo2 component performs the merge operation all fields are updated - also the not mentioned properties. Those fields not mentioned in the request body are set to null by default.This behavior is controlled by the EntityProvider write property called "isDataBasedPropertySerialization". By default this setting is set to false resulting in non present fields to be set to null by default. For merge operations this setting should be enabled by default in order to just update the mentioned fields in the request body.,Hide Permalink Claus Ibsen added a comment - 13/Aug/20 12:49 Are you working on a PR Show Claus Ibsen added a comment - 13/Aug/20 12:49 Are you working on a PR Hide Permalink Christoph Deppisch added a comment - 18/Aug/20 11:22 Claus Ibsen yes you can assign to me if you want Show Christoph Deppisch added a comment - 18/Aug/20 11:22 Claus Ibsen yes you can assign to me if you want
CAMEL-15406,Christoph Deppisch,2020-08-13T11:16:43+0000,1597303003， where 1597303003 is the epoch,Create and update operations on the camel-olingo2 component use EntityProvider with EntityProviderWriteProperties in order to construct the content data in different data formats (Json， Atom， XML)At the moment these write properties are not configurable by the user. The Camel component just uses the default settings.With this default settings in place the Camel component always adds OData metadata to requests by default. This leads to errors when the target OData service (e.g. https://services.odata.org/V2/OData/OData.svc/) does not support metadata being added to the request.The EntityProviderWriteProperties has options to enable "contentOnly" settings for these kind of OData services. Users need to be able to set these write properties on the endpoint configuration.,There are no comments yet on this issue.
CAMEL-15405,Christoph Deppisch,2020-08-13T08:36:19+0000,1597293379， where 1597293379 is the epoch,Users can query the result count as part of a search result meta data when reading entity sets from OData services (see section 4.9. Inlinecount System Query Option ($inlinecount) in https://www.odata.org/documentation/odata-version-2-0/uri-conventions/).When splitResults is enabled on the component this inline result count is not propagated to the split exchange.We should manually add the inline count in the same way as camel-olingo4 component is doing by adding a ResultCount property on the OData entry.,Hide Permalink Christoph Deppisch added a comment - 13/Aug/20 08:36 The inline count is set on the ODataFeed metadata. When split is enabled the feed gets split into its individual OData entries which becomes the new exchange body. Show Christoph Deppisch added a comment - 13/Aug/20 08:36 The inline count is set on the ODataFeed metadata. When split is enabled the feed gets split into its individual OData entries which becomes the new exchange body.
CAMEL-15404,Claus Ibsen,2020-08-13T16:48:00+0000,1597322880， where 1597322880 is the epoch,Looking in https://github.com/apache/camel/blob/master/components/camel-box/camel-box-component/src/generated/resources/org/apache/camel/component/box/box.json， none of the URI options for the different box API methods are available to the Endpoint DSL generator. I don't know if there's an "escape valve" to allow me to apply non-typesafe options if the typesafe one is not available. Maybe it's a bug if the options are just not there.Here's the endpoint I expected to write:object BoxRouteBuilder extends RouteBuilder() { override def configure(): Unit = { from(timer("box_start").repeatCount(1)) .to(box("folders/getFolderItems").folderId("12345678") .to(kafka("box_file_list") }}but instead I had to write this working code:object BoxRouteBuilder extends RouteBuilder() { override def configure(): Unit = { from(timer("box_start").repeatCount(1)) .to("box:folders/getFolderItems?folderId=12345678") .to(kafka("box_file_list") }},Hide Permalink Michael Genereux added a comment - 13/Aug/20 16:48 Claus Ibsen is this a softball issue? I'm new to Camel but can I help? Show Michael Genereux added a comment - 13/Aug/20 16:48 Claus Ibsen is this a softball issue? I'm new to Camel but can I help? Hide Permalink Claus Ibsen added a comment - 26/Aug/20 12:21 Michael thanks for the offer， unfortunately its a bit more complex as it involves source code generation and whatnot Show Claus Ibsen added a comment - 26/Aug/20 12:21 Michael thanks for the offer， unfortunately its a bit more complex as it involves source code generation and whatnot Hide Permalink Claus Ibsen added a comment - 26/Aug/20 12:22 This may also apply for some of the other api components with extended configuration classes Show Claus Ibsen added a comment - 26/Aug/20 12:22 This may also apply for some of the other api components with extended configuration classes
CAMEL-15403,Freeman Yue Fang,2020-08-12T16:31:04+0000,1597235464， where 1597235464 is the epoch,It's caused by a newline "\n" isn't expected in the test payload for JDK 1.8_261.I noticed that we've already had code likeif (TestSupport.getJavaMajorVersion() >= 9) { includeNewLine = false; }to determine need this newline or not. And I believe the lastest JDK8(Oracle JDK8 261) surely take the same logic as JDK9+ now.We need also check the 1.8 minor version,There are no comments yet on this issue.
CAMEL-15402,Unassigned,2020-08-12T12:45:52+0000,1597221952， where 1597221952 is the epoch,Having written a couple of tests for pieces of routes within a Camel application， I have noticed that testing routes defined by components annotated with @Consume("direct:xyz") work quite well， but components that extend the class org.apache.camel.builder.RouteBuilder suffer from the following issue.The component scanning by Spring encounters these components fine. If they are autowired in the test， then those fields have a value as expected. But when the test route has to invoke it， then delivery fails throwing a DirectConsumerNotAvailableException.The work-around is to invoke camelContext.addRoutes(autowiredInstance) in the test， which should not be necessary and clutters up the test code.Demonstration of the issue: https://github.com/BertKoor/camelCase/blob/master/src/test/java/nl/ordina/bertkoor/camelcase/service/CamelHealthServiceClientTest.java,There are no comments yet on this issue.
CAMEL-15401,Unassigned,2020-08-12T12:26:03+0000,1597220763， where 1597220763 is the epoch,When searching online for strategies to test a fragment of a Camel route with JUnit5 in the context of a Spring Boot application， the returned documentation seems somewhat outdated (favouring xml instead of java config for both Spring and Camel related aspects) and missing a major point.Some top google hits for "apache camel test spring boot" are: https://camel.apache.org/manual/latest/testing.html One (at least me) gets drawn to the "Spring Test With Java Config" example. When rebuilding from that example in a SpringBoot app， it won't ever work because the ProducerTemplate and MockEndpoint instances remain null. I happened to have an old working example of a project built with Camel v2.20 which had the annotation @ContextConfiguration(loader = CamelSpringDelegatingTestContextLoader.class). Adding that (and a dependency on camel-test-spring on top of camel-test-spring-junit5) made the injections work but caused an NPE at org.apache.camel.test.spring.CamelAnnotationsHandler.handleDisableJmx(CamelAnnotationsHandler.java:90) which gets fixed by adding a static method that sets a dummy test class in CamelSpringTestHelper. After asking for assistance on gitter it was suggested to try to annotate the test class with @CamelSpring*Boot*Test instead of @CamelSpringTest as the example showed. As always with annotations: that "magically" solved all issues. There was no way I could have known it existed. https://camel.apache.org/manual/latest/spring-testing.html Using CamelSpringTestSupport and rolling your own implementation of an AbstractApplicationContext does not sound very attractive. The list of examples goes further with "Plain Spring tests" but only supported by JUnit4. It is uncertain whether this has any chance to work with JUnit5. https://camel.apache.org/components/latest/others/test-spring.html As already stated on the page: old and needs updating. Won't comment further. This looks like the original example I built my Camel v2.20 project with， using the CamelSpringDelegatingTestContextLoader https://camel.apache.org/components/latest/others/test-spring-junit5.html It first suggests to extend CamelSpringTestSupport， but writing only my test config in xml does not sound appealing. Next comes an example again using @CamelSpringTest which has identical issues as brought up in my first bullet.,There are no comments yet on this issue.
CAMEL-15400,Claus Ibsen,2020-08-12T11:40:22+0000,1597218022， where 1597218022 is the epoch,Reported on user forumhttp://camel.465427.n5.nabble.com/Camel-Rest-Endpoint-DSL-prefix-the-string-quot-null-quot-to-query-parameters-key-td5878225.html,Hide Permalink Claus Ibsen added a comment - 12/Aug/20 11:40 src/generated/java/org/apache/camel/builder/endpoint/dsl/CryptoCmsEndpointBuilderFactory.java: doSetMultiValueProperty("recipient"， "null" + key， value); src/generated/java/org/apache/camel/builder/endpoint/dsl/JpaEndpointBuilderFactory.java: doSetMultiValueProperty("parameters"， "null" + key， value); src/generated/java/org/apache/camel/builder/endpoint/dsl/RestEndpointBuilderFactory.java: doSetMultiValueProperty("queryParameters"， "null" + key， value); Show Claus Ibsen added a comment - 12/Aug/20 11:40 src/generated/java/org/apache/camel/builder/endpoint/dsl/CryptoCmsEndpointBuilderFactory.java: doSetMultiValueProperty("recipient"， "null" + key， value); src/generated/java/org/apache/camel/builder/endpoint/dsl/JpaEndpointBuilderFactory.java: doSetMultiValueProperty("parameters"， "null" + key， value); src/generated/java/org/apache/camel/builder/endpoint/dsl/RestEndpointBuilderFactory.java: doSetMultiValueProperty("queryParameters"， "null" + key， value); Hide Permalink Claus Ibsen added a comment - 12/Aug/20 12:02 Fixed for rest， jpa and crypto-cms Show Claus Ibsen added a comment - 12/Aug/20 12:02 Fixed for rest， jpa and crypto-cms
CAMEL-15399,Unassigned,2020-08-12T10:37:44+0000,1597214264， where 1597214264 is the epoch,,Hide Permalink Luca Burgazzoli added a comment - 12/Aug/20 10:37 Duplicated of CAMEL-15398 Show Luca Burgazzoli added a comment - 12/Aug/20 10:37 Duplicated of CAMEL-15398
CAMEL-15398,Claus Ibsen,2020-08-12T10:36:22+0000,1597214182， where 1597214182 is the epoch,To move the properties binding bits (PropertyBindingSupport.java) from the main.adoc into its own doc and expand on that. And link to it from the main.adoc file.,There are no comments yet on this issue.
CAMEL-15397,Luca Burgazzoli,2020-08-12T08:31:45+0000,1597206705， where 1597206705 is the epoch,In addition to support automatig binding for list and maps we should support arrays,There are no comments yet on this issue.
CAMEL-15396,Luca Burgazzoli,2020-08-12T08:29:25+0000,1597206565， where 1597206565 is the epoch,Assuming we have a set of properties like:camel.k.sources[0] = #class:SourceDefinitioncamel.k.sources[0].name = timercamel.k.sources[0].language = yamlcamel.k.sources[3] = #class:SourceDefinitioncamel.k.sources[3].name = testcamel.k.sources[3].language = xmlThen binding to a target class with a code like:PropertyBindingSupport.build() .withCamelContext(context) .withTarget(conf) .withProperties(properties) .withRemoveParameters(false) .withOptionPrefix("camel.k.") .withConfigurer(configurer) .bind()Would fail for index out of bound.,There are no comments yet on this issue.
CAMEL-15395,Andrea Cosentino,2020-08-12T06:25:34.687Z,1597199134.687， where 1597199134.687 is the epoch,It gives ResolveEndpointFailedException while creating camel AWS-SQS endpoint with URL.For example， below producer or consumer endpoint is not being created.uri="https://sqs.us-east-1.amazonaws.com/104966627370/test-comms-filebroker-mvan"And it throws error as follows.Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: aws-sqs://test-comms-filebroker-s3?amazonSQSClient=%23client&concurrentConsumers=5&deleteAfterRead=false&maxMessagesPerPoll=1&queueOwnerAWSAccountId=056684691971&region=us-east-1 due to: No enum constant com.amazonaws.regions.Regions.us-east-1 at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:752) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.util.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:80) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.model.RouteDefinition.resolveEndpoint(RouteDefinition.java:227) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:116) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:122) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.model.FromDefinition.resolveEndpoint(FromDefinition.java:75) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.impl.DefaultRouteContext.getEndpoint(DefaultRouteContext.java:98) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1332) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:212) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] ... 16 moreCaused by: java.lang.IllegalArgumentException: No enum constant com.amazonaws.regions.Regions.us-east-1 at java.lang.Enum.valueOf(Enum.java:238) ~[?:1.8.0_265] at com.amazonaws.regions.Regions.valueOf(Regions.java:25) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.component.aws.sqs.SqsEndpoint.doStart(SqsEndpoint.java:132) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:72) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.util.ServiceHelper.startService(ServiceHelper.java:75) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.impl.DefaultCamelContext.deferStartService(DefaultCamelContext.java:1554) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.impl.DefaultCamelContext.doAddService(DefaultCamelContext.java:1471) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.impl.DefaultCamelContext.addService(DefaultCamelContext.java:1441) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.impl.DefaultCamelContext.addService(DefaultCamelContext.java:1437) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:748) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.util.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:80) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.model.RouteDefinition.resolveEndpoint(RouteDefinition.java:227) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:116) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.impl.DefaultRouteContext.resolveEndpoint(DefaultRouteContext.java:122) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.model.FromDefinition.resolveEndpoint(FromDefinition.java:75) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.impl.DefaultRouteContext.getEndpoint(DefaultRouteContext.java:98) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:1332) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT] at org.apache.camel.model.RouteDefinition.addRoutes(RouteDefinition.java:212) ~[filebroker-jar-with-dependencies.jar:2.15.38-SNAPHOT],Hide Permalink Andrea Cosentino added a comment - 11/Aug/20 20:29 If you are specifying the region as URI param it must be US_EAST_1 Show Andrea Cosentino added a comment - 11/Aug/20 20:29 If you are specifying the region as URI param it must be US_EAST_1 Hide Permalink Andrea Cosentino added a comment - 11/Aug/20 20:34 The us-east-1 approach works with aws2 Show Andrea Cosentino added a comment - 11/Aug/20 20:34 The us-east-1 approach works with aws2 Hide Permalink Andrea Cosentino added a comment - 12/Aug/20 07:41 Can you please share your route? How are you specifying your route? Through Arn or are you specifying the region explicitly? Show Andrea Cosentino added a comment - 12/Aug/20 07:41 Can you please share your route? How are you specifying your route? Through Arn or are you specifying the region explicitly? Hide Permalink Nikolay Blindov added a comment - 12/Aug/20 08:23 - edited Andrea Cosentino I'm sorry， looks like that related to custom code and no need any camel changes. Thank you. Show Nikolay Blindov added a comment - 12/Aug/20 08:23 - edited Andrea Cosentino I'm sorry， looks like that related to custom code and no need any camel changes. Thank you.
CAMEL-15394,Claus Ibsen,2020-08-11T15:36:47+0000,1597145807， where 1597145807 is the epoch,,Hide Permalink Claus Ibsen added a comment - 11/Aug/20 15:36 There is potential an issue with setting options via configurer and using list types Camel K needs this SourcesCofiguration conf = new SourcesCofiguration(); PropertyBindingSupport.build() .withCamelContext(context) .withTarget(conf) .withProperties(properties) .withRemoveParameters(false) .withOptionPrefix("camel.k.") .withConfigurer(configurer) .bind() camel.k.sources[0].name = timer camel.k.sources[0].language = yaml camel.k.sources[0].location = file:/etc/camel/sources/timer/timer.yaml camel.k.sources[0].type = template Creating this ticket to look into this to get this fixed in camel-core Show Claus Ibsen added a comment - 11/Aug/20 15:36 There is potential an issue with setting options via configurer and using list types Camel K needs this SourcesCofiguration conf = new SourcesCofiguration(); PropertyBindingSupport.build() .withCamelContext(context) .withTarget(conf) .withProperties(properties) .withRemoveParameters( false ) .withOptionPrefix( "camel.k." ) .withConfigurer(configurer) .bind() camel.k.sources[0].name = timer camel.k.sources[0].language = yaml camel.k.sources[0].location = file:/etc/camel/sources/timer/timer.yaml camel.k.sources[0].type = template Creating this ticket to look into this to get this fixed in camel-core Hide Permalink Luca Burgazzoli added a comment - 13/Aug/20 08:55 I've created a repo to have a reproducer for the issue: https://github.com/lburgazzoli/camel-property-biding. When running it， it show: [main] INFO org.apache.camel.impl.engine.DefaultBeanIntrospection - Stopping BeanIntrospection which was invoked: 3 times This means that the configurer is not kicking it to set the properties and this happens because the configurer have no support for subscription operator so when the configure method is invoked with keys like sources[0]， that key does not fall into any of the switch/case options. Wonder if we should have dedicated methods or support for such pattern. Show Luca Burgazzoli added a comment - 13/Aug/20 08:55 I've created a repo to have a reproducer for the issue: https://github.com/lburgazzoli/camel-property-biding . When running it， it show: [main] INFO org.apache.camel.impl.engine.DefaultBeanIntrospection - Stopping BeanIntrospection which was invoked: 3 times This means that the configurer is not kicking it to set the properties and this happens because the configurer have no support for subscription operator so when the configure method is invoked with keys like sources [0] ， that key does not fall into any of the switch/case options. Wonder if we should have dedicated methods or support for such pattern. Hide Permalink Claus Ibsen added a comment - 14/Aug/20 15:23 Yeah lets work on making this possible - we dont want reflection. Added your project as a reproducer in camel-main Show Claus Ibsen added a comment - 14/Aug/20 15:23 Yeah lets work on making this possible - we dont want reflection. Added your project as a reproducer in camel-main Hide Permalink Claus Ibsen added a comment - 15/Aug/20 05:48 I think we can reduce the code path by creating a reflection configurer we use when there is no source code generated / explicit configurer provided， then the code path can be the same， instead of doing something else depending on a configurer is null or not null. Show Claus Ibsen added a comment - 15/Aug/20 05:48 I think we can reduce the code path by creating a reflection configurer we use when there is no source code generated / explicit configurer provided， then the code path can be the same， instead of doing something else depending on a configurer is null or not null. Hide Permalink Claus Ibsen added a comment - 17/Aug/20 10:29 Okay its a bit more tricky， working on this from a different angel Show Claus Ibsen added a comment - 17/Aug/20 10:29 Okay its a bit more tricky， working on this from a different angel Hide Permalink Claus Ibsen added a comment - 18/Aug/20 09:32 Have some half ugly code that works， that enhancned the configurer itself to support OGNL and list/map/array. Since this logic is a bit duplicate of property binding support that uses reflection based， then it would be great if we could somehow merge this logic and make it work for both configurer vs reflection. Show Claus Ibsen added a comment - 18/Aug/20 09:32 Have some half ugly code that works， that enhancned the configurer itself to support OGNL and list/map/array. Since this logic is a bit duplicate of property binding support that uses reflection based， then it would be great if we could somehow merge this logic and make it work for both configurer vs reflection. Hide Permalink Claus Ibsen added a comment - 19/Aug/20 04:12 - edited TODO: autowired to work with configurer DONE TODO: OGNL walk reworked DONE TODO: PropertyConfigurerSupport to be back to as before DONE TODO: option prefix DONE TODO: Auto create middle objects via configurer DONE TODO: OGNL walk reflection map/list/array create new instance if necessary DONE TODO: Can we turn reflection into a cheating configurer implementation that does reflection under the hood to have same code path as a real configurer WONT DO TODO: The problem with # ref values that does lookup for non string types problem DONE Show Claus Ibsen added a comment - 19/Aug/20 04:12 - edited TODO: autowired to work with configurer DONE TODO: OGNL walk reworked DONE TODO: PropertyConfigurerSupport to be back to as before DONE TODO: option prefix DONE TODO: Auto create middle objects via configurer DONE TODO: OGNL walk reflection map/list/array create new instance if necessary DONE TODO: Can we turn reflection into a cheating configurer implementation that does reflection under the hood to have same code path as a real configurer WONT DO TODO: The problem with # ref values that does lookup for non string types problem DONE
CAMEL-15393,Unassigned,2020-08-12T11:29:34+0000,1597217374， where 1597217374 is the epoch,camel-spring-javaconfig is historically spring framework without xml， eg java config.And that later lead to spring boot.This is for standalone spring (without spring boot).But lets deprecate this as spring boot is a better choice， and this is hardly in use or maintained anymore.,Hide Permalink Bert Koorengevel added a comment - 12/Aug/20 11:29 What target component would you suggest to move `SingleRouteCamelConfiguration` to? Show Bert Koorengevel added a comment - 12/Aug/20 11:29 What target component would you suggest to move `SingleRouteCamelConfiguration` to?
CAMEL-15392,Unassigned,2020-08-11T13:09:07.142Z,1597136947.142， where 1597136947.142 is the epoch,The card layout design for the documentation and community page seemed plain compared to the other pages of the website. Thus， included rounded background over the links for the pages and rounded border over the section to provide the card-like layout. This will fit with the new design for the front page. I have created a PR regarding it with a minimal design approach however I came up with a few more designs.,Hide Permalink Aemie added a comment - 11/Aug/20 13:12 Zoran Regvart Maria Arias de Reyna Dominguez what are your opinions on this new design approach. The previous design is a community-design-card and contributing-design-card. The rest 3 are the recent designs， I feel are more dynamic and fit better. Show Aemie added a comment - 11/Aug/20 13:12 Zoran Regvart Maria Arias de Reyna Dominguez what are your opinions on this new design approach. The previous design is a community-design-card and contributing-design-card. The rest 3 are the recent designs， I feel are more dynamic and fit better. Hide Permalink Zoran Regvart added a comment - 11/Aug/20 13:58 Looks great， I prefer the versions with separate buttons and icon on the left. Show Zoran Regvart added a comment - 11/Aug/20 13:58 Looks great， I prefer the versions with separate buttons and icon on the left. Hide Permalink Claus Ibsen added a comment - 11/Aug/20 14:03 Great mock ups. I prefer button-link-docs-sub-project.png Show Claus Ibsen added a comment - 11/Aug/20 14:03 Great mock ups. I prefer button-link-docs-sub-project.png Hide Permalink ASF GitHub Bot added a comment - 17/Aug/20 08:49 zregvart merged pull request #453: URL: https://github.com/apache/camel-website/pull/453 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 17/Aug/20 08:49 zregvart merged pull request #453: URL: https://github.com/apache/camel-website/pull/453 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Aashna Jena added a comment - 17/Aug/20 21:27 I still think that 6 orange buttons in a row look too much， especially because they are splitting even at my normal view. Since the idea is to move closer to design of the front page， I think we can move away from the box design and have something like this : I like this better because we can easily fit 3 links， it's similar to the front page design and there isn't too much orange. Also since we have odd number of projects， we have a big leftover space on the right of Camel Karaf in the current layout which looks odd to me. Zoran Regvart Maria Arias de Reyna Dominguez Aemie Claus Ibsen what do you think? Show Aashna Jena added a comment - 17/Aug/20 21:27 I still think that 6 orange buttons in a row look too much， especially because they are splitting even at my normal view. Since the idea is to move closer to design of the front page， I think we can move away from the box design and have something like this : I like this better because we can easily fit 3 links， it's similar to the front page design and there isn't too much orange. Also since we have odd number of projects， we have a big leftover space on the right of Camel Karaf in the current layout which looks odd to me. Zoran Regvart Maria Arias de Reyna Dominguez Aemie Claus Ibsen what do you think? Hide Permalink Aemie added a comment - 18/Aug/20 02:50 - edited In my honest opinion， this is moving back to the manner of presentation it was before the card layout. I like how the frontpage design appears in spite of the coverage of a lot of vertical space but it appears fine there. However， from a user perspective， if I were to come across documentation and community pages， I would like to view things at first glance. In the manner you proposed， we continue to increase the vertical space and I don't really like the idea of covering too much vertical space when we can make use of less vertical space and accomplish the task. Other than that， I don't find a problem with an odd number of projects either， looks consistent either way I could find an alternate method to cover less space of buttons within the card layout and use a lighter shade of the orange from the camel logo. But I strongly prefer the card layout over the complete description layout. Also， I went through the initial setup or talk on the design of the documentation page， icons were only made use of. However， only icons don't draw a clear picture of what it represents for each user. Thus， using icons along with what it represents provides the perfect idea to the user where the particular button would link to. Show Aemie added a comment - 18/Aug/20 02:50 - edited In my honest opinion， this is moving back to the manner of presentation it was before the card layout. I like how the frontpage design appears in spite of the coverage of a lot of vertical space but it appears fine there. However， from a user perspective， if I were to come across documentation and community pages， I would like to view things at first glance. In the manner you proposed， we continue to increase the vertical space and I don't really like the idea of covering too much vertical space when we can make use of less vertical space and accomplish the task. Other than that， I don't find a problem with an odd number of projects either， looks consistent either way I could find an alternate method to cover less space of buttons within the card layout and use a lighter shade of the orange from the camel logo. But I strongly prefer the card layout over the complete description layout. Also， I went through the initial setup or talk on the design of the documentation page， icons were only made use of. However， only icons don't draw a clear picture of what it represents for each user. Thus， using icons along with what it represents provides the perfect idea to the user where the particular button would link to. Hide Permalink Aashna Jena added a comment - 18/Aug/20 04:00 You can't really argue about the vertical spcae. I've implemented this and it actually used less vertical space than the card layout. In the cards， we have to specify explicit height of the descriptions， hence we have a lot of extra between descriptions and links， which is not the case here. As for personal choice， I think we should wait for others to comment as well. Before the card layout， it was just a bunch of text， so I don't think it's fair to say that we're moving back. The reason for including 1 project in a row is to have 3 buttons in a row， not 6， because they split at >1270px as well I don't mind including icons， they feel a little redundant in this case because they are just increasing the width of the button + we haven't used icons in buttons anywhere else on the website. We can definitely include them if everyone agrees. Show Aashna Jena added a comment - 18/Aug/20 04:00 You can't really argue about the vertical spcae. I've implemented this and it actually used less vertical space than the card layout. In the cards， we have to specify explicit height of the descriptions， hence we have a lot of extra between descriptions and links， which is not the case here. As for personal choice， I think we should wait for others to comment as well. Before the card layout， it was just a bunch of text， so I don't think it's fair to say that we're moving back. The reason for including 1 project in a row is to have 3 buttons in a row， not 6， because they split at >1270px as well I don't mind including icons， they feel a little redundant in this case because they are just increasing the width of the button + we haven't used icons in buttons anywhere else on the website. We can definitely include them if everyone agrees. Hide Permalink ASF GitHub Bot added a comment - 27/Aug/20 22:03 zregvart opened a new pull request #471: URL: https://github.com/apache/camel-website/pull/471 Based on pull request #469 by @aashnajena， rebased with fixed links. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/Aug/20 22:03 zregvart opened a new pull request #471: URL: https://github.com/apache/camel-website/pull/471 Based on pull request #469 by @aashnajena， rebased with fixed links. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 28/Aug/20 05:26 AemieJ commented on pull request #471: URL: https://github.com/apache/camel-website/pull/471#issuecomment-682332561 ![issue-prob](https://user-images.githubusercontent.com/44139348/91524519-0f67b680-e91d-11ea-9290-e982cdb5172b.png) This is an issue within the documentation page for the certain screen width. `line-height` must be provided to overcome this. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 28/Aug/20 05:26 AemieJ commented on pull request #471: URL: https://github.com/apache/camel-website/pull/471#issuecomment-682332561 ! [issue-prob] ( https://user-images.githubusercontent.com/44139348/91524519-0f67b680-e91d-11ea-9290-e982cdb5172b.png ) This is an issue within the documentation page for the certain screen width. `line-height` must be provided to overcome this. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 28/Aug/20 05:29 AemieJ commented on pull request #471: URL: https://github.com/apache/camel-website/pull/471#issuecomment-682333471 I personally find the structure of the documentation page within the desktop screen version quite disorientated and unstructured. I would prefer it if the images were on the same side as presented as on the community page， looks neater. Also， I observed that due to one image for camel-core the context isn't aligned with the contents of the sub-project. I find the following structure much neater: ![structured-look](https://user-images.githubusercontent.com/44139348/91524695-74bba780-e91d-11ea-981c-9bbd9545f66f.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 28/Aug/20 05:29 AemieJ commented on pull request #471: URL: https://github.com/apache/camel-website/pull/471#issuecomment-682333471 I personally find the structure of the documentation page within the desktop screen version quite disorientated and unstructured. I would prefer it if the images were on the same side as presented as on the community page， looks neater. Also， I observed that due to one image for camel-core the context isn't aligned with the contents of the sub-project. I find the following structure much neater: ! [structured-look] ( https://user-images.githubusercontent.com/44139348/91524695-74bba780-e91d-11ea-981c-9bbd9545f66f.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 28/Aug/20 05:35 AemieJ commented on a change in pull request #471: URL: https://github.com/apache/camel-website/pull/471#discussion_r478840106 ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -74，30 +74，32 @@ header.frontpage p { line-height: 1.7rem; } -.frontpage a.button-dark， -.frontpage a.button-dark:hover { +a.button， +section.frontpage a.button { white-space: nowrap; padding: 0.7rem 1rem; background-color: var(--color-camel-orange); background-image: none; background-repeat: no-repeat; background-position: 0; color: white; font-weight: bold; margin-right: 0.5rem; + background-image: none; border-radius: 3rem; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; + font-weight: bold; + padding: 0.4rem 1rem; Review comment: ```suggestion padding: 0.4rem 1rem; line-height: 2.5rem; ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 28/Aug/20 05:35 AemieJ commented on a change in pull request #471: URL: https://github.com/apache/camel-website/pull/471#discussion_r478840106 ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -74，30 +74，32 @@ header.frontpage p { line-height: 1.7rem; } -.frontpage a.button-dark， -.frontpage a.button-dark:hover { +a.button， +section.frontpage a.button { white-space: nowrap; padding: 0.7rem 1rem; background-color: var(--color-camel-orange); background-image: none; background-repeat: no-repeat; background-position: 0; color: white; font-weight: bold; margin-right: 0.5rem; + background-image: none; border-radius: 3rem; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; + font-weight: bold; + padding: 0.4rem 1rem; Review comment: ```suggestion padding: 0.4rem 1rem; line-height: 2.5rem; ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 28/Aug/20 07:58 aashnajena commented on a change in pull request #471: URL: https://github.com/apache/camel-website/pull/471#discussion_r478909001 ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -74，30 +74，32 @@ header.frontpage p { line-height: 1.7rem; } -.frontpage a.button-dark， -.frontpage a.button-dark:hover { +a.button， +section.frontpage a.button { white-space: nowrap; padding: 0.7rem 1rem; background-color: var(--color-camel-orange); background-image: none; background-repeat: no-repeat; background-position: 0; color: white; font-weight: bold; margin-right: 0.5rem; + background-image: none; border-radius: 3rem; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; + font-weight: bold; + padding: 0.4rem 1rem; Review comment: When exactly are you observing the overlap? I have already provided line-height for <1024px screens to avoid the overlap， and I can't see the buttons overlapping for any screen width. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 28/Aug/20 07:58 aashnajena commented on a change in pull request #471: URL: https://github.com/apache/camel-website/pull/471#discussion_r478909001 ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -74，30 +74，32 @@ header.frontpage p { line-height: 1.7rem; } -.frontpage a.button-dark， -.frontpage a.button-dark:hover { +a.button， +section.frontpage a.button { white-space: nowrap; padding: 0.7rem 1rem; background-color: var(--color-camel-orange); background-image: none; background-repeat: no-repeat; background-position: 0; color: white; font-weight: bold; margin-right: 0.5rem; + background-image: none; border-radius: 3rem; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; + font-weight: bold; + padding: 0.4rem 1rem; Review comment: When exactly are you observing the overlap? I have already provided line-height for <1024px screens to avoid the overlap， and I can't see the buttons overlapping for any screen width. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 28/Aug/20 08:02 aashnajena commented on pull request #471: URL: https://github.com/apache/camel-website/pull/471#issuecomment-682388217 @AemieJ The camel core context is not aligned with the rest because there's only one icon present， and if we give it 30% width， it leaves a lot of blank space which looks bad. Since the alignments are alternating， it's not a noticeable flaw. I did think about making them all left-aligned， but it looks very odd to have one icon for camel core and two for the rest. If we can use just one icon for each sub-project， the left-alignment will look good. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 28/Aug/20 08:02 aashnajena commented on pull request #471: URL: https://github.com/apache/camel-website/pull/471#issuecomment-682388217 @AemieJ The camel core context is not aligned with the rest because there's only one icon present， and if we give it 30% width， it leaves a lot of blank space which looks bad. Since the alignments are alternating， it's not a noticeable flaw. I did think about making them all left-aligned， but it looks very odd to have one icon for camel core and two for the rest. If we can use just one icon for each sub-project， the left-alignment will look good. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 28/Aug/20 08:03 aashnajena commented on a change in pull request #471: URL: https://github.com/apache/camel-website/pull/471#discussion_r478909001 ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -74，30 +74，32 @@ header.frontpage p { line-height: 1.7rem; } -.frontpage a.button-dark， -.frontpage a.button-dark:hover { +a.button， +section.frontpage a.button { white-space: nowrap; padding: 0.7rem 1rem; background-color: var(--color-camel-orange); background-image: none; background-repeat: no-repeat; background-position: 0; color: white; font-weight: bold; margin-right: 0.5rem; + background-image: none; border-radius: 3rem; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; + font-weight: bold; + padding: 0.4rem 1rem; Review comment: When exactly are you observing the overlap? I have already provided line-height for <1024px screens (line 355) to avoid the overlap， and I can't see the buttons overlapping for any screen width. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 28/Aug/20 08:03 aashnajena commented on a change in pull request #471: URL: https://github.com/apache/camel-website/pull/471#discussion_r478909001 ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -74，30 +74，32 @@ header.frontpage p { line-height: 1.7rem; } -.frontpage a.button-dark， -.frontpage a.button-dark:hover { +a.button， +section.frontpage a.button { white-space: nowrap; padding: 0.7rem 1rem; background-color: var(--color-camel-orange); background-image: none; background-repeat: no-repeat; background-position: 0; color: white; font-weight: bold; margin-right: 0.5rem; + background-image: none; border-radius: 3rem; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; + font-weight: bold; + padding: 0.4rem 1rem; Review comment: When exactly are you observing the overlap? I have already provided line-height for <1024px screens (line 355) to avoid the overlap， and I can't see the buttons overlapping for any screen width. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 28/Aug/20 08:06 AemieJ commented on a change in pull request #471: URL: https://github.com/apache/camel-website/pull/471#discussion_r478917571 ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -74，30 +74，32 @@ header.frontpage p { line-height: 1.7rem; } -.frontpage a.button-dark， -.frontpage a.button-dark:hover { +a.button， +section.frontpage a.button { white-space: nowrap; padding: 0.7rem 1rem; background-color: var(--color-camel-orange); background-image: none; background-repeat: no-repeat; background-position: 0; color: white; font-weight: bold; margin-right: 0.5rem; + background-image: none; border-radius: 3rem; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; + font-weight: bold; + padding: 0.4rem 1rem; Review comment: This overlapping is observed for 1024px as well. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 28/Aug/20 08:06 AemieJ commented on a change in pull request #471: URL: https://github.com/apache/camel-website/pull/471#discussion_r478917571 ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -74，30 +74，32 @@ header.frontpage p { line-height: 1.7rem; } -.frontpage a.button-dark， -.frontpage a.button-dark:hover { +a.button， +section.frontpage a.button { white-space: nowrap; padding: 0.7rem 1rem; background-color: var(--color-camel-orange); background-image: none; background-repeat: no-repeat; background-position: 0; color: white; font-weight: bold; margin-right: 0.5rem; + background-image: none; border-radius: 3rem; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; + font-weight: bold; + padding: 0.4rem 1rem; Review comment: This overlapping is observed for 1024px as well. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 28/Aug/20 08:10 AemieJ commented on pull request #471: URL: https://github.com/apache/camel-website/pull/471#issuecomment-682391273 @aashnajena I hear you but I respectfully disagree with you. In my opinion， altering a few lines of CSS and making it look structured and consistent through gives a neater effect to the design be it 1 or 2 images. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 28/Aug/20 08:10 AemieJ commented on pull request #471: URL: https://github.com/apache/camel-website/pull/471#issuecomment-682391273 @aashnajena I hear you but I respectfully disagree with you. In my opinion， altering a few lines of CSS and making it look structured and consistent through gives a neater effect to the design be it 1 or 2 images. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 28/Aug/20 08:22 aashnajena commented on a change in pull request #471: URL: https://github.com/apache/camel-website/pull/471#discussion_r478928891 ########## File path: antora-ui-camel/src/css/docs.css ########## @@ -1，154 +1，84 @@ -.docs { - padding: 1rem 3rem; -} - -.docs p:empty { - display: none; -} - -.section h2 { - text-align: center; - padding-bottom: 0; -} - -.camel-project { width: calc(100% - 3rem); display: inline-flex; border: 1px solid var(--color-smoke-90); +.docs， +.community { + padding: 1rem 3rem 2rem; + display: flex; + width: 80%; flex-direction: column; - align-items: center; - text-align: center; - padding: 1rem 1rem 2rem 1rem; - margin: 1.5rem; - border-radius: 10px; } -.camel-project .section { - border: none; - padding: 0; -} - -.camel-project .section.core { width: 100%; +.docs .box， +.community .box { + display: flex; + margin: 1rem 0; } -.camel-project .camel-documentation .links { background-color: var(--color-camel-orange-light); padding: 0 0.5rem; border-radius: 25px; color: var(--navbar-background); +.docs .box .content， +.community .box .content { + width: 70%; } -.camel-project .camel-documentation .links a { color: var(--navbar-background); font-weight: bolder; +.docs .box img， +.community .box img { + margin-top: 4rem; + height: 8vw; + max-height: 6rem; + margin-right: 0.5rem; } -.section { display: inline-flex; border: 1px solid var(--color-smoke-90); width: calc(50% - 3.2rem); flex-direction: column; align-items: center; +.docs .box .icon { + width: 30%; text-align: center; - padding: 1rem; - margin: 1.5rem; - border-radius: 10px; -} - -.section > a， -.camel-project > a { - background: none; -} - -.section a > img， -.camel-project a > img { - display: inline-block; - width: auto; - height: 5rem; - margin-top: 1rem; -} - -.section a > img + img { - padding-left: 1rem; } -.section .description { padding: 1.2rem; +.docs .box.camel-core .icon， +.community .box .icon { + width: 20%; text-align: center; } -.section .list { - display: flex; - flex-wrap: wrap; - justify-content: center; -} - -.section .links { - display: flex; - flex-wrap: wrap; - align-items: center; - margin: 1.5rem 0; - word-break: break-word; - background-color: var(--color-camel-orange-light); - padding: 0 0.5rem; - border-radius: 25px; - color: var(--navbar-background); -} - -.section .list pre { - padding: 0; - width: 0.5rem; - box-shadow: none; - overflow-x: hidden; - background: none; -} - -.section .list .links { margin: 0.5rem; +.icon a， +a.button-light， +a.button-dark { + background-image: none; } -.section .links img { - height: 1.5rem; - width: 2rem; - margin: 0.35rem 0 0 0.25rem; -} - -.section .links p { - margin: 0; -} - -.section .links .partition { - background: #fff; - height: 2.5rem; - width: 0.1rem; - margin: 0 0.5rem; -} - -.section .links a { color: var(--navbar-background); font-weight: bolder; +.docs .box.camel-core .content { + width: 80%; } @media screen and (max-width: 1023px) { .docs { + .docs， + .community { padding: 0 1rem 4rem; + width: 100%; } .camel-project， .section { width: calc(100% - 1rem); margin: 1.5rem -1.5rem 1.5rem 0.5rem; + .docs .box， + .community .box， + .docs .box .content， + .community .box .content， + .docs .box .icon， + .community .box .icon { Review comment: Missed out on these rules earlier ```suggestion .community .box .icon， .docs .box.camel-core .content， .docs .box.camel-core .icon { ``` ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -74，30 +74，32 @@ header.frontpage p { line-height: 1.7rem; } -.frontpage a.button-dark， -.frontpage a.button-dark:hover { +a.button， +section.frontpage a.button { white-space: nowrap; padding: 0.7rem 1rem; background-color: var(--color-camel-orange); background-image: none; background-repeat: no-repeat; background-position: 0; color: white; font-weight: bold; margin-right: 0.5rem; + background-image: none; border-radius: 3rem; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; + font-weight: bold; + padding: 0.4rem 1rem; Review comment: My view at 1024px 100% zoom ![Screenshot 2020-08-28 at 1 48 47 PM](https://user-images.githubusercontent.com/32356795/91538379-64172b80-e935-11ea-8f54-27f8350d24c6.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 28/Aug/20 08:22 aashnajena commented on a change in pull request #471: URL: https://github.com/apache/camel-website/pull/471#discussion_r478928891 ########## File path: antora-ui-camel/src/css/docs.css ########## @@ -1，154 +1，84 @@ -.docs { - padding: 1rem 3rem; -} - -.docs p:empty { - display: none; -} - -.section h2 { - text-align: center; - padding-bottom: 0; -} - -.camel-project { width: calc(100% - 3rem); display: inline-flex; border: 1px solid var(--color-smoke-90); +.docs， +.community { + padding: 1rem 3rem 2rem; + display: flex; + width: 80%; flex-direction: column; - align-items: center; - text-align: center; - padding: 1rem 1rem 2rem 1rem; - margin: 1.5rem; - border-radius: 10px; } -.camel-project .section { - border: none; - padding: 0; -} - -.camel-project .section.core { width: 100%; +.docs .box， +.community .box { + display: flex; + margin: 1rem 0; } -.camel-project .camel-documentation .links { background-color: var(--color-camel-orange-light); padding: 0 0.5rem; border-radius: 25px; color: var(--navbar-background); +.docs .box .content， +.community .box .content { + width: 70%; } -.camel-project .camel-documentation .links a { color: var(--navbar-background); font-weight: bolder; +.docs .box img， +.community .box img { + margin-top: 4rem; + height: 8vw; + max-height: 6rem; + margin-right: 0.5rem; } -.section { display: inline-flex; border: 1px solid var(--color-smoke-90); width: calc(50% - 3.2rem); flex-direction: column; align-items: center; +.docs .box .icon { + width: 30%; text-align: center; - padding: 1rem; - margin: 1.5rem; - border-radius: 10px; -} - -.section > a， -.camel-project > a { - background: none; -} - -.section a > img， -.camel-project a > img { - display: inline-block; - width: auto; - height: 5rem; - margin-top: 1rem; -} - -.section a > img + img { - padding-left: 1rem; } -.section .description { padding: 1.2rem; +.docs .box.camel-core .icon， +.community .box .icon { + width: 20%; text-align: center; } -.section .list { - display: flex; - flex-wrap: wrap; - justify-content: center; -} - -.section .links { - display: flex; - flex-wrap: wrap; - align-items: center; - margin: 1.5rem 0; - word-break: break-word; - background-color: var(--color-camel-orange-light); - padding: 0 0.5rem; - border-radius: 25px; - color: var(--navbar-background); -} - -.section .list pre { - padding: 0; - width: 0.5rem; - box-shadow: none; - overflow-x: hidden; - background: none; -} - -.section .list .links { margin: 0.5rem; +.icon a， +a.button-light， +a.button-dark { + background-image: none; } -.section .links img { - height: 1.5rem; - width: 2rem; - margin: 0.35rem 0 0 0.25rem; -} - -.section .links p { - margin: 0; -} - -.section .links .partition { - background: #fff; - height: 2.5rem; - width: 0.1rem; - margin: 0 0.5rem; -} - -.section .links a { color: var(--navbar-background); font-weight: bolder; +.docs .box.camel-core .content { + width: 80%; } @media screen and (max-width: 1023px) { .docs { + .docs， + .community { padding: 0 1rem 4rem; + width: 100%; } .camel-project， .section { width: calc(100% - 1rem); margin: 1.5rem -1.5rem 1.5rem 0.5rem; + .docs .box， + .community .box， + .docs .box .content， + .community .box .content， + .docs .box .icon， + .community .box .icon { Review comment: Missed out on these rules earlier ```suggestion .community .box .icon， .docs .box.camel-core .content， .docs .box.camel-core .icon { ``` ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -74，30 +74，32 @@ header.frontpage p { line-height: 1.7rem; } -.frontpage a.button-dark， -.frontpage a.button-dark:hover { +a.button， +section.frontpage a.button { white-space: nowrap; padding: 0.7rem 1rem; background-color: var(--color-camel-orange); background-image: none; background-repeat: no-repeat; background-position: 0; color: white; font-weight: bold; margin-right: 0.5rem; + background-image: none; border-radius: 3rem; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; + font-weight: bold; + padding: 0.4rem 1rem; Review comment: My view at 1024px 100% zoom ! [Screenshot 2020-08-28 at 1 48 47 PM] ( https://user-images.githubusercontent.com/32356795/91538379-64172b80-e935-11ea-8f54-27f8350d24c6.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 20/Oct/20 09:34 aashnajena commented on pull request #471: URL: https://github.com/apache/camel-website/pull/471#issuecomment-712724304 @zregvart can we fix and merge this? The website still shows underlines under images and I think this PR fixes that as well ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 20/Oct/20 09:34 aashnajena commented on pull request #471: URL: https://github.com/apache/camel-website/pull/471#issuecomment-712724304 @zregvart can we fix and merge this? The website still shows underlines under images and I think this PR fixes that as well ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 20/Oct/20 10:12 zregvart commented on pull request #471: URL: https://github.com/apache/camel-website/pull/471#issuecomment-712746433 @aashnajena thanks for the ping. I'll rebase and merge this later today. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 20/Oct/20 10:12 zregvart commented on pull request #471: URL: https://github.com/apache/camel-website/pull/471#issuecomment-712746433 @aashnajena thanks for the ping. I'll rebase and merge this later today. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 21/Oct/20 07:25 zregvart commented on pull request #471: URL: https://github.com/apache/camel-website/pull/471#issuecomment-713367576 I'm rather tied up with other tasks， so I didn't have the time to look at this yesterday， I'll try to find some time today. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 21/Oct/20 07:25 zregvart commented on pull request #471: URL: https://github.com/apache/camel-website/pull/471#issuecomment-713367576 I'm rather tied up with other tasks， so I didn't have the time to look at this yesterday， I'll try to find some time today. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 26/Oct/20 15:52 zregvart merged pull request #471: URL: https://github.com/apache/camel-website/pull/471 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 26/Oct/20 15:52 zregvart merged pull request #471: URL: https://github.com/apache/camel-website/pull/471 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 26/Oct/20 15:53 zregvart commented on pull request #471: URL: https://github.com/apache/camel-website/pull/471#issuecomment-716640940 This is now merged thanks @aashnajena and @AemieJ. I'm sure we'll find other issues to improve， feel free to raise issues or create additional PRs for them. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 26/Oct/20 15:53 zregvart commented on pull request #471: URL: https://github.com/apache/camel-website/pull/471#issuecomment-716640940 This is now merged thanks @aashnajena and @AemieJ. I'm sure we'll find other issues to improve， feel free to raise issues or create additional PRs for them. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Zoran Regvart added a comment - 26/Oct/20 15:54 Thanks Aemie and Aashna Jena! Show Zoran Regvart added a comment - 26/Oct/20 15:54 Thanks Aemie and Aashna Jena !
CAMEL-15391,Otavio Rodolfo Piske,2020-08-11T06:37:31+0000,1597113451， where 1597113451 is the epoch,I noticed that the option amazonAWSHost is not set for the aws2-sqs component. Even though it is set， looking at the logs I have this: 2020-08-10 17:56:40，399 [ool-38-thread-1] DEBUG software.amazon.awssdk.http.apache.internal.net.SdkSslSocket - created: sqs.us-east-1.amazonaws.com/52.46.157.96:4432020-08-10 17:56:40，493 [22-d77deac8917f] WARN org.apache.kafka.clients.NetworkClient - [Consumer clientId=consumer-bfaf2b64-f5ce-4d5c-8d22-d77deac8917f-4， groupId=bfaf2b64-f5ce-4d5c-8d22-d77deac8917f] Connection to node 0 (localhost/127.0.0.1:39079) could not be established. Broker may not be available.2020-08-10 17:56:40，539 [cf-e03742d0c9b1] WARN org.apache.kafka.clients.NetworkClient - [Consumer clientId=consumer-7e6786ce-c9ba-47a0-b0cf-e03742d0c9b1-8， groupId=7e6786ce-c9ba-47a0-b0cf-e03742d0c9b1] Connection to node 0 (localhost/127.0.0.1:45741) could not be established. Broker may not be available.2020-08-10 17:56:40，598 [ool-38-thread-1] DEBUG software.amazon.awssdk.http.apache.internal.net.SdkSslSocket - shutting down output of sqs.us-east-1.amazonaws.com/52.46.157.96:4432020-08-10 17:56:40，598 [ool-38-thread-1] DEBUG software.amazon.awssdk.http.apache.internal.net.SdkSslSocket - shutting down input of sqs.us-east-1.amazonaws.com/52.46.157.96:4432020-08-10 17:56:40，599 [ool-38-thread-1] DEBUG software.amazon.awssdk.http.apache.internal.net.SdkSslSocket - closing sqs.us-east-1.amazonaws.com/52.46.157.96:443 This is slightly similar to CAMEL-14002.,Hide Permalink Otavio Rodolfo Piske added a comment - 11/Aug/20 06:37 I know where the problem is and I will send a proposed fix for it soon. Show Otavio Rodolfo Piske added a comment - 11/Aug/20 06:37 I know where the problem is and I will send a proposed fix for it soon. Hide Permalink Claus Ibsen added a comment - 11/Aug/20 14:22 Backported to 3.4.x branch too Show Claus Ibsen added a comment - 11/Aug/20 14:22 Backported to 3.4.x branch too
CAMEL-15390,Zineb BENDHIBA,2020-08-10T12:36:27+0000,1597048587， where 1597048587 is the epoch,See the class javadoc of org.apache.camel.util.CollectionStringBuffer,Hide Permalink Claus Ibsen added a comment - 10/Aug/20 12:36 So first step is to not use this deprecated class in camel itself and use the JDK utils instead. Then in the future we will remove the deprecated class Show Claus Ibsen added a comment - 10/Aug/20 12:36 So first step is to not use this deprecated class in camel itself and use the JDK utils instead. Then in the future we will remove the deprecated class Hide Permalink Zineb BENDHIBA added a comment - 11/Aug/20 07:38 I'm working on this one !! Show Zineb BENDHIBA added a comment - 11/Aug/20 07:38 I'm working on this one !! Hide Permalink Zineb BENDHIBA added a comment - 11/Aug/20 13:35 PR : https://github.com/apache/camel/pull/4085 Show Zineb BENDHIBA added a comment - 11/Aug/20 13:35 PR : https://github.com/apache/camel/pull/4085
CAMEL-15389,Claus Ibsen,2020-08-10T05:54:12+0000,1597024452， where 1597024452 is the epoch,We should improve the docs about camel-main that it supports camel.beans. as property prefix to specify custom beansSee this questionhttps://github.com/apache/camel-kafka-connector/issues/323,Hide Permalink Claus Ibsen added a comment - 10/Aug/20 05:54 The main docs at https://camel.apache.org/components/latest/others/main.html Show Claus Ibsen added a comment - 10/Aug/20 05:54 The main docs at https://camel.apache.org/components/latest/others/main.html Hide Permalink Ganesh added a comment - 11/Aug/20 08:13 Hi Claus Ibsen， Can you please explain how to use ? I couldn't get from the documentation. Show Ganesh added a comment - 11/Aug/20 08:13 Hi Claus Ibsen ， Can you please explain how to use ? I couldn't get from the documentation. Hide Permalink Claus Ibsen added a comment - 11/Aug/20 08:16 Do you mean optional keys camel.beans.foo.?someKeyHere = 123 Then that value is only set if the foo bean has an option named someKeyHere Show Claus Ibsen added a comment - 11/Aug/20 08:16 Do you mean optional keys camel.beans.foo.?someKeyHere = 123 Then that value is only set if the foo bean has an option named someKeyHere Hide Permalink Claus Ibsen added a comment - 31/Aug/20 06:36 Ah okay I can see it can be a little confusing when the previous examples had foo.company. So I changed the example to be something else Show Claus Ibsen added a comment - 31/Aug/20 06:36 Ah okay I can see it can be a little confusing when the previous examples had foo.company. So I changed the example to be something else
CAMEL-15388,Claus Ibsen,2020-08-09T15:37:00+0000,1596973020， where 1596973020 is the epoch,We should upgrade to latest patch release of spring and spring-boot on the LTS branch,There are no comments yet on this issue.
CAMEL-15387,Claus Ibsen,2020-08-09T21:41:10+0000,1596994870， where 1596994870 is the epoch,When assign the following line in application.properties， the property doesn't get set.camel.component.salesforce.packages=com.companyname.camel.salesforce.dtoThe line that sets it is (in generated file)case "packages": target.setPackages(property(camelContext， java.lang.String[].class， value)); return true;There's no converter from String to String[]. If the generated code tried to use String to String， the setter for packages will properly split on commas.I don't know the right way to fix this. Should there be a converter or should the generated code know to just assign it as a String since a setter is available?,Hide Permalink Michael Genereux added a comment - 09/Aug/20 21:41 Very cool. Thank you! Show Michael Genereux added a comment - 09/Aug/20 21:41 Very cool. Thank you!
CAMEL-15386,Unassigned,2020-08-07T17:10:41+0000,1596805841， where 1596805841 is the epoch,I was trying to update to opentelemetry 0.7 and noticed some breaking changes. It seems the semantic conventions are going change between opentracing and opentelemetryhttps://github.com/opentracing/specification/blob/1.1/semantic_conventions.mdhttps://github.com/open-telemetry/opentelemetry-specification/blob/master/specification/trace/semantic_conventions/database.md#notes-and-well-known-identifiers-for-dbsystemThe problem we have is the fact that we are sharing stuff between opentracing and opentelemetry through the camel-tracing component and since they removed the DB_TYPE and DB_INSTANCE， we need to find a different way or a workaroundhttps://github.com/open-telemetry/opentelemetry-java/commit/8525405239173cb8cb6eb4e72cc421b37a8ab2fbRuben Vargas,Hide Permalink Ruben Vargas added a comment - 07/Aug/20 17:10 - edited I'll take a look at this， I will see what are our options Show Ruben Vargas added a comment - 07/Aug/20 17:10 - edited I'll take a look at this， I will see what are our options
CAMEL-15385,Unassigned,2020-08-07T12:24:16+0000,1596788656， where 1596788656 is the epoch,camel-kafka-connector does this // reordering properties to place the one starting with "#class:" first LinkedHashMap<String， String> orderedProps = new LinkedHashMap<>(); props.keySet().stream() .filter(k -> props.get(k).startsWith("#class:")) .forEach(k -> orderedProps.put(k， props.get(k))); props.keySet().stream() .filter(k -> !props.get(k).startsWith("#class:")) .forEach(k -> orderedProps.put(k， props.get(k)));Seems like a good idea to make camel-main resolve the class first so any nested properties can be set on the created class.,Hide Permalink Claus Ibsen added a comment - 07/Aug/20 12:24 The binding support already set reference first， eg # syntax， so that means main.addProperty("camel.component.seda.defaultQueueFactory.counter"， "123"); main.addProperty("camel.component.seda.defaultQueueFactory"， "#class:org.apache.camel.main.MySedaBlockingQueueFactory"); Then the #class will be set first before the counter Show Claus Ibsen added a comment - 07/Aug/20 12:24 The binding support already set reference first， eg # syntax， so that means main.addProperty("camel.component.seda.defaultQueueFactory.counter"， "123"); main.addProperty("camel.component.seda.defaultQueueFactory"， "#class:org.apache.camel.main.MySedaBlockingQueueFactory"); Then the #class will be set first before the counter
CAMEL-15384,Claus Ibsen,2020-08-10T15:59:35+0000,1597060775， where 1597060775 is the epoch,So you can configure this once on the component level (also via spring boot auto configuration etc)， instead of having to use endpoint uri parameters.,Hide Permalink Claus Ibsen added a comment - 10/Aug/20 15:59 The same was done for vertx-http Show Claus Ibsen added a comment - 10/Aug/20 15:59 The same was done for vertx-http
CAMEL-15383,Andrea Cosentino,2020-08-07T06:12:39+0000,1596766359， where 1596766359 is the epoch,When using velocity component seems like camel is using deprecated values for some configuration keys:org.apache.velocity.engine-core - 2.1.0 | configuration key 'class.resource.loader.class' has been deprecated in favor of 'resource.loader.class.class'org.apache.velocity.engine-core - 2.1.0 | configuration key 'resource.loader' has been deprecated in favor of 'resource.loaders'org.apache.velocity.engine-core - 2.1.0 | configuration key 'class.resource.loader.description' has been deprecated in favor of 'resource.loader.class.description'This generates WARNing logs when using the component.,Hide Permalink Andrea Cosentino added a comment - 07/Aug/20 06:12 This has been already fixed on 3.5.x https://github.com/apache/camel/commit/bd9a160d845dbc15ce67c9f846d42ca937d68b37#diff-27ed1404ba21a15203d4a720549f8cee Show Andrea Cosentino added a comment - 07/Aug/20 06:12 This has been already fixed on 3.5.x https://github.com/apache/camel/commit/bd9a160d845dbc15ce67c9f846d42ca937d68b37#diff-27ed1404ba21a15203d4a720549f8cee Hide Permalink Tapio Piironen added a comment - 07/Aug/20 06:15 will this fix be backported to LTS 3.4 release? Show Tapio Piironen added a comment - 07/Aug/20 06:15 will this fix be backported to LTS 3.4 release? Hide Permalink Andrea Cosentino added a comment - 07/Aug/20 06:24 No， because changing the key name will break backwards compatibility Show Andrea Cosentino added a comment - 07/Aug/20 06:24 No， because changing the key name will break backwards compatibility
CAMEL-15382,Unassigned,2020-08-07T01:53:17+0000,1596750797， where 1596750797 is the epoch,Context propagation for opentelemetry doesn't work as expected. When I have two services in different processes， the context is not propagated.,There are no comments yet on this issue.
CAMEL-15381,Claus Ibsen,2020-08-06T15:36:03+0000,1596713763， where 1596713763 is the epoch,CronComponent invokes setProperties on the CamelCronConfiguration object， which means reflection is used to set the properties:https://github.com/apache/camel/blob/master/components/camel-cron/src/main/java/org/apache/camel/component/cron/CronComponent.java#L48It'd be nice if we could avoid this， as otherwise we have to register CamelCronConfiguration for reflection in camel-quarkus.There's a test case over in the camel-quarkus project using Quartz as the cron scheduler to help prove any fixes:https://github.com/apache/camel-quarkus/blob/master/integration-tests/quartz/src/main/java/org/apache/camel/quarkus/component/quartz/it/QuartzRoutes.java#L29-L31,There are no comments yet on this issue.
CAMEL-15380,Andrea Cosentino,2020-08-06T11:15:29+0000,1596698129， where 1596698129 is the epoch,if I set moveAfterRead=true the file will be moved to destinationBucket.If I upload a file twice (same file name) may be with the same or different content it will be replaced in the destinationBucket.For archiving/history it would be useful， if the filename would get optional a pre- or suffix. So you will find the file twice in the destinationBucket.Default for pre-/suffix: date/time,Hide Permalink Andrea Cosentino added a comment - 06/Aug/20 11:15 Lets see but I don't want to overengineer the component. Show Andrea Cosentino added a comment - 06/Aug/20 11:15 Lets see but I don't want to overengineer the component. Hide Permalink Andrea Cosentino added a comment - 06/Aug/20 11:18 We did this error with aws-s3 and in the end we have too much options. Also I don't think， for optional parameters， like these， a default value is needed， you'll add the value if you'll use them， through a simple expression. I'll work on this for 3.5.0 Show Andrea Cosentino added a comment - 06/Aug/20 11:18 We did this error with aws-s3 and in the end we have too much options. Also I don't think， for optional parameters， like these， a default value is needed， you'll add the value if you'll use them， through a simple expression. I'll work on this for 3.5.0
CAMEL-15379,Unassigned,2020-08-06T06:53:54+0000,1596682434， where 1596682434 is the epoch,Running unit tests for the CDI examples have some fail.,There are no comments yet on this issue.
CAMEL-15378,Claus Ibsen,2020-08-06T01:58:59+0000,1596664739， where 1596664739 is the epoch,When using Faltpack endpoint for delimited file parsing， the file gets locked and doesn't move to .done or .error folder if we configure it to do that.,There are no comments yet on this issue.
CAMEL-15377,Claus Ibsen,2020-08-05T15:29:01+0000,1596626941， where 1596626941 is the epoch,This option has its implications when using JTA transactions. But there can be use-cases with eg two spring boot apps (A and B)， where B needs transactional behavior for processing a request/reply to send it back. Then A can set this option to mimic a transaction for request/reply that runs unmanged from any existing transaction.in Camel 2.x this option was deprecated so we can remove the deprecation.,There are no comments yet on this issue.
CAMEL-15376,Unassigned,2020-08-05T10:34:27+0000,1596609267， where 1596609267 is the epoch,The examples such as camel-spring-boot-examples， camel-examples etc are using -SNAPSHOT dependencies. What we should do is to do a "release" where we use a fixed version such as 3.4.2， and then a tag at github. Then other users can download the tag to try.,Hide Permalink Claus Ibsen added a comment - 05/Aug/20 10:34 We do this for some like camel-examples， but not for spring boot etc. Show Claus Ibsen added a comment - 05/Aug/20 10:34 We do this for some like camel-examples， but not for spring boot etc.
CAMEL-15375,Andrea Cosentino,2020-08-05T09:15:57+0000,1596604557， where 1596604557 is the epoch,,There are no comments yet on this issue.
CAMEL-15374,Andrea Cosentino,2020-08-05T07:28:26+0000,1596598106， where 1596598106 is the epoch,,There are no comments yet on this issue.
CAMEL-15373,Andrea Cosentino,2020-08-05T06:05:41+0000,1596593141， where 1596593141 is the epoch,,There are no comments yet on this issue.
CAMEL-15372,Andrea Cosentino,2020-08-05T05:00:55+0000,1596589255， where 1596589255 is the epoch,It seems like after a regeneration (1)， opentracing clases were deleted.If I try to compile the Camel sprint boot opentracing example from:apache/camel-spring-boot-examples repository the following errors arise: camel-spring-boot-examples/camel-example-spring-boot-opentracing/service1/src/main/java/sample/camel/Service1Application.java:[30，2] cannot find symbol [ERROR] symbol: class CamelOpenTracing 1) https://github.com/apache/camel-spring-boot/commit/acbdd17f997b7b70a9877ca7de2ce09153866168,There are no comments yet on this issue.
CAMEL-15371,Unassigned,2020-08-07T10:55:31.144Z,1596783331.144， where 1596783331.144 is the epoch,I think links should be underlined by default， this is recommended by W3 accessibility guidelines. Links that resemble buttons should not be underlined.,Hide Permalink Aemie added a comment - 07/Aug/20 10:56 For the documentation links that are listed in form of unordered list， I think a better option would be to make it bold as it will catch the focus and change the presentation of the lists within the documentation (list-style.png) Show Aemie added a comment - 07/Aug/20 10:56 For the documentation links that are listed in form of unordered list， I think a better option would be to make it bold as it will catch the focus and change the presentation of the lists within the documentation (list-style.png) Hide Permalink Zoran Regvart added a comment - 07/Aug/20 11:37 Sorry should have made this clearer. I meant links that appear in text， not in menus. Show Zoran Regvart added a comment - 07/Aug/20 11:37 Sorry should have made this clearer. I meant links that appear in text， not in menus. Hide Permalink ASF GitHub Bot added a comment - 08/Aug/20 08:30 AemieJ opened a new pull request #452: URL: https://github.com/apache/camel-website/pull/452 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 08/Aug/20 08:30 AemieJ opened a new pull request #452: URL: https://github.com/apache/camel-website/pull/452 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 10/Aug/20 21:15 zregvart commented on a change in pull request #452: URL: https://github.com/apache/camel-website/pull/452#discussion_r468190215 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -149，6 +149，16 @@ .doc a { color: var(--link-font-color); word-break: break-word; + text-decoration: underline; + text-underline-position: under; Review comment: This bit looks a bit weird to me. ```suggestion ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 10/Aug/20 21:15 zregvart commented on a change in pull request #452: URL: https://github.com/apache/camel-website/pull/452#discussion_r468190215 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -149，6 +149，16 @@ .doc a { color: var(--link-font-color); word-break: break-word; + text-decoration: underline; + text-underline-position: under; Review comment: This bit looks a bit weird to me. ```suggestion ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 11/Aug/20 04:08 AemieJ commented on a change in pull request #452: URL: https://github.com/apache/camel-website/pull/452#discussion_r468314821 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -149，6 +149，16 @@ .doc a { color: var(--link-font-color); word-break: break-word; + text-decoration: underline; + text-underline-position: under; Review comment: You require this particular line so that there is a minimum distance between the underline and the text. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 11/Aug/20 04:08 AemieJ commented on a change in pull request #452: URL: https://github.com/apache/camel-website/pull/452#discussion_r468314821 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -149，6 +149，16 @@ .doc a { color: var(--link-font-color); word-break: break-word; + text-decoration: underline; + text-underline-position: under; Review comment: You require this particular line so that there is a minimum distance between the underline and the text. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 11/Aug/20 21:01 zregvart commented on a change in pull request #452: URL: https://github.com/apache/camel-website/pull/452#discussion_r468862318 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -149，6 +149，16 @@ .doc a { color: var(--link-font-color); word-break: break-word; + text-decoration: underline; + text-underline-position: under; Review comment: Right， so this is with `text-underline-position: under`: ![Screenshot_2020-08-11 Home - Apache Camel](https://user-images.githubusercontent.com/1306050/89947841-5e2b0600-dc25-11ea-87eb-0ee28caca42a.png) and without: ![Screenshot_2020-08-11 Home - Apache Camel(1)](https://user-images.githubusercontent.com/1306050/89947917-7d299800-dc25-11ea-805b-4bacfc13cc4b.png) I think what you're reacting to is that the underline is quite noticeable， perhaps adding to make it lighter: ```suggestion text-decoration-thickness: 1px; text-decoration-style: dotted; ``` Would help， this is how it renders in Firefox: ![Screenshot_2020-08-11 Home - Apache Camel(3)](https://user-images.githubusercontent.com/1306050/89948444-70f20a80-dc26-11ea-9a57-b84bd5659c42.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 11/Aug/20 21:01 zregvart commented on a change in pull request #452: URL: https://github.com/apache/camel-website/pull/452#discussion_r468862318 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -149，6 +149，16 @@ .doc a { color: var(--link-font-color); word-break: break-word; + text-decoration: underline; + text-underline-position: under; Review comment: Right， so this is with `text-underline-position: under`: ! [Screenshot_2020-08-11 Home - Apache Camel] ( https://user-images.githubusercontent.com/1306050/89947841-5e2b0600-dc25-11ea-87eb-0ee28caca42a.png ) and without: ! [Screenshot_2020-08-11 Home - Apache Camel(1)] ( https://user-images.githubusercontent.com/1306050/89947917-7d299800-dc25-11ea-805b-4bacfc13cc4b.png ) I think what you're reacting to is that the underline is quite noticeable， perhaps adding to make it lighter: ```suggestion text-decoration-thickness: 1px; text-decoration-style: dotted; ``` Would help， this is how it renders in Firefox: ! [Screenshot_2020-08-11 Home - Apache Camel(3)] ( https://user-images.githubusercontent.com/1306050/89948444-70f20a80-dc26-11ea-9a57-b84bd5659c42.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 12/Aug/20 05:37 AemieJ commented on a change in pull request #452: URL: https://github.com/apache/camel-website/pull/452#discussion_r469015728 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -149，6 +149，16 @@ .doc a { color: var(--link-font-color); word-break: break-word; + text-decoration: underline; + text-underline-position: under; Review comment: I am not sure about to dotted style. It would look quite odd. I will look into the thickness. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 12/Aug/20 05:37 AemieJ commented on a change in pull request #452: URL: https://github.com/apache/camel-website/pull/452#discussion_r469015728 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -149，6 +149，16 @@ .doc a { color: var(--link-font-color); word-break: break-word; + text-decoration: underline; + text-underline-position: under; Review comment: I am not sure about to dotted style. It would look quite odd. I will look into the thickness. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 12/Aug/20 07:46 AemieJ commented on a change in pull request #452: URL: https://github.com/apache/camel-website/pull/452#discussion_r469069517 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -149，6 +149，16 @@ .doc a { color: var(--link-font-color); word-break: break-word; + text-decoration: underline; + text-underline-position: under; Review comment: Thickness feature isn't present for chrome browser and the dotted style looks inconsistent. Either we just not include under or we include it. It's best to keep it simple. Or I could use the `border-bottom` property. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 12/Aug/20 07:46 AemieJ commented on a change in pull request #452: URL: https://github.com/apache/camel-website/pull/452#discussion_r469069517 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -149，6 +149，16 @@ .doc a { color: var(--link-font-color); word-break: break-word; + text-decoration: underline; + text-underline-position: under; Review comment: Thickness feature isn't present for chrome browser and the dotted style looks inconsistent. Either we just not include under or we include it. It's best to keep it simple. Or I could use the `border-bottom` property. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 12/Aug/20 07:49 AemieJ commented on a change in pull request #452: URL: https://github.com/apache/camel-website/pull/452#discussion_r469015728 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -149，6 +149，16 @@ .doc a { color: var(--link-font-color); word-break: break-word; + text-decoration: underline; + text-underline-position: under; Review comment: I am not sure about to dotted style. It would look quite odd. I will look into the thickness. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 12/Aug/20 07:49 AemieJ commented on a change in pull request #452: URL: https://github.com/apache/camel-website/pull/452#discussion_r469015728 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -149，6 +149，16 @@ .doc a { color: var(--link-font-color); word-break: break-word; + text-decoration: underline; + text-underline-position: under; Review comment: I am not sure about to dotted style. It would look quite odd. I will look into the thickness. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 12/Aug/20 09:14 zregvart commented on pull request #452: URL: https://github.com/apache/camel-website/pull/452#issuecomment-672756511 Not sure about the underline being below the descenders. My personal preference would be ```css text-decoration: underline; text-decoration-style: dotted; ``` There are some methods on different underline styles at [css tricks](https://css-tricks.com/styling-underlines-web/) and I remember reading about the underline journey at [medium](https://medium.design/crafting-link-underlines-on-medium-7c03a9274f9) (for inspiration). @aashnajena and @delawen any thoughts on this? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 12/Aug/20 09:14 zregvart commented on pull request #452: URL: https://github.com/apache/camel-website/pull/452#issuecomment-672756511 Not sure about the underline being below the descenders. My personal preference would be ```css text-decoration: underline; text-decoration-style: dotted; ``` There are some methods on different underline styles at [css tricks] ( https://css-tricks.com/styling-underlines-web/ ) and I remember reading about the underline journey at [medium] ( https://medium.design/crafting-link-underlines-on-medium-7c03a9274f9 ) (for inspiration). @aashnajena and @delawen any thoughts on this? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 12/Aug/20 09:28 AemieJ commented on pull request #452: URL: https://github.com/apache/camel-website/pull/452#issuecomment-672763684 @zregvart alright I got your concern about it but with those changes， it looks messy in chrome browser， I found a method using background-image and linear-gradient on the CSS tricks site. ``` background-image: linear-gradient(to right， #583ac2 50%， transparent 50%); background-position: 0 1.1em; background-repeat: repeat-x; background-size: 7px 1px; ``` If it's okay with you， I will implement it in this manner， it will create a neater effect of underline on each browser. ![underline-link](https://user-images.githubusercontent.com/44139348/89999311-3e8af080-dcac-11ea-9709-038102702239.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 12/Aug/20 09:28 AemieJ commented on pull request #452: URL: https://github.com/apache/camel-website/pull/452#issuecomment-672763684 @zregvart alright I got your concern about it but with those changes， it looks messy in chrome browser， I found a method using background-image and linear-gradient on the CSS tricks site. ``` background-image: linear-gradient(to right， #583ac2 50%， transparent 50%); background-position: 0 1.1em; background-repeat: repeat-x; background-size: 7px 1px; ``` If it's okay with you， I will implement it in this manner， it will create a neater effect of underline on each browser. ! [underline-link] ( https://user-images.githubusercontent.com/44139348/89999311-3e8af080-dcac-11ea-9709-038102702239.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 13/Aug/20 21:55 zregvart commented on pull request #452: URL: https://github.com/apache/camel-website/pull/452#issuecomment-673729800 > ``` > background-image: linear-gradient(to right， #583ac2 50%， transparent 50%); > background-position: 0 1.1em; > background-repeat: repeat-x; > background-size: 7px 1px; > ``` Does the `background-position` track different font sizes correctly? Might be a bit of a headache to have this properly positioned for all font sizes. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 13/Aug/20 21:55 zregvart commented on pull request #452: URL: https://github.com/apache/camel-website/pull/452#issuecomment-673729800 > ``` > background-image: linear-gradient(to right， #583ac2 50%， transparent 50%); > background-position: 0 1.1em; > background-repeat: repeat-x; > background-size: 7px 1px; > ``` Does the `background-position` track different font sizes correctly? Might be a bit of a headache to have this properly positioned for all font sizes. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 14/Aug/20 02:42 AemieJ commented on pull request #452: URL: https://github.com/apache/camel-website/pull/452#issuecomment-673852064 @zregvart I have checked it， the `background-position` tracks all the font-size of the text and that of browsers correctly. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 14/Aug/20 02:42 AemieJ commented on pull request #452: URL: https://github.com/apache/camel-website/pull/452#issuecomment-673852064 @zregvart I have checked it， the `background-position` tracks all the font-size of the text and that of browsers correctly. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 14/Aug/20 08:25 zregvart merged pull request #452: URL: https://github.com/apache/camel-website/pull/452 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 14/Aug/20 08:25 zregvart merged pull request #452: URL: https://github.com/apache/camel-website/pull/452 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 14/Aug/20 08:25 zregvart commented on pull request #452: URL: https://github.com/apache/camel-website/pull/452#issuecomment-673955668 Thanks @AemieJ ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 14/Aug/20 08:25 zregvart commented on pull request #452: URL: https://github.com/apache/camel-website/pull/452#issuecomment-673955668 Thanks @AemieJ ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Zoran Regvart added a comment - 14/Aug/20 08:26 Thanks @AemieJ Show Zoran Regvart added a comment - 14/Aug/20 08:26 Thanks @AemieJ
CAMEL-15370,Freeman Yue Fang,2020-08-06T11:17:43.866Z,1596698263.866， where 1596698263.866 is the epoch,If using a query parameter name multiple times， only the last value is actually used. e.g. .to("cxfrs:http://example.com/") with Exchange value Exchange.HTTP_QUERY id=1&id=2 will call to example.com with id=2 As far as i can tell the problem is caused by CxfRsProducer::getQueryParametersFromQueryString. In the method all query paramters are inserted in a map， and only the last use of a parameter name is preserved. One solution would be to insert the values directy into the client field， skipping the Map.,Hide Permalink Claus Ibsen added a comment - 05/Aug/20 05:47 Okay sounds good， would you be able to provide a fix as a PR Show Claus Ibsen added a comment - 05/Aug/20 05:47 Okay sounds good， would you be able to provide a fix as a PR Hide Permalink Frank Denninger added a comment - 05/Aug/20 19:27 Hi Claus Ibsen， i added a patch with a testcase and the changes to CxfRSProducer. I could write a version that has less changes to the class， but i think the version in the patch is more consistent. It is my first patch here， so it might not hold up to your standards. Regards， Frank Show Frank Denninger added a comment - 05/Aug/20 19:27 Hi Claus Ibsen ， i added a patch with a testcase and the changes to CxfRSProducer. I could write a version that has less changes to the class， but i think the version in the patch is more consistent. It is my first patch here， so it might not hold up to your standards. Regards， Frank Hide Permalink Chandrakant Hardahe added a comment - 05/Aug/20 20:44 Hi Frank， I have modified existing method where I'm checking if that query param is already present at map if yes then I'm adding all the values by & and while calling client I'm splitting it and calling for all the values. Refer CAMEL-15370_Chandra.patch Show Chandrakant Hardahe added a comment - 05/Aug/20 20:44 Hi Frank， I have modified existing method where I'm checking if that query param is already present at map if yes then I'm adding all the values by & and while calling client I'm splitting it and calling for all the values. Refer CAMEL-15370 _Chandra.patch Hide Permalink Frank Denninger added a comment - 05/Aug/20 21:05 - edited Hi Chandrakant， this implementation will cause problems if the value contains an & (or %26 escaped) See this failing testcase: @Test public void testProducerWithQueryParametersWithMultipleValues2() { Exchange exchange = template.send("cxfrs://http://localhost:" + getPort2() + "/" + getClass().getSimpleName() + "/testQuery?httpClientAPI=true&synchronous=true"， new Processor() { public void process(Exchange exchange) throws Exception { exchange.setPattern(ExchangePattern.InOut); Message inMessage = exchange.getIn(); // set the Http method inMessage.setHeader(Exchange.HTTP_METHOD， "GET"); inMessage.setHeader(CxfConstants.CAMEL_CXF_RS_RESPONSE_CLASS， InputStream.class); inMessage.setHeader(Exchange.HTTP_QUERY， "id=1%262"); inMessage.setBody(null); } }); // get the response message String response = exchange.getOut().getBody(String.class); assertNotNull(response， "The response should not be null"); assertEquals("id=1%262"， response， "The response value is wrong"); } You also cause an npe if the value is null in the map. I dont't really see a valid implemenation that leverages a csv syntax in the values of the Map， that doesn't cause incompatiblity issues for users that provide the Map with CxfConstatns.CAMEL_CXF_RS_QUERY_MAP. Show Frank Denninger added a comment - 05/Aug/20 21:05 - edited Hi Chandrakant， this implementation will cause problems if the value contains an & (or %26 escaped) See this failing testcase: @Test public void testProducerWithQueryParametersWithMultipleValues2() { Exchange exchange = template.send( "cxfrs: //http://localhost:" + getPort2() + "/" + getClass().getSimpleName() + "/testQuery?httpClientAPI= true &synchronous= true " ， new Processor() { public void process(Exchange exchange) throws Exception { exchange.setPattern(ExchangePattern.InOut); Message inMessage = exchange.getIn(); // set the Http method inMessage.setHeader(Exchange.HTTP_METHOD， "GET" ); inMessage.setHeader(CxfConstants.CAMEL_CXF_RS_RESPONSE_CLASS， InputStream.class); inMessage.setHeader(Exchange.HTTP_QUERY， "id=1%262" ); inMessage.setBody( null ); } }); // get the response message String response = exchange.getOut().getBody( String .class); assertNotNull(response， "The response should not be null " ); assertEquals( "id=1%262" ， response， "The response value is wrong" ); } You also cause an npe if the value is null in the map. I dont't really see a valid implemenation that leverages a csv syntax in the values of the Map， that doesn't cause incompatiblity issues for users that provide the Map with CxfConstatns.CAMEL_CXF_RS_QUERY_MAP. Hide Permalink Chandrakant Hardahe added a comment - 06/Aug/20 09:57 Hi Frank， Thanks for pointing it， I forgot to check for NPE Can we introduce any other identifier to join the values instead of $ or any such special character， for which there is no possibility to be as a value? Show Chandrakant Hardahe added a comment - 06/Aug/20 09:57 Hi Frank， Thanks for pointing it， I forgot to check for NPE Can we introduce any other identifier to join the values instead of $ or any such special character， for which there is no possibility to be as a value? Hide Permalink Bernhard Unger added a comment - 06/Aug/20 10:37 - edited Hi Chandrakant， Spring MVC ist using a "MultiValueMap" to solve this problem. See https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/MultiValueMap.html Also available from google commons is com.google.common.collect.HashMultimap These maps simply allowing multiple identical keys. I think this could be a possibility for fixing the problem. We implemented a workarround so far: private HashMultimap<String， String> createParamsMultimap(String queryString， String charset) throws UnsupportedEncodingException { HashMultimap<String， String> queryMap = HashMultimap.create(); for (String param : queryString.split("&")) { String[] pair = param.split("="， 2); if (pair.length == 2) { String name = URLDecoder.decode(pair[0]， charset); String value = URLDecoder.decode(pair[1]， charset); queryMap.put(name， value); } else { throw new IllegalArgumentException("Invalid parameter， expected to be a pair but was " + param); } } return queryMap; } Disadvantage indeed is， that we must implement a new Map Interface， otherwise we would break Camels API. // New implementation static class MyMultiMap implements Map<String， String> { ... //All other Methods throwing an UnsupportedOperationException @Override public Set<Entry<String， String>> entrySet() { return mulitmap.entries(); } In process Method: @Override public void process(Exchange exchange) throws Exception { String queryString = exchange.getIn().getHeader(Exchange.HTTP_QUERY， String.class); // create multimap of parameters， preserving multiple params of the same name HashMultimap<String， String> queryMap = createParamsMultimap(queryString， ExchangeHelper.getCharsetName(exchange)); // wrap it to hide the multimap als a conventional map MyMultiMap myMultiMap = new MyMultiMap(queryMap); // set override parameter for cxf query map exchange.getMessage().setHeader(CxfConstants.CAMEL_CXF_RS_QUERY_MAP， myMultiMap); //further implementations.... Maybe you find a cleaner backward compatible way for the fix? Kind regards Bernhard Show Bernhard Unger added a comment - 06/Aug/20 10:37 - edited Hi Chandrakant， Spring MVC ist using a "MultiValueMap" to solve this problem. See https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/util/MultiValueMap.html Also available from google commons is com.google.common.collect.HashMultimap These maps simply allowing multiple identical keys. I think this could be a possibility for fixing the problem. We implemented a workarround so far: private HashMultimap< String ， String > createParamsMultimap( String queryString， String charset) throws UnsupportedEncodingException { HashMultimap< String ， String > queryMap = HashMultimap.create(); for ( String param : queryString.split( "&" )) { String [] pair = param.split( "=" ， 2); if (pair.length == 2) { String name = URLDecoder.decode(pair[0]， charset); String value = URLDecoder.decode(pair[1]， charset); queryMap.put(name， value); } else { throw new IllegalArgumentException( "Invalid parameter， expected to be a pair but was " + param); } } return queryMap; } Disadvantage indeed is， that we must implement a new Map Interface， otherwise we would break Camels API. // New implementation static class MyMultiMap implements Map< String ， String > { ... //All other Methods throwing an UnsupportedOperationException @Override public Set<Entry< String ， String >> entrySet() { return mulitmap.entries(); } In process Method: @Override public void process(Exchange exchange) throws Exception { String queryString = exchange.getIn().getHeader(Exchange.HTTP_QUERY， String .class); // create multimap of parameters， preserving multiple params of the same name HashMultimap< String ， String > queryMap = createParamsMultimap(queryString， ExchangeHelper.getCharsetName(exchange)); // wrap it to hide the multimap als a conventional map MyMultiMap myMultiMap = new MyMultiMap(queryMap); // set override parameter for cxf query map exchange.getMessage().setHeader(CxfConstants.CAMEL_CXF_RS_QUERY_MAP， myMultiMap); //further implementations.... Maybe you find a cleaner backward compatible way for the fix? Kind regards Bernhard Hide Permalink Frank Denninger added a comment - 06/Aug/20 11:09 - edited Hi Chandrakant Hardahe as i already tried to state， i don't see a version working that leverages some kind of "csv" syntax in the values that doesn't have a significant risk to break for some consumer. I appended a different version that uses a Map<String，List<String>> internally. WebClient seems to supports List<String> directly as parameter， and expands it as expected. I dont see incompatiblities if the map contained only String. But will introduce some further sideeffects/improvements like map with Map<String，Integer> will also work (it causes classcast error in the current version). But i still prefer my original patch that removes the usage of map for the querystring. Regards Frank Show Frank Denninger added a comment - 06/Aug/20 11:09 - edited Hi Chandrakant Hardahe as i already tried to state， i don't see a version working that leverages some kind of "csv" syntax in the values that doesn't have a significant risk to break for some consumer. I appended a different version that uses a Map<String，List<String>> internally. WebClient seems to supports List<String> directly as parameter， and expands it as expected. I dont see incompatiblities if the map contained only String. But will introduce some further sideeffects/improvements like map with Map<String，Integer> will also work (it causes classcast error in the current version). But i still prefer my original patch that removes the usage of map for the querystring. Regards Frank Hide Permalink Freeman Yue Fang added a comment - 06/Aug/20 15:53 - edited Hi Guys， Thanks all for the discussion and patches! I prefer Frank Denninger's original fix since it's straightforward with testcase. Frank Denninger， could you please send a git PR(pull request)， so that your name can be available in the git commit history. Also please revise your testcase a little bit to include the case that value could have escaped %26. Thanks all again! Freeman Show Freeman Yue Fang added a comment - 06/Aug/20 15:53 - edited Hi Guys， Thanks all for the discussion and patches! I prefer Frank Denninger 's original fix since it's straightforward with testcase. Frank Denninger ， could you please send a git PR(pull request)， so that your name can be available in the git commit history. Also please revise your testcase a little bit to include the case that value could have escaped %26. Thanks all again! Freeman Hide Permalink Frank Denninger added a comment - 06/Aug/20 22:02 Hi Freeman， i created a PR Regards Frank Show Frank Denninger added a comment - 06/Aug/20 22:02 Hi Freeman， i created a PR Regards Frank Hide Permalink Freeman Yue Fang added a comment - 07/Aug/20 13:13 patch applied on behalf of Frank Denninger with thanks! Thanks all again for the discussion here! Freeman Show Freeman Yue Fang added a comment - 07/Aug/20 13:13 patch applied on behalf of Frank Denninger with thanks! Thanks all again for the discussion here! Freeman
CAMEL-15369,Otavio Rodolfo Piske,2020-08-04T13:45:54+0000,1596534354， where 1596534354 is the epoch,This is the similar to the issue I reported on CAMEL-15358 but this one is for the Camel AWS 2 component: 2020-08-04 15:40:15，298 [c-kin-stream-54] WARN org.apache.camel.component.aws2.kinesis.Kinesis2Consumer - Consumer Consumer[aws2-kinesis://ckc-kin-stream-54] failed polling endpoint: aws2-kinesis://ckc-kin-stream-54. Will try again at next poll. Caused by: [java.lang.IndexOutOfBoundsException - Index 0 out of bounds for length 0]java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0 at jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:64) ~[?:?] at jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:70) ~[?:?] at jdk.internal.util.Preconditions.checkIndex(Preconditions.java:248) ~[?:?] at java.util.Objects.checkIndex(Objects.java:372) ~[?:?] at java.util.ArrayList.get(ArrayList.java:459) ~[?:?] at java.util.Collections$UnmodifiableList.get(Collections.java:1310) ~[?:?] at org.apache.camel.component.aws2.kinesis.Kinesis2Consumer.getShardItertor(Kinesis2Consumer.java:132) ~[camel-aws2-kinesis-3.4.2.jar:3.4.2] at org.apache.camel.component.aws2.kinesis.Kinesis2Consumer.poll(Kinesis2Consumer.java:55) ~[camel-aws2-kinesis-3.4.2.jar:3.4.2] at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:187) [camel-support-3.4.2.jar:3.4.2] at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:106) [camel-support-3.4.2.jar:3.4.2] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?] at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) [?:?] at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) [?:?] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?] at java.lang.Thread.run(Thread.java:834) [?:?],Hide Permalink Otavio Rodolfo Piske added a comment - 04/Aug/20 13:45 I will send a PR with a proposed fix for this one. We need to do the same as in CAMEL-15358. Show Otavio Rodolfo Piske added a comment - 04/Aug/20 13:45 I will send a PR with a proposed fix for this one. We need to do the same as in CAMEL-15358 .
CAMEL-15368,Unassigned,2020-08-09T14:49:00+0000,1596970140， where 1596970140 is the epoch,This comes from ckchttps://github.com/apache/camel-kafka-connector/issues/319Basically we could something like password=#mypasscamel.beans.mypass = class:java.lang.String("secret password here") But it would be much better to detect secret attribute from catalog and doing something like camel.xxxx.password = secret:myPass+w0r!d*)here123 and then apply RAW to this Claus Ibsen,Hide Permalink Claus Ibsen added a comment - 09/Aug/20 14:49 Implemented in camel kafka connector Show Claus Ibsen added a comment - 09/Aug/20 14:49 Implemented in camel kafka connector
CAMEL-15367,Unassigned,2020-08-03T19:53:38+0000,1596470018， where 1596470018 is the epoch,I used TimeoutAwareAggregationStrategy. I did load testing in AggregateProcessor. When timer working and karaf stopped， I lose messages.,Hide Permalink Andrea Cosentino added a comment - 03/Aug/20 19:53 Please try with a newer version. Also please share how you test and provide a reproducer. The description is too vague. It's hard to say something. Show Andrea Cosentino added a comment - 03/Aug/20 19:53 Please try with a newer version. Also please share how you test and provide a reproducer. The description is too vague. It's hard to say something. Hide Permalink Borodina Valery added a comment - 04/Aug/20 08:20 Sorry， it's my mistake. I work with cluster and I try fix this problem https://issues.apache.org/jira/browse/CAMEL-15289. I did this mistake. Show Borodina Valery added a comment - 04/Aug/20 08:20 Sorry， it's my mistake. I work with cluster and I try fix this problem https://issues.apache.org/jira/browse/CAMEL-15289 . I did this mistake.
CAMEL-15366,Unassigned,2020-08-03T17:35:59+0000,1596461759， where 1596461759 is the epoch,The following route receives a message containing a collection of objects representing files (path/name); it then splits the body and， for each element， reads the corresponding file (through a pollEnrich) and writes it to a different directory: from("direct:copy") .split(body()).streaming().parallelProcessing() .pollEnrich().simple(format("file://${body.path}?fileName=RAW(${body.name})&noop=true&idempotent=false").timeout(0).end() .to("file:target") .end(); The source directory contains 2000 test files (txt， 1KB each) and， after around 1350-1550 files， the test fails by throwing the following exception(s): Message History (complete message history is disabled)Message History (complete message history is disabled)---------------------------------------------------------------------------------------------------------------------------------------RouteId ProcessorId Processor Elapsed (ms)[ingestionPipelineR] [ingestionPipelineR] [ ] [ 160482]...[ingestionCopyRoute] [pollEnrich2 ] [pollEnrich[simple\\{file://${exchangeProperty.SourceDirectory}?fileName=RAW($\{bo] [ 0] Stacktrace---------------------------------------------------------------------------------------------------------------------------------------org.apache.camel.CamelExchangeException: Error during poll. Exchange[]. Caused by: [java.util.concurrent.RejectedExecutionException - PollingConsumer on file://target/test-junk/source/?fileName=RAW(simple_file_515.txt)&noop=true&idempotent=false is not started， but in state: Stopped] at org.apache.camel.processor.PollEnricher.process(PollEnricher.java:300) at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$RedeliveryTask.doRun(RedeliveryErrorHandler.java:702) at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$RedeliveryTask.run(RedeliveryErrorHandler.java:616) at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) at org.apache.camel.processor.MulticastProcessor.lambda$schedule$1(MulticastProcessor.java:281) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.run(FutureTask.java:266) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748)Caused by: java.util.concurrent.RejectedExecutionException: PollingConsumer on file://target/test-junk/source/?fileName=RAW(simple_file_515.txt)&noop=true&idempotent=false is not started， but in state: Stopped at org.apache.camel.support.EventDrivenPollingConsumer.receive(EventDrivenPollingConsumer.java:144) at org.apache.camel.component.file.GenericFilePollingConsumer.receiveNoWait(GenericFilePollingConsumer.java:84) at org.apache.camel.processor.PollEnricher.process(PollEnricher.java:288) ... 10 common frames omitted I've also tried to use the seda component (and with the custom executor service) instead of the processingParallel EIP， without success. Am I mistaking something? The route seems quite straightforward and I was expecting it to copy files without problems.,Hide Permalink Claus Ibsen added a comment - 03/Aug/20 17:35 Its not ideal to create endless dynamic endpoints via poll enrich / enrich. Since you read a file you can do set the body to a java.io.File instance Something like: setBody(simple("${body.path}/${body.name}"， java.io.File); Show Claus Ibsen added a comment - 03/Aug/20 17:35 Its not ideal to create endless dynamic endpoints via poll enrich / enrich. Since you read a file you can do set the body to a java.io.File instance Something like: setBody(simple("${body.path}/${body.name}"， java.io.File); Hide Permalink Alessio Villa added a comment - 04/Aug/20 09:15 - edited Thanks Claus， your suggestion was enlightening! I've migrated a few more routes as well and it significantly sped the overall process up. Is there any chance that something similar can be used to copy remote files too? So far， in fact， I perform this task by applying the very same approach: split a list of path/name objects and， for each corresponding file， poll enrich the message through the sftp component to download it. Show Alessio Villa added a comment - 04/Aug/20 09:15 - edited Thanks Claus， your suggestion was enlightening! I've migrated a few more routes as well and it significantly sped the overall process up. Is there any chance that something similar can be used to copy remote files too? So far， in fact， I perform this task by applying the very same approach: split a list of path/name objects and， for each corresponding file， poll enrich the message through the sftp component to download it. Hide Permalink Claus Ibsen added a comment - 04/Aug/20 12:20 See the cacheSize option of pollEnricher https://camel.apache.org/components/latest/eips/pollEnrich-eip.html Show Claus Ibsen added a comment - 04/Aug/20 12:20 See the cacheSize option of pollEnricher https://camel.apache.org/components/latest/eips/pollEnrich-eip.html Hide Permalink Alessio Villa added a comment - 04/Aug/20 12:48 Thanks for your help， appreciate it. Show Alessio Villa added a comment - 04/Aug/20 12:48 Thanks for your help， appreciate it.
CAMEL-15365,Omar Al-Safi,2020-08-03T08:58:47+0000,1596430727， where 1596430727 is the epoch,We will need to add a configuration option to enable autoDiscovery of the client in the azure components. Also， we will need to tweak the error messages by having one for no instances and other one for none.,There are no comments yet on this issue.
CAMEL-15364,Unassigned,2020-08-04T23:14:57+0000,1596568497， where 1596568497 is the epoch,Within the Components section version 2.x， there are 2 pages pertaining to MongoDB. The links are - * https://camel.apache.org/components/2.x/mongodb3-component.html* https://camel.apache.org/components/2.x/mongodb-component.htmlThese 2 differentiate in a sub-top however having the same title doesn't seem appropriate.Other thing I have noticed is that bundling of similar components has taken place with the latest and 3.4.x version but not with the 2.x version.,Hide Permalink Zoran Regvart added a comment - 04/Aug/20 23:14 I don't think this is an issue， we have two versions of the MongoDB component， I guess one targeting v3 and one targeting older versions of the API. You're welcome to change the title of the v3 component to something like MongoDB v3， but I would not make this a priority as we're winding down work on Camel 2.x. Show Zoran Regvart added a comment - 04/Aug/20 23:14 I don't think this is an issue， we have two versions of the MongoDB component， I guess one targeting v3 and one targeting older versions of the API. You're welcome to change the title of the v3 component to something like MongoDB v3， but I would not make this a priority as we're winding down work on Camel 2.x.
CAMEL-15363,Unassigned,2020-08-01T20:22:07.945Z,1596298927.945， where 1596298927.945 is the epoch,Presence of a "rest:" route that uses URL templates breaks a regular "jetty:" route that has "?matchOnUriPrefix=true&httpMethodRestrict=GET" attributes.Looks like CAMEL-11951 wasn't fixed.How to check:// this magic route doesn't work if all of the subsequent routes are present// interestingly， it catches anything starting with "res" ignoring the "/" after itfrom("jetty:http://0.0.0.0:8686/res/?matchOnUriPrefix=true&httpMethodRestrict=GET") .setBody().mvel("'RESOURCE GET path: ' + exchange.in.request.requestURI");// a catch all route that needs to be here alwaysfrom("jetty:http://0.0.0.0:8686?matchOnUriPrefix=true&httpMethodRestrict=GET") .setBody().mvel("'ROOT GET path: ' + exchange.in.request.requestURI");// a catch all POST route// if you comment out this， you will get 404 for the "magic" route instead of 405from("jetty:http://0.0.0.0:8686?matchOnUriPrefix=true&httpMethodRestrict=POST") .setBody(constant("ROOT POST"));// if this route is commented out， the magic route starts woking， otherwise the magic route produces 405from("rest:get:/test/{test}") .setBody(simple("SOPHISTICATED REST. Header: ${header.test}"));// this rest service doesn't break the magic route.from("rest:get:/dumb") .setBody(simple("DUMB REST"));Tested with Camel 2.25.1 and 3.4.1， but more interested in fixing ver. 2.x Run this and see the 405 error for any request starting from "/res".Comment out "rest:get:/test/{test}" and see the "/res/ route starting working.(As per requirements， the first three routes in this example have to stay first as in the big application other routes are added dynamically.)Attached is a java file with the main method to test.,Hide Permalink Fyodor Kravchenko added a comment - 05/Aug/20 13:16 Hello， I've noticed that the bug priority was changed to 'minor'， which is determined that an easy workaround is possible. What would be the workaround? Show Fyodor Kravchenko added a comment - 05/Aug/20 13:16 Hello， I've noticed that the bug priority was changed to 'minor'， which is determined that an easy workaround is possible. What would be the workaround? Hide Permalink Andrea Cosentino added a comment - 05/Aug/20 15:00 Usually major is related to a bit more complex issue， this is not something completely invalidating the feature， so it's a minor. But there is no workaround. Show Andrea Cosentino added a comment - 05/Aug/20 15:00 Usually major is related to a bit more complex issue， this is not something completely invalidating the feature， so it's a minor. But there is no workaround. Hide Permalink Fyodor Kravchenko added a comment - 06/Aug/20 11:56 Okay， I have bypassed the issue by invoking a homegrown dispatcher Processor in a single catch-all route that is unrestricted by method. This processor checks the method and the url start and then invokes another processor accordingly. The subsequent rest url-template consumers (those with curly brackets) can't break it. Show Fyodor Kravchenko added a comment - 06/Aug/20 11:56 Okay， I have bypassed the issue by invoking a homegrown dispatcher Processor in a single catch-all route that is unrestricted by method. This processor checks the method and the url start and then invokes another processor accordingly. The subsequent rest url-template consumers (those with curly brackets) can't break it.
CAMEL-15362,Claus Ibsen,2020-07-31T13:29:25+0000,1596187765， where 1596187765 is the epoch,I am using Camel 3.4.2 in a SpringBoot application using the Camel SpringBoot starter. In the CamelAutoConfiguration class it create a FluentProducerTemplate that I am injecting into my service classes. In order to use this with different endpoints， producer side processors， etc， it looks like I need to call the clearAll() method on the FluentProducerTemplate before each usage to make its re-use threadsafe. I don't see this documented anywhere， and also this seems a little wonky. Additionally， this only clears the body and headers that are set as ThreadLocals. It looks like to me， if I set an exchange， processor， or even an endpoint these threadlocals will be re-used the next time I used this same thread even if I call clearAll() before using it. Is that the way this is supposed to work?Unless I'm missing something here， it seems like it would be better to have the FluentProducerTemplate return a new object instance with each new request. Something like below - missing lots of details)./** The top-level class would manage the service lifecyle， context， ... Nested FluentProducerTemplateContext class would be the "state" for each request started by a call to one of the "to" methods or others that make sense. Additionally， it would implement the send/request methods using the producer template.**/public class DefaultFluentProducerTemplate extends ServiceSupport { private final CamelContext context; private Endpoint defaultEndpoint; private volatile ProducerTemplate template; public FluentProducerTemplate to(Endpoint endpoint) { return new FluentProducerTemplateContext(endpoint); } public FluentProducerTemplate toDefaultEndpoint() { return new FluentProducerTemplateContext(defaultEndpoint); } public static class FluentProducerTemplateContext implements FluentProducerTemplate { private final Endpoint endpoint; private final Map<String， Object> headers = new HashMap<>(); private Object body; private Supplier<Exchange> exchangeSupplier; private Supplier<Processor> processorSupplier; public FluentProducerTemplateNested withBody(Object body) { this.body = body; return this; } // // Remainder of with methods， send， request， etc. // }},There are no comments yet on this issue.
CAMEL-15361,Peter Palaga,2020-07-31T10:00:24+0000,1596175224， where 1596175224 is the epoch,The adoc document name in https://github.com/apache/camel/tree/master/components/camel-threadpoolfactory-vertx/src/main/docs is not derivable from the artifactId. I assume there is no real reason for that and we can rename it from reactive-threadpoolfactory-vertx.adoc to just threadpoolfactory-vertx.adoc so that it is easier for camel-quarkus to generate the link (see https://github.com/apache/camel-quarkus/issues/1506 ),There are no comments yet on this issue.
CAMEL-15360,Zoran Regvart,2020-07-31T01:23:19+0000,1596144199， where 1596144199 is the epoch,Seems that changes in CAMEL-15185 caused HTML validation issues: 1:5444 error Element <figure> is not permitted as content in <dl> element-permitted-content 1:5628 error Element <input> is not permitted as content in <dl> element-permitted-content 1:5671 error Element <label> is not permitted as content in <dl> element-permitted-content 1:5698 error <img> is missing required alt attribute WCAG/H37 1:5766 error Element <label> is not permitted as content in <dl> element-permitted-content 1:5793 error <img> is missing required alt attribute WCAG/H37 1:6107 error Element <input> is not permitted as content in <dl> element-permitted-content 1:6146 error Element <label> is not permitted as content in <dl> element-permitted-content 1:6169 error <img> is missing required alt attribute WCAG/H37 1:6237 error Element <label> is not permitted as content in <dl> element-permitted-content 1:6260 error <img> is missing required alt attribute WCAG/H37 1:6887 error Element <input> is not permitted as content in <dl> element-permitted-content 1:6931 error Element <label> is not permitted as content in <dl> element-permitted-content 1:6959 error <img> is missing required alt attribute WCAG/H37 1:7027 error Element <label> is not permitted as content in <dl> element-permitted-content 1:7055 error <img> is missing required alt attribute WCAG/H37 1:7593 error Element <input> is not permitted as content in <dl> element-permitted-content 1:7633 error Element <label> is not permitted as content in <dl> element-permitted-content 1:7657 error <img> is missing required alt attribute WCAG/H37 1:7725 error Element <label> is not permitted as content in <dl> element-permitted-content 1:7749 error <img> is missing required alt attribute WCAG/H37 1:9296 error Duplicate ID "social-media" no-dup-id,Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 01:23 zregvart opened a new pull request #443: URL: https://github.com/apache/camel-website/pull/443 This greatly simplifies the footer design and fixes HTML issues identified by `check:html` script. We're now using Unicode full width plus symbol so we don't need the SVG icons for show/hide menu. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 01:23 zregvart opened a new pull request #443: URL: https://github.com/apache/camel-website/pull/443 This greatly simplifies the footer design and fixes HTML issues identified by `check:html` script. We're now using Unicode full width plus symbol so we don't need the SVG icons for show/hide menu. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 03:23 AemieJ commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463385398 ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input[type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input[type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; } footer .footer .footer-menu { margin-top: 1rem; + footer .footer input[type="checkbox"] { Review comment: Is this meant to be changed as `footer .footer input[type="checkbox"]:checked` as it's the same as the stated class as above and thus the preview is failing for the same? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 03:23 AemieJ commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463385398 ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input [type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input [type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; } footer .footer .footer-menu { margin-top: 1rem; + footer .footer input [type="checkbox"] { Review comment: Is this meant to be changed as `footer .footer input [type="checkbox"] :checked` as it's the same as the stated class as above and thus the preview is failing for the same? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 03:24 AemieJ commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463385398 ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input[type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input[type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; } footer .footer .footer-menu { margin-top: 1rem; + footer .footer input[type="checkbox"] { Review comment: Is this meant to be changed as `footer .footer input[type="checkbox"]:checked` as it's defined as the same as class as above and thus the preview is failing for the same? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 03:24 AemieJ commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463385398 ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input [type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input [type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; } footer .footer .footer-menu { margin-top: 1rem; + footer .footer input [type="checkbox"] { Review comment: Is this meant to be changed as `footer .footer input [type="checkbox"] :checked` as it's defined as the same as class as above and thus the preview is failing for the same? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 08:18 zregvart commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463471405 ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input[type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input[type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; } footer .footer .footer-menu { margin-top: 1rem; + footer .footer input[type="checkbox"] { Review comment: Yeah I noticed a quirk artefact in Chrome so I fixed it last minute without running the builds/checks， should be okay now. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 08:18 zregvart commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463471405 ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input [type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input [type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; } footer .footer .footer-menu { margin-top: 1rem; + footer .footer input [type="checkbox"] { Review comment: Yeah I noticed a quirk artefact in Chrome so I fixed it last minute without running the builds/checks， should be okay now. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 09:49 AemieJ commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463515027 ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input[type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input[type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; } footer .footer .footer-menu { margin-top: 1rem; + footer .footer input[type="checkbox"]:checked { + transform: rotate(45deg); } input[type="checkbox"] + label img.show-menu { + footer .footer input[type="checkbox"]::before { + background-color: var(--footer-background); Review comment: This line of code isn't required with the above suggestions I made. ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input[type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input[type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; } footer .footer .footer-menu { margin-top: 1rem; + footer .footer input[type="checkbox"]:checked { + transform: rotate(45deg); } input[type="checkbox"] + label img.show-menu { + footer .footer input[type="checkbox"]::before { + background-color: var(--footer-background); + content: '\FF0B'; + position: absolute; display: block; + height: 1.75rem; + width: 1.75rem; + line-height: 1.75rem; + font-size: 1.75rem; + transition: 0.2s; } input[type="checkbox"] ~ label img.hide-menu， input[type="checkbox"] ~ div.footer-menu { - display: none; - } - input[type="checkbox"]:checked + label img.show-menu { - display: none; - } - input[type="checkbox"]:checked ~ label img.hide-menu， input[type="checkbox"]:checked ~ div.footer-menu { display: block; + footer .footer input[type="checkbox"]:checked::before { + transform: rotate(45deg); Review comment: `transform: rotate(90deg);` This is 'cause even on clicking it rotates to a plus sign instead of a cross. To make it cross， the following code achieves it. ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input[type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input[type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; Review comment: In addition to this， there is an outline around the box， to prevent this following code achieves it: ```` -webkit-appearance: none; -moz-appearance: none; -o-appearance: none; appearance: none; outline: 0; ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 09:49 AemieJ commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463515027 ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input [type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input [type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; } footer .footer .footer-menu { margin-top: 1rem; + footer .footer input [type="checkbox"] :checked { + transform: rotate(45deg); } input [type="checkbox"] + label img.show-menu { + footer .footer input [type="checkbox"] ::before { + background-color: var(--footer-background); Review comment: This line of code isn't required with the above suggestions I made. ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input [type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input [type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; } footer .footer .footer-menu { margin-top: 1rem; + footer .footer input [type="checkbox"] :checked { + transform: rotate(45deg); } input [type="checkbox"] + label img.show-menu { + footer .footer input [type="checkbox"] ::before { + background-color: var(--footer-background); + content: '\FF0B'; + position: absolute; display: block; + height: 1.75rem; + width: 1.75rem; + line-height: 1.75rem; + font-size: 1.75rem; + transition: 0.2s; } input [type="checkbox"] ~ label img.hide-menu， input [type="checkbox"] ~ div.footer-menu { - display: none; - } - input [type="checkbox"] :checked + label img.show-menu { - display: none; - } - input [type="checkbox"] :checked ~ label img.hide-menu， input [type="checkbox"] :checked ~ div.footer-menu { display: block; + footer .footer input [type="checkbox"] :checked::before { + transform: rotate(45deg); Review comment: `transform: rotate(90deg);` This is 'cause even on clicking it rotates to a plus sign instead of a cross. To make it cross， the following code achieves it. ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input [type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input [type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; Review comment: In addition to this， there is an outline around the box， to prevent this following code achieves it: ```` -webkit-appearance: none; -moz-appearance: none; -o-appearance: none; appearance: none; outline: 0; ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 09:50 AemieJ commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463515027 ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input[type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input[type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; } footer .footer .footer-menu { margin-top: 1rem; + footer .footer input[type="checkbox"]:checked { + transform: rotate(45deg); } input[type="checkbox"] + label img.show-menu { + footer .footer input[type="checkbox"]::before { + background-color: var(--footer-background); Review comment: Background color required with the above suggestions I made. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 09:50 AemieJ commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463515027 ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input [type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input [type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; } footer .footer .footer-menu { margin-top: 1rem; + footer .footer input [type="checkbox"] :checked { + transform: rotate(45deg); } input [type="checkbox"] + label img.show-menu { + footer .footer input [type="checkbox"] ::before { + background-color: var(--footer-background); Review comment: Background color required with the above suggestions I made. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 09:51 AemieJ commented on pull request #443: URL: https://github.com/apache/camel-website/pull/443#issuecomment-667038339 ![outline-checkbox](https://user-images.githubusercontent.com/44139348/89023549-60e24d00-d341-11ea-98b5-d5a3215504b1.png) @zregvart I found something odd about the checkbox outline so， with the following changes I suggested， the outline is removed. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 09:51 AemieJ commented on pull request #443: URL: https://github.com/apache/camel-website/pull/443#issuecomment-667038339 ! [outline-checkbox] ( https://user-images.githubusercontent.com/44139348/89023549-60e24d00-d341-11ea-98b5-d5a3215504b1.png ) @zregvart I found something odd about the checkbox outline so， with the following changes I suggested， the outline is removed. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 20:50 zregvart commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463830149 ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input[type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input[type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; } footer .footer .footer-menu { margin-top: 1rem; + footer .footer input[type="checkbox"]:checked { + transform: rotate(45deg); } input[type="checkbox"] + label img.show-menu { + footer .footer input[type="checkbox"]::before { + background-color: var(--footer-background); + content: '\FF0B'; + position: absolute; display: block; + height: 1.75rem; + width: 1.75rem; + line-height: 1.75rem; + font-size: 1.75rem; + transition: 0.2s; } input[type="checkbox"] ~ label img.hide-menu， input[type="checkbox"] ~ div.footer-menu { - display: none; - } - input[type="checkbox"]:checked + label img.show-menu { - display: none; - } - input[type="checkbox"]:checked ~ label img.hide-menu， input[type="checkbox"]:checked ~ div.footer-menu { display: block; + footer .footer input[type="checkbox"]:checked::before { + transform: rotate(45deg); Review comment: This is caused by both `input` and `::before` being rotated by 45deg. I've gone with a different implementation in the latest changes. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 20:50 zregvart commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463830149 ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input [type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input [type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; } footer .footer .footer-menu { margin-top: 1rem; + footer .footer input [type="checkbox"] :checked { + transform: rotate(45deg); } input [type="checkbox"] + label img.show-menu { + footer .footer input [type="checkbox"] ::before { + background-color: var(--footer-background); + content: '\FF0B'; + position: absolute; display: block; + height: 1.75rem; + width: 1.75rem; + line-height: 1.75rem; + font-size: 1.75rem; + transition: 0.2s; } input [type="checkbox"] ~ label img.hide-menu， input [type="checkbox"] ~ div.footer-menu { - display: none; - } - input [type="checkbox"] :checked + label img.show-menu { - display: none; - } - input [type="checkbox"] :checked ~ label img.hide-menu， input [type="checkbox"] :checked ~ div.footer-menu { display: block; + footer .footer input [type="checkbox"] :checked::before { + transform: rotate(45deg); Review comment: This is caused by both `input` and `::before` being rotated by 45deg. I've gone with a different implementation in the latest changes. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 20:52 zregvart commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463831461 ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input[type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input[type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; Review comment: `appearance` is a [experimental](https://developer.mozilla.org/en-US/docs/Web/CSS/appearance) [feature](https://caniuse.com/#feat=css-appearance)we can't rely on it for website to render on most devices. I've gone with a different implementation in the latest changes. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 20:52 zregvart commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463831461 ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input [type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input [type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; Review comment: `appearance` is a [experimental] ( https://developer.mozilla.org/en-US/docs/Web/CSS/appearance ) [feature] ( https://caniuse.com/#feat=css-appearance)we can't rely on it for website to render on most devices. I've gone with a different implementation in the latest changes. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 20:52 zregvart commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463831967 ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input[type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input[type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; } footer .footer .footer-menu { margin-top: 1rem; + footer .footer input[type="checkbox"]:checked { + transform: rotate(45deg); } input[type="checkbox"] + label img.show-menu { + footer .footer input[type="checkbox"]::before { + background-color: var(--footer-background); Review comment: I've gone with a different implementation in the latest changes. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 20:52 zregvart commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463831967 ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -182，59 +181，45 @@ input [type="checkbox"] { width: auto; } footer .footer .context a { - font-size: 13.5px; - } - footer .footer .context a::after { - width: 5px; - height: 5px; - } - footer .footer .footer-icons .brand-icon { height: 1.5rem; } footer .footer .show-menu { - float: right; - height: 40px; - margin-top: -2.5rem; - } - footer .footer .hide-menu { float: right; height: 35px; margin-top: -2.5rem; + footer .footer input [type="checkbox"] { + display: inline; + position: relative; + top: 2rem; + left: 45vw; + width: 1.75rem; + height: 1.75rem; + transition: 0.2s; } footer .footer .footer-menu { margin-top: 1rem; + footer .footer input [type="checkbox"] :checked { + transform: rotate(45deg); } input [type="checkbox"] + label img.show-menu { + footer .footer input [type="checkbox"] ::before { + background-color: var(--footer-background); Review comment: I've gone with a different implementation in the latest changes. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 20:55 zregvart commented on pull request #443: URL: https://github.com/apache/camel-website/pull/443#issuecomment-667352436 > @zregvart I found something odd about the checkbox outline so， with the following changes I suggested， the outline is removed. This is the input showing beneath the content made with `:before`. I've implemented a different solution in the latest changes. We should not remove outline， it helps folk what navigate using the keyboard. That being said I found no way to have the checkbox focused， in the right place with keyboard navigation and not visible at the same time in the latest changes; so we don't have keyboard focus indication (outline) in the latest changes for the plus sign or for the section headings (`dt`). ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 20:55 zregvart commented on pull request #443: URL: https://github.com/apache/camel-website/pull/443#issuecomment-667352436 > @zregvart I found something odd about the checkbox outline so， with the following changes I suggested， the outline is removed. This is the input showing beneath the content made with `:before`. I've implemented a different solution in the latest changes. We should not remove outline， it helps folk what navigate using the keyboard. That being said I found no way to have the checkbox focused， in the right place with keyboard navigation and not visible at the same time in the latest changes; so we don't have keyboard focus indication (outline) in the latest changes for the plus sign or for the section headings (`dt`). ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 01/Aug/20 10:39 AemieJ commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463949285 ########## File path: layouts/partials/footer.html ########## @@ -6，66 +6，50 @@ </div> <footer> <div class="footer"> + <figure class="logo"> + <img class="logo" src="/_/img/logo-d.svg" alt="Apache Camel Logo" + aria-label="white silhouette of a camel in front of a sand dune"> + </figure> + <input id="footer-toggle-overview" type="checkbox" title="Show/Hide Overview section" /> <dl> <figure class="logo"> <img class="logo" src="/_/img/logo-d.svg" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <dt>Overview</dt> <input type="checkbox" id="show-overview"/> <label for="show-overview"><img class="show-menu" src="/_/img/show-footer-menu.svg"></label> <label for="show-overview"><img class="hide-menu" src="/_/img/hide-footer-menu.svg"></label> <div class="footer-menu"> <dd><a href="/blog/">Blog</a></dd> <dd><a href="/docs/">Documentation</a></dd> <dd><a href="/community/support/">Community</a></dd> <dd><a href="/blog/">Download</a></dd> </div> + <dt><label for="footer-toggle-overview">Overview</label><label for="footer-toggle-overview">＋</label></dt> Review comment: `<label for="footer-toggle-overview">＋</label>`* is better included with a separate unique *id* to distinguish as it appears for desktop screen as well and the same case for each label with `＋` in content. `<label for="footer-toggle-overview" id="expand">＋</label>` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 01/Aug/20 10:39 AemieJ commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463949285 ########## File path: layouts/partials/footer.html ########## @@ -6，66 +6，50 @@ </div> <footer> <div class="footer"> + <figure class="logo"> + <img class="logo" src="/_/img/logo-d.svg" alt="Apache Camel Logo" + aria-label="white silhouette of a camel in front of a sand dune"> + </figure> + <input id="footer-toggle-overview" type="checkbox" title="Show/Hide Overview section" /> <dl> <figure class="logo"> <img class="logo" src="/_/img/logo-d.svg" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <dt>Overview</dt> <input type="checkbox" id="show-overview"/> <label for="show-overview"><img class="show-menu" src="/_/img/show-footer-menu.svg"></label> <label for="show-overview"><img class="hide-menu" src="/_/img/hide-footer-menu.svg"></label> <div class="footer-menu"> <dd><a href="/blog/">Blog</a></dd> <dd><a href="/docs/">Documentation</a></dd> <dd><a href="/community/support/">Community</a></dd> <dd><a href="/blog/">Download</a></dd> </div> + <dt><label for="footer-toggle-overview">Overview</label><label for="footer-toggle-overview">＋</label></dt> Review comment: `<label for="footer-toggle-overview">＋</label>`* is better included with a separate unique * id * to distinguish as it appears for desktop screen as well and the same case for each label with `＋` in content. `<label for="footer-toggle-overview" id="expand">＋</label>` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 01/Aug/20 10:41 AemieJ commented on pull request #443: URL: https://github.com/apache/camel-website/pull/443#issuecomment-667511491 @zregvart yes， I observed that it's better just the *+* is included now within the desktop version (> 1024px) as well so best we include separate id for those labels and change *display* property as per that. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 01/Aug/20 10:41 AemieJ commented on pull request #443: URL: https://github.com/apache/camel-website/pull/443#issuecomment-667511491 @zregvart yes， I observed that it's better just the * + * is included now within the desktop version (> 1024px) as well so best we include separate id for those labels and change * display * property as per that. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 01/Aug/20 18:07 zregvart commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463985824 ########## File path: layouts/partials/footer.html ########## @@ -6，66 +6，50 @@ </div> <footer> <div class="footer"> + <figure class="logo"> + <img class="logo" src="/_/img/logo-d.svg" alt="Apache Camel Logo" + aria-label="white silhouette of a camel in front of a sand dune"> + </figure> + <input id="footer-toggle-overview" type="checkbox" title="Show/Hide Overview section" /> <dl> <figure class="logo"> <img class="logo" src="/_/img/logo-d.svg" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <dt>Overview</dt> <input type="checkbox" id="show-overview"/> <label for="show-overview"><img class="show-menu" src="/_/img/show-footer-menu.svg"></label> <label for="show-overview"><img class="hide-menu" src="/_/img/hide-footer-menu.svg"></label> <div class="footer-menu"> <dd><a href="/blog/">Blog</a></dd> <dd><a href="/docs/">Documentation</a></dd> <dd><a href="/community/support/">Community</a></dd> <dd><a href="/blog/">Download</a></dd> </div> + <dt><label for="footer-toggle-overview">Overview</label><label for="footer-toggle-overview">＋</label></dt> Review comment: Yeah I was preoccupied with mobile version that I forgot to check the desktop one. Not sure if assigning `id`s here would be the correct approach. Assigning same `id` to more than one element is not valid HTML. I've set the `display: none` via CSS selector: `footer .footer dl dt label:nth-child(2)`. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 01/Aug/20 18:07 zregvart commented on a change in pull request #443: URL: https://github.com/apache/camel-website/pull/443#discussion_r463985824 ########## File path: layouts/partials/footer.html ########## @@ -6，66 +6，50 @@ </div> <footer> <div class="footer"> + <figure class="logo"> + <img class="logo" src="/_/img/logo-d.svg" alt="Apache Camel Logo" + aria-label="white silhouette of a camel in front of a sand dune"> + </figure> + <input id="footer-toggle-overview" type="checkbox" title="Show/Hide Overview section" /> <dl> <figure class="logo"> <img class="logo" src="/_/img/logo-d.svg" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <dt>Overview</dt> <input type="checkbox" id="show-overview"/> <label for="show-overview"><img class="show-menu" src="/_/img/show-footer-menu.svg"></label> <label for="show-overview"><img class="hide-menu" src="/_/img/hide-footer-menu.svg"></label> <div class="footer-menu"> <dd><a href="/blog/">Blog</a></dd> <dd><a href="/docs/">Documentation</a></dd> <dd><a href="/community/support/">Community</a></dd> <dd><a href="/blog/">Download</a></dd> </div> + <dt><label for="footer-toggle-overview">Overview</label><label for="footer-toggle-overview">＋</label></dt> Review comment: Yeah I was preoccupied with mobile version that I forgot to check the desktop one. Not sure if assigning `id`s here would be the correct approach. Assigning same `id` to more than one element is not valid HTML. I've set the `display: none` via CSS selector: `footer .footer dl dt label:nth-child(2)`. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 01/Aug/20 18:07 zregvart commented on pull request #443: URL: https://github.com/apache/camel-website/pull/443#issuecomment-667567919 @AemieJ I think this is now okay to get merged， thanks for reviewing， can you check the latest version when the preview is built? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 01/Aug/20 18:07 zregvart commented on pull request #443: URL: https://github.com/apache/camel-website/pull/443#issuecomment-667567919 @AemieJ I think this is now okay to get merged， thanks for reviewing， can you check the latest version when the preview is built? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 02/Aug/20 10:11 AemieJ commented on pull request #443: URL: https://github.com/apache/camel-website/pull/443#issuecomment-667654630 LGTM. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Aug/20 10:11 AemieJ commented on pull request #443: URL: https://github.com/apache/camel-website/pull/443#issuecomment-667654630 LGTM. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 02/Aug/20 12:01 oscerd merged pull request #443: URL: https://github.com/apache/camel-website/pull/443 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Aug/20 12:01 oscerd merged pull request #443: URL: https://github.com/apache/camel-website/pull/443 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Zoran Regvart added a comment - 02/Aug/20 15:18 Thanks Aemie， the footer redesign changes are live now! Show Zoran Regvart added a comment - 02/Aug/20 15:18 Thanks Aemie ， the footer redesign changes are live now!
CAMEL-15359,Andrea Cosentino,2020-07-30T16:33:34+0000,1596112414， where 1596112414 is the epoch,,Hide Permalink Andrea Cosentino added a comment - 30/Jul/20 16:33 I added the docs under src/main/docs but it's not complete. Just to avoid the website failing the the build. Ruben Vargas can you please add more docs there? Like camel-opentracing maybe? Thank you. I'm closing this， but please open a PR. Show Andrea Cosentino added a comment - 30/Jul/20 16:33 I added the docs under src/main/docs but it's not complete. Just to avoid the website failing the the build. Ruben Vargas can you please add more docs there? Like camel-opentracing maybe? Thank you. I'm closing this， but please open a PR.
CAMEL-15358,Otavio Rodolfo Piske,2020-07-30T14:29:39+0000,1596104979， where 1596104979 is the epoch,I noticed that sometimes Camel Kafka Connector prints this exception on the logs during AWS Kinesis tests. It seems to be related to trying to poll a stream when it is already removed. 2020-07-30 10:13:38，222 [/ckc-kin-stream] WARN org.apache.camel.component.aws.kinesis.KinesisConsumer - Consumer Consumer[aws-kinesis://ckc-kin-stream] failed polling endpoint: aws-kinesis://ckc-kin-stream. Will try again at next poll. Caused by: [java.lang.IndexOutOfBoundsException - Index 0 out of bounds for length 0]java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0 at jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:64) ~[?:?] at jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:70) ~[?:?] at jdk.internal.util.Preconditions.checkIndex(Preconditions.java:248) ~[?:?] at java.util.Objects.checkIndex(Objects.java:372) ~[?:?] at java.util.ArrayList.get(ArrayList.java:458) ~[?:?] at org.apache.camel.component.aws.kinesis.KinesisConsumer.getShardItertor(KinesisConsumer.java:132) ~[camel-aws-kinesis-3.4.2.jar:3.4.2] at org.apache.camel.component.aws.kinesis.KinesisConsumer.poll(KinesisConsumer.java:55) ~[camel-aws-kinesis-3.4.2.jar:3.4.2] at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:187) [camel-support-3.4.2.jar:3.4.2] at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:106) [camel-support-3.4.2.jar:3.4.2] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?] at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) [?:?] at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) [?:?] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?] at java.lang.Thread.run(Thread.java:834) [?:?],Hide Permalink Otavio Rodolfo Piske added a comment - 30/Jul/20 14:29 I'll send a PR fixing this issue. Show Otavio Rodolfo Piske added a comment - 30/Jul/20 14:29 I'll send a PR fixing this issue. Hide Permalink Andrea Cosentino added a comment - 30/Jul/20 15:06 Can you check on aws2-kinesis too? Show Andrea Cosentino added a comment - 30/Jul/20 15:06 Can you check on aws2-kinesis too? Hide Permalink Otavio Rodolfo Piske added a comment - 30/Jul/20 15:09 Andrea Cosentino yes I can If that's OK with you， I will do it in 2 steps: I will fix this one， send a PR， then I will implement the same test on the connector for AWS2-kinesis and will try to reproduce and fix it. Show Otavio Rodolfo Piske added a comment - 30/Jul/20 15:09 Andrea Cosentino yes I can If that's OK with you， I will do it in 2 steps: I will fix this one， send a PR， then I will implement the same test on the connector for AWS2-kinesis and will try to reproduce and fix it. Hide Permalink Andrea Cosentino added a comment - 30/Jul/20 15:13 Sounds good thanks! Show Andrea Cosentino added a comment - 30/Jul/20 15:13 Sounds good thanks!
CAMEL-15357,Freeman Yue Fang,2020-07-30T14:24:02+0000,1596104642， where 1596104642 is the epoch,This example shows how to use Servlet REST to define REST endpoints in Camel routes using the Rest DSL with Servlet transport in Karaf. REST endpoint is secured by Basic Auth， delegate user/password authentication to Karaf Jaas Service,Hide Permalink Andrea Cosentino added a comment - 30/Jul/20 14:24 We are in the process of extracting the examples of karaf in their own repo Show Andrea Cosentino added a comment - 30/Jul/20 14:24 We are in the process of extracting the examples of karaf in their own repo
CAMEL-15356,Omar Al-Safi,2020-07-30T13:08:01+0000,1596100081， where 1596100081 is the epoch,Azure Event hub service an event ingestion service， similar to Kinesis and Kafka， hence would be nice to have it as component. Azure EventHub Java Sdk v5.x: https://github.com/Azure/azure-sdk-for-java/tree/master/sdk/eventhubs/azure-messaging-eventhubs,There are no comments yet on this issue.
CAMEL-15355,Claus Ibsen,2020-07-30T11:46:50+0000,1596095210， where 1596095210 is the epoch,We are using camel-rabbitmq to create a single-active-consumer. to create a single active consumer we need to give a queue arg in endpoint uri as &arg.queue.x-single-active-consumer=trueWe get error below error if we set this argumentCaused by: com.rabbitmq.client.ShutdownSignalException: channel error; protocol method: #method<channel.close>(reply-code=406， reply-text=PRECONDITION_FAILED - invalid arg 'x-single-active-consumer' for queue 'testQ4' in vhost 'vh1': {unacceptable_type，longstr}， class-id=50， method-id=10),Hide Permalink Andrea Cosentino added a comment - 30/Jul/20 11:46 Please read the documentation correctly. You need to pass the args through the args parameter. Like this example: https://github.com/apache/camel/blob/master/components/camel-rabbitmq/src/test/java/org/apache/camel/component/rabbitmq/integration/RabbitMQInOutIntTest.java#L82 Show Andrea Cosentino added a comment - 30/Jul/20 11:46 Please read the documentation correctly. You need to pass the args through the args parameter. Like this example: https://github.com/apache/camel/blob/master/components/camel-rabbitmq/src/test/java/org/apache/camel/component/rabbitmq/integration/RabbitMQInOutIntTest.java#L82 Hide Permalink Devansh Arora added a comment - 30/Jul/20 11:53 Andrea Cosentino i tried using it like &args=arg.queue.x-single-active-consumer=true getting NPE Caused by: java.lang.NullPointerException: nullaused by: java.lang.NullPointerException: null at org.apache.camel.util.PropertiesHelper.extractProperties(PropertiesHelper.java:33) ~[camel-util-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitMQEndpoint.getExchangeArgs(RabbitMQEndpoint.java:825) ~[camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitMQDeclareSupport.resolvedExchangeArguments(RabbitMQDeclareSupport.java:101) ~[camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitMQDeclareSupport.declareAndBindExchangeWithQueue(RabbitMQDeclareSupport.java:49) ~[camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitMQDeclareSupport.declareAndBindExchangesAndQueuesUsing(RabbitMQDeclareSupport.java:36) ~[camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitMQEndpoint.declareExchangeAndQueue(RabbitMQEndpoint.java:244) ~[camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitConsumer.openChannel(RabbitConsumer.java:353) ~[camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitConsumer.<init>(RabbitConsumer.java:59) ~[camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitMQConsumer.createConsumer(RabbitMQConsumer.java:127) ~[camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitMQConsumer.createConsumers(RabbitMQConsumer.java:99) ~[camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitMQConsumer.doStart(RabbitMQConsumer.java:179) ~[camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[camel-api-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.AbstractCamelContext.startService(AbstractCamelContext.java:3025) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartOrResumeRouteConsumers(InternalRouteStartupManager.java:348) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartRouteConsumers(InternalRouteStartupManager.java:275) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.InternalRouteStartupManager.safelyStartRouteServices(InternalRouteStartupManager.java:180) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartOrResumeRoutes(InternalRouteStartupManager.java:114) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartCamel(AbstractCamelContext.java:2809) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartContext(AbstractCamelContext.java:2657) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStart(AbstractCamelContext.java:2620) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.spring.boot.SpringBootCamelContext.doStart(SpringBootCamelContext.java:43) ~[camel-spring-boot-3.4.0.jar:3.4.0] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[camel-api-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2452) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:121) ~[camel-spring-3.4.0.jar:3.4.0] Show Devansh Arora added a comment - 30/Jul/20 11:53 Andrea Cosentino i tried using it like &args=arg.queue.x-single-active-consumer=true getting NPE Caused by: java.lang.NullPointerException: nullaused by: java.lang.NullPointerException: null at org.apache.camel.util.PropertiesHelper.extractProperties(PropertiesHelper.java:33) ~ [camel-util-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitMQEndpoint.getExchangeArgs(RabbitMQEndpoint.java:825) ~ [camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitMQDeclareSupport.resolvedExchangeArguments(RabbitMQDeclareSupport.java:101) ~ [camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitMQDeclareSupport.declareAndBindExchangeWithQueue(RabbitMQDeclareSupport.java:49) ~ [camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitMQDeclareSupport.declareAndBindExchangesAndQueuesUsing(RabbitMQDeclareSupport.java:36) ~ [camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitMQEndpoint.declareExchangeAndQueue(RabbitMQEndpoint.java:244) ~ [camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitConsumer.openChannel(RabbitConsumer.java:353) ~ [camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitConsumer.<init>(RabbitConsumer.java:59) ~ [camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitMQConsumer.createConsumer(RabbitMQConsumer.java:127) ~ [camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitMQConsumer.createConsumers(RabbitMQConsumer.java:99) ~ [camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.component.rabbitmq.RabbitMQConsumer.doStart(RabbitMQConsumer.java:179) ~ [camel-rabbitmq-3.4.0.jar:3.4.0] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~ [camel-api-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.AbstractCamelContext.startService(AbstractCamelContext.java:3025) ~ [camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartOrResumeRouteConsumers(InternalRouteStartupManager.java:348) ~ [camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartRouteConsumers(InternalRouteStartupManager.java:275) ~ [camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.InternalRouteStartupManager.safelyStartRouteServices(InternalRouteStartupManager.java:180) ~ [camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartOrResumeRoutes(InternalRouteStartupManager.java:114) ~ [camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartCamel(AbstractCamelContext.java:2809) ~ [camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartContext(AbstractCamelContext.java:2657) ~ [camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStart(AbstractCamelContext.java:2620) ~ [camel-base-3.4.0.jar:3.4.0] at org.apache.camel.spring.boot.SpringBootCamelContext.doStart(SpringBootCamelContext.java:43) ~ [camel-spring-boot-3.4.0.jar:3.4.0] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~ [camel-api-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2452) ~ [camel-base-3.4.0.jar:3.4.0] at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:121) ~ [camel-spring-3.4.0.jar:3.4.0] Hide Permalink Devansh Arora added a comment - 30/Jul/20 11:57 - edited Also as mentioned in camel-rabbitmq document https://camel.apache.org/components/latest/rabbitmq-component.html#_query_parameters_64_parameters using queueargs parameter gives below error *Unknown parameters=[ {queueargs=arg.queue.x-single-active-consumer=true} ]* Show Devansh Arora added a comment - 30/Jul/20 11:57 - edited Also as mentioned in camel-rabbitmq document https://camel.apache.org/components/latest/rabbitmq-component.html#_query_parameters_64_parameters using queueargs parameter gives below error *Unknown parameters=[ {queueargs=arg.queue.x-single-active-consumer=true} ]* Hide Permalink Claus Ibsen added a comment - 30/Jul/20 12:01 Whats the endpoint uri for your camel rabbitmq endpoint you use， can you paste it here Show Claus Ibsen added a comment - 30/Jul/20 12:01 Whats the endpoint uri for your camel rabbitmq endpoint you use， can you paste it here Hide Permalink Devansh Arora added a comment - 30/Jul/20 12:07 Claus Ibsen my endpoint uri is like rabbitmq://localhost:5672/mydirectdelayed?queue=testQ4&routingKey=testKey&username=me&password=mypwd&threadPoolSize=1&concurrentConsumers=1&autoDelete=false&vhost=myvhost&arg.queue.x-single-active-consumer=true&arg.exchange.x-delayed-type=direct&exchangeType=x-delayed-message Show Devansh Arora added a comment - 30/Jul/20 12:07 Claus Ibsen my endpoint uri is like rabbitmq://localhost:5672/mydirectdelayed?queue=testQ4&routingKey=testKey&username=me&password=mypwd&threadPoolSize=1&concurrentConsumers=1&autoDelete=false&vhost=myvhost&arg.queue.x-single-active-consumer=true&arg.exchange.x-delayed-type=direct&exchangeType=x-delayed-message Hide Permalink Devansh Arora added a comment - 30/Jul/20 12:53 Claus Ibsen Andrea Cosentino do we need a change in org.apache.camel.component.rabbitmq.RabbitMQDeclareSupport.formatSpecialQueueArguments to parse this argument to Boolean for rabbitmq api to take this as boolean and not as longstr Show Devansh Arora added a comment - 30/Jul/20 12:53 Claus Ibsen Andrea Cosentino do we need a change in org.apache.camel.component.rabbitmq. RabbitMQDeclareSupport.formatSpecialQueueArguments to parse this argument to Boolean for rabbitmq api to take this as boolean and not as longstr Hide Permalink Claus Ibsen added a comment - 30/Jul/20 13:05 Yeah sadly it seems rabbitmq have put that burden on end-users. We can't frankly not always know if its supposed to be number， text or boolean etc for any arbitrary argument. Show Claus Ibsen added a comment - 30/Jul/20 13:05 Yeah sadly it seems rabbitmq have put that burden on end-users. We can't frankly not always know if its supposed to be number， text or boolean etc for any arbitrary argument. Hide Permalink Devansh Arora added a comment - 30/Jul/20 13:13 - edited previously we were using camel-rabbitmq 2.24.x， then we could configure arguments like public class QueueArgsSACConfigurer implements ArgsConfigurer { @Override public void configurArgs(Map<String， Object> map) { map.put("x-max-priority"， 3); map.put("x-single-active-consumer"， true); } } and in endpoint url we could add this bean definition it used to work fine then. but in camel-rabbitmq 3.x ArgsConfigurer was deprecated. and we then we switched to endpoint url based args and found this prblm Show Devansh Arora added a comment - 30/Jul/20 13:13 - edited previously we were using camel-rabbitmq 2.24.x， then we could configure arguments like public class QueueArgsSACConfigurer implements ArgsConfigurer { @Override public void configurArgs(Map<String， Object> map) { map.put("x-max-priority"， 3); map.put("x-single-active-consumer"， true); } } and in endpoint url we could add this bean definition it used to work fine then. but in camel-rabbitmq 3.x ArgsConfigurer was deprecated. and we then we switched to endpoint url based args and found this prblm Hide Permalink Claus Ibsen added a comment - 30/Jul/20 13:20 If you use java code， you can do something as workaround RabbitMQEndpoint e = context.getEndpoint("xxx"， RabbitMQEndpoint.class); e.getArgs().put("x-single ..."， true"); And then from(e).to("foo") eg you get the endpoint， and then put on the args with the boolean value， and then use the endpoint instance in the route dsl Show Claus Ibsen added a comment - 30/Jul/20 13:20 If you use java code， you can do something as workaround RabbitMQEndpoint e = context.getEndpoint("xxx"， RabbitMQEndpoint.class); e.getArgs().put("x-single ..."， true"); And then from(e).to("foo") eg you get the endpoint， and then put on the args with the boolean value， and then use the endpoint instance in the route dsl Hide Permalink Devansh Arora added a comment - 30/Jul/20 13:32 Claus Ibsen yes we are using java code. i tried this workaround like RabbitMQEndpoint e = context.getEndpoint(epUri， RabbitMQEndpoint.class);RabbitMQEndpoint e = context.getEndpoint(epUri， RabbitMQEndpoint.class); e.getArgs().put("arg.queue.x-single-active-consumer"， true); e.getArgs().put("arg.exchange.x-delayed-type"， "direct"); from(e).startupOrder(4).log("${body}").routeId("fourthorderROute"); and RabbitMQEndpoint e = context.getEndpoint(epUri， RabbitMQEndpoint.class);RabbitMQEndpoint e = context.getEndpoint(epUri， RabbitMQEndpoint.class); e.getArgs().put("x-single-active-consumer"， true); e.getArgs().put("x-delayed-type"， "direct"); from(e).startupOrder(4).log("${body}").routeId("fourthorderROute"); the consumer is getting started， but without single active consumer feature. seems it is not taking up the arguments Show Devansh Arora added a comment - 30/Jul/20 13:32 Claus Ibsen yes we are using java code. i tried this workaround like RabbitMQEndpoint e = context.getEndpoint(epUri， RabbitMQEndpoint.class);RabbitMQEndpoint e = context.getEndpoint(epUri， RabbitMQEndpoint.class); e.getArgs().put("arg.queue.x-single-active-consumer"， true); e.getArgs().put("arg.exchange.x-delayed-type"， "direct"); from(e).startupOrder(4).log("${body}").routeId("fourthorderROute"); and RabbitMQEndpoint e = context.getEndpoint(epUri， RabbitMQEndpoint.class);RabbitMQEndpoint e = context.getEndpoint(epUri， RabbitMQEndpoint.class); e.getArgs().put("x-single-active-consumer"， true); e.getArgs().put("x-delayed-type"， "direct"); from(e).startupOrder(4).log("${body}").routeId("fourthorderROute"); the consumer is getting started， but without single active consumer feature. seems it is not taking up the arguments Hide Permalink Claus Ibsen added a comment - 30/Jul/20 13:37 I think it should be "queue.x-single-active-consumer" as key Show Claus Ibsen added a comment - 30/Jul/20 13:37 I think it should be "queue.x-single-active-consumer" as key Hide Permalink Claus Ibsen added a comment - 30/Jul/20 13:37 And exchange. as prefix for the exchange args， see the source in the endpoint code Show Claus Ibsen added a comment - 30/Jul/20 13:37 And exchange. as prefix for the exchange args， see the source in the endpoint code Hide Permalink Devansh Arora added a comment - 30/Jul/20 13:39 thanks Claus Ibsen it works with queue. and exchange. Show Devansh Arora added a comment - 30/Jul/20 13:39 thanks Claus Ibsen it works with queue. and exchange.
CAMEL-15354,Claus Ibsen,2020-07-30T12:38:10+0000,1596098290， where 1596098290 is the epoch,0.31.0 is part of latest microprofile spec release.0.33+ is for MP 4 which is not released for the foresable future.So we need to go back to 0.31.0 version.,Hide Permalink Andrea Cosentino added a comment - 30/Jul/20 12:38 This seems a bit hard to do https://github.com/apache/camel/commit/73343ed3d73c70defeb0b560e3baf7df54ced47a The update was big. Show Andrea Cosentino added a comment - 30/Jul/20 12:38 This seems a bit hard to do https://github.com/apache/camel/commit/73343ed3d73c70defeb0b560e3baf7df54ced47a The update was big. Hide Permalink Claus Ibsen added a comment - 30/Jul/20 13:29 Yeah I hope that we can use the older API still - the library is < 1.0 so they may change/break apis in the future as well. Show Claus Ibsen added a comment - 30/Jul/20 13:29 Yeah I hope that we can use the older API still - the library is < 1.0 so they may change/break apis in the future as well. Hide Permalink Andrea Cosentino added a comment - 30/Jul/20 13:56 We can try to revert. But I don't know what will happen with the camel-tracing thingy Show Andrea Cosentino added a comment - 30/Jul/20 13:56 We can try to revert. But I don't know what will happen with the camel-tracing thingy Hide Permalink Claus Ibsen added a comment - 31/Jul/20 07:13 Okay we can revert 0acab042a7fc48983f45695b35462d4d72511e95 when we upgrade back again Show Claus Ibsen added a comment - 31/Jul/20 07:13 Okay we can revert 0acab042a7fc48983f45695b35462d4d72511e95 when we upgrade back again
CAMEL-15353,Unassigned,2020-07-30T09:19:58+0000,1596086398， where 1596086398 is the epoch,,There are no comments yet on this issue.
CAMEL-15352,Andrea Cosentino,2020-07-30T09:00:27+0000,1596085227， where 1596085227 is the epoch,,There are no comments yet on this issue.
CAMEL-15351,Claus Ibsen,2020-07-30T07:11:55+0000,1596078715， where 1596078715 is the epoch,Those events were reusing the event types from starting， but they should have their own as part of the work is done in doInit for initializing camel context.,There are no comments yet on this issue.
CAMEL-15350,Claus Ibsen,2020-08-04T13:31:48.824Z,1596533508.824， where 1596533508.824 is the epoch,If the SJMS-Batch consumption loop encounters anything other than a javax.jms.IllegalStateException (https://github.com/apache/camel/blob/master/components/camel-sjms/src/main/java/org/apache/camel/component/sjms/batch/SjmsBatchConsumer.java#L330) then it logs a warning and stops consuming messages (https://github.com/apache/camel/blob/master/components/camel-sjms/src/main/java/org/apache/camel/component/sjms/batch/SjmsBatchConsumer.java#L348).Example log after message broker is shut down: 2020-07-29 10:33:32.060 WARN ||| 34468 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : Exception caught consuming from myQueue. Caused by: [javax.jms.JMSException - Connection refused: no further information: localhost/127.0.0.1:5672]javax.jms.JMSException: Connection refused: no further information: localhost/127.0.0.1:5672 at org.apache.qpid.jms.provider.ProviderException.toJMSException(ProviderException.java:34) at org.apache.qpid.jms.exceptions.JmsExceptionSupport.create(JmsExceptionSupport.java:80) at org.apache.qpid.jms.exceptions.JmsExceptionSupport.create(JmsExceptionSupport.java:112) at org.apache.qpid.jms.JmsConnection.pull(JmsConnection.java:915) at org.apache.qpid.jms.JmsConnection.pull(JmsConnection.java:899) at org.apache.qpid.jms.JmsMessageConsumer.performPullIfRequired(JmsMessageConsumer.java:732) at org.apache.qpid.jms.JmsMessageConsumer.dequeue(JmsMessageConsumer.java:332) at org.apache.qpid.jms.JmsMessageConsumer.receive(JmsMessageConsumer.java:213) at org.springframework.jms.connection.CachedMessageConsumer.receive(CachedMessageConsumer.java:86) at org.apache.camel.component.sjms.batch.SjmsBatchConsumer$BatchConsumptionLoop$BatchConsumptionTask.consumeBatchesOnLoop(SjmsBatchConsumer.java:427) at org.apache.camel.component.sjms.batch.SjmsBatchConsumer$BatchConsumptionLoop$BatchConsumptionTask.access$1300(SjmsBatchConsumer.java:381) at org.apache.camel.component.sjms.batch.SjmsBatchConsumer$BatchConsumptionLoop.run(SjmsBatchConsumer.java:326) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.run(FutureTask.java:266) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748)Caused by: org.apache.qpid.jms.provider.exceptions.ProviderIOException: Connection refused: no further information: localhost/127.0.0.1:5672{{}}It is not obvious from this log message that the route is now broken and will not receive any more messages. The route state is still "Started". Expected Behaviour: The batch consumer can recover after errors (including a broker restart or failover) and continue to consume messages once the broker is available again. A simple change is to catch any exception instead of only javax.jms.IllegalStateException.,Hide Permalink Claus Ibsen added a comment - 03/Aug/20 07:07 Are you able to work an a fix and submit a PR? Show Claus Ibsen added a comment - 03/Aug/20 07:07 Are you able to work an a fix and submit a PR? Hide Permalink Brad Harvey added a comment - 03/Aug/20 07:16 Yes hopefully this week. Is there a planned release date for 3.4.3? Show Brad Harvey added a comment - 03/Aug/20 07:16 Yes hopefully this week. Is there a planned release date for 3.4.3? Hide Permalink Brad Harvey added a comment - 04/Aug/20 12:59 Hi Claus Ibsen ， You were too fast for me. I have tested out the simple fix but unfortunately it is too simple. First， I saw no change in behaviour. I had to set "keepAliveDelay" on the endpoint otherwise it just rethrows the exception anyway - a bit of a trap for new players. After setting keepAliveDelay to a positive value it did retry， but only once. The reason is that it fails on the createSession call which is outside the try/catch block that was changed， so again it just logs a warning and stops doing anything else. My test case is to restart the message broker. It does work OK if the message broker is restarted and ready in time for the first retry (before keepAliveDelay is exceeded). It is possible Spring's SingleConnectionFactory is helping out here， allowing createSession to recover the connection under the covers. Regards， Brad Interesting bits of the log below: First error WARN ||| 62704 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : Exception caught consuming from myQueue. Caused by: [javax.jms.IllegalStateException - The Consumer is closed]" org.apache.camel.component.sjms.batch.SjmsBatchConsumer$BatchConsumptionLoop$BatchConsumptionTask.consumeBatchesOnLoop(SjmsBatchConsumer.java:426) at Second error (first and only retry). After this there is nothing. WARN ||| 62704 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : Exception caught consuming from myQueue. Caused by: [javax.jms.JMSException - Could not connect to broker URL: tcp://localhost:61616. Reason: java.net.ConnectException: Connection refused: connect] javax.jms.JMSException: Could not connect to broker URL: tcp://localhost:61616. Reason: java.net.ConnectException: Connection refused: connect at org.apache.camel.component.sjms.batch.SjmsBatchConsumer$BatchConsumptionLoop.run(SjmsBatchConsumer.java:318) at This is the full log from just prior to stopping activemq. 2020-08-04 22:36:50.857 TRACE||| 62704 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : No message received2020-08-04 22:36:50.857 TRACE||| 62704 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : No message received2020-08-04 22:36:50.857 TRACE||| 62704 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : BatchConsumptionTask running2020-08-04 22:36:51.364 INFO ||| 62704 --- [0.1:61616@64353] o.s.j.c.CachingConnectionFactory : Encountered a JMSException - resetting the underlying JMS Connection javax.jms.JMSException: java.io.EOFException at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:54) at org.apache.activemq.ActiveMQConnection.onAsyncException(ActiveMQConnection.java:1960) at org.apache.activemq.ActiveMQConnection.onException(ActiveMQConnection.java:1979) at org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:114) at org.apache.activemq.transport.ResponseCorrelator.onException(ResponseCorrelator.java:126) at org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:114) at org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:114) at org.apache.activemq.transport.WireFormatNegotiator.onException(WireFormatNegotiator.java:173) at org.apache.activemq.transport.AbstractInactivityMonitor.onException(AbstractInactivityMonitor.java:345) at org.apache.activemq.transport.TransportSupport.onException(TransportSupport.java:96) at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:219) at java.lang.Thread.run(Thread.java:748)Caused by: java.io.EOFException: null at java.io.DataInputStream.readInt(DataInputStream.java:392) at org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:268) at org.apache.activemq.transport.tcp.TcpTransport.readCommand(TcpTransport.java:240)Caused by: java.io.EOFException: null at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:232) at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:215) ... 1 common frames omitted 2020-08-04 22:36:51.366 TRACE||| 62704 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : No message received2020-08-04 22:36:51.366 TRACE||| 62704 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : BatchConsumptionTask running2020-08-04 22:36:51.368 WARN ||| 62704 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : Exception caught consuming from myQueue. Caused by: [javax.jms.IllegalStateException - The Consumer is closed] javax.jms.IllegalStateException: The Consumer is closed at org.apache.activemq.ActiveMQMessageConsumer.checkClosed(ActiveMQMessageConsumer.java:879) at org.apache.activemq.ActiveMQMessageConsumer.receive(ActiveMQMessageConsumer.java:640) at org.apache.camel.component.sjms.batch.SjmsBatchConsumer$BatchConsumptionLoop$BatchConsumptionTask.consumeBatchesOnLoop(SjmsBatchConsumer.java:426) at org.apache.camel.component.sjms.batch.SjmsBatchConsumer$BatchConsumptionLoop$BatchConsumptionTask.access$1300(SjmsBatchConsumer.java:380) at org.apache.camel.component.sjms.batch.SjmsBatchConsumer$BatchConsumptionLoop.run(SjmsBatchConsumer.java:325) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.run(FutureTask.java:266) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748) 2020-08-04 22:36:51.369 WARN ||| 62704 --- [0.1:61616@64353] o.s.j.c.CachingConnectionFactory : Could not close shared JMS Connection javax.jms.JMSException: Disposed due to prior exception at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:72) at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1421) at org.apache.activemq.ActiveMQConnection.close(ActiveMQConnection.java:688) at org.springframework.jms.connection.SingleConnectionFactory.closeConnection(SingleConnectionFactory.java:501) at org.springframework.jms.connection.SingleConnectionFactory.resetConnection(SingleConnectionFactory.java:389) at org.springframework.jms.connection.CachingConnectionFactory.resetConnection(CachingConnectionFactory.java:205) at org.springframework.jms.connection.SingleConnectionFactory.onException(SingleConnectionFactory.java:367) at org.springframework.jms.connection.SingleConnectionFactory$AggregatedExceptionListener.onException(SingleConnectionFactory.java:721) at org.apache.activemq.ActiveMQConnection$5.run(ActiveMQConnection.java:1967) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748)Caused by: org.apache.activemq.transport.TransportDisposedIOException: Disposed due to prior exception at org.apache.activemq.transport.ResponseCorrelator.onException(ResponseCorrelator.java:125) at org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:114) at org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:114)Caused by: org.apache.activemq.transport.TransportDisposedIOException: Disposed due to prior exception at org.apache.activemq.transport.WireFormatNegotiator.onException(WireFormatNegotiator.java:173) at org.apache.activemq.transport.AbstractInactivityMonitor.onException(AbstractInactivityMonitor.java:345) at org.apache.activemq.transport.TransportSupport.onException(TransportSupport.java:96) at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:219) ... 1 common frames omittedCaused by: java.io.EOFException: null at java.io.DataInputStream.readInt(DataInputStream.java:392)Caused by: java.io.EOFException: null at org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:268) at org.apache.activemq.transport.tcp.TcpTransport.readCommand(TcpTransport.java:240) at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:232) at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:215) ... 1 common frames omitted 2020-08-04 22:36:53.944 WARN ||| 62704 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : Exception caught consuming from myQueue. Caused by: [javax.jms.JMSException - Could not connect to broker URL: tcp://localhost:61616. Reason: java.net.ConnectException: Connection refused: connect] javax.jms.JMSException: Could not connect to broker URL: tcp://localhost:61616. Reason: java.net.ConnectException: Connection refused: connect at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:36) at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:374) at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:304) at org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:244) at org.springframework.jms.connection.SingleConnectionFactory.doCreateConnection(SingleConnectionFactory.java:409) at org.springframework.jms.connection.SingleConnectionFactory.initConnection(SingleConnectionFactory.java:349) at org.springframework.jms.connection.SingleConnectionFactory.getConnection(SingleConnectionFactory.java:327) at org.springframework.jms.connection.SingleConnectionFactory$SharedConnectionInvocationHandler.invoke(SingleConnectionFactory.java:649) at com.sun.proxy.$Proxy131.createSession(Unknown Source) at org.apache.camel.component.sjms.batch.SjmsBatchConsumer$BatchConsumptionLoop.run(SjmsBatchConsumer.java:318) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.run(FutureTask.java:266) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748)Caused by: java.net.ConnectException: Connection refused: connect at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)Caused by: java.net.ConnectException: Connection refused: connect at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85) at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172) at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) at java.net.Socket.connect(Socket.java:607) at org.apache.activemq.transport.tcp.TcpTransport.connect(TcpTransport.java:525) at org.apache.activemq.transport.tcp.TcpTransport.doStart(TcpTransport.java:488) at org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:55) at org.apache.activemq.transport.AbstractInactivityMonitor.start(AbstractInactivityMonitor.java:169) at org.apache.activemq.transport.InactivityMonitor.start(InactivityMonitor.java:52) at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64) at org.apache.activemq.transport.WireFormatNegotiator.start(WireFormatNegotiator.java:72) at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64) at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64) at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:354) ... 13 common frames omitted Show Brad Harvey added a comment - 04/Aug/20 12:59 Hi Claus Ibsen ， You were too fast for me. I have tested out the simple fix but unfortunately it is too simple. First， I saw no change in behaviour. I had to set "keepAliveDelay" on the endpoint otherwise it just rethrows the exception anyway - a bit of a trap for new players. After setting keepAliveDelay to a positive value it did retry， but only once. The reason is that it fails on the createSession call which is outside the try/catch block that was changed， so again it just logs a warning and stops doing anything else. My test case is to restart the message broker. It does work OK if the message broker is restarted and ready in time for the first retry (before keepAliveDelay is exceeded). It is possible Spring's SingleConnectionFactory is helping out here， allowing createSession to recover the connection under the covers. Regards， Brad Interesting bits of the log below: First error WARN ||| 62704 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : Exception caught consuming from myQueue. Caused by: [javax.jms.IllegalStateException - The Consumer is closed]" org.apache.camel.component.sjms.batch.SjmsBatchConsumer$BatchConsumptionLoop$BatchConsumptionTask.consumeBatchesOnLoop(SjmsBatchConsumer.java:426) at Second error (first and only retry). After this there is nothing. WARN ||| 62704 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : Exception caught consuming from myQueue. Caused by: [javax.jms.JMSException - Could not connect to broker URL: tcp: //localhost:61616. Reason: java.net.ConnectException: Connection refused: connect] javax.jms.JMSException: Could not connect to broker URL: tcp://localhost:61616. Reason: java.net.ConnectException: Connection refused: connect at org.apache.camel.component.sjms.batch.SjmsBatchConsumer$BatchConsumptionLoop.run(SjmsBatchConsumer.java:318) at This is the full log from just prior to stopping activemq. 2020-08-04 22:36:50.857 TRACE||| 62704 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : No message received2020-08-04 22:36:50.857 TRACE||| 62704 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : No message received2020-08-04 22:36:50.857 TRACE||| 62704 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : BatchConsumptionTask running2020-08-04 22:36:51.364 INFO ||| 62704 --- [0.1:61616@64353] o.s.j.c.CachingConnectionFactory : Encountered a JMSException - resetting the underlying JMS Connection javax.jms.JMSException: java.io.EOFException at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:54) at org.apache.activemq.ActiveMQConnection.onAsyncException(ActiveMQConnection.java:1960) at org.apache.activemq.ActiveMQConnection.onException(ActiveMQConnection.java:1979) at org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:114) at org.apache.activemq.transport.ResponseCorrelator.onException(ResponseCorrelator.java:126) at org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:114) at org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:114) at org.apache.activemq.transport.WireFormatNegotiator.onException(WireFormatNegotiator.java:173) at org.apache.activemq.transport.AbstractInactivityMonitor.onException(AbstractInactivityMonitor.java:345) at org.apache.activemq.transport.TransportSupport.onException(TransportSupport.java:96) at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:219) at java.lang. Thread .run( Thread .java:748)Caused by: java.io.EOFException: null at java.io.DataInputStream.readInt(DataInputStream.java:392) at org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:268) at org.apache.activemq.transport.tcp.TcpTransport.readCommand(TcpTransport.java:240)Caused by: java.io.EOFException: null at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:232) at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:215) ... 1 common frames omitted 2020-08-04 22:36:51.366 TRACE||| 62704 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : No message received2020-08-04 22:36:51.366 TRACE||| 62704 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : BatchConsumptionTask running2020-08-04 22:36:51.368 WARN ||| 62704 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : Exception caught consuming from myQueue. Caused by: [javax.jms.IllegalStateException - The Consumer is closed] javax.jms.IllegalStateException: The Consumer is closed at org.apache.activemq.ActiveMQMessageConsumer.checkClosed(ActiveMQMessageConsumer.java:879) at org.apache.activemq.ActiveMQMessageConsumer.receive(ActiveMQMessageConsumer.java:640) at org.apache.camel.component.sjms.batch.SjmsBatchConsumer$BatchConsumptionLoop$BatchConsumptionTask.consumeBatchesOnLoop(SjmsBatchConsumer.java:426) at org.apache.camel.component.sjms.batch.SjmsBatchConsumer$BatchConsumptionLoop$BatchConsumptionTask.access$1300(SjmsBatchConsumer.java:380) at org.apache.camel.component.sjms.batch.SjmsBatchConsumer$BatchConsumptionLoop.run(SjmsBatchConsumer.java:325) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.run(FutureTask.java:266) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang. Thread .run( Thread .java:748) 2020-08-04 22:36:51.369 WARN ||| 62704 --- [0.1:61616@64353] o.s.j.c.CachingConnectionFactory : Could not close shared JMS Connection javax.jms.JMSException: Disposed due to prior exception at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:72) at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1421) at org.apache.activemq.ActiveMQConnection.close(ActiveMQConnection.java:688) at org.springframework.jms.connection.SingleConnectionFactory.closeConnection(SingleConnectionFactory.java:501) at org.springframework.jms.connection.SingleConnectionFactory.resetConnection(SingleConnectionFactory.java:389) at org.springframework.jms.connection.CachingConnectionFactory.resetConnection(CachingConnectionFactory.java:205) at org.springframework.jms.connection.SingleConnectionFactory.onException(SingleConnectionFactory.java:367) at org.springframework.jms.connection.SingleConnectionFactory$AggregatedExceptionListener.onException(SingleConnectionFactory.java:721) at org.apache.activemq.ActiveMQConnection$5.run(ActiveMQConnection.java:1967) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang. Thread .run( Thread .java:748)Caused by: org.apache.activemq.transport.TransportDisposedIOException: Disposed due to prior exception at org.apache.activemq.transport.ResponseCorrelator.onException(ResponseCorrelator.java:125) at org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:114) at org.apache.activemq.transport.TransportFilter.onException(TransportFilter.java:114)Caused by: org.apache.activemq.transport.TransportDisposedIOException: Disposed due to prior exception at org.apache.activemq.transport.WireFormatNegotiator.onException(WireFormatNegotiator.java:173) at org.apache.activemq.transport.AbstractInactivityMonitor.onException(AbstractInactivityMonitor.java:345) at org.apache.activemq.transport.TransportSupport.onException(TransportSupport.java:96) at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:219) ... 1 common frames omittedCaused by: java.io.EOFException: null at java.io.DataInputStream.readInt(DataInputStream.java:392)Caused by: java.io.EOFException: null at org.apache.activemq.openwire.OpenWireFormat.unmarshal(OpenWireFormat.java:268) at org.apache.activemq.transport.tcp.TcpTransport.readCommand(TcpTransport.java:240) at org.apache.activemq.transport.tcp.TcpTransport.doRun(TcpTransport.java:232) at org.apache.activemq.transport.tcp.TcpTransport.run(TcpTransport.java:215) ... 1 common frames omitted 2020-08-04 22:36:53.944 WARN ||| 62704 --- [msBatchConsumer] o.a.c.c.sjms.batch.SjmsBatchConsumer : Exception caught consuming from myQueue. Caused by: [javax.jms.JMSException - Could not connect to broker URL: tcp: //localhost:61616. Reason: java.net.ConnectException: Connection refused: connect] javax.jms.JMSException: Could not connect to broker URL: tcp: //localhost:61616. Reason: java.net.ConnectException: Connection refused: connect at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:36) at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:374) at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:304) at org.apache.activemq.ActiveMQConnectionFactory.createConnection(ActiveMQConnectionFactory.java:244) at org.springframework.jms.connection.SingleConnectionFactory.doCreateConnection(SingleConnectionFactory.java:409) at org.springframework.jms.connection.SingleConnectionFactory.initConnection(SingleConnectionFactory.java:349) at org.springframework.jms.connection.SingleConnectionFactory.getConnection(SingleConnectionFactory.java:327) at org.springframework.jms.connection.SingleConnectionFactory$SharedConnectionInvocationHandler.invoke(SingleConnectionFactory.java:649) at com.sun.proxy.$Proxy131.createSession(Unknown Source) at org.apache.camel.component.sjms.batch.SjmsBatchConsumer$BatchConsumptionLoop.run(SjmsBatchConsumer.java:318) at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) at java.util.concurrent.FutureTask.run(FutureTask.java:266) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang. Thread .run( Thread .java:748)Caused by: java.net.ConnectException: Connection refused: connect at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)Caused by: java.net.ConnectException: Connection refused: connect at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:85) at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350) at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206) at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188) at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172) at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392) at java.net.Socket.connect(Socket.java:607) at org.apache.activemq.transport.tcp.TcpTransport.connect(TcpTransport.java:525) at org.apache.activemq.transport.tcp.TcpTransport.doStart(TcpTransport.java:488) at org.apache.activemq.util.ServiceSupport.start(ServiceSupport.java:55) at org.apache.activemq.transport.AbstractInactivityMonitor.start(AbstractInactivityMonitor.java:169) at org.apache.activemq.transport.InactivityMonitor.start(InactivityMonitor.java:52) at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64) at org.apache.activemq.transport.WireFormatNegotiator.start(WireFormatNegotiator.java:72) at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64) at org.apache.activemq.transport.TransportFilter.start(TransportFilter.java:64) at org.apache.activemq.ActiveMQConnectionFactory.createActiveMQConnection(ActiveMQConnectionFactory.java:354) ... 13 common frames omitted Hide Permalink Brad Harvey added a comment - 04/Aug/20 13:36 This patch on 3.4.x is what I am thinking - just move where the session is created. I can create a PR and maybe add a test case， hopefully tomorrow. CAMEL-15350-patch.txt Show Brad Harvey added a comment - 04/Aug/20 13:36 This patch on 3.4.x is what I am thinking - just move where the session is created. I can create a PR and maybe add a test case， hopefully tomorrow. CAMEL-15350-patch.txt Hide Permalink Brad Harvey added a comment - 04/Aug/20 13:41 Also would you consider a change to the default keepAliveDelay of -1， which effectively disables the retry? The comments imply that it is like that for backwards compatibility so that it can shut down / exit on failure， but I don't quite follow how anything would notice the shutdown. Show Brad Harvey added a comment - 04/Aug/20 13:41 Also would you consider a change to the default keepAliveDelay of -1， which effectively disables the retry? The comments imply that it is like that for backwards compatibility so that it can shut down / exit on failure， but I don't quite follow how anything would notice the shutdown. Hide Permalink Claus Ibsen added a comment - 04/Aug/20 19:36 Thanks Brad， yeah that is a better patch. I have applied it to master and 3.4 branches. Show Claus Ibsen added a comment - 04/Aug/20 19:36 Thanks Brad， yeah that is a better patch. I have applied it to master and 3.4 branches. Hide Permalink Claus Ibsen added a comment - 04/Aug/20 19:48 Yeah it seems that there are 2 options for controlling this recoveryInterval keepAliveDelay The first is during startup only， and the latter is during consuming. Ideally there would just have been one option that has automatic refresh (like camel-jms has). So yeah we can make the keepAlive have same value as the recovery， eg 5000 in Camel 3.5 onwards. We can't change a default value in a patch release like 3.4.3 Show Claus Ibsen added a comment - 04/Aug/20 19:48 Yeah it seems that there are 2 options for controlling this recoveryInterval keepAliveDelay The first is during startup only， and the latter is during consuming. Ideally there would just have been one option that has automatic refresh (like camel-jms has). So yeah we can make the keepAlive have same value as the recovery， eg 5000 in Camel 3.5 onwards. We can't change a default value in a patch release like 3.4.3 Hide Permalink Brad Harvey added a comment - 04/Aug/20 23:18 Thanks. Yes that makes sense. Show Brad Harvey added a comment - 04/Aug/20 23:18 Thanks. Yes that makes sense. Hide Permalink Claus Ibsen added a comment - 05/Aug/20 05:46 changed the default in camel 3.5 Show Claus Ibsen added a comment - 05/Aug/20 05:46 changed the default in camel 3.5 Hide Permalink Brad Harvey added a comment - 06/Aug/20 04:39 For whatever it is worth， here's a reproducer unit test. It currently fails even with the fix because the consumer never gets a new connection from the connection factory. CAMEL-15350-reproducer-patch.txt The fix does work with Spring's CachingConnectionFactory as it is able to recover a broken connection. Show Brad Harvey added a comment - 06/Aug/20 04:39 For whatever it is worth， here's a reproducer unit test. It currently fails even with the fix because the consumer never gets a new connection from the connection factory. CAMEL-15350-reproducer-patch.txt The fix does work with Spring's CachingConnectionFactory as it is able to recover a broken connection.
CAMEL-15349,Andrea Cosentino,2020-07-29T11:56:57+0000,1596009417， where 1596009417 is the epoch,camel-xmpp routes consuming private chats from participants with a domain throws org.jxmpp.stringprep.XmppStringprepException: Localpart must not contain ':'from("xmpp://herp@localhost:5222/derp@localhost?password=herp").to("stream:out");SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".SLF4J: Defaulting to no-operation (NOP) logger implementationSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.Exception in thread "main" org.apache.camel.RuntimeCamelException: org.jxmpp.stringprep.XmppStringprepException: XmppStringprepException caused by 'Chat:derp@localhost:herp': org.jxmpp.stringprep.XmppStringprepException: Localpart must not contain ':' at org.apache.camel.RuntimeCamelException.wrapRuntimeException(RuntimeCamelException.java:68) at org.apache.camel.support.service.ServiceSupport.start(ServiceSupport.java:130) at org.apache.camel.impl.engine.AbstractCamelContext.startService(AbstractCamelContext.java:2898) at org.apache.camel.impl.engine.AbstractCamelContext.doStartOrResumeRouteConsumers(AbstractCamelContext.java:3225) at org.apache.camel.impl.engine.AbstractCamelContext.doStartRouteConsumers(AbstractCamelContext.java:3159) at org.apache.camel.impl.engine.AbstractCamelContext.safelyStartRouteServices(AbstractCamelContext.java:3069) at org.apache.camel.impl.engine.AbstractCamelContext.safelyStartRouteServices(AbstractCamelContext.java:3095) at org.apache.camel.impl.engine.AbstractCamelContext.startRouteService(AbstractCamelContext.java:2942) at org.apache.camel.impl.DefaultModel.start(DefaultModel.java:358) at org.apache.camel.impl.DefaultModel.startRoute(DefaultModel.java:330) at org.apache.camel.impl.DefaultModel.startRouteDefinitions(DefaultModel.java:323) at org.apache.camel.impl.DefaultModel.addRouteDefinitions(DefaultModel.java:88) at org.apache.camel.impl.AbstractModelCamelContext.addRouteDefinitions(AbstractModelCamelContext.java:111) at org.apache.camel.builder.RouteBuilder.populateRoutes(RouteBuilder.java:486) at org.apache.camel.builder.RouteBuilder.addRoutesToCamelContext(RouteBuilder.java:426) at org.apache.camel.impl.engine.AbstractCamelContext.lambda$addRoutes$0(AbstractCamelContext.java:1119) at org.apache.camel.impl.engine.AbstractCamelContext.doWithDefinedClassLoader(AbstractCamelContext.java:2460) at org.apache.camel.impl.engine.AbstractCamelContext.addRoutes(AbstractCamelContext.java:1119) at a.test.main(test.java:32)Caused by: org.jxmpp.stringprep.XmppStringprepException: XmppStringprepException caused by 'Chat:derp@localhost:herp': org.jxmpp.stringprep.XmppStringprepException: Localpart must not contain ':' at org.jxmpp.jid.impl.JidCreate.entityBareFrom(JidCreate.java:675) at org.apache.camel.component.xmpp.XmppConsumer.doStart(XmppConsumer.java:94) at org.apache.camel.support.service.ServiceSupport.start(ServiceSupport.java:117) ... 17 moreCaused by: org.jxmpp.stringprep.XmppStringprepException: Localpart must not contain ':' at org.jxmpp.stringprep.simple.SimpleXmppStringprep.localprep(SimpleXmppStringprep.java:74) at org.jxmpp.stringprep.XmppStringPrepUtil.localprep(XmppStringPrepUtil.java:62) at org.jxmpp.jid.parts.Localpart.from(Localpart.java:165) at org.jxmpp.jid.impl.LocalAndDomainpartJid.<init>(LocalAndDomainpartJid.java:46) at org.jxmpp.jid.impl.JidCreate.entityBareFrom(JidCreate.java:673) ... 19 morecamel-xmpp routes consuming private chats from participant without a domain throws org.jxmpp.stringprep.XmppStringprepException: Argument can't be the empty string from("xmpp://herp@localhost:5222/derp?password=herp").to("stream:out");SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".SLF4J: Defaulting to no-operation (NOP) logger implementationSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.Exception in thread "main" org.apache.camel.RuntimeCamelException: org.jxmpp.stringprep.XmppStringprepException: XmppStringprepException caused by 'Chat:derp:herp': org.jxmpp.stringprep.XmppStringprepException: Argument can't be the empty string at org.apache.camel.RuntimeCamelException.wrapRuntimeException(RuntimeCamelException.java:68) at org.apache.camel.support.service.ServiceSupport.start(ServiceSupport.java:130) at org.apache.camel.impl.engine.AbstractCamelContext.startService(AbstractCamelContext.java:2898) at org.apache.camel.impl.engine.AbstractCamelContext.doStartOrResumeRouteConsumers(AbstractCamelContext.java:3225) at org.apache.camel.impl.engine.AbstractCamelContext.doStartRouteConsumers(AbstractCamelContext.java:3159) at org.apache.camel.impl.engine.AbstractCamelContext.safelyStartRouteServices(AbstractCamelContext.java:3069) at org.apache.camel.impl.engine.AbstractCamelContext.safelyStartRouteServices(AbstractCamelContext.java:3095) at org.apache.camel.impl.engine.AbstractCamelContext.startRouteService(AbstractCamelContext.java:2942) at org.apache.camel.impl.DefaultModel.start(DefaultModel.java:358) at org.apache.camel.impl.DefaultModel.startRoute(DefaultModel.java:330) at org.apache.camel.impl.DefaultModel.startRouteDefinitions(DefaultModel.java:323) at org.apache.camel.impl.DefaultModel.addRouteDefinitions(DefaultModel.java:88) at org.apache.camel.impl.AbstractModelCamelContext.addRouteDefinitions(AbstractModelCamelContext.java:111) at org.apache.camel.builder.RouteBuilder.populateRoutes(RouteBuilder.java:486) at org.apache.camel.builder.RouteBuilder.addRoutesToCamelContext(RouteBuilder.java:426) at org.apache.camel.impl.engine.AbstractCamelContext.lambda$addRoutes$0(AbstractCamelContext.java:1119) at org.apache.camel.impl.engine.AbstractCamelContext.doWithDefinedClassLoader(AbstractCamelContext.java:2460) at org.apache.camel.impl.engine.AbstractCamelContext.addRoutes(AbstractCamelContext.java:1119) at a.test.main(test.java:32)Caused by: org.jxmpp.stringprep.XmppStringprepException: XmppStringprepException caused by 'Chat:derp:herp': org.jxmpp.stringprep.XmppStringprepException: Argument can't be the empty string at org.jxmpp.jid.impl.JidCreate.entityBareFrom(JidCreate.java:675) at org.apache.camel.component.xmpp.XmppConsumer.doStart(XmppConsumer.java:94) at org.apache.camel.support.service.ServiceSupport.start(ServiceSupport.java:117) ... 17 moreCaused by: org.jxmpp.stringprep.XmppStringprepException: Argument can't be the empty string at org.jxmpp.stringprep.XmppStringPrepUtil.throwIfEmptyString(XmppStringPrepUtil.java:131) at org.jxmpp.stringprep.XmppStringPrepUtil.localprep(XmppStringPrepUtil.java:57) at org.jxmpp.jid.parts.Localpart.from(Localpart.java:165) at org.jxmpp.jid.impl.LocalAndDomainpartJid.<init>(LocalAndDomainpartJid.java:46) at org.jxmpp.jid.impl.JidCreate.entityBareFrom(JidCreate.java:673) ... 19 more,Hide Permalink Claus Ibsen added a comment - 29/Jul/20 11:56 You are welcome to see if you can fix this and provide a PR Show Claus Ibsen added a comment - 29/Jul/20 11:56 You are welcome to see if you can fix this and provide a PR Hide Permalink Austin added a comment - 30/Jul/20 14:36 Created a pull request with the fix located at https://github.com/apache/camel/pull/4058 Show Austin added a comment - 30/Jul/20 14:36 Created a pull request with the fix located at https://github.com/apache/camel/pull/4058
CAMEL-15348,Unassigned,2020-07-29T08:41:09.105Z,1595997669.105， where 1595997669.105 is the epoch,When trying to create a cxfEndpoint in blueprint xml， using cxfEndpoint element from namespace http://camel.apache.org/schema/blueprint/cxf there is a problem with endpointName and serviceName parameters. This:<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cxf="http://camel.apache.org/schema/blueprint/cxf"> <cxf:cxfEndpoint id="fooEndpoint" address="${endpoint.url}" serviceClass="com.foo.MyService" endpointName="foo:MyService" continuationTimeout="0" xmlns:foo="http://abc.def"> ... </cxf:cxfEndpoint></blueprint>throws an exception:Caused by: org.osgi.service.blueprint.container.ComponentDefinitionException: Error setting property: PropertyDescriptor <name: endpointName， getter: null， setter: [class org.apache.camel.component.cxf.CxfEndpoint.setEndpointName(class java.lang.String)] at org.apache.aries.blueprint.container.BeanRecipe.setProperty(BeanRecipe.java:818) ~[?:?]...Caused by: java.lang.Exception: Unable to convert value {http://abc.def}MyService to type java.lang.String at org.apache.aries.blueprint.container.AggregateConverter.convert(AggregateConverter.java:187) ~[?:?]I suspect the problem is with a org.apache.camel.component.cxf.CxfEndpoint#setEndpointName and org.apache.camel.component.cxf.CxfEndpoint#setServiceName methods - which previously accepted QName， but now accept String， and this change was not reflected in org.apache.camel.component.cxf.blueprint.EndpointDefinitionParserI'm attaching a project to reproduce the behavior - camel-reproducer-blueprint-cxf.zip,Hide Permalink Andrea Cosentino added a comment - 29/Jul/20 10:12 Yes， I think so. Can you open a PR fixing this on that side? https://github.com/apache/camel-karaf/blob/master/components/camel-cxf-blueprint/src/main/java/org/apache/camel/component/cxf/blueprint/EndpointDefinitionParser.java Show Andrea Cosentino added a comment - 29/Jul/20 10:12 Yes， I think so. Can you open a PR fixing this on that side? https://github.com/apache/camel-karaf/blob/master/components/camel-cxf-blueprint/src/main/java/org/apache/camel/component/cxf/blueprint/EndpointDefinitionParser.java Hide Permalink Rastislav Papp added a comment - 29/Jul/20 10:47 I've done so - https://github.com/apache/camel-karaf/pull/13 Show Rastislav Papp added a comment - 29/Jul/20 10:47 I've done so - https://github.com/apache/camel-karaf/pull/13
CAMEL-15347,Andrea Cosentino,2020-07-29T08:21:46+0000,1595996506， where 1595996506 is the epoch,If I set moveAfterRead=true and camel.source.endpoint.destinationBucket=camel-backup and camel-backup does not exist -> error! even camel.source.endpoint.autoCreateBucket=true (default)!We need to do check for creation and existence in the consumer doStart,There are no comments yet on this issue.
CAMEL-15346,Peter Palaga,2020-07-28T13:39:47+0000,1595929187， where 1595929187 is the epoch,Originally reported in Camel Quarkus https://github.com/apache/camel-quarkus/issues/1497The ModelParser produced by org.apache.camel.xml.in.ModelParserXMLRoutesDefinitionLoader should pass the XML namespace info to NamespaceAware elements， such as org.apache.camel.model.language.XPathExpression so that they work the same way as they do with JaxbXMLRoutesDefinitionLoader,There are no comments yet on this issue.
CAMEL-15345,Claus Ibsen,2020-07-28T13:15:13+0000,1595927713， where 1595927713 is the epoch,Lets validate this during creating endpoints， as otherwise you get a failure later when twitter4j requires accessToken and other login information， if they have not been configured.,Hide Permalink Claus Ibsen added a comment - 28/Jul/20 13:15 This allows to fail fast and report mis configuration during startup or via health checks Show Claus Ibsen added a comment - 28/Jul/20 13:15 This allows to fail fast and report mis configuration during startup or via health checks
CAMEL-15344,Claus Ibsen,2020-07-29T05:59:38+0000,1595987978， where 1595987978 is the epoch,During graceful shutdown then the inflight counter can report 4 when there is only 212:03:48.593 Camel (camel-1) thread #5 - ShutdownTask INFO o.a.c.i.e.DefaultShutdownStrategy - Waiting as there are still 4 inflight and pending exchanges to complete， timeout in 42 seconds. Inflights per route: [route1 = 4],Hide Permalink Claus Ibsen added a comment - 29/Jul/20 05:59 Ah okay so its a bug in the Delay EIP as part of the routing engine refactorings for 3.x Show Claus Ibsen added a comment - 29/Jul/20 05:59 Ah okay so its a bug in the Delay EIP as part of the routing engine refactorings for 3.x
CAMEL-15343,Claus Ibsen,2020-07-28T08:29:35+0000,1595910575， where 1595910575 is the epoch,Its a more general problem where the shutdown of Camel is not done graceful.See also CAMEL-15307,There are no comments yet on this issue.
CAMEL-15342,Omar Al-Safi,2020-07-28T08:26:36+0000,1595910396， where 1595910396 is the epoch,Similar to work has been done in CAMEL-15198， the same can be done in the queue component,There are no comments yet on this issue.
CAMEL-15341,Unassigned,2020-07-28T10:11:44+0000,1595916704， where 1595916704 is the epoch,Would be nice if we have a camel component for Azure Data Lake Gen2. This will be pretty much similar to the current camel-azure-storage-blob. Here is important links to learn more: DataLake Gen2 Docs: https://docs.microsoft.com/en-us/azure/storage/blobs/data-lake-storage-introduction DataLake Gen2 Java Client: https://docs.microsoft.com/en-us/azure/storage/blobs/data-lake-storage-introduction Samples: https://github.com/Azure/azure-sdk-for-java/tree/master/sdk/storage/azure-storage-file-datalake/src/samples/java/com/azure/storage/file/datalake camel-azure-storage-blob: https://github.com/apache/camel/tree/master/components/camel-azure-storage-blob,Hide Permalink Aryan Koul added a comment - 28/Jul/20 10:11 I would like to work on this issue. Show Aryan Koul added a comment - 28/Jul/20 10:11 I would like to work on this issue. Hide Permalink Andrea Cosentino added a comment - 28/Jul/20 10:27 Weren't you already working on something else? Etcd and kafka streams? Show Andrea Cosentino added a comment - 28/Jul/20 10:27 Weren't you already working on something else? Etcd and kafka streams? Hide Permalink Aryan Koul added a comment - 28/Jul/20 10:33 Andrea Cosentino I had a conversation with omar regarding the kafka streams， and we could not come up with a solid use case for kafka streams. And for etcd v3， someone is already working on that issue. Show Aryan Koul added a comment - 28/Jul/20 10:33 Andrea Cosentino I had a conversation with omar regarding the kafka streams， and we could not come up with a solid use case for kafka streams. And for etcd v3， someone is already working on that issue. Hide Permalink Omar Al-Safi added a comment - 08/Oct/20 08:22 hey Aryan Koul， any updates on this one? Show Omar Al-Safi added a comment - 08/Oct/20 08:22 hey Aryan Koul ， any updates on this one? Hide Permalink Aryan Koul added a comment - 28/Nov/20 16:57 Omar Al-Safi Andrea Cosentino Please review the PR. Show Aryan Koul added a comment - 28/Nov/20 16:57 Omar Al-Safi Andrea Cosentino Please review the PR.
CAMEL-15340,Andrea Cosentino,2020-07-28T09:46:04+0000,1595915164， where 1595915164 is the epoch,Hi， In the kubernetes job component documentation you provide a good example to list jobs， I test it and works fine.https://camel.apache.org/components/latest/kubernetes-job-component.html I wonder if you kindly can provide an example for createJob operation， I am really interested to explore this feature. Thanks,Hide Permalink Emmerson added a comment - 28/Jul/20 09:46 I manage to create a job after see the source code of KubernetesJobProducer class. Thanks Show Emmerson added a comment - 28/Jul/20 09:46 I manage to create a job after see the source code of KubernetesJobProducer class. Thanks Hide Permalink Andrea Cosentino added a comment - 30/Jul/20 13:11 I referenced your repo and account on Github and reported the example in our codebase. It should goes online in about 10 minutes. Show Andrea Cosentino added a comment - 30/Jul/20 13:11 I referenced your repo and account on Github and reported the example in our codebase. It should goes online in about 10 minutes.
CAMEL-15339,Andrea Cosentino,2020-07-27T16:10:46+0000,1595851846， where 1595851846 is the epoch,Apache Camel currently has an OpenTracing component that enables a request to be traced across multiple camel components.This task is to implement an equivalent capability， but using the OpenTelemetry Java tracer. This might involve a refactoring of the current opentracing implementation in order to reuse span decorators.,There are no comments yet on this issue.
CAMEL-15338,Andrea Cosentino,2020-07-24T23:23:52+0000,1595618632， where 1595618632 is the epoch,For channels starting with "/event/" "__e" suffix is always added to the channel name in SubscriptionHelper. However， according to salesforce documentation API names of standard platform events， such as AssetTokenEvent， don't include a suffix. As a result， camel salesforce component cannot subscribe to Standard Event channels. Suggestion: not to add "__e" suffix to all events， but leave it to endpoint configuration. EndPointChannel Name returned by SubscriptionHelperResultCurrent Approachsalesforce:/event/LoginEventStream?replayId=-1/event/LoginEventStream__e"subscription":"/event/LoginEventStream__e" "error":"403:denied_by_security_policy:create_denied" "successful":false salesforce:/event/CustomEvent?replayId=-1/event/CustomEvent__e"subscription":"/event/CustomEvent__e"， "successful":true salesforce:/event/CustomEvent__e?replayId=-1/event/CustomEvent__e"subscription":"/event/CustomEvent__e"， "successful":trueSuggested Approachsalesforce:/event/LoginEventStream?replayId=-1/event/LoginEventStream"subscription":"/event/LoginEventStream" "successful":true salesforce:/event/CustomEvent__e?replayId=-1/event/CustomEvent__e"subscription":"/event/CustomEvent__e"， "successful":true To receive the result described in the suggested approach， I removed channel suffix hardcoding from SubscriptionHelper.getChannelNamestatic String getChannelName(final String topicName) { final StringBuilder channelName = new StringBuilder(); if (topicName.charAt(0) != '/') { channelName.append('/'); } if (topicName.indexOf('/'， 1) > 0) { channelName.append(topicName); } else { channelName.append("topic/"); channelName.append(topicName); } /* * suffix hardcoding for event channels is removed */ return channelName.toString();} Pull request,There are no comments yet on this issue.
CAMEL-15337,Unassigned,2020-07-24T16:50:48.920Z,1595595048.92， where 1595595048.92 is the epoch,The antora UI makes use of the table of content so when a webpage has a large amount of content， it makes it easier for the user to navigate. I have observed this in Hugo pages such as articles that have a large amount of content as well. So to improve user experience over the Hugo content as well， I suggest adding the toc for the Hugo pages excluding the blog posts.I have added an image of how it looks. It uses the same CSS as that of antora UI.,Hide Permalink Aemie added a comment - 24/Jul/20 17:00 Zoran Regvart Maria Arias de Reyna Dominguez Do you agree on including toc for the hugo content? Show Aemie added a comment - 24/Jul/20 17:00 Zoran Regvart Maria Arias de Reyna Dominguez Do you agree on including toc for the hugo content? Hide Permalink Zoran Regvart added a comment - 25/Jul/20 10:57 Might make sense， though I think we only have a couple of pages generated by Hugo that can be considered long. Show Zoran Regvart added a comment - 25/Jul/20 10:57 Might make sense， though I think we only have a couple of pages generated by Hugo that can be considered long. Hide Permalink Aemie added a comment - 25/Jul/20 12:26 Well be it long or short， we have included the toc for each antora page and it makes it easy to navigate through the docs certainly. That's why I think we should keep it consistent with the toc for antora and Hugo as even Hugo provides toc feature. Show Aemie added a comment - 25/Jul/20 12:26 Well be it long or short， we have included the toc for each antora page and it makes it easy to navigate through the docs certainly. That's why I think we should keep it consistent with the toc for antora and Hugo as even Hugo provides toc feature. Hide Permalink ASF GitHub Bot added a comment - 02/Aug/20 17:37 AemieJ opened a new pull request #446: URL: https://github.com/apache/camel-website/pull/446 Motive for building Hugo toc For the apache camel website， the antora pages have a toc generated which will help in easing the user navigation. Thus， for the Hugo pages， toc should be implemented. DIfference between toc of Antora and Hugo The manner in which the toc of Antora and Hugo is structured is completed different. To trigger the toc for Hugo， one code of line needs to be inserted i.e `{{ TableOfContents }}` however I wanted the UI implementation of both Antora and Hugo to be the same. In Hugo， the manner in which toc is created is just a nested loop of `ul` and `li` but in the case of Antora， it's a proper structure with defined levels where `##` would signify `data-level: 2` and `###` would signify `data-level:3`. This wasn't the case of Hugo. Thus， my first implementation within the *js* file was to create the data levels. Problems faced while implementing fragment jumping of links and also based on scrolling. The `scroll` event function that is implemented for antora in the `on-this-page.js` can't be used for the Hugo as their structures are completely different as stated before. Hence， I have implemented my own logic similar to that of antora for the scroll and fragment jumping and it works. Drawbacks to my implementation currently In my implementation， the fragment jumping works smoothly when done through the keyboard however when using a scrollbar， it shows odd behavior on scrolling down in some cases. ![toc-content-hugo](https://user-images.githubusercontent.com/44139348/89124527-66809400-d4f5-11ea-99f9-77806e1984f4.gif) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Aug/20 17:37 AemieJ opened a new pull request #446: URL: https://github.com/apache/camel-website/pull/446 Motive for building Hugo toc For the apache camel website， the antora pages have a toc generated which will help in easing the user navigation. Thus， for the Hugo pages， toc should be implemented. DIfference between toc of Antora and Hugo The manner in which the toc of Antora and Hugo is structured is completed different. To trigger the toc for Hugo， one code of line needs to be inserted i.e `{{ TableOfContents }}` however I wanted the UI implementation of both Antora and Hugo to be the same. In Hugo， the manner in which toc is created is just a nested loop of `ul` and `li` but in the case of Antora， it's a proper structure with defined levels where `##` would signify `data-level: 2` and `###` would signify `data-level:3`. This wasn't the case of Hugo. Thus， my first implementation within the * js * file was to create the data levels. Problems faced while implementing fragment jumping of links and also based on scrolling. The `scroll` event function that is implemented for antora in the `on-this-page.js` can't be used for the Hugo as their structures are completely different as stated before. Hence， I have implemented my own logic similar to that of antora for the scroll and fragment jumping and it works. Drawbacks to my implementation currently In my implementation， the fragment jumping works smoothly when done through the keyboard however when using a scrollbar， it shows odd behavior on scrolling down in some cases. ! [toc-content-hugo] ( https://user-images.githubusercontent.com/44139348/89124527-66809400-d4f5-11ea-99f9-77806e1984f4.gif ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 04/Aug/20 23:05 zregvart commented on a change in pull request #446: URL: https://github.com/apache/camel-website/pull/446#discussion_r465373346 ########## File path: antora-ui-camel/src/css/main.css ########## @@ -28，7 +30，8 @@ scrollbar-width: thin; /* Firefox */ } .toc.sidebar .toc-menu ul::-webkit-scrollbar { + .toc.sidebar .toc-menu ul::-webkit-scrollbar， + .toc-sidebar .toc-hugo ul::-webkit-scrollbar { Review comment: We also control this element's class so we can have `.toc-menu` here， right? There should be a `.static` class that we can narrow only to Hugo rendered content in the JavaScript below. ########## File path: antora-ui-camel/src/css/main.css ########## @@ -1，5 +1，6 @@ @media screen and (max-width: 1023px) { aside.toc.sidebar { + aside.toc.sidebar， + aside.toc-sidebar { Review comment: We control this element's class， so we can have `aside.toc.sidebar` as selector for both Antora and Hugo pages， am I missing something? ########## File path: antora-ui-camel/src/js/98-hugo-on-this-page.js ########## @@ -0，0 +1，91 @@ +;(function () { + 'use strict' + + var parent + var child = [] + var lastActiveLink = null + var selector = document.querySelector('.toolbar') + var headings = Array.from(document.querySelectorAll('article.doc h1， article.doc h2， article.doc h3')) + var links = Array.from(document.querySelectorAll('aside.toc-sidebar .toc-hugo a')) + var width = document.querySelector('.navbar').offsetWidth + var parentSelector = document.querySelectorAll('.toc-hugo li ul:first-child') + + var topValMin = selector.getBoundingClientRect().top + selector.getBoundingClientRect().height - 5 + var topValMax = topValMin + 20 Review comment: These are pixels， so not sure if this will calculate correctly if font size is changed in the browser settings. ########## File path: antora-ui-camel/src/css/toolbar.css ########## @@ -12，6 +12，10 @@ z-index: var(--z-index-toolbar); } +.toolbar.hugo { + box-shadow: none; +} Review comment: Not sure this is related to TOC. ########## File path: antora-ui-camel/src/css/toc.css ########## @@ -17，49 +20，57 @@ padding-bottom: 0.25rem; } -.toc.sidebar .toc-menu h3 { +.toc.sidebar .toc-menu h3， +.toc-sidebar .toc-hugo h3 { display: flex; flex-direction: column; height: 2.5rem; justify-content: flex-end; } -.toc .toc-menu ul { +.toc .toc-menu ul， +.toc .toc-hugo ul { font-size: calc(15 / var(--rem-base) * 1rem); line-height: var(--toc-line-height); list-style: none; margin: 0; padding: 0; } -.toc.sidebar .toc-menu ul { +.toc.sidebar .toc-menu ul， +.toc-sidebar .toc-hugo ul { max-height: var(--toc-height); overflow-y: auto; } @media screen and (min-width: 1024px) { .toc .toc-menu h3 { + .toc .toc-menu h3， + .toc .toc-hugo h3 { font-size: calc(15 / var(--rem-base) * 1rem); } .toc .toc-menu ul Unknown macro: {+ .toc .toc-menu ul，+ .toc .toc-hugo ul { font-size: calc(13.5 / var(--rem-base) * 1rem); } } -.toc .toc-menu li { +.toc .toc-menu li， +.toc .toc-hugo li { margin: 0; } -.toc .toc-menu li[data-level="2"] a { +.toc .toc-menu li[data-level="2"] a， +.toc .toc-hugo li[data-level="2"] a { Review comment: Do we need the `data-level` attribute for Hugo generated content? This selector could be something like `.static .toc.sidebar nav ul li ul li ul li`. So instead of generating the `data-level` in the JavaScript below， we could use CSS selectors that would depict the depth i.e. level of the heading. ########## File path: antora-ui-camel/src/css/static.css ########## @@ -1，6 +1，11 @@ .static { margin: var(--static-margin); - max-width: var(--static-max-width--desktop); +} + +@media screen and (min-width: 1024px) { + .static { + max-width: var(--static-max-width--desktop); + } Review comment: Not sure this change is related to TOC? ########## File path: content/community/articles.md ########## @@ -2，7 +2，7 @@ title: "Articles" — Camel Videos +## Camel Videos Review comment: These changes could be on another PR， they don't seem to be related to this. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 04/Aug/20 23:05 zregvart commented on a change in pull request #446: URL: https://github.com/apache/camel-website/pull/446#discussion_r465373346 ########## File path: antora-ui-camel/src/css/main.css ########## @@ -28，7 +30，8 @@ scrollbar-width: thin; /* Firefox */ } .toc.sidebar .toc-menu ul::-webkit-scrollbar { + .toc.sidebar .toc-menu ul::-webkit-scrollbar， + .toc-sidebar .toc-hugo ul::-webkit-scrollbar { Review comment: We also control this element's class so we can have `.toc-menu` here， right? There should be a `.static` class that we can narrow only to Hugo rendered content in the JavaScript below. ########## File path: antora-ui-camel/src/css/main.css ########## @@ -1，5 +1，6 @@ @media screen and (max-width: 1023px) { aside.toc.sidebar { + aside.toc.sidebar， + aside.toc-sidebar { Review comment: We control this element's class， so we can have `aside.toc.sidebar` as selector for both Antora and Hugo pages， am I missing something? ########## File path: antora-ui-camel/src/js/98-hugo-on-this-page.js ########## @@ -0，0 +1，91 @@ +;(function () { + 'use strict' + + var parent + var child = [] + var lastActiveLink = null + var selector = document.querySelector('.toolbar') + var headings = Array.from(document.querySelectorAll('article.doc h1， article.doc h2， article.doc h3')) + var links = Array.from(document.querySelectorAll('aside.toc-sidebar .toc-hugo a')) + var width = document.querySelector('.navbar').offsetWidth + var parentSelector = document.querySelectorAll('.toc-hugo li ul:first-child') + + var topValMin = selector.getBoundingClientRect().top + selector.getBoundingClientRect().height - 5 + var topValMax = topValMin + 20 Review comment: These are pixels， so not sure if this will calculate correctly if font size is changed in the browser settings. ########## File path: antora-ui-camel/src/css/toolbar.css ########## @@ -12，6 +12，10 @@ z-index: var(--z-index-toolbar); } +.toolbar.hugo { + box-shadow: none; +} Review comment: Not sure this is related to TOC. ########## File path: antora-ui-camel/src/css/toc.css ########## @@ -17，49 +20，57 @@ padding-bottom: 0.25rem; } -.toc.sidebar .toc-menu h3 { +.toc.sidebar .toc-menu h3， +.toc-sidebar .toc-hugo h3 { display: flex; flex-direction: column; height: 2.5rem; justify-content: flex-end; } -.toc .toc-menu ul { +.toc .toc-menu ul， +.toc .toc-hugo ul { font-size: calc(15 / var(--rem-base) * 1rem); line-height: var(--toc-line-height); list-style: none; margin: 0; padding: 0; } -.toc.sidebar .toc-menu ul { +.toc.sidebar .toc-menu ul， +.toc-sidebar .toc-hugo ul { max-height: var(--toc-height); overflow-y: auto; } @media screen and (min-width: 1024px) { .toc .toc-menu h3 { + .toc .toc-menu h3， + .toc .toc-hugo h3 { font-size: calc(15 / var(--rem-base) * 1rem); } .toc .toc-menu ul Unknown macro: {+ .toc .toc-menu ul，+ .toc .toc-hugo ul { font-size: calc(13.5 / var(--rem-base) * 1rem); } } -.toc .toc-menu li { +.toc .toc-menu li， +.toc .toc-hugo li { margin: 0; } -.toc .toc-menu li [data-level="2"] a { +.toc .toc-menu li [data-level="2"] a， +.toc .toc-hugo li [data-level="2"] a { Review comment: Do we need the `data-level` attribute for Hugo generated content? This selector could be something like `.static .toc.sidebar nav ul li ul li ul li`. So instead of generating the `data-level` in the JavaScript below， we could use CSS selectors that would depict the depth i.e. level of the heading. ########## File path: antora-ui-camel/src/css/static.css ########## @@ -1，6 +1，11 @@ .static { margin: var(--static-margin); - max-width: var(--static-max-width--desktop); +} + +@media screen and (min-width: 1024px) { + .static { + max-width: var(--static-max-width--desktop); + } Review comment: Not sure this change is related to TOC? ########## File path: content/community/articles.md ########## @@ -2，7 +2，7 @@ title: "Articles" — Camel Videos +## Camel Videos Review comment: These changes could be on another PR， they don't seem to be related to this. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 07/Aug/20 05:22 AemieJ commented on a change in pull request #446: URL: https://github.com/apache/camel-website/pull/446#discussion_r466826788 ########## File path: antora-ui-camel/src/css/main.css ########## @@ -1，5 +1，6 @@ @media screen and (max-width: 1023px) { aside.toc.sidebar { + aside.toc.sidebar， + aside.toc-sidebar { Review comment: I need to currently find the issue 'cause whenever I use `<aside class="toc sidebar">` in case of Hugo content， this element doesn't render on the page. That's why I temporarily made use of `<aside class="toc toc-sidebar">` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 07/Aug/20 05:22 AemieJ commented on a change in pull request #446: URL: https://github.com/apache/camel-website/pull/446#discussion_r466826788 ########## File path: antora-ui-camel/src/css/main.css ########## @@ -1，5 +1，6 @@ @media screen and (max-width: 1023px) { aside.toc.sidebar { + aside.toc.sidebar， + aside.toc-sidebar { Review comment: I need to currently find the issue 'cause whenever I use `<aside class="toc sidebar">` in case of Hugo content， this element doesn't render on the page. That's why I temporarily made use of `<aside class="toc toc-sidebar">` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 07/Aug/20 05:23 AemieJ commented on a change in pull request #446: URL: https://github.com/apache/camel-website/pull/446#discussion_r466827136 ########## File path: antora-ui-camel/src/css/static.css ########## @@ -1，6 +1，11 @@ .static { margin: var(--static-margin); - max-width: var(--static-max-width--desktop); +} + +@media screen and (min-width: 1024px) { + .static { + max-width: var(--static-max-width--desktop); + } Review comment: Each change in this file is related to the toc. The thing is within the antora pages fragment jumping occurs accurately with respect to the toolbar. As I didn't want to include additional code for fragment jumping and positioning， I included a blank toolbar in the case of Hugo pages as well. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 07/Aug/20 05:23 AemieJ commented on a change in pull request #446: URL: https://github.com/apache/camel-website/pull/446#discussion_r466827136 ########## File path: antora-ui-camel/src/css/static.css ########## @@ -1，6 +1，11 @@ .static { margin: var(--static-margin); - max-width: var(--static-max-width--desktop); +} + +@media screen and (min-width: 1024px) { + .static { + max-width: var(--static-max-width--desktop); + } Review comment: Each change in this file is related to the toc. The thing is within the antora pages fragment jumping occurs accurately with respect to the toolbar. As I didn't want to include additional code for fragment jumping and positioning， I included a blank toolbar in the case of Hugo pages as well. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 07/Aug/20 05:23 AemieJ commented on a change in pull request #446: URL: https://github.com/apache/camel-website/pull/446#discussion_r466827288 ########## File path: antora-ui-camel/src/css/main.css ########## @@ -28，7 +30，8 @@ scrollbar-width: thin; /* Firefox */ } .toc.sidebar .toc-menu ul::-webkit-scrollbar { + .toc.sidebar .toc-menu ul::-webkit-scrollbar， + .toc-sidebar .toc-hugo ul::-webkit-scrollbar { Review comment: I didn't exactly get what do you mean by this? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 07/Aug/20 05:23 AemieJ commented on a change in pull request #446: URL: https://github.com/apache/camel-website/pull/446#discussion_r466827288 ########## File path: antora-ui-camel/src/css/main.css ########## @@ -28，7 +30，8 @@ scrollbar-width: thin; /* Firefox */ } .toc.sidebar .toc-menu ul::-webkit-scrollbar { + .toc.sidebar .toc-menu ul::-webkit-scrollbar， + .toc-sidebar .toc-hugo ul::-webkit-scrollbar { Review comment: I didn't exactly get what do you mean by this? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 07/Aug/20 05:24 AemieJ commented on a change in pull request #446: URL: https://github.com/apache/camel-website/pull/446#discussion_r466827484 ########## File path: antora-ui-camel/src/js/98-hugo-on-this-page.js ########## @@ -0，0 +1，91 @@ +;(function () { + 'use strict' + + var parent + var child = [] + var lastActiveLink = null + var selector = document.querySelector('.toolbar') + var headings = Array.from(document.querySelectorAll('article.doc h1， article.doc h2， article.doc h3')) + var links = Array.from(document.querySelectorAll('aside.toc-sidebar .toc-hugo a')) + var width = document.querySelector('.navbar').offsetWidth + var parentSelector = document.querySelectorAll('.toc-hugo li ul:first-child') + + var topValMin = selector.getBoundingClientRect().top + selector.getBoundingClientRect().height - 5 + var topValMax = topValMin + 20 Review comment: I have worked with changing the font size in the browser settings， it works as this just sets the range based on the position and height of the toolbar. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 07/Aug/20 05:24 AemieJ commented on a change in pull request #446: URL: https://github.com/apache/camel-website/pull/446#discussion_r466827484 ########## File path: antora-ui-camel/src/js/98-hugo-on-this-page.js ########## @@ -0，0 +1，91 @@ +;(function () { + 'use strict' + + var parent + var child = [] + var lastActiveLink = null + var selector = document.querySelector('.toolbar') + var headings = Array.from(document.querySelectorAll('article.doc h1， article.doc h2， article.doc h3')) + var links = Array.from(document.querySelectorAll('aside.toc-sidebar .toc-hugo a')) + var width = document.querySelector('.navbar').offsetWidth + var parentSelector = document.querySelectorAll('.toc-hugo li ul:first-child') + + var topValMin = selector.getBoundingClientRect().top + selector.getBoundingClientRect().height - 5 + var topValMax = topValMin + 20 Review comment: I have worked with changing the font size in the browser settings， it works as this just sets the range based on the position and height of the toolbar. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 07/Aug/20 05:24 AemieJ commented on a change in pull request #446: URL: https://github.com/apache/camel-website/pull/446#discussion_r466827626 ########## File path: antora-ui-camel/src/css/toolbar.css ########## @@ -12，6 +12，10 @@ z-index: var(--z-index-toolbar); } +.toolbar.hugo { + box-shadow: none; +} Review comment: The thing is within the antora pages fragment jumping occurs accurately with respect to the toolbar. As I didn't want to include additional code for fragment jumping and positioning， I included a blank toolbar in the case of Hugo pages as well. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 07/Aug/20 05:24 AemieJ commented on a change in pull request #446: URL: https://github.com/apache/camel-website/pull/446#discussion_r466827626 ########## File path: antora-ui-camel/src/css/toolbar.css ########## @@ -12，6 +12，10 @@ z-index: var(--z-index-toolbar); } +.toolbar.hugo { + box-shadow: none; +} Review comment: The thing is within the antora pages fragment jumping occurs accurately with respect to the toolbar. As I didn't want to include additional code for fragment jumping and positioning， I included a blank toolbar in the case of Hugo pages as well. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 07/Aug/20 05:25 AemieJ commented on a change in pull request #446: URL: https://github.com/apache/camel-website/pull/446#discussion_r466827843 ########## File path: content/community/articles.md ########## @@ -2，7 +2，7 @@ title: "Articles" — Camel Videos +## Camel Videos Review comment: Well， a few of the contents within the Hugo pages weren't perfectly aligned due to which the toc content wasn't being generated accurately. Hence， I had to make changes to these particular files. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 07/Aug/20 05:25 AemieJ commented on a change in pull request #446: URL: https://github.com/apache/camel-website/pull/446#discussion_r466827843 ########## File path: content/community/articles.md ########## @@ -2，7 +2，7 @@ title: "Articles" — Camel Videos +## Camel Videos Review comment: Well， a few of the contents within the Hugo pages weren't perfectly aligned due to which the toc content wasn't being generated accurately. Hence， I had to make changes to these particular files. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 08/Aug/20 02:21 AemieJ commented on pull request #446: URL: https://github.com/apache/camel-website/pull/446#issuecomment-670809878 @zregvart I did research on *Intersection Observer* and tried its implementation but on observing， it is only possible with a parent and child element. Here， `article.doc` is the parent ( root ) element however it doesn't cover a certain height thus the visibility of the target ( all the headings ) can't be compared based on it. Also， it has a loophole， the threshold triggers for any of its headings on the page. Other than that， I modified the implementation of logic， currently， it works pretty efficiently ( even when the font-size within browser settings is modified ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 08/Aug/20 02:21 AemieJ commented on pull request #446: URL: https://github.com/apache/camel-website/pull/446#issuecomment-670809878 @zregvart I did research on * Intersection Observer * and tried its implementation but on observing， it is only possible with a parent and child element. Here， `article.doc` is the parent ( root ) element however it doesn't cover a certain height thus the visibility of the target ( all the headings ) can't be compared based on it. Also， it has a loophole， the threshold triggers for any of its headings on the page. Other than that， I modified the implementation of logic， currently， it works pretty efficiently ( even when the font-size within browser settings is modified ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 13/Aug/20 23:05 zregvart opened a new pull request #459: URL: https://github.com/apache/camel-website/pull/459 Based on work by @AemieJ in #446 this simplifies the implementation by relying on the implementation already provided by Antora. The main issue with reusing the Antora implementation was that the markup of rendered Asciidoc contains `<div class="sect?">` elements around the chapters. Hugo rendered， static， content does not have this， so the logic for the on this page functionality needed to be adjusted slightly because of this. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 13/Aug/20 23:05 zregvart opened a new pull request #459: URL: https://github.com/apache/camel-website/pull/459 Based on work by @AemieJ in #446 this simplifies the implementation by relying on the implementation already provided by Antora. The main issue with reusing the Antora implementation was that the markup of rendered Asciidoc contains `<div class="sect?">` elements around the chapters. Hugo rendered， static， content does not have this， so the logic for the on this page functionality needed to be adjusted slightly because of this. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 13/Aug/20 23:05 zregvart commented on pull request #459: URL: https://github.com/apache/camel-website/pull/459#issuecomment-673752172 @AemieJ can you have a look at this? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 13/Aug/20 23:05 zregvart commented on pull request #459: URL: https://github.com/apache/camel-website/pull/459#issuecomment-673752172 @AemieJ can you have a look at this? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 14/Aug/20 02:33 AemieJ commented on pull request #459: URL: https://github.com/apache/camel-website/pull/459#issuecomment-673849932 @zregvart I didn't see that the Hugo missed that section. This is a much easier implementation and it works perfectly. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 14/Aug/20 02:33 AemieJ commented on pull request #459: URL: https://github.com/apache/camel-website/pull/459#issuecomment-673849932 @zregvart I didn't see that the Hugo missed that section. This is a much easier implementation and it works perfectly. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 14/Aug/20 06:51 zregvart merged pull request #459: URL: https://github.com/apache/camel-website/pull/459 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 14/Aug/20 06:51 zregvart merged pull request #459: URL: https://github.com/apache/camel-website/pull/459 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 14/Aug/20 06:52 zregvart commented on pull request #446: URL: https://github.com/apache/camel-website/pull/446#issuecomment-673919192 With #459 merged I think we can close this now. @AemieJ is there anything I've missed? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 14/Aug/20 06:52 zregvart commented on pull request #446: URL: https://github.com/apache/camel-website/pull/446#issuecomment-673919192 With #459 merged I think we can close this now. @AemieJ is there anything I've missed? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Zoran Regvart added a comment - 14/Aug/20 08:22 Thanks @aemiej Show Zoran Regvart added a comment - 14/Aug/20 08:22 Thanks @aemiej Hide Permalink ASF GitHub Bot added a comment - 14/Aug/20 09:12 AemieJ closed pull request #446: URL: https://github.com/apache/camel-website/pull/446 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 14/Aug/20 09:12 AemieJ closed pull request #446: URL: https://github.com/apache/camel-website/pull/446 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org
CAMEL-15336,Andrea Cosentino,2020-07-24T12:56:45+0000,1595581005， where 1595581005 is the epoch,on https://camel.apache.org/manual/latest/faq/what-platforms-are-supported.html ， it is indicated that "any platform supporting JDK6" are supported. This not true for latest Camel versions.proposal: provide a table with ranges of Camel with JDK point to CI jobs to let users check what is tested exactly,Hide Permalink Andrea Cosentino added a comment - 24/Jul/20 12:56 https://camel.apache.org/manual/latest/faq/what-platforms-are-supported.html Show Andrea Cosentino added a comment - 24/Jul/20 12:56 https://camel.apache.org/manual/latest/faq/what-platforms-are-supported.html
CAMEL-15335,Unassigned,2020-07-30T14:49:40.060Z,1596106180.06， where 1596106180.06 is the epoch,The current search result design doesn't fit entirely with the website design. Thus， I wanted to introduce a few changes to how we present it. Also， in addition to I would like to suggest that we include only the top 5 or top 6 results and not 10 as the pages are ranked by weight based on the search query and presented so a good practice would show fewer results which are precise.,Hide Permalink Zoran Regvart added a comment - 23/Jul/20 19:51 We can take a look at the Algolia UI. Since we're using the crawler provided by Algolia we need to put attribution to Algolia in the search results. Show Zoran Regvart added a comment - 23/Jul/20 19:51 We can take a look at the Algolia UI . Since we're using the crawler provided by Algolia we need to put attribution to Algolia in the search results. Hide Permalink Aemie added a comment - 24/Jul/20 05:29 - edited Zoran Regvart I took ideas of search layout from both Algolia UI and Bootstrap docs. I added the attribute of Search By Algolia on the bottom of the search results in search-result-design#2.png and search-result#3.png. I personally prefer the search-result#3.png. Also， in this design when the user hovers over a particular link within the section the whole section is highlighted with the background of #f5f5f5 shade. What do you think about it? Show Aemie added a comment - 24/Jul/20 05:29 - edited Zoran Regvart I took ideas of search layout from both Algolia UI and Bootstrap docs. I added the attribute of Search By Algolia on the bottom of the search results in search-result-design#2.png and search-result#3.png. I personally prefer the search-result#3.png. Also， in this design when the user hovers over a particular link within the section the whole section is highlighted with the background of #f5f5f5 shade. What do you think about it? Hide Permalink Aemie added a comment - 30/Jul/20 09:11 Zoran Regvart for the past day while designing on the search result layout， I wanted to not involve the use of scrollbar and as well not limit the number of searches queries. In normal algolia， the number of hits is a lot and we are minimizing to 10 itself and so I was thinking to take inspiration from the Algolia UI on how they presented the results with pagination. I had this in mind - We get max 10 results for a search query and all its details are present within the data variable. We take the data variable and distribute the whole data in terms of 3 query results per page. For each page， we make use of the same layout. For distributing the data， I have come with the following logic implementation as stated in the distributeData.js. This will remove the use of scrollbar and allow about 10 result queries sorted in a sophisticated fashion. I have created the basic layout and will create a PR for it soon but I wanted to implement pagination as same as in Algolia UI as well as I think it will be really useful. What do you think? Show Aemie added a comment - 30/Jul/20 09:11 Zoran Regvart for the past day while designing on the search result layout， I wanted to not involve the use of scrollbar and as well not limit the number of searches queries. In normal algolia， the number of hits is a lot and we are minimizing to 10 itself and so I was thinking to take inspiration from the Algolia UI on how they presented the results with pagination. I had this in mind - We get max 10 results for a search query and all its details are present within the data variable. We take the data variable and distribute the whole data in terms of 3 query results per page. For each page， we make use of the same layout. For distributing the data， I have come with the following logic implementation as stated in the distributeData.js . This will remove the use of scrollbar and allow about 10 result queries sorted in a sophisticated fashion. I have created the basic layout and will create a PR for it soon but I wanted to implement pagination as same as in Algolia UI as well as I think it will be really useful. What do you think? Hide Permalink Zoran Regvart added a comment - 30/Jul/20 13:40 I don’t think we can have data within JavaScript that comes from outside of Algolia search data， this will make it very difficult to maintain. I’m blanking on this right now， didn’t we put categories in the search configuration and have them in the resulting search data? Show Zoran Regvart added a comment - 30/Jul/20 13:40 I don’t think we can have data within JavaScript that comes from outside of Algolia search data， this will make it very difficult to maintain. I’m blanking on this right now， didn’t we put categories in the search configuration and have them in the resulting search data? Hide Permalink Aemie added a comment - 30/Jul/20 14:20 Zoran Regvart I am strictly making use of the results that come from algolia only. In the JS file shown， it was only to showcase the snippet of the code to achieve pagination. Yes， we have categorized however the point is we have 10 results and it takes up 80% of the height ( I wanted to prevent that 'cause I find it untidy to have a huge height to search results ). If we observe in the Bootstrap website， the size of the search result is minimal and I wanted to achieve that but the difference between bootstrap and camel website， the camel website is highly documented and I find it necessary to show the top 10 results at least. So in the Algolia UI (the link which you first sent me of)， they make use of pagination within the search results and to me， I wanted to combine less vertical space of search result (no scrollbar) and pagination for the search result layout. Thus， I came up with a logic to segregate the data from Algolia into pages with 3 search results in each. Show Aemie added a comment - 30/Jul/20 14:20 Zoran Regvart I am strictly making use of the results that come from algolia only. In the JS file shown， it was only to showcase the snippet of the code to achieve pagination. Yes， we have categorized however the point is we have 10 results and it takes up 80% of the height ( I wanted to prevent that 'cause I find it untidy to have a huge height to search results ). If we observe in the Bootstrap website， the size of the search result is minimal and I wanted to achieve that but the difference between bootstrap and camel website， the camel website is highly documented and I find it necessary to show the top 10 results at least. So in the Algolia UI (the link which you first sent me of)， they make use of pagination within the search results and to me， I wanted to combine less vertical space of search result (no scrollbar) and pagination for the search result layout. Thus， I came up with a logic to segregate the data from Algolia into pages with 3 search results in each. Hide Permalink Aemie added a comment - 30/Jul/20 14:51 - edited Zoran Regvart I have added a picture of algolia-result.png where the pagination helps in providing sufficient results to users (in our case 10) however if we combine it by also providing minimal height as in bootstrap-result.png， I think the structure will look really good and neat while providing ample info. For now， I will focus on the basic implementation of the whole search result layout but I think this is worth implementing in the coming week(s). Show Aemie added a comment - 30/Jul/20 14:51 - edited Zoran Regvart I have added a picture of algolia-result.png where the pagination helps in providing sufficient results to users (in our case 10) however if we combine it by also providing minimal height as in bootstrap-result.png ， I think the structure will look really good and neat while providing ample info. For now， I will focus on the basic implementation of the whole search result layout but I think this is worth implementing in the coming week(s). Hide Permalink Zoran Regvart added a comment - 30/Jul/20 17:36 I like the bootstrap search UI， I think it might have been done with the Algolia UI， perhaps it’s worth investing some time in using that instead of implementing our own. The only reason we have our own is because the previous versions of Algolia JavaScript implementations were quite big (300-400kb IIRC). I think they have a light version now. Show Zoran Regvart added a comment - 30/Jul/20 17:36 I like the bootstrap search UI， I think it might have been done with the Algolia UI， perhaps it’s worth investing some time in using that instead of implementing our own. The only reason we have our own is because the previous versions of Algolia JavaScript implementations were quite big (300-400kb IIRC). I think they have a light version now. Hide Permalink Aemie added a comment - 30/Jul/20 17:46 Zoran Regvart I don't know if it is done with the UI or not 'cause I have checked the websites using Algolia Search， they have quite different implementations for the UI. I tried to make ours similar to that of Bootstrap + Algolia (the basic layout) and to fit with the website theme. I just wanted to find a neater solution to handling search results with less height and no scrollbars in future implementation. Show Aemie added a comment - 30/Jul/20 17:46 Zoran Regvart I don't know if it is done with the UI or not 'cause I have checked the websites using Algolia Search， they have quite different implementations for the UI. I tried to make ours similar to that of Bootstrap + Algolia (the basic layout) and to fit with the website theme. I just wanted to find a neater solution to handling search results with less height and no scrollbars in future implementation. Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 04:54 AemieJ opened a new pull request #444: URL: https://github.com/apache/camel-website/pull/444 Search Layout Design Version is separated from the title of the section to keep a neater look and easier to understand the search result. The borders have been removed as they don't fit in with the theme of the website. On hovering a particular link， the whole section will give a shade of #f5f5f5 providing a highlighting effect. Algolia attribute has been at the bottom of the search result. ![search-result](https://user-images.githubusercontent.com/44139348/88996674-7b013880-d30b-11ea-9507-ae401508bfbb.png) Changed the look for *Nothing found* for no results found on a search query. ![no-result](https://user-images.githubusercontent.com/44139348/88996679-7d639280-d30b-11ea-8468-dd8dda2b469c.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 04:54 AemieJ opened a new pull request #444: URL: https://github.com/apache/camel-website/pull/444 Search Layout Design Version is separated from the title of the section to keep a neater look and easier to understand the search result. The borders have been removed as they don't fit in with the theme of the website. On hovering a particular link， the whole section will give a shade of #f5f5f5 providing a highlighting effect. Algolia attribute has been at the bottom of the search result. ! [search-result] ( https://user-images.githubusercontent.com/44139348/88996674-7b013880-d30b-11ea-9507-ae401508bfbb.png ) Changed the look for * Nothing found * for no results found on a search query. ! [no-result] ( https://user-images.githubusercontent.com/44139348/88996679-7d639280-d30b-11ea-8468-dd8dda2b469c.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 01/Aug/20 18:26 zregvart commented on a change in pull request #444: URL: https://github.com/apache/camel-website/pull/444#discussion_r463986800 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -375，13 +375，33 @@ body { #search_results { top: 3.38rem; background: #fffe; + background: #fff; Review comment: ```suggestion background: var(--navbar-background); ``` ########## File path: antora-ui-camel/src/css/header.css ########## @@ -390，15 +410，45 @@ body { padding-right: 0.5rem; } +#search_results div.result { + padding: 0.25rem; + pointer-events: none; +} + +#search_results div.result:hover { + background: var(--color-smoke-50); +} + +#search_results div.section { + display: flex; +} + Review comment: This was causing scrollbars to show ```suggestion #search_results dl { margin: 0; } ``` ########## File path: antora-ui-camel/src/css/header.css ########## @@ -412，9 +462，22 @@ body { padding-top: 0.3rem; } +#search_results div.footer-search { + display: inline-flex; + float: right; + margin-right: 0.75rem; Review comment: `float` doesn't make sense in flex layout， better to use padding vs margin so not to introduce scrollbars ```suggestion padding: .75rem; width: 100%; ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 01/Aug/20 18:26 zregvart commented on a change in pull request #444: URL: https://github.com/apache/camel-website/pull/444#discussion_r463986800 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -375，13 +375，33 @@ body { #search_results { top: 3.38rem; background: #fffe; + background: #fff; Review comment: ```suggestion background: var(--navbar-background); ``` ########## File path: antora-ui-camel/src/css/header.css ########## @@ -390，15 +410，45 @@ body { padding-right: 0.5rem; } +#search_results div.result { + padding: 0.25rem; + pointer-events: none; +} + +#search_results div.result:hover { + background: var(--color-smoke-50); +} + +#search_results div.section { + display: flex; +} + Review comment: This was causing scrollbars to show ```suggestion #search_results dl { margin: 0; } ``` ########## File path: antora-ui-camel/src/css/header.css ########## @@ -412，9 +462，22 @@ body { padding-top: 0.3rem; } +#search_results div.footer-search { + display: inline-flex; + float: right; + margin-right: 0.75rem; Review comment: `float` doesn't make sense in flex layout， better to use padding vs margin so not to introduce scrollbars ```suggestion padding: .75rem; width: 100%; ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 01/Aug/20 22:38 aashnajena commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667595711 This implementation looks very neat and I like how the versions are displayed. I have one doubt - is it common to highlight the entire section when hovering over one search result? It's a little confusing as to what I'm clicking - one search result or the entire section (even with the underline detail). I think it would be much clearer if we just highlight the search result user is hovering on， or at least provide some clear indication of what the user is clicking on (the background grey and underline grey are very similar， and on Chrome， only the heading gets underlined). Another observation is that when you move from one search result to its next within the same section， the grey background flickers because there's some space between two results which does not have the same hover property. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 01/Aug/20 22:38 aashnajena commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667595711 This implementation looks very neat and I like how the versions are displayed. I have one doubt - is it common to highlight the entire section when hovering over one search result? It's a little confusing as to what I'm clicking - one search result or the entire section (even with the underline detail). I think it would be much clearer if we just highlight the search result user is hovering on， or at least provide some clear indication of what the user is clicking on (the background grey and underline grey are very similar， and on Chrome， only the heading gets underlined). Another observation is that when you move from one search result to its next within the same section， the grey background flickers because there's some space between two results which does not have the same hover property. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 02/Aug/20 10:45 aashnajena commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667657881 This PR needs to wait. I'm observing that [this additional commit](https://github.com/algolia/docsearch-configs/commit/77634d58dab0f46f7dfc020a7b7fae1e9b390fe2#diff-a63c497e1db6a7dcc07ef35536d19967) made by an Algolia maintainer on our config file is causing some problems. @zregvart I have opened a [PR on the Algolia repository](https://github.com/algolia/docsearch-configs/pull/2133) to fix these issues. ![image](https://user-images.githubusercontent.com/32356795/89121123-b8b3bc00-d4d9-11ea-9199-1335c86bc8a9.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Aug/20 10:45 aashnajena commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667657881 This PR needs to wait. I'm observing that [this additional commit] ( https://github.com/algolia/docsearch-configs/commit/77634d58dab0f46f7dfc020a7b7fae1e9b390fe2#diff-a63c497e1db6a7dcc07ef35536d19967 ) made by an Algolia maintainer on our config file is causing some problems. @zregvart I have opened a [PR on the Algolia repository] ( https://github.com/algolia/docsearch-configs/pull/2133 ) to fix these issues. ! [image] ( https://user-images.githubusercontent.com/32356795/89121123-b8b3bc00-d4d9-11ea-9199-1335c86bc8a9.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 02/Aug/20 10:58 AemieJ commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667659120 @aashnajena yes， I already observed it. I am currently focusing on dealing with it without making change to the config file. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Aug/20 10:58 AemieJ commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667659120 @aashnajena yes， I already observed it. I am currently focusing on dealing with it without making change to the config file. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 02/Aug/20 11:02 AemieJ commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667659479 @zregvart this is why I suggested pagination for search results within the JIRA issue 'cause even if I show 5 of the results for some cases， it's going to overflow and the only time the scrollbar doesn't appear is when 3 results are presented on the search result but in my opinion， 3 results are not a convenient or suitable number to show to the user for a search query. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Aug/20 11:02 AemieJ commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667659479 @zregvart this is why I suggested pagination for search results within the JIRA issue 'cause even if I show 5 of the results for some cases， it's going to overflow and the only time the scrollbar doesn't appear is when 3 results are presented on the search result but in my opinion， 3 results are not a convenient or suitable number to show to the user for a search query. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 02/Aug/20 11:12 aashnajena commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667660367 @AemieJ notice that blogs are not appearing as they should. They are getting grouped by categories. I don't think we should update the design layout without first fixing the flaws on the config side， it would be a little hacky. PR #445 along with PR #2133 on the Algolia repo will fix the underlying issue， and then we can work on top of that to improve the layout. Also， since different versions of the same page appear as multiple search results， shouldn't we be showing more search results to make sure we are including all relevant entries? Sorry if I'm missing out on something that's already been discussed. I don't understand what's the issue with the current format. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Aug/20 11:12 aashnajena commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667660367 @AemieJ notice that blogs are not appearing as they should. They are getting grouped by categories. I don't think we should update the design layout without first fixing the flaws on the config side， it would be a little hacky. PR #445 along with PR #2133 on the Algolia repo will fix the underlying issue， and then we can work on top of that to improve the layout. Also， since different versions of the same page appear as multiple search results， shouldn't we be showing more search results to make sure we are including all relevant entries? Sorry if I'm missing out on something that's already been discussed. I don't understand what's the issue with the current format. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 02/Aug/20 11:18 AemieJ commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667661044 @aashnajena I am only talking about the default value being Documentation problem. What do you exactly mean by blog not being display as it is? Do the blogs need to be represented as - ``` Blog Category Title ``` If it's the case as above then the hierarchy needs to be reordered in the case of blogs. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Aug/20 11:18 AemieJ commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667661044 @aashnajena I am only talking about the default value being Documentation problem. What do you exactly mean by blog not being display as it is? Do the blogs need to be represented as - ``` Blog Category Title ``` If it's the case as above then the hierarchy needs to be reordered in the case of blogs. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 02/Aug/20 11:23 aashnajena commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667661586 The difference between current and expected behaviour is visible on the snapshot on PR #445 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Aug/20 11:23 aashnajena commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667661586 The difference between current and expected behaviour is visible on the snapshot on PR #445 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 02/Aug/20 13:10 AemieJ commented on a change in pull request #444: URL: https://github.com/apache/camel-website/pull/444#discussion_r464077068 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -390，15 +410，45 @@ body { padding-right: 0.5rem; } +#search_results div.result { + padding: 0.25rem; + pointer-events: none; +} + +#search_results div.result:hover { + background: var(--color-smoke-50); +} + +#search_results div.section { + display: flex; +} + Review comment: This doesn't remove scrollbars necessarily. Scrollbars only appear when the text covered by dl has height > 80vh which occurs in a few cases. Hence， I suggested using pagination to avoid scrollbars usage. However， for this PR， I wanted to just have a basic implementation for the search design layout. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Aug/20 13:10 AemieJ commented on a change in pull request #444: URL: https://github.com/apache/camel-website/pull/444#discussion_r464077068 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -390，15 +410，45 @@ body { padding-right: 0.5rem; } +#search_results div.result { + padding: 0.25rem; + pointer-events: none; +} + +#search_results div.result:hover { + background: var(--color-smoke-50); +} + +#search_results div.section { + display: flex; +} + Review comment: This doesn't remove scrollbars necessarily. Scrollbars only appear when the text covered by dl has height > 80vh which occurs in a few cases. Hence， I suggested using pagination to avoid scrollbars usage. However， for this PR， I wanted to just have a basic implementation for the search design layout. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 02/Aug/20 14:40 zregvart commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667682388 Do I understand correctly we need #445 merged and base this effort on that? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Aug/20 14:40 zregvart commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667682388 Do I understand correctly we need #445 merged and base this effort on that? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 02/Aug/20 15:05 AemieJ commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667685425 @zregvart in the algolia doc-search， Aashna created a PR， if that is merged and PR #445 is merged as well， then I can continue working on this PR. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Aug/20 15:05 AemieJ commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667685425 @zregvart in the algolia doc-search， Aashna created a PR， if that is merged and PR #445 is merged as well， then I can continue working on this PR. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 02/Aug/20 17:46 AemieJ removed a comment on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667661044 @aashnajena I am only talking about the default value being Documentation problem. What do you exactly mean by blog not being display as it is? Do the blogs need to be represented as - ``` Blog Category Title ``` If it's the case as above then the hierarchy needs to be reordered in the case of blogs. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Aug/20 17:46 AemieJ removed a comment on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-667661044 @aashnajena I am only talking about the default value being Documentation problem. What do you exactly mean by blog not being display as it is? Do the blogs need to be represented as - ``` Blog Category Title ``` If it's the case as above then the hierarchy needs to be reordered in the case of blogs. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 04/Aug/20 22:04 zregvart commented on a change in pull request #444: URL: https://github.com/apache/camel-website/pull/444#discussion_r465355877 ########## File path: package.json ########## @@ -8，7 +8，6 @@ "build:sitemap": "gulp sitemap"， "build": "run-s build:*"， "preview": "run-s preview:*"， "preview:antora": "antora --clean --fetch antora-playbook.yml"， Review comment: I don't think this was meant to be included here. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 04/Aug/20 22:04 zregvart commented on a change in pull request #444: URL: https://github.com/apache/camel-website/pull/444#discussion_r465355877 ########## File path: package.json ########## @@ -8，7 +8，6 @@ "build:sitemap": "gulp sitemap"， "build": "run-s build:*"， "preview": "run-s preview:*"， "preview:antora": "antora --clean --fetch antora-playbook.yml"， Review comment: I don't think this was meant to be included here. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 10/Aug/20 21:27 zregvart commented on a change in pull request #444: URL: https://github.com/apache/camel-website/pull/444#discussion_r468195526 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -46，22 +46，22 @@ cancel.style.display = 'block' index .search(search.value， { - hitsPerPage: 10， + hitsPerPage: 5， } ) .then((results) => { const hits = results.hits const data = hits.reduce((data， hit) => { const d = {} d.url = hit.url var section = hit.hierarchy.lvl0 if (hit.hierarchy.lvl6 !== null) section = section + ' [' + hit.hierarchy.lvl6 + ']' + if (hit.hierarchy.lvl6 !== null) section = section + '/' + hit.hierarchy.lvl6 var breadcrumbs = Object.values(hit.hierarchy) .slice(1) .filter((lvl) => lvl !== null) .join(' » ') + .join(' / ') d.breadcrumbs = ((breadcrumbs !== '') ? breadcrumbs : section) d.snippet = hit._snippetResult.content.value + '...' + d.snippet = hit._snippetResult.content.value.split('"').join('') + '...' Review comment: Seems that `hit._snippetResult` can be undefined， are we using `d.snippet`? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 10/Aug/20 21:27 zregvart commented on a change in pull request #444: URL: https://github.com/apache/camel-website/pull/444#discussion_r468195526 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -46，22 +46，22 @@ cancel.style.display = 'block' index .search(search.value， { - hitsPerPage: 10， + hitsPerPage: 5， } ) .then((results) => { const hits = results.hits const data = hits.reduce((data， hit) => { const d = {} d.url = hit.url var section = hit.hierarchy.lvl0 if (hit.hierarchy.lvl6 !== null) section = section + ' [' + hit.hierarchy.lvl6 + '] ' + if (hit.hierarchy.lvl6 !== null) section = section + '/' + hit.hierarchy.lvl6 var breadcrumbs = Object.values(hit.hierarchy) .slice(1) .filter((lvl) => lvl !== null) .join(' » ') + .join(' / ') d.breadcrumbs = ((breadcrumbs !== '') ? breadcrumbs : section) d.snippet = hit._snippetResult.content.value + '...' + d.snippet = hit._snippetResult.content.value.split('"').join('') + '...' Review comment: Seems that `hit._snippetResult` can be undefined， are we using `d.snippet`? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 11/Aug/20 07:58 AemieJ commented on a change in pull request #444: URL: https://github.com/apache/camel-website/pull/444#discussion_r468396127 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -46，22 +46，22 @@ cancel.style.display = 'block' index .search(search.value， { - hitsPerPage: 10， + hitsPerPage: 5， } ) .then((results) => { const hits = results.hits const data = hits.reduce((data， hit) => { const d = {} d.url = hit.url var section = hit.hierarchy.lvl0 if (hit.hierarchy.lvl6 !== null) section = section + ' [' + hit.hierarchy.lvl6 + ']' + if (hit.hierarchy.lvl6 !== null) section = section + '/' + hit.hierarchy.lvl6 var breadcrumbs = Object.values(hit.hierarchy) .slice(1) .filter((lvl) => lvl !== null) .join(' » ') + .join(' / ') d.breadcrumbs = ((breadcrumbs !== '') ? breadcrumbs : section) d.snippet = hit._snippetResult.content.value + '...' + d.snippet = hit._snippetResult.content.value.split('"').join('') + '...' Review comment: Yes， that makes sense， I altered the code to take care of it so it doesn't split for undefined values. Yes， we use `d.snippet` within the `summary` tag. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 11/Aug/20 07:58 AemieJ commented on a change in pull request #444: URL: https://github.com/apache/camel-website/pull/444#discussion_r468396127 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -46，22 +46，22 @@ cancel.style.display = 'block' index .search(search.value， { - hitsPerPage: 10， + hitsPerPage: 5， } ) .then((results) => { const hits = results.hits const data = hits.reduce((data， hit) => { const d = {} d.url = hit.url var section = hit.hierarchy.lvl0 if (hit.hierarchy.lvl6 !== null) section = section + ' [' + hit.hierarchy.lvl6 + '] ' + if (hit.hierarchy.lvl6 !== null) section = section + '/' + hit.hierarchy.lvl6 var breadcrumbs = Object.values(hit.hierarchy) .slice(1) .filter((lvl) => lvl !== null) .join(' » ') + .join(' / ') d.breadcrumbs = ((breadcrumbs !== '') ? breadcrumbs : section) d.snippet = hit._snippetResult.content.value + '...' + d.snippet = hit._snippetResult.content.value.split('"').join('') + '...' Review comment: Yes， that makes sense， I altered the code to take care of it so it doesn't split for undefined values. Yes， we use `d.snippet` within the `summary` tag. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 11/Aug/20 08:07 aashnajena commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-671796447 I think the cancel icon's position needs to be fixed for smaller screens. ![Uploading Screenshot_20200811-133410__01.jpg…]() ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 11/Aug/20 08:07 aashnajena commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-671796447 I think the cancel icon's position needs to be fixed for smaller screens. ! [Uploading Screenshot_20200811-133410__01.jpg…] () ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 11/Aug/20 08:08 aashnajena edited a comment on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-671796447 I think the cancel icon's position needs to be fixed for smaller screens. ![Screenshot_20200811-133410__01](https://user-images.githubusercontent.com/32356795/89873289-d4a11700-dbd7-11ea-95e0-966ee298b1a5.jpg) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 11/Aug/20 08:08 aashnajena edited a comment on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-671796447 I think the cancel icon's position needs to be fixed for smaller screens. ! [Screenshot_20200811-133410__01] ( https://user-images.githubusercontent.com/32356795/89873289-d4a11700-dbd7-11ea-95e0-966ee298b1a5.jpg ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 11/Aug/20 08:13 AemieJ commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-671799449 @aashnajena I will look into that and fix it. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 11/Aug/20 08:13 AemieJ commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-671799449 @aashnajena I will look into that and fix it. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 11/Aug/20 21:07 zregvart commented on a change in pull request #444: URL: https://github.com/apache/camel-website/pull/444#discussion_r468865056 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -356，7 +418，7 @@ body { } #search-cancel { - bottom: calc(50% - 0.45rem); + margin-top: 0.75rem; } #search_results { Review comment: I think it looks a bit better if we take up full width on smaller screens ```suggestion #search_results { left: 0; width: 100vw; ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 11/Aug/20 21:07 zregvart commented on a change in pull request #444: URL: https://github.com/apache/camel-website/pull/444#discussion_r468865056 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -356，7 +418，7 @@ body { } #search-cancel { - bottom: calc(50% - 0.45rem); + margin-top: 0.75rem; } #search_results { Review comment: I think it looks a bit better if we take up full width on smaller screens ```suggestion #search_results { left: 0; width: 100vw; ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 12/Aug/20 09:20 zregvart merged pull request #444: URL: https://github.com/apache/camel-website/pull/444 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 12/Aug/20 09:20 zregvart merged pull request #444: URL: https://github.com/apache/camel-website/pull/444 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 12/Aug/20 09:20 zregvart commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-672759452 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 12/Aug/20 09:20 zregvart commented on pull request #444: URL: https://github.com/apache/camel-website/pull/444#issuecomment-672759452 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org
CAMEL-15334,Unassigned,2020-07-27T06:26:09+0000,1595816769， where 1595816769 is the epoch,Jiri Ondrusek can you have a look? Thanks.,Hide Permalink Jiri Ondrusek added a comment - 27/Jul/20 06:26 I'll look into it. Show Jiri Ondrusek added a comment - 27/Jul/20 06:26 I'll look into it.
CAMEL-15333,Unassigned,2020-07-23T12:29:05+0000,1595492945， where 1595492945 is the epoch,Pre-reqs: SJMS producer with transacted=true， and not linked to a shared session (ReturnProducerCallback chosen in SjmsProducer#process)Sequence of events in method InOnlyProducer.sendMessage: message is sent successfully by producer.getMessageProducer().send(message); producer is returned to pool by releaseProducerCallback.release(producer); @Overridepublic void sendMessage(final Exchange exchange， final AsyncCallback callback， final MessageProducerResources producer， final ReleaseProducerCallback releaseProducerCallback) throws Exception { try { Message message = getEndpoint().getBinding().makeJmsMessage(exchange， producer.getSession()); producer.getMessageProducer().send(message); } catch (Exception e) { exchange.setException(new CamelExchangeException("Unable to complete sending the JMS message"， exchange， e)); } finally { releaseProducerCallback.release(producer); callback.done(isSynchronous()); }} When the producer is returned to the pool， the pool may decide that it should be disposed. See GenericObjectPool#addToObjectPool. The variable shouldDestroy can be set to true for a few reasons， but in my case it was because there were too many idle producers in the pool (_pool.size() >= _maxIdle). When it is destroyed， SjmsProducer$MessageProducerResourcesFactory#destroyObject is called. If the session is transacted， then this method will roll it back.@Overridepublic void destroyObject(MessageProducerResources model) throws Exception { if (model.getMessageProducer() != null) { model.getMessageProducer().close(); } if (model.getSession() != null) { try { if (model.getSession().getTransacted()) { try { model.getSession().rollback(); } catch (Exception e) { // Do nothing. Just make sure we are cleaned up } } model.getSession().close(); } catch (Exception e) { // TODO why is the session closed already? } }} There was only a subtle indication that this happened in the log， with some logging from the JMS client library (qpid in this case) at debug level.2020-07-22 11:34:48.259 DEBUG|mdc.routename|ID-EXCHANGE-1595392487340-0-3| 27108 --- [Camel (camel-1) thread #15 - SjmsBatchConsumer] o.a.camel.component.sjms.SjmsProducer : Processing Exchange.id:ID-EXCHANGE-1595392487340-0-32020-07-22 11:34:48.260 DEBUG|mdc.routename|ID-EXCHANGE-1595392487340-0-3| 27108 --- [Camel (camel-1) thread #15 - SjmsBatchConsumer] o.a.camel.component.sjms2.Sjms2Endpoint : Creating ConnectionResource with connectionCount: 1 using ConnectionFactory: org.springframework.jms.connection.CachingConnectionFactory@2db98e222020-07-22 11:34:49.158 DEBUG||| 27108 --- [AmqpProvider :(1):[amqps://localhost:5672]] o.a.q.j.p.a.AmqpTransactionCoordinator : New TX started: TX:ID:3ab193ce-faeb-42a2-ab39-1e7a92d1cc58:1:22020-07-22 11:34:49.158 DEBUG|mdc.routename|ID-EXCHANGE-1595392487340-0-3| 27108 --- [Camel (camel-1) thread #15 - SjmsBatchConsumer] o.a.qpid.jms.JmsLocalTransactionContext : Begin: TX:ID:3ab193ce-faeb-42a2-ab39-1e7a92d1cc58:1:22020-07-22 11:34:49.158 DEBUG|mdc.routename|ID-EXCHANGE-1595392487340-0-3| 27108 --- [Camel (camel-1) thread #15 - SjmsBatchConsumer] o.s.j.c.CachingConnectionFactory : Registering cached JMS Session for mode 0: org.apache.qpid.jms.JmsSession@322f173f2020-07-22 11:34:49.173 DEBUG|mdc.routename|ID-EXCHANGE-1595392487340-0-3| 27108 --- [Camel (camel-1) thread #15 - SjmsBatchConsumer] o.s.j.c.CachingConnectionFactory : Registering cached JMS MessageProducer for destination [queuename]: org.apache.qpid.jms.JmsMessageProducer@24ff95c92020-07-22 11:34:49.175 DEBUG|mdc.routename|ID-EXCHANGE-1595392487340-0-3| 27108 --- [Camel (camel-1) thread #15 - SjmsBatchConsumer] o.a.camel.component.sjms.SjmsProducer : Sending message synchronously: <?xml version="1.0" encoding="UTF-8"?> (snip)2020-07-22 11:34:49.201 DEBUG|mdc.routename|ID-EXCHANGE-1595392487340-0-3| 27108 --- [Camel (camel-1) thread #15 - SjmsBatchConsumer] o.a.qpid.jms.JmsLocalTransactionContext : Rollback: TX:ID:3ab193ce-faeb-42a2-ab39-1e7a92d1cc58:1:22020-07-22 11:34:49.207 DEBUG||| 27108 --- [AmqpProvider :(1):[amqps://localhost:5672]] o.a.q.j.p.a.AmqpTransactionCoordinator : New TX started: TX:ID:3ab193ce-faeb-42a2-ab39-1e7a92d1cc58:1:42020-07-22 11:34:49.367 DEBUG||| 27108 --- [AmqpProvider :(1):[amqps://localhost:5672]] o.a.q.j.p.a.AmqpTransactionCoordinator : Last TX request succeeded: TX:ID:3ab193ce-faeb-42a2-ab39-1e7a92d1cc58:1:22020-07-22 11:34:49.367 DEBUG|mdc.routename|ID-EXCHANGE-1595392487340-0-3| 27108 --- [Camel (camel-1) thread #15 - SjmsBatchConsumer] o.a.camel.component.sjms.SjmsProducer : Processing Exchange.id:ID-EXCHANGE-1595392487340-0-3 - SUCCESS2020-07-22 11:34:49.371 DEBUG|mdc.routename|ID-EXCHANGE-1595392487340-0-3| 27108 --- [Camel (camel-1) thread #15 - SjmsBatchConsumer] .c.s.t.SessionTransactionSynchronization : Processing completion of ExchangeId: ID-EXCHANGE-1595392487340-0-32020-07-22 11:34:49.371 DEBUG|mdc.routename|ID-EXCHANGE-1595392487340-0-3| 27108 --- [Camel (camel-1) thread #15 - SjmsBatchConsumer] o.a.qpid.jms.JmsLocalTransactionContext : Commit: TX:ID:3ab193ce-faeb-42a2-ab39-1e7a92d1cc58:1:4Even the subsequent session.commit() in SessionTransactionSynchronization#onComplete did not fail - I think a new transaction (TX:ID:3ab193ce-faeb-42a2-ab39-1e7a92d1cc58:1:4) was started on the session when the first transaction was rolled back (TX:ID:3ab193ce-faeb-42a2-ab39-1e7a92d1cc58:1:2). The end result of this is that InOnlyProducer.sendMessage completes successfully without setting any exception on the exchange， but the message has been rolled back and not sent. It is lost.,Hide Permalink Brad Harvey added a comment - 23/Jul/20 12:29 The condition that caused too many idle producers in the pool and triggers this bug may be unusual， but we can get it fairly reliably: asyncStartListener=true on the sjms-batch consumer and also the sjms producer， though not sure if it does anything on the producer. SSL is enabled - less reliable to reproduce when it is not (maybe makes it take longer to create connections) There are messages ready for the route as soon as the application is started I've only seen it occur upon application startup. I think this combination might be causing 2 threads to create producers， which then gets dropped back to a single producer in the pool due to the default producer cache size of 1. Show Brad Harvey added a comment - 23/Jul/20 12:29 The condition that caused too many idle producers in the pool and triggers this bug may be unusual， but we can get it fairly reliably: asyncStartListener=true on the sjms-batch consumer and also the sjms producer， though not sure if it does anything on the producer. SSL is enabled - less reliable to reproduce when it is not (maybe makes it take longer to create connections) There are messages ready for the route as soon as the application is started I've only seen it occur upon application startup. I think this combination might be causing 2 threads to create producers， which then gets dropped back to a single producer in the pool due to the default producer cache size of 1. Hide Permalink Claus Ibsen added a comment - 03/Aug/20 07:12 Ah thanks for the detailed report. So I guess we should somehow know if the resource is releases back in the pool due to operation was success， and that if the pool decides to destroy the resource， then we should not rollback any TX sessions. However if for some other "odd" situations then the TX may need to rollback (however if a inflight TX is not comitted， then the TX manager may regard it as failed and rollback it anyway; so we can potentially remove that rollback code in the destroy). Show Claus Ibsen added a comment - 03/Aug/20 07:12 Ah thanks for the detailed report. So I guess we should somehow know if the resource is releases back in the pool due to operation was success， and that if the pool decides to destroy the resource， then we should not rollback any TX sessions. However if for some other "odd" situations then the TX may need to rollback (however if a inflight TX is not comitted， then the TX manager may regard it as failed and rollback it anyway; so we can potentially remove that rollback code in the destroy). Hide Permalink Claus Ibsen added a comment - 03/Aug/20 17:21 I wonder if you can build a reproducer using mockito like you did for that other ticket? Show Claus Ibsen added a comment - 03/Aug/20 17:21 I wonder if you can build a reproducer using mockito like you did for that other ticket? Hide Permalink Brad Harvey added a comment - 04/Aug/20 01:20 Hi Claus， I'm not really sure what the solution would look like. The caching model seems to have the producer owning/controlling the session lifecycle which is a bit backwards to how it would normally work and I'm finding a bit hard to reconcile with transacted sessions， which obviously work at the session level. I'm not even sure if the model.session.close() in destroyObject makes sense for a transacted session. The standard JMS component fits our use case so we have switched to that. Spring boot app (so can use caching connection factory)， consumer side is sjms-batch. In camel 2 we had used the ability of SJMS to loop over collections but with that gone in 3 we have switched to split in the route + transacted JMS. I won't be able to work on a reproducer for this one since we're no longer using the component. I haven't provided any mockito reproducers for anything， maybe that was someone else Perhaps setting maxIdle to 0 would trigger it. Regards Brad Show Brad Harvey added a comment - 04/Aug/20 01:20 Hi Claus， I'm not really sure what the solution would look like. The caching model seems to have the producer owning/controlling the session lifecycle which is a bit backwards to how it would normally work and I'm finding a bit hard to reconcile with transacted sessions， which obviously work at the session level. I'm not even sure if the model.session.close() in destroyObject makes sense for a transacted session. The standard JMS component fits our use case so we have switched to that. Spring boot app (so can use caching connection factory)， consumer side is sjms-batch. In camel 2 we had used the ability of SJMS to loop over collections but with that gone in 3 we have switched to split in the route + transacted JMS. I won't be able to work on a reproducer for this one since we're no longer using the component. I haven't provided any mockito reproducers for anything， maybe that was someone else Perhaps setting maxIdle to 0 would trigger it. Regards Brad Hide Permalink Claus Ibsen added a comment - 04/Aug/20 11:54 Yeah it seems a bit backwards with session and producer pooling tied together. Show Claus Ibsen added a comment - 04/Aug/20 11:54 Yeah it seems a bit backwards with session and producer pooling tied together.
CAMEL-15332,Unassigned,2020-07-23T11:34:16+0000,1595489656， where 1595489656 is the epoch,Hi，I try to do an Http request API call for for a banking application in SAP Cloud platform integration.Therefore I need a mandatory header for security reasons: DateMy issue is that the camel framework headerfilterstrategy filters out this header， so the request gives me an error:{"errors":[\{"code":"missingHeader"，"detail":"There is a missing mandatory header in the request: Date."，"meta":{"header":"Date"}}]} Is there any possibility to override his behavior with an javascript or groovyscript?,Hide Permalink Andrea Cosentino added a comment - 23/Jul/20 11:34 You can pass a custom httpFilterStrategy as uri option in camel-http. This is not a bug. https://github.com/apache/camel/blob/master/components/camel-http-common/src/main/java/org/apache/camel/http/common/HttpHeaderFilterStrategy.java You can create a filterStrategy like this and removing date. Then add that to the camel registry and reference it， but again it's not a bug. https://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.5 Show Andrea Cosentino added a comment - 23/Jul/20 11:34 You can pass a custom httpFilterStrategy as uri option in camel-http. This is not a bug. https://github.com/apache/camel/blob/master/components/camel-http-common/src/main/java/org/apache/camel/http/common/HttpHeaderFilterStrategy.java You can create a filterStrategy like this and removing date. Then add that to the camel registry and reference it， but again it's not a bug. https://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.5
CAMEL-15331,Jiri Ondrusek,2020-07-23T08:23:43+0000,1595478223， where 1595478223 is the epoch,Change tests to use testcontainers instead of cassandra unit,There are no comments yet on this issue.
CAMEL-15330,James Netherton,2020-07-23T07:53:04+0000,1595476384， where 1595476384 is the epoch,,There are no comments yet on this issue.
CAMEL-15329,Unassigned,2020-07-23T04:44:06.419Z,1595465046.419， where 1595465046.419 is the epoch,For the navbar menu to exclude the presence of sub-menus， there is a need to create a page for the community pages. The layout presentation for the community page will be similar to that of docs pages. The presentation of the same is shown within community-section(#1 #2 #3).png,Hide Permalink Aemie added a comment - 23/Jul/20 04:48 Zoran Regvart Maria Arias de Reyna Dominguez do you prefer this layout or any additional information or detail is required? Show Aemie added a comment - 23/Jul/20 04:48 Zoran Regvart Maria Arias de Reyna Dominguez do you prefer this layout or any additional information or detail is required? Hide Permalink Maria Arias de Reyna Dominguez added a comment - 23/Jul/20 07:34 - edited Are the titles links? To me the dots below the title seems weird and I would make it a link with some hover and no dots below. We have the "Continue Reading" as a link too， in case someone doesn't realize the title is a link. But I am a bad ux designer， so (Now it is when you point to me some other places with titles with dots because they are links) Show Maria Arias de Reyna Dominguez added a comment - 23/Jul/20 07:34 - edited Are the titles links? To me the dots below the title seems weird and I would make it a link with some hover and no dots below. We have the "Continue Reading" as a link too， in case someone doesn't realize the title is a link. But I am a bad ux designer， so (Now it is when you point to me some other places with titles with dots because they are links) Hide Permalink Maria Arias de Reyna Dominguez added a comment - 23/Jul/20 07:36 Besides that， I like it. Visually quick to find whatever you need and the texts are quite explicative. Show Maria Arias de Reyna Dominguez added a comment - 23/Jul/20 07:36 Besides that， I like it. Visually quick to find whatever you need and the texts are quite explicative. Hide Permalink Aemie added a comment - 23/Jul/20 09:49 - edited Maria Arias de Reyna Dominguez no the titles aren't the link. Only the images and the continue reading is the link. Below the title， we have included a border-bottom which seems to create a more impact on the title， in my opinion. This layout was similarly used for the docs page- https://camel.apache.org/docs/ Show Aemie added a comment - 23/Jul/20 09:49 - edited Maria Arias de Reyna Dominguez no the titles aren't the link. Only the images and the continue reading is the link. Below the title， we have included a border-bottom which seems to create a more impact on the title， in my opinion. This layout was similarly used for the docs page- https://camel.apache.org/docs/ Hide Permalink ASF GitHub Bot added a comment - 23/Jul/20 14:50 AemieJ opened a new pull request #438: URL: https://github.com/apache/camel-website/pull/438 It is preferred to have the removal of sub-menus from the navbar of the website. This PR deals with the removal of the dropdown items within the community section. Created a community page with minimalist layout. Includes the required information and easier for the user to navigate. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 23/Jul/20 14:50 AemieJ opened a new pull request #438: URL: https://github.com/apache/camel-website/pull/438 It is preferred to have the removal of sub-menus from the navbar of the website. This PR deals with the removal of the dropdown items within the community section. Created a community page with minimalist layout. Includes the required information and easier for the user to navigate. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 27/Jul/20 07:59 aashnajena commented on pull request #438: URL: https://github.com/apache/camel-website/pull/438#issuecomment-664184743 I think we can reuse the CSS from the docs page. We could rename the .project class to something more general like .container (to make it semantically appropriate). It will save us from repeating the CSS code. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/Jul/20 07:59 aashnajena commented on pull request #438: URL: https://github.com/apache/camel-website/pull/438#issuecomment-664184743 I think we can reuse the CSS from the docs page. We could rename the .project class to something more general like .container (to make it semantically appropriate). It will save us from repeating the CSS code. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 29/Jul/20 07:33 AemieJ commented on pull request #438: URL: https://github.com/apache/camel-website/pull/438#issuecomment-664785314 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 29/Jul/20 07:33 AemieJ commented on pull request #438: URL: https://github.com/apache/camel-website/pull/438#issuecomment-664785314 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 29/Jul/20 17:53 AemieJ removed a comment on pull request #438: URL: https://github.com/apache/camel-website/pull/438#issuecomment-664791423 @zregvart the deployment fails 'cause Hugo can't be fetched. I can't find any possible errors in my code as it works perfectly on my local machine. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 29/Jul/20 17:53 AemieJ removed a comment on pull request #438: URL: https://github.com/apache/camel-website/pull/438#issuecomment-664791423 @zregvart the deployment fails 'cause Hugo can't be fetched. I can't find any possible errors in my code as it works perfectly on my local machine. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 03:24 AemieJ edited a comment on pull request #438: URL: https://github.com/apache/camel-website/pull/438#issuecomment-664785314 @zregvart there is not a requirement to mention the authors of the SVG icons. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 03:24 AemieJ edited a comment on pull request #438: URL: https://github.com/apache/camel-website/pull/438#issuecomment-664785314 @zregvart there is not a requirement to mention the authors of the SVG icons. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 01/Aug/20 18:28 zregvart merged pull request #438: URL: https://github.com/apache/camel-website/pull/438 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 01/Aug/20 18:28 zregvart merged pull request #438: URL: https://github.com/apache/camel-website/pull/438 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 01/Aug/20 18:28 zregvart commented on pull request #438: URL: https://github.com/apache/camel-website/pull/438#issuecomment-667570336 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 01/Aug/20 18:28 zregvart commented on pull request #438: URL: https://github.com/apache/camel-website/pull/438#issuecomment-667570336 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Zoran Regvart added a comment - 01/Aug/20 18:33 Thanks Aemie! Show Zoran Regvart added a comment - 01/Aug/20 18:33 Thanks Aemie !
CAMEL-15328,Freeman Yue Fang,2020-07-22T16:20:06+0000,1595420406， where 1595420406 is the epoch,,There are no comments yet on this issue.
CAMEL-15327,Omar Al-Safi,2020-07-22T13:05:37+0000,1595408737， where 1595408737 is the epoch,Due to the introduction of stream rest on the flux operations on Azure SDK v12.7.0 as shows here: https://github.com/Azure/azure-sdk-for-java/pull/11677/files/4f66bb4e972fefde9f5fd860bf63289d87604725#diff-74786ac8dc9aacd16c785f1fa02dc2a7R254， hence we need to wrap any inputStream that does not support mark/reset with BufferedInputStream,There are no comments yet on this issue.
CAMEL-15326,Andrea Cosentino,2020-07-22T12:36:49.451Z,1595407009.451， where 1595407009.451 is the epoch,The consumer on the camel-slack component is not checking for error responses coming from the Slack API. Under some circumstances this can be problematic and hide messages that would be helpful for the user to diagnose problems on his/her setup of the app/bot account. One example that causes this problem is when the user creates a bot and does not give the bot the channels:read scope/permission. In this case the component throws a NullPointerException because it looks for an element on the json response that does not exist. It seems it can also happen when trying to read the channel messages without the channels:history scope， although， in this case the component does not throw any exception.,Hide Permalink Otavio Rodolfo Piske added a comment - 22/Jul/20 12:37 I have a fix in progress for this issue and I will send a PR for review. Show Otavio Rodolfo Piske added a comment - 22/Jul/20 12:37 I have a fix in progress for this issue and I will send a PR for review.
CAMEL-15325,Unassigned,2020-07-22T11:36:56.946Z,1595403416.946， where 1595403416.946 is the epoch,This issue seems to be scoped to Groovy， at-least per my initial testing. The same code runs correctly in Java. When running this script without the GOOGLE_APPLICATION_CREDENTIALS environment variable set， Camel comes up， but when the same code is run in Java， it correctly fails with the error that GOOGLE_APPLICATION_CREDENTIALS needs to be set.Also， messages from pubsub are not being consumed as well， even if the GOOGLE_APPLICATION_CREDENTIALS environment variable set. I have tried it with Camel 3.4.0， 3.4.1 and 3.4.2 and this issue occurs on all three versions.Attached is the test script. The project name has been anonymized. Groovy， Java and OS versions are below$ groovy --versionGroovy Version: 3.0.4 JVM: 11.0.6 Vendor: Azul Systems， Inc. OS: Mac OS X,There are no comments yet on this issue.
CAMEL-15324,Jiri Ondrusek,2020-07-22T11:10:06+0000,1595401806， where 1595401806 is the epoch,There is an error in camel-as2， which can be seen during execution of client on jdk8.Here is an exception:Exception in thread "AS2Hdlr-41811" java.lang.NoSuchMethodError: java.nio.CharBuffer.clear()Ljava/nio/CharBuffer; at org.apache.camel.component.as2.api.io.AS2SessionInputBuffer.appendDecoded(AS2SessionInputBuffer.java:331) at org.apache.camel.component.as2.api.io.AS2SessionInputBuffer.lineFromReadBuffer(AS2SessionInputBuffer.java:311) at org.apache.camel.component.as2.api.io.AS2SessionInputBuffer.readLine(AS2SessionInputBuffer.java:216)Error was simulated during implementation of camel-quarkus extension for as2.,Hide Permalink Andrea Cosentino added a comment - 22/Jul/20 11:10 This is fixed in 3.4.2 but we need to cast the CharBuffer to Buffer， to avoid this situation. 3.4.1 was built with JDK11， that's why you see this error. Show Andrea Cosentino added a comment - 22/Jul/20 11:10 This is fixed in 3.4.2 but we need to cast the CharBuffer to Buffer， to avoid this situation. 3.4.1 was built with JDK11， that's why you see this error.
CAMEL-15323,Ramu,2020-10-03T23:21:06+0000,1601752866， where 1601752866 is the epoch,Add example for spring boot actuator that could output route details， eg a list of the routes and their state， and some metrics.It was also possible to stop/start routes etc.However the latter was a concern for security.But having a basic http endpoint service to dump route details would be good,Hide Permalink Jose 'Joshi' Raez Rodriguez added a comment - 03/Oct/20 23:21 - edited Hi!. Could I pick up this story? Show Jose 'Joshi' Raez Rodriguez added a comment - 03/Oct/20 23:21 - edited Hi!. Could I pick up this story? Hide Permalink Ramu added a comment - 04/Oct/20 02:07 - edited Jose 'Joshi' Raez Rodriguez I already started working on it. I see 'camel-example-spring-boot-xml' 'camel-example-spring-boot' present The only functionality missing is start and stopping routes. Jose 'Joshi' Raez Rodriguez you are welcome to work on this Thanks for your interest Show Ramu added a comment - 04/Oct/20 02:07 - edited Jose 'Joshi' Raez Rodriguez I already started working on it. I see 'camel-example-spring-boot-xml' 'camel-example-spring-boot' present The only functionality missing is start and stopping routes. Jose 'Joshi' Raez Rodriguez you are welcome to work on this Thanks for your interest Hide Permalink Jose 'Joshi' Raez Rodriguez added a comment - 04/Oct/20 17:26 Thanks!， I'll take a look at these two you mentioned. I thought from the story description that it had to be added to the camel-spring-boot-examples repository and not the camel-examples one. Should it be added in camel-examples following the two examples you told me? Should I add the start/stop functionalities as well even with the security risks? Thanks and kind regards， Show Jose 'Joshi' Raez Rodriguez added a comment - 04/Oct/20 17:26 Thanks!， I'll take a look at these two you mentioned. I thought from the story description that it had to be added to the camel-spring-boot-examples repository and not the camel-examples one. Should it be added in camel-examples following the two examples you told me? Should I add the start/stop functionalities as well even with the security risks? Thanks and kind regards， Hide Permalink Ramu added a comment - 05/Oct/20 03:03 Jose 'Joshi' Raez Rodriguez the example should go camel spring boot examples Show Ramu added a comment - 05/Oct/20 03:03 Jose 'Joshi' Raez Rodriguez the example should go camel spring boot examples Hide Permalink Jose 'Joshi' Raez Rodriguez added a comment - 10/Oct/20 17:14 - edited Created [PR|https://github.com/apache/camel-spring-boot-examples/pull/16] I'm not exactly sure if this is what this story wanted - I'm afraid I'm losing some context here. I found ways to shut down specifc routes or get their info， but it seemed like they had more to do with Camel on its own and nothing to do with Actuator. Seeing there were no specifc Actuator examples， I went that route， but feel free to say if you had something else in mind. Thanks! Show Jose 'Joshi' Raez Rodriguez added a comment - 10/Oct/20 17:14 - edited Created [PR| https://github.com/apache/camel-spring-boot-examples/pull/16 ] I'm not exactly sure if this is what this story wanted - I'm afraid I'm losing some context here. I found ways to shut down specifc routes or get their info， but it seemed like they had more to do with Camel on its own and nothing to do with Actuator. Seeing there were no specifc Actuator examples， I went that route， but feel free to say if you had something else in mind. Thanks! Hide Permalink Jose 'Joshi' Raez Rodriguez added a comment - 09/Nov/20 19:39 Hi， I'm sorry but I'll take much longer than expected. I had some time when I created the original PR， and right now I'm busier with other work/life stuff which are taking precedence right now. Just in case someone else wants to take over this ticket. I don't have an ETA on when I'll be able to get around to do it. Show Jose 'Joshi' Raez Rodriguez added a comment - 09/Nov/20 19:39 Hi， I'm sorry but I'll take much longer than expected. I had some time when I created the original PR， and right now I'm busier with other work/life stuff which are taking precedence right now. Just in case someone else wants to take over this ticket. I don't have an ETA on when I'll be able to get around to do it.
CAMEL-15322,Andrea Cosentino,2020-07-31T12:17:04+0000,1596183424， where 1596183424 is the epoch,Needs to be done before 15 August.,Hide Permalink Andrea Cosentino added a comment - 31/Jul/20 12:17 This should be done. Show Andrea Cosentino added a comment - 31/Jul/20 12:17 This should be done.
CAMEL-15321,Unassigned,2020-07-22T05:35:37+0000,1595381737， where 1595381737 is the epoch,Using activemq 5.15.9 with camel 3.2.0 is leading to a IllegalArgumentException: Caused by: java.lang.RuntimeException: java.lang.IllegalArgumentException: wrong number of argumentsCaused by: java.lang.RuntimeException: java.lang.IllegalArgumentException: wrong number of arguments at org.apache.camel.util.IntrospectionSupport.extractProperties(IntrospectionSupport.java:41) at org.apache.activemq.camel.component.ActiveMQComponent.convertPathToActualDestination(ActiveMQComponent.java:161) at org.apache.camel.component.jms.JmsComponent.createEndpoint(JmsComponent.java:1081) at org.apache.camel.support.DefaultComponent.createEndpoint(DefaultComponent.java:233) at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:842) ... 53 moreCaused by: java.lang.IllegalArgumentException: wrong number of arguments at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ... suppressed 3 lines at org.apache.camel.util.IntrospectionSupport.extractProperties(IntrospectionSupport.java:39) ... 57 more This is due to the dynamic invocation not being correctly implemented. @Deprecated public static Map<String， Object> extractProperties(Map<String， Object> properties， String optionPrefix) { try { Class<?> clazz = Class.forName("org.apache.camel.support.IntrospectionSupport"); Method method = clazz.getMethod("extractProperties"， Map.class， String.class); return (Map) method.invoke(properties， optionPrefix); } catch (Throwable t) { throw new RuntimeException(t); } }the invocation skipped the instance it needs to use to invoke the method from. The method is a static， so it should use a null instance. @Deprecated public static Map<String， Object> extractProperties(Map<String， Object> properties， String optionPrefix) { try { Class<?> clazz = Class.forName("org.apache.camel.support.IntrospectionSupport"); Method method = clazz.getMethod("extractProperties"， Map.class， String.class); return (Map) method.invoke(null， properties， optionPrefix); } catch (Throwable t) { throw new RuntimeException(t); } },Hide Permalink Andrea Cosentino added a comment - 22/Jul/20 05:35 Can you please try with 3.4.0 or 3.4.1 the LTS releases? Thanks 3.2.x is not maintained and won't be released anymore. Show Andrea Cosentino added a comment - 22/Jul/20 05:35 Can you please try with 3.4.0 or 3.4.1 the LTS releases? Thanks 3.2.x is not maintained and won't be released anymore. Hide Permalink Andrea Cosentino added a comment - 22/Jul/20 05:53 Ah wait. You're using activemq-camel. It's not supported with Camel 3. https://github.com/apache/activemq/blob/master/pom.xml#L50 You need to use camel-activemq component from org.apache.camel groupId Show Andrea Cosentino added a comment - 22/Jul/20 05:53 Ah wait. You're using activemq-camel. It's not supported with Camel 3. https://github.com/apache/activemq/blob/master/pom.xml#L50 You need to use camel-activemq component from org.apache.camel groupId
CAMEL-15320,Unassigned,2020-07-21T17:36:49+0000,1595338609， where 1595338609 is the epoch,1) The current camel examples utilize GooglePubsubConnectionFactory to connect to pubsub till 3.1.0 https://github.com/apache/camel/blob/camel-3.1.0/components/camel-google-pubsub/src/main/java/org/apache/camel/component/google/pubsub/GooglePubsubConnectionFactory.java This has been removed from camel 3.2 and above and camel can't connect to pubsub with grpc errors WARNING: [Channel<1>: (<topicName>?maxMessagesPerPoll=10&concurrentConsumers=1)] Failed to resolve name. status=Status{code=UNAVAILABLE， description=Unable to resolve host <topicName>， cause=java.lang.RuntimeException: java.net.UnknownHostException: <topicName>: Name or service not known at io.grpc.internal.DnsNameResolver.resolveAll(DnsNameResolver.java:436) at io.grpc.internal.DnsNameResolver$Resolve.resolveInternal(DnsNameResolver.java:272) at io.grpc.internal.DnsNameResolver$Resolve.run(DnsNameResolver.java:228) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748) Caused by: java.net.UnknownHostException: <topicName>: Name or service not known at java.net.Inet4AddressImpl.lookupAllHostAddr(Native Method) at java.net.InetAddress$2.lookupAllHostAddr(InetAddress.java:929) at java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1324) at java.net.InetAddress.getAllByName0(InetAddress.java:1277) at java.net.InetAddress.getAllByName(InetAddress.java:1193) at java.net.InetAddress.getAllByName(InetAddress.java:1127) at io.grpc.internal.DnsNameResolver$JdkAddressResolver.resolveAddress(DnsNameResolver.java:646) at io.grpc.internal.DnsNameResolver.resolveAll(DnsNameResolver.java:404) ... 5 more,Hide Permalink Andrea Cosentino added a comment - 21/Jul/20 17:36 This is related to the example， not to the component. Show Andrea Cosentino added a comment - 21/Jul/20 17:36 This is related to the example， not to the component. Hide Permalink SAILOKESH DIVI added a comment - 21/Jul/20 17:44 Andrea Cosentino We are currently running camel in production kubernetes(pod running camel) listening on pubsub with 2.25.0 where we build GooglePubsubConnectionFactory as described in the example and it works fine Due to open source vulnerabilities we are forced to upgrade to 3.4.0 Till 3.1.0 the GooglePubsubConnectionFactory class is still there so there is no issue From 3.2.0 this class is removed and now we see these issues unable to connect to pubsub. Andrea Cosentino How is the new handshake handled this error is actually happening on the component. i followed the same pattern described in one of your IT tests https://github.com/apache/camel/blob/camel-3.4.0/components/camel-google-pubsub/src/test/java/org/apache/camel/component/google/pubsub/PubsubTestSupport.java#L72-L79 Is there anything I am missing here ? Show SAILOKESH DIVI added a comment - 21/Jul/20 17:44 Andrea Cosentino We are currently running camel in production kubernetes(pod running camel) listening on pubsub with 2.25.0 where we build GooglePubsubConnectionFactory as described in the example and it works fine Due to open source vulnerabilities we are forced to upgrade to 3.4.0 Till 3.1.0 the GooglePubsubConnectionFactory class is still there so there is no issue From 3.2.0 this class is removed and now we see these issues unable to connect to pubsub. Andrea Cosentino How is the new handshake handled this error is actually happening on the component. i followed the same pattern described in one of your IT tests https://github.com/apache/camel/blob/camel-3.4.0/components/camel-google-pubsub/src/test/java/org/apache/camel/component/google/pubsub/PubsubTestSupport.java#L72-L79 Is there anything I am missing here ? Hide Permalink Andrea Cosentino added a comment - 21/Jul/20 17:47 There are other issues reported about this component. Omar Al-Safi is working on this Show Andrea Cosentino added a comment - 21/Jul/20 17:47 There are other issues reported about this component. Omar Al-Safi is working on this Hide Permalink SAILOKESH DIVI added a comment - 21/Jul/20 17:53 Should we limit our upgrade to 3.1.0 or is there is a workaround to get to 3.4.0 Andrea Cosentino Omar Al-Safi Is this a known issue . I tried to search unknown issues but can't find one that is related If you guys can add an example here that would be great https://github.com/apache/camel-examples Show SAILOKESH DIVI added a comment - 21/Jul/20 17:53 Should we limit our upgrade to 3.1.0 or is there is a workaround to get to 3.4.0 Andrea Cosentino Omar Al-Safi Is this a known issue . I tried to search unknown issues but can't find one that is related If you guys can add an example here that would be great https://github.com/apache/camel-examples Hide Permalink Omar Al-Safi added a comment - 22/Jul/20 08:27 SAILOKESH DIVI I think this is the same issue as CAMEL-15064 due to the new connection factory being introduced in 3.2.0. However， this issue has been fixed and released with 3.4.0， therefore it will make sense to you to upgrade to the latest version on branch 3.4.x which 3.4.2 (will be released shortly). Show Omar Al-Safi added a comment - 22/Jul/20 08:27 SAILOKESH DIVI I think this is the same issue as CAMEL-15064 due to the new connection factory being introduced in 3.2.0. However， this issue has been fixed and released with 3.4.0 ， therefore it will make sense to you to upgrade to the latest version on branch 3.4.x which 3.4.2 (will be released shortly). Hide Permalink SAILOKESH DIVI added a comment - 24/Jul/20 14:09 we have tried to use 3.4.0 but the issue is still persistent. As specified in CAMEL-15064 GOOGLE_APPLICATION_CREDENTIALS is not being passed as we are using workload identity (https://cloud.google.com/kubernetes-engine/docs/how-to/workload-identity) where the google-http-client switches between the connection It works till 3.1.0. How is the new connection handled in versions above Omar Al-Safi. Show SAILOKESH DIVI added a comment - 24/Jul/20 14:09 we have tried to use 3.4.0 but the issue is still persistent. As specified in CAMEL-15064 GOOGLE_APPLICATION_CREDENTIALS is not being passed as we are using workload identity ( https://cloud.google.com/kubernetes-engine/docs/how-to/workload-identity ) where the google-http-client switches between the connection It works till 3.1.0. How is the new connection handled in versions above Omar Al-Safi . Hide Permalink Omar Al-Safi added a comment - 24/Jul/20 14:15 SAILOKESH DIVI the issue reported in CAMEL-15064 occurs if you use the groovy script， If you'd use the java dsl， this shouldn't occur. However， would be nice if you can attach the logs and with the route code that you use in order to reproduce this issue from our end. Show Omar Al-Safi added a comment - 24/Jul/20 14:15 SAILOKESH DIVI the issue reported in CAMEL-15064 occurs if you use the groovy script， If you'd use the java dsl， this shouldn't occur. However， would be nice if you can attach the logs and with the route code that you use in order to reproduce this issue from our end. Hide Permalink SAILOKESH DIVI added a comment - 24/Jul/20 14:26 Omar Al-Safi the rote comes up successfully but the subscriber is not able to talk to pubsub from kubernetes and the grpc errors from the subscribers are attached to the Jira As the GooglePubsubConnectionFactory is removed how is the connection handled to pubsub 1) Will this support workload identity(https://cloud.google.com/kubernetes-engine/docs/how-to/workload-identity) when camel running in kubernetes Environment we have 1) Kubernetes Pod running camel consuming from Pubsub 2) Workload identity enabled so we don't need the GOOGLE_APP_CREDENTIALS 3) Camel wakes up with no issue 4) When trying to consume messages from pubsub we are seeing grpc errors [Channel<1>: (<topicName>?maxMessagesPerPoll=10&concurrentConsumers=1)] Failed to resolve name. status=Status{code=UNAVAILABLE， description=Unable to resolve host <topicName>， cause=java.lang.RuntimeException: java.net.UnknownHostException: <topicName>: Name or service not known at io.grpc.internal.DnsNameResolver.resolveAll(DnsNameResolver.java:436) at io.grpc.internal.DnsNameResolver$Resolve.resolveInternal(DnsNameResolver.java:272) at io.grpc.internal.DnsNameResolver$Resolve.run(DnsNameResolver.java:228) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748) Caused by: java.net.UnknownHostException: <topicName>: Name or service not known at java.net.Inet4AddressImpl.lookupAllHostAddr(Native Method) at java.net.InetAddress$2.lookupAllHostAddr(InetAddress.java:929) at java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1324) at java.net.InetAddress.getAllByName0(InetAddress.java:1277) at java.net.InetAddress.getAllByName(InetAddress.java:1193) at java.net.InetAddress.getAllByName(InetAddress.java:1127) at io.grpc.internal.DnsNameResolver$JdkAddressResolver.resolveAddress(DnsNameResolver.java:646) at io.grpc.internal.DnsNameResolver.resolveAll(DnsNameResolver.java:404) ... 5 more The same configuration works till 3.1.0 with workload identity Show SAILOKESH DIVI added a comment - 24/Jul/20 14:26 Omar Al-Safi the rote comes up successfully but the subscriber is not able to talk to pubsub from kubernetes and the grpc errors from the subscribers are attached to the Jira As the GooglePubsubConnectionFactory is removed how is the connection handled to pubsub 1) Will this support workload identity( https://cloud.google.com/kubernetes-engine/docs/how-to/workload-identity) when camel running in kubernetes Environment we have 1) Kubernetes Pod running camel consuming from Pubsub 2) Workload identity enabled so we don't need the GOOGLE_APP_CREDENTIALS 3) Camel wakes up with no issue 4) When trying to consume messages from pubsub we are seeing grpc errors [Channel<1>: (<topicName>?maxMessagesPerPoll=10&concurrentConsumers=1)] Failed to resolve name. status=Status{code=UNAVAILABLE， description=Unable to resolve host <topicName>， cause=java.lang.RuntimeException: java.net.UnknownHostException: <topicName>: Name or service not known at io.grpc.internal.DnsNameResolver.resolveAll(DnsNameResolver.java:436) at io.grpc.internal.DnsNameResolver$Resolve.resolveInternal(DnsNameResolver.java:272) at io.grpc.internal.DnsNameResolver$Resolve.run(DnsNameResolver.java:228) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) at java.lang.Thread.run(Thread.java:748) Caused by: java.net.UnknownHostException: <topicName>: Name or service not known at java.net.Inet4AddressImpl.lookupAllHostAddr(Native Method) at java.net.InetAddress$2.lookupAllHostAddr(InetAddress.java:929) at java.net.InetAddress.getAddressesFromNameService(InetAddress.java:1324) at java.net.InetAddress.getAllByName0(InetAddress.java:1277) at java.net.InetAddress.getAllByName(InetAddress.java:1193) at java.net.InetAddress.getAllByName(InetAddress.java:1127) at io.grpc.internal.DnsNameResolver$JdkAddressResolver.resolveAddress(DnsNameResolver.java:646) at io.grpc.internal.DnsNameResolver.resolveAll(DnsNameResolver.java:404) ... 5 more The same configuration works till 3.1.0 with workload identity Hide Permalink Omar Al-Safi added a comment - 24/Jul/20 15:01 SAILOKESH DIVI as you mentioned， the topic is not reachable due to network issue which unfortunately I am not able to pinpoint the culprit as this issue could be caused by many factors . However the question， does this issue only occur if you run the route as a pod within K8s or does it also occur if run your route locally? Also， would be helpful if you can attach some if your configs and the camel route code/xml that you use in order to help us here. Regarding your question on how does component handle the connection in absence of GooglePubsubConnectionFactory， honestly I am not in full details with the component， perhaps Alvin Kwekel could shed some light here? Show Omar Al-Safi added a comment - 24/Jul/20 15:01 SAILOKESH DIVI as you mentioned， the topic is not reachable due to network issue which unfortunately I am not able to pinpoint the culprit as this issue could be caused by many factors . However the question， does this issue only occur if you run the route as a pod within K8s or does it also occur if run your route locally? Also， would be helpful if you can attach some if your configs and the camel route code/xml that you use in order to help us here. Regarding your question on how does component handle the connection in absence of GooglePubsubConnectionFactory ， honestly I am not in full details with the component， perhaps Alvin Kwekel could shed some light here? Hide Permalink Omar Al-Safi added a comment - 24/Jul/20 15:55 SAILOKESH DIVI as I understood you， before you were using GooglePubsubConnectionFactory， which you can provide that to the component in order to connect to pubsub. After some reading， apparently that was the case with the legacy google pubsub library that you need add the authentication explicitly. However， this is different with the newer google libraries (which now this camel component supports)， the authentication's heavy lifting happens automatically by Google's library not by the component (as the case previously). Meaning if you run within the same GKE， you don't need to set any authentication. Please refer to this link for more info about the authentication. Also， please refer again to the component docs as modifications might be needed to be added to have your route working with 3.4. Show Omar Al-Safi added a comment - 24/Jul/20 15:55 SAILOKESH DIVI as I understood you， before you were using GooglePubsubConnectionFactory ， which you can provide that to the component in order to connect to pubsub. After some reading， apparently that was the case with the legacy google pubsub library that you need add the authentication explicitly. However， this is different with the newer google libraries (which now this camel component supports)， the authentication's heavy lifting happens automatically by Google's library not by the component (as the case previously). Meaning if you run within the same GKE， you don't need to set any authentication. Please refer to this link for more info about the authentication. Also， please refer again to the component docs as modifications might be needed to be added to have your route working with 3.4. Hide Permalink SAILOKESH DIVI added a comment - 30/Jul/20 14:54 - edited Omar Al-Safi you are right After upgrading to latest google-http-client and api-client we are able to successfully upgrade to 3.4.2 Thanks for all the help. We can close this as resolved //cc Andrea Cosentino Show SAILOKESH DIVI added a comment - 30/Jul/20 14:54 - edited Omar Al-Safi you are right After upgrading to latest google-http-client and api-client we are able to successfully upgrade to 3.4.2 Thanks for all the help. We can close this as resolved //cc Andrea Cosentino
CAMEL-15319,Matej Melko,2020-07-22T07:47:40+0000,1595389660， where 1595389660 is the epoch,I feel that current consumer of camel-Jira component is sort of limited. It could be useful to use atlassian-event library for listening events for also for closing issues， updating statuses， assignee's etc. I could do some PoC and extend this component.,Hide Permalink Claus Ibsen added a comment - 22/Jul/20 07:47 Yeah sure we love contributions Show Claus Ibsen added a comment - 22/Jul/20 07:47 Yeah sure we love contributions Hide Permalink Matej Melko added a comment - 27/Aug/20 12:55 - edited After some investigation I decided to stick with current polling solution .. and added new consumer that polls for changes in issues. PR: https://github.com/apache/camel/pull/4137 Show Matej Melko added a comment - 27/Aug/20 12:55 - edited After some investigation I decided to stick with current polling solution .. and added new consumer that polls for changes in issues. PR: https://github.com/apache/camel/pull/4137 Hide Permalink Claus Ibsen added a comment - 28/Aug/20 08:08 Thanks for the work and the PR Show Claus Ibsen added a comment - 28/Aug/20 08:08 Thanks for the work and the PR
CAMEL-15318,Omar Al-Safi,2020-07-21T08:12:48+0000,1595304768， where 1595304768 is the epoch,Since we have the new Azure components based on SDK v12: camel-azure-storage-blob camel-azure-storage-queueIt will make sense to mark the legacy azure component https://github.com/apache/camel/tree/master/components/camel-azure as Deprecated in order to remove it at later versions， which as result， reduce the maintenance overhead .,There are no comments yet on this issue.
CAMEL-15317,Gregor Zurowski,2020-07-21T08:10:50+0000,1595304650， where 1595304650 is the epoch,I am on the following page: https://camel.apache.org/download/when I click on zip or tar.gz download， I always got the message:The requested URL /apache/camel/apache-camel/3.4.1/apache-camel-3.4.1.zip was not found on this server. This happens since some days.So please make 3.4.1 available for download， or remove all link to this version.,Hide Permalink Gregor Zurowski added a comment - 21/Jul/20 08:10 I've (re-)published the release artifacts for 3.4.1: https://dist.apache.org/repos/dist/release/camel/apache-camel/3.4.1/ They should become available on the mirrors soon. Show Gregor Zurowski added a comment - 21/Jul/20 08:10 I've (re-)published the release artifacts for 3.4.1: https://dist.apache.org/repos/dist/release/camel/apache-camel/3.4.1/ They should become available on the mirrors soon.
CAMEL-15316,Andrea Cosentino,2020-07-20T18:01:09+0000,1595253669， where 1595253669 is the epoch,Camel Zipkin does not set correct span kind for components such as jms， kafka， amqp etc. For these components the Span kind should be either Consumer or Producer. However camel zipkin sets Server or Client span kind for all components. This is not just a cosmetic issue as the span kind determines what tracing headers are injected by brave library. E.g. Span kind Producer will inject b3 header which is comes from brave.propagation.B3SingleFormat.writeB3SingleFormatWithoutParentId(TraceContext). In case of JMS this becomes important for co-relation to work with a non camel application as X-B3-TraceId， X-B3-SpanId， X-B3-ParentSpanId & X-B3-Spampled are not valid JMS headers. Camel escapes the hyphens when these headers are written as JMS messages， but this is a non standard implementation. For co-relation to work using brave， these headers have to be written using b3 single format and this is determine by Span Kind.,There are no comments yet on this issue.
CAMEL-15315,Andrea Cosentino,2020-07-22T07:49:00+0000,1595389740， where 1595389740 is the epoch,When starting a spring-based Camel application， The following error is observed: 2020-07-19 21:33:08.236 ERROR 128775 — [ main] o.a.c.c.pulsar.utils.AutoConfiguration : java.lang.IllegalArgumentException: Invalid namespace format. namespace: default Believe the error is being caused by a bug in the AutoConfiguration class， specifically the ensureNameSpace method: private void ensureNameSpace(String tenant， String namespace) throws PulsarAdminException { List<String> namespaces = this.pulsarAdmin.namespaces().getNamespaces(tenant); if (!namespaces.contains(namespace)){ this.pulsarAdmin.namespaces().createNamespace(namespace， this.clusters); }} The problem would appear to be that pulsarAdmin.namespaces().getNamespaces(tenant) returns a list of fully qualified namespaces (e.g.， "default/public") whereas， the if check is comparing just the namespace alone (e.g. "public") against the fully qualified list. Naturally， this fails， and it then tries to create the namespace (which already exists)， feeding it in the wrong format， causing the error to be thrown.,Hide Permalink Claus Ibsen added a comment - 22/Jul/20 07:49 Are you able to work on a fix as a PR? Show Claus Ibsen added a comment - 22/Jul/20 07:49 Are you able to work on a fix as a PR? Hide Permalink James Adam added a comment - 22/Jul/20 15:42 Yea， I can do that. Show James Adam added a comment - 22/Jul/20 15:42 Yea， I can do that.
CAMEL-15314,Andrea Cosentino,2020-07-20T08:22:57+0000,1595218977， where 1595218977 is the epoch,When rebuilding the project we may have public static not in the dsldiff --git a/core/camel-endpointdsl/src/generated/java/org/apache/camel/builder/endpoint/StaticEndpointBuilders.java b/core/camel-endpointdsl/src/generated/java/org/apache/camel/builder/endpoint/StaticEndpointBuilders.javaindex 6a984b15cd3..b9421b525bd 100644--- a/core/camel-endpointdsl/src/generated/java/org/apache/camel/builder/endpoint/StaticEndpointBuilders.java+++ b/core/camel-endpointdsl/src/generated/java/org/apache/camel/builder/endpoint/StaticEndpointBuilders.java@@ -1127，7 +1127，7 @@ public class StaticEndpointBuilders { * * @param path label */- static org.apache.camel.builder.endpoint.dsl.IAM2EndpointBuilderFactory.IAM2EndpointBuilder aws2Iam(+ public static org.apache.camel.builder.endpoint.dsl.IAM2EndpointBuilderFactory.IAM2EndpointBuilder aws2Iam( String path) { return org.apache.camel.builder.endpoint.dsl.IAM2EndpointBuilderFactory.endpointBuilder("aws2-iam"， path); }@@ -1148，7 +1148，7 @@ public class StaticEndpointBuilders { * instead of the default name * @param path label */- static org.apache.camel.builder.endpoint.dsl.IAM2EndpointBuilderFactory.IAM2EndpointBuilder aws2Iam(+ public static org.apache.camel.builder.endpoint.dsl.IAM2EndpointBuilderFactory.IAM2EndpointBuilder aws2Iam( String componentName， String path) { return org.apache.camel.builder.endpoint.dsl.IAM2EndpointBuilderFactory.endpointBuilder(componentName， path);@@ -15471，7 +15471，7 @@ public class StaticEndpointBuilders { * * @param path serverUrls/path */- public static org.apache.camel.builder.endpoint.dsl.ZooKeeperEndpointBuilderFactory.ZooKeeperEndpointBuilder zookeeper(+ static org.apache.camel.builder.endpoint.dsl.ZooKeeperEndpointBuilderFactory.ZooKeeperEndpointBuilder zookeeper( String path) { return org.apache.camel.builder.endpoint.dsl.ZooKeeperEndpointBuilderFactory.endpointBuilder("zookeeper"， path); }@@ -15495，7 +15495，7 @@ public class StaticEndpointBuilders { * instead of the default name * @param path serverUrls/path */- public static org.apache.camel.builder.endpoint.dsl.ZooKeeperEndpointBuilderFactory.ZooKeeperEndpointBuilder zookeeper(+ static org.apache.camel.builder.endpoint.dsl.ZooKeeperEndpointBuilderFactory.ZooKeeperEndpointBuilder zookeeper( String componentName， String path) { return org.apache.camel.builder.endpoint.dsl.ZooKeeperEndpointBuilderFactory.endpointBuilder(componentName， path);,Hide Permalink Claus Ibsen added a comment - 20/Jul/20 08:22 Those methods should be public static Show Claus Ibsen added a comment - 20/Jul/20 08:22 Those methods should be public static
CAMEL-15313,Claus Ibsen,2020-07-29T15:59:10+0000,1596023950， where 1596023950 is the epoch,Working to create a camel-kamelet component here: https://github.com/apache/camel-k-runtime/issues/375 and there is an issue when the routes templates are materialized:Assuming I have a route template defines as:routeTemplate("setBody") .templateParameter("bodyValue") .from("direct:{{routeId}}") .setBody().constant("{{bodyValue}}");And a route like:from("direct:template") .to("kamelet:setBody/test?bodyValue=bv") .to("log:template");Then the kamelet component would try to create a route named test out of the setBody template and:1. if the route is create upon KameletComponent::createEndpoint， then the camel context would fails to materialize the template as there is a concurrent exception because a new route definition is added while the context is iterating over them2. if the route is created upon KameletEndpoint::onStart， then the route is not added to the camel context,Hide Permalink Claus Ibsen added a comment - 29/Jul/20 15:59 I have a PR on the way which makes it work with current API， but we should find a better solution. Show Claus Ibsen added a comment - 29/Jul/20 15:59 I have a PR on the way which makes it work with current API， but we should find a better solution. Hide Permalink Claus Ibsen added a comment - 30/Jul/20 08:33 So this works now， both when camel is starting up， and also later if you use kamelets after camel has been started. Show Claus Ibsen added a comment - 30/Jul/20 08:33 So this works now， both when camel is starting up， and also later if you use kamelets after camel has been started. Hide Permalink Claus Ibsen added a comment - 30/Jul/20 09:15 Okay so this works now for kamelets. I created a branch at ASF with the work https://github.com/apache/camel-k-runtime/tree/kamelets-claus Show Claus Ibsen added a comment - 30/Jul/20 09:15 Okay so this works now for kamelets. I created a branch at ASF with the work https://github.com/apache/camel-k-runtime/tree/kamelets-claus
CAMEL-15312,Claus Ibsen,2020-07-30T10:17:44+0000,1596089864， where 1596089864 is the epoch,We should have some option to hook a function when the routes definition is created and/or instantiated something like:context.addLifecycleStrategy(new LifecycleStrategySupport() { public void onRouteTemplateDefinitionAdd(RouteTemplateDefinition definition) { /* do some validation here */ }}); context.addRouteFromTemplate("myTemplate") .routeId("myRouteId") .parameter("a"， "b") .handler(definition -> /* do some validation here */) .build()That would help to add some validation in context such as camel-k when the route templates have some limitations.,Hide Permalink Claus Ibsen added a comment - 30/Jul/20 10:17 The lifecycle strategy is not tied to the model definitions， so we likely need some new model listener that can emit various model events. Show Claus Ibsen added a comment - 30/Jul/20 10:17 The lifecycle strategy is not tied to the model definitions， so we likely need some new model listener that can emit various model events. Hide Permalink Claus Ibsen added a comment - 31/Jul/20 12:23 A problem is the builder is in camel-api， and has no dependeny on the model classes， so using a Supplier as indirection， then you can do (maybe a bit ugly) new RouteTemplateParameterBuilder(context， "myTemplate") .parameter("foo"， "one") .parameter("bar"， "result") .handler( (Supplier<RouteTemplateDefinition>) () -> { RouteTemplateDefinition answer = context.getRouteTemplateDefinition("myTemplate"); answer.getRoute().getInput().setUri("seda:{{foo}}"); return answer; }) .routeId("myRoute") .build(); This allows to get hold of the route template def， where you can validate， mutate， or whatever before the routes are created. Show Claus Ibsen added a comment - 31/Jul/20 12:23 A problem is the builder is in camel-api， and has no dependeny on the model classes， so using a Supplier as indirection， then you can do (maybe a bit ugly) new RouteTemplateParameterBuilder(context， "myTemplate" ) .parameter( "foo" ， "one" ) .parameter( "bar" ， "result" ) .handler( (Supplier<RouteTemplateDefinition>) () -> { RouteTemplateDefinition answer = context.getRouteTemplateDefinition( "myTemplate" ); answer.getRoute().getInput().setUri( "seda:{{foo}}" ); return answer; }) .routeId( "myRoute" ) .build(); This allows to get hold of the route template def， where you can validate， mutate， or whatever before the routes are created. Hide Permalink Claus Ibsen added a comment - 31/Jul/20 12:25 Another alternative is to use type casting， as we can use the neutral NamedNode as type that are in camel-api Show Claus Ibsen added a comment - 31/Jul/20 12:25 Another alternative is to use type casting， as we can use the neutral NamedNode as type that are in camel-api Hide Permalink Claus Ibsen added a comment - 31/Jul/20 12:43 There is now a ModelLifecycleStrategy you can use to get events when route / route templates are added / removed. Show Claus Ibsen added a comment - 31/Jul/20 12:43 There is now a ModelLifecycleStrategy you can use to get events when route / route templates are added / removed. Hide Permalink Claus Ibsen added a comment - 31/Jul/20 13:58 I think we should move the route template parameter builder to camel-core-engine like we have route builder etc， then we can use the model classes. Show Claus Ibsen added a comment - 31/Jul/20 13:58 I think we should move the route template parameter builder to camel-core-engine like we have route builder etc， then we can use the model classes. Hide Permalink Claus Ibsen added a comment - 31/Jul/20 14:16 - edited I think we shall rename RouteTemplateParameterBuilder RouteFromTemplateBuilder AddRouteFromTemplateBuilder RouteTemplateBuilder (like a bit bad as you assume its for create templates) TemplatedRouteBuilder DONE Show Claus Ibsen added a comment - 31/Jul/20 14:16 - edited I think we shall rename RouteTemplateParameterBuilder RouteFromTemplateBuilder AddRouteFromTemplateBuilder RouteTemplateBuilder (like a bit bad as you assume its for create templates) TemplatedRouteBuilder DONE Hide Permalink Claus Ibsen added a comment - 31/Jul/20 14:22 - edited You can now do TemplatedRouteBuilder.builder(context， "myTemplate") .parameter("foo"， "one") .parameter("bar"， "result") .routeId("myRoute") .handler(template -> { // lets mutate the template a bit // (notice changes are global as its not a clone of the template - not possible) template.getRoute().getInput().setUri("seda:{{foo}}"); }) .add(); Show Claus Ibsen added a comment - 31/Jul/20 14:22 - edited You can now do TemplatedRouteBuilder.builder(context， "myTemplate" ) .parameter( "foo" ， "one" ) .parameter( "bar" ， "result" ) .routeId( "myRoute" ) .handler(template -> { // lets mutate the template a bit // (notice changes are global as its not a clone of the template - not possible) template.getRoute().getInput().setUri( "seda:{{foo}}" ); }) .add();
CAMEL-15311,Unassigned,2020-07-21T14:31:35+0000,1595327495， where 1595327495 is the epoch,In Camel 3.4.0 I am trying to customize the Tracing to use DEBUG level instead of INFO.For this， I created my own class extending org.apache.camel.impl.engine.DefaultTracer and overriding method dumpTrace.But dumpTrace is not being called in all cases， in particular， method traceBeforeRoute is not calling it， instead logging directly with INFO level.Best regards，Alex soto,Hide Permalink Alex Soto added a comment - 21/Jul/20 14:31 I am working on PR for this. Show Alex Soto added a comment - 21/Jul/20 14:31 I am working on PR for this. Hide Permalink Alex Soto added a comment - 21/Jul/20 15:12 https://github.com/apache/camel/pull/4027 Show Alex Soto added a comment - 21/Jul/20 15:12 https://github.com/apache/camel/pull/4027
CAMEL-15310,Andrea Cosentino,2020-07-19T08:18:05+0000,1595132285， where 1595132285 is the epoch,The `amazonS3Client` query parameter takes the key of the bean in the registry as argument， however that key is not used. Actually， today the component supports ONLY having 1 bean of type AmazonS3 in the registry， the following method in the S3Component shows it : private void checkAndSetRegistryClient(S3Configuration configuration) { Set<AmazonS3> clients = this.getCamelContext().getRegistry().findByType(AmazonS3.class); if (clients.size() == 1) { configuration.setAmazonS3Client((AmazonS3)clients.stream().findFirst().get()); }},Hide Permalink Claus Ibsen added a comment - 19/Jul/20 08:18 - edited That is logic to detect if there is a single bean in the registry and use it by default， unless you explicit configure it to use a specific bean. But it may be that this logic is flawed and that if you set a custom bean then its not used， but that default instead. That needs to be investigated. An unit test would be nice contribution to reproduce this. Show Claus Ibsen added a comment - 19/Jul/20 08:18 - edited That is logic to detect if there is a single bean in the registry and use it by default， unless you explicit configure it to use a specific bean. But it may be that this logic is flawed and that if you set a custom bean then its not used， but that default instead. That needs to be investigated. An unit test would be nice contribution to reproduce this. Hide Permalink Christophe Willemsen added a comment - 19/Jul/20 09:13 That logic is the only logic for detecting client beans. Very happy to contribute a test and a fix on Github， give me a day or two. Show Christophe Willemsen added a comment - 19/Jul/20 09:13 That logic is the only logic for detecting client beans. Very happy to contribute a test and a fix on Github， give me a day or two. Hide Permalink Andrea Cosentino added a comment - 19/Jul/20 09:18 We could introduce an autoDiscoverClient option eventually and run this check only in this case. Btw if you have multiple clients you could use the explicitly. If not it is a bug， but I guess there are tests and docs about this. Show Andrea Cosentino added a comment - 19/Jul/20 09:18 We could introduce an autoDiscoverClient option eventually and run this check only in this case. Btw if you have multiple clients you could use the explicitly. If not it is a bug， but I guess there are tests and docs about this. Hide Permalink Christophe Willemsen added a comment - 19/Jul/20 09:23 Well， this is the whole purpose of this issue. I had two registered beans in the same context and realised something was wrong when it was not picked up correctly while passing the bean name as query parameter. So， actually the S3 component supports only 1 bean due to that hardcoded check of 1. When you have two beans， none of the registry beans is actually used even when passing their name in the endpoint. A PullRequest with a test will make it clearer. Show Christophe Willemsen added a comment - 19/Jul/20 09:23 Well， this is the whole purpose of this issue. I had two registered beans in the same context and realised something was wrong when it was not picked up correctly while passing the bean name as query parameter. So， actually the S3 component supports only 1 bean due to that hardcoded check of 1. When you have two beans， none of the registry beans is actually used even when passing their name in the endpoint. A PullRequest with a test will make it clearer. Hide Permalink Christophe Willemsen added a comment - 20/Jul/20 20:46 So， writing a test showed I've been stupid， and forgot the # during endpoint uri generation with String.format. I'm sorry. Show Christophe Willemsen added a comment - 20/Jul/20 20:46 So， writing a test showed I've been stupid， and forgot the # during endpoint uri generation with String.format. I'm sorry. Hide Permalink Christophe Willemsen added a comment - 20/Jul/20 21:27 So， I discovered the real issue ( which led me to the creating this one ). When we configure an endpoint to use given credentials， and there is a client in the registry， it will use the one from the registry instead of using what is configured on the endpoint. Failing test reproduced here : https://github.com/apache/camel/pull/4023 Show Christophe Willemsen added a comment - 20/Jul/20 21:27 So， I discovered the real issue ( which led me to the creating this one ). When we configure an endpoint to use given credentials， and there is a client in the registry， it will use the one from the registry instead of using what is configured on the endpoint. Failing test reproduced here : https://github.com/apache/camel/pull/4023 Hide Permalink Christophe Willemsen added a comment - 20/Jul/20 21:30 - edited The proposed fix could be to not call checkAndSetRegistryClient(configuration) if credentials are provided on the endpoint. Show Christophe Willemsen added a comment - 20/Jul/20 21:30 - edited The proposed fix could be to not call checkAndSetRegistryClient(configuration) if credentials are provided on the endpoint. Hide Permalink Andrea Cosentino added a comment - 21/Jul/20 04:46 It would be， imo， much more clearer is we give the user the possibility of disabling the autodiscover from registry. So I would add an option for that， this will be added for all the AWS and AWS2 components. Show Andrea Cosentino added a comment - 21/Jul/20 04:46 It would be， imo， much more clearer is we give the user the possibility of disabling the autodiscover from registry. So I would add an option for that， this will be added for all the AWS and AWS2 components. Hide Permalink Andrea Cosentino added a comment - 21/Jul/20 05:39 Ok， so now we have the autoDiscoverClient option， is set to true as default， if set to false the check on the registry will be bypassed. I'll do the same for all the AWS and AWS2 components. This will be available in 3.5.0， thanks for reporting. Show Andrea Cosentino added a comment - 21/Jul/20 05:39 Ok， so now we have the autoDiscoverClient option， is set to true as default， if set to false the check on the registry will be bypassed. I'll do the same for all the AWS and AWS2 components. This will be available in 3.5.0， thanks for reporting.
CAMEL-15309,Andrea Cosentino,2020-07-17T14:11:10+0000,1594980670， where 1594980670 is the epoch,This leads to this problem where used:https://github.com/eclipse/jetty.project/issues/3244So we need to cast to Buffer to avoid this situation and we will be able to release even with Java 11 and run with Java 8.This was found while upgrading Camel kafka connector to 3.4.1 and noticed troubles with syslog.I'm fixing this stuff.,There are no comments yet on this issue.
CAMEL-15308,Claus Ibsen,2020-07-17T08:32:34+0000,1594960354， where 1594960354 is the epoch,In related to CAMEL-15270 we should add some SPI interface for pluggable sources for creating routes from route templates. The sources would then fetch the parameters. This allows end users for example to have a SQL source that can read parameters from a database table. And also plain file source for files， a k8s config map etc.Then we can have a MainProperties source that does the camel.route-template parameters from properties as we have in CAMEL-15270.,There are no comments yet on this issue.
CAMEL-15307,Claus Ibsen,2020-07-20T08:41:15.684Z,1595220075.684， where 1595220075.684 is the epoch,We are using org.apache.camel.spring.Main to run our Camel applications within a spring context. After updating from Camel 2.24.3 to 3.4.1 the gracefull shutdown is not working anymore.When calling Strg+C in a windows shell (or stopping a service wrapper) the camel context is not stopped/closed and the jvm simply stops after logging this:2020-07-17 08:49:17，559 [ad #7 - CamelHangupInterceptor] INFO DefaultMainShutdownStrategy - Received hang up - stopping the main instance.2020-07-17 08:49:17，559 [pache.camel.spring.Main.main()] DEBUG MainSupport - Stopping Spring ApplicationContext: org.springframework.context.support.ClassPathXmlApplicationContext@15512f1aIn Camel 2.25.1 gracefull shutdown also works fine.Also using Camel version 3.4.0 or 3.3.0 didn't solve the issue.I debugged the behaviour and found that， when keeping the CamelHangupInterceptor thread from org.apache.camel.main.DefaultMainShutdownStrategy running after the shutdown call， the Camel context is stopped correctly. But when the CamelHangupInterceptor thread ends also the JVM is stopping.,Hide Permalink Claus Ibsen added a comment - 19/Jul/20 08:50 Can you attach a sample project as reproducer， or maybe post on github， also can you try a non windows OS Show Claus Ibsen added a comment - 19/Jul/20 08:50 Can you attach a sample project as reproducer， or maybe post on github， also can you try a non windows OS Hide Permalink Oliver Holzmann added a comment - 20/Jul/20 08:40 You can easily test this with the archetype camel-archetype-spring. After generating a test project with this archetype I added a delay of 20 seconds to the route and started Camel with mvn camel:run With Camel 3.4.1 the files are not getting processed when killing the JVM with Strg-C when the files are read. The JVM stops immediately without writing the file to the target folder. When doing the same with Camel 2.24.3 the shutdown waits until the consumed file is processed. The consumed file is copied to the target folder in the end. I don't have the possibility to test on non windows OS. Show Oliver Holzmann added a comment - 20/Jul/20 08:40 You can easily test this with the archetype camel-archetype-spring . After generating a test project with this archetype I added a delay of 20 seconds to the route and started Camel with mvn camel:run With Camel 3.4.1 the files are not getting processed when killing the JVM with Strg-C when the files are read. The JVM stops immediately without writing the file to the target folder. When doing the same with Camel 2.24.3 the shutdown waits until the consumed file is processed. The consumed file is copied to the target folder in the end. I don't have the possibility to test on non windows OS. Hide Permalink Claus Ibsen added a comment - 28/Jul/20 09:48 Okay this was a bit more tricky as the logging library also has its own JVM shutdown hook which can cause the logging to stop and you dont see any activity. Show Claus Ibsen added a comment - 28/Jul/20 09:48 Okay this was a bit more tricky as the logging library also has its own JVM shutdown hook which can cause the logging to stop and you dont see any activity. Hide Permalink Claus Ibsen added a comment - 28/Jul/20 10:41 Fixed by CAMEL-15343 Show Claus Ibsen added a comment - 28/Jul/20 10:41 Fixed by CAMEL-15343
CAMEL-15306,Unassigned,2020-07-16T17:03:05+0000,1594904585， where 1594904585 is the epoch,The documentation for the camel-jpa component has the following in the examples section (https://camel.apache.org/components/latest/jpa-component.html#_example): See Tracer Example for an example using JPA to store traced messages into a database. The Tracer Example link goes to: https://camel.apache.org/tracer-example.html which doesn't exist.,There are no comments yet on this issue.
CAMEL-15305,Andrea Cosentino,2020-07-16T15:13:49+0000,1594898029， where 1594898029 is the epoch,Zineb BENDHIBA can you have a look at this? the repo is here: https://github.com/apache/camel-spring-boot/Thanks,Hide Permalink Zineb BENDHIBA added a comment - 16/Jul/20 15:13 yes. I'll work on that Show Zineb BENDHIBA added a comment - 16/Jul/20 15:13 yes. I'll work on that Hide Permalink Zineb BENDHIBA added a comment - 22/Jul/20 15:42 PR : https://github.com/apache/camel-spring-boot/pull/118 Show Zineb BENDHIBA added a comment - 22/Jul/20 15:42 PR : https://github.com/apache/camel-spring-boot/pull/118
CAMEL-15304,Andrea Cosentino,2020-08-04T09:23:13+0000,1596518593， where 1596518593 is the epoch,Zineb BENDHIBA can you have a look at this? The repository is here: https://github.com/apache/camel-karafThanks， I'm merging the component,Hide Permalink Zineb BENDHIBA added a comment - 04/Aug/20 09:23 PR : https://github.com/apache/camel-karaf/pull/15 Show Zineb BENDHIBA added a comment - 04/Aug/20 09:23 PR : https://github.com/apache/camel-karaf/pull/15
CAMEL-15303,Andrea Cosentino,2020-07-16T04:39:23+0000,1594859963， where 1594859963 is the epoch,When ObjectMapper is autodiscovered from the beans registry ( autoDiscoverObjectMapper is set to true in JsonDataFormat)， the following message is logged with warn severity:o.a.c.c.jackson.JacksonDataFormat : The objectMapper was already found in the registry， no customizations will be applied In many systems， warnings in logs trigger monitoring alerts as they usually indicate the potential failure situation and require human attention. In this case， autodiscovery is chosen by the developer so there is no any danger. Is it possible to reduce the log message severity? It seems like it should be at most info.,There are no comments yet on this issue.
CAMEL-15302,Unassigned,2020-07-15T10:55:12+0000,1594796112， where 1594796112 is the epoch,I have noticed a few duplications of EIP under the camel website. I need a clarification whether it is a bug and unwanted or is it designed to be structured the way it is. Under EIP - Dynamic Router: There are 2 pages related to the dynamic router under the EIP section. One page encompasses further detailing than the other page. This page (https://camel.apache.org/components/latest/eips/dynamic-router.html) links to one of the dynamic router pages with full detailed documentation and this is the other page(https://camel.apache.org/components/latest/eips/dynamicRouter-eip.html) on dynamic router encompassing the subset of the docs of the first link I sent. Request Reply: There is 2 identical duplicate page entailing the same information. The first link to the page is https://camel.apache.org/components/latest/eips/request-reply.html and the second link to the page is https://camel.apache.org/components/latest/eips/requestReply-eip.html.,Hide Permalink Zoran Regvart added a comment - 15/Jul/20 10:55 Nicely spotted， thanks Aemie， +1 to removing the duplicate pages. One thing to watch out is that there could be pages that point to both documents and we need to change them to point to the single remaining document. Show Zoran Regvart added a comment - 15/Jul/20 10:55 Nicely spotted， thanks Aemie ， +1 to removing the duplicate pages. One thing to watch out is that there could be pages that point to both documents and we need to change them to point to the single remaining document. Hide Permalink Aemie added a comment - 15/Jul/20 14:35 Zoran Regvart I agree I have observed the linking of Dynamic Router and Request-Reply through the list of the EIP currently. I will have to make the changes to that along with the deletion of the duplication. Show Aemie added a comment - 15/Jul/20 14:35 Zoran Regvart I agree I have observed the linking of Dynamic Router and Request-Reply through the list of the EIP currently. I will have to make the changes to that along with the deletion of the duplication. Hide Permalink Zoran Regvart added a comment - 16/Jul/20 19:08 Oh， and one more potential issue could be that some of those .adoc files might get updated automatically by the build tooling， I'm guessing it's the ones with -eip.adoc that should remain. Claus Ibsen or Andrea Cosentino might know better. Show Zoran Regvart added a comment - 16/Jul/20 19:08 Oh， and one more potential issue could be that some of those .adoc files might get updated automatically by the build tooling， I'm guessing it's the ones with -eip.adoc that should remain. Claus Ibsen or Andrea Cosentino might know better. Hide Permalink Claus Ibsen added a comment - 17/Jul/20 08:15 Yes the -eip.adoc files are the ones that are automatic updated if the EIP has new options etc. So if there is duplicates we should keep the -eip doc files. And if there is some content in the other file missing in -eip we should copy it over before deleting. Show Claus Ibsen added a comment - 17/Jul/20 08:15 Yes the -eip.adoc files are the ones that are automatic updated if the EIP has new options etc. So if there is duplicates we should keep the -eip doc files. And if there is some content in the other file missing in -eip we should copy it over before deleting.
CAMEL-15301,Thomas Diesler,2020-07-14T15:18:28+0000,1594725508， where 1594725508 is the epoch,There is currently no auto conversion for String <=> Currency String <=> CurrencyPairand perhaps other common types,There are no comments yet on this issue.
CAMEL-15300,Unassigned,2020-07-20T06:29:07.025Z,1595212147.025， where 1595212147.025 is the epoch,Our front page should highlight the key features of Camel， which we， for now， include in the functionalities section. I like how "key features" are listed on the Django Overview Page and the Fedora Server Page. They use big icons， bold headings， and one feature per row to make sure the user grasps the importance of each feature. I especially like the content on the Django page which says "Why Django?" followed by adjectives ("Ridiculously fast"， "Incredibly versatile"， "Reassuringly secure" etc). This makes it so much more easier and interesting to read.,Hide Permalink Aashna Jena added a comment - 14/Jul/20 10:03 Zoran Regvart Maria Arias de Reyna Dominguez Aemie Some initial thoughts on whether this is a good change to make? Show Aashna Jena added a comment - 14/Jul/20 10:03 Zoran Regvart Maria Arias de Reyna Dominguez Aemie Some initial thoughts on whether this is a good change to make? Hide Permalink Maria Arias de Reyna Dominguez added a comment - 15/Jul/20 07:58 The front page already has some key features: Patterns， Components， Runtimes， Data Formats. You mean we can boost the "commercial" side of them? Or add more quality like adjectives? What do you have in mind exactly? Show Maria Arias de Reyna Dominguez added a comment - 15/Jul/20 07:58 The front page already has some key features: Patterns， Components， Runtimes， Data Formats. You mean we can boost the "commercial" side of them? Or add more quality like adjectives? What do you have in mind exactly? Hide Permalink Zoran Regvart added a comment - 15/Jul/20 10:51 Thanks for raising this issue Aashna Jena. I can agree that we can tell better what Camel is and what are the main functionalities/benefits of using Camel. We can do that much bolder and present it much clearer than we do now. From talking to folk I also noticed that it's not 100% clear what "Software integration" is， so we can help in defining that on the frontpage as well. Another issue is that we only have one single top-level message that we can place on the frontpage， currently "Camel 3.4.0 is here! What's new?"， I think we need to have more than one. One idea I had is that we introduce a "featured" flag in blog post front matter， and present last 3-5 "featured" blog posts on the frontpage. One example of this is the Hugo homepage that has this just above the fold. Show Zoran Regvart added a comment - 15/Jul/20 10:51 Thanks for raising this issue Aashna Jena . I can agree that we can tell better what Camel is and what are the main functionalities/benefits of using Camel. We can do that much bolder and present it much clearer than we do now. From talking to folk I also noticed that it's not 100% clear what "Software integration" is， so we can help in defining that on the frontpage as well. Another issue is that we only have one single top-level message that we can place on the frontpage， currently "Camel 3.4.0 is here! What's new?"， I think we need to have more than one. One idea I had is that we introduce a "featured" flag in blog post front matter， and present last 3-5 "featured" blog posts on the frontpage. One example of this is the Hugo homepage that has this just above the fold. Hide Permalink Aashna Jena added a comment - 15/Jul/20 11:15 100% agree that we should feature 3-5 blog posts as a section on the front page. I'll try to come up with some rough mock-ups for this. I'm also curious to know if there's a design team associated with Camel which can help us design some custom images/icons? Show Aashna Jena added a comment - 15/Jul/20 11:15 100% agree that we should feature 3-5 blog posts as a section on the front page. I'll try to come up with some rough mock-ups for this. I'm also curious to know if there's a design team associated with Camel which can help us design some custom images/icons? Hide Permalink Zoran Regvart added a comment - 15/Jul/20 11:19 We don't have a design team， we can create icons ourselves， or we can call out from the community and see if someone would be willing to design some icons for us – for that we would need to describe the icons so folk have something to work with. Show Zoran Regvart added a comment - 15/Jul/20 11:19 We don't have a design team， we can create icons ourselves， or we can call out from the community and see if someone would be willing to design some icons for us – for that we would need to describe the icons so folk have something to work with. Hide Permalink Aemie added a comment - 15/Jul/20 18:15 I like the idea of using the recent blogs before functionality and I like the manner in which Hugo presents it. I found a particular video link to design for such - https://cdn.dribbble.com/users/845019/screenshots/7097183/media/02330ede1c4ca58a960fc3648166806a.mp4 As we have a box design for the section on the frontpage the design of using box could fit quite well just as in the video. Show Aemie added a comment - 15/Jul/20 18:15 I like the idea of using the recent blogs before functionality and I like the manner in which Hugo presents it. I found a particular video link to design for such - https://cdn.dribbble.com/users/845019/screenshots/7097183/media/02330ede1c4ca58a960fc3648166806a.mp4 As we have a box design for the section on the frontpage the design of using box could fit quite well just as in the video. Hide Permalink Aemie added a comment - 20/Jul/20 06:33 - edited I preferred the manner in Hugo the way they displayed the recent releases of the blogs. So to fit the theme or website minimalistic layout， I created a design (blog-frontpage-display.png) that is minimal covers the necessary aspect and fits in with the rest of the front page design. Let me know your views on the same. Show Aemie added a comment - 20/Jul/20 06:33 - edited I preferred the manner in Hugo the way they displayed the recent releases of the blogs. So to fit the theme or website minimalistic layout， I created a design (blog-frontpage-display.png) that is minimal covers the necessary aspect and fits in with the rest of the front page design. Let me know your views on the same. Hide Permalink Zoran Regvart added a comment - 20/Jul/20 23:33 blog-frontpage-display.png - looks really good Aemie， I wonder if you have any ideas on how to incorporate it in the frontpage， we wanted to show that there are feature/project sections below the fold in another issue I wonder if we have the vertical space with both? Show Zoran Regvart added a comment - 20/Jul/20 23:33 blog-frontpage-display.png - looks really good Aemie ， I wonder if you have any ideas on how to incorporate it in the frontpage， we wanted to show that there are feature/project sections below the fold in another issue I wonder if we have the vertical space with both? Hide Permalink Aemie added a comment - 21/Jul/20 05:33 - edited Zoran Regvart As they are the recent blogs， it's best， in my opinion， if it goes right below the Get Started button. Also， for defining Software Integration， we could make use of a custom tooltip. Show Aemie added a comment - 21/Jul/20 05:33 - edited Zoran Regvart As they are the recent blogs， it's best， in my opinion， if it goes right below the Get Started button. Also， for defining Software Integration ， we could make use of a custom tooltip. Hide Permalink Aashna Jena added a comment - 23/Jul/20 13:37 I like the design! I'm thinking we can probably make the blog posts snippets horizontally longer instead of vertically longer， so that we take up less vertical space， especially on mobile screens. On the desktop screen， 3 posts in a line seem enough to me. I'm also a bit unhappy (only my personal opinion) with our current front page having too much white - all backgrounds， sections etc are white， so I think we can add a bit of colour. I've attached two mockups， I'm not sure which is preferred. With this design， we can think of putting them in a vertical column at the left/right end of our page as well. Show Aashna Jena added a comment - 23/Jul/20 13:37 I like the design! I'm thinking we can probably make the blog posts snippets horizontally longer instead of vertically longer， so that we take up less vertical space， especially on mobile screens. On the desktop screen， 3 posts in a line seem enough to me. I'm also a bit unhappy (only my personal opinion) with our current front page having too much white - all backgrounds， sections etc are white， so I think we can add a bit of colour. I've attached two mockups， I'm not sure which is preferred. With this design， we can think of putting them in a vertical column at the left/right end of our page as well. Hide Permalink Aashna Jena added a comment - 23/Jul/20 15:20 Since we're talking of the front page design and accommodating blog posts here， I wanted to suggest a few changes (these are just my thoughts). I've noticed a lot of websites use big images to describe what they do， and I think we can do the same. It would also add some colour to our landing page. I've used a dummy image in frontpage-design 3，4，5 but I think it would be good for us to include something like this. Instead of showing "Camel 2.4.2 is here"， we can have "Apache Camel" as the heading and show the featured blog posts in the same frame. Show Aashna Jena added a comment - 23/Jul/20 15:20 Since we're talking of the front page design and accommodating blog posts here， I wanted to suggest a few changes (these are just my thoughts). I've noticed a lot of websites use big images to describe what they do， and I think we can do the same. It would also add some colour to our landing page. I've used a dummy image in frontpage-design 3，4，5 but I think it would be good for us to include something like this. Instead of showing "Camel 2.4.2 is here"， we can have "Apache Camel" as the heading and show the featured blog posts in the same frame. Hide Permalink Aemie added a comment - 23/Jul/20 17:04 I like the design-4 that suits more. If we want to include an image， we would have to design an image that fits the theme or what Apache is about like a camel or so ( and the image can't be the logo ). Also， could you send the snapshot for the image of frontpage-design-4 at 1024px? Show Aemie added a comment - 23/Jul/20 17:04 I like the design-4 that suits more. If we want to include an image， we would have to design an image that fits the theme or what Apache is about like a camel or so ( and the image can't be the logo ). Also， could you send the snapshot for the image of frontpage-design-4 at 1024px? Hide Permalink Aashna Jena added a comment - 23/Jul/20 17:33 - edited I haven't exactly thought of the small screen designs， but the idea would be to have the image above the text. I'll implement it once everyone gives their opinions. Yes， we will have to design an image as well. I was thinking of illustrating "software integration" through the image (I tried to pick something related for the mock-up). I found some interesting illustrations like puzzle pieces fitting together or gears fitting together etc to represent integration of software sub-parts. I'd prefer to somehow present the "integration" theme in camel colours. I've attached some images I like as integration-x.png Show Aashna Jena added a comment - 23/Jul/20 17:33 - edited I haven't exactly thought of the small screen designs， but the idea would be to have the image above the text. I'll implement it once everyone gives their opinions. Yes， we will have to design an image as well. I was thinking of illustrating "software integration" through the image (I tried to pick something related for the mock-up). I found some interesting illustrations like puzzle pieces fitting together or gears fitting together etc to represent integration of software sub-parts. I'd prefer to somehow present the "integration" theme in camel colours. I've attached some images I like as integration-x.png Hide Permalink Aemie added a comment - 23/Jul/20 18:09 I have added a gear-design-integration.png and image-design-1.png which fits the integration with puzzle and gear match and I have used the color themes from the website itself. Show Aemie added a comment - 23/Jul/20 18:09 I have added a gear-design-integration.png and image-design-1.png which fits the integration with puzzle and gear match and I have used the color themes from the website itself. Hide Permalink Zoran Regvart added a comment - 23/Jul/20 19:20 This is progressing really good， I like all the mockups done thus far. I'm somewhat sentimental towards the swoosh， do you think we can incorporate it somehow in the design. I think it's really good idea to add colour to the front page， I think we need to do it in a elegant way， to me the the blue/navy colour appears more elegant than better than the orange one， perhaps that particular shade of orange can be tweaked to be less imposing? I think the orange we landed on from the logo， but I think association with the colour of sand could work. I'm particularly fond of the colourlovers site (if you are not aware of it). Here is a query for desert and one palette (or a general direction) that might work with the navy blue. Do you think instead of graphics on the right explaining what Camel is we can embed a video? I think we can ask Christina Lin for help with a short (30sec or so) video explaining what Camel is. Show Zoran Regvart added a comment - 23/Jul/20 19:20 This is progressing really good， I like all the mockups done thus far. I'm somewhat sentimental towards the swoosh， do you think we can incorporate it somehow in the design. I think it's really good idea to add colour to the front page， I think we need to do it in a elegant way， to me the the blue/navy colour appears more elegant than better than the orange one， perhaps that particular shade of orange can be tweaked to be less imposing? I think the orange we landed on from the logo， but I think association with the colour of sand could work. I'm particularly fond of the colourlovers site (if you are not aware of it). Here is a query for desert and one palette (or a general direction) that might work with the navy blue. Do you think instead of graphics on the right explaining what Camel is we can embed a video? I think we can ask Christina Lin for help with a short (30sec or so) video explaining what Camel is. Hide Permalink Aashna Jena added a comment - 23/Jul/20 19:43 - edited I agree that the orange is too bright and imposing. What would you prefer between frontpage-design-4 and frontpage-design-5? A video could also be very helpful. Especially in this case， because "integration framework" is not very well understood by the masses. Are we thinking of the video of a person speaking about Camel， or an animated video that explains how Camel works? In case we do think of making an image (we can use it in some of the other sections of front-page like functionalities)， what kind of things does Camel integrate? What exactly can we show in the images? I really liked the puzzle idea - where we can have a central piece (signifying camel) and other puzzle pieces that plug into it(like components). Zoran Regvart For the swoosh - can we do some waves at the bottom of the header-section? It might give a dessert sort of feel (like layers of sand dunes). I can't find exactly what I'm looking for on the internet， but I'm attaching waves.jpg. If we do something like this in light camel colours at the bottom， it might look good. Something like this but much softer and the top waves can have colours that merge with the white background (Purely a suggestion) Show Aashna Jena added a comment - 23/Jul/20 19:43 - edited I agree that the orange is too bright and imposing. What would you prefer between frontpage-design-4 and frontpage-design-5? A video could also be very helpful. Especially in this case， because "integration framework" is not very well understood by the masses. Are we thinking of the video of a person speaking about Camel， or an animated video that explains how Camel works? In case we do think of making an image (we can use it in some of the other sections of front-page like functionalities)， what kind of things does Camel integrate? What exactly can we show in the images? I really liked the puzzle idea - where we can have a central piece (signifying camel) and other puzzle pieces that plug into it(like components). Zoran Regvart For the swoosh - can we do some waves at the bottom of the header-section? It might give a dessert sort of feel (like layers of sand dunes). I can't find exactly what I'm looking for on the internet， but I'm attaching waves.jpg. If we do something like this in light camel colours at the bottom， it might look good. Something like this but much softer and the top waves can have colours that merge with the white background (Purely a suggestion) Hide Permalink Aemie added a comment - 24/Jul/20 04:53 frontpage-design-4 seems much cleaner and neater than frontpage-design-5. If we are planning to use a video， it is best to use animated. People prefer animated videos rather than a person who explains it as visuals help in better understanding (esp documentation wise). I am not that firm on including a video on it though rather we could include a caption to the image. Aashna Jena， I prefer a gear matching rather than a puzzle. I can create an SVG using specific modules of Apache in functionalities with its logo in the center based on the color palette of the website. If we wanted to include a swoosh animation along with an image ( in the frontpage-design-4)， I really would prefer it if the swoosh animation in PR#366 (https://github.com/apache/camel-website/pull/366) could be used vertically on the leftmost corner below the navbar. Show Aemie added a comment - 24/Jul/20 04:53 frontpage-design-4 seems much cleaner and neater than frontpage-design-5. If we are planning to use a video， it is best to use animated. People prefer animated videos rather than a person who explains it as visuals help in better understanding (esp documentation wise). I am not that firm on including a video on it though rather we could include a caption to the image. Aashna Jena ， I prefer a gear matching rather than a puzzle. I can create an SVG using specific modules of Apache in functionalities with its logo in the center based on the color palette of the website. If we wanted to include a swoosh animation along with an image ( in the frontpage-design-4)， I really would prefer it if the swoosh animation in PR#366 ( https://github.com/apache/camel-website/pull/366 ) could be used vertically on the leftmost corner below the navbar. Hide Permalink Aemie added a comment - 26/Jul/20 08:28 I have added a timeline-based design (timeline-frontpage-releases.png) for releases. The reason I have done that is with the current frontpage-design-4.png suits really well for the desktop version according to me but for smaller screen width， it will just look clustered. In addition to it， I always prefer timeline-based designs when we are presenting to the users/audience time-based releases of the blogs. Show Aemie added a comment - 26/Jul/20 08:28 I have added a timeline-based design (timeline-frontpage-releases.png) for releases. The reason I have done that is with the current frontpage-design-4.png suits really well for the desktop version according to me but for smaller screen width， it will just look clustered. In addition to it， I always prefer timeline-based designs when we are presenting to the users/audience time-based releases of the blogs. Hide Permalink Zoran Regvart added a comment - 27/Jul/20 19:14 One site I look at for inspiration， especially geared toward landing (front) pages is https://hyperpixel.io/ have a look you might get inspiration that way. Show Zoran Regvart added a comment - 27/Jul/20 19:14 One site I look at for inspiration， especially geared toward landing (front) pages is https://hyperpixel.io/ have a look you might get inspiration that way. Hide Permalink Aashna Jena added a comment - 27/Jul/20 22:28 - edited I'm no expert at creating images but I tried to make some gears in Camel-like colours (camel-gears and camel-desktop-gears). Does this look good? Zoran Regvart I want to include some icons representing things that camel integrates. Can you list some items we can use? Show Aashna Jena added a comment - 27/Jul/20 22:28 - edited I'm no expert at creating images but I tried to make some gears in Camel-like colours (camel-gears and camel-desktop-gears). Does this look good? Zoran Regvart I want to include some icons representing things that camel integrates. Can you list some items we can use? Hide Permalink Aashna Jena added a comment - 28/Jul/20 10:01 I'm also trying to make some icons for the functionalities section in camel colors， but I need opinions. I'm attaching runtimes.svg， components.svg and data-formats.svg. Zoran Regvart Aemie Maria Arias de Reyna Dominguez Do these look fine? Also， I'm not sure how to depict "patterns"， any idea on how we should proceed? I have a free trial of adobe illustrator expiring in 2-3 days， so it'd be great if I can get some opinions before that components.svg data-formats.svg runtimes.svg Show Aashna Jena added a comment - 28/Jul/20 10:01 I'm also trying to make some icons for the functionalities section in camel colors， but I need opinions. I'm attaching runtimes.svg， components.svg and data-formats.svg. Zoran Regvart Aemie Maria Arias de Reyna Dominguez Do these look fine? Also， I'm not sure how to depict "patterns"， any idea on how we should proceed? I have a free trial of adobe illustrator expiring in 2-3 days， so it'd be great if I can get some opinions before that components.svg data-formats.svg runtimes.svg Hide Permalink Aemie added a comment - 28/Jul/20 10:19 I prefer how the gear-design-integration.png appears as it takes ample space and it's clear if we plan to include the icons of each project within it. For the functionality， I like the components.svg and why does the data-formats.svg contains a lot of separate icons within it? The patterns are based on EIP which is focused on message-oriented middleware for the sub-components ( I think I am correct with that ) so we could include 2 icons connected through a form of connection like the ones in actual website， which I really like as well! Show Aemie added a comment - 28/Jul/20 10:19 I prefer how the gear-design-integration.png appears as it takes ample space and it's clear if we plan to include the icons of each project within it. For the functionality， I like the components.svg and why does the data-formats.svg contains a lot of separate icons within it? The patterns are based on EIP which is focused on message-oriented middleware for the sub-components ( I think I am correct with that ) so we could include 2 icons connected through a form of connection like the ones in actual website， which I really like as well! Hide Permalink Aashna Jena added a comment - 28/Jul/20 21:24 I have attached frontpage-v2.png， frontpage-functionalities-1.png and frontpage-functionalities-2.png to show how I want the front page to look with a broader colour palette. Zoran Regvart Maria Arias de Reyna Dominguez what are your views on these three mockups? Show Aashna Jena added a comment - 28/Jul/20 21:24 I have attached frontpage-v2.png， frontpage-functionalities-1.png and frontpage-functionalities-2.png to show how I want the front page to look with a broader colour palette. Zoran Regvart Maria Arias de Reyna Dominguez what are your views on these three mockups? Hide Permalink Zoran Regvart added a comment - 29/Jul/20 08:35 Thanks for making these mockups they all look really good! I like the v2 version of the front page a bit more， I find that the offsetting text vs image makes the design more dynamic. I like the functionalities icons， I’d try to allude to JSON or binary formats in the data formats section. I suggest that you create a PR with what you have here and we can share the preview with the community to gather more feedback. Awesome work! Show Zoran Regvart added a comment - 29/Jul/20 08:35 Thanks for making these mockups they all look really good! I like the v2 version of the front page a bit more， I find that the offsetting text vs image makes the design more dynamic. I like the functionalities icons， I’d try to allude to JSON or binary formats in the data formats section. I suggest that you create a PR with what you have here and we can share the preview with the community to gather more feedback. Awesome work! Hide Permalink Zoran Regvart added a comment - 29/Jul/20 08:38 Oh， and the runtimes could perhaps include a cloud， server (or a data center)， or similar. Show Zoran Regvart added a comment - 29/Jul/20 08:38 Oh， and the runtimes could perhaps include a cloud， server (or a data center)， or similar. Hide Permalink Aashna Jena added a comment - 29/Jul/20 09:19 - edited Okay， I'll try to make a new image for runtimes. What should the EIP icon look like? Also， between functionalities-1 and functionalities-2 which one is better? New image for runtimes: runtimes-v2.svg Show Aashna Jena added a comment - 29/Jul/20 09:19 - edited Okay， I'll try to make a new image for runtimes. What should the EIP icon look like? Also， between functionalities-1 and functionalities-2 which one is better? New image for runtimes: runtimes-v2.svg Hide Permalink Zoran Regvart added a comment - 29/Jul/20 10:19 I prefer， and this is just my opinion， first design for functionalities (one with alternating icons on the left and right)， feels more dynamic. I do like the abstract icons， and I think it’s difficult to find a good representation for EIPs without being specific. I guess we can try something that resembles a pattern in the literal sense， sorry I don’t have a really good idea here. Show Zoran Regvart added a comment - 29/Jul/20 10:19 I prefer， and this is just my opinion， first design for functionalities (one with alternating icons on the left and right)， feels more dynamic. I do like the abstract icons， and I think it’s difficult to find a good representation for EIPs without being specific. I guess we can try something that resembles a pattern in the literal sense， sorry I don’t have a really good idea here. Hide Permalink Zoran Regvart added a comment - 29/Jul/20 10:20 The new runtimes icon looks good to me. Show Zoran Regvart added a comment - 29/Jul/20 10:20 The new runtimes icon looks good to me. Hide Permalink Aashna Jena added a comment - 30/Jul/20 17:36 Which 3 blogs do we want to feature on the front page? Show Aashna Jena added a comment - 30/Jul/20 17:36 Which 3 blogs do we want to feature on the front page? Hide Permalink Aemie added a comment - 30/Jul/20 17:51 I really like the functionalities design however that got me thinking it's not going to fit with the camel project design. So I just came up with a rough idea of using carousels for the project page， I have included both project-desktop-style.png and project-mobile-style.png. I think it will better fit with the current designs that Aashna is moving forward with. Show Aemie added a comment - 30/Jul/20 17:51 I really like the functionalities design however that got me thinking it's not going to fit with the camel project design. So I just came up with a rough idea of using carousels for the project page， I have included both project-desktop-style.png and project-mobile-style.png. I think it will better fit with the current designs that Aashna is moving forward with. Hide Permalink Aashna Jena added a comment - 30/Jul/20 22:12 Aemie Sorry I just saw this! I was implementing the front page design and I noticed this as well， so I made some changes to the projects section. I thought that including a bit of orange will make it fit better with the rest of the design. Please have a look at it on PR #442 and we can take it forward from there. Show Aashna Jena added a comment - 30/Jul/20 22:12 Aemie Sorry I just saw this! I was implementing the front page design and I noticed this as well， so I made some changes to the projects section. I thought that including a bit of orange will make it fit better with the rest of the design. Please have a look at it on PR #442 and we can take it forward from there. Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 03:16 AemieJ commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-666890383 I would like to suggest a couple of changes - Include a border-bottom & box-shadow in the navbar to show visible segregation between the body of page and navbar. Reduce the height of the main image. It's extremely huge. I would like to see the releases as soon as I land on the page ( in the case of the wider screen width ). Increase the line spacing between the text below *Apache Camel* on the front page. Increase the font-size for the complete date within releases. ![frontpage-display](https://user-images.githubusercontent.com/44139348/88995819-41c7c900-d309-11ea-9db8-ce76eef0771e.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 03:16 AemieJ commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-666890383 I would like to suggest a couple of changes - Include a border-bottom & box-shadow in the navbar to show visible segregation between the body of page and navbar. Reduce the height of the main image. It's extremely huge. I would like to see the releases as soon as I land on the page ( in the case of the wider screen width ). Increase the line spacing between the text below * Apache Camel * on the front page. Increase the font-size for the complete date within releases. ! [frontpage-display] ( https://user-images.githubusercontent.com/44139348/88995819-41c7c900-d309-11ea-9db8-ce76eef0771e.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 03:43 AemieJ edited a comment on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-666890383 I would like to suggest a couple of changes - Include a border-bottom & box-shadow in the navbar to show visible segregation between the body of page and navbar. Reduce the height of the main image. It's extremely huge. I would like to see the releases as soon as I land on the page ( in the case of the wider screen width ). Increase the line spacing between the text below *Apache Camel* on the front page. Increase the font-size for the complete date within releases. Also the link to *What is Camel?* is [here](https://camel.apache.org/manual/latest/faq/what-is-camel.html). ![frontpage-display](https://user-images.githubusercontent.com/44139348/88995819-41c7c900-d309-11ea-9db8-ce76eef0771e.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 03:43 AemieJ edited a comment on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-666890383 I would like to suggest a couple of changes - Include a border-bottom & box-shadow in the navbar to show visible segregation between the body of page and navbar. Reduce the height of the main image. It's extremely huge. I would like to see the releases as soon as I land on the page ( in the case of the wider screen width ). Increase the line spacing between the text below * Apache Camel * on the front page. Increase the font-size for the complete date within releases. Also the link to * What is Camel? * is [here] ( https://camel.apache.org/manual/latest/faq/what-is-camel.html ). ! [frontpage-display] ( https://user-images.githubusercontent.com/44139348/88995819-41c7c900-d309-11ea-9db8-ce76eef0771e.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 03:44 AemieJ edited a comment on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-666890383 I would like to suggest a couple of changes - Include a border-bottom & box-shadow in the navbar to show visible segregation between the body of page and navbar. Reduce the height of the main image. It's extremely huge. I would like to see the releases as soon as I land on the page ( in the case of the wider screen width ). Increase the line spacing between the text below *Apache Camel* on the front page. Increase the font-size for the complete date within releases. Also the link to *What is Camel?* is [here](https://camel.apache.org/manual/latest/faq/what-is-camel.html). ![frontpage-display](https://user-images.githubusercontent.com/44139348/88995819-41c7c900-d309-11ea-9db8-ce76eef0771e.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 03:44 AemieJ edited a comment on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-666890383 I would like to suggest a couple of changes - Include a border-bottom & box-shadow in the navbar to show visible segregation between the body of page and navbar. Reduce the height of the main image. It's extremely huge. I would like to see the releases as soon as I land on the page ( in the case of the wider screen width ). Increase the line spacing between the text below * Apache Camel * on the front page. Increase the font-size for the complete date within releases. Also the link to * What is Camel? * is [here] ( https://camel.apache.org/manual/latest/faq/what-is-camel.html ). ! [frontpage-display] ( https://user-images.githubusercontent.com/44139348/88995819-41c7c900-d309-11ea-9db8-ce76eef0771e.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 09:18 aashnajena commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667024405 I've restricted the height of the main image， so now the blogs should also be visible to you on the first frame. Thanks for the "What Is Camel" link， I've added that and increased the line-height. Not sure why we need to increase the font for blog-dates. I also feel that the header menu looks neater and more modern this way (I'm not a big fan of the shadow effect)， that's why I had made the change in the first place. Maybe we can introduce a segregation line once the user starts scrolling beyond the header section. More opinions are welcome! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 09:18 aashnajena commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667024405 I've restricted the height of the main image， so now the blogs should also be visible to you on the first frame. Thanks for the "What Is Camel" link， I've added that and increased the line-height. Not sure why we need to increase the font for blog-dates. I also feel that the header menu looks neater and more modern this way (I'm not a big fan of the shadow effect)， that's why I had made the change in the first place. Maybe we can introduce a segregation line once the user starts scrolling beyond the header section. More opinions are welcome! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 11:07 AemieJ commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667066490 @aashnajena the reason to increase the font-size of the data is 'cause currently it looks all clustered one after the another. I provided the snapshot and I think if I land on the desktop I observe till the releases only on the first go. And the reason I am telling to not remove the box-shadow is 'cause if you observe in the mobile view， it just doesn't fit the theme it looks confusing and plain. The navbar pattern you're suggestion looks neat on the personal portfolio I am not sure about this site tho. Also， I observed and have suggestions for the project section. It would be nicer to have a consistent flow of how each section is structure i.e covered the same amount of horizontal section as the current website layout is. The width of the complete section could be altered to make the changes as in the snapshot. Apart from that， I find it best fit to not assign a height to the images as they end up looking inconsistent (Camel-K image appears smaller than others) and keep a margin of 1 rem between the image and content. The paragraph could be explicitly assigned a height so that the button to click appears at the same level for each project. ![project-section](https://user-images.githubusercontent.com/44139348/89017999-cb42bf80-d338-11ea-84d0-5af62d1dfdff.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 11:07 AemieJ commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667066490 @aashnajena the reason to increase the font-size of the data is 'cause currently it looks all clustered one after the another. I provided the snapshot and I think if I land on the desktop I observe till the releases only on the first go. And the reason I am telling to not remove the box-shadow is 'cause if you observe in the mobile view， it just doesn't fit the theme it looks confusing and plain. The navbar pattern you're suggestion looks neat on the personal portfolio I am not sure about this site tho. Also， I observed and have suggestions for the project section. It would be nicer to have a consistent flow of how each section is structure i.e covered the same amount of horizontal section as the current website layout is. The width of the complete section could be altered to make the changes as in the snapshot. Apart from that， I find it best fit to not assign a height to the images as they end up looking inconsistent (Camel-K image appears smaller than others) and keep a margin of 1 rem between the image and content. The paragraph could be explicitly assigned a height so that the button to click appears at the same level for each project. ! [project-section] ( https://user-images.githubusercontent.com/44139348/89017999-cb42bf80-d338-11ea-84d0-5af62d1dfdff.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 11:56 aashnajena commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667083535 @zregvart since we've made a lot of changes， can we share the preview with the community and take some overall feedback before delving deep into the minute aspects? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 11:56 aashnajena commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667083535 @zregvart since we've made a lot of changes， can we share the preview with the community and take some overall feedback before delving deep into the minute aspects? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 11:56 aashnajena edited a comment on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667083535 @zregvart @delawen since we've made a lot of changes， can we share the preview with the community and take some overall feedback before delving deep into the minute aspects? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 11:56 aashnajena edited a comment on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667083535 @zregvart @delawen since we've made a lot of changes， can we share the preview with the community and take some overall feedback before delving deep into the minute aspects? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 19:24 zregvart commented on a change in pull request #442: URL: https://github.com/apache/camel-website/pull/442#discussion_r463789721 ########## File path: content/_index.md ########## @@ -59，63 +95，110 @@ Camel supports around 50 data formats， allowing to <mark>translate messages</mar < div "project" > -[Unable to render embedded object: File ([Camel](/_/img/logo-d.svg)) not found.[Knative](/_/img/knative.svg)](/docs/#camel-k) +< div "icon" > Camel K +<img src="/_/img/logo-d.svg" alt="data icon"/> -*Apache Camel K* runs natively on [Kubernetes](https://kubernetes.io/). +< /div > + +< div "content" > + +## Camel Core +Apache Camel helps you integrate various systems consuming or producing data. +<p><a class="button-dark" href="/docs/">Read More</a></p> + +< /div > < /div > < div "project" > -[![Camel](/_/img/logo-d.svg)](/manual/latest/) +< div "icon" > Camel +<img src="/_/img/knative.svg" alt="data icon"/> -*Apache Camel* is the Swiss knife of integration. +< /div > + +< div "content" > + +## Camel K +Apache Camel K is a lightweight integration framework that runs natively on Kubernetes. +<p><a class="button-dark" href="/docs/">Read More</a></p> + +< /div > < /div > < div "project" > -[Unable to render embedded object: File ([Camel](/_/img/logo-d.svg)) not found.[Quarkus](/_/img/quarkus.svg)](/docs/#camel-quarkus) +< div "icon" > Quarkus +<img src="/_/img/quarkus.svg" alt="data icon"/> + +< /div > -*Apache Camel Quarkus* runs Camel on [Quarkus](https://quarkus.io). +< div "content" > + +## Camel Quarkus Apache Camel Quarkus packages 280 Camel components as Quarkus extensions. +<p><a class="button-dark" href="/docs/">Read More</a></p> + +< /div > < /div > < div "project" > -[Unable to render embedded object: File ([Camel](/_/img/logo-d.svg)) not found.[Kafka](/_/img/apache-kafka.svg)](/docs/#camel-kafka-connector) +< div "icon" > Kafka +<img src="/_/img/apache-kafka.svg" alt="data icon"/> -*Apache Camel Kafka Connector* embeds Camel within [Kafka Connect](https://kafka.apache.org/documentation/#connect). +< /div > + +< div "content" > + +## Camel Kafka Review comment: ```suggestion Apache Camel Kafka Connector ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 19:24 zregvart commented on a change in pull request #442: URL: https://github.com/apache/camel-website/pull/442#discussion_r463789721 ########## File path: content/_index.md ########## @@ -59，63 +95，110 @@ Camel supports around 50 data formats， allowing to <mark>translate messages</mar < div "project" > -[ Unable to render embedded object: File ([Camel](/_/img/logo-d.svg)) not found. [Knative] (/_/img/knative.svg)](/docs/#camel-k) + < div "icon" > Camel K +<img src="/_/img/logo-d.svg" alt="data icon"/> -* Apache Camel K * runs natively on [Kubernetes] ( https://kubernetes.io/ ). + < /div > + + < div "content" > + +## Camel Core +Apache Camel helps you integrate various systems consuming or producing data. +<p><a class="button-dark" href="/docs/">Read More</a></p> + + < /div > < /div > < div "project" > -[! [Camel] (/_/img/logo-d.svg)](/manual/latest/) + < div "icon" > Camel +<img src="/_/img/knative.svg" alt="data icon"/> -* Apache Camel * is the Swiss knife of integration. + < /div > + + < div "content" > + +## Camel K +Apache Camel K is a lightweight integration framework that runs natively on Kubernetes. +<p><a class="button-dark" href="/docs/">Read More</a></p> + + < /div > < /div > < div "project" > -[ Unable to render embedded object: File ([Camel](/_/img/logo-d.svg)) not found. [Quarkus] (/_/img/quarkus.svg)](/docs/#camel-quarkus) + < div "icon" > Quarkus +<img src="/_/img/quarkus.svg" alt="data icon"/> + + < /div > -* Apache Camel Quarkus * runs Camel on [Quarkus] ( https://quarkus.io ). + < div "content" > + +## Camel Quarkus Apache Camel Quarkus packages 280 Camel components as Quarkus extensions. +<p><a class="button-dark" href="/docs/">Read More</a></p> + + < /div > < /div > < div "project" > -[ Unable to render embedded object: File ([Camel](/_/img/logo-d.svg)) not found. [Kafka] (/_/img/apache-kafka.svg)](/docs/#camel-kafka-connector) + < div "icon" > Kafka +<img src="/_/img/apache-kafka.svg" alt="data icon"/> -* Apache Camel Kafka Connector * embeds Camel within [Kafka Connect] ( https://kafka.apache.org/documentation/#connect ). + < /div > + + < div "content" > + +## Camel Kafka Review comment: ```suggestion Apache Camel Kafka Connector ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 31/Jul/20 19:24 zregvart commented on a change in pull request #442: URL: https://github.com/apache/camel-website/pull/442#discussion_r463789721 ########## File path: content/_index.md ########## @@ -59，63 +95，110 @@ Camel supports around 50 data formats， allowing to <mark>translate messages</mar < div "project" > -[Unable to render embedded object: File ([Camel](/_/img/logo-d.svg)) not found.[Knative](/_/img/knative.svg)](/docs/#camel-k) +< div "icon" > Camel K +<img src="/_/img/logo-d.svg" alt="data icon"/> -*Apache Camel K* runs natively on [Kubernetes](https://kubernetes.io/). +< /div > + +< div "content" > + +## Camel Core +Apache Camel helps you integrate various systems consuming or producing data. +<p><a class="button-dark" href="/docs/">Read More</a></p> + +< /div > < /div > < div "project" > -[![Camel](/_/img/logo-d.svg)](/manual/latest/) +< div "icon" > Camel +<img src="/_/img/knative.svg" alt="data icon"/> -*Apache Camel* is the Swiss knife of integration. +< /div > + +< div "content" > + +## Camel K +Apache Camel K is a lightweight integration framework that runs natively on Kubernetes. +<p><a class="button-dark" href="/docs/">Read More</a></p> + +< /div > < /div > < div "project" > -[Unable to render embedded object: File ([Camel](/_/img/logo-d.svg)) not found.[Quarkus](/_/img/quarkus.svg)](/docs/#camel-quarkus) +< div "icon" > Quarkus +<img src="/_/img/quarkus.svg" alt="data icon"/> + +< /div > -*Apache Camel Quarkus* runs Camel on [Quarkus](https://quarkus.io). +< div "content" > + +## Camel Quarkus Apache Camel Quarkus packages 280 Camel components as Quarkus extensions. +<p><a class="button-dark" href="/docs/">Read More</a></p> + +< /div > < /div > < div "project" > -[Unable to render embedded object: File ([Camel](/_/img/logo-d.svg)) not found.[Kafka](/_/img/apache-kafka.svg)](/docs/#camel-kafka-connector) +< div "icon" > Kafka +<img src="/_/img/apache-kafka.svg" alt="data icon"/> -*Apache Camel Kafka Connector* embeds Camel within [Kafka Connect](https://kafka.apache.org/documentation/#connect). +< /div > + +< div "content" > + +## Camel Kafka Review comment: ```suggestion Camel Kafka Connector ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 31/Jul/20 19:24 zregvart commented on a change in pull request #442: URL: https://github.com/apache/camel-website/pull/442#discussion_r463789721 ########## File path: content/_index.md ########## @@ -59，63 +95，110 @@ Camel supports around 50 data formats， allowing to <mark>translate messages</mar < div "project" > -[ Unable to render embedded object: File ([Camel](/_/img/logo-d.svg)) not found. [Knative] (/_/img/knative.svg)](/docs/#camel-k) + < div "icon" > Camel K +<img src="/_/img/logo-d.svg" alt="data icon"/> -* Apache Camel K * runs natively on [Kubernetes] ( https://kubernetes.io/ ). + < /div > + + < div "content" > + +## Camel Core +Apache Camel helps you integrate various systems consuming or producing data. +<p><a class="button-dark" href="/docs/">Read More</a></p> + + < /div > < /div > < div "project" > -[! [Camel] (/_/img/logo-d.svg)](/manual/latest/) + < div "icon" > Camel +<img src="/_/img/knative.svg" alt="data icon"/> -* Apache Camel * is the Swiss knife of integration. + < /div > + + < div "content" > + +## Camel K +Apache Camel K is a lightweight integration framework that runs natively on Kubernetes. +<p><a class="button-dark" href="/docs/">Read More</a></p> + + < /div > < /div > < div "project" > -[ Unable to render embedded object: File ([Camel](/_/img/logo-d.svg)) not found. [Quarkus] (/_/img/quarkus.svg)](/docs/#camel-quarkus) + < div "icon" > Quarkus +<img src="/_/img/quarkus.svg" alt="data icon"/> + + < /div > -* Apache Camel Quarkus * runs Camel on [Quarkus] ( https://quarkus.io ). + < div "content" > + +## Camel Quarkus Apache Camel Quarkus packages 280 Camel components as Quarkus extensions. +<p><a class="button-dark" href="/docs/">Read More</a></p> + + < /div > < /div > < div "project" > -[ Unable to render embedded object: File ([Camel](/_/img/logo-d.svg)) not found. [Kafka] (/_/img/apache-kafka.svg)](/docs/#camel-kafka-connector) + < div "icon" > Kafka +<img src="/_/img/apache-kafka.svg" alt="data icon"/> -* Apache Camel Kafka Connector * embeds Camel within [Kafka Connect] ( https://kafka.apache.org/documentation/#connect ). + < /div > + + < div "content" > + +## Camel Kafka Review comment: ```suggestion Camel Kafka Connector ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 01/Aug/20 19:11 aashnajena commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667574769 I've included changes from the community page PR， as well as made a few changes of my own. The reason we need to specify image height is that the Kafka logo is longer than others， so it will appear much bigger if there's no height restriction. I've added more space between the project logo and description as suggested. Honestly， I really like how the functionalities section looks because it's compact and narrow. The blog section will also need more horizontal space than other sections. Is it really problematic to have sections of different widths? We can align the "projects" and "open-source" section since the last section is small. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 01/Aug/20 19:11 aashnajena commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667574769 I've included changes from the community page PR， as well as made a few changes of my own. The reason we need to specify image height is that the Kafka logo is longer than others， so it will appear much bigger if there's no height restriction. I've added more space between the project logo and description as suggested. Honestly， I really like how the functionalities section looks because it's compact and narrow. The blog section will also need more horizontal space than other sections. Is it really problematic to have sections of different widths? We can align the "projects" and "open-source" section since the last section is small. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 02/Aug/20 13:02 AemieJ commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667671414 Isuee within functionality for small screen width ![functionality-small-width-issue](https://user-images.githubusercontent.com/44139348/89123600-3255a500-d4ee-11ea-8413-81b0d35d6069.png) Expected behavior ![functionality-small-width](https://user-images.githubusercontent.com/44139348/89123619-4ac5bf80-d4ee-11ea-8aa2-24f572baac90.png) Possible Fix [source，HTML] ``` <div class="content"> <h2 id="packed-with-components">Packed with Components</h2> <p class="description">Packed with several hundred components that are used to access databases， message queues， APIs or basically anything under the sun. Helping you integrate with everything.</p> <p class="button-txt"><a class="button-dark" href="./components/latest">Go to Component Reference</a></p> </div> ``` [source， CSS] ``` @media screen and (max-width: 626px) { section.frontpage.columns.functionalities .content p { margin: 1rem 0 1.5rem -2.5rem } section.frontpage.columns.functionalities .content p.description { padding-left: 2rem; } section.frontpage.columns.functionalities .content p.button-txt { width: 100vw; } } ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Aug/20 13:02 AemieJ commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667671414 Isuee within functionality for small screen width ! [functionality-small-width-issue] ( https://user-images.githubusercontent.com/44139348/89123600-3255a500-d4ee-11ea-8413-81b0d35d6069.png ) Expected behavior ! [functionality-small-width] ( https://user-images.githubusercontent.com/44139348/89123619-4ac5bf80-d4ee-11ea-8aa2-24f572baac90.png ) Possible Fix [source，HTML] ``` <div class="content"> <h2 id="packed-with-components">Packed with Components</h2> <p class="description">Packed with several hundred components that are used to access databases， message queues， APIs or basically anything under the sun. Helping you integrate with everything.</p> <p class="button-txt"><a class="button-dark" href="./components/latest">Go to Component Reference</a></p> </div> ``` [source， CSS] ``` @media screen and (max-width: 626px) { section.frontpage.columns.functionalities .content p { margin: 1rem 0 1.5rem -2.5rem } section.frontpage.columns.functionalities .content p.description { padding-left: 2rem; } section.frontpage.columns.functionalities .content p.button-txt { width: 100vw; } } ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 02/Aug/20 13:02 AemieJ edited a comment on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667671414 Isuee within functionality for small screen width ![functionality-small-width-issue](https://user-images.githubusercontent.com/44139348/89123600-3255a500-d4ee-11ea-8413-81b0d35d6069.png) Possible Fix [source，HTML] ``` <div class="content"> <h2 id="packed-with-components">Packed with Components</h2> <p class="description">Packed with several hundred components that are used to access databases， message queues， APIs or basically anything under the sun. Helping you integrate with everything.</p> <p class="button-txt"><a class="button-dark" href="./components/latest">Go to Component Reference</a></p> </div> ``` [source， CSS] ``` @media screen and (max-width: 626px) { section.frontpage.columns.functionalities .content p { margin: 1rem 0 1.5rem -2.5rem } section.frontpage.columns.functionalities .content p.description { padding-left: 2rem; } section.frontpage.columns.functionalities .content p.button-txt { width: 100vw; } } ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Aug/20 13:02 AemieJ edited a comment on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667671414 Isuee within functionality for small screen width ! [functionality-small-width-issue] ( https://user-images.githubusercontent.com/44139348/89123600-3255a500-d4ee-11ea-8413-81b0d35d6069.png ) Possible Fix [source，HTML] ``` <div class="content"> <h2 id="packed-with-components">Packed with Components</h2> <p class="description">Packed with several hundred components that are used to access databases， message queues， APIs or basically anything under the sun. Helping you integrate with everything.</p> <p class="button-txt"><a class="button-dark" href="./components/latest">Go to Component Reference</a></p> </div> ``` [source， CSS] ``` @media screen and (max-width: 626px) { section.frontpage.columns.functionalities .content p { margin: 1rem 0 1.5rem -2.5rem } section.frontpage.columns.functionalities .content p.description { padding-left: 2rem; } section.frontpage.columns.functionalities .content p.button-txt { width: 100vw; } } ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 02/Aug/20 14:28 aashnajena commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667680956 I've added a `white-space:no-wrap` property to stop the button from breaking. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Aug/20 14:28 aashnajena commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667680956 I've added a `white-space:no-wrap` property to stop the button from breaking. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 03/Aug/20 09:11 aashnajena commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667906942 This is how 3 projects in a row would look， but might get clustered near 1024px : ![Screenshot 2020-08-03 at 2 38 58 PM](https://user-images.githubusercontent.com/32356795/89166166-3c7fae00-d597-11ea-8a1c-0f8106956dc5.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 03/Aug/20 09:11 aashnajena commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667906942 This is how 3 projects in a row would look， but might get clustered near 1024px : ! [Screenshot 2020-08-03 at 2 38 58 PM] ( https://user-images.githubusercontent.com/32356795/89166166-3c7fae00-d597-11ea-8a1c-0f8106956dc5.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 03/Aug/20 12:36 AemieJ commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667998749 ![clustered-buttons](https://user-images.githubusercontent.com/44139348/89182711-d05f7300-d5b3-11ea-918c-dc1d6d0aab57.png) Occurs due to `white-space: no-wrap`. An easy fix to provide a line-height to the paragraph encompassing the two links i.e `line-height: 3rem;` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 03/Aug/20 12:36 AemieJ commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667998749 ! [clustered-buttons] ( https://user-images.githubusercontent.com/44139348/89182711-d05f7300-d5b3-11ea-918c-dc1d6d0aab57.png ) Occurs due to `white-space: no-wrap`. An easy fix to provide a line-height to the paragraph encompassing the two links i.e `line-height: 3rem;` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 03/Aug/20 12:41 AemieJ edited a comment on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667998749 First issue found : ![clustered-buttons](https://user-images.githubusercontent.com/44139348/89182711-d05f7300-d5b3-11ea-918c-dc1d6d0aab57.png) Occurs due to `white-space: no-wrap`. An easy fix to provide a line-height to the paragraph encompassing the two links i.e `line-height: 3rem;` Second issue : For the navbar items within small screen width ( < 1023px )， the color of navbar items is the shade #333333 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 03/Aug/20 12:41 AemieJ edited a comment on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-667998749 First issue found : ! [clustered-buttons] ( https://user-images.githubusercontent.com/44139348/89182711-d05f7300-d5b3-11ea-918c-dc1d6d0aab57.png ) Occurs due to `white-space: no-wrap`. An easy fix to provide a line-height to the paragraph encompassing the two links i.e `line-height: 3rem;` Second issue : For the navbar items within small screen width ( < 1023px )， the color of navbar items is the shade #333333 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 04/Aug/20 22:43 zregvart commented on a change in pull request #442: URL: https://github.com/apache/camel-website/pull/442#discussion_r465359211 ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -244，18 +222，120 @@ section.frontpage.columns .box .feature-icon { } .split img { - max-width: 70%; display: block; margin: auto; } section.frontpage.columns .box { + .frontpage-header .main-heading， + section.frontpage.columns.functionalities， + section.frontpage.columns.projects， + section.frontpage.apache， + section.frontpage.blog-posts .blog-post { + width: 90%; + margin: 0 auto; + } + + section.frontpage.columns.blog-posts { + flex-direction: column; + } + + section.frontpage.blog-posts .blog-post .date， + section.frontpage.projects .project .icon { + min-width: 25%; + } + + section.frontpage.projects .project， + section.frontpage.columns.functionalities .box { + width: 100%; + } + + section.frontpage.functionalities .icon img { + max-width: 25vw; + margin: 2vw; + } + + section.frontpage.functionalities .content { + width: 70vw; + } + + .frontpage-header p { + font-size: inherit; + text-align: center; + } + + .frontpage-header { + flex-direction: column-reverse; Review comment: Perhaps: ```suggestion flex-direction: column; ``` To make the "Apache Camel" above the image， since currently image doesn't really depict what Camel is? ########## File path: antora-ui-camel/src/css/blog-frontpage.css ########## @@ -0，0 +1，44 @@ +.blog-post .content { Review comment: I'd put this in `frontpage.css` and prefix with `.frontpage`. ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -1，212 +1，200 @@ -header.frontpage { - font-size: 1.5rem; - display: flex; - flex-flow: column; - align-items: center; - margin: 0 auto; - max-width: 60rem; -} +/* common css for sections */ -header.frontpage h1 { font-size: 5rem; font-weight: bolder; +section.frontpage h1， +section.frontpage h2， +section.frontpage h3， +section.frontpage h4， +section.frontpage h5， +section.frontpage h6 { + font-weight: var(--heading-font-weight); color: var(--heading-font-color); - margin-top: 3rem; - text-align: center; - text-transform: none; - text-shadow: -1px -1px 1px #fff5， 1px -1px 1px #fff5， -1px 1px 1px #fff5， 1px 1px 1px #fff5; + line-height: 1.3; + margin: 1rem 0 0; + text-transform: uppercase; + word-wrap: break-word; } -header.frontpage p { hyphens: none; margin-top: 3rem; text-align: center; line-height: 1.5; color: var(--body-font-color); +section.frontpage { + color: var(--doc-font-color); + font-size: var(--doc-font-size); + line-height: var(--doc-line-height); + margin: 0 auto; + max-width: var(--frontpage-max-width); } -header.frontpage a { color: var(--heading-font-color); text-decoration: underline; Review comment: I think it's a mistake that we don't underline links by default. I created [a separate issue for that](https://issues.apache.org/jira/browse/CAMEL-15371). ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -1，212 +1，200 @@ -header.frontpage { - font-size: 1.5rem; - display: flex; - flex-flow: column; - align-items: center; - margin: 0 auto; - max-width: 60rem; -} +/* common css for sections */ -header.frontpage h1 { font-size: 5rem; font-weight: bolder; +section.frontpage h1， +section.frontpage h2， +section.frontpage h3， +section.frontpage h4， +section.frontpage h5， +section.frontpage h6 { + font-weight: var(--heading-font-weight); color: var(--heading-font-color); - margin-top: 3rem; - text-align: center; - text-transform: none; - text-shadow: -1px -1px 1px #fff5， 1px -1px 1px #fff5， -1px 1px 1px #fff5， 1px 1px 1px #fff5; + line-height: 1.3; + margin: 1rem 0 0; + text-transform: uppercase; + word-wrap: break-word; } -header.frontpage p { hyphens: none; margin-top: 3rem; text-align: center; line-height: 1.5; color: var(--body-font-color); +section.frontpage { + color: var(--doc-font-color); + font-size: var(--doc-font-size); + line-height: var(--doc-line-height); + margin: 0 auto; + max-width: var(--frontpage-max-width); } -header.frontpage a { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a { + color: var(--link-font-color); } -header.frontpage a:hover { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a:hover { + color: var(--link_hover-font-color); } -header.frontpage a:active { color: var(--heading-font-color); +section.frontpage h1 { + width: 100%; + text-align: center; + margin-bottom: 1rem; + font-size: 2.5rem; } -.frontpage a:hover { color: var(--color-white); text-decoration: none; +section.frontpage h2 { + text-align: center; } -.frontpage a:active { - color: var(--color-white); -} +/* css for header section */ -.frontpage a.significant { margin: 1rem; padding: 0.8rem 1.5rem; background: var(--color-camel-orange); color: var(--color-white); border-radius: 8px; font-size: 1.2rem; font-weight: bold; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; +.frontpage-header { + display: flex; + flex-direction: row; + margin: 2rem 3rem 2.5rem; } -.frontpage a.significant:hover { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header img { + width: 45vw; + max-height: 50vh; } -.frontpage a.significant:active { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header .main-heading { + width: 50vw; + display: flex; + flex-direction: column; + margin-left: 2rem; } -header.frontpage svg { position: absolute; top: 4rem; left: 0; width: 100%; height: 14rem; z-index: -1; +.frontpage-header h1 { + font-size: 5vw; + color: var(--color-asf-dark-blue); + margin-bottom: 0.5rem; } -header.frontpage svg path { fill: none; animation: sparkle 2s ease alternate infinite; +.frontpage-header p { + font-size: 1.2rem; + margin-bottom: 2rem; + line-height: 1.7rem; } -header.frontpage svg path:nth-child(1) { stroke: #ffebcc; stroke-width: 10; stroke-opacity: 0.9; +a.button-dark， +.frontpage a.button-dark， +.frontpage a.button-dark:hover { + white-space: nowrap; + padding: 0.7rem 1rem; + background-color: var(--color-camel-orange); + color: white; + font-weight: bold; + margin-right: 0.5rem; + border-radius: 3rem; } -header.frontpage svg path:nth-child(2) { stroke: #911408; stroke-width: 10; stroke-opacity: 0.3; animation-delay: -1s; +.button-light { + padding: 0.7rem 1rem; + border: 1px solid var(--color-gray-70); + color: var(--color-gray-70); + font-weight: bold; + border-radius: 3rem; + white-space: nowrap; } -header.frontpage svg path:nth-child(3) { - stroke: #f1b35b; - stroke-width: 15; - stroke-opacity: 0.6; - animation-delay: -3.5s; -} +/* css for blog section */ -header.frontpage svg path:nth-child(4) { stroke: #f28a40; stroke-width: 5; stroke-opacity: 0.4; animation-delay: -3s; +.whats-new { Review comment: Prefix with `.frontpage`， perhaps `news` would be a better class name? ########## File path: layouts/index.html ########## @@ -1，18 +1，48 @@ {{ partial "header.html" . }} -<header class="frontpage"> <h1>🚀 Camel 3.4 is here! <wbr><a href="blog/2020/06/camel34-whatsnew/">What's new?</a></h1> <svg viewBox="0 0 500 70" preserveAspectRatio="none"> <path d="M -10，25 C 130，125 330，0 510，5" /> <path d="M -10，20 C 130，125 330，0 510，2" /> <path d="M -10，15 C 150，115 350，0 510，15" /> <path d="M -10，11 C 130，125 330，0 510，20" /> <path d="M -10，5 C 130，125 330，0 510，25" /> </svg> <p>Camel is an <mark>open source integration framework</mark> that empowers you to quickly and easily integrate various systems consuming or producing data. </p> <a class="significant" href="/manual/latest/getting-started.html">Get started</a> -</header> +<div class="frontpage-header"> Review comment: Let's use semantic html here， so `<header>` instead of `<div>`. This not only eliminates the need for separate CSS class， but also helps screen readers. ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -1，212 +1，200 @@ -header.frontpage { - font-size: 1.5rem; - display: flex; - flex-flow: column; - align-items: center; - margin: 0 auto; - max-width: 60rem; -} +/* common css for sections */ -header.frontpage h1 { font-size: 5rem; font-weight: bolder; +section.frontpage h1， +section.frontpage h2， +section.frontpage h3， +section.frontpage h4， +section.frontpage h5， +section.frontpage h6 { + font-weight: var(--heading-font-weight); color: var(--heading-font-color); - margin-top: 3rem; - text-align: center; - text-transform: none; - text-shadow: -1px -1px 1px #fff5， 1px -1px 1px #fff5， -1px 1px 1px #fff5， 1px 1px 1px #fff5; + line-height: 1.3; + margin: 1rem 0 0; + text-transform: uppercase; + word-wrap: break-word; } -header.frontpage p { hyphens: none; margin-top: 3rem; text-align: center; line-height: 1.5; color: var(--body-font-color); +section.frontpage { + color: var(--doc-font-color); + font-size: var(--doc-font-size); + line-height: var(--doc-line-height); + margin: 0 auto; + max-width: var(--frontpage-max-width); } -header.frontpage a { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a { + color: var(--link-font-color); } -header.frontpage a:hover { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a:hover { + color: var(--link_hover-font-color); } -header.frontpage a:active { color: var(--heading-font-color); +section.frontpage h1 { + width: 100%; + text-align: center; + margin-bottom: 1rem; + font-size: 2.5rem; } -.frontpage a:hover { color: var(--color-white); text-decoration: none; +section.frontpage h2 { + text-align: center; } -.frontpage a:active { - color: var(--color-white); -} +/* css for header section */ -.frontpage a.significant { margin: 1rem; padding: 0.8rem 1.5rem; background: var(--color-camel-orange); color: var(--color-white); border-radius: 8px; font-size: 1.2rem; font-weight: bold; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; +.frontpage-header { + display: flex; + flex-direction: row; + margin: 2rem 3rem 2.5rem; } -.frontpage a.significant:hover { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header img { + width: 45vw; + max-height: 50vh; } -.frontpage a.significant:active { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header .main-heading { + width: 50vw; + display: flex; + flex-direction: column; + margin-left: 2rem; } -header.frontpage svg { position: absolute; top: 4rem; left: 0; width: 100%; height: 14rem; z-index: -1; +.frontpage-header h1 { + font-size: 5vw; + color: var(--color-asf-dark-blue); + margin-bottom: 0.5rem; } -header.frontpage svg path { fill: none; animation: sparkle 2s ease alternate infinite; +.frontpage-header p { + font-size: 1.2rem; + margin-bottom: 2rem; + line-height: 1.7rem; } -header.frontpage svg path:nth-child(1) { stroke: #ffebcc; stroke-width: 10; stroke-opacity: 0.9; +a.button-dark， +.frontpage a.button-dark， +.frontpage a.button-dark:hover { + white-space: nowrap; + padding: 0.7rem 1rem; + background-color: var(--color-camel-orange); + color: white; + font-weight: bold; + margin-right: 0.5rem; + border-radius: 3rem; } -header.frontpage svg path:nth-child(2) { stroke: #911408; stroke-width: 10; stroke-opacity: 0.3; animation-delay: -1s; +.button-light { Review comment: Prefix with `.frontpage`? ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -1，212 +1，200 @@ -header.frontpage { - font-size: 1.5rem; - display: flex; - flex-flow: column; - align-items: center; - margin: 0 auto; - max-width: 60rem; -} +/* common css for sections */ -header.frontpage h1 { font-size: 5rem; font-weight: bolder; +section.frontpage h1， +section.frontpage h2， +section.frontpage h3， +section.frontpage h4， +section.frontpage h5， +section.frontpage h6 { Review comment: Is this needed? we're only using `h1` and `h2` from what I can see. ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -244，18 +222，120 @@ section.frontpage.columns .box .feature-icon { } .split img { - max-width: 70%; display: block; margin: auto; } section.frontpage.columns .box { + .frontpage-header .main-heading， + section.frontpage.columns.functionalities， + section.frontpage.columns.projects， + section.frontpage.apache， + section.frontpage.blog-posts .blog-post { + width: 90%; + margin: 0 auto; + } + + section.frontpage.columns.blog-posts { + flex-direction: column; + } + + section.frontpage.blog-posts .blog-post .date， + section.frontpage.projects .project .icon { + min-width: 25%; + } + + section.frontpage.projects .project， + section.frontpage.columns.functionalities .box { + width: 100%; + } + + section.frontpage.functionalities .icon img { + max-width: 25vw; + margin: 2vw; + } + + section.frontpage.functionalities .content { + width: 70vw; + } + + .frontpage-header p { + font-size: inherit; + text-align: center; + } + + .frontpage-header { + flex-direction: column-reverse; + margin: 0; + } + + .frontpage-header img { + width: 60%; + max-height: 45vh; + margin: 0 auto; + } + + .whats-new { Review comment: Prefix with `.frontpage`? ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -1，212 +1，200 @@ -header.frontpage { - font-size: 1.5rem; - display: flex; - flex-flow: column; - align-items: center; - margin: 0 auto; - max-width: 60rem; -} +/* common css for sections */ -header.frontpage h1 { font-size: 5rem; font-weight: bolder; +section.frontpage h1， +section.frontpage h2， +section.frontpage h3， +section.frontpage h4， +section.frontpage h5， +section.frontpage h6 { + font-weight: var(--heading-font-weight); color: var(--heading-font-color); - margin-top: 3rem; - text-align: center; - text-transform: none; - text-shadow: -1px -1px 1px #fff5， 1px -1px 1px #fff5， -1px 1px 1px #fff5， 1px 1px 1px #fff5; + line-height: 1.3; + margin: 1rem 0 0; + text-transform: uppercase; + word-wrap: break-word; } -header.frontpage p { hyphens: none; margin-top: 3rem; text-align: center; line-height: 1.5; color: var(--body-font-color); +section.frontpage { + color: var(--doc-font-color); + font-size: var(--doc-font-size); + line-height: var(--doc-line-height); + margin: 0 auto; + max-width: var(--frontpage-max-width); } -header.frontpage a { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a { + color: var(--link-font-color); } -header.frontpage a:hover { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a:hover { + color: var(--link_hover-font-color); } -header.frontpage a:active { color: var(--heading-font-color); +section.frontpage h1 { + width: 100%; + text-align: center; + margin-bottom: 1rem; + font-size: 2.5rem; } -.frontpage a:hover { color: var(--color-white); text-decoration: none; +section.frontpage h2 { + text-align: center; } -.frontpage a:active { - color: var(--color-white); -} +/* css for header section */ -.frontpage a.significant { margin: 1rem; padding: 0.8rem 1.5rem; background: var(--color-camel-orange); color: var(--color-white); border-radius: 8px; font-size: 1.2rem; font-weight: bold; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; +.frontpage-header { + display: flex; + flex-direction: row; + margin: 2rem 3rem 2.5rem; } -.frontpage a.significant:hover { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header img { + width: 45vw; + max-height: 50vh; } -.frontpage a.significant:active { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header .main-heading { + width: 50vw; + display: flex; + flex-direction: column; + margin-left: 2rem; } -header.frontpage svg { position: absolute; top: 4rem; left: 0; width: 100%; height: 14rem; z-index: -1; +.frontpage-header h1 { + font-size: 5vw; + color: var(--color-asf-dark-blue); + margin-bottom: 0.5rem; } -header.frontpage svg path { fill: none; animation: sparkle 2s ease alternate infinite; +.frontpage-header p { + font-size: 1.2rem; + margin-bottom: 2rem; + line-height: 1.7rem; } -header.frontpage svg path:nth-child(1) { stroke: #ffebcc; stroke-width: 10; stroke-opacity: 0.9; +a.button-dark， +.frontpage a.button-dark， +.frontpage a.button-dark:hover { + white-space: nowrap; + padding: 0.7rem 1rem; + background-color: var(--color-camel-orange); + color: white; + font-weight: bold; + margin-right: 0.5rem; + border-radius: 3rem; } -header.frontpage svg path:nth-child(2) { stroke: #911408; stroke-width: 10; stroke-opacity: 0.3; animation-delay: -1s; +.button-light { + padding: 0.7rem 1rem; + border: 1px solid var(--color-gray-70); + color: var(--color-gray-70); + font-weight: bold; + border-radius: 3rem; + white-space: nowrap; } -header.frontpage svg path:nth-child(3) { - stroke: #f1b35b; - stroke-width: 15; - stroke-opacity: 0.6; - animation-delay: -3.5s; -} +/* css for blog section */ -header.frontpage svg path:nth-child(4) { stroke: #f28a40; stroke-width: 5; stroke-opacity: 0.4; animation-delay: -3s; +.whats-new { + padding: 0.2rem 0; + width: 20%; + text-align: center; + margin-left: 3rem; + background-color: #f5f5f5; + border-radius: 1rem 1rem 0 0; } -header.frontpage svg path:nth-child(5) { stroke: #ee6d11; stroke-width: 5; stroke-opacity: 0.6; animation-delay: -6s; +.whats-new h2 { Review comment: Prefix with `.frontpage`? ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -1，212 +1，200 @@ -header.frontpage { - font-size: 1.5rem; - display: flex; - flex-flow: column; - align-items: center; - margin: 0 auto; - max-width: 60rem; -} +/* common css for sections */ -header.frontpage h1 { font-size: 5rem; font-weight: bolder; +section.frontpage h1， +section.frontpage h2， +section.frontpage h3， +section.frontpage h4， +section.frontpage h5， +section.frontpage h6 { + font-weight: var(--heading-font-weight); color: var(--heading-font-color); - margin-top: 3rem; - text-align: center; - text-transform: none; - text-shadow: -1px -1px 1px #fff5， 1px -1px 1px #fff5， -1px 1px 1px #fff5， 1px 1px 1px #fff5; + line-height: 1.3; + margin: 1rem 0 0; + text-transform: uppercase; + word-wrap: break-word; } -header.frontpage p { hyphens: none; margin-top: 3rem; text-align: center; line-height: 1.5; color: var(--body-font-color); +section.frontpage { + color: var(--doc-font-color); + font-size: var(--doc-font-size); + line-height: var(--doc-line-height); + margin: 0 auto; + max-width: var(--frontpage-max-width); } -header.frontpage a { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a { + color: var(--link-font-color); } -header.frontpage a:hover { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a:hover { + color: var(--link_hover-font-color); } -header.frontpage a:active { color: var(--heading-font-color); +section.frontpage h1 { + width: 100%; + text-align: center; + margin-bottom: 1rem; + font-size: 2.5rem; } -.frontpage a:hover { color: var(--color-white); text-decoration: none; +section.frontpage h2 { + text-align: center; } -.frontpage a:active { - color: var(--color-white); -} +/* css for header section */ -.frontpage a.significant { margin: 1rem; padding: 0.8rem 1.5rem; background: var(--color-camel-orange); color: var(--color-white); border-radius: 8px; font-size: 1.2rem; font-weight: bold; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; +.frontpage-header { + display: flex; + flex-direction: row; + margin: 2rem 3rem 2.5rem; } -.frontpage a.significant:hover { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header img { + width: 45vw; + max-height: 50vh; } -.frontpage a.significant:active { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header .main-heading { + width: 50vw; + display: flex; + flex-direction: column; + margin-left: 2rem; } -header.frontpage svg { position: absolute; top: 4rem; left: 0; width: 100%; height: 14rem; z-index: -1; +.frontpage-header h1 { + font-size: 5vw; + color: var(--color-asf-dark-blue); + margin-bottom: 0.5rem; } -header.frontpage svg path { fill: none; animation: sparkle 2s ease alternate infinite; +.frontpage-header p { + font-size: 1.2rem; + margin-bottom: 2rem; + line-height: 1.7rem; } -header.frontpage svg path:nth-child(1) { stroke: #ffebcc; stroke-width: 10; stroke-opacity: 0.9; +a.button-dark， +.frontpage a.button-dark， +.frontpage a.button-dark:hover { + white-space: nowrap; + padding: 0.7rem 1rem; + background-color: var(--color-camel-orange); + color: white; + font-weight: bold; + margin-right: 0.5rem; + border-radius: 3rem; } -header.frontpage svg path:nth-child(2) { stroke: #911408; stroke-width: 10; stroke-opacity: 0.3; animation-delay: -1s; +.button-light { + padding: 0.7rem 1rem; + border: 1px solid var(--color-gray-70); + color: var(--color-gray-70); + font-weight: bold; + border-radius: 3rem; + white-space: nowrap; } -header.frontpage svg path:nth-child(3) { - stroke: #f1b35b; - stroke-width: 15; - stroke-opacity: 0.6; - animation-delay: -3.5s; -} +/* css for blog section */ -header.frontpage svg path:nth-child(4) { stroke: #f28a40; stroke-width: 5; stroke-opacity: 0.4; animation-delay: -3s; +.whats-new { + padding: 0.2rem 0; + width: 20%; + text-align: center; + margin-left: 3rem; + background-color: #f5f5f5; Review comment: Use a variable here. ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -1，212 +1，200 @@ -header.frontpage { - font-size: 1.5rem; - display: flex; - flex-flow: column; - align-items: center; - margin: 0 auto; - max-width: 60rem; -} +/* common css for sections */ -header.frontpage h1 { font-size: 5rem; font-weight: bolder; +section.frontpage h1， +section.frontpage h2， +section.frontpage h3， +section.frontpage h4， +section.frontpage h5， +section.frontpage h6 { + font-weight: var(--heading-font-weight); color: var(--heading-font-color); - margin-top: 3rem; - text-align: center; - text-transform: none; - text-shadow: -1px -1px 1px #fff5， 1px -1px 1px #fff5， -1px 1px 1px #fff5， 1px 1px 1px #fff5; + line-height: 1.3; + margin: 1rem 0 0; + text-transform: uppercase; + word-wrap: break-word; } -header.frontpage p { hyphens: none; margin-top: 3rem; text-align: center; line-height: 1.5; color: var(--body-font-color); +section.frontpage { + color: var(--doc-font-color); + font-size: var(--doc-font-size); + line-height: var(--doc-line-height); + margin: 0 auto; + max-width: var(--frontpage-max-width); } -header.frontpage a { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a { + color: var(--link-font-color); } -header.frontpage a:hover { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a:hover { + color: var(--link_hover-font-color); } -header.frontpage a:active { color: var(--heading-font-color); +section.frontpage h1 { + width: 100%; + text-align: center; + margin-bottom: 1rem; + font-size: 2.5rem; } -.frontpage a:hover { color: var(--color-white); text-decoration: none; +section.frontpage h2 { + text-align: center; } -.frontpage a:active { - color: var(--color-white); -} +/* css for header section */ -.frontpage a.significant { margin: 1rem; padding: 0.8rem 1.5rem; background: var(--color-camel-orange); color: var(--color-white); border-radius: 8px; font-size: 1.2rem; font-weight: bold; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; +.frontpage-header { + display: flex; + flex-direction: row; + margin: 2rem 3rem 2.5rem; } -.frontpage a.significant:hover { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header img { + width: 45vw; + max-height: 50vh; } -.frontpage a.significant:active { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header .main-heading { + width: 50vw; + display: flex; + flex-direction: column; + margin-left: 2rem; } -header.frontpage svg { position: absolute; top: 4rem; left: 0; width: 100%; height: 14rem; z-index: -1; +.frontpage-header h1 { + font-size: 5vw; + color: var(--color-asf-dark-blue); + margin-bottom: 0.5rem; } -header.frontpage svg path { fill: none; animation: sparkle 2s ease alternate infinite; +.frontpage-header p { + font-size: 1.2rem; + margin-bottom: 2rem; + line-height: 1.7rem; } -header.frontpage svg path:nth-child(1) { stroke: #ffebcc; stroke-width: 10; stroke-opacity: 0.9; +a.button-dark， +.frontpage a.button-dark， +.frontpage a.button-dark:hover { + white-space: nowrap; + padding: 0.7rem 1rem; + background-color: var(--color-camel-orange); + color: white; + font-weight: bold; + margin-right: 0.5rem; + border-radius: 3rem; } -header.frontpage svg path:nth-child(2) { stroke: #911408; stroke-width: 10; stroke-opacity: 0.3; animation-delay: -1s; +.button-light { + padding: 0.7rem 1rem; + border: 1px solid var(--color-gray-70); + color: var(--color-gray-70); + font-weight: bold; + border-radius: 3rem; + white-space: nowrap; } -header.frontpage svg path:nth-child(3) { - stroke: #f1b35b; - stroke-width: 15; - stroke-opacity: 0.6; - animation-delay: -3.5s; -} +/* css for blog section */ -header.frontpage svg path:nth-child(4) { stroke: #f28a40; stroke-width: 5; stroke-opacity: 0.4; animation-delay: -3s; +.whats-new { + padding: 0.2rem 0; + width: 20%; + text-align: center; + margin-left: 3rem; + background-color: #f5f5f5; + border-radius: 1rem 1rem 0 0; } -header.frontpage svg path:nth-child(5) { stroke: #ee6d11; stroke-width: 5; stroke-opacity: 0.6; animation-delay: -6s; +.whats-new h2 { + margin-bottom: 0.5rem; } -@keyframes sparkle { 0% { - stroke-opacity: 0.2; - } - 100% { - stroke-opacity: 0.6; - } +section.frontpage.columns.blog-posts { + margin: 0; + display: flex; + flex-direction: row; + padding: 1rem 1rem 1rem 3rem; + max-width: none; + border-top: none; + background-color: var(--color-smoke-50); } -section.frontpage { color: var(--doc-font-color); font-size: var(--doc-font-size); line-height: var(--doc-line-height); margin: 0 auto; margin-top: 4rem; max-width: var(--frontpage-max-width); +/* common css for columns section */ + +section.frontpage.columns.functionalities p， +.project .content p { + margin-bottom: 1.5rem; } -section.frontpage.columns， section.frontpage.projects， -section.frontpage.apache { +section.frontpage.apache， +section.frontpage.functionalities { display: flex; flex-wrap: wrap; border-top: 1px solid var(--color-smoke-50); padding: 2rem 1rem 1rem 1rem; } -section.frontpage.projects .section { width: calc(33% - 3rem); padding: 1%; margin: 1.5rem; +section.frontpage.columns.functionalities { + border: none; } -section.frontpage h1， -section.frontpage h2， -section.frontpage h3， -section.frontpage h4， -section.frontpage h5， -section.frontpage h6 { font-weight: var(--heading-font-weight); color: var(--heading-font-color); line-height: 1.3; margin: 1rem 0 0; text-transform: uppercase; word-wrap: break-word; +section.frontpage.columns.functionalities h2， +.project .content h2， +.project .content p { Review comment: Prefix with `.frontpage`? ########## File path: layouts/index.html ########## @@ -1，18 +1，48 @@ {{ partial "header.html" . }} -<header class="frontpage"> <h1>🚀 Camel 3.4 is here! <wbr><a href="blog/2020/06/camel34-whatsnew/">What's new?</a></h1> <svg viewBox="0 0 500 70" preserveAspectRatio="none"> <path d="M -10，25 C 130，125 330，0 510，5" /> <path d="M -10，20 C 130，125 330，0 510，2" /> <path d="M -10，15 C 150，115 350，0 510，15" /> <path d="M -10，11 C 130，125 330，0 510，20" /> <path d="M -10，5 C 130，125 330，0 510，25" /> </svg> <p>Camel is an <mark>open source integration framework</mark> that empowers you to quickly and easily integrate various systems consuming or producing data. </p> <a class="significant" href="/manual/latest/getting-started.html">Get started</a> -</header> +<div class="frontpage-header"> + <div class="main-heading"> + <h1>Apache Camel</h1> + <p> + Camel is an Open Source integration framework that empowers you + to quickly and easily integrate various systems consuming or producing data. + </p> + <p> + <a class="button-dark" href="/manual/latest/getting-started.html">Get Started</a> <a class="button-light" href="/manual/latest/faq/what-is-camel.html">What is Camel?</a> + </p> + </div> + <img src="./img/camel-gears.svg" /> +</div> + +<div class="whats-new"> + <h2>What's New?</h2> +</div> + +<section class="frontpage columns blog-posts"> + +with .Site.GetPage "taxonomy" "releases" +range .Pages | first 3 + +<div class="blog-post"> Review comment: I'd use `<ol>` and `<li>` for each blog post， this helps screen readers. ########## File path: layouts/index.html ########## @@ -1，18 +1，48 @@ {{ partial "header.html" . }} -<header class="frontpage"> <h1>🚀 Camel 3.4 is here! <wbr><a href="blog/2020/06/camel34-whatsnew/">What's new?</a></h1> <svg viewBox="0 0 500 70" preserveAspectRatio="none"> <path d="M -10，25 C 130，125 330，0 510，5" /> <path d="M -10，20 C 130，125 330，0 510，2" /> <path d="M -10，15 C 150，115 350，0 510，15" /> <path d="M -10，11 C 130，125 330，0 510，20" /> <path d="M -10，5 C 130，125 330，0 510，25" /> </svg> <p>Camel is an <mark>open source integration framework</mark> that empowers you to quickly and easily integrate various systems consuming or producing data. </p> <a class="significant" href="/manual/latest/getting-started.html">Get started</a> -</header> +<div class="frontpage-header"> + <div class="main-heading"> + <h1>Apache Camel</h1> + <p> + Camel is an Open Source integration framework that empowers you + to quickly and easily integrate various systems consuming or producing data. + </p> + <p> + <a class="button-dark" href="/manual/latest/getting-started.html">Get Started</a> <a class="button-light" href="/manual/latest/faq/what-is-camel.html">What is Camel?</a> + </p> + </div> + <img src="./img/camel-gears.svg" /> +</div> + +<div class="whats-new"> + <h2>What's New?</h2> +</div> + +<section class="frontpage columns blog-posts"> + +with .Site.GetPage "taxonomy" "releases" +range .Pages | first 3 Review comment: Do you think we could fit more than 3， perhaps by reducing the font size of the date presented? It's quite large and probably not the more important than other text. ########## File path: layouts/index.html ########## @@ -1，18 +1，48 @@ {{ partial "header.html" . }} -<header class="frontpage"> <h1>🚀 Camel 3.4 is here! <wbr><a href="blog/2020/06/camel34-whatsnew/">What's new?</a></h1> <svg viewBox="0 0 500 70" preserveAspectRatio="none"> <path d="M -10，25 C 130，125 330，0 510，5" /> <path d="M -10，20 C 130，125 330，0 510，2" /> <path d="M -10，15 C 150，115 350，0 510，15" /> <path d="M -10，11 C 130，125 330，0 510，20" /> <path d="M -10，5 C 130，125 330，0 510，25" /> </svg> <p>Camel is an <mark>open source integration framework</mark> that empowers you to quickly and easily integrate various systems consuming or producing data. </p> <a class="significant" href="/manual/latest/getting-started.html">Get started</a> -</header> +<div class="frontpage-header"> + <div class="main-heading"> + <h1>Apache Camel</h1> + <p> + Camel is an Open Source integration framework that empowers you + to quickly and easily integrate various systems consuming or producing data. + </p> + <p> + <a class="button-dark" href="/manual/latest/getting-started.html">Get Started</a> <a class="button-light" href="/manual/latest/faq/what-is-camel.html">What is Camel?</a> + </p> + </div> + <img src="./img/camel-gears.svg" /> +</div> + +<div class="whats-new"> + <h2>What's New?</h2> +</div> + +<section class="frontpage columns blog-posts"> + +with .Site.GetPage "taxonomy" "releases" Review comment: Let's use all blog posts， rather than just releases. We can feature releases on the Downloads page. ########## File path: layouts/index.html ########## @@ -1，18 +1，48 @@ {{ partial "header.html" . }} -<header class="frontpage"> <h1>🚀 Camel 3.4 is here! <wbr><a href="blog/2020/06/camel34-whatsnew/">What's new?</a></h1> <svg viewBox="0 0 500 70" preserveAspectRatio="none"> <path d="M -10，25 C 130，125 330，0 510，5" /> <path d="M -10，20 C 130，125 330，0 510，2" /> <path d="M -10，15 C 150，115 350，0 510，15" /> <path d="M -10，11 C 130，125 330，0 510，20" /> <path d="M -10，5 C 130，125 330，0 510，25" /> </svg> <p>Camel is an <mark>open source integration framework</mark> that empowers you to quickly and easily integrate various systems consuming or producing data. </p> <a class="significant" href="/manual/latest/getting-started.html">Get started</a> -</header> +<div class="frontpage-header"> + <div class="main-heading"> + <h1>Apache Camel</h1> + <p> + Camel is an Open Source integration framework that empowers you + to quickly and easily integrate various systems consuming or producing data. + </p> + <p> + <a class="button-dark" href="/manual/latest/getting-started.html">Get Started</a> <a class="button-light" href="/manual/latest/faq/what-is-camel.html">What is Camel?</a> + </p> + </div> + <img src="./img/camel-gears.svg" /> +</div> + +<div class="whats-new"> + <h2>What's New?</h2> +</div> + +<section class="frontpage columns blog-posts"> + +with .Site.GetPage "taxonomy" "releases" +range .Pages | first 3 + +<div class="blog-post"> + <div class="date"> + <div class="day"> + {{ dateFormat "2" .PublishDate}} + </div> + <div class="month"> + {{ dateFormat "Jan" .PublishDate}} + {{ dateFormat "2006" .PublishDate}} + </div> + </div> Review comment: Use semantic HTML here， [`<time>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/time) would be appropriate I think. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 04/Aug/20 22:43 zregvart commented on a change in pull request #442: URL: https://github.com/apache/camel-website/pull/442#discussion_r465359211 ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -244，18 +222，120 @@ section.frontpage.columns .box .feature-icon { } .split img { - max-width: 70%; display: block; margin: auto; } section.frontpage.columns .box { + .frontpage-header .main-heading， + section.frontpage.columns.functionalities， + section.frontpage.columns.projects， + section.frontpage.apache， + section.frontpage.blog-posts .blog-post { + width: 90%; + margin: 0 auto; + } + + section.frontpage.columns.blog-posts { + flex-direction: column; + } + + section.frontpage.blog-posts .blog-post .date， + section.frontpage.projects .project .icon { + min-width: 25%; + } + + section.frontpage.projects .project， + section.frontpage.columns.functionalities .box { + width: 100%; + } + + section.frontpage.functionalities .icon img { + max-width: 25vw; + margin: 2vw; + } + + section.frontpage.functionalities .content { + width: 70vw; + } + + .frontpage-header p { + font-size: inherit; + text-align: center; + } + + .frontpage-header { + flex-direction: column-reverse; Review comment: Perhaps: ```suggestion flex-direction: column; ``` To make the "Apache Camel" above the image， since currently image doesn't really depict what Camel is? ########## File path: antora-ui-camel/src/css/blog-frontpage.css ########## @@ -0，0 +1，44 @@ +.blog-post .content { Review comment: I'd put this in `frontpage.css` and prefix with `.frontpage`. ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -1，212 +1，200 @@ -header.frontpage { - font-size: 1.5rem; - display: flex; - flex-flow: column; - align-items: center; - margin: 0 auto; - max-width: 60rem; -} +/* common css for sections */ -header.frontpage h1 { font-size: 5rem; font-weight: bolder; +section.frontpage h1， +section.frontpage h2， +section.frontpage h3， +section.frontpage h4， +section.frontpage h5， +section.frontpage h6 { + font-weight: var(--heading-font-weight); color: var(--heading-font-color); - margin-top: 3rem; - text-align: center; - text-transform: none; - text-shadow: -1px -1px 1px #fff5， 1px -1px 1px #fff5， -1px 1px 1px #fff5， 1px 1px 1px #fff5; + line-height: 1.3; + margin: 1rem 0 0; + text-transform: uppercase; + word-wrap: break-word; } -header.frontpage p { hyphens: none; margin-top: 3rem; text-align: center; line-height: 1.5; color: var(--body-font-color); +section.frontpage { + color: var(--doc-font-color); + font-size: var(--doc-font-size); + line-height: var(--doc-line-height); + margin: 0 auto; + max-width: var(--frontpage-max-width); } -header.frontpage a { color: var(--heading-font-color); text-decoration: underline; Review comment: I think it's a mistake that we don't underline links by default. I created [a separate issue for that] ( https://issues.apache.org/jira/browse/CAMEL-15371 ). ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -1，212 +1，200 @@ -header.frontpage { - font-size: 1.5rem; - display: flex; - flex-flow: column; - align-items: center; - margin: 0 auto; - max-width: 60rem; -} +/* common css for sections */ -header.frontpage h1 { font-size: 5rem; font-weight: bolder; +section.frontpage h1， +section.frontpage h2， +section.frontpage h3， +section.frontpage h4， +section.frontpage h5， +section.frontpage h6 { + font-weight: var(--heading-font-weight); color: var(--heading-font-color); - margin-top: 3rem; - text-align: center; - text-transform: none; - text-shadow: -1px -1px 1px #fff5， 1px -1px 1px #fff5， -1px 1px 1px #fff5， 1px 1px 1px #fff5; + line-height: 1.3; + margin: 1rem 0 0; + text-transform: uppercase; + word-wrap: break-word; } -header.frontpage p { hyphens: none; margin-top: 3rem; text-align: center; line-height: 1.5; color: var(--body-font-color); +section.frontpage { + color: var(--doc-font-color); + font-size: var(--doc-font-size); + line-height: var(--doc-line-height); + margin: 0 auto; + max-width: var(--frontpage-max-width); } -header.frontpage a { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a { + color: var(--link-font-color); } -header.frontpage a:hover { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a:hover { + color: var(--link_hover-font-color); } -header.frontpage a:active { color: var(--heading-font-color); +section.frontpage h1 { + width: 100%; + text-align: center; + margin-bottom: 1rem; + font-size: 2.5rem; } -.frontpage a:hover { color: var(--color-white); text-decoration: none; +section.frontpage h2 { + text-align: center; } -.frontpage a:active { - color: var(--color-white); -} +/* css for header section */ -.frontpage a.significant { margin: 1rem; padding: 0.8rem 1.5rem; background: var(--color-camel-orange); color: var(--color-white); border-radius: 8px; font-size: 1.2rem; font-weight: bold; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; +.frontpage-header { + display: flex; + flex-direction: row; + margin: 2rem 3rem 2.5rem; } -.frontpage a.significant:hover { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header img { + width: 45vw; + max-height: 50vh; } -.frontpage a.significant:active { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header .main-heading { + width: 50vw; + display: flex; + flex-direction: column; + margin-left: 2rem; } -header.frontpage svg { position: absolute; top: 4rem; left: 0; width: 100%; height: 14rem; z-index: -1; +.frontpage-header h1 { + font-size: 5vw; + color: var(--color-asf-dark-blue); + margin-bottom: 0.5rem; } -header.frontpage svg path { fill: none; animation: sparkle 2s ease alternate infinite; +.frontpage-header p { + font-size: 1.2rem; + margin-bottom: 2rem; + line-height: 1.7rem; } -header.frontpage svg path:nth-child(1) { stroke: #ffebcc; stroke-width: 10; stroke-opacity: 0.9; +a.button-dark， +.frontpage a.button-dark， +.frontpage a.button-dark:hover { + white-space: nowrap; + padding: 0.7rem 1rem; + background-color: var(--color-camel-orange); + color: white; + font-weight: bold; + margin-right: 0.5rem; + border-radius: 3rem; } -header.frontpage svg path:nth-child(2) { stroke: #911408; stroke-width: 10; stroke-opacity: 0.3; animation-delay: -1s; +.button-light { + padding: 0.7rem 1rem; + border: 1px solid var(--color-gray-70); + color: var(--color-gray-70); + font-weight: bold; + border-radius: 3rem; + white-space: nowrap; } -header.frontpage svg path:nth-child(3) { - stroke: #f1b35b; - stroke-width: 15; - stroke-opacity: 0.6; - animation-delay: -3.5s; -} +/* css for blog section */ -header.frontpage svg path:nth-child(4) { stroke: #f28a40; stroke-width: 5; stroke-opacity: 0.4; animation-delay: -3s; +.whats-new { Review comment: Prefix with `.frontpage`， perhaps `news` would be a better class name? ########## File path: layouts/index.html ########## @@ -1，18 +1，48 @@ {{ partial "header.html" . }} -<header class="frontpage"> <h1>🚀 Camel 3.4 is here! <wbr><a href="blog/2020/06/camel34-whatsnew/">What's new?</a></h1> <svg viewBox="0 0 500 70" preserveAspectRatio="none"> <path d="M -10，25 C 130，125 330，0 510，5" /> <path d="M -10，20 C 130，125 330，0 510，2" /> <path d="M -10，15 C 150，115 350，0 510，15" /> <path d="M -10，11 C 130，125 330，0 510，20" /> <path d="M -10，5 C 130，125 330，0 510，25" /> </svg> <p>Camel is an <mark>open source integration framework</mark> that empowers you to quickly and easily integrate various systems consuming or producing data. </p> <a class="significant" href="/manual/latest/getting-started.html">Get started</a> -</header> +<div class="frontpage-header"> Review comment: Let's use semantic html here， so `<header>` instead of `<div>`. This not only eliminates the need for separate CSS class， but also helps screen readers. ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -1，212 +1，200 @@ -header.frontpage { - font-size: 1.5rem; - display: flex; - flex-flow: column; - align-items: center; - margin: 0 auto; - max-width: 60rem; -} +/* common css for sections */ -header.frontpage h1 { font-size: 5rem; font-weight: bolder; +section.frontpage h1， +section.frontpage h2， +section.frontpage h3， +section.frontpage h4， +section.frontpage h5， +section.frontpage h6 { + font-weight: var(--heading-font-weight); color: var(--heading-font-color); - margin-top: 3rem; - text-align: center; - text-transform: none; - text-shadow: -1px -1px 1px #fff5， 1px -1px 1px #fff5， -1px 1px 1px #fff5， 1px 1px 1px #fff5; + line-height: 1.3; + margin: 1rem 0 0; + text-transform: uppercase; + word-wrap: break-word; } -header.frontpage p { hyphens: none; margin-top: 3rem; text-align: center; line-height: 1.5; color: var(--body-font-color); +section.frontpage { + color: var(--doc-font-color); + font-size: var(--doc-font-size); + line-height: var(--doc-line-height); + margin: 0 auto; + max-width: var(--frontpage-max-width); } -header.frontpage a { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a { + color: var(--link-font-color); } -header.frontpage a:hover { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a:hover { + color: var(--link_hover-font-color); } -header.frontpage a:active { color: var(--heading-font-color); +section.frontpage h1 { + width: 100%; + text-align: center; + margin-bottom: 1rem; + font-size: 2.5rem; } -.frontpage a:hover { color: var(--color-white); text-decoration: none; +section.frontpage h2 { + text-align: center; } -.frontpage a:active { - color: var(--color-white); -} +/* css for header section */ -.frontpage a.significant { margin: 1rem; padding: 0.8rem 1.5rem; background: var(--color-camel-orange); color: var(--color-white); border-radius: 8px; font-size: 1.2rem; font-weight: bold; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; +.frontpage-header { + display: flex; + flex-direction: row; + margin: 2rem 3rem 2.5rem; } -.frontpage a.significant:hover { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header img { + width: 45vw; + max-height: 50vh; } -.frontpage a.significant:active { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header .main-heading { + width: 50vw; + display: flex; + flex-direction: column; + margin-left: 2rem; } -header.frontpage svg { position: absolute; top: 4rem; left: 0; width: 100%; height: 14rem; z-index: -1; +.frontpage-header h1 { + font-size: 5vw; + color: var(--color-asf-dark-blue); + margin-bottom: 0.5rem; } -header.frontpage svg path { fill: none; animation: sparkle 2s ease alternate infinite; +.frontpage-header p { + font-size: 1.2rem; + margin-bottom: 2rem; + line-height: 1.7rem; } -header.frontpage svg path:nth-child(1) { stroke: #ffebcc; stroke-width: 10; stroke-opacity: 0.9; +a.button-dark， +.frontpage a.button-dark， +.frontpage a.button-dark:hover { + white-space: nowrap; + padding: 0.7rem 1rem; + background-color: var(--color-camel-orange); + color: white; + font-weight: bold; + margin-right: 0.5rem; + border-radius: 3rem; } -header.frontpage svg path:nth-child(2) { stroke: #911408; stroke-width: 10; stroke-opacity: 0.3; animation-delay: -1s; +.button-light { Review comment: Prefix with `.frontpage`? ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -1，212 +1，200 @@ -header.frontpage { - font-size: 1.5rem; - display: flex; - flex-flow: column; - align-items: center; - margin: 0 auto; - max-width: 60rem; -} +/* common css for sections */ -header.frontpage h1 { font-size: 5rem; font-weight: bolder; +section.frontpage h1， +section.frontpage h2， +section.frontpage h3， +section.frontpage h4， +section.frontpage h5， +section.frontpage h6 { Review comment: Is this needed? we're only using `h1` and `h2` from what I can see. ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -244，18 +222，120 @@ section.frontpage.columns .box .feature-icon { } .split img { - max-width: 70%; display: block; margin: auto; } section.frontpage.columns .box { + .frontpage-header .main-heading， + section.frontpage.columns.functionalities， + section.frontpage.columns.projects， + section.frontpage.apache， + section.frontpage.blog-posts .blog-post { + width: 90%; + margin: 0 auto; + } + + section.frontpage.columns.blog-posts { + flex-direction: column; + } + + section.frontpage.blog-posts .blog-post .date， + section.frontpage.projects .project .icon { + min-width: 25%; + } + + section.frontpage.projects .project， + section.frontpage.columns.functionalities .box { + width: 100%; + } + + section.frontpage.functionalities .icon img { + max-width: 25vw; + margin: 2vw; + } + + section.frontpage.functionalities .content { + width: 70vw; + } + + .frontpage-header p { + font-size: inherit; + text-align: center; + } + + .frontpage-header { + flex-direction: column-reverse; + margin: 0; + } + + .frontpage-header img { + width: 60%; + max-height: 45vh; + margin: 0 auto; + } + + .whats-new { Review comment: Prefix with `.frontpage`? ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -1，212 +1，200 @@ -header.frontpage { - font-size: 1.5rem; - display: flex; - flex-flow: column; - align-items: center; - margin: 0 auto; - max-width: 60rem; -} +/* common css for sections */ -header.frontpage h1 { font-size: 5rem; font-weight: bolder; +section.frontpage h1， +section.frontpage h2， +section.frontpage h3， +section.frontpage h4， +section.frontpage h5， +section.frontpage h6 { + font-weight: var(--heading-font-weight); color: var(--heading-font-color); - margin-top: 3rem; - text-align: center; - text-transform: none; - text-shadow: -1px -1px 1px #fff5， 1px -1px 1px #fff5， -1px 1px 1px #fff5， 1px 1px 1px #fff5; + line-height: 1.3; + margin: 1rem 0 0; + text-transform: uppercase; + word-wrap: break-word; } -header.frontpage p { hyphens: none; margin-top: 3rem; text-align: center; line-height: 1.5; color: var(--body-font-color); +section.frontpage { + color: var(--doc-font-color); + font-size: var(--doc-font-size); + line-height: var(--doc-line-height); + margin: 0 auto; + max-width: var(--frontpage-max-width); } -header.frontpage a { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a { + color: var(--link-font-color); } -header.frontpage a:hover { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a:hover { + color: var(--link_hover-font-color); } -header.frontpage a:active { color: var(--heading-font-color); +section.frontpage h1 { + width: 100%; + text-align: center; + margin-bottom: 1rem; + font-size: 2.5rem; } -.frontpage a:hover { color: var(--color-white); text-decoration: none; +section.frontpage h2 { + text-align: center; } -.frontpage a:active { - color: var(--color-white); -} +/* css for header section */ -.frontpage a.significant { margin: 1rem; padding: 0.8rem 1.5rem; background: var(--color-camel-orange); color: var(--color-white); border-radius: 8px; font-size: 1.2rem; font-weight: bold; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; +.frontpage-header { + display: flex; + flex-direction: row; + margin: 2rem 3rem 2.5rem; } -.frontpage a.significant:hover { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header img { + width: 45vw; + max-height: 50vh; } -.frontpage a.significant:active { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header .main-heading { + width: 50vw; + display: flex; + flex-direction: column; + margin-left: 2rem; } -header.frontpage svg { position: absolute; top: 4rem; left: 0; width: 100%; height: 14rem; z-index: -1; +.frontpage-header h1 { + font-size: 5vw; + color: var(--color-asf-dark-blue); + margin-bottom: 0.5rem; } -header.frontpage svg path { fill: none; animation: sparkle 2s ease alternate infinite; +.frontpage-header p { + font-size: 1.2rem; + margin-bottom: 2rem; + line-height: 1.7rem; } -header.frontpage svg path:nth-child(1) { stroke: #ffebcc; stroke-width: 10; stroke-opacity: 0.9; +a.button-dark， +.frontpage a.button-dark， +.frontpage a.button-dark:hover { + white-space: nowrap; + padding: 0.7rem 1rem; + background-color: var(--color-camel-orange); + color: white; + font-weight: bold; + margin-right: 0.5rem; + border-radius: 3rem; } -header.frontpage svg path:nth-child(2) { stroke: #911408; stroke-width: 10; stroke-opacity: 0.3; animation-delay: -1s; +.button-light { + padding: 0.7rem 1rem; + border: 1px solid var(--color-gray-70); + color: var(--color-gray-70); + font-weight: bold; + border-radius: 3rem; + white-space: nowrap; } -header.frontpage svg path:nth-child(3) { - stroke: #f1b35b; - stroke-width: 15; - stroke-opacity: 0.6; - animation-delay: -3.5s; -} +/* css for blog section */ -header.frontpage svg path:nth-child(4) { stroke: #f28a40; stroke-width: 5; stroke-opacity: 0.4; animation-delay: -3s; +.whats-new { + padding: 0.2rem 0; + width: 20%; + text-align: center; + margin-left: 3rem; + background-color: #f5f5f5; + border-radius: 1rem 1rem 0 0; } -header.frontpage svg path:nth-child(5) { stroke: #ee6d11; stroke-width: 5; stroke-opacity: 0.6; animation-delay: -6s; +.whats-new h2 { Review comment: Prefix with `.frontpage`? ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -1，212 +1，200 @@ -header.frontpage { - font-size: 1.5rem; - display: flex; - flex-flow: column; - align-items: center; - margin: 0 auto; - max-width: 60rem; -} +/* common css for sections */ -header.frontpage h1 { font-size: 5rem; font-weight: bolder; +section.frontpage h1， +section.frontpage h2， +section.frontpage h3， +section.frontpage h4， +section.frontpage h5， +section.frontpage h6 { + font-weight: var(--heading-font-weight); color: var(--heading-font-color); - margin-top: 3rem; - text-align: center; - text-transform: none; - text-shadow: -1px -1px 1px #fff5， 1px -1px 1px #fff5， -1px 1px 1px #fff5， 1px 1px 1px #fff5; + line-height: 1.3; + margin: 1rem 0 0; + text-transform: uppercase; + word-wrap: break-word; } -header.frontpage p { hyphens: none; margin-top: 3rem; text-align: center; line-height: 1.5; color: var(--body-font-color); +section.frontpage { + color: var(--doc-font-color); + font-size: var(--doc-font-size); + line-height: var(--doc-line-height); + margin: 0 auto; + max-width: var(--frontpage-max-width); } -header.frontpage a { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a { + color: var(--link-font-color); } -header.frontpage a:hover { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a:hover { + color: var(--link_hover-font-color); } -header.frontpage a:active { color: var(--heading-font-color); +section.frontpage h1 { + width: 100%; + text-align: center; + margin-bottom: 1rem; + font-size: 2.5rem; } -.frontpage a:hover { color: var(--color-white); text-decoration: none; +section.frontpage h2 { + text-align: center; } -.frontpage a:active { - color: var(--color-white); -} +/* css for header section */ -.frontpage a.significant { margin: 1rem; padding: 0.8rem 1.5rem; background: var(--color-camel-orange); color: var(--color-white); border-radius: 8px; font-size: 1.2rem; font-weight: bold; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; +.frontpage-header { + display: flex; + flex-direction: row; + margin: 2rem 3rem 2.5rem; } -.frontpage a.significant:hover { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header img { + width: 45vw; + max-height: 50vh; } -.frontpage a.significant:active { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header .main-heading { + width: 50vw; + display: flex; + flex-direction: column; + margin-left: 2rem; } -header.frontpage svg { position: absolute; top: 4rem; left: 0; width: 100%; height: 14rem; z-index: -1; +.frontpage-header h1 { + font-size: 5vw; + color: var(--color-asf-dark-blue); + margin-bottom: 0.5rem; } -header.frontpage svg path { fill: none; animation: sparkle 2s ease alternate infinite; +.frontpage-header p { + font-size: 1.2rem; + margin-bottom: 2rem; + line-height: 1.7rem; } -header.frontpage svg path:nth-child(1) { stroke: #ffebcc; stroke-width: 10; stroke-opacity: 0.9; +a.button-dark， +.frontpage a.button-dark， +.frontpage a.button-dark:hover { + white-space: nowrap; + padding: 0.7rem 1rem; + background-color: var(--color-camel-orange); + color: white; + font-weight: bold; + margin-right: 0.5rem; + border-radius: 3rem; } -header.frontpage svg path:nth-child(2) { stroke: #911408; stroke-width: 10; stroke-opacity: 0.3; animation-delay: -1s; +.button-light { + padding: 0.7rem 1rem; + border: 1px solid var(--color-gray-70); + color: var(--color-gray-70); + font-weight: bold; + border-radius: 3rem; + white-space: nowrap; } -header.frontpage svg path:nth-child(3) { - stroke: #f1b35b; - stroke-width: 15; - stroke-opacity: 0.6; - animation-delay: -3.5s; -} +/* css for blog section */ -header.frontpage svg path:nth-child(4) { stroke: #f28a40; stroke-width: 5; stroke-opacity: 0.4; animation-delay: -3s; +.whats-new { + padding: 0.2rem 0; + width: 20%; + text-align: center; + margin-left: 3rem; + background-color: #f5f5f5; Review comment: Use a variable here. ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -1，212 +1，200 @@ -header.frontpage { - font-size: 1.5rem; - display: flex; - flex-flow: column; - align-items: center; - margin: 0 auto; - max-width: 60rem; -} +/* common css for sections */ -header.frontpage h1 { font-size: 5rem; font-weight: bolder; +section.frontpage h1， +section.frontpage h2， +section.frontpage h3， +section.frontpage h4， +section.frontpage h5， +section.frontpage h6 { + font-weight: var(--heading-font-weight); color: var(--heading-font-color); - margin-top: 3rem; - text-align: center; - text-transform: none; - text-shadow: -1px -1px 1px #fff5， 1px -1px 1px #fff5， -1px 1px 1px #fff5， 1px 1px 1px #fff5; + line-height: 1.3; + margin: 1rem 0 0; + text-transform: uppercase; + word-wrap: break-word; } -header.frontpage p { hyphens: none; margin-top: 3rem; text-align: center; line-height: 1.5; color: var(--body-font-color); +section.frontpage { + color: var(--doc-font-color); + font-size: var(--doc-font-size); + line-height: var(--doc-line-height); + margin: 0 auto; + max-width: var(--frontpage-max-width); } -header.frontpage a { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a { + color: var(--link-font-color); } -header.frontpage a:hover { color: var(--heading-font-color); text-decoration: underline; +section.frontpage a:hover { + color: var(--link_hover-font-color); } -header.frontpage a:active { color: var(--heading-font-color); +section.frontpage h1 { + width: 100%; + text-align: center; + margin-bottom: 1rem; + font-size: 2.5rem; } -.frontpage a:hover { color: var(--color-white); text-decoration: none; +section.frontpage h2 { + text-align: center; } -.frontpage a:active { - color: var(--color-white); -} +/* css for header section */ -.frontpage a.significant { margin: 1rem; padding: 0.8rem 1.5rem; background: var(--color-camel-orange); color: var(--color-white); border-radius: 8px; font-size: 1.2rem; font-weight: bold; outline: none; display: inline-block; box-shadow: 0 4px #8e480b; +.frontpage-header { + display: flex; + flex-direction: row; + margin: 2rem 3rem 2.5rem; } -.frontpage a.significant:hover { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header img { + width: 45vw; + max-height: 50vh; } -.frontpage a.significant:active { color: var(--color-white); box-shadow: 0 3px #8e480b; transform: translateY(2px); +.frontpage-header .main-heading { + width: 50vw; + display: flex; + flex-direction: column; + margin-left: 2rem; } -header.frontpage svg { position: absolute; top: 4rem; left: 0; width: 100%; height: 14rem; z-index: -1; +.frontpage-header h1 { + font-size: 5vw; + color: var(--color-asf-dark-blue); + margin-bottom: 0.5rem; } -header.frontpage svg path { fill: none; animation: sparkle 2s ease alternate infinite; +.frontpage-header p { + font-size: 1.2rem; + margin-bottom: 2rem; + line-height: 1.7rem; } -header.frontpage svg path:nth-child(1) { stroke: #ffebcc; stroke-width: 10; stroke-opacity: 0.9; +a.button-dark， +.frontpage a.button-dark， +.frontpage a.button-dark:hover { + white-space: nowrap; + padding: 0.7rem 1rem; + background-color: var(--color-camel-orange); + color: white; + font-weight: bold; + margin-right: 0.5rem; + border-radius: 3rem; } -header.frontpage svg path:nth-child(2) { stroke: #911408; stroke-width: 10; stroke-opacity: 0.3; animation-delay: -1s; +.button-light { + padding: 0.7rem 1rem; + border: 1px solid var(--color-gray-70); + color: var(--color-gray-70); + font-weight: bold; + border-radius: 3rem; + white-space: nowrap; } -header.frontpage svg path:nth-child(3) { - stroke: #f1b35b; - stroke-width: 15; - stroke-opacity: 0.6; - animation-delay: -3.5s; -} +/* css for blog section */ -header.frontpage svg path:nth-child(4) { stroke: #f28a40; stroke-width: 5; stroke-opacity: 0.4; animation-delay: -3s; +.whats-new { + padding: 0.2rem 0; + width: 20%; + text-align: center; + margin-left: 3rem; + background-color: #f5f5f5; + border-radius: 1rem 1rem 0 0; } -header.frontpage svg path:nth-child(5) { stroke: #ee6d11; stroke-width: 5; stroke-opacity: 0.6; animation-delay: -6s; +.whats-new h2 { + margin-bottom: 0.5rem; } -@keyframes sparkle { 0% { - stroke-opacity: 0.2; - } - 100% { - stroke-opacity: 0.6; - } +section.frontpage.columns.blog-posts { + margin: 0; + display: flex; + flex-direction: row; + padding: 1rem 1rem 1rem 3rem; + max-width: none; + border-top: none; + background-color: var(--color-smoke-50); } -section.frontpage { color: var(--doc-font-color); font-size: var(--doc-font-size); line-height: var(--doc-line-height); margin: 0 auto; margin-top: 4rem; max-width: var(--frontpage-max-width); +/* common css for columns section */ + +section.frontpage.columns.functionalities p， +.project .content p { + margin-bottom: 1.5rem; } -section.frontpage.columns， section.frontpage.projects， -section.frontpage.apache { +section.frontpage.apache， +section.frontpage.functionalities { display: flex; flex-wrap: wrap; border-top: 1px solid var(--color-smoke-50); padding: 2rem 1rem 1rem 1rem; } -section.frontpage.projects .section { width: calc(33% - 3rem); padding: 1%; margin: 1.5rem; +section.frontpage.columns.functionalities { + border: none; } -section.frontpage h1， -section.frontpage h2， -section.frontpage h3， -section.frontpage h4， -section.frontpage h5， -section.frontpage h6 { font-weight: var(--heading-font-weight); color: var(--heading-font-color); line-height: 1.3; margin: 1rem 0 0; text-transform: uppercase; word-wrap: break-word; +section.frontpage.columns.functionalities h2， +.project .content h2， +.project .content p { Review comment: Prefix with `.frontpage`? ########## File path: layouts/index.html ########## @@ -1，18 +1，48 @@ {{ partial "header.html" . }} -<header class="frontpage"> <h1>🚀 Camel 3.4 is here! <wbr><a href="blog/2020/06/camel34-whatsnew/">What's new?</a></h1> <svg viewBox="0 0 500 70" preserveAspectRatio="none"> <path d="M -10，25 C 130，125 330，0 510，5" /> <path d="M -10，20 C 130，125 330，0 510，2" /> <path d="M -10，15 C 150，115 350，0 510，15" /> <path d="M -10，11 C 130，125 330，0 510，20" /> <path d="M -10，5 C 130，125 330，0 510，25" /> </svg> <p>Camel is an <mark>open source integration framework</mark> that empowers you to quickly and easily integrate various systems consuming or producing data. </p> <a class="significant" href="/manual/latest/getting-started.html">Get started</a> -</header> +<div class="frontpage-header"> + <div class="main-heading"> + <h1>Apache Camel</h1> + <p> + Camel is an Open Source integration framework that empowers you + to quickly and easily integrate various systems consuming or producing data. + </p> + <p> + <a class="button-dark" href="/manual/latest/getting-started.html">Get Started</a> <a class="button-light" href="/manual/latest/faq/what-is-camel.html">What is Camel?</a> + </p> + </div> + <img src="./img/camel-gears.svg" /> +</div> + +<div class="whats-new"> + <h2>What's New?</h2> +</div> + +<section class="frontpage columns blog-posts"> + + with .Site.GetPage "taxonomy" "releases" + range .Pages | first 3 + +<div class="blog-post"> Review comment: I'd use `<ol>` and `<li>` for each blog post， this helps screen readers. ########## File path: layouts/index.html ########## @@ -1，18 +1，48 @@ {{ partial "header.html" . }} -<header class="frontpage"> <h1>🚀 Camel 3.4 is here! <wbr><a href="blog/2020/06/camel34-whatsnew/">What's new?</a></h1> <svg viewBox="0 0 500 70" preserveAspectRatio="none"> <path d="M -10，25 C 130，125 330，0 510，5" /> <path d="M -10，20 C 130，125 330，0 510，2" /> <path d="M -10，15 C 150，115 350，0 510，15" /> <path d="M -10，11 C 130，125 330，0 510，20" /> <path d="M -10，5 C 130，125 330，0 510，25" /> </svg> <p>Camel is an <mark>open source integration framework</mark> that empowers you to quickly and easily integrate various systems consuming or producing data. </p> <a class="significant" href="/manual/latest/getting-started.html">Get started</a> -</header> +<div class="frontpage-header"> + <div class="main-heading"> + <h1>Apache Camel</h1> + <p> + Camel is an Open Source integration framework that empowers you + to quickly and easily integrate various systems consuming or producing data. + </p> + <p> + <a class="button-dark" href="/manual/latest/getting-started.html">Get Started</a> <a class="button-light" href="/manual/latest/faq/what-is-camel.html">What is Camel?</a> + </p> + </div> + <img src="./img/camel-gears.svg" /> +</div> + +<div class="whats-new"> + <h2>What's New?</h2> +</div> + +<section class="frontpage columns blog-posts"> + + with .Site.GetPage "taxonomy" "releases" + range .Pages | first 3 Review comment: Do you think we could fit more than 3， perhaps by reducing the font size of the date presented? It's quite large and probably not the more important than other text. ########## File path: layouts/index.html ########## @@ -1，18 +1，48 @@ {{ partial "header.html" . }} -<header class="frontpage"> <h1>🚀 Camel 3.4 is here! <wbr><a href="blog/2020/06/camel34-whatsnew/">What's new?</a></h1> <svg viewBox="0 0 500 70" preserveAspectRatio="none"> <path d="M -10，25 C 130，125 330，0 510，5" /> <path d="M -10，20 C 130，125 330，0 510，2" /> <path d="M -10，15 C 150，115 350，0 510，15" /> <path d="M -10，11 C 130，125 330，0 510，20" /> <path d="M -10，5 C 130，125 330，0 510，25" /> </svg> <p>Camel is an <mark>open source integration framework</mark> that empowers you to quickly and easily integrate various systems consuming or producing data. </p> <a class="significant" href="/manual/latest/getting-started.html">Get started</a> -</header> +<div class="frontpage-header"> + <div class="main-heading"> + <h1>Apache Camel</h1> + <p> + Camel is an Open Source integration framework that empowers you + to quickly and easily integrate various systems consuming or producing data. + </p> + <p> + <a class="button-dark" href="/manual/latest/getting-started.html">Get Started</a> <a class="button-light" href="/manual/latest/faq/what-is-camel.html">What is Camel?</a> + </p> + </div> + <img src="./img/camel-gears.svg" /> +</div> + +<div class="whats-new"> + <h2>What's New?</h2> +</div> + +<section class="frontpage columns blog-posts"> + + with .Site.GetPage "taxonomy" "releases" Review comment: Let's use all blog posts， rather than just releases. We can feature releases on the Downloads page. ########## File path: layouts/index.html ########## @@ -1，18 +1，48 @@ {{ partial "header.html" . }} -<header class="frontpage"> <h1>🚀 Camel 3.4 is here! <wbr><a href="blog/2020/06/camel34-whatsnew/">What's new?</a></h1> <svg viewBox="0 0 500 70" preserveAspectRatio="none"> <path d="M -10，25 C 130，125 330，0 510，5" /> <path d="M -10，20 C 130，125 330，0 510，2" /> <path d="M -10，15 C 150，115 350，0 510，15" /> <path d="M -10，11 C 130，125 330，0 510，20" /> <path d="M -10，5 C 130，125 330，0 510，25" /> </svg> <p>Camel is an <mark>open source integration framework</mark> that empowers you to quickly and easily integrate various systems consuming or producing data. </p> <a class="significant" href="/manual/latest/getting-started.html">Get started</a> -</header> +<div class="frontpage-header"> + <div class="main-heading"> + <h1>Apache Camel</h1> + <p> + Camel is an Open Source integration framework that empowers you + to quickly and easily integrate various systems consuming or producing data. + </p> + <p> + <a class="button-dark" href="/manual/latest/getting-started.html">Get Started</a> <a class="button-light" href="/manual/latest/faq/what-is-camel.html">What is Camel?</a> + </p> + </div> + <img src="./img/camel-gears.svg" /> +</div> + +<div class="whats-new"> + <h2>What's New?</h2> +</div> + +<section class="frontpage columns blog-posts"> + + with .Site.GetPage "taxonomy" "releases" + range .Pages | first 3 + +<div class="blog-post"> + <div class="date"> + <div class="day"> + {{ dateFormat "2" .PublishDate}} + </div> + <div class="month"> + {{ dateFormat "Jan" .PublishDate}} + {{ dateFormat "2006" .PublishDate}} + </div> + </div> Review comment: Use semantic HTML here， [`<time>`] ( https://developer.mozilla.org/en-US/docs/Web/HTML/Element/time ) would be appropriate I think. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 09/Aug/20 13:15 aashnajena commented on a change in pull request #442: URL: https://github.com/apache/camel-website/pull/442#discussion_r467582562 ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -244，18 +222，120 @@ section.frontpage.columns .box .feature-icon { } .split img { - max-width: 70%; display: block; margin: auto; } section.frontpage.columns .box { + .frontpage-header .main-heading， + section.frontpage.columns.functionalities， + section.frontpage.columns.projects， + section.frontpage.apache， + section.frontpage.blog-posts .blog-post { + width: 90%; + margin: 0 auto; + } + + section.frontpage.columns.blog-posts { + flex-direction: column; + } + + section.frontpage.blog-posts .blog-post .date， + section.frontpage.projects .project .icon { + min-width: 25%; + } + + section.frontpage.projects .project， + section.frontpage.columns.functionalities .box { + width: 100%; + } + + section.frontpage.functionalities .icon img { + max-width: 25vw; + margin: 2vw; + } + + section.frontpage.functionalities .content { + width: 70vw; + } + + .frontpage-header p { + font-size: inherit; + text-align: center; + } + + .frontpage-header { + flex-direction: column-reverse; Review comment: > Perhaps: > > To make the "Apache Camel" above the image， since currently image doesn't really depict what Camel is? I completely understand your point， but between 1 & 2， I think 2 looks aesthetically better than 1. What do you think? ![image](https://user-images.githubusercontent.com/32356795/89732937-ab657700-da6f-11ea-81c5-f7705d0cef6e.png) ![image](https://user-images.githubusercontent.com/32356795/89733016-3fcfd980-da70-11ea-9108-75fca6ee7bb0.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 09/Aug/20 13:15 aashnajena commented on a change in pull request #442: URL: https://github.com/apache/camel-website/pull/442#discussion_r467582562 ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -244，18 +222，120 @@ section.frontpage.columns .box .feature-icon { } .split img { - max-width: 70%; display: block; margin: auto; } section.frontpage.columns .box { + .frontpage-header .main-heading， + section.frontpage.columns.functionalities， + section.frontpage.columns.projects， + section.frontpage.apache， + section.frontpage.blog-posts .blog-post { + width: 90%; + margin: 0 auto; + } + + section.frontpage.columns.blog-posts { + flex-direction: column; + } + + section.frontpage.blog-posts .blog-post .date， + section.frontpage.projects .project .icon { + min-width: 25%; + } + + section.frontpage.projects .project， + section.frontpage.columns.functionalities .box { + width: 100%; + } + + section.frontpage.functionalities .icon img { + max-width: 25vw; + margin: 2vw; + } + + section.frontpage.functionalities .content { + width: 70vw; + } + + .frontpage-header p { + font-size: inherit; + text-align: center; + } + + .frontpage-header { + flex-direction: column-reverse; Review comment: > Perhaps: > > To make the "Apache Camel" above the image， since currently image doesn't really depict what Camel is? I completely understand your point， but between 1 & 2， I think 2 looks aesthetically better than 1. What do you think? ! [image] ( https://user-images.githubusercontent.com/32356795/89732937-ab657700-da6f-11ea-81c5-f7705d0cef6e.png ) ! [image] ( https://user-images.githubusercontent.com/32356795/89733016-3fcfd980-da70-11ea-9108-75fca6ee7bb0.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 09/Aug/20 13:21 aashnajena commented on a change in pull request #442: URL: https://github.com/apache/camel-website/pull/442#discussion_r467583251 ########## File path: layouts/index.html ########## @@ -1，18 +1，48 @@ {{ partial "header.html" . }} -<header class="frontpage"> <h1>🚀 Camel 3.4 is here! <wbr><a href="blog/2020/06/camel34-whatsnew/">What's new?</a></h1> <svg viewBox="0 0 500 70" preserveAspectRatio="none"> <path d="M -10，25 C 130，125 330，0 510，5" /> <path d="M -10，20 C 130，125 330，0 510，2" /> <path d="M -10，15 C 150，115 350，0 510，15" /> <path d="M -10，11 C 130，125 330，0 510，20" /> <path d="M -10，5 C 130，125 330，0 510，25" /> </svg> <p>Camel is an <mark>open source integration framework</mark> that empowers you to quickly and easily integrate various systems consuming or producing data. </p> <a class="significant" href="/manual/latest/getting-started.html">Get started</a> -</header> +<div class="frontpage-header"> + <div class="main-heading"> + <h1>Apache Camel</h1> + <p> + Camel is an Open Source integration framework that empowers you + to quickly and easily integrate various systems consuming or producing data. + </p> + <p> + <a class="button-dark" href="/manual/latest/getting-started.html">Get Started</a> <a class="button-light" href="/manual/latest/faq/what-is-camel.html">What is Camel?</a> + </p> + </div> + <img src="./img/camel-gears.svg" /> +</div> + +<div class="whats-new"> + <h2>What's New?</h2> +</div> + +<section class="frontpage columns blog-posts"> + +with .Site.GetPage "taxonomy" "releases" +range .Pages | first 3 Review comment: Fitting more than 3 in a row would be difficult near on small screens. We can make use of a carousel to display more blogs. We can display 3 by default and have arrows on both sides， allowing the user to slide and see more blogs. What do you think about this? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 09/Aug/20 13:21 aashnajena commented on a change in pull request #442: URL: https://github.com/apache/camel-website/pull/442#discussion_r467583251 ########## File path: layouts/index.html ########## @@ -1，18 +1，48 @@ {{ partial "header.html" . }} -<header class="frontpage"> <h1>🚀 Camel 3.4 is here! <wbr><a href="blog/2020/06/camel34-whatsnew/">What's new?</a></h1> <svg viewBox="0 0 500 70" preserveAspectRatio="none"> <path d="M -10，25 C 130，125 330，0 510，5" /> <path d="M -10，20 C 130，125 330，0 510，2" /> <path d="M -10，15 C 150，115 350，0 510，15" /> <path d="M -10，11 C 130，125 330，0 510，20" /> <path d="M -10，5 C 130，125 330，0 510，25" /> </svg> <p>Camel is an <mark>open source integration framework</mark> that empowers you to quickly and easily integrate various systems consuming or producing data. </p> <a class="significant" href="/manual/latest/getting-started.html">Get started</a> -</header> +<div class="frontpage-header"> + <div class="main-heading"> + <h1>Apache Camel</h1> + <p> + Camel is an Open Source integration framework that empowers you + to quickly and easily integrate various systems consuming or producing data. + </p> + <p> + <a class="button-dark" href="/manual/latest/getting-started.html">Get Started</a> <a class="button-light" href="/manual/latest/faq/what-is-camel.html">What is Camel?</a> + </p> + </div> + <img src="./img/camel-gears.svg" /> +</div> + +<div class="whats-new"> + <h2>What's New?</h2> +</div> + +<section class="frontpage columns blog-posts"> + + with .Site.GetPage "taxonomy" "releases" + range .Pages | first 3 Review comment: Fitting more than 3 in a row would be difficult near on small screens. We can make use of a carousel to display more blogs. We can display 3 by default and have arrows on both sides， allowing the user to slide and see more blogs. What do you think about this? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 09/Aug/20 14:16 aashnajena commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-671057186 @zregvart I've made most of the changes suggested above. For the featured blogs， I've included all blogs instead of just releases. If the date seems too big in comparison to text， we could move to a layout similar to the Blog page (shown below). We can also convert this to a carousel so that we can include more blogs， plus we wouldn't have to display 3 blogs on mobile view (which takes up vertical space)， instead we can just have a carousel that user can swipe through. ![image](https://user-images.githubusercontent.com/32356795/89734189-3fd3d780-da78-11ea-8e03-1c433c29b5ce.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 09/Aug/20 14:16 aashnajena commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-671057186 @zregvart I've made most of the changes suggested above. For the featured blogs， I've included all blogs instead of just releases. If the date seems too big in comparison to text， we could move to a layout similar to the Blog page (shown below). We can also convert this to a carousel so that we can include more blogs， plus we wouldn't have to display 3 blogs on mobile view (which takes up vertical space)， instead we can just have a carousel that user can swipe through. ! [image] ( https://user-images.githubusercontent.com/32356795/89734189-3fd3d780-da78-11ea-8e03-1c433c29b5ce.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 10/Aug/20 21:13 zregvart merged pull request #442: URL: https://github.com/apache/camel-website/pull/442 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 10/Aug/20 21:13 zregvart merged pull request #442: URL: https://github.com/apache/camel-website/pull/442 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 10/Aug/20 21:13 zregvart commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-671592806 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 10/Aug/20 21:13 zregvart commented on pull request #442: URL: https://github.com/apache/camel-website/pull/442#issuecomment-671592806 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Zoran Regvart added a comment - 10/Aug/20 21:13 Thanks Aashna Jena! Show Zoran Regvart added a comment - 10/Aug/20 21:13 Thanks Aashna Jena !
CAMEL-15299,Andrea Cosentino,2020-07-14T06:51:51+0000,1594695111， where 1594695111 is the epoch,If an FTP endpoint is configured to delete or move files after successful processing， it will fail to do so in case the processing takes a long time and the FTP server closes the connection during the (successful) processing. There is no log message about that (not even on debug level).,Hide Permalink Andrea Cosentino added a comment - 14/Jul/20 06:51 Please try with a newer version， 2.17.x is really old and we won't release that branch anymore. The latest 2.x version is 2.25.1 Show Andrea Cosentino added a comment - 14/Jul/20 06:51 Please try with a newer version， 2.17.x is really old and we won't release that branch anymore. The latest 2.x version is 2.25.1 Hide Permalink Lukas Holthof added a comment - 15/Jul/20 20:48 This issue is still present in current snapshot. I will create a pull request for it. Show Lukas Holthof added a comment - 15/Jul/20 20:48 This issue is still present in current snapshot. I will create a pull request for it.
CAMEL-15298,Claus Ibsen,2020-07-16T06:48:28.553Z,1594867708.553， where 1594867708.553 is the epoch,Since updating from Camel 3.3.0 to Camel 3.4.0， the following warning is logged during start-up:WARN 15204 — [ main] o.a.c.i.e.DefaultCamelBeanPostProcessor: No CamelContext defined yet so cannot inject into bean: org.apache.camel.impl.health.DefaultHealthCheckRegistryOtherwise everything is working fine (as far as I can tell).We are using Spring Boot 2.3.1.This may have a similar cause as https://issues.apache.org/jira/browse/CAMEL-12975 had.,Hide Permalink Bogdan Ilchyshyn added a comment - 16/Jul/20 06:48 Please see camel-warning.zip for the reproducer. Show Bogdan Ilchyshyn added a comment - 16/Jul/20 06:48 Please see camel-warning.zip for the reproducer. Hide Permalink Mark added a comment - 17/Aug/20 17:04 I had hoped this issue was the reason I lost the Camel tab in Hawtio after migrating from Camel 2.5.1 to 3.4.2. Using Spring Boot 2.3.1. After moving to the new Camel 3.4.3 I am no longer seeing the WARN message listed here， however I still don't see the Camel tab in Hawtio. Still searching for other reports online... Show Mark added a comment - 17/Aug/20 17:04 I had hoped this issue was the reason I lost the Camel tab in Hawtio after migrating from Camel 2.5.1 to 3.4.2. Using Spring Boot 2.3.1. After moving to the new Camel 3.4.3 I am no longer seeing the WARN message listed here， however I still don't see the Camel tab in Hawtio. Still searching for other reports online... Hide Permalink Claus Ibsen added a comment - 17/Aug/20 19:02 You need to enable JMX， which you can do by adding camel-management to the classpath Show Claus Ibsen added a comment - 17/Aug/20 19:02 You need to enable JMX， which you can do by adding camel-management to the classpath Hide Permalink Mark added a comment - 17/Aug/20 20:22 Mange tak! Show Mark added a comment - 17/Aug/20 20:22 Mange tak!
CAMEL-15297,Andrea Cosentino,2020-08-04T18:33:02.681Z,1596551582.681， where 1596551582.681 is the epoch,PostgreSQL allows you make database name with "-" sign f.e. "my-database". According to regexes in https://github.com/apache/camel/blob/master/components/camel-pgevent/src/main/java/org/apache/camel/component/pgevent/PgEventEndpoint.java is impossible to use such names in camel-pgevent components. Now it throws IllegalArgumentException.,Hide Permalink Chandrakant Hardahe added a comment - 13/Jul/20 12:52 Hi Daniel Mernov， Thanks for reporting this， I'm working on this Show Chandrakant Hardahe added a comment - 13/Jul/20 12:52 Hi Daniel Mernov ， Thanks for reporting this， I'm working on this Hide Permalink Chandrakant Hardahe added a comment - 14/Jul/20 16:30 Hi Daniel Mernov， is a database name with hyphen valid in PostgreSQL? Would you mind pointing a doc for reference? Show Chandrakant Hardahe added a comment - 14/Jul/20 16:30 Hi Daniel Mernov ， is a database name with hyphen valid in PostgreSQL? Would you mind pointing a doc for reference? Hide Permalink Daniel Mernov added a comment - 16/Jul/20 05:49 Hi. Yeah sure. https://www.postgresql.org/docs/12/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS According to 4.1.1 pg allows you make names with letters， numbers and specsymbols $ -. But， if you use double quotes your name can contains any character. Show Daniel Mernov added a comment - 16/Jul/20 05:49 Hi. Yeah sure. https://www.postgresql.org/docs/12/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS According to 4.1.1 pg allows you make names with letters， numbers and specsymbols $ -. But， if you use double quotes your name can contains any character. Hide Permalink Zineb BENDHIBA added a comment - 04/Aug/20 15:21 Daniel Mernov : when I read it， it is not the "-" but the underscore "_". (which works fine by the way) SQL identifiers and key words must begin with a letter (az， but also letters with diacritical marks and non-Latin letters) or an underscore (_). Subsequent characters in an identifier or key word can be letters， underscores， digits (09)， or dollar signs ($). Can you point the sentence where it is mentioned in the doc ? Show Zineb BENDHIBA added a comment - 04/Aug/20 15:21 Daniel Mernov : when I read it， it is not the "-" but the underscore "_". (which works fine by the way) SQL identifiers and key words must begin with a letter ( a z ， but also letters with diacritical marks and non-Latin letters) or an underscore ( _ ). Subsequent characters in an identifier or key word can be letters， underscores， digits ( 0 9 )， or dollar signs ( $ ). Can you point the sentence where it is mentioned in the doc ? Hide Permalink Daniel Mernov added a comment - 04/Aug/20 18:34 Sure: Quoted identifiers can containt anycharacter except zero code character Show Daniel Mernov added a comment - 04/Aug/20 18:34 Sure: Quoted identifiers can containt anycharacter except zero code character Hide Permalink Zineb BENDHIBA added a comment - 05/Aug/20 07:57 Ok I'm working on that issue Show Zineb BENDHIBA added a comment - 05/Aug/20 07:57 Ok I'm working on that issue Hide Permalink Zineb BENDHIBA added a comment - 05/Aug/20 15:29 This is the PR https://github.com/apache/camel/pull/4073 Show Zineb BENDHIBA added a comment - 05/Aug/20 15:29 This is the PR https://github.com/apache/camel/pull/4073 Hide Permalink Andrea Cosentino added a comment - 05/Aug/20 16:10 I think this is a bug， so we need to backport to 3.4.x too Show Andrea Cosentino added a comment - 05/Aug/20 16:10 I think this is a bug， so we need to backport to 3.4.x too Hide Permalink Daniel Mernov added a comment - 06/Aug/20 07:11 Many thanks! Show Daniel Mernov added a comment - 06/Aug/20 07:11 Many thanks!
CAMEL-15296,Unassigned,2020-07-20T00:09:23.601Z,1595189363.601， where 1595189363.601 is the epoch,Create a page with links to all documentation pages on the website. Automate this process and organise the links category wise.,Hide Permalink Aashna Jena added a comment - 17/Jul/20 20:48 Zoran Regvart what would be the best way to approach this? Can we possibly convert our existing sitemap into a page or use sitemap.xml to generate a HTML page? Apparently we can override the Hugo Sitemap template. This could be useful for us. Show Aashna Jena added a comment - 17/Jul/20 20:48 Zoran Regvart what would be the best way to approach this? Can we possibly convert our existing sitemap into a page or use sitemap.xml to generate a HTML page? Apparently we can override the Hugo Sitemap template . This could be useful for us. Hide Permalink Aemie added a comment - 18/Jul/20 17:42 Aashna Jena， Zoran Regvart we could use that or as stated in one call we can make use of the sitemap present within the documentation folder. We could make use of gulp to automate the task and use regex as well. I will just run through the regex as I tried working with a piece of string and with regex， it works out. Let's say we have a string s='<url><loc>hey-camel.html</loc></url><url><loc>hey-spring.html</loc></url>' and matchesOfLoc=/<loc>(.?)<\/loc>/g. When we run *listOfLoc=s.match(matchesOfLoc)， you get a list of all the loc tag. With this list， we can run a loop and extract the filename for each. Here， we have our list as ["<loc>hey-camel.html</loc>"， "<loc>hey-spring.html</loc>"]. I will walk you through to extract the name for a particular element of the list. fileName = matchesOfLoc.exec(listOfLoc[1]) title = fileName[1].replace(/^.\\\//， '')* name = title.replace('.html'， '') Here， your output would be hey-spring. With this manner， we could extract the names of each file through the sitemap itself. Show Aemie added a comment - 18/Jul/20 17:42 Aashna Jena ， Zoran Regvart we could use that or as stated in one call we can make use of the sitemap present within the documentation folder. We could make use of gulp to automate the task and use regex as well. I will just run through the regex as I tried working with a piece of string and with regex， it works out. Let's say we have a string s='<url><loc>hey-camel.html</loc></url><url><loc>hey-spring.html</loc></url>' and matchesOfLoc=/<loc>(. ?)<\/loc>/g. When we run *listOfLoc=s.match(matchesOfLoc)， you get a list of all the loc tag. With this list， we can run a loop and extract the filename for each. Here， we have our list as ["<loc>hey-camel.html</loc>"， "<loc>hey-spring.html</loc>"] . I will walk you through to extract the name for a particular element of the list. fileName = matchesOfLoc.exec(listOfLoc [1] ) title = fileName [1] .replace(/^. \\\/ /， '')* name = title.replace('.html'， '') Here， your output would be hey-spring. With this manner， we could extract the names of each file through the sitemap itself. Hide Permalink Aashna Jena added a comment - 19/Jul/20 09:05 It would also be tough to get the actual titles or to organize links in a hierarchy if we extract titles from links. I was thinking of something cleaner， perhaps leveraging the site structure that Hugo provides. I'm able to build this simple sitemap for Hugo content by introducing a new HTML layout file in /layouts (see attached image) Show Aashna Jena added a comment - 19/Jul/20 09:05 It would also be tough to get the actual titles or to organize links in a hierarchy if we extract titles from links. I was thinking of something cleaner， perhaps leveraging the site structure that Hugo provides. I'm able to build this simple sitemap for Hugo content by introducing a new HTML layout file in /layouts (see attached image) Hide Permalink Aemie added a comment - 19/Jul/20 11:21 Aashna Jena Hugo's content was achievable from the camel-website repo itself. The major question was to build for the Antora pages 'cause documentation is the main reason the user comes on the website and no I don't think it's tough 'cause with regex， it is possible and easy according to me. It has been used for automating files in camel repo as well. Show Aemie added a comment - 19/Jul/20 11:21 Aashna Jena Hugo's content was achievable from the camel-website repo itself. The major question was to build for the Antora pages 'cause documentation is the main reason the user comes on the website and no I don't think it's tough 'cause with regex， it is possible and easy according to me. It has been used for automating files in camel repo as well. Hide Permalink Aashna Jena added a comment - 19/Jul/20 11:43 How exactly are sitemaps built for Antora pages? Does Antora provide any easy to use features for extracting pages and links like Hugo does? Or perhaps， I was thinking we could use use the menus that we generate for User Manual， components etc. They contain the actual title and URLs of pages， along with the intermediate hierarchy levels. I'm not denying that this can't be achieved through applying regex over sitemap files， I'm just trying to explore if there's a neater way of doing this. For example， the url for a page under faq will have "/faq/" in it， but a page under architecture does not have "/architecture/" in it. We would want to arrange our links under these sub-headings which we cannot get from current sitemaps. Another point to note is that the name of the page is not always equal to its title， which is why I want to look at alternate ways. https://camel.apache.org/manual/latest/backlogdebugger.html should have title "Backlog Debugger"， it's not very readable as one continuous word for the user. Hence， if there are alternates to using regex on URLs， I want to explore them before deciding. Show Aashna Jena added a comment - 19/Jul/20 11:43 How exactly are sitemaps built for Antora pages? Does Antora provide any easy to use features for extracting pages and links like Hugo does? Or perhaps， I was thinking we could use use the menus that we generate for User Manual， components etc. They contain the actual title and URLs of pages， along with the intermediate hierarchy levels. I'm not denying that this can't be achieved through applying regex over sitemap files， I'm just trying to explore if there's a neater way of doing this. For example， the url for a page under faq will have "/faq/" in it， but a page under architecture does not have "/architecture/" in it. We would want to arrange our links under these sub-headings which we cannot get from current sitemaps. Another point to note is that the name of the page is not always equal to its title， which is why I want to look at alternate ways. https://camel.apache.org/manual/latest/backlogdebugger.html should have title "Backlog Debugger"， it's not very readable as one continuous word for the user. Hence， if there are alternates to using regex on URLs， I want to explore them before deciding. Hide Permalink Aemie added a comment - 19/Jul/20 14:33 Aashna Jena using sitemaps was one of the options. All the antora pages are within the documentation folder itself. We could make use of the title tag for each HTML file within it. That's an easy option for me as well and the hierarchy will be well-defined itself. Show Aemie added a comment - 19/Jul/20 14:33 Aashna Jena using sitemaps was one of the options. All the antora pages are within the documentation folder itself. We could make use of the title tag for each HTML file within it. That's an easy option for me as well and the hierarchy will be well-defined itself. Hide Permalink Aashna Jena added a comment - 20/Jul/20 00:08 I used the navigation menus to generate sitemaps for user manual and components. We can easily change the layout. Here， we get the actual page titles， URLs and the links are organised in a hierarchical manner. We can make similar sitemaps for other sub-projects and include that. Show Aashna Jena added a comment - 20/Jul/20 00:08 I used the navigation menus to generate sitemaps for user manual and components. We can easily change the layout. Here， we get the actual page titles， URLs and the links are organised in a hierarchical manner. We can make similar sitemaps for other sub-projects and include that. Hide Permalink Zoran Regvart added a comment - 20/Jul/20 23:42 I don't think we want all links to be present in the sitemap. The crux of the issue is to generate a single sitemap page from two content generation systems (Hugo and Antora). I'm not 100% sure that we can auto generate 100% of the sitemap. To me it looks like we need to have information design of the website， i.e. top categories and within those few select links to the content. I think within Hugo this can be done using taxonomies. And we also need to also mix in the content from Antora. That is， we want to have a "Documentation" group with links to each component with version， so User manual (latest)， Camel Components with (latest， 3.4.x， and 2.x). Show Zoran Regvart added a comment - 20/Jul/20 23:42 I don't think we want all links to be present in the sitemap. The crux of the issue is to generate a single sitemap page from two content generation systems (Hugo and Antora). I'm not 100% sure that we can auto generate 100% of the sitemap. To me it looks like we need to have information design of the website， i.e. top categories and within those few select links to the content. I think within Hugo this can be done using taxonomies . And we also need to also mix in the content from Antora. That is， we want to have a "Documentation" group with links to each component with version， so User manual (latest)， Camel Components with (latest， 3.4.x， and 2.x). Hide Permalink Aemie added a comment - 21/Jul/20 15:13 As the Hugo template could be created using taxonomies and as stated on Github， I feel it's better to include the necessary links for the documentation within antora pages. Listing below is the structure and the important links I believe are required to be shown on the sitemap for Antora Docs. This would take approximately 1.5 pages. [[ User-Manual ]] Getting Started Resources & Guides Architecture [[ Components ]] [[ Data Formats ]] [[ EIP ]] [[ Miscellaneous Components ]] [[ Camel-k ]] Operator Traits [[ Camel Kafka Connector ]] Getting Started Connector List [[ Camel Quarkus ]] List of Camel Quarkus Extensions [[ Camel Spring Boot ]] Camel Context Starter List of Starters [[ Camel Karaf ]] Supported Components Show Aemie added a comment - 21/Jul/20 15:13 As the Hugo template could be created using taxonomies and as stated on Github， I feel it's better to include the necessary links for the documentation within antora pages. Listing below is the structure and the important links I believe are required to be shown on the sitemap for Antora Docs. This would take approximately 1.5 pages. [[ User-Manual ]] Getting Started Resources & Guides Architecture [[ Components ]] [[ Data Formats ]] [[ EIP ]] [[ Miscellaneous Components ]] [[ Camel-k ]] Operator Traits [[ Camel Kafka Connector ]] Getting Started Connector List [[ Camel Quarkus ]] List of Camel Quarkus Extensions [[ Camel Spring Boot ]] Camel Context Starter List of Starters [[ Camel Karaf ]] Supported Components Hide Permalink Zoran Regvart added a comment - 21/Jul/20 19:11 Hugo taxonomies can be applied only to Hugo generated pages. This includes only the documentation from Antora， we would be missing the blog， downloads， releases... Show Zoran Regvart added a comment - 21/Jul/20 19:11 Hugo taxonomies can be applied only to Hugo generated pages. This includes only the documentation from Antora， we would be missing the blog， downloads， releases... Hide Permalink Aemie added a comment - 21/Jul/20 19:36 Zoran Regvart I stated that the Hugo pages can be generated so as aashna already presented we can include the blogs， downloads， and apache camel releases from the Hugo side. As the Antora documentation is huge I just wanted to include specific links that's why I mentioned it separately to see if those links were sufficient enough or more had to be included. Show Aemie added a comment - 21/Jul/20 19:36 Zoran Regvart I stated that the Hugo pages can be generated so as aashna already presented we can include the blogs， downloads， and apache camel releases from the Hugo side. As the Antora documentation is huge I just wanted to include specific links that's why I mentioned it separately to see if those links were sufficient enough or more had to be included. Hide Permalink Aashna Jena added a comment - 21/Jul/20 19:37 I'm not sure if taxonomies will give us what we need. I think Hugo "Sections" is what we need. Sections will give us blog， releases， documentation， community， download， news， and security. For Antora， we can access content hierarchy wise by controlling the "level" attribute but I could only figure out a way to do that using the original repositories. For example， in the PR I put， I am declaring a sitemap page in Camel repo and providing it a layout(.hbs file) that uses content from the Camel repo. Is there a way I can access this content directly from Hugo so that I can build a combined page? We are already presenting a small list of links on the footer， which the user can use for upper-level navigation. I feel that if someone is clicking on sitemaps， they're just expecting to do a CTRL+F and search for what they want， not look through the entire page. I can definitely be wrong， but maybe we can ask some users about what they would like to see as part of sitemap? If we want to include just the 1st level of navigation， maybe we can include that in the footer itself. Show Aashna Jena added a comment - 21/Jul/20 19:37 I'm not sure if taxonomies will give us what we need. I think Hugo "Sections" is what we need. Sections will give us blog， releases， documentation， community， download， news， and security. For Antora， we can access content hierarchy wise by controlling the "level" attribute but I could only figure out a way to do that using the original repositories. For example， in the PR I put， I am declaring a sitemap page in Camel repo and providing it a layout(.hbs file) that uses content from the Camel repo. Is there a way I can access this content directly from Hugo so that I can build a combined page? We are already presenting a small list of links on the footer， which the user can use for upper-level navigation. I feel that if someone is clicking on sitemaps， they're just expecting to do a CTRL+F and search for what they want， not look through the entire page. I can definitely be wrong， but maybe we can ask some users about what they would like to see as part of sitemap? If we want to include just the 1st level of navigation， maybe we can include that in the footer itself. Hide Permalink Aashna Jena added a comment - 09/Aug/20 16:42 Zoran Regvart for the hugo pages， we can list all the sections i.e. blog (list all categories) releases community books articles mailing list support team contributing download news security about (we can remove this if not required) documentation user manual getting started components eip data formats links to all subproject documentation Do we want to include more links under each subproject documentation? If yes， what should they be? Also， are there any more things we want to list on the sitemap? Show Aashna Jena added a comment - 09/Aug/20 16:42 Zoran Regvart for the hugo pages， we can list all the sections i.e. blog (list all categories) releases community books articles mailing list support team contributing download news security about (we can remove this if not required) documentation user manual getting started components eip data formats links to all subproject documentation Do we want to include more links under each subproject documentation? If yes， what should they be? Also， are there any more things we want to list on the sitemap? Hide Permalink Aashna Jena added a comment - 14/Aug/20 21:42 Zoran Regvart does this look fine? Should we be including more links? Show Aashna Jena added a comment - 14/Aug/20 21:42 Zoran Regvart does this look fine? Should we be including more links? Hide Permalink ASF GitHub Bot added a comment - 15/Aug/20 12:46 aashnajena opened a new pull request #462: URL: https://github.com/apache/camel-website/pull/462 This PR adds the first version of sitemap for camel-website. Sitemap can be accessed from the footer. The problem with fetching links programmatically is that links like "misc" and "news" show up， even though they don't have any landing pages. We could choose to hard code all our links instead so avoid such behaviour. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 15/Aug/20 12:46 aashnajena opened a new pull request #462: URL: https://github.com/apache/camel-website/pull/462 This PR adds the first version of sitemap for camel-website. Sitemap can be accessed from the footer. The problem with fetching links programmatically is that links like "misc" and "news" show up， even though they don't have any landing pages. We could choose to hard code all our links instead so avoid such behaviour. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 17/Aug/20 17:19 AemieJ commented on pull request #462: URL: https://github.com/apache/camel-website/pull/462#issuecomment-675006219 I like the basic design layout but I just want to clarify that we are going to include more links right? 'cause almost all the links present on the sitemap are there on the footer as well. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 17/Aug/20 17:19 AemieJ commented on pull request #462: URL: https://github.com/apache/camel-website/pull/462#issuecomment-675006219 I like the basic design layout but I just want to clarify that we are going to include more links right? 'cause almost all the links present on the sitemap are there on the footer as well. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 17/Aug/20 20:05 aashnajena commented on pull request #462: URL: https://github.com/apache/camel-website/pull/462#issuecomment-675085493 Please suggest which other pages we should put on the sitemap， and I can add those.. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 17/Aug/20 20:05 aashnajena commented on pull request #462: URL: https://github.com/apache/camel-website/pull/462#issuecomment-675085493 Please suggest which other pages we should put on the sitemap， and I can add those.. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 27/Aug/20 22:33 aashnajena commented on pull request #462: URL: https://github.com/apache/camel-website/pull/462#issuecomment-682224209 I think we can merge this and improve on it later. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/Aug/20 22:33 aashnajena commented on pull request #462: URL: https://github.com/apache/camel-website/pull/462#issuecomment-682224209 I think we can merge this and improve on it later. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 28/Aug/20 01:58 AemieJ commented on pull request #462: URL: https://github.com/apache/camel-website/pull/462#issuecomment-682281465 I believe that we need certain elobaration in site map upto level 1 for the sub projects as well. 'cause if I had to comparatively look at the site map of Apple， it is quite useful as it provides me the direct information neither the navbar nor footer provides. So we could incoperare a more elobrated site map upto max two pages. However I don't mind this being merged， I can work on it as I have a few additional ideas which I would like to improve on later. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 28/Aug/20 01:58 AemieJ commented on pull request #462: URL: https://github.com/apache/camel-website/pull/462#issuecomment-682281465 I believe that we need certain elobaration in site map upto level 1 for the sub projects as well. 'cause if I had to comparatively look at the site map of Apple， it is quite useful as it provides me the direct information neither the navbar nor footer provides. So we could incoperare a more elobrated site map upto max two pages. However I don't mind this being merged， I can work on it as I have a few additional ideas which I would like to improve on later. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 24/Sep/20 19:23 zregvart commented on pull request #462: URL: https://github.com/apache/camel-website/pull/462#issuecomment-698540521 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 24/Sep/20 19:23 zregvart commented on pull request #462: URL: https://github.com/apache/camel-website/pull/462#issuecomment-698540521 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 24/Sep/20 19:23 zregvart merged pull request #462: URL: https://github.com/apache/camel-website/pull/462 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 24/Sep/20 19:23 zregvart merged pull request #462: URL: https://github.com/apache/camel-website/pull/462 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Zoran Regvart added a comment - 24/Sep/20 19:24 Thanks Aashna Jena and Aemie! Show Zoran Regvart added a comment - 24/Sep/20 19:24 Thanks Aashna Jena and Aemie ! Hide Permalink ASF GitHub Bot added a comment - 25/Sep/20 13:15 zregvart commented on pull request #462: URL: https://github.com/apache/camel-website/pull/462#issuecomment-698540521 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 25/Sep/20 13:15 zregvart commented on pull request #462: URL: https://github.com/apache/camel-website/pull/462#issuecomment-698540521 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 25/Sep/20 13:27 zregvart merged pull request #462: URL: https://github.com/apache/camel-website/pull/462 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 25/Sep/20 13:27 zregvart merged pull request #462: URL: https://github.com/apache/camel-website/pull/462 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org
CAMEL-15295,Andrea Cosentino,2020-07-30T10:18:34+0000,1596089914， where 1596089914 is the epoch,The suggested command in SNAPSHOT ARCHTYPES in does not work (tried with 3.4.0-SNAPSHOT and 3.5.0-SNAPSHOT) : mvn archetype:generate -DarchetypeGroupId=org.apache.camel.archetypes -DarchetypeArtifactId=camel-archetype-java -DarchetypeVersion=3.4.0-SNAPSHOT -DarchetypeRepository=https://repository.apache.org/content/groups/snapshots-group [INFO] ------------------------------------------------------------------------ [INFO] BUILD FAILURE [INFO] ------------------------------------------------------------------------ [INFO] Total time: 2.016 s [INFO] Finished at: 2020-07-11T13:19:43Z [INFO] ------------------------------------------------------------------------ [ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:3.1.2:generate (default-cli) on project standalone-pom: The desired archetype does not exist (org.apache.camel.archetypes:camel-archetype-java:3.4.0-SNAPSHOT) -> [Help 1] The property archetypeRepository is no longer supported by Maven 3.6.3,Hide Permalink Claus Ibsen added a comment - 30/Jul/20 10:18 Andrea Cosentino didnt you work on this today? Show Claus Ibsen added a comment - 30/Jul/20 10:18 Andrea Cosentino didnt you work on this today? Hide Permalink Andrea Cosentino added a comment - 30/Jul/20 10:21 yeah a bit Show Andrea Cosentino added a comment - 30/Jul/20 10:21 yeah a bit
CAMEL-15294,Unassigned,2020-07-10T15:30:52+0000,1594380652， where 1594380652 is the epoch,Guillaume Nodet I noticed that there are some failures running tests on camel-reactive-streams:Failure in JUnit mode for class org.apache.camel.component.reactive.streams.RequestRefillTest: could not create/run JUnit test suite: Cannot find JUnit method class junit.framework.TestSuite$1.warning at org.testng.junit.JUnitTestRunner.runFailed(JUnitTestRunner.java:237) at org.testng.junit.JUnitTestRunner.start(JUnitTestRunner.java:230) at org.testng.junit.JUnitTestRunner.run(JUnitTestRunner.java:211) at org.testng.TestRunner$1.run(TestRunner.java:659) at org.testng.TestRunner.runWorkers(TestRunner.java:1147) at org.testng.TestRunner.privateRunJUnit(TestRunner.java:690) at org.testng.TestRunner.run(TestRunner.java:597) at org.testng.SuiteRunner.runTest(SuiteRunner.java:317) at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:312) at org.testng.SuiteRunner.privateRun(SuiteRunner.java:274) at org.testng.SuiteRunner.run(SuiteRunner.java:223) at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52) at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86) at org.testng.TestNG.runSuitesSequentially(TestNG.java:1039) at org.testng.TestNG.runSuitesLocally(TestNG.java:964) at org.testng.TestNG.run(TestNG.java:900) at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:135) at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.executeMulti(TestNGDirectoryTestSuite.java:198) at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.execute(TestNGDirectoryTestSuite.java:94) at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:146) at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:377) at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:138) at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:465) at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:451)[WARNING] Tests run: 128， Failures: 0， Errors: 0， Skipped: 70， Time elapsed: 60.345 s - in TestSuite[INFO] [INFO] Results:[INFO] [WARNING] Tests run: 128， Failures: 0， Errors: 0， Skipped: 70Don't know it is related to the migration to jeunit5,There are no comments yet on this issue.
CAMEL-15293,Jiri Ondrusek,2020-07-23T09:12:15+0000,1595481135， where 1595481135 is the epoch,There is a new version of datastax driver available (currently 4.7.2) - https://docs.datastax.com/en/developer/java-driver/4.7/Upgrade of driver will among others allow use of cassandra quarkus extension for camel-quarkus (#1355),Hide Permalink Jiri Ondrusek added a comment - 23/Jul/20 09:12 Needs also change in camel-karaf: https://github.com/apache/camel-karaf/pull/12 Show Jiri Ondrusek added a comment - 23/Jul/20 09:12 Needs also change in camel-karaf: https://github.com/apache/camel-karaf/pull/12
CAMEL-15292,Andrea Cosentino,2020-07-10T09:27:41+0000,1594358861， where 1594358861 is the epoch,We want to use Camel's AWS 2 S3 component on the consumer's side， in order to download files that were previously uploaded on S3 using server-side encryption with customer-provided keys (SSE-C). At the moment this is not possible and there is no URI OPTION available for passing the customerKeyId on the consumer's side.Thanks in advance，Dimitris Orfanoudakis,There are no comments yet on this issue.
CAMEL-15291,Unassigned,2020-07-11T08:06:51+0000,1594440411， where 1594440411 is the epoch,As discussed in the design of the footer in CAMEL-15185， it is a good practice to include the privacy policy of the website along with the sitemaps. This issue will deal with the creation of a privacy page based on the ASF one.,Hide Permalink ASF GitHub Bot added a comment - 11/Jul/20 08:06 AemieJ opened a new pull request #427: URL: https://github.com/apache/camel-website/pull/427 Creation of the privacy policy page based on the [ASF](https://www.apache.org/foundation/policies/privacy.html) one (excluding the content of Google Analytics). This page is not directly accessible from any link right now but can be accessed under `/privacy-policy`. The privacy policy after the merge will be included within the footer links as discussed in CAMEL-15185(https://issues.apache.org/jira/browse/CAMEL-15185?focusedCommentId=17137897&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17137897) on Jira based on the new footer design. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 11/Jul/20 08:06 AemieJ opened a new pull request #427: URL: https://github.com/apache/camel-website/pull/427 Creation of the privacy policy page based on the [ASF] ( https://www.apache.org/foundation/policies/privacy.html ) one (excluding the content of Google Analytics). This page is not directly accessible from any link right now but can be accessed under `/privacy-policy`. The privacy policy after the merge will be included within the footer links as discussed in CAMEL-15185 ( https://issues.apache.org/jira/browse/CAMEL-15185?focusedCommentId=17137897&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17137897 ) on Jira based on the new footer design. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 11/Jul/20 18:37 aashnajena commented on pull request #427: URL: https://github.com/apache/camel-website/pull/427#issuecomment-657109096 I think it would be better to have the content in the markdown file (would be easy to edit in future). The contents are simple enough to be rendered using the default layout. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 11/Jul/20 18:37 aashnajena commented on pull request #427: URL: https://github.com/apache/camel-website/pull/427#issuecomment-657109096 I think it would be better to have the content in the markdown file (would be easy to edit in future). The contents are simple enough to be rendered using the default layout. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 13/Jul/20 12:03 aashnajena commented on pull request #427: URL: https://github.com/apache/camel-website/pull/427#issuecomment-657520248 Privacy policy layout file is same as _default/single.html. If you delete your layout file， Hugo should automatically pick up the layout from _default/single.html ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 13/Jul/20 12:03 aashnajena commented on pull request #427: URL: https://github.com/apache/camel-website/pull/427#issuecomment-657520248 Privacy policy layout file is same as _default/single.html. If you delete your layout file， Hugo should automatically pick up the layout from _default/single.html ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 13/Jul/20 19:17 AemieJ commented on pull request #427: URL: https://github.com/apache/camel-website/pull/427#issuecomment-657742648 @aashnajena Thanks for that! @zregvart made the required changes and works as expected. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 13/Jul/20 19:17 AemieJ commented on pull request #427: URL: https://github.com/apache/camel-website/pull/427#issuecomment-657742648 @aashnajena Thanks for that! @zregvart made the required changes and works as expected. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 15/Jul/20 10:26 zregvart merged pull request #427: URL: https://github.com/apache/camel-website/pull/427 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 15/Jul/20 10:26 zregvart merged pull request #427: URL: https://github.com/apache/camel-website/pull/427 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 15/Jul/20 10:26 zregvart commented on pull request #427: URL: https://github.com/apache/camel-website/pull/427#issuecomment-658687177 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 15/Jul/20 10:26 zregvart commented on pull request #427: URL: https://github.com/apache/camel-website/pull/427#issuecomment-658687177 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Zoran Regvart added a comment - 15/Jul/20 10:45 Thanks Aemie! Show Zoran Regvart added a comment - 15/Jul/20 10:45 Thanks Aemie !
CAMEL-15290,Unassigned,2020-07-10T08:58:46+0000,1594357126， where 1594357126 is the epoch,If you send a message to a CxfRsProducer that has the header Exchange.HTTP_METHOD set， the HTTP message sent will contain the headerorg.apache.cxf.request.method=GETfor example.This header should not be present in the message since it is internal to the endpoint.,There are no comments yet on this issue.
CAMEL-15289,Unassigned,2020-07-16T08:27:24+0000,1594873644， where 1594873644 is the epoch,I used TimeoutAwareAggregationStrategy and JdbcAggregationRepository. I have aggregator in camel-route in cluster. When one node failed all timeout also lost. And I didn't lose message but I lost functional on timeout.,Hide Permalink Serge Starovoitenkov added a comment - 16/Jul/20 08:27 The behavior is reproducible， but to be more precise - not all aggregation timeouts lost but only those that were set on the node that stopped. Timeouts set on other nodes still work. When the failed|stopped node is on again all timeouts are also on， Show Serge Starovoitenkov added a comment - 16/Jul/20 08:27 The behavior is reproducible， but to be more precise - not all aggregation timeouts lost but only those that were set on the node that stopped. Timeouts set on other nodes still work. When the failed|stopped node is on again all timeouts are also on，
CAMEL-15288,Jean-Baptiste Onofré,2020-07-09T20:40:59+0000,1594312859， where 1594312859 is the epoch,Currently OsgiDefaultCamelContext updates the registry and inserts OsgiServiceRegistry as the first registry into the list.This can lead to undesirable behaviour， so an option to define the resolution order will be helpful.For example， it can be more appropriate to lookup local beans first， only go to lookup an OSGi service if no local bean is found. Or it could be desired to not lookup OSGi services at all.,There are no comments yet on this issue.
CAMEL-15287,Unassigned,2020-07-09T12:49:04+0000,1594284544， where 1594284544 is the epoch,Suppose you have an external Quarkus service that replies always with null. When calling it from a camel route via:.to("http://quarkus-service/null-api") Then the body of the exchange is null. But if we use: .to("netty-http:http://quarkus-service/null-api") Then the body becomes an empty InputStream， which is not null. I don't know what's the correct way to handle such cases， but we should try to uniform them.,There are no comments yet on this issue.
CAMEL-15286,Dhiraj Sureshkumar Bokde,2020-11-25T17:13:51+0000,1606306431， where 1606306431 is the epoch,Configuring the Salesforce is quite complex compared to other complex as it requires to write some java beans:SalesforceComponent component = new SalesforceComponent();SalesforceEndpointConfig config = new SalesforceEndpointConfig();SalesforceLoginConfig loginConfig = new SalesforceLoginConfig();loginConfig.setType(AuthenticationType.REFRESH_TOKEN);loginConfig.setClientId(properties.getProperty("clientId"));loginConfig.setClientSecret(properties.getProperty("clientSecret"));loginConfig.setRefreshToken(properties.getProperty("refreshToken"));component.setPackages("org.apache.camel.example.salesforce");component.setConfig(config);component.setLoginConfig(loginConfig);It would be nice if most of the configuration could be done with uri params only and to require to write beans only for really advanced options.,Hide Permalink Jeremy Ross added a comment - 25/Nov/20 17:13 Dhiraj Sureshkumar Bokde What runtime are you using? In my typical spring boot projects I don't have to create any beans. The application.properties file will contain this: camel.component.salesforce.clientId= camel.component.salesforce.clientSecret= camel.component.salesforce.userName= camel.component.salesforce.password= camel.component.salesforce.loginUrl= camel.component.salesforce.packages= Show Jeremy Ross added a comment - 25/Nov/20 17:13 Dhiraj Sureshkumar Bokde What runtime are you using? In my typical spring boot projects I don't have to create any beans. The application.properties file will contain this: camel.component.salesforce.clientId= camel.component.salesforce.clientSecret= camel.component.salesforce.userName= camel.component.salesforce.password= camel.component.salesforce.loginUrl= camel.component.salesforce.packages=
CAMEL-15285,Andrea Cosentino,2020-07-09T11:19:16.812Z,1594279156.812， where 1594279156.812 is the epoch,There are some places with broken images and rendered anchors that this issue will fix. Examples: https://camel.apache.org/components/latest/eips/durable-subscriber.htmlhttps://camel.apache.org/components/latest/apns-component.html,Hide Permalink Alexander Schwartz added a comment - 09/Jul/20 11:34 pull request available on GitHub Show Alexander Schwartz added a comment - 09/Jul/20 11:34 pull request available on GitHub
CAMEL-15284,Jan Bednar,2020-07-08T17:34:50+0000,1594215290， where 1594215290 is the epoch,Currently camel-kudu and docs build from master fails on Windows.,There are no comments yet on this issue.
CAMEL-15283,James Netherton,2020-07-08T15:24:27+0000,1594207467， where 1594207467 is the epoch,https://vertx.io/docs/vertx-web-client/java/,There are no comments yet on this issue.
CAMEL-15282,Claus Ibsen,2020-07-08T15:20:21+0000,1594207221， where 1594207221 is the epoch,netty-http:http://quarkus-ml.{{env:NAMESPACE}}.svc.cluster.local/samplesthe error reported is:port Invalid integer value: NAMESPACE}}.svc.cluster.local,Hide Permalink Aurélien Pupier added a comment - 08/Jul/20 15:20 provided a test to emphasize it: https://github.com/apupier/camel/commit/7766189c28078cbdc965533c397f9b246e0c55bc Show Aurélien Pupier added a comment - 08/Jul/20 15:20 provided a test to emphasize it: https://github.com/apupier/camel/commit/7766189c28078cbdc965533c397f9b246e0c55bc Hide Permalink Ahmed M added a comment - 17/Jul/20 18:02 I think this method AbstractCamelCatalog#validateEndpointProperties checks if the URI matches netty-http:protocol:host:port/path ; it does not resolve property placeholders before parsing the URI is this really a bug ? since the following test is passing : @Test public void testEndpointUriWithEnv() throws Exception { String uri = "netty-http:http://quarkus-ml.{{env:HOSTNAME}}.svc.cluster.local:42/samples"; NettyHttpEndpoint endpoint = context.getEndpoint(uri， NettyHttpEndpoint.class); String host = endpoint.getConfiguration().getHost(); int port = endpoint.getConfiguration().getPort(); assertEquals("quarkus-ml."+System.getenv("HOSTNAME")+".svc.cluster.local"， host); assertEquals(42， port); } Show Ahmed M added a comment - 17/Jul/20 18:02 I think this method AbstractCamelCatalog#validateEndpointProperties checks if the URI matches netty-http:protocol:host:port/path ; it does not resolve property placeholders before parsing the URI is this really a bug ? since the following test is passing : @Test public void testEndpointUriWithEnv() throws Exception { String uri = "netty-http:http: //quarkus-ml.{{env:HOSTNAME}}.svc.cluster.local:42/samples" ; NettyHttpEndpoint endpoint = context.getEndpoint(uri， NettyHttpEndpoint.class); String host = endpoint.getConfiguration().getHost(); int port = endpoint.getConfiguration().getPort(); assertEquals( "quarkus-ml." + System .getenv( "HOSTNAME" )+ ".svc.cluster.local" ， host); assertEquals(42， port); } Hide Permalink Aurélien Pupier added a comment - 17/Jul/20 19:06 it is a bug， especially because the mentioned test is passing. At runtime it works but the validation is reporting an error. Then it is a false-positive. Show Aurélien Pupier added a comment - 17/Jul/20 19:06 it is a bug， especially because the mentioned test is passing. At runtime it works but the validation is reporting an error. Then it is a false-positive. Hide Permalink Claus Ibsen added a comment - 19/Jul/20 08:27 The parser cannot validate this reliable as the ENV variable can be any kind of test. Show Claus Ibsen added a comment - 19/Jul/20 08:27 The parser cannot validate this reliable as the ENV variable can be any kind of test. Hide Permalink Andrea Cosentino added a comment - 19/Jul/20 09:13 3.4.2 has been cut before this fix， so it will be available in 3.4.3 Show Andrea Cosentino added a comment - 19/Jul/20 09:13 3.4.2 has been cut before this fix， so it will be available in 3.4.3
CAMEL-15281,Unassigned,2020-07-29T14:34:05+0000,1596018845， where 1596018845 is the epoch,The recent update to quickfix-2.2.0 may lead to ...Caused by: quickfix.ConfigError: FIX42.xml: Property 'http://javax.xml.XMLConstants/property/accessExternalDTD' is not recognized. at quickfix.DataDictionary.read(DataDictionary.java:871) at quickfix.DataDictionary.<init>(DataDictionary.java:104) at quickfix.DefaultSessionFactory.lambda$static$0(DefaultSessionFactory.java:42) at java.util.concurrent.ConcurrentHashMap.computeIfAbsent(ConcurrentHashMap.java:1660) at org.quickfixj.SimpleCache.computeIfAbsent(SimpleCache.java:41) at quickfix.DefaultSessionFactory.getDataDictionary(DefaultSessionFactory.java:366) at quickfix.DefaultSessionFactory.createDataDictionary(DefaultSessionFactory.java:269) at quickfix.DefaultSessionFactory.processPreFixtDataDictionary(DefaultSessionFactory.java:259) at quickfix.DefaultSessionFactory.create(DefaultSessionFactory.java:154) at quickfix.mina.acceptor.AbstractSocketAcceptor.createSessions(AbstractSocketAcceptor.java:235) at quickfix.mina.acceptor.AbstractSocketAcceptor.startAcceptingConnections(AbstractSocketAcceptor.java:96) ... 163 moreCaused by: java.lang.IllegalArgumentException: Property 'http://javax.xml.XMLConstants/property/accessExternalDTD' is not recognized. at org.apache.xerces.jaxp.DocumentBuilderFactoryImpl.setAttribute(DocumentBuilderFactoryImpl.java:144) at __redirected.__DocumentBuilderFactory.setAttribute(__DocumentBuilderFactory.java:125) at quickfix.DataDictionary.load(DataDictionary.java:883) at quickfix.DataDictionary.read(DataDictionary.java:869) ... 173 moreThis happens when we run on WildFly-20.0.0 with xerces-2.12.0.SP02,Hide Permalink Claus Ibsen added a comment - 29/Jul/20 14:34 Can you try to report this at quickfix https://github.com/quickfix-j/quickfixj Show Claus Ibsen added a comment - 29/Jul/20 14:34 Can you try to report this at quickfix https://github.com/quickfix-j/quickfixj
CAMEL-15280,Andrea Cosentino,2020-07-08T07:33:04+0000,1594179184， where 1594179184 is the epoch,,There are no comments yet on this issue.
CAMEL-15279,Unassigned,2020-07-08T04:36:51.258Z,1594168611.258， where 1594168611.258 is the epoch,add an option to allow as2 producer to set the "Receipt-Delivery-Option" header both in routing and also when using AS2ClientManager.send methods when receiving a MDN message， the HttpMessageUtils.extractEdiPayload will throw an exception saying invalid content type 'multipart/report',There are no comments yet on this issue.
CAMEL-15278,Guillaume Nodet,2020-07-08T12:50:07+0000,1594198207， where 1594198207 is the epoch,On some containers such as ArC， beans retrieved from the container are proxy for the actual bean and as the proxy does not preserve the annotations on methods， methods annotated with @Handler are not automatically selected.We should probably walk the class hierarchy to see if there is a method annotated with @Handlerhttps://github.com/apache/camel-quarkus/issues/1459,Hide Permalink Guillaume Nodet added a comment - 08/Jul/20 12:50 I've raised a PR with a fix， but I'm not 100% sure that quarkus actually sets the synthetic flag on the proxy class. It has to be verified. Show Guillaume Nodet added a comment - 08/Jul/20 12:50 I've raised a PR with a fix， but I'm not 100% sure that quarkus actually sets the synthetic flag on the proxy class. It has to be verified.
CAMEL-15277,James Netherton,2020-07-07T15:20:59+0000,1594120859， where 1594120859 is the epoch,This is related to something I observed testing the Camel Quarkus OpenAPI Java extension: https://github.com/apache/camel-quarkus/issues/1309In some scenarios， the openapi-java component unnecessarily applies logic related to the contextIdListing. This screws up the resolution of the rest configuration and leads to no content being returned from the api doc endpoint.,There are no comments yet on this issue.
CAMEL-15276,Andrea Cosentino,2020-07-07T14:08:25+0000,1594116505， where 1594116505 is the epoch,WeatherConfiguration is constructed like this public WeatherConfiguration(WeatherComponent component) { this.component = notNull(component， "component"); weatherQuery = new WeatherQuery(this); FreeGeoIpGeoLocationProvider geoLocationProvider = new FreeGeoIpGeoLocationProvider(component， geolocationAccessKey); weatherQuery.setGeoLocationProvider(geoLocationProvider); }at which point the geolocationAccessKey may be unknown.There is perhaps also some confusion here ... @Override protected Endpoint createEndpoint(String uri， String remaining， Map<String， Object> parameters) throws Exception { WeatherConfiguration configuration = new WeatherConfiguration(this); configuration.setGeolocationAccessKey(geolocationAccessKey); configuration.setGeolocationRequestHostIP(geolocationRequestHostIP); WeatherEndpoint endpoint = new WeatherEndpoint(uri， this， configuration); setProperties(endpoint， parameters); if (httpClient == null) { httpClient = HttpClients.createDefault(); } return endpoint; }which seems to set the geolocationAccessKey on the configuration from what is explicitly defined on the component.A geolocationAccessKey defined on the endpoint Uri does not find its way to the GeoLocationProvider which is then used by WeatherQuery， which then leads to ... camelctx.addRoutes(new RouteBuilder() { @Override public void configure() throws Exception { from("weather:foo?geolocationRequestHostIP=redhat.com&geolocationAccessKey=" + GEOLOCATION_ACCESS_KEY + "&appid=" + OPENWEATHER_APP_ID) .to("mock:result"); } });Caused by: java.lang.IllegalStateException: The geolocation service requires a mandatory geolocationAccessKey at org.apache.camel.component.weather.geolocation.FreeGeoIpGeoLocationProvider.getCurrentGeoLocation(FreeGeoIpGeoLocationProvider.java:43) at org.apache.camel.component.weather.WeatherQuery.getCurrentGeoLocation(WeatherQuery.java:150) at org.apache.camel.component.weather.WeatherQuery.getQuery(WeatherQuery.java:58) at org.apache.camel.component.weather.WeatherQuery.getQuery(WeatherQuery.java:38) at org.apache.camel.component.weather.WeatherConfiguration.getQuery(WeatherConfiguration.java:212) at org.apache.camel.component.weather.WeatherEndpoint.createConsumer(WeatherEndpoint.java:43),There are no comments yet on this issue.
CAMEL-15275,Unassigned,2020-07-08T06:22:24+0000,1594174944， where 1594174944 is the epoch,Currently we have camel-knative component in camel-k that enables camel routes deployed in with camel-k to interact with knative components like eventing. However， currently it is only exclusive to camel-k， hence it will make sense to bring/create this component as part of the main Camel components in order in order to enable non-camel-k routes that deployed with knative (e.g: camel-quarkus， camel-spring-boot) to utilize and interact in kantive. FYI Claus Ibsen Luca Burgazzoli] thoughts on this? I recall there was some discussion on brining this component to main Camel components.,Hide Permalink Luca Burgazzoli added a comment - 08/Jul/20 06:22 Omar Al-Safi it is planned but may take a while as we need to consolidate some bits before moving in the main camel repo Show Luca Burgazzoli added a comment - 08/Jul/20 06:22 Omar Al-Safi it is planned but may take a while as we need to consolidate some bits before moving in the main camel repo Hide Permalink Omar Al-Safi added a comment - 09/Jul/20 11:39 Luca Burgazzoli sure， no problems. But in case， I can ship in to help as well here as I think this is very valuable Show Omar Al-Safi added a comment - 09/Jul/20 11:39 Luca Burgazzoli sure， no problems. But in case， I can ship in to help as well here as I think this is very valuable
CAMEL-15274,Ramu,2020-07-17T12:36:45+0000,1594975005， where 1594975005 is the epoch,In Camel 2.x we had spring boot actuator that could output route details， eg a list of the routes and their state， and some metrics.It was also possible to stop/start routes etc.However the latter was a concern for security.But having a basic http endpoint service to dump route details would be good. It should be disabled by default and only be a read-only service if enabled.The old code in 2.x can be of inspiration.And the old code is not compatible with newer spring boot so it needs to be migrated.,Hide Permalink Ramu added a comment - 17/Jul/20 12:36 looking into it Show Ramu added a comment - 17/Jul/20 12:36 looking into it
CAMEL-15273,Unassigned,2020-07-03T18:14:05.689Z,1593785645.689， where 1593785645.689 is the epoch,Hi，I have a hard-time understanding how and why to use the new 3.4.x starters vs individual components， but this is what the documentation suggests.I have a hard time because they bring unnecessary JAR's which I have now to manage in pom.xml via exclusions.For example:<!-- Camel --> <dependency> <groupId>org.apache.camel</groupId> <artifactId>camel-support</artifactId> </dependency> <dependency> <groupId>org.apache.camel.springboot</groupId> <artifactId>camel-jsonpath-starter</artifactId> </dependency> <dependency> <groupId>org.apache.camel.springboot</groupId> <artifactId>camel-jackson-starter</artifactId> </dependency> <dependency> <groupId>org.apache.camel.springboot</groupId> <artifactId>camel-jaxb-starter</artifactId> </dependency> <dependency> <groupId>org.apache.camel.springboot</groupId> <artifactId>camel-metrics-starter</artifactId> </dependency> <dependency> <groupId>org.apache.camel.springboot</groupId> <artifactId>camel-soap-starter</artifactId> </dependency> <dependency> <groupId>org.apache.camel.springboot</groupId> <artifactId>camel-disruptor-starter</artifactId> </dependency> Each of these starters now bring me the spring-boot-starter-logging which I don't need as I'm using Log4J2 for this. As a result I have now both log4J2 and logback in my classpath. Obviously I can add exclusions but then what's the point of the starters?Unless there's something subtle which I don't understand yet， I find the starters to be really targeting the lazy; I fail to see why is not enough to add camel-spring-boot-starter for the purpose of having Spring Boot and next just add the regular Apache Camel's components?Ok， if starters are a nice to have thing， is it ok then to ignore them and simply add the regular Camel components to avoid this extra work? Can this be documented? Thank you,Hide Permalink Claus Ibsen added a comment - 03/Jul/20 19:36 Use the mailing list for asking questions. The starters are for spring boot and are best to be used， they have auto configuration and some have special spring boot integration. But you can for most of them not use the starter if you dont use auto configuration. And for maven you can use maven exclude to remove dependencies. Show Claus Ibsen added a comment - 03/Jul/20 19:36 Use the mailing list for asking questions. The starters are for spring boot and are best to be used， they have auto configuration and some have special spring boot integration. But you can for most of them not use the starter if you dont use auto configuration. And for maven you can use maven exclude to remove dependencies.
CAMEL-15272,Matej Melko,2020-07-03T14:23:15+0000,1593771795， where 1593771795 is the epoch,Camel-Jira connector doesn't work with latest jira/jira-cloud due to old client version:Caused by: com.atlassian.jira.rest.client.api.RestClientException: org.codehaus.jettison.json.JSONException: JSONObject["name"] not found. at com.atlassian.jira.rest.client.internal.async.DelegatingPromise.claim(DelegatingPromise.java:45) ~[jira-rest-java-client-core-5.1.6.jar:na] at org.apache.camel.component.jira.consumer.AbstractJiraConsumer.getIssues(AbstractJiraConsumer.java:55) ~[camel-jira-3.4.0.jar:3.4.0] at org.apache.camel.component.jira.consumer.AbstractJiraConsumer.getIssues(AbstractJiraConsumer.java:45) ~[camel-jira-3.4.0.jar:3.4.0] at org.apache.camel.component.jira.consumer.NewCommentsConsumer.getComments(NewCommentsConsumer.java:74) ~[camel-jira-3.4.0.jar:3.4.0] at org.apache.camel.component.jira.consumer.NewCommentsConsumer.doStart(NewCommentsConsumer.java:66) ~[camel-jira-3.4.0.jar:3.4.0] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[camel-api-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.AbstractCamelContext.startService(AbstractCamelContext.java:3025) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartOrResumeRouteConsumers(InternalRouteStartupManager.java:348) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartRouteConsumers(InternalRouteStartupManager.java:275) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.InternalRouteStartupManager.safelyStartRouteServices(InternalRouteStartupManager.java:180) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartOrResumeRoutes(InternalRouteStartupManager.java:114) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartCamel(AbstractCamelContext.java:2809) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartContext(AbstractCamelContext.java:2657) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStart(AbstractCamelContext.java:2620) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.spring.boot.SpringBootCamelContext.doStart(SpringBootCamelContext.java:43) ~[camel-spring-boot-3.4.0.jar:3.4.0] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[camel-api-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2452) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:121) ~[camel-spring-3.4.0.jar:3.4.0] ... 16 common frames omitted Upgrade to 5.2.1 fixes this. PR on the way.,There are no comments yet on this issue.
CAMEL-15271,Unassigned,2020-07-04T09:55:42+0000,1593842142， where 1593842142 is the epoch,This pagehttps://camel.apache.org/manual/latest/faq/how-can-i-stop-a-route-from-a-route.htmlNo longer has the source code example， we should add it back,Hide Permalink Matt Watson added a comment - 04/Jul/20 09:55 I'm looking for an easy issue to take a look at. Planning on submitting a PR today/tomorrow. Show Matt Watson added a comment - 04/Jul/20 09:55 I'm looking for an easy issue to take a look at. Planning on submitting a PR today/tomorrow. Hide Permalink Claus Ibsen added a comment - 30/Jul/20 10:19 Matt， did you work on this? Show Claus Ibsen added a comment - 30/Jul/20 10:19 Matt， did you work on this? Hide Permalink Matt Watson added a comment - 30/Jul/20 10:37 Yeah， I added the example back in this PR https://github.com/apache/camel/pull/3978 I think this can be closed now? Show Matt Watson added a comment - 30/Jul/20 10:37 Yeah， I added the example back in this PR https://github.com/apache/camel/pull/3978 I think this can be closed now? Hide Permalink Claus Ibsen added a comment - 30/Jul/20 10:47 Thanks for the PR Show Claus Ibsen added a comment - 30/Jul/20 10:47 Thanks for the PR
CAMEL-15270,Claus Ibsen,2020-07-03T12:48:08+0000,1593766088， where 1593766088 is the epoch,After CAMEL-14963We should be able to also specify in spring-main configuration parameters for route templates so you can create routes without codingcamel.route-template[foo].template-id = myTemplatecamel.route-template[foo].greeting = Hellocamel.route-template[foo].delay = 5scamel.route-template[bar].template-id = myTemplatecamel.route-template[bar].greeting = DavsHere 2 routes will be created based on the same template， route foo and bar.,There are no comments yet on this issue.
CAMEL-15269,Unassigned,2020-07-03T13:35:12+0000,1593768912， where 1593768912 is the epoch,HelloI'm new to kafka. I would like to know how to install the CAMEL-JIRA-KAFKA-CONNECTOR and how to configure it.Where do I have to put the unit <dependency> <groupId>org.apache.camel.kafkaconnector</groupId> <artifactId>camel-jira-kafka-connector</artifactId> <version>x.x.x</version> <!-- use the same version as your Camel Kafka connector version --></dependency>Where to extract the file camel-jira-kafka-connector-0.3.0-package.tar.gzWhere and how to set options such ascamel.source.endpoint.jqlThank you very much for everythingDani,Hide Permalink Claus Ibsen added a comment - 03/Jul/20 13:35 There is some bits in the docs https://camel.apache.org/camel-kafka-connector/latest/try-it-out-locally.html Can you try follow that and tell where it may lack some details. Also towards the end of this video Andrea demo a kafka example where he shows how to download and extract the camel kafka packages https://camel.apache.org/blog/2020/06/whatsnew-camel-3-webinar/ Show Claus Ibsen added a comment - 03/Jul/20 13:35 There is some bits in the docs https://camel.apache.org/camel-kafka-connector/latest/try-it-out-locally.html Can you try follow that and tell where it may lack some details. Also towards the end of this video Andrea demo a kafka example where he shows how to download and extract the camel kafka packages https://camel.apache.org/blog/2020/06/whatsnew-camel-3-webinar/ Hide Permalink Thomas added a comment - 07/Jul/20 06:28 - edited Hi guys I am also struggling with the same issue. I followed the provided documentation and took the configuration base from the projects example. I always run into the following error: [2020-07-07 00:12:11，684] ERROR WorkerSourceTask{id=CamelJiraSourceConnector-0} Task threw an uncaught and unrecoverable exception (org.apache.kafka.connect.runtime.WorkerTask:186) org.apache.kafka.connect.errors.ConnectException: Failed to create and start Camel context at org.apache.camel.kafkaconnector.CamelSourceTask.start(CamelSourceTask.java:103) at org.apache.kafka.connect.runtime.WorkerSourceTask.execute(WorkerSourceTask.java:213) at org.apache.kafka.connect.runtime.WorkerTask.doRun(WorkerTask.java:184) at org.apache.kafka.connect.runtime.WorkerTask.run(WorkerTask.java:234) at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at java.base/java.lang.Thread.run(Thread.java:834) Caused by: java.lang.IllegalArgumentException: Cannot find endpoint with scheme jira at org.apache.camel.catalog.impl.AbstractCamelCatalog.doAsEndpointUri(AbstractCamelCatalog.java:684) at org.apache.camel.catalog.impl.AbstractCamelCatalog.asEndpointUri(AbstractCamelCatalog.java:673) at org.apache.camel.kafkaconnector.utils.TaskHelper.buildUrl(TaskHelper.java:44) at org.apache.camel.kafkaconnector.CamelSourceTask.start(CamelSourceTask.java:89) ... 8 more I used the following configuration: name=CamelJiraSourceConnector connector.class=org.apache.camel.kafkaconnector.jira.CamelJiraSourceConnector tasks.max=1 key.converter=org.apache.kafka.connect.storage.StringConverter value.converter=org.apache.kafka.connect.storage.StringConverter camel.component.jira.jiraUrl=http://localhost:8080 camel.component.jira.password=xxx camel.component.jira.username=user camel.source.endpoint.jiraUrl=http://localhost:8080 camel.source.endpoint.username=user camel.source.endpoint.password=xxx camel.source.path.type=newComments topics=mytopic I also tried with OAuth， but run into the same issue. Furthermore I tested it with Jira Online， but faced the same issue. Using DEBUG/TRACE log did not really help me. I do not really understand the underlying issue. It is also not clear to me why there are configurations for components and source.endpoints. What is the difference? Show Thomas added a comment - 07/Jul/20 06:28 - edited Hi guys I am also struggling with the same issue. I followed the provided documentation and took the configuration base from the projects example. I always run into the following error: [2020-07-07 00:12:11，684] ERROR WorkerSourceTask{id=CamelJiraSourceConnector-0} Task threw an uncaught and unrecoverable exception (org.apache.kafka.connect.runtime.WorkerTask:186) org.apache.kafka.connect.errors.ConnectException: Failed to create and start Camel context at org.apache.camel.kafkaconnector.CamelSourceTask.start(CamelSourceTask.java:103) at org.apache.kafka.connect.runtime.WorkerSourceTask.execute(WorkerSourceTask.java:213) at org.apache.kafka.connect.runtime.WorkerTask.doRun(WorkerTask.java:184) at org.apache.kafka.connect.runtime.WorkerTask.run(WorkerTask.java:234) at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at java.base/java.lang. Thread .run( Thread .java:834) Caused by: java.lang.IllegalArgumentException: Cannot find endpoint with scheme jira at org.apache.camel.catalog.impl.AbstractCamelCatalog.doAsEndpointUri(AbstractCamelCatalog.java:684) at org.apache.camel.catalog.impl.AbstractCamelCatalog.asEndpointUri(AbstractCamelCatalog.java:673) at org.apache.camel.kafkaconnector.utils.TaskHelper.buildUrl(TaskHelper.java:44) at org.apache.camel.kafkaconnector.CamelSourceTask.start(CamelSourceTask.java:89) ... 8 more I used the following configuration: name=CamelJiraSourceConnector connector.class=org.apache.camel.kafkaconnector.jira.CamelJiraSourceConnector tasks.max=1 key.converter=org.apache.kafka.connect.storage.StringConverter value.converter=org.apache.kafka.connect.storage.StringConverter camel.component.jira.jiraUrl=http: //localhost:8080 camel.component.jira.password=xxx camel.component.jira.username=user camel.source.endpoint.jiraUrl=http: //localhost:8080 camel.source.endpoint.username=user camel.source.endpoint.password=xxx camel.source.path.type=newComments topics=mytopic I also tried with OAuth， but run into the same issue. Furthermore I tested it with Jira Online， but faced the same issue. Using DEBUG/TRACE log did not really help me. I do not really understand the underlying issue. It is also not clear to me why there are configurations for components and source.endpoints. What is the difference? Hide Permalink Andrea Cosentino added a comment - 07/Jul/20 06:32 Please， open the issue in the camel-kafka-connector issue tracker. https://github.com/apache/camel-kafka-connector This is the issue tracker for pure camel. Show Andrea Cosentino added a comment - 07/Jul/20 06:32 Please， open the issue in the camel-kafka-connector issue tracker. https://github.com/apache/camel-kafka-connector This is the issue tracker for pure camel.
CAMEL-15268,Claus Ibsen,2020-07-02T16:17:05+0000,1593692225， where 1593692225 is the epoch,The configure method currently dont have parameter binding. We should add support for CamelContext， Main etc.,There are no comments yet on this issue.
CAMEL-15267,Alex Dettinger,2020-07-02T12:59:50+0000,1593680390， where 1593680390 is the epoch,,There are no comments yet on this issue.
CAMEL-15266,Unassigned,2020-07-07T10:28:22+0000,1594103302， where 1594103302 is the epoch,On gitter chat.1. Remove that last "more resources" section2. On the github contribution.md file， just link to the same guide on the website (one place to maintain),Hide Permalink Aemie added a comment - 07/Jul/20 10:28 Claus Ibsen Within the contribution I was reading there is a section APACHE CAMEL COMMITTERS SHOULD WORK ON THE ASF GIT REPO where we could provide the links within the More Resources section. Is that what you are asking for? Show Aemie added a comment - 07/Jul/20 10:28 Claus Ibsen Within the contribution I was reading there is a section APACHE CAMEL COMMITTERS SHOULD WORK ON THE ASF GIT REPO where we could provide the links within the More Resources section. Is that what you are asking for? Hide Permalink Ahmed M added a comment - 13/Jul/20 10:06 - edited Hi Aemie， I reported this on gitter. 1. There is a section More ressources at the end of the Contributing page on the website， it contains a dead link to an Apache Wiki about ASF Git : http://wiki.apache.org/general/GitAtApache: Some basic notes about git@asf (Claus said on gitter that all contributions are now done via Github， hence his proposal to remove that entire section about ASF Git) 2. In the contributing.md on Github there is a references to Subversion (i checked today it was still there) It also seems that the two contributing guides on github and the website are not the same， maybe it would be better to have only one guide to maintain as suggested by Claus Show Ahmed M added a comment - 13/Jul/20 10:06 - edited Hi Aemie ， I reported this on gitter. 1. There is a section More ressources at the end of the Contributing page on the website， it contains a dead link to an Apache Wiki about ASF Git : http://wiki.apache.org/general/GitAtApache: Some basic notes about git@asf (Claus said on gitter that all contributions are now done via Github， hence his proposal to remove that entire section about ASF Git) 2. In the contributing.md on Github there is a references to Subversion (i checked today it was still there) It also seems that the two contributing guides on github and the website are not the same， maybe it would be better to have only one guide to maintain as suggested by Claus
CAMEL-15265,Claus Ibsen,2020-07-01T12:45:22+0000,1593593122， where 1593593122 is the epoch,I was hoping to use the new StaticEndpointBuilders to configure and possibly share for my routes and producer templates in Camel 3.4.0. However， I noticed all of the static methods are package private. Is that by design?,There are no comments yet on this issue.
CAMEL-15264,Andrea Cosentino,2020-07-01T06:03:55+0000,1593569035， where 1593569035 is the epoch,Like delete the delivery stream or changing the destination dynamically.,There are no comments yet on this issue.
CAMEL-15263,Unassigned,2020-07-01T05:49:43+0000,1593568183， where 1593568183 is the epoch,EIPs with outputs have route as a possible choice due to how JAXB generates the schema.We can amend the file afterwards and remove it. And also now routeTemplate.,There are no comments yet on this issue.
CAMEL-15262,Andrea Cosentino,2020-06-30T20:49:05+0000,1593535745， where 1593535745 is the epoch,The constructor args maxRetries (reconnectMaxRetries) and maxSleepMs (reconnectMaxSleepTime) are reversed when creating a new ExponentialBackoffRetry in ZooKeeperCuratorHelper.createCurator :if (retryPolicy == null) { retryPolicy = new ExponentialBackoffRetry( (int)configuration.getReconnectBaseSleepTimeUnit().toMillis(configuration.getReconnectBaseSleepTime())， (int)configuration.getReconnectMaxSleepTimeUnit().toMillis(configuration.getReconnectMaxSleepTime())， configuration.getReconnectMaxRetries());}CuratorFramework API javadoc:ExponentialBackoffRetry(int baseSleepTimeMs， int maxRetries， int maxSleepMs),There are no comments yet on this issue.
CAMEL-15261,Omar Al-Safi,2020-06-30T13:44:00+0000,1593510240， where 1593510240 is the epoch,With the release of Debezium version 1.2.0.Final， new configurations baed on regex being introduced， for example this one here. The easiest way is to ignore such fields from the maven plugin and instruct the user to use `.additionalProperties` configuration property to set these fields as pretty complicated to generate such fields.,There are no comments yet on this issue.
CAMEL-15260,Andrea Cosentino,2020-06-30T11:47:07.480Z,1593503227.48， where 1593503227.48 is the epoch,When using Camel's opentracing implementation alongside other tracers e.g. anything from https://github.com/opentracing-contrib traces do not link up nicely.It appears that although Camel has the ActiveSpanManager which correctly tracks the span stack locally the implementation doesn't activate spans in the global tracer.This means that when viewing spans you get broken traces for events in the same distributed transaction e.g. from("direct:personInJsonToDb") .unmarshal(jsonDataFormat) .bean(DatabaseClient.class， "insert");You can see 2 root traces in the attached image.It's possible to workaround this by intercepting and activating 'manually' but that doesn't seem correct.I think we should be activating in the global tracer when we activate locally.,Hide Permalink Andrea Cosentino added a comment - 30/Jun/20 12:06 Can you create a PR for camel-3.4.x too? Thanks. Show Andrea Cosentino added a comment - 30/Jun/20 12:06 Can you create a PR for camel-3.4.x too? Thanks. Hide Permalink Matt Robbins added a comment - 30/Jun/20 12:11 Yep sure - will do， thanks Andrea Cosentino Show Matt Robbins added a comment - 30/Jun/20 12:11 Yep sure - will do， thanks Andrea Cosentino
CAMEL-15259,Thomas Diesler,2020-06-30T11:20:09+0000,1593501609， where 1593501609 is the epoch,The couchbase component seem outdated or brokenSo far we used docker image couchbase:community-3.1.3 which is quite outdated and does not run on Docker Desktop for MacOS. A recent version of the community server (e.g. couchbase:community-6.5.1) runs fine and I can do a setup like this ...Run the community couchbase server imagedocker run --detach \ --name couchbase \ -p 8091:8091 \ -p 8092:8092 \ -p 8093:8093 \ -p 8094:8094 \ -p 11210:11210 \ couchbase:community-6.5.1Setup a new clusterhttps://docs.couchbase.com/server/current/cli/cbcli/couchbase-cli-cluster-init.htmldocker exec couchbase \ couchbase-cli cluster-init -c 127.0.0.1 --cluster-username Administrator --cluster-password password \ --cluster-name default --cluster-ramsize 1024 \ --services data，index，queryLoad the beer sample datahttps://docs.couchbase.com/server/current/cli/cbdocloader-tool.htmldocker exec couchbase \ cbdocloader -c couchbase://127.0.0.1 -u Administrator -p password \ -v -m 1024 -b beer-sample -d /opt/couchbase/samples/beer-sample.zipThe camel component also uses an outdated client (1.4.13)， which I cannot get to work with any of the later community servers that I tried. Simple code like this (which is used by the couchbase endpoint) fails with 401List<URI> hosts = Arrays.asList(new URI("http://127.0.0.1:8091/pools"));String username = "Administrator";String password = "password";String bucket = "beer-sample";CouchbaseConnectionFactoryBuilder cfb = new CouchbaseConnectionFactoryBuilder();CouchbaseClient client = new CouchbaseClient(cfb.buildCouchbaseConnection(hosts， bucket， username， password));There seems to be a change of how username is handled by recent couchbase server versions. I didn't try a more recent java client because this would likely imply changes to the couchbase component.,Hide Permalink Andrea Cosentino added a comment - 30/Jun/20 11:20 https://github.com/apache/camel/commit/025549c010e467d59ff52fde8f87e3daa0ae9cf1#diff-b6d9962b7455f199045c2d64cd30ac9d It has been updated to 3.0.5 client. Show Andrea Cosentino added a comment - 30/Jun/20 11:20 https://github.com/apache/camel/commit/025549c010e467d59ff52fde8f87e3daa0ae9cf1#diff-b6d9962b7455f199045c2d64cd30ac9d It has been updated to 3.0.5 client. Hide Permalink Thomas Diesler added a comment - 30/Jun/20 11:22 LOL， perfect timing I'll try the latest then. Show Thomas Diesler added a comment - 30/Jun/20 11:22 LOL， perfect timing I'll try the latest then.
CAMEL-15258,Unassigned,2020-06-30T03:59:07+0000,1593475147， where 1593475147 is the epoch,This does not make sense on spring boot， as it requires a vertx based runtime.,There are no comments yet on this issue.
CAMEL-15257,Unassigned,2020-07-01T12:28:46+0000,1593592126， where 1593592126 is the epoch,Hello Team， Similar to camel-jolt， looking for an integration of apache camel with jsonata [https://jsonata.org/] query and transformation framework. We need to expose Rest API's using apache camel and do json transformation using json query language [jsonata for eg] without doing binding to java objects， as the json structure is quite dynamic. > jsonata java implementation : https://github.com/IBM/JSONata4Java,Hide Permalink Andrea Cosentino added a comment - 01/Jul/20 12:28 You're welcome to work on it. Show Andrea Cosentino added a comment - 01/Jul/20 12:28 You're welcome to work on it.
CAMEL-15256,Unassigned,2020-09-18T15:31:14+0000,1600428674， where 1600428674 is the epoch,Some EIPs have scheduled background tasks that periodically check for stuff， like timeouts in aggregator， and whatnot.We could look at having a way for a 3rd party SPI to plugin via ThreadPoolFactory a way for using a custom scheduler instead of a ScheduledThreadPoolExecutor.,Hide Permalink Claus Ibsen added a comment - 18/Sep/20 15:31 Currently its only non scheduled thread pool we have a SPI and pluggable system for. Show Claus Ibsen added a comment - 18/Sep/20 15:31 Currently its only non scheduled thread pool we have a SPI and pluggable system for.
CAMEL-15255,Andrea Cosentino,2020-06-29T09:35:38+0000,1593408938， where 1593408938 is the epoch,The camel-micrometer component includes a RoutePolicy， EventNotifiers and a MessageHistory， which provides a set of metrics. I think it would be a great improvement to expand this set， more particularly with metrics on: Total count of exchanges completed， per route Total count of exchanges failed， per route Current count of exchanges inflight， per routeI find these metrics to be highly useful in the context of monitoring camel apps and would assume others do as well.,Hide Permalink Espen Andreassen added a comment - 29/Jun/20 09:35 I've already implemented these metrics like this: A RoutePolicy which provides counters on exchanges completed and failed. These are incremented according to the response on " isFailed()" on the exchange in the "onDone" hook of the RoutePolicy. An EventNotifier on ExchangeEvents which provides a gauge on inflight exchanges per route. When the notifier is notified， the "fromRouteId" is extracted from the event and then used to find the current inflight exchanges for the route of the exchange using the inflight repository. If there is any interest in this， I can prepare a pull request? Show Espen Andreassen added a comment - 29/Jun/20 09:35 I've already implemented these metrics like this: A RoutePolicy which provides counters on exchanges completed and failed. These are incremented according to the response on " isFailed()" on the exchange in the "onDone" hook of the RoutePolicy. An EventNotifier on ExchangeEvents which provides a gauge on inflight exchanges per route. When the notifier is notified， the "fromRouteId" is extracted from the event and then used to find the current inflight exchanges for the route of the exchange using the inflight repository. If there is any interest in this， I can prepare a pull request? Hide Permalink Claus Ibsen added a comment - 29/Jun/20 11:37 Yeah sure contributions is welcome Show Claus Ibsen added a comment - 29/Jun/20 11:37 Yeah sure contributions is welcome
CAMEL-15254,Unassigned,2020-06-29T07:35:58+0000,1593401758， where 1593401758 is the epoch,In AbstractCamelContext we log if custom features has been detected and are in use， such as when they can be installed via classpath.We could maybe use the extension mechanism and make them as custom extensions. And then which extensions are in useCamel extensions: xxx， yyy， zzzSimilar to what Quarkus does by logging which extensions that are enabled.,There are no comments yet on this issue.
CAMEL-15253,Unassigned,2020-08-13T12:48:56+0000,1597308536， where 1597308536 is the epoch,Implement a component for the OAI-PMH protocol.Spec: https://www.openarchives.org/pmh/Proposal: Proposal,Hide Permalink Claus Ibsen added a comment - 13/Aug/20 12:48 Juan thanks， we need a spring boot starter for this CAMEL-15408 Show Claus Ibsen added a comment - 13/Aug/20 12:48 Juan thanks， we need a spring boot starter for this CAMEL-15408
CAMEL-15252,Unassigned,2020-06-28T12:15:17+0000,1593332117， where 1593332117 is the epoch,The camel documentation states that there are two ways to acknowledge a Google pubsub message. They are "ackMode=AUTO" and "ackMode=NONE". If the mode is set to NONE， the document states that the "downstream process has to acknowledge explicitly". However there are no examples， or pointers on how to do that.The unit tests also do not reflect this scenario. The AckModeNoneTest.java sets the ackMode to NONE， and checks if the message is redelivered， but it doesn't test how to acknowledge the message. This file AcknowledgeSync.java has the steps to acknowledge， but it's not clear how to do that within a Camel route. It seems to need an class called com.google.cloud.pubsub.v1.stub.SubscriberStub that is passed into it.,There are no comments yet on this issue.
CAMEL-15251,Zheng Feng,2020-06-28T06:14:40+0000,1593310480， where 1593310480 is the epoch,The MandatoryJtaTransactionPolicy missed to callrunWithTransaction(runnable， false);The NeverJtaTransactionPolicy missed to callrunnable.run();,There are no comments yet on this issue.
CAMEL-15250,Unassigned,2020-07-30T10:22:04+0000,1596090124， where 1596090124 is the epoch,To reduce the load on the ASF mirrors， projects are required to delete old releases [1]Please can you remove all non-current releases?i.e. all but the 3 latest releases: 3.4.0， 3.3.0， 3.2.0It's unfair to expect the 3rd party mirrors to carry old releases.However you can still link to the archives for historic releases.Please also update your release procedures (if relevant)Thanks![1] http://www.apache.org/dev/release.html#when-to-archive,Hide Permalink Claus Ibsen added a comment - 30/Jul/20 10:22 Andrea Cosentino or Zoran Regvart wonder if you known how to delete those old releases https://dist.apache.org/repos/dist/release/camel/apache-camel/ So we should just keep 2.25.2 and 3.4.2 Show Claus Ibsen added a comment - 30/Jul/20 10:22 Andrea Cosentino or Zoran Regvart wonder if you known how to delete those old releases https://dist.apache.org/repos/dist/release/camel/apache-camel/ So we should just keep 2.25.2 and 3.4.2 Hide Permalink Sebb added a comment - 30/Jul/20 10:39 svn rm -m"Dropping old release" https://dist.apache.org/repos/dist/release/camel/apache-camel/3.0.1/ Show Sebb added a comment - 30/Jul/20 10:39 svn rm -m"Dropping old release" https://dist.apache.org/repos/dist/release/camel/apache-camel/3.0.1/ Hide Permalink Claus Ibsen added a comment - 30/Jul/20 10:49 Thanks Sebb. I have now deleted the old releases so we only have the latest active. Show Claus Ibsen added a comment - 30/Jul/20 10:49 Thanks Sebb. I have now deleted the old releases so we only have the latest active. Hide Permalink Sebb added a comment - 30/Jul/20 12:13 Thanks Show Sebb added a comment - 30/Jul/20 12:13 Thanks
CAMEL-15249,Unassigned,2020-06-27T20:50:29+0000,1593276629， where 1593276629 is the epoch,To make the build simpler， i.e. that we just need to run yarn followed by yarn build we can utilize Yarn workspaces. By using workspaces we would not need to change into antora-ui-camel and build there， but the Antora UI would be built as a dependency/module of the workspace.Perhaps we can even make it so that we only need to run yarn (not so sure this is a good idea) or we only need to run yarn build.,Hide Permalink David Jencks added a comment - 27/Jun/20 20:50 yarn workspaces seem like using a bulldozer where a teaspoon would do. I suggest adding some more scripts to package.json. I can't get this to work with yarn， but with npm the following works: – add the gulp dependencies from antora-ui-camel/package.json to package.json – add these scripts to package.json: ``` "build:install": "npm i --cache=.cache/npm"， "build:antora-ui": "gulp --cwd antora-ui-camel"， ``` npm run build:install and npm run build:antora-ui both do what one expects. Show David Jencks added a comment - 27/Jun/20 20:50 yarn workspaces seem like using a bulldozer where a teaspoon would do. I suggest adding some more scripts to package.json. I can't get this to work with yarn， but with npm the following works: – add the gulp dependencies from antora-ui-camel/package.json to package.json – add these scripts to package.json: ``` "build:install": "npm i --cache=.cache/npm"， "build:antora-ui": "gulp --cwd antora-ui-camel"， ``` npm run build:install and npm run build:antora-ui both do what one expects. Hide Permalink Zoran Regvart added a comment - 27/Jun/20 21:02 I respectfully disagree with the analogy， I think Yarn workspaces are very well suited for this use case. There are also further benefits in using workspaces with regards to using a single lock file and optimizing downloads， potentially making the build faster. Also I would not introduce a dependency on npm， we're using yarn exclusively. Show Zoran Regvart added a comment - 27/Jun/20 21:02 I respectfully disagree with the analogy， I think Yarn workspaces are very well suited for this use case. There are also further benefits in using workspaces with regards to using a single lock file and optimizing downloads， potentially making the build faster. Also I would not introduce a dependency on npm， we're using yarn exclusively. Hide Permalink David Jencks added a comment - 27/Jun/20 21:11 I wasn't intending to suggest that we use npm， just that I could get this working with npm and not with yarn. I assume someone more familiar with yarn could get it working with yarn. However， I'm coming to the conclusion that perhaps a yarn workspace is a good idea， since it's possible to depend on a UI bundle and access it through require. This would make the antora build explicitly depend on the UI bundle in package.json. Show David Jencks added a comment - 27/Jun/20 21:11 I wasn't intending to suggest that we use npm， just that I could get this working with npm and not with yarn. I assume someone more familiar with yarn could get it working with yarn. However， I'm coming to the conclusion that perhaps a yarn workspace is a good idea， since it's possible to depend on a UI bundle and access it through require. This would make the antora build explicitly depend on the UI bundle in package.json. Hide Permalink Aemie added a comment - 28/Jun/20 13:31 - edited Zoran Regvart I tried working with workspaces by adding workspaces of antora-ui-camel and installing all the dependencies， so when I run `yarn workspaces run build` where `workspaces: ['antora-ui-camel']`， it ran into some errors which I could resolve but it keeps being stuck at the error `Unknown module: algoliasearch not found` when it's clearly installed. I had to create a workaround which doesn't seem optimal : ``` "build:ui": "yarn --cwd antora-ui-camel add --dev algoliasearch && yarn workspaces run build"， "build:antora": "yarn add --dev npm-run-all -W && antora --clean --fetch antora-playbook.yml"， ``` Show Aemie added a comment - 28/Jun/20 13:31 - edited Zoran Regvart I tried working with workspaces by adding workspaces of antora-ui-camel and installing all the dependencies， so when I run `yarn workspaces run build` where `workspaces: ['antora-ui-camel'] `， it ran into some errors which I could resolve but it keeps being stuck at the error `Unknown module: algoliasearch not found` when it's clearly installed. I had to create a workaround which doesn't seem optimal : ``` "build:ui": "yarn --cwd antora-ui-camel add --dev algoliasearch && yarn workspaces run build"， "build:antora": "yarn add --dev npm-run-all -W && antora --clean --fetch antora-playbook.yml"， ```
CAMEL-15248,Andrea Cosentino,2020-07-03T13:28:33+0000,1593768513， where 1593768513 is the epoch,ArangoDB is a graph database that is gaining a good momentum in the area of graph database， and thus would be valuable to have a component for it in Camel. ArangoDB Java Driver has Apache 2.0 license and hence shouldn't be an issue to include the driver in the dependencies,Hide Permalink Zineb BENDHIBA added a comment - 03/Jul/20 13:28 I'd like to work on this!! Show Zineb BENDHIBA added a comment - 03/Jul/20 13:28 I'd like to work on this!! Hide Permalink Omar Al-Safi added a comment - 03/Jul/20 19:49 You are welcome to work on it . Show Omar Al-Safi added a comment - 03/Jul/20 19:49 You are welcome to work on it . Hide Permalink Zineb BENDHIBA added a comment - 06/Jul/20 09:40 I'm working on it !! Show Zineb BENDHIBA added a comment - 06/Jul/20 09:40 I'm working on it !! Hide Permalink Zineb BENDHIBA added a comment - 15/Jul/20 10:03 Hello This is the PR link : https://github.com/apache/camel/pull/4002 I did a producer only， for operations on collections only for a fist commit. I would love to have feedback. And I have a question: is it better tu use Async ? If yes， I could switch the ArangoDB async interfaces instead. Show Zineb BENDHIBA added a comment - 15/Jul/20 10:03 Hello This is the PR link : https://github.com/apache/camel/pull/4002 I did a producer only， for operations on collections only for a fist commit. I would love to have feedback. And I have a question: is it better tu use Async ? If yes， I could switch the ArangoDB async interfaces instead. Hide Permalink Andrea Cosentino added a comment - 16/Jul/20 15:24 Thanks Zineb BENDHIBA Show Andrea Cosentino added a comment - 16/Jul/20 15:24 Thanks Zineb BENDHIBA
CAMEL-15247,Claus Ibsen,2020-06-27T07:02:33+0000,1593226953， where 1593226953 is the epoch,In case rest configuration is configured via properties via camelcontext api then we need a source code generated configurer to avoid reflection,There are no comments yet on this issue.
CAMEL-15246,Andrea Cosentino,2020-06-26T05:50:10+0000,1593136210， where 1593136210 is the epoch,We should only keep 2.x 3.4 (LTS) latestas the versions in the website/documentation.So we should remove 3.3.x,There are no comments yet on this issue.
CAMEL-15245,Claus Ibsen,2020-06-26T06:59:05+0000,1593140345， where 1593140345 is the epoch,I see the following behavior with the default shutdown strategy: when the graceful shutdown of a route times-out， a forced shutdow is executed by Camel. The following is logged in this case:2020-06-25 14:59:57，640 INFO http-nio-127.0.0.1-9080-exec-10 [] [] org.apache.camel.impl.engine.DefaultShutdownStrategy - Starting to graceful shutdown 1 routes (timeout 10 seconds)2020-06-25 15:00:07，647 WARN http-nio-127.0.0.1-9080-exec-10 [] [] org.apache.camel.impl.engine.DefaultShutdownStrategy - Timeout occurred during graceful shutdown. Forcing the routes to be shutdown now. Notice: some resources may still be running as graceful shutdown did not complete successfully.After the forced shutdown succeeds the following is logged2020-06-25 15:00:08，711 INFO http-nio-127.0.0.1-9080-exec-10 [] [] org.apache.camel.impl.engine.DefaultShutdownStrategy - Graceful shutdown of 1 routes completed in 11 secondsAfter the starting the route however the default shutdown strategy from the camel context has the forceShutdown flag set to true， causing the execution of the route to fail as follows:Caused by: java.util.concurrent.RejectedExecutionException: Run not allowed as ShutdownStrategy is forcing shutting down， will reject executing exchange: Exchange[] at org.apache.camel.processor.SharedCamelInternalProcessor.continueProcessing(SharedCamelInternalProcessor.java:310) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.processor.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:145) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.processor.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:110) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.processor.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:107) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.DefaultProducerCache.send(DefaultProducerCache.java:185) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153) ~[camel-base-3.4.0.jar:3.4.0] at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeaders(DefaultProducerTemplate.java:295) ~[camel-base-3.4.0.jar:3.4.0],Hide Permalink Claus Ibsen added a comment - 26/Jun/20 06:59 Just to be sure you are stopping one route， and expect other routes to keep running? In other words you are not stopping/shutting down the entire CamelContext - as the latter should force shutdown all routes and stop Camel itself (and if so then the behaviour is correct) Show Claus Ibsen added a comment - 26/Jun/20 06:59 Just to be sure you are stopping one route， and expect other routes to keep running? In other words you are not stopping/shutting down the entire CamelContext - as the latter should force shutdown all routes and stop Camel itself (and if so then the behaviour is correct) Hide Permalink Jh. To. added a comment - 27/Jun/20 21:28 I'm not shutting down the entire Camel context. For a given routeId my code is doing something like the following (pseudo-code follows): // Get all routes List<RouteStartupOrder> routes = camelContext.adapt(ExtendedCamelContext.class).getRouteStartupOrder(); // Filter routes by the provided routeId List<RouteStartupOrder> filteredRoutes = ... // Shut down only the routes with routeId camelContext.getShutdownStrategy().shutdown(camelContext， filteredRoutes) After the shutdown strategy timeout is exceeded a forceful shutdown of the routes with routeId is done by Camel. Then after the routes with routeId are started again， forceShutdown flag in the CamelContext is still set to true， and the routes with routeId cannot process any messages due the exception Caused by: java.util.concurrent.RejectedExecutionException: Run not allowed as ShutdownStrategy is forcing shutting down， will reject executing exchange: Exchange[] Show Jh. To. added a comment - 27/Jun/20 21:28 I'm not shutting down the entire Camel context. For a given routeId my code is doing something like the following (pseudo-code follows): // Get all routes List<RouteStartupOrder> routes = camelContext.adapt(ExtendedCamelContext.class).getRouteStartupOrder(); // Filter routes by the provided routeId List<RouteStartupOrder> filteredRoutes = ... // Shut down only the routes with routeId camelContext.getShutdownStrategy().shutdown(camelContext， filteredRoutes) After the shutdown strategy timeout is exceeded a forceful shutdown of the routes with routeId is done by Camel. Then after the routes with routeId are started again， forceShutdown flag in the CamelContext is still set to true， and the routes with routeId cannot process any messages due the exception Caused by: java.util.concurrent.RejectedExecutionException: Run not allowed as ShutdownStrategy is forcing shutting down， will reject executing exchange: Exchange[] Hide Permalink Claus Ibsen added a comment - 29/Jun/20 16:57 Ah okay so you should ideally use the stopRoute method on CamelContext to stop routes. Calling shutdown directly on the shutdown strategy tend to be for Camel itself. Show Claus Ibsen added a comment - 29/Jun/20 16:57 Ah okay so you should ideally use the stopRoute method on CamelContext to stop routes. Calling shutdown directly on the shutdown strategy tend to be for Camel itself. Hide Permalink Claus Ibsen added a comment - 29/Jun/20 17:56 And you are sure you are not using shutdownForced ? as that is the one that sets the flag about forced Show Claus Ibsen added a comment - 29/Jun/20 17:56 And you are sure you are not using shutdownForced ? as that is the one that sets the flag about forced Hide Permalink Jh. To. added a comment - 02/Jul/20 19:37 The issue happens when the graceful shutdown times out， at that point it seems the forceShutdown flag is set at that point. Nevertheless I think you are right， calling only stopRoute is working properly for me so there is actually no need to call camelContext.getShutdownStrategy().shutdown(camelContext， filteredRoutes) to shutdown my routes. My understanding was that this shutdown API would shutdown only the provided filteredRoutes. As far as I saw it does however the context-level forceShutdown variable seems to be set to true when the forceful shutdown is forced and not reset back to false， yielding to the issue described in the issue. From my perspective is not an issue anymore since my code is working now properly by using stopRoute instead. Not sure however if this is still an issue for someone else trying to stop routes using the shutdown strategy shutdown method. Show Jh. To. added a comment - 02/Jul/20 19:37 The issue happens when the graceful shutdown times out， at that point it seems the forceShutdown flag is set at that point. Nevertheless I think you are right， calling only stopRoute is working properly for me so there is actually no need to call camelContext.getShutdownStrategy().shutdown(camelContext， filteredRoutes) to shutdown my routes. My understanding was that this shutdown API would shutdown only the provided filteredRoutes. As far as I saw it does however the context-level forceShutdown variable seems to be set to true when the forceful shutdown is forced and not reset back to false， yielding to the issue described in the issue. From my perspective is not an issue anymore since my code is working now properly by using stopRoute instead. Not sure however if this is still an issue for someone else trying to stop routes using the shutdown strategy shutdown method. Hide Permalink Claus Ibsen added a comment - 03/Jul/20 12:58 I have updated the javadoc in the camel api to point you to use the stop route api via route controller. Show Claus Ibsen added a comment - 03/Jul/20 12:58 I have updated the javadoc in the camel api to point you to use the stop route api via route controller.
CAMEL-15244,Andrea Cosentino,2020-06-25T15:46:16+0000,1593085576， where 1593085576 is the epoch,As reported on gitterHi， I've noticed we get the following warning when using groupedBodyAggregationStrategy with sjms-batch.2020-06-25 22:49:19.522 WARN ||| 21068 — [msBatchConsumer] o.a.c.p.a.GroupedBodyAggregationStrategy : Parallel processing timed out after 500 millis for number 18. This task will be cancelled and will not be aggregated.I think it comes from this default interface implementation on AggregationStrategy. default void timeout(Exchange exchange， int index， int total， long timeout) { // log a WARN we timed out since it will not be aggregated and the Exchange will be lost LoggerFactory.getLogger(getClass()).warn("Parallel processing timed out after {} millis for number {}. This task will be cancelled and will not be aggregated."， timeout， index); }I think the warning is wrong as the aggregated messages do seem to come through. It is just annoying in the logs. I can change log level for this category to error but I'm concerned there may be genuine info that will be hidden. Any thoughts?,There are no comments yet on this issue.
CAMEL-15243,Unassigned,2020-06-25T10:07:34.363Z,1593065254.363， where 1593065254.363 is the epoch,I'm having a karaf application (4.0.2)in which i have multiple blueprint projects.Each of them have multiple quartz2 job.Each time i install the application，Quartz add new rows in the qrtz_triggers table.The sched_name takes the name of the bundle and append a counter. Each time i install a new version of my application it creates a new rows with the same mecanism(bundleName+Counter).Now suppose i have a misfire say for example for MyBundle-23.After many installation there is a risk that the new created row in qrtz_triggers will be same as MyBundle-23 and thus triggering an old misfire.,Hide Permalink Andrea Cosentino added a comment - 25/Jun/20 11:55 It's a really old version and we don't plan to release it anymore， can you try with a new version? Show Andrea Cosentino added a comment - 25/Jun/20 11:55 It's a really old version and we don't plan to release it anymore， can you try with a new version? Hide Permalink nizar.ben.mansour added a comment - 25/Jun/20 13:53 Hello I can confirm that the bug is fixed on the 2.23.4 version.In fact the algorithm have been changed in setting the sched_name . The old algorithm was using an antomicInteger NEXT_COUNTER to be appened to the bundle name. For the new one，each new installation of the bundle it delete the previous qrtz_triggers rows and create new one. Besides，the schedularName (sched_name ) is now a concatination of the bundleName+ContextID (see attached picture). Show nizar.ben.mansour added a comment - 25/Jun/20 13:53 Hello I can confirm that the bug is fixed on the 2.23.4 version.In fact the algorithm have been changed in setting the sched_name . The old algorithm was using an antomicInteger NEXT_COUNTER to be appened to the bundle name. For the new one，each new installation of the bundle it delete the previous qrtz_triggers rows and create new one. Besides，the schedularName (sched_name ) is now a concatination of the bundleName+ContextID (see attached picture).
CAMEL-15242,Jiri Ondrusek,2020-07-01T09:21:55+0000,1593580915， where 1593580915 is the epoch,1.2 final has been released,Hide Permalink Jiri Ondrusek added a comment - 01/Jul/20 09:21 Fixed via https://issues.apache.org/jira/browse/CAMEL-15261 Show Jiri Ondrusek added a comment - 01/Jul/20 09:21 Fixed via https://issues.apache.org/jira/browse/CAMEL-15261 Hide Permalink Omar Al-Safi added a comment - 01/Jul/20 10:27 hey Jiri Ondrusek， sorry I wasn't aware about this ticket and you were assigned to it Show Omar Al-Safi added a comment - 01/Jul/20 10:27 hey Jiri Ondrusek ， sorry I wasn't aware about this ticket and you were assigned to it Hide Permalink Jiri Ondrusek added a comment - 01/Jul/20 10:51 Omar Al-Safi no problem. It took me more time then expected because I had a problems to verify basic debezium-mongodb functionality (could not configure mongdb correctly) Show Jiri Ondrusek added a comment - 01/Jul/20 10:51 Omar Al-Safi no problem. It took me more time then expected because I had a problems to verify basic debezium-mongodb functionality (could not configure mongdb correctly)
CAMEL-15241,Unassigned,2020-06-25T06:53:54+0000,1593053634， where 1593053634 is the epoch,Couchbase client was upgraded in camel-couchbase component and there is no osgi bundle for client， therefore the best would be to remove camel-couchbase feature from karaf.,There are no comments yet on this issue.
CAMEL-15240,Andrea Cosentino,2020-06-25T04:37:45+0000,1593045465， where 1593045465 is the epoch,deprecation | 207 - org.apache.velocity.engine-core - 2.1.0 | configuration key 'class.resource.loader.class' has been deprecated in favor of 'resource.loader.class.class'deprecation | 207 - org.apache.velocity.engine-core - 2.1.0 | configuration key 'resource.loader' has been deprecated in favor of 'resource.loaders'deprecation | 207 - org.apache.velocity.engine-core - 2.1.0 | configuration key 'class.resource.loader.description' has been deprecated in favor of 'resource.loader.class.description' Thanks Gerald Kallas for reporting on user mailing list.,There are no comments yet on this issue.
CAMEL-15239,Andrea Cosentino,2020-06-24T15:36:19+0000,1592998579， where 1592998579 is the epoch,The example given in the documentation does not work in 3.4.0:from("direct:in"). setHeader("CamelVelocityResourceUri").constant("path/to/my/template.vm"). to("velocity:dummy");One has to use the allowTemplateFromHeader in the endpoint:from("direct:in"). setHeader("CamelVelocityResourceUri").constant("path/to/my/template.vm"). to("velocity:dummy?allowTemplateFromHeader=true");,Hide Permalink Andrea Cosentino added a comment - 24/Jun/20 15:36 This should be true for other templating components. Show Andrea Cosentino added a comment - 24/Jun/20 15:36 This should be true for other templating components.
CAMEL-15238,Unassigned,2020-06-24T15:12:21.533Z,1592997141.533， where 1592997141.533 is the epoch,The current dropdown menu is simple of course however， In my opinion， it can be made much more minimal， and much simpler CSS could be applied to beautify it.1. The on-hover color change of the navbar items should be changed. Reasons can create a dizzy feeling on the continuous color change of text & also this method is rarely applied on any website. An alternative approach to it - Just apply a border-bottom approach when hovering over navbar menu items. Also when hovered around the ones with a dropdown menu， rotate it by 135 deg with the transition. Many websites including Github， Myntra， etc use this technique. 2. For the ones with the dropdown menu on hover over navbar items， it has really less width and when you navigate through the dropdown items， you observe that there is a gray background color. Personally， I don't think it suits the design. An alternative approach to it - Increase the width and while hovering over the dropdown menu items， just increase its font-weight to provide the effect. This is the preview of how the design would be.,Hide Permalink Aemie added a comment - 29/Jun/20 15:34 Zoran Regvart Maria Arias de Reyna Dominguez what are your opinions on this? Show Aemie added a comment - 29/Jun/20 15:34 Zoran Regvart Maria Arias de Reyna Dominguez what are your opinions on this? Hide Permalink Maria Arias de Reyna Dominguez added a comment - 30/Jun/20 07:15 I like the simplicity， I agree. Your snapshot looks great. Just make sure long menu lines don't break on hover (because they get too big and don't fit). On the example I see there's plenty of space， but I am not sure about the rest of the menus. Show Maria Arias de Reyna Dominguez added a comment - 30/Jun/20 07:15 I like the simplicity， I agree. Your snapshot looks great. Just make sure long menu lines don't break on hover (because they get too big and don't fit). On the example I see there's plenty of space， but I am not sure about the rest of the menus. Hide Permalink Zoran Regvart added a comment - 30/Jun/20 22:37 Not sure about switching the font weight on hover (User stories in the screenshot are bold other items are not)， this could easily lead to reflow and look glitchy. I'm not a big fan of the current colour change on-hover either， I think if it was more subtle it would work better (like on github.com or miro.io). I'd like to move away from menu dropdowns if at all possible， it's odd that some menus now have them and some don't. I like the border bottom effect though， the same can perhaps be made with the default link decoration (underline). I'm unsure about animating the arrow indicating the dropdown menu， that might look a bit too gimmicky. Show Zoran Regvart added a comment - 30/Jun/20 22:37 Not sure about switching the font weight on hover (User stories in the screenshot are bold other items are not)， this could easily lead to reflow and look glitchy. I'm not a big fan of the current colour change on-hover either， I think if it was more subtle it would work better (like on github.com or miro.io). I'd like to move away from menu dropdowns if at all possible， it's odd that some menus now have them and some don't. I like the border bottom effect though， the same can perhaps be made with the default link decoration (underline). I'm unsure about animating the arrow indicating the dropdown menu， that might look a bit too gimmicky. Hide Permalink Aemie added a comment - 01/Jul/20 11:14 Zoran Regvart in my opinion the current dropdowns are required honestly. Continuous navigation for those 2 dropdowns seems not like a good idea. Dropdowns are easy for the user to navigate. Also， I was looking through designs & I landed across one that caught my attention. I am putting the link here， https://www.mockplus.com/?home=1 The reason I like this dropdown is it looks highly interactive and also if we are going to use the mock design for the navbar within the mobile screen， this design can seem consistent with it. So instead of color change on hover， we could use border-bottom and as there will be enough space (if we use the design style as shown in the link)， we could include the icons as well on hover just use a text-underline or border-bottom. This manner will look neat， consistent and interactive in my opinion. Show Aemie added a comment - 01/Jul/20 11:14 Zoran Regvart in my opinion the current dropdowns are required honestly. Continuous navigation for those 2 dropdowns seems not like a good idea. Dropdowns are easy for the user to navigate. Also， I was looking through designs & I landed across one that caught my attention. I am putting the link here， https://www.mockplus.com/?home=1 The reason I like this dropdown is it looks highly interactive and also if we are going to use the mock design for the navbar within the mobile screen， this design can seem consistent with it. So instead of color change on hover， we could use border-bottom and as there will be enough space (if we use the design style as shown in the link)， we could include the icons as well on hover just use a text-underline or border-bottom. This manner will look neat， consistent and interactive in my opinion. Hide Permalink Zoran Regvart added a comment - 02/Jul/20 08:40 Aemie oh， very nice， I very much like the full width menus， this can work well with icons we discussed in CAMEL-15140 Show Zoran Regvart added a comment - 02/Jul/20 08:40 Aemie oh， very nice， I very much like the full width menus， this can work well with icons we discussed in CAMEL-15140 Hide Permalink Aemie added a comment - 04/Jul/20 08:54 - edited Zoran Regvart Maria Arias de Reyna Dominguez I added a rough layout on the design (dropdown-design-x). Here， contributing is the one hovered on. The icons used in this are just temporary as I just wanted to create a layout before implementation. I am uncertain about the combination of the colors to suit in the dropdown ( I currently like the dropdown-design-4 ). However， would love to get your opinions on it. Show Aemie added a comment - 04/Jul/20 08:54 - edited Zoran Regvart Maria Arias de Reyna Dominguez I added a rough layout on the design (dropdown-design-x). Here， contributing is the one hovered on. The icons used in this are just temporary as I just wanted to create a layout before implementation. I am uncertain about the combination of the colors to suit in the dropdown ( I currently like the dropdown-design-4 ). However， would love to get your opinions on it.
CAMEL-15237,Claus Ibsen,2020-06-24T10:25:21+0000,1592979921， where 1592979921 is the epoch,This may generate the archetype-catalog in random order. Lets make sure its fixeddiff --git a/catalog/camel-catalog/src/generated/resources/org/apache/camel/catalog/archetypes/archetype-catalog.xml b/catalog/camel-catalog/src/generated/resources/org/apache/camel/catalog/archetypes/archetype-catalog.xmlindex 1c960fac35e..eb476a6d9a9 100644— a/catalog/camel-catalog/src/generated/resources/org/apache/camel/catalog/archetypes/archetype-catalog.xml+++ b/catalog/camel-catalog/src/generated/resources/org/apache/camel/catalog/archetypes/archetype-catalog.xml@@ -3，57 +3，57 @@ <archetypes> <archetype> <groupId>org.apache.camel.archetypes</groupId> <artifactId>camel-archetype-api-component</artifactId>+ <artifactId>camel-archetype-component</artifactId> <version>3.5.0-SNAPSHOT</version> <description>Creates a new Camel component that wraps one or more API proxies.</description>+ <description>Creates a new Camel component.</description> </archetype> <archetype> <groupId>org.apache.camel.archetypes</groupId> <artifactId>camel-archetype-blueprint</artifactId>+ <artifactId>camel-archetype-main</artifactId> <version>3.5.0-SNAPSHOT</version> <description>Creates a new Camel project with OSGi blueprint support. Ready to be deployed in OSGi.</description>+ <description>Creates a new Camel project using standalone Camel Main.</description> </archetype>,There are no comments yet on this issue.
CAMEL-15236,Claus Ibsen,2020-06-24T12:14:13+0000,1592986453， where 1592986453 is the epoch,I suspect its like we had on generate configurerhttps://github.com/apache/camel/blob/ac9c191c01340e89b7f6e01e9a25d0af16247f81/tooling/maven/camel-package-maven-plugin/src/main/java/org/apache/camel/maven/packaging/GenerateConfigurerMojo.java#L331Where a option that is of type long， may have 2 setters one for Long and another for String. And then depending on the JDK compiler you may get a setter by random order.So we should select the actual type via the field as done above,Hide Permalink Claus Ibsen added a comment - 24/Jun/20 12:14 Lets see if we can reproduce this again Show Claus Ibsen added a comment - 24/Jun/20 12:14 Lets see if we can reproduce this again Hide Permalink Claus Ibsen added a comment - 26/Jun/20 07:18 Have not seen this since Show Claus Ibsen added a comment - 26/Jun/20 07:18 Have not seen this since
CAMEL-15235,Unassigned,2020-06-25T09:32:35+0000,1593063155， where 1593063155 is the epoch,The next LTS release 3.7 (planned) should support both JDK 11 and 14.So in the next coming non-lts releases we should work on adding support for JDK14.The CI job is herehttps://builds.apache.org/view/C/view/Apache%20Camel/job/Camel%20JDK14/We have some 3rd party dependencies that have troubles so we need to work with them to support JDK14.,Hide Permalink Matej Melko added a comment - 25/Jun/20 09:32 I can look at this Show Matej Melko added a comment - 25/Jun/20 09:32 I can look at this Hide Permalink Matej Melko added a comment - 26/Jun/20 07:08 From what I investigated we need to wait for new mvel release with: https://github.com/mvel/mvel/pull/239/ . I with updated mvel I was able to successfully build camel with openjdk14 and `fastinstall` profile . Show Matej Melko added a comment - 26/Jun/20 07:08 From what I investigated we need to wait for new mvel release with: https://github.com/mvel/mvel/pull/239/ . I with updated mvel I was able to successfully build camel with openjdk14 and `fastinstall` profile . Hide Permalink Claus Ibsen added a comment - 26/Jun/20 07:11 Oh that is great to hear， so fingers crossed a new mvel release is out. We had the same problem with java 11 and mvel. Show Claus Ibsen added a comment - 26/Jun/20 07:11 Oh that is great to hear， so fingers crossed a new mvel release is out. We had the same problem with java 11 and mvel. Hide Permalink Claus Ibsen added a comment - 30/Aug/20 08:28 Looks like we have preliminary support for Java 14 in Camel 3.5 - The CI builds are looking good. Show Claus Ibsen added a comment - 30/Aug/20 08:28 Looks like we have preliminary support for Java 14 in Camel 3.5 - The CI builds are looking good. Hide Permalink Matej Melko added a comment - 31/Aug/20 05:09 Yeah， looks like upgrade mvel and weld (https://github.com/apache/camel/commit/d9c2bfd79f078ae4734fae6c5695361e64a7709c) resolved this. Show Matej Melko added a comment - 31/Aug/20 05:09 Yeah， looks like upgrade mvel and weld ( https://github.com/apache/camel/commit/d9c2bfd79f078ae4734fae6c5695361e64a7709c) resolved this.
CAMEL-15234,Unassigned,2020-07-04T07:19:04+0000,1593832744， where 1593832744 is the epoch,Camel 3.4 LTS is the last release to support Java 1.8.We should drop this in 3.5 onwards and then shift to focus on JDK 11 and 14 as supported.,Hide Permalink Claus Ibsen added a comment - 04/Jul/20 07:19 Moved til start of 2021 Show Claus Ibsen added a comment - 04/Jul/20 07:19 Moved til start of 2021
CAMEL-15233,Unassigned,2020-06-24T07:25:31+0000,1592969131， where 1592969131 is the epoch,CometDReplayExtension class try to read the replayId from the message by doing final Object value = message.get(EXTENSION_NAME);However， the replayId (based on this https://developer.salesforce.com/docs/atlas.en-us.api_streaming.meta/api_streaming/using_streaming_api_durability.htm) is actually within data -> event -> replayId. By doing the following (the same thing the salesforce consumer does https://github.com/apache/camel/blob/master/components/camel-salesforce/camel-salesforce-component/src/main/java/org/apache/camel/component/salesforce/SalesforceConsumer.java#L250)final Map<String， Object> data = (Map<String， Object>) message.get("data");final Map<String， Object> event = (Map<String， Object>) data.get("event");final Object value = event.get("replayId");I was able to properly fetch the replayId from the message. Since the current version does not do this properly， If the component loses the connection and has to subscribe again it will use the replayid value from the endpoint which it will be outdated if any message was read before the connection failure.,Hide Permalink Claus Ibsen added a comment - 24/Jun/20 07:25 There are a number of tickets reported for camel-salesforce. Maybe you can look at the others and see if some also report about this replayId bug. I think I have seen this reported before. As it would be good to get as much detail as possible. Show Claus Ibsen added a comment - 24/Jun/20 07:25 There are a number of tickets reported for camel-salesforce. Maybe you can look at the others and see if some also report about this replayId bug. I think I have seen this reported before. As it would be good to get as much detail as possible. Hide Permalink Claus Ibsen added a comment - 24/Jun/20 07:25 And can you tell us which Camel version you are using? Show Claus Ibsen added a comment - 24/Jun/20 07:25 And can you tell us which Camel version you are using? Hide Permalink Edgar Chernick added a comment - 24/Jun/20 14:11 I looked into open bugs for camel-saleforce and I found one that might be related to this (I've linked it to this card). However that card is unresolved. I'm using version 2.25.1. But looking in version 3.4.0 I can see the CometDReplayExtension class has not been changed. Show Edgar Chernick added a comment - 24/Jun/20 14:11 I looked into open bugs for camel-saleforce and I found one that might be related to this (I've linked it to this card). However that card is unresolved. I'm using version 2.25.1. But looking in version 3.4.0 I can see the CometDReplayExtension class has not been changed. Hide Permalink Edgar Chernick added a comment - 01/Jul/20 23:33 - edited Hi guys， I've tried fixing the issue myself here https://github.com/apache/camel/compare/master...edgarc-ciandt:master. Would you guys mind taking a look and code reviewing it ? I have deleted the CometDReplayExtension class and used another implementation of it from https://github.com/forcedotcom/EMP-Connector/blob/master/src/main/java/com/salesforce/emp/connector/ReplayExtension.java I have also created some unit tests to cover it. Another question. I would need to have this fixed on 2.25， do you guys think it's possible or the fix will probably be applied to the latest version only ? Show Edgar Chernick added a comment - 01/Jul/20 23:33 - edited Hi guys， I've tried fixing the issue myself here https://github.com/apache/camel/compare/master...edgarc-ciandt:master . Would you guys mind taking a look and code reviewing it ? I have deleted the CometDReplayExtension class and used another implementation of it from https://github.com/forcedotcom/EMP-Connector/blob/master/src/main/java/com/salesforce/emp/connector/ReplayExtension.java I have also created some unit tests to cover it. Another question. I would need to have this fixed on 2.25， do you guys think it's possible or the fix will probably be applied to the latest version only ? Hide Permalink Claus Ibsen added a comment - 02/Jul/20 05:10 Hi Edgar Yes this looks great. And since this is an internal change only and fixes/improves this then I can see us backport this to 2.25.x. The source from salesforce is BSD-3 which we can accept For the unit test can you find another way with the reflection to avoid using log4j util， as logging library. And when ready can you create a PR. Show Claus Ibsen added a comment - 02/Jul/20 05:10 Hi Edgar Yes this looks great. And since this is an internal change only and fixes/improves this then I can see us backport this to 2.25.x. The source from salesforce is BSD-3 which we can accept For the unit test can you find another way with the reflection to avoid using log4j util， as logging library. And when ready can you create a PR. Hide Permalink Edgar Chernick added a comment - 02/Jul/20 15:23 I have drafted the PR https://github.com/apache/camel/pull/3969 Show Edgar Chernick added a comment - 02/Jul/20 15:23 I have drafted the PR https://github.com/apache/camel/pull/3969 Hide Permalink Andrea Cosentino added a comment - 03/Jul/20 08:57 Can you create the PR for 2.25.x too? It cannot be cherry-picked from master， I guess. Show Andrea Cosentino added a comment - 03/Jul/20 08:57 Can you create the PR for 2.25.x too? It cannot be cherry-picked from master， I guess. Hide Permalink Claus Ibsen added a comment - 03/Jul/20 13:33 Yes a PR for 2.25.x would be apprecated as it cannot be cherry-picked. I backported to 3.4.x Show Claus Ibsen added a comment - 03/Jul/20 13:33 Yes a PR for 2.25.x would be apprecated as it cannot be cherry-picked. I backported to 3.4.x Hide Permalink Edgar Chernick added a comment - 06/Jul/20 01:13 PR for 2.25.x created https://github.com/apache/camel/pull/3975 Show Edgar Chernick added a comment - 06/Jul/20 01:13 PR for 2.25.x created https://github.com/apache/camel/pull/3975
CAMEL-15232,Unassigned,2020-06-25T14:17:02+0000,1593080222， where 1593080222 is the epoch,Support for the x-single-active-consumer queue argument to be supported in the URI as part of the queueargs map. https://www.rabbitmq.com/consumers.html#single-active-consumer,Hide Permalink Claus Ibsen added a comment - 25/Jun/20 14:17 You can do that today by setting arg.x-single-active-consumer=true on the endpoint uri or globally on the component level. Show Claus Ibsen added a comment - 25/Jun/20 14:17 You can do that today by setting arg.x-single-active-consumer=true on the endpoint uri or globally on the component level.
CAMEL-15231,Claus Ibsen,2020-06-24T12:19:41+0000,1592986781， where 1592986781 is the epoch,Pulsar supports a fantastic feature that is very common to Pulsar users. That is subscribing to a pattern of topics defined by a regular expression.// Subscribe to all topics in a namespacePattern allTopicsInNamespace = Pattern.compile("persistent://public/default/.*");{ Consumer<byte[]> allTopicsConsumer = pulsarClient.newConsumer() .topicsPattern(allTopicsInNamespace) .subscriptionName("subscription-1") .subscribe();The Pulsar component in camel doesn't seem to support this important use case. I'm wondering if someone familiar with the Camel Pulsar component could estimate the level of effort for a change like this. I'm not familiar enough with the project to even pinpoint where a change like this should go.}}See also:https://pulsar.apache.org/docs/en/concepts-messaging/#multi-topic-subscriptions,Hide Permalink Claus Ibsen added a comment - 24/Jun/20 12:19 Yeah that should be possible. Its to use topicsPattern instead of topic here https://github.com/apache/camel/blob/968b29e5ac4816ae90574d0883b7508e96f2727c/components/camel-pulsar/src/main/java/org/apache/camel/component/pulsar/utils/consumers/CommonCreationStrategyImpl.java#L37 However we should have a way to know if its a pattern or not. Either we add a new option you must set as well topicsPattern=true Or we try to guess from the uri that its a pattern - but it can be a bit harder when its regexp as you can say (blue|green) and not only use wildcards. Show Claus Ibsen added a comment - 24/Jun/20 12:19 Yeah that should be possible. Its to use topicsPattern instead of topic here https://github.com/apache/camel/blob/968b29e5ac4816ae90574d0883b7508e96f2727c/components/camel-pulsar/src/main/java/org/apache/camel/component/pulsar/utils/consumers/CommonCreationStrategyImpl.java#L37 However we should have a way to know if its a pattern or not. Either we add a new option you must set as well topicsPattern=true Or we try to guess from the uri that its a pattern - but it can be a bit harder when its regexp as you can say (blue|green) and not only use wildcards. Hide Permalink Claus Ibsen added a comment - 25/Jun/20 07:33 There is a work in progress PR here https://github.com/apache/camel/pull/3948 Show Claus Ibsen added a comment - 25/Jun/20 07:33 There is a work in progress PR here https://github.com/apache/camel/pull/3948 Hide Permalink Scott Anderson added a comment - 25/Jun/20 13:47 Wow! Thank you so much! Show Scott Anderson added a comment - 25/Jun/20 13:47 Wow! Thank you so much!
CAMEL-15230,Unassigned,2020-06-25T14:18:46+0000,1593080326， where 1593080326 is the epoch,It seems like there is no strict requirement for rabbitmq.EXCHANGE_NAME header to set by a producer e.g. the following code "works":from("direct:foo") .to("bar.exchange?queue=bar.queue&autoDelete=false") .end()However in this instance a span will be created with null as the operation name.Such spans will be ignored by the collector e.g. Jaeger， which results in subsequent spans having missing parents and "invalid parent span id" warnings appearing.Doing the following prevents this.from("direct:foo") .setHeader("rabbitmq.EXCHANGE_NAME").simple("bar.exchange") .to("bar.exchange?queue=bar.queue&autoDelete=false") .end()It seems like we don't necessarily need the overridden getDestination method in the RabbitMqSpanDecorator and could fall through to the base implementation?Happy to raise a PR but thought I would collect thoughts in case I had missed some subtlety.,Hide Permalink Claus Ibsen added a comment - 25/Jun/20 14:18 Yeah that seems correct， if the header is null， then grab from the endpoint uri. You are welcome to work on a PR Show Claus Ibsen added a comment - 25/Jun/20 14:18 Yeah that seems correct， if the header is null， then grab from the endpoint uri. You are welcome to work on a PR
CAMEL-15229,Claus Ibsen,2020-06-23T05:00:38.458Z,1592874038.458， where 1592874038.458 is the epoch,When autoDiscoverObjectMapper is set on JsonDataFormat definition， it is not propagated to JacksonDataFormat. Looking at the code in JsonDataFormatReifier I was not able to see this property in the list of populated properties. Please see attachment for the reproducer project. ObjectMapperTest demonstrates the issue. In the route builder we set:json.setAutoDiscoverObjectMapper("true"); but it has no affect， indicated by an exception on Java Time deserialization and a message in logs:o.a.c.c.jackson.JacksonDataFormat : The option autoDiscoverObjectMapper is set to false， Camel won't search in the registry...Exhausted after delivery attempt: 1 caught: com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `java.time.LocalDate` (no Creators， like default construct， exist): no String-argument constructor/factory method to deserialize from String value ('2077-01-01'),Hide Permalink Claus Ibsen added a comment - 23/Jun/20 07:19 Thanks for reporting and the test case Show Claus Ibsen added a comment - 23/Jun/20 07:19 Thanks for reporting and the test case
CAMEL-15228,Ramu,2020-06-23T07:20:04+0000,1592882404， where 1592882404 is the epoch,For batch requirements it is currently not possible to get a signal for the last result within a poll request in processors (over all partitions and topics).The problem with this is， that a Processor cannot know when the last record of a poll received and it is time for commits to all of the affected partitions， because you cannot be sure that there is always a content in every partition and therefore you have no info in Processer， if any further message arrives.Solution could be to add a property to the manual commit handler in the KafkaConsumer.KafkaFetchRecords.doRun exchange.getIn().setHeader(KafkaConstants.MANUAL_COMMIT， manual);//adding new exchange propertyexchange.getIn().setHeader(KafkaConstants.LAST_RECORD_OF_CURRENT_POLL_REQUEST， last_record_of_last_partition);LAST_RECORD_IN_CURRENT_POLL_REQUEST should be a boolean to signal end of the loop over all partitions,Hide Permalink Claus Ibsen added a comment - 23/Jun/20 07:20 You are welcome to work on a PR to implement this Show Claus Ibsen added a comment - 23/Jun/20 07:20 You are welcome to work on a PR to implement this Hide Permalink Ramu added a comment - 29/Jun/20 06:44 Jörg are you working on fix Show Ramu added a comment - 29/Jun/20 06:44 Jörg are you working on fix Hide Permalink Jörg added a comment - 29/Jun/20 10:08 Yes. Already implemented. Working finally on test case and docs update Show Jörg added a comment - 29/Jun/20 10:08 Yes. Already implemented. Working finally on test case and docs update
CAMEL-15227,Jean-Baptiste Onofré,2020-06-22T11:27:52+0000,1592810872， where 1592810872 is the epoch,Instead of having a component camel-osgi-activator， we can use a better whiteboard directly part of camel-core-osgi.We can also support several camel context using a service property and provide a new interface CamelContextConfigurer allowing to create and configure CamelContext smoothly.,There are no comments yet on this issue.
CAMEL-15226,Jean-Baptiste Onofré,2020-06-22T11:26:20+0000,1592810780， where 1592810780 is the epoch,Now that camel-karaf is its own repo， we can do a cleanup and better shape. I'm working on it.,There are no comments yet on this issue.
CAMEL-15225,Claus Ibsen,2020-06-22T07:49:21+0000,1592797761， where 1592797761 is the epoch,To make it the same as where we now generate other bits for components,There are no comments yet on this issue.
CAMEL-15224,Claus Ibsen,2020-06-22T08:10:38+0000,1592799038， where 1592799038 is the epoch,The api based components can in some places avoid reflection,Hide Permalink Claus Ibsen added a comment - 22/Jun/20 08:10 Okay camel-fhir is no longer using reflection Show Claus Ibsen added a comment - 22/Jun/20 08:10 Okay camel-fhir is no longer using reflection Hide Permalink Claus Ibsen added a comment - 22/Jun/20 08:14 - edited camel-as2 DONE camel-box DONE camel-braintree DONE camel-fhir DONE camel-google-calendar DONE camel-google-drive DONE camel-google-mail DONE camel-google-sheets DONE camel-olingo2 DONE camel-olingo4 DONE camel-twillo DONE camel-zendesk DONE Show Claus Ibsen added a comment - 22/Jun/20 08:14 - edited camel-as2 DONE camel-box DONE camel-braintree DONE camel-fhir DONE camel-google-calendar DONE camel-google-drive DONE camel-google-mail DONE camel-google-sheets DONE camel-olingo2 DONE camel-olingo4 DONE camel-twillo DONE camel-zendesk DONE Hide Permalink Claus Ibsen added a comment - 22/Jun/20 09:22 camel-as2 uses array type which the configurer generator needs to take into account Show Claus Ibsen added a comment - 22/Jun/20 09:22 camel-as2 uses array type which the configurer generator needs to take into account Hide Permalink Claus Ibsen added a comment - 22/Jun/20 11:59 - edited Okay so it was a bit more tougher with olingo4 as it does use some more reflection， which triggers some changes in camel-core api component that needs to update all api components. Show Claus Ibsen added a comment - 22/Jun/20 11:59 - edited Okay so it was a bit more tougher with olingo4 as it does use some more reflection， which triggers some changes in camel-core api component that needs to update all api components. Hide Permalink Claus Ibsen added a comment - 22/Jun/20 16:00 Okay so we are almost there， there are some reflection call still， but its much reduced. Show Claus Ibsen added a comment - 22/Jun/20 16:00 Okay so we are almost there， there are some reflection call still， but its much reduced.
CAMEL-15223,Claus Ibsen,2020-06-22T05:09:37+0000,1592788177， where 1592788177 is the epoch,We can make DefaultExchangeFormatter a Configurer so no reflection is used when configuring its options,Hide Permalink Claus Ibsen added a comment - 22/Jun/20 05:09 Ah it was already done， so this is for custom exchange formatters. Show Claus Ibsen added a comment - 22/Jun/20 05:09 Ah it was already done， so this is for custom exchange formatters.
CAMEL-15222,Unassigned,2020-06-21T23:39:14.104Z,1592768354.104， where 1592768354.104 is the epoch,According to the documentation， and also based on previous 2.x behavior it should be possible to call a processor bean using below syntax:from("activemq:myQueue").to("myProcessor");https://camel.apache.org/manual/latest/processor.htmlHowever based on attached unit test， it appears this syntax is no longer working with the 3.x code base. The problem appears to be in the AbstractCamelContext class where it is filtering the lookup to only Endpoint.class instances.answer = getRegistry().lookupByNameAndType(uri， Endpoint.class);https://github.com/apache/camel/blob/camel-3.4.x/core/camel-base/src/main/java/org/apache/camel/impl/engine/AbstractCamelContext.java#L827I'm wondering if Processor.class could be added as a secondary lookup or if there is another way the previously working syntax can be restored?,Hide Permalink Claus Ibsen added a comment - 22/Jun/20 04:12 - edited No there is not. .to is for calling endpoints. For calling a processor use .process Show Claus Ibsen added a comment - 22/Jun/20 04:12 - edited No there is not. .to is for calling endpoints. For calling a processor use .process Hide Permalink Claus Ibsen added a comment - 22/Jun/20 04:17 The docs was wrong and is being updated. Show Claus Ibsen added a comment - 22/Jun/20 04:17 The docs was wrong and is being updated. Hide Permalink Claus Ibsen added a comment - 22/Jun/20 04:25 You can use the bean component to call the processor， eg "bean:myProcessor" as a to endpoint. Show Claus Ibsen added a comment - 22/Jun/20 04:25 You can use the bean component to call the processor， eg "bean:myProcessor" as a to endpoint.
CAMEL-15221,Unassigned,2020-06-21T18:54:53+0000,1592751293， where 1592751293 is the epoch,Upgrade to latest Deep Java Library (0.5.0),There are no comments yet on this issue.
CAMEL-15220,Unassigned,2020-06-21T18:02:54+0000,1592748174， where 1592748174 is the epoch,Cannot access a Gmail IMAP account that could be accessed with Camel 2.x (so it is not caused by Gmail account configuration). OK Gimap ready for requests from 104.251.134.235 v6mb20621913vsqB0 CAPABILITY CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 XYZZY SASL-IR AUTH=XOAUTH2 AUTH=PLAIN AUTH=PLAIN-CLIENTTOKEN AUTH=OAUTHBEARER AUTH=XOAUTHB0 OK Thats all she wrote! v6mb20621913vsqDEBUG IMAPS: AUTH: XOAUTH2DEBUG IMAPS: AUTH: PLAINDEBUG IMAPS: AUTH: PLAIN-CLIENTTOKENDEBUG IMAPS: AUTH: OAUTHBEARERDEBUG IMAPS: AUTH: XOAUTHDEBUG IMAPS: protocolConnect login， host=imap.gmail.com， user=test@e-bonding.com， password=<non-null>DEBUG IMAPS: AUTHENTICATE PLAIN command trace suppressedDEBUG IMAPS: AUTHENTICATE PLAIN command result: B1 NO [AUTHENTICATIONFAILED] Invalid credentials (Failure)```2020-06-21 12:00:05.584 [Camel (camel-1) thread #3 - imaps://imap.gmail.com:993] MailConsumer - Consumer Consumer[imaps://imap.gmail.com:993?debugMode=true&delay=60000&delete=true&password=xxxxxx&searchTerm.fromSentDate=now-24h&username=test%40e-bonding.com] failed polling endpoint: imaps://imap.gmail.com:993?debugMode=true&delay=60000&delete=true&password=xxxxxx&searchTerm.fromSentDate=now-24h&username=test%40e-bonding.com. Will try again at next poll. Caused by: [javax.mail.AuthenticationFailedException - [AUTHENTICATIONFAILED] Invalid credentials (Failure)]2020-06-21 12:00:05.584 [Camel (camel-1) thread #3 - imaps://imap.gmail.com:993] MailConsumer - Consumer Consumer[imaps://imap.gmail.com:993?debugMode=true&delay=60000&delete=true&password=xxxxxx&searchTerm.fromSentDate=now-24h&username=test%40e-bonding.com] failed polling endpoint: imaps://imap.gmail.com:993?debugMode=true&delay=60000&delete=true&password=xxxxxx&searchTerm.fromSentDate=now-24h&username=test%40e-bonding.com. Will try again at next poll. Caused by: [javax.mail.AuthenticationFailedException - [AUTHENTICATIONFAILED] Invalid credentials (Failure)]javax.mail.AuthenticationFailedException: [AUTHENTICATIONFAILED] Invalid credentials (Failure)at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:708) ~[jakarta.mail-1.6.5.jar:1.6.5]at javax.mail.Service.connect(Service.java:364) ~[jakarta.mail-1.6.5.jar:1.6.5] at org.apache.camel.component.mail.MailConsumer.ensureIsConnected(MailConsumer.java:570) ~[camel-mail-3.2.0.jar:3.2.0]at org.apache.camel.component.mail.MailConsumer.poll(MailConsumer.java:127) ~[camel-mail-3.2.0.jar:3.2.0]at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:187) [camel-support-3.2.0.jar:3.2.0]at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:106) [camel-support-3.2.0.jar:3.2.0] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_181] at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308) [?:1.8.0_181] at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180) [?:1.8.0_181] at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294) [?:1.8.0_181] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_181] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_181] at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]```,Hide Permalink John Yin added a comment - 21/Jun/20 18:02 It was a mistake that I made when constructing the endpoint options. Never mind. Sorry about it. Show John Yin added a comment - 21/Jun/20 18:02 It was a mistake that I made when constructing the endpoint options. Never mind. Sorry about it.
CAMEL-15219,Claus Ibsen,2020-06-21T07:16:00+0000,1592709360， where 1592709360 is the epoch,According to the documentation， it should be possible to use a custom ResultSetConversionStrategy on the camel-cassandraql component. However， it seems it is not accepted in all cases and ends up failing to create the custom conversion. For example， using #bean:org.my.package.MyStrategy causes a failure similar to this:Caused by: java.lang.IllegalArgumentException: Unknown conversion strategy #bean:org.apache.camel.kafkaconnector.cassandra.clients.dao.TestResultSetConversionStrategy at org.apache.camel.component.cassandra.ResultSetConversionStrategies.fromName(ResultSetConversionStrategies.java:112) ~[camel-cassandraql-3.3.0.jar:3.3.0] at org.apache.camel.component.cassandra.CassandraComponent.createEndpoint(CassandraComponent.java:82) ~[camel-cassandraql-3.3.0.jar:3.3.0] at org.apache.camel.support.DefaultComponent.createEndpoint(DefaultComponent.java:237) ~[camel-support-3.3.0.jar:3.3.0]Looking at the current code on master， this does seem to be that the code on CassandraComponent.java and， more importantly， ResultSetConversionStrategies.java do not behave like stated on the documentation (ie.: "... Anything else， if resultSetConversionStrategy is a custom implementation of the ResultSetConversionStrategy ...").,Hide Permalink Claus Ibsen added a comment - 21/Jun/20 07:16 Thanks for reporting and spotting where the bug was in the code Show Claus Ibsen added a comment - 21/Jun/20 07:16 Thanks for reporting and spotting where the bug was in the code Hide Permalink Otavio Rodolfo Piske added a comment - 22/Jun/20 12:49 Claus Ibsen thanks for the quick fix as well. Just wanted to report that I tried the patch w/ the test I am working for the Camel Kafka Connector and it worked as expected. Show Otavio Rodolfo Piske added a comment - 22/Jun/20 12:49 Claus Ibsen thanks for the quick fix as well. Just wanted to report that I tried the patch w/ the test I am working for the Camel Kafka Connector and it worked as expected.
CAMEL-15218,Claus Ibsen,2020-06-19T08:04:48+0000,1592539488， where 1592539488 is the epoch,Lets store the generated/copied files in src/main/generated like we do in other components. Then we can browse those in github and also better notice when something is changed as it causes a git diff.,There are no comments yet on this issue.
CAMEL-15217,Claus Ibsen,2020-06-19T08:45:42+0000,1592541942， where 1592541942 is the epoch,While .bean("beanName") does lookup into the registry， .bean(Bean.class) does not and directly instantiates the provided class.It would be more consistent to have it looking into the registry and return a bean reference if only one bean of the provided class is resolved. If the resolution is ambiguous or no beans match， an exception should be thrown.This is also applicable to all .bean(Class， ...) methods.,Hide Permalink Claus Ibsen added a comment - 19/Jun/20 08:45 Will now lookup first and use existing bean if one instance found (and scope is singleton). However if there is no beans then it work as before， with creating a new instance. Unless its an interface where you get some error. Show Claus Ibsen added a comment - 19/Jun/20 08:45 Will now lookup first and use existing bean if one instance found (and scope is singleton). However if there is no beans then it work as before， with creating a new instance. Unless its an interface where you get some error. Hide Permalink Antonin Stefanutti added a comment - 19/Jun/20 08:49 Great， yes it's important to fallback to the old behaviour to keep backward compatibility. Show Antonin Stefanutti added a comment - 19/Jun/20 08:49 Great， yes it's important to fallback to the old behaviour to keep backward compatibility.
CAMEL-15216,Unassigned,2020-06-24T04:56:39+0000,1592960199， where 1592960199 is the epoch,,Hide Permalink Aemie added a comment - 24/Jun/20 04:56 Claus Ibsen， I am unable to track down this warning - asciidoctor: WARNING: skipping reference to missing attribute: key. I know there might be an undefined attribute key within the repo however currently， I am unable to find it and resolve it. Show Aemie added a comment - 24/Jun/20 04:56 Claus Ibsen ， I am unable to track down this warning - asciidoctor: WARNING: skipping reference to missing attribute: key . I know there might be an undefined attribute key within the repo however currently， I am unable to find it and resolve it. Hide Permalink Claus Ibsen added a comment - 24/Jun/20 07:26 Yeah we have not been able to track that last WARN down. Show Claus Ibsen added a comment - 24/Jun/20 07:26 Yeah we have not been able to track that last WARN down.
CAMEL-15215,Guillaume Nodet,2020-07-04T07:20:15+0000,1593832815， where 1593832815 is the epoch,,Hide Permalink Claus Ibsen added a comment - 04/Jul/20 07:20 Is there more work for this? And was there some changes that is worth mentioning in the upgrade guide， and the existing testing docs? Show Claus Ibsen added a comment - 04/Jul/20 07:20 Is there more work for this? And was there some changes that is worth mentioning in the upgrade guide， and the existing testing docs? Hide Permalink Guillaume Nodet added a comment - 28/Jul/20 11:25 https://issues.apache.org/jira/browse/CAMEL-15215 Show Guillaume Nodet added a comment - 28/Jul/20 11:25 https://issues.apache.org/jira/browse/CAMEL-15215
CAMEL-15214,Claus Ibsen,2020-06-19T05:30:12+0000,1592530212， where 1592530212 is the epoch,in Camel Catlog， there is a new type "duration" (for timer delay parameters for instance).it was previously using type "integer".The validation has not been adjusted fo rthis new type. Consequently， the delay value is no more validated.For instance， "timer:timerName?delay=p" is no more reporting a validation error.technical:the "time pattern" was validated for the integer type: https://github.com/apache/camel/blob/b665e5cf4b47f9b074bea40c86a5133f0db00454/core/camel-core-catalog/src/main/java/org/apache/camel/catalog/impl/AbstractCamelCatalog.java#L1276-L1284,Hide Permalink Claus Ibsen added a comment - 19/Jun/20 05:30 Thanks for reporting Show Claus Ibsen added a comment - 19/Jun/20 05:30 Thanks for reporting
CAMEL-15213,Claus Ibsen,2020-06-18T11:15:44+0000,1592464544， where 1592464544 is the epoch,We should include the default values in the camel-main configuration properties classes so we can get that in the tooling metadata and also in the generated documentation (see camel-main adoc file),There are no comments yet on this issue.
CAMEL-15212,Claus Ibsen,2020-06-18T08:36:08+0000,1592454968， where 1592454968 is the epoch,A reminder to update the 3.4 upgrade guide about the need for setting loadTypeConverters=true if using custom converter (without loader generated),There are no comments yet on this issue.
CAMEL-15211,Unassigned,2020-06-18T08:22:21+0000,1592454141， where 1592454141 is the epoch,Would be great if we can make configuring Camels SSL security parameters via camel.main.ssl. parameters.,There are no comments yet on this issue.
CAMEL-15210,Claus Ibsen,2020-06-18T08:06:36+0000,1592453196， where 1592453196 is the epoch,I had to add manually the jupiter plugin to make it compile <dependency> <groupId>org.junit.jupiter</groupId> <artifactId>junit-jupiter</artifactId> <version>5.6.2</version> <scope>test</scope> </dependency>See Cia@ chapter8/hi-world,There are no comments yet on this issue.
CAMEL-15209,Unassigned,2020-06-18T07:46:25+0000,1592451985， where 1592451985 is the epoch,<dependency> <groupId>org.apache.camel</groupId> <artifactId>camel-jaxb</artifactId> <version>${camel-version}</version> </dependency> <dependency> <groupId>org.apache.camel</groupId> <artifactId>camel-xml-jaxb</artifactId> <version>${camel-version}</version> </dependency>,There are no comments yet on this issue.
CAMEL-15208,Unassigned,2020-06-18T09:10:13+0000,1592457013， where 1592457013 is the epoch,We need the jandex plugin to run first as its dependent. chapter8/custom in the CiA2 source code presents this problem.,Hide Permalink Claus Ibsen added a comment - 18/Jun/20 09:10 Okay so it was wrong phase， in the pom.xml. That should just be removed then it all runs in right order. Show Claus Ibsen added a comment - 18/Jun/20 09:10 Okay so it was wrong phase， in the pom.xml. That should just be removed then it all runs in right order.
CAMEL-15207,Jiri Ondrusek,2020-06-18T07:38:06+0000,1592451486， where 1592451486 is the epoch,Issue https://issues.apache.org/jira/browse/CAMEL-14833 brought a possibility to define different parser (instead of autodetect one). This solution should be refactored to more suitable (usable) way， by introducing the TikaParserProducer. (it should eliminate the need of of the extension of the TikaComponent),There are no comments yet on this issue.
CAMEL-15206,Unassigned,2020-06-18T11:17:26+0000,1592464646， where 1592464646 is the epoch,Actually I create rest api using apache camel. Its a Get Call.Request Path like this -> users/names/{username}?client={clientId}we will try to given username is Spanish text like this -> users/names/plánia?client=100 and try this also -> users/names/pl%C3%nia?client=100Its throw error like bad request { "timestamp": "2020-06-17T16:06:25.609+0000"， "status": 400， "error": "Bad Request"， "message": "Illegal Argument Specified in the Request Headers or Path"， "path": "/users/names/plánia" },Hide Permalink Claus Ibsen added a comment - 18/Jun/20 11:17 You should generally ask first on the user mailing list to get help. That error is likely from the HTTP server that regard it as a bad request. So what HTTP component are you using jetty， undertow or what? Also try with latest 2.25.x release as that is the only active supported 2.x version Show Claus Ibsen added a comment - 18/Jun/20 11:17 You should generally ask first on the user mailing list to get help. That error is likely from the HTTP server that regard it as a bad request. So what HTTP component are you using jetty， undertow or what? Also try with latest 2.25.x release as that is the only active supported 2.x version
CAMEL-15205,Claus Ibsen,2020-06-26T07:32:27+0000,1593142347， where 1593142347 is the epoch,The current documentation says for cron job the spaces needs to replaced by +. However that does not seem to be the case as of the latest release. If you specify + instead of blank it throws a runtime error Caused by: java.lang.RuntimeException: CronExpression '# 0 1 6-18 ? * *' is invalid.Caused by: java.lang.RuntimeException: CronExpression '# 0 1 6-18 ? * *' is invalid. at org.quartz.CronScheduleBuilder.cronSchedule(CronScheduleBuilder.java:111) at org.apache.camel.component.quartz.QuartzEndpoint.createTrigger(QuartzEndpoint.java:485) at org.apache.camel.component.quartz.QuartzEndpoint.addJobInScheduler(QuartzEndpoint.java:372) at org.apache.camel.component.quartz.QuartzEndpoint.doStart(QuartzEndpoint.java:328) at org.apache.camel.support.service.BaseService.start(BaseService.java:115) at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) at org.apache.camel.impl.engine.RouteService.doWarmUp(RouteService.java:141) at org.apache.camel.impl.engine.RouteService.warmUp(RouteService.java:123) ... 13 moreCaused by: java.text.ParseException: Unexpected character: # at org.quartz.CronExpression.storeExpressionVals(CronExpression.java:697) at org.quartz.CronExpression.buildExpression(CronExpression.java:487) at org.quartz.CronExpression.<init>(CronExpression.java:276) at org.quartz.CronScheduleBuilder.cronSchedule(CronScheduleBuilder.java:107) ... 20 moreThe documentation is wrong and it should be regular cron format all works well. The Bad:from(quartz("myQuartz").cron("0+1+6-18+?")).to(mock("direct"))The Goodfrom(quartz("myQuartz").cron("0 0 6，18 ? * *")).to(mock("direct")),Hide Permalink Claus Ibsen added a comment - 26/Jun/20 07:32 Its because you use endpoint-dsl that has this "problem". It will be fixed in 3.5 onwards so you can use + there as well. Show Claus Ibsen added a comment - 26/Jun/20 07:32 Its because you use endpoint-dsl that has this "problem". It will be fixed in 3.5 onwards so you can use + there as well.
CAMEL-15204,Unassigned,2020-06-19T17:17:44+0000,1592572664， where 1592572664 is the epoch,The JT400 component references "AS/400" in several places. IBM hasn't marketed AS/400 in 20 years. It has since been completely replaced by IBM i on Power Systems (a completely different hardware set) in 2008. IBM i supports AS/400 methodologies (such as program calls， data queues， etc)， so that commonly causes confusion with branding and terminology. It doesn't help that IBM's connector module for Java still has "400" in the name (for compatibility purposes). Anyway， we should change the doc of the JT400 component to properly reflect what it can be used for. I intend to PR these changes on GitHub， so you can assign me.,Hide Permalink Jesse Gorzinski added a comment - 19/Jun/20 17:17 PR at https://github.com/apache/camel/pull/3936 Show Jesse Gorzinski added a comment - 19/Jun/20 17:17 PR at https://github.com/apache/camel/pull/3936
CAMEL-15203,Unassigned,2020-06-17T12:49:51+0000,1592383791， where 1592383791 is the epoch,SFDC has several errors documetned: https://developer.salesforce.com/docs/atlas.en-us.api_streaming.meta/api_streaming/streaming_error_codes.htm There are several problems: How the `SubscriptionHelper` is handling connection errors. At the moment it has a hardcoded 401 and 403 handling. But there are several valid errors as in the specication above disibed. Atm if we hit these errors， in example the 400 with the message body message {{The replayId {replay_id} you provided was invalid. Please provide a valid ID， -2 to replay all events， or -1 to replay only new events.. }}You would expect that when we get this error， appache camel tries to retrieve it with a replay_id with -2 or -1. At the moment if you get this error you loose subscription total to the channel.I sugest a generic error handler:Psudo code:public class SalesForceStreamingErrorHandler { APIversionMandatory("400"， "API version in the URI is mandatory")， UnsupportedAPIversion("400"， "Unsupported API version")， InvalidConnectionType("400"， " Invalid connection type")， ChannelNotExists("400"， "The channel you requested to subscribe to does not exis")， ChannelNameMissing("400"， "Channel name not specified")， IncorrectChannelName("400"， "Channel subscriptions must start with a leading '/'")， QueryFieldsDoNotExist("400"， "Query fields {query_fields} do not exist on the topic entity")， CookieMissing("400"， "Client client_name has established a session， but no cookie_name cookie present")， InvalidReplayID("400"， "The replayId {replay_id} you provided was invalid. Please provide a valid ID， -2 to replay all events， or -1 to replay only new events.")， AuthenticationInvalid("401"， "Authentication invalid"，true，false)， RequestRequiresAuthentication("401"， "Request requires authentication"， true，false)， CannotCreateChannel("403"， "Cannot create channel")， AccessToTopic("403"， "Subscriber does not have access to the entity in this topic")， AccessToField("403"， "Subscriber does not have access to all fields referenced in the where clause of the PushTopic")， HandshakeDenied("403"， "Handshake denied")， IncompleteHandshake("403"， "Client has not completed handshake")， OrganisationConcurendUser("403"， "Organization concurrent user limit exceeded")， OrganisationDailyLimit("403"， "Organization total events daily limit exceeded")， RestrictedChannel("403"， "Restricted channel")， UserNotEnabled("403"， "User not enabled for streaming")， UserNotAllowed("403"， "User not allowed to subscribe CDC without View All Data permissions")， SubscriptionLimit("403"， "Subscription limit exceeded for this topic")， UnknownClient("403"， "Unknown client")， DDOS_PROTECTION("403"， "To protect all customers from excessive use and Denial of Service attacks， we limit the number of simultaneous connections per server. Your request has been denied because this limit has been exceeded. Please try your request again later.")， MaxRequstSize("413"， "Maximum Request Size Exceeded")， ServerBusY("503"， "Server is too busy. Please try your request again later.");With a new configuration option:// Streaming API properties@UriParamprivate Optional<Long> fallbackReplayId;With new logic in the SubscriptionHelper to reconnect with the fallback replayID when set. This way we can also improve the eventually the robustness of how error msges are handled in this component. At the moment we have a lot of problems with the replayID bc they can expire afhter 72 hours on the buss and if you had downtime with the bayeux buss， having this missed is a problem.,Hide Permalink Claus Ibsen added a comment - 17/Jun/20 12:49 Try Camel 3.4 as there has been some salesforce fixes and improvements Show Claus Ibsen added a comment - 17/Jun/20 12:49 Try Camel 3.4 as there has been some salesforce fixes and improvements Hide Permalink Martijn Cremer added a comment - 17/Jun/20 16:01 This does not fix this problem let me explain it better sorry. Show Martijn Cremer added a comment - 17/Jun/20 16:01 This does not fix this problem let me explain it better sorry.
CAMEL-15202,Unassigned,2020-06-21T15:43:02.591Z,1592739782.591， where 1592739782.591 is the epoch,I believe after the PR related to rebase the site to the default antora UI， there occurred two changes that weren't meant to change. One includes the change of custom scrollbar for the nav panel menu under the documentation section. The other includes the change in custom pagination with Hugo under the blog section. I will make changes to it so that it includes the custom scrollbar to improve the aesthetics and improve the change in pagination.,Hide Permalink Zoran Regvart added a comment - 17/Jun/20 19:42 Thanks for noticing/reporting this! Show Zoran Regvart added a comment - 17/Jun/20 19:42 Thanks for noticing/reporting this! Hide Permalink ASF GitHub Bot added a comment - 18/Jun/20 19:55 zregvart opened a new pull request #400: URL: https://github.com/apache/camel-website/pull/400 This reintroduces the design we had before rebasing on the latest Antora Default UI (#383). Now the changes are affecting only the blog section and further rebases should not interfere with the pagination design. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 18/Jun/20 19:55 zregvart opened a new pull request #400: URL: https://github.com/apache/camel-website/pull/400 This reintroduces the design we had before rebasing on the latest Antora Default UI (#383). Now the changes are affecting only the blog section and further rebases should not interfere with the pagination design. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Zoran Regvart added a comment - 18/Jun/20 19:56 Aemie I've created a pull request to restore the design of the pagination on the blog section of the site. Show Zoran Regvart added a comment - 18/Jun/20 19:56 Aemie I've created a pull request to restore the design of the pagination on the blog section of the site. Hide Permalink ASF GitHub Bot added a comment - 18/Jun/20 20:19 zregvart merged pull request #400: URL: https://github.com/apache/camel-website/pull/400 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 18/Jun/20 20:19 zregvart merged pull request #400: URL: https://github.com/apache/camel-website/pull/400 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 18/Jun/20 20:19 zregvart commented on pull request #400: URL: https://github.com/apache/camel-website/pull/400#issuecomment-646284900 Preview looks good， so I merged. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 18/Jun/20 20:19 zregvart commented on pull request #400: URL: https://github.com/apache/camel-website/pull/400#issuecomment-646284900 Preview looks good， so I merged. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Aemie added a comment - 19/Jun/20 11:48 Yes， I have seen the PR for the same， thanks a lot! I made a PR for custom scrollbar for the nav menu panel under documentation section. Show Aemie added a comment - 19/Jun/20 11:48 Yes， I have seen the PR for the same， thanks a lot! I made a PR for custom scrollbar for the nav menu panel under documentation section. Hide Permalink Aemie added a comment - 21/Jun/20 15:43 Zoran Regvart I think I found another change， for the scrollbar within the search results. I think this was an undesirable change after the rebasing， right? Or does it need to be this manner? Show Aemie added a comment - 21/Jun/20 15:43 Zoran Regvart I think I found another change， for the scrollbar within the search results. I think this was an undesirable change after the rebasing， right? Or does it need to be this manner? Hide Permalink Zoran Regvart added a comment - 22/Jun/20 07:07 Aashna Jena I’ve removed all scrollbar customization， as noted on the pull request and in discussions we had due to concerns about usability. I’m not sure if we need to display as many results and if we do need to if they need to be displayed with the scroll bar. Show Zoran Regvart added a comment - 22/Jun/20 07:07 Aashna Jena I’ve removed all scrollbar customization， as noted on the pull request and in discussions we had due to concerns about usability. I’m not sure if we need to display as many results and if we do need to if they need to be displayed with the scroll bar. Hide Permalink Aemie added a comment - 22/Jun/20 09:55 Aashna? Anyways， I don't think the removal of scrollbar customization is a good idea for the components nav panel. The normal scrollbar within chrome doesn't go with the design of the website. And about usability， I have read the rules about it， and hence， I applied proper width and contrast ratio along with it so it's usable， accessible， and even blend with the design. Currently， for search results， there are only 10 hits per page so only the top 10 results will always be shown. So personally， I don't think it's necessary to show scrollbar in this case rather than just provide a max-height. Show Aemie added a comment - 22/Jun/20 09:55 Aashna? Anyways， I don't think the removal of scrollbar customization is a good idea for the components nav panel. The normal scrollbar within chrome doesn't go with the design of the website. And about usability， I have read the rules about it， and hence， I applied proper width and contrast ratio along with it so it's usable， accessible， and even blend with the design. Currently， for search results， there are only 10 hits per page so only the top 10 results will always be shown. So personally， I don't think it's necessary to show scrollbar in this case rather than just provide a max-height. Hide Permalink ASF GitHub Bot added a comment - 27/Jun/20 18:30 zregvart merged pull request #401: URL: https://github.com/apache/camel-website/pull/401 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/Jun/20 18:30 zregvart merged pull request #401: URL: https://github.com/apache/camel-website/pull/401 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Zoran Regvart added a comment - 27/Jun/20 18:33 Thanks to Aemie for the followup PR. Show Zoran Regvart added a comment - 27/Jun/20 18:33 Thanks to Aemie for the followup PR.
CAMEL-15201,Unassigned,2020-06-17T12:08:02.059Z,1592381282.059， where 1592381282.059 is the epoch,Hello，when trying to use an OSGi feature in Karaf， using camel-script and camel-script-javascript，we have this error with Karaf started with Java 11: karaf@trun()> diagbugTest (330)-------------Status: FailureDeclarative ServicesBlueprint17/06/2020 11:56Exception:nulljava.util.concurrent.TimeoutException at org.apache.aries.blueprint.container.BlueprintContainerImpl$1.run(BlueprintContainerImpl.java:393) at org.apache.aries.blueprint.utils.threading.impl.DiscardableRunnable.run(DiscardableRunnable.java:45) at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) at java.base/java.lang.Thread.run(Thread.java:834)Missing dependencies:(&(language=js)(objectClass=org.apache.camel.spi.LanguageResolver)) When using the same OSGi with Karaf started with Java 8， the bundle starts correctly. Do you have an idea?,Hide Permalink Claus Ibsen added a comment - 17/Jun/20 12:11 Please get help first on the user mailing list. Also its only 2.25.x that is active supported for 2.x. So give that a try first. And Camel 2.x does NOT support Java 11. Show Claus Ibsen added a comment - 17/Jun/20 12:11 Please get help first on the user mailing list. Also its only 2.25.x that is active supported for 2.x. So give that a try first. And Camel 2.x does NOT support Java 11. Hide Permalink Jean-Baptiste Onofré added a comment - 24/Jun/20 05:17 From a Karaf perspective， I just tried and it works fine with JDK 11.0.6. Show Jean-Baptiste Onofré added a comment - 24/Jun/20 05:17 From a Karaf perspective， I just tried and it works fine with JDK 11.0.6.
CAMEL-15200,Unassigned,2020-06-19T12:23:39+0000,1592555019， where 1592555019 is the epoch,IssueNOTE: I will try to come back with a fixing PR ASAP. The processorpackage com.company.processors;import com.company.api.model.Error;import org.apache.camel.Exchange;import org.apache.camel.Processor;public class ToError implements Processor { @Override public void process(Exchange exchange) { Throwable responseException = exchange.getProperty(Exchange.EXCEPTION_CAUGHT， Throwable.class); Error response = new Error() {{ setMessage(responseException.getMessage()); setDetails(responseException.getCause().getMessage()); }}; exchange.getIn().setBody(response); }}with the route.doCatch(Exception.class) .process(new ToError()) .to("log:error")ends up in2020-06-17 10:39:03.299 INFO 2928 --- [ult-workqueue-2] error : Exchange[ExchangePattern: InOut， BodyType: null， Body: class Error { message: Connection reset details: null}]where BodyType: null causes consequent problems e.g. the route.end().transform().body().marshal().json(JsonLibrary.Gson).endRest();returns a ResponseEntity with no body.ReasonIt took one day to find the villain The reason was that Java instance initialization via setters inside `{{}}`s WorkaroundReplacingError response = new Error() {{ setMessage(responseException.getMessage()); setDetails(responseException.getCause().getMessage());}};withError response = new Error();response.setMessage(responseException.getMessage());response.setDetails(responseException.getCause().getMessage());fixes issue.,Hide Permalink Claus Ibsen added a comment - 19/Jun/20 12:23 What kind of class is Error? Show Claus Ibsen added a comment - 19/Jun/20 12:23 What kind of class is Error? Hide Permalink Yasser Zamani added a comment - 19/Jun/20 14:44 Claus Ibsen sorry forgot to mention earlier. It's a simple POJO with setter getters and not more inside my own package com.company.api.model. Show Yasser Zamani added a comment - 19/Jun/20 14:44 Claus Ibsen sorry forgot to mention earlier. It's a simple POJO with setter getters and not more inside my own package com.company.api.model . Hide Permalink Yasser Zamani added a comment - 19/Jun/20 14:54 Actually replacing Error response = new Error() {{ setMessage(responseException.getMessage()); setDetails(responseException.getCause().getMessage()); }}; with Error response = new Error(); response.setMessage(responseException.getMessage()); response.setDetails(responseException.getCause().getMessage()); fixes issue. Show Yasser Zamani added a comment - 19/Jun/20 14:54 Actually replacing Error response = new Error() {{ setMessage(responseException.getMessage()); setDetails(responseException.getCause().getMessage()); }}; with Error response = new Error(); response.setMessage(responseException.getMessage()); response.setDetails(responseException.getCause().getMessage()); fixes issue. Hide Permalink Claus Ibsen added a comment - 19/Jun/20 15:24 Yes what you do with is to create a new anonymous class when you do like that - its standard Java. And so therefore the class type is null Show Claus Ibsen added a comment - 19/Jun/20 15:24 Yes what you do with is to create a new anonymous class when you do like that - its standard Java. And so therefore the class type is null Hide Permalink Yasser Zamani added a comment - 20/Jun/20 05:37 Yes I knew the root cause. I meant Camel might be improved like How to get the original class from anonymous class? Java using following code: public static Class<?> getOriginalClass(Object obj) { Class<?> cls = obj.getClass(); if (cls.isAnonymousClass()) { return cls.getInterfaces().length == 0 ? cls.getSuperclass() : cls.getInterfaces()[0]; } else { return cls; } } and set bodyType to it to be more resilient . It works at my side tests. Show Yasser Zamani added a comment - 20/Jun/20 05:37 Yes I knew the root cause. I meant Camel might be improved like How to get the original class from anonymous class? Java using following code: public static Class <?> getOriginalClass( Object obj) { Class <?> cls = obj.getClass(); if (cls.isAnonymousClass()) { return cls.getInterfaces().length == 0 ? cls.getSuperclass() : cls.getInterfaces()[0]; } else { return cls; } } and set bodyType to it to be more resilient . It works at my side tests.
CAMEL-15199,Luca Burgazzoli,2020-06-16T20:31:53+0000,1592325113， where 1592325113 is the epoch,RestDefinition relies on Class.getCanonicalName instead of Class.getName for in/out types.This work as long as the type is not an inner class getCanonicalName does not return a name that can be used to load a class.As examplepackage my.example;public class MyRoutes extends org.apache.camel.builder.RouteBuilder { @Override public void configure() throws Exception { rest() .post("/order") .type(MyOrder.class) .consumes("application/json") .produces("application/json") .bindingMode(RestBindingMode.json) .route() .log("${body}"); } public static class MyOrder { public String id; }}Then camel would set my.example.MyRoutes.MyOrder as in type but that's wrong and the subsequent attemp to load the class by name， will fail as it should be my.example.MyRoutes$MyOrder (which is what Class.getName would return).,Hide Permalink Luca Burgazzoli added a comment - 16/Jun/20 20:31 Claus Ibsen beside the issue why do we use a Class a parameter for type/outType， then we set it as a string and finally we dynamic load it ? I guess it has to do with XML Show Luca Burgazzoli added a comment - 16/Jun/20 20:31 Claus Ibsen beside the issue why do we use a Class a parameter for type/outType， then we set it as a string and finally we dynamic load it ? I guess it has to do with XML Hide Permalink Claus Ibsen added a comment - 17/Jun/20 07:49 Yes its for XML DSL. Where the information is stored as the string. And in Java DSL then by using Class we can make it type safe and shorter/nicer， instead of having to type the FQN classname. We could in the definition allow to store the type as Class as well as @XmlTransient (we do this in some other places). Then we dont need to load it if using Java DSL. Show Claus Ibsen added a comment - 17/Jun/20 07:49 Yes its for XML DSL. Where the information is stored as the string. And in Java DSL then by using Class we can make it type safe and shorter/nicer， instead of having to type the FQN classname. We could in the definition allow to store the type as Class as well as @XmlTransient (we do this in some other places). Then we dont need to load it if using Java DSL. Hide Permalink Claus Ibsen added a comment - 17/Jun/20 07:49 And btw its not nice to have your model as inlined classes but I guess its the Camel K， put everything into a single file Show Claus Ibsen added a comment - 17/Jun/20 07:49 And btw its not nice to have your model as inlined classes but I guess its the Camel K， put everything into a single file Hide Permalink Luca Burgazzoli added a comment - 17/Jun/20 08:23 Yeah， this example is for demonstration purpose and of course from a camel-k issue but it is not too uncommon (at least to me) to have nested classes as part of other models Show Luca Burgazzoli added a comment - 17/Jun/20 08:23 Yeah， this example is for demonstration purpose and of course from a camel-k issue but it is not too uncommon (at least to me) to have nested classes as part of other models
CAMEL-15198,Omar Al-Safi,2020-07-23T12:23:26+0000,1595492606， where 1595492606 is the epoch,Currently Camel Azure Storage Blob has a comprehensive configurations options dynamically through Camel Headers. However， some of these headers configurations， would also make sense to have as well in the component/endpoint configurations in order to reduce the overhead. For example CamelAzureStorageBlobCreatePageBlob and CamelAzureStorageBlobCreateAppendBlob headers， it would also make sense to have them as component/endpoint configs，,Hide Permalink Omar Al-Safi added a comment - 23/Jul/20 12:23 Configs that can be set from endpoint URI as well headers: timeout prefix access tier commit block list later: boolean create append blob: boolean create page blob: boolean page blob size blob sequence number Show Omar Al-Safi added a comment - 23/Jul/20 12:23 Configs that can be set from endpoint URI as well headers: timeout prefix access tier commit block list later: boolean create append blob: boolean create page blob: boolean page blob size blob sequence number
CAMEL-15197,Claus Ibsen,2020-06-26T12:25:08+0000,1593159908， where 1593159908 is the epoch,When using thread pools for EIPs like splitter， aggregator etc. We can make it possible to use external thread pool from vertx and its set of worker pools. For example with quarkurs or vertx this makes Camel work more naturally there using its existing threading model.,Hide Permalink Claus Ibsen added a comment - 26/Jun/20 12:25 - edited We may want to introduce a simpler ThreadPoolFactory that can use a more basic ExecutorService SPI that only has the API we need for EIPs in Camel to use. We essentially only use submit(runnable) today. And then we have some threads that should run in its own thread， such as when shutting down， we setup a background thread etc. So some API abstract for this. Show Claus Ibsen added a comment - 26/Jun/20 12:25 - edited We may want to introduce a simpler ThreadPoolFactory that can use a more basic ExecutorService SPI that only has the API we need for EIPs in Camel to use. We essentially only use submit(runnable) today. And then we have some threads that should run in its own thread， such as when shutting down， we setup a background thread etc. So some API abstract for this.
CAMEL-15196,Andrea Cosentino,2020-06-22T22:28:42+0000,1592850522， where 1592850522 is the epoch,OpenTracing supports adding tags to a given Span. See https://opentracing.io/docs/overview/tags-logs-baggage/#tagsSubmitting a PR shortly... PS. OpenTracing has been merged with OpenCensus into OpenTelemetry. Here's a ticket for adding support I found https://issues.apache.org/jira/browse/CAMEL-14531?jql=text%20~%20%22opentelemetry%22However while opentracing should eventually be deprecated， there's a good amount of functionality that's not yet available in the new project (eg. the javaagent support). So there's value is continuing to support opentracing until the new project reaches parity.,Hide Permalink Jose Montoya added a comment - 22/Jun/20 22:28 Hey all， after going through some of the existing components and how different operations are exposed， I ventured into making a component/endpoint for Span operations. So at this point I have two different implementations: Independent processors Here I just completed adding the missing processors to the existing PR you already looked at over here. It's just three independent processors: TagProcessor， SetBaggageProcessor， and GetBaggageProcessor. Using the processors would look something like this: process(new TagProcessor("tagKey"， simple("tag value")); process(new SetBaggageProcessor("bagKey"， simple("baggage value")); process(new GetBaggageProcessor("bagKey"， "toHeaderName"); "opentracing-span:operation?options" component This is what I ended up with after looking at other components/endpoints. This implementation is available here. Basically the three different operations would like something like: to("opentracing-span:tag?spanKey=tagKey&headerValue=fromHeaderName") to("opentracing-span:setBaggage?spanKey=bagKey&headerValue=fromHeaderName") to("opentracing-span:getBaggage?spanKey=bagKey&headerValue=toHeaderName") I feel there may be different value to either approach， allowing expressions with the first one maybe gives more flexibility. Whereas with the second it may be easier to use without having to import and instantiate new processors with the disadvantage of assuming that tags and baggage items usually go in headers (which is how I'd use them). Long story short... I figured I'd defer to you to weigh in for one approach you consider to be the better camel-like citizen. Claus Ibsen Andrea Cosentino Show Jose Montoya added a comment - 22/Jun/20 22:28 Hey all， after going through some of the existing components and how different operations are exposed， I ventured into making a component/endpoint for Span operations. So at this point I have two different implementations: Independent processors Here I just completed adding the missing processors to the existing PR you already looked at over here . It's just three independent processors: TagProcessor， SetBaggageProcessor， and GetBaggageProcessor. Using the processors would look something like this: process( new TagProcessor( "tagKey" ， simple( "tag value" )); process( new SetBaggageProcessor( "bagKey" ， simple( "baggage value" )); process( new GetBaggageProcessor( "bagKey" ， "toHeaderName" ); "opentracing-span:operation?options" component This is what I ended up with after looking at other components/endpoints. This implementation is available here . Basically the three different operations would like something like: to( "opentracing-span:tag?spanKey=tagKey&headerValue=fromHeaderName" ) to( "opentracing-span:setBaggage?spanKey=bagKey&headerValue=fromHeaderName" ) to( "opentracing-span:getBaggage?spanKey=bagKey&headerValue=toHeaderName" ) I feel there may be different value to either approach， allowing expressions with the first one maybe gives more flexibility. Whereas with the second it may be easier to use without having to import and instantiate new processors with the disadvantage of assuming that tags and baggage items usually go in headers (which is how I'd use them). Long story short... I figured I'd defer to you to weigh in for one approach you consider to be the better camel-like citizen. Claus Ibsen Andrea Cosentino Hide Permalink Andrea Cosentino added a comment - 13/Jul/20 16:11 I would personally go with the second approach Jose Montoya Show Andrea Cosentino added a comment - 13/Jul/20 16:11 I would personally go with the second approach Jose Montoya
CAMEL-15195,Zheng Feng,2020-06-15T11:31:48+0000,1592206308， where 1592206308 is the epoch,Reported on user forumhttps://camel.465427.n5.nabble.com/Camel-netty-requestTimeout-doesn-t-work-properly-td5870725.html,There are no comments yet on this issue.
CAMEL-15194,Thomas Diesler,2020-06-15T11:21:24+0000,1592205684， where 1592205684 is the epoch,In Camel-3.3.0 there seems to have been a change with Salesforce such that the component's httpClient is no longer initialized before the endpoint is created. This is perhaps a fundamental lifecycle issue that leads to NPE in my Salesforce tests.In 3.1.0 the httpClient is available when the endpoint is created hereCaused by: org.apache.camel.component.salesforce.api.SalesforceException: Unexpected Error processing createJob: "null" at org.apache.camel.component.salesforce.internal.processor.BulkApiProcessor.process(BulkApiProcessor.java:111) at org.apache.camel.component.salesforce.SalesforceProducer.process(SalesforceProducer.java:129) at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:168) at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:60) at org.apache.camel.processor.Pipeline.process(Pipeline.java:147) at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:286) at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:66) at org.apache.camel.processor.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:212) at org.apache.camel.processor.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:110) at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83) at org.apache.camel.processor.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:107) at org.apache.camel.impl.engine.DefaultProducerCache.send(DefaultProducerCache.java:185) at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176) at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172) at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:390) ... 150 moreCaused by: java.lang.NullPointerException at org.apache.camel.component.salesforce.internal.client.AbstractClientBase.getRequest(AbstractClientBase.java:158) at org.apache.camel.component.salesforce.internal.client.AbstractClientBase.getRequest(AbstractClientBase.java:154) at org.apache.camel.component.salesforce.internal.client.DefaultBulkApiClient.createJob(DefaultBulkApiClient.java:87) at org.apache.camel.component.salesforce.internal.processor.BulkApiProcessor.processCreateJob(BulkApiProcessor.java:122) at org.apache.camel.component.salesforce.internal.processor.BulkApiProcessor.process(BulkApiProcessor.java:64) ... 166 more,Hide Permalink Claus Ibsen added a comment - 15/Jun/20 11:21 Where are your salesforce tests? Show Claus Ibsen added a comment - 15/Jun/20 11:21 Where are your salesforce tests? Hide Permalink Thomas Diesler added a comment - 15/Jun/20 15:23 Fixed in 3.4.0 Show Thomas Diesler added a comment - 15/Jun/20 15:23 Fixed in 3.4.0
CAMEL-15193,Unassigned,2020-06-17T14:42:26+0000,1592390546， where 1592390546 is the epoch,We had this in Camel 2.xhttps://github.com/apache/camel/blob/camel-2.x/platforms/spring-boot/components-starter/camel-core-starter/src/main/java/org/apache/camel/component/file/springboot/cluster/FileLockClusterServiceAutoConfiguration.javaWe should add it back into camel-file-starter (it was in core in 2.x). So its a matter of copying that over to camel-file-starter and add what else is needed.The camel spring boot source is herehttps://github.com/apache/camel-spring-boot,Hide Permalink Zineb BENDHIBA added a comment - 17/Jun/20 14:42 Hello， can I work on this issue? Show Zineb BENDHIBA added a comment - 17/Jun/20 14:42 Hello， can I work on this issue? Hide Permalink Andrea Cosentino added a comment - 17/Jun/20 14:47 you're welcome to open a PR Show Andrea Cosentino added a comment - 17/Jun/20 14:47 you're welcome to open a PR Hide Permalink Zineb BENDHIBA added a comment - 17/Jun/20 20:27 this is the link of the PR https://github.com/apache/camel-spring-boot/pull/91 Show Zineb BENDHIBA added a comment - 17/Jun/20 20:27 this is the link of the PR https://github.com/apache/camel-spring-boot/pull/91
CAMEL-15192,Andrea Cosentino,2020-06-30T12:48:19+0000,1593506899， where 1593506899 is the epoch,,Hide Permalink Andrea Cosentino added a comment - 30/Jun/20 12:48 This can be done， but only through the creation of the deliveryStream. Show Andrea Cosentino added a comment - 30/Jun/20 12:48 This can be done， but only through the creation of the deliveryStream.
CAMEL-15191,Andrea Cosentino,2020-06-15T10:01:31+0000,1592200891， where 1592200891 is the epoch,,There are no comments yet on this issue.
CAMEL-15190,Claus Ibsen,2020-06-15T12:17:13+0000,1592209033， where 1592209033 is the epoch,We should have a doc page for camel-main (standalone mode) and include a table with all its options you can configure.There is the generated .json file that lists them all， so the tool will grab that and generate the table (like we do for spring boot etc).,Hide Permalink Claus Ibsen added a comment - 15/Jun/20 12:17 There is now a doc in src/main/doc/main.adoc we can use for docs which is now also in the website docs Show Claus Ibsen added a comment - 15/Jun/20 12:17 There is now a doc in src/main/doc/main.adoc we can use for docs which is now also in the website docs
CAMEL-15189,Claus Ibsen,2020-06-15T07:41:19+0000,1592192479， where 1592192479 is the epoch,When AggregationStrategy with canPreComplete is enabled and aggregate route is configured with .completionOnNewCorrelationGroup() StackOverflowError is thrown when a certain load is created (usually around 1000 items)I have found this using Camel 3.0.1， a unit test can be found herehttps://github.com/grigoni/camel/tree/camel-3.0.x-aggrStackOverflowErrortest class: org.apache.camel.processor.aggregator.AggregateCompletionOnNewCorrelationGroupWithCanPreCompleteTest,Hide Permalink Claus Ibsen added a comment - 15/Jun/20 07:41 This has already been fixed， the test passes. Show Claus Ibsen added a comment - 15/Jun/20 07:41 This has already been fixed， the test passes. Hide Permalink Claus Ibsen added a comment - 15/Jun/20 07:49 Thanks for reporting and the unit test， which has been added https://github.com/apache/camel/commit/769a3018c640ae074f4e772e8ebb696c3e044834 Show Claus Ibsen added a comment - 15/Jun/20 07:49 Thanks for reporting and the unit test， which has been added https://github.com/apache/camel/commit/769a3018c640ae074f4e772e8ebb696c3e044834 Hide Permalink Gianandrea Rigoni added a comment - 16/Jun/20 04:58 great， thanks a lot for the support! Show Gianandrea Rigoni added a comment - 16/Jun/20 04:58 great， thanks a lot for the support!
CAMEL-15188,Unassigned,2020-06-14T21:20:18+0000,1592155218， where 1592155218 is the epoch,It's very common scenario to connect to telegram over SOCKS proxy in Russia. It would be great if one could specify proxy type in query parameters.,Hide Permalink Andrea Cosentino added a comment - 14/Jun/20 21:20 This could be for 3.5.0 on master branch. 2.25.x is already released and we don't add new feature. Eventually it could go on camel-2.x branch for an eventual 2.26.0 release (not in roadmap for the moment) Show Andrea Cosentino added a comment - 14/Jun/20 21:20 This could be for 3.5.0 on master branch. 2.25.x is already released and we don't add new feature. Eventually it could go on camel-2.x branch for an eventual 2.26.0 release (not in roadmap for the moment) Hide Permalink Iliya Grushevskiy added a comment - 14/Jun/20 21:27 May I provide pull requests for both versions camel-2.x and 3.5.0 in scope of this issue? As I already have implementation for camel-2.x. Show Iliya Grushevskiy added a comment - 14/Jun/20 21:27 May I provide pull requests for both versions camel-2.x and 3.5.0 in scope of this issue? As I already have implementation for camel-2.x. Hide Permalink Andrea Cosentino added a comment - 14/Jun/20 21:29 You're more than welcome to open PRs! Thanks! Show Andrea Cosentino added a comment - 14/Jun/20 21:29 You're more than welcome to open PRs! Thanks! Hide Permalink Claus Ibsen added a comment - 15/Jun/20 07:46 Thanks for reporting and the PR Show Claus Ibsen added a comment - 15/Jun/20 07:46 Thanks for reporting and the PR
CAMEL-15187,Unassigned,2020-06-15T07:02:15+0000,1592190135， where 1592190135 is the epoch,When using jsonpath as a predicate in a CBR the StreamCache is not reset and therefore the content is lost. I found a Jira comment which suggests it shouldn't be the case， but alas the cache breaks.I'm adding a test and fix PR shortly...,Hide Permalink Claus Ibsen added a comment - 15/Jun/20 07:02 TODO: Backport to 3.4.x branch Show Claus Ibsen added a comment - 15/Jun/20 07:02 TODO: Backport to 3.4.x branch
CAMEL-15186,Unassigned,2020-06-13T22:01:40+0000,1592071300， where 1592071300 is the epoch,Workday has several REST API to extract data， the current in component only extract data using a Custom report as a service. We are planning to add support use the Common REST API out of the box.,There are no comments yet on this issue.
CAMEL-15185,Unassigned,2020-07-11T12:57:53.472Z,1594457873.472， where 1594457873.472 is the epoch,I have some reservations about the website footer. On the mobile view， the footer takes up almost the entire height of my device because the Overview， Community and About columns do not fit into one row. Secondly， on the desktop view， the header navigation is fixed at the top， so I can view the header menu while I'm at the footer of the page. Having same links visible on the header menu and footer doesn't make sense to me (Download， Community， Blog etc). I do see a lot of websites having menu links on the footer， but they don't have a fixed navbar.Suggestions : I looked up best practices for footers. I think we can reduce the number of links we display on the footer， especially the ones overlapping with header menu. We can also add some things (from what I read up on best practices) - form for subscribing to the mailing list， sitemap link， contact information， link to report a bug on the website， privacy policy/ terms of use (if we have) and maybe a subscription for the blog， since we have quite informative and regular blog posts. I also really like the idea of having a row of social media icons in the footer， which a lot of websites do. This will give us the freedom of adding many more icons than on the header menu.,Hide Permalink Aashna Jena added a comment - 13/Jun/20 18:43 Really like Hook Agency website's footer design. It's got contact info， logo， subscription form， social media icons etc. The mobile design skips the sitemap and places the logo on top with the rest of the information below it. I also really like the slanting top border for the footer (Not sure if that fits for our site) and the contrast between background colours of the page & footer (this is something we can do with our website). Sephora's website has topic wise links in the footer but in the mobile view， it's displayed as dropdowns， which looks like a good option to me if we want to keep topic-wise links. Show Aashna Jena added a comment - 13/Jun/20 18:43 Really like Hook Agency website's footer design . It's got contact info， logo， subscription form， social media icons etc. The mobile design skips the sitemap and places the logo on top with the rest of the information below it. I also really like the slanting top border for the footer (Not sure if that fits for our site) and the contrast between background colours of the page & footer (this is something we can do with our website). Sephora's website has topic wise links in the footer but in the mobile view， it's displayed as dropdowns， which looks like a good option to me if we want to keep topic-wise links. Hide Permalink Zoran Regvart added a comment - 16/Jun/20 20:02 I think we can remove some of the links we have， e.g. the ones present on the top menu. We can also collapse the sections (example https://apple.com) as an alternative idea. The links we need to have as an ASF project are mentioned here and here. We have pages for the mailing lists and for the chat (needs update). We could create a privacy policy based on the ASF one (in a separate issue)， we don't use Google Analytics so that paragraph is not needed. Show Zoran Regvart added a comment - 16/Jun/20 20:02 I think we can remove some of the links we have， e.g. the ones present on the top menu. We can also collapse the sections (example https://apple.com ) as an alternative idea. The links we need to have as an ASF project are mentioned here and here . We have pages for the mailing lists and for the chat (needs update). We could create a privacy policy based on the ASF one (in a separate issue)， we don't use Google Analytics so that paragraph is not needed. Hide Permalink Aemie added a comment - 17/Jun/20 12:23 Aashna Jena Zoran Regvart I read through websites regarding the footer design implementation， for the alternate links what I was thinking is to include the ones under documentation 'cause well it takes more time for the user to navigate through it and if they find it in the footer itself， it is easier for them. Other than that， we can include the basic navbar with links to blogs and projects and community pages. Apart from that， I agree to keep social media icons in the footer 'cause the user won't be diverted to another social network from our website when landing itself. If we want to keep icons in the footer， we could just include the GitHub and Jira issue icons. Also， agree with Zoran to include a privacy policy and sitemap and we could place it right below the copyright note. I like the design of Hook Agency as its spacious and neat however I don't think the site should include the slant in the footer. Show Aemie added a comment - 17/Jun/20 12:23 Aashna Jena Zoran Regvart I read through websites regarding the footer design implementation， for the alternate links what I was thinking is to include the ones under documentation 'cause well it takes more time for the user to navigate through it and if they find it in the footer itself， it is easier for them. Other than that， we can include the basic navbar with links to blogs and projects and community pages. Apart from that， I agree to keep social media icons in the footer 'cause the user won't be diverted to another social network from our website when landing itself. If we want to keep icons in the footer， we could just include the GitHub and Jira issue icons. Also， agree with Zoran to include a privacy policy and sitemap and we could place it right below the copyright note. I like the design of Hook Agency as its spacious and neat however I don't think the site should include the slant in the footer. Hide Permalink Aemie added a comment - 02/Jul/20 16:54 - edited By statistics， there are a high number of users that scroll down through footers and it is a good practice to include as much as detailing as possible yet keeping a minimal design. I have added a footer design(footer-design.png) based on what I read and additional features that need to be included. I have tried to keep it as minimalistic as possible. What're your thoughts? Aashna Jena Zoran Regvart Maria Arias de Reyna Dominguez Show Aemie added a comment - 02/Jul/20 16:54 - edited By statistics， there are a high number of users that scroll down through footers and it is a good practice to include as much as detailing as possible yet keeping a minimal design. I have added a footer design(footer-design.png) based on what I read and additional features that need to be included. I have tried to keep it as minimalistic as possible. What're your thoughts? Aashna Jena Zoran Regvart Maria Arias de Reyna Dominguez Hide Permalink Zoran Regvart added a comment - 02/Jul/20 18:34 Few comments: the arrow next to the logo makes me think there is a menu behind it I think Code of conduct should be under community， or on the bottom with the privacy policy? we can put github/twitter/gitter (stackoverflow?) links in the footer as well not sure about sitemaps link (what does it lead to?) should the mailing list be under "Community"? Show Zoran Regvart added a comment - 02/Jul/20 18:34 Few comments: the arrow next to the logo makes me think there is a menu behind it I think Code of conduct should be under community， or on the bottom with the privacy policy? we can put github/twitter/gitter (stackoverflow?) links in the footer as well not sure about sitemaps link (what does it lead to?) should the mailing list be under "Community"? Hide Permalink Aemie added a comment - 04/Jul/20 17:12 - edited Zoran Regvart I took your comments into account and came up with the design (footer-design-2) Code of conduct is better along with privacy policy Yes， I have included the social links in the footer， check footer-design-2 https://www.apple.com/sitemap/ An easy manner to navigate through each link it's not present through the navbar or any of the menu items through footer only. Yes， I have put the mailing list under community Also for the mobile view， I particularly liked the idea of https://apple.com for making use of the collapsible section. I have added snapshots for it as well. Show Aemie added a comment - 04/Jul/20 17:12 - edited Zoran Regvart I took your comments into account and came up with the design (footer-design-2) Code of conduct is better along with privacy policy Yes， I have included the social links in the footer， check footer-design-2 https://www.apple.com/sitemap/ An easy manner to navigate through each link it's not present through the navbar or any of the menu items through footer only. Yes， I have put the mailing list under community Also for the mobile view， I particularly liked the idea of https://apple.com for making use of the collapsible section. I have added snapshots for it as well. Hide Permalink Zoran Regvart added a comment - 05/Jul/20 14:19 Looks good， I'd put the work for sitemap on a separate issue， let's not have the scope of this too big. Show Zoran Regvart added a comment - 05/Jul/20 14:19 Looks good， I'd put the work for sitemap on a separate issue， let's not have the scope of this too big. Hide Permalink Aemie added a comment - 05/Jul/20 16:31 - edited Zoran Regvart Yes， of course， it was a suggestion as I found it pretty good feature on the apple website. If you have any further suggestions on the footer， do let me know. I have begun implementing the desktop mode for the footer as of now. Aashna Jena Maria Arias de Reyna Dominguez Zoran Regvart Show Aemie added a comment - 05/Jul/20 16:31 - edited Zoran Regvart Yes， of course， it was a suggestion as I found it pretty good feature on the apple website. If you have any further suggestions on the footer， do let me know. I have begun implementing the desktop mode for the footer as of now. Aashna Jena Maria Arias de Reyna Dominguez Zoran Regvart Hide Permalink Aashna Jena added a comment - 07/Jul/20 11:47 One thing I've noticed is that footers are mostly inverse colored compared to the rest of the website， I was wondering if we could try that. The Apache website also does this. Secondly， I had suggested the addition of a couple of things - form for subscribing to mailing list， which I feel would be very helpful， and links for reporting a bug on the website， contact info etc. Can we include these things? I can make some designs which I had in mind initially， but couldn't implement because I was busy with schoolwork the last couple of weeks. Show Aashna Jena added a comment - 07/Jul/20 11:47 One thing I've noticed is that footers are mostly inverse colored compared to the rest of the website， I was wondering if we could try that. The Apache website also does this. Secondly， I had suggested the addition of a couple of things - form for subscribing to mailing list， which I feel would be very helpful， and links for reporting a bug on the website， contact info etc. Can we include these things? I can make some designs which I had in mind initially， but couldn't implement because I was busy with schoolwork the last couple of weeks. Hide Permalink Aemie added a comment - 07/Jul/20 12:20 - edited Aashna Jena about the bug report is through Jira， which can go along with the icons I believe with the footer design I provided， and yes that will be helpful. We could make the list of icons that are required in the footer. I am not sure about subscribing to the mailing list but can be included in the design if required. Apart from that， I began implementation on it， so I hope we are not clashing. I explored with the inversion look， didn't really suit the design for the website. We could keep a more subtle and light shade bg such as #f5f5f5 for the footer. It seems to be consistent and smooth along with the website design. Also about subscription to the mailing lists are we taking in the assumption that we will allow the user to collectively subscribe to the whole mailing lists as mailing list consists of 4 sub-lists. Or are we approaching in the manner where we ask to subscribe and provide a paragraph below stating the link to the mailing lists page? Show Aemie added a comment - 07/Jul/20 12:20 - edited Aashna Jena about the bug report is through Jira， which can go along with the icons I believe with the footer design I provided， and yes that will be helpful. We could make the list of icons that are required in the footer. I am not sure about subscribing to the mailing list but can be included in the design if required. Apart from that， I began implementation on it， so I hope we are not clashing. I explored with the inversion look， didn't really suit the design for the website. We could keep a more subtle and light shade bg such as #f5f5f5 for the footer. It seems to be consistent and smooth along with the website design. Also about subscription to the mailing lists are we taking in the assumption that we will allow the user to collectively subscribe to the whole mailing lists as mailing list consists of 4 sub-lists. Or are we approaching in the manner where we ask to subscribe and provide a paragraph below stating the link to the mailing lists page? Hide Permalink Aemie added a comment - 08/Jul/20 14:29 - edited Zoran Regvart Maria Arias de Reyna Dominguez Aashna Jena I believe this footer design presented is quite minimal， we can also include the additional info Aashna suggested such as Jira icon for the bug report， and contact info ( not sure about subscription tho ). I wanted to list out the things on implementation of footer - Implement the footer desktop design for width >= 875px Implement the footer mobile design for width < 875px As the social icons are used in the footer， we don't need it in the navbar anymore. I can do the required changes for it after the two designs are created， Going to create a separate issue to create a page for Privacy Policy Zoran suggested. So let me know if you do like the design I have attached to the issue so I can be sure to continue on implementation and if any additional things other than the listed are required as of now. Thanks. Show Aemie added a comment - 08/Jul/20 14:29 - edited Zoran Regvart Maria Arias de Reyna Dominguez Aashna Jena I believe this footer design presented is quite minimal， we can also include the additional info Aashna suggested such as Jira icon for the bug report， and contact info ( not sure about subscription tho ). I wanted to list out the things on implementation of footer - Implement the footer desktop design for width >= 875px Implement the footer mobile design for width < 875px As the social icons are used in the footer， we don't need it in the navbar anymore. I can do the required changes for it after the two designs are created， Going to create a separate issue to create a page for Privacy Policy Zoran suggested. So let me know if you do like the design I have attached to the issue so I can be sure to continue on implementation and if any additional things other than the listed are required as of now. Thanks. Hide Permalink Zoran Regvart added a comment - 08/Jul/20 17:32 I think adding a link to the issue tracker makes sense. It is a bit fuzzy， as some sub-projects opted on enabling GitHub issues， so it's primarily used instead of JIRA. I'd try to use the same breakpoints we already have (max-width: 1023px， max-width: 626px， max-width: 480px)， if at all possible I would not introduce a new breakpoint. I'm not sure about removing the icons from the navbar， it might end up with mostly empty navbar so we'd have to rethink it. Implementation-wise I'd try to implement this with CSS only and without much animation to keep it as simple as possible. Show Zoran Regvart added a comment - 08/Jul/20 17:32 I think adding a link to the issue tracker makes sense. It is a bit fuzzy， as some sub-projects opted on enabling GitHub issues， so it's primarily used instead of JIRA. I'd try to use the same breakpoints we already have (max-width: 1023px， max-width: 626px， max-width: 480px)， if at all possible I would not introduce a new breakpoint. I'm not sure about removing the icons from the navbar， it might end up with mostly empty navbar so we'd have to rethink it. Implementation-wise I'd try to implement this with CSS only and without much animation to keep it as simple as possible. Hide Permalink Aemie added a comment - 08/Jul/20 18:13 Zoran Regvart I still think we could allow a Jira icon as well tho. About removing the navbar icon， I will think about it as removing icons does make it completely plain. I think the changes could be achieved most of it through HTML and CSS itself. Also， about the breaking point， I can bring down the breakpoint to 750px where both designs look good 'cause if I do get down the breakpoint to 626px then for some screen the footer-design would look a bit clustered， I don't personally prefer it being clustered. Show Aemie added a comment - 08/Jul/20 18:13 Zoran Regvart I still think we could allow a Jira icon as well tho. About removing the navbar icon， I will think about it as removing icons does make it completely plain. I think the changes could be achieved most of it through HTML and CSS itself. Also， about the breaking point， I can bring down the breakpoint to 750px where both designs look good 'cause if I do get down the breakpoint to 626px then for some screen the footer-design would look a bit clustered， I don't personally prefer it being clustered. Hide Permalink Aashna Jena added a comment - 11/Jul/20 10:26 What is the Sitemap link for? Are we planning on making a site map page similar to Apple? If yes， I'd like to work on it! Zoran Regvart Aemie Can you please confirm if that's the idea? I'll make a separate issue on it then Show Aashna Jena added a comment - 11/Jul/20 10:26 What is the Sitemap link for? Are we planning on making a site map page similar to Apple? If yes， I'd like to work on it! Zoran Regvart Aemie Can you please confirm if that's the idea? I'll make a separate issue on it then Hide Permalink Aemie added a comment - 11/Jul/20 11:50 - edited Aashna Jena， I really liked their idea of sitemap on the apple site and as ours is heavily documented， sitemap would make it really easy. I dealt with the privacy policy and created a PR for that so it will be great if you can work on a sitemap. However， the one thing we discussed on the call was to generate the whole sitemap. So it will be nice if you can create the issue and then we can have the discussion for it there. I thought about it， so just sharing the idea here. What we could do is we want the sitemap as one of the Hugo pages. So within the content folder， we could create an automated version of each part like Blog， User Manual， Components， EIP， and so on and then just use the Hugo attributes to list within the HTML file in the layouts folder. The only thing is to create the automated version 'cause it keeps updating and we could fetch it through ./documentation folder in the repo and make use of the title tag of each HTML file (we could use gulp for this). Zoran Regvart about the breakpoint if I reduce it to 626px so as to include any further new breakpoints， the preview for it is at footer-arrangement-626.png. Are you fine with that? Show Aemie added a comment - 11/Jul/20 11:50 - edited Aashna Jena ， I really liked their idea of sitemap on the apple site and as ours is heavily documented， sitemap would make it really easy. I dealt with the privacy policy and created a PR for that so it will be great if you can work on a sitemap. However， the one thing we discussed on the call was to generate the whole sitemap. So it will be nice if you can create the issue and then we can have the discussion for it there. I thought about it， so just sharing the idea here. What we could do is we want the sitemap as one of the Hugo pages. So within the content folder， we could create an automated version of each part like Blog， User Manual， Components， EIP， and so on and then just use the Hugo attributes to list within the HTML file in the layouts folder. The only thing is to create the automated version 'cause it keeps updating and we could fetch it through ./documentation folder in the repo and make use of the title tag of each HTML file (we could use gulp for this). Zoran Regvart about the breakpoint if I reduce it to 626px so as to include any further new breakpoints， the preview for it is at footer-arrangement-626.png. Are you fine with that? Hide Permalink ASF GitHub Bot added a comment - 14/Jul/20 18:38 AemieJ opened a new pull request #428: URL: https://github.com/apache/camel-website/pull/428 This PR deals with the new design for the footer of the website layout. It covers the following : Use a light soothing background with `#f5f5f5` shade. Include the required and sufficient navigation links to ease the navigation for the users to different pages. Create a systematic layout for presentation Privacy policy link to be included after the PR is merged related to it. Basic Social Icons added to the bottom of the footer. An additional feature for mobile footer menu : An option to toggle so the footer is easy to scroll through and takes in less amount of vertical space. > This footer is created in account with the best practices for a footer. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 14/Jul/20 18:38 AemieJ opened a new pull request #428: URL: https://github.com/apache/camel-website/pull/428 This PR deals with the new design for the footer of the website layout. It covers the following : Use a light soothing background with `#f5f5f5` shade. Include the required and sufficient navigation links to ease the navigation for the users to different pages. Create a systematic layout for presentation Privacy policy link to be included after the PR is merged related to it. Basic Social Icons added to the bottom of the footer. An additional feature for mobile footer menu : An option to toggle so the footer is easy to scroll through and takes in less amount of vertical space. > This footer is created in account with the best practices for a footer. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 15/Jul/20 10:24 zregvart commented on a change in pull request #428: URL: https://github.com/apache/camel-website/pull/428#discussion_r454947695 ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -90，3 +125，92 @@ footer .footer dl dd { border-radius: 0.4rem 0.4rem 0 0; height: 2rem; } + +footer .footer .break-row-footer { + display: block; + flex-basis: 100%; + height: 0; +} + +footer .footer .footer-icons { + display: flex; + align-items: flex-end; + justify-content: flex-end; + line-height: 1.6; + padding: 0.5rem; + font-weight: bold; +} + +footer .footer .footer-icons .brand-icon { + height: 2em; + width: 1.75em; + margin: 0.35rem; + fill: var(--navbar-font-color); +} + +footer .footer .show-menu， +footer .footer .hide-menu { + display: none; +} + +@media screen and (max-width: 626px) { Review comment: I'd put this breakpoint at 1023px， we do that for the majority of responsive design and if we wish to prevent wrapping About to the second row， it wraps on 667px as well: ![Screenshot_2020-07-15 Apache Camel user manual Apache Camel](https://user-images.githubusercontent.com/1306050/87533914-a2ae9a80-c695-11ea-974f-bf3bbd689e81.png) ########## File path: antora-ui-camel/src/js/06-mobile-footer.js ########## @@ -0，0 +1，15 @@ +document.addEventListener('DOMContentLoaded'， function () { Review comment: Perhaps we can do a version without JavaScript? Using `<label>` for `<input type=checkbox>` and based on [`:checked` selector](https://css-tricks.com/almanac/selectors/c/checked/). ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 15/Jul/20 10:24 zregvart commented on a change in pull request #428: URL: https://github.com/apache/camel-website/pull/428#discussion_r454947695 ########## File path: antora-ui-camel/src/css/footer.css ########## @@ -90，3 +125，92 @@ footer .footer dl dd { border-radius: 0.4rem 0.4rem 0 0; height: 2rem; } + +footer .footer .break-row-footer { + display: block; + flex-basis: 100%; + height: 0; +} + +footer .footer .footer-icons { + display: flex; + align-items: flex-end; + justify-content: flex-end; + line-height: 1.6; + padding: 0.5rem; + font-weight: bold; +} + +footer .footer .footer-icons .brand-icon { + height: 2em; + width: 1.75em; + margin: 0.35rem; + fill: var(--navbar-font-color); +} + +footer .footer .show-menu， +footer .footer .hide-menu { + display: none; +} + +@media screen and (max-width: 626px) { Review comment: I'd put this breakpoint at 1023px， we do that for the majority of responsive design and if we wish to prevent wrapping About to the second row， it wraps on 667px as well: ! [Screenshot_2020-07-15 Apache Camel user manual Apache Camel] ( https://user-images.githubusercontent.com/1306050/87533914-a2ae9a80-c695-11ea-974f-bf3bbd689e81.png ) ########## File path: antora-ui-camel/src/js/06-mobile-footer.js ########## @@ -0，0 +1，15 @@ +document.addEventListener('DOMContentLoaded'， function () { Review comment: Perhaps we can do a version without JavaScript? Using `<label>` for `<input type=checkbox>` and based on [`:checked` selector] ( https://css-tricks.com/almanac/selectors/c/checked/ ). ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 15/Jul/20 17:50 AemieJ commented on a change in pull request #428: URL: https://github.com/apache/camel-website/pull/428#discussion_r455232658 ########## File path: antora-ui-camel/src/js/06-mobile-footer.js ########## @@ -0，0 +1，15 @@ +document.addEventListener('DOMContentLoaded'， function () { Review comment: Well that's a creative checkbox hack and I am aware of it but I prevented using it 'cause it is a CSS hack. Another point I would like to raise is even if I were to use a CSS hack with a checkbox for toggling for the footer scenario then we shouldn't use javascript for the navbar burger and dropdown arrow toggling as well， I believe. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 15/Jul/20 17:50 AemieJ commented on a change in pull request #428: URL: https://github.com/apache/camel-website/pull/428#discussion_r455232658 ########## File path: antora-ui-camel/src/js/06-mobile-footer.js ########## @@ -0，0 +1，15 @@ +document.addEventListener('DOMContentLoaded'， function () { Review comment: Well that's a creative checkbox hack and I am aware of it but I prevented using it 'cause it is a CSS hack. Another point I would like to raise is even if I were to use a CSS hack with a checkbox for toggling for the footer scenario then we shouldn't use javascript for the navbar burger and dropdown arrow toggling as well， I believe. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 15/Jul/20 17:51 AemieJ commented on a change in pull request #428: URL: https://github.com/apache/camel-website/pull/428#discussion_r455232658 ########## File path: antora-ui-camel/src/js/06-mobile-footer.js ########## @@ -0，0 +1，15 @@ +document.addEventListener('DOMContentLoaded'， function () { Review comment: Well that's a creative checkbox hack and I am aware of it but I prevented using it 'cause it is a CSS hack. Another point I would like to raise is even if I were to use a CSS hack with a checkbox for toggling for the footer scenario then we shouldn't use javascript for the navbar burger and dropdown arrow toggling as well， I believe. I prefer javascript for toggling personally， it's not a hack and is certain to work in any case. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 15/Jul/20 17:51 AemieJ commented on a change in pull request #428: URL: https://github.com/apache/camel-website/pull/428#discussion_r455232658 ########## File path: antora-ui-camel/src/js/06-mobile-footer.js ########## @@ -0，0 +1，15 @@ +document.addEventListener('DOMContentLoaded'， function () { Review comment: Well that's a creative checkbox hack and I am aware of it but I prevented using it 'cause it is a CSS hack. Another point I would like to raise is even if I were to use a CSS hack with a checkbox for toggling for the footer scenario then we shouldn't use javascript for the navbar burger and dropdown arrow toggling as well， I believe. I prefer javascript for toggling personally， it's not a hack and is certain to work in any case. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 16/Jul/20 17:47 zregvart commented on a change in pull request #428: URL: https://github.com/apache/camel-website/pull/428#discussion_r455963444 ########## File path: antora-ui-camel/src/js/06-mobile-footer.js ########## @@ -0，0 +1，15 @@ +document.addEventListener('DOMContentLoaded'， function () { Review comment: I think it's debatable if the using `:checked` selector and checkboxes should or should not be used. I think it's fairly common practice that got labeled a hack in the beginning and can't shake this image. For me it's about the simplicity of the solution rather than the technique， and I think in this case we do not need to use JavaScript. Perhaps more appropriate no-JavaScript solution could be using the [`:target` CSS](https://developer.mozilla.org/en-US/docs/Web/CSS/:target) selector. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 16/Jul/20 17:47 zregvart commented on a change in pull request #428: URL: https://github.com/apache/camel-website/pull/428#discussion_r455963444 ########## File path: antora-ui-camel/src/js/06-mobile-footer.js ########## @@ -0，0 +1，15 @@ +document.addEventListener('DOMContentLoaded'， function () { Review comment: I think it's debatable if the using `:checked` selector and checkboxes should or should not be used. I think it's fairly common practice that got labeled a hack in the beginning and can't shake this image. For me it's about the simplicity of the solution rather than the technique， and I think in this case we do not need to use JavaScript. Perhaps more appropriate no-JavaScript solution could be using the [`:target` CSS] ( https://developer.mozilla.org/en-US/docs/Web/CSS/:target ) selector. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 18/Jul/20 07:48 AemieJ commented on a change in pull request #428: URL: https://github.com/apache/camel-website/pull/428#discussion_r456762637 ########## File path: antora-ui-camel/src/js/06-mobile-footer.js ########## @@ -0，0 +1，15 @@ +document.addEventListener('DOMContentLoaded'， function () { Review comment: While the `:target` selector works with toggling， it causes unnecessary scrolling in pages. I will try with the use of a `:checked` selector as well but if it works toggling with the checked selector in this scenario， I think in that way we could minimize the use of javascript for navbar burger toggling and the dropdown menu toggling for the mobile version. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 18/Jul/20 07:48 AemieJ commented on a change in pull request #428: URL: https://github.com/apache/camel-website/pull/428#discussion_r456762637 ########## File path: antora-ui-camel/src/js/06-mobile-footer.js ########## @@ -0，0 +1，15 @@ +document.addEventListener('DOMContentLoaded'， function () { Review comment: While the `:target` selector works with toggling， it causes unnecessary scrolling in pages. I will try with the use of a `:checked` selector as well but if it works toggling with the checked selector in this scenario， I think in that way we could minimize the use of javascript for navbar burger toggling and the dropdown menu toggling for the mobile version. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 18/Jul/20 12:15 AemieJ commented on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-660474374 @zregvart I have made use of checkbox for the toggling effect instead of using javascript for the same now! Also as the toggling works with CSS itself， can we adapt this for the dropdown menu item toggling within the navbar as well and the navbar burger as this will minimize the use of javascript as a whole? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 18/Jul/20 12:15 AemieJ commented on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-660474374 @zregvart I have made use of checkbox for the toggling effect instead of using javascript for the same now! Also as the toggling works with CSS itself， can we adapt this for the dropdown menu item toggling within the navbar as well and the navbar burger as this will minimize the use of javascript as a whole? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 19/Jul/20 13:00 aashnajena commented on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-660640371 I think we can reduce the vertical space between headings on smaller screens. This way all the headings can fit into the display at once. ![image](https://user-images.githubusercontent.com/32356795/87875286-e551d900-c9ed-11ea-8a4b-1d85347879ac.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 19/Jul/20 13:00 aashnajena commented on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-660640371 I think we can reduce the vertical space between headings on smaller screens. This way all the headings can fit into the display at once. ! [image] ( https://user-images.githubusercontent.com/32356795/87875286-e551d900-c9ed-11ea-8a4b-1d85347879ac.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 19/Jul/20 13:54 AemieJ edited a comment on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-660474374 @zregvart I have made use of checkbox for the toggling effect instead of using javascript for the same now. Also as the toggling works with CSS itself， can we adapt this for the dropdown menu item toggling within the navbar as well and the navbar burger as this will minimize the use of javascript as a whole? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 19/Jul/20 13:54 AemieJ edited a comment on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-660474374 @zregvart I have made use of checkbox for the toggling effect instead of using javascript for the same now. Also as the toggling works with CSS itself， can we adapt this for the dropdown menu item toggling within the navbar as well and the navbar burger as this will minimize the use of javascript as a whole? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 19/Jul/20 17:34 AemieJ commented on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-660680724 @aashnajena I am not completely sure 'cause reducing vertical space here creates a clustering effect for me than the current changes. I would like opinions on it from @zregvart as well before I think about bringing in this change. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 19/Jul/20 17:34 AemieJ commented on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-660680724 @aashnajena I am not completely sure 'cause reducing vertical space here creates a clustering effect for me than the current changes. I would like opinions on it from @zregvart as well before I think about bringing in this change. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 19/Jul/20 17:35 AemieJ edited a comment on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-660680724 @aashnajena I am not completely sure 'cause reducing vertical space here creates a clustering effect for me than the current changes. I would like opinions on it from @zregvart and @Delawen as well before I think about bringing in this change. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 19/Jul/20 17:35 AemieJ edited a comment on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-660680724 @aashnajena I am not completely sure 'cause reducing vertical space here creates a clustering effect for me than the current changes. I would like opinions on it from @zregvart and @Delawen as well before I think about bringing in this change. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 20/Jul/20 23:08 zregvart commented on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-661419548 @AemieJ I think @aashnajena is talking about the vertical padding between two items on the version of the footer for smaller screens. I think that padding can be a bit smaller， the one on @aashnajena version looks okay to me. @aashnajena perhaps you can add a [suggestion](https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/reviewing-proposed-changes-in-a-pull-request#starting-a-review) with the change you made on your end. ![Screenshot_2020-07-21 Home - Apache Camel](https://user-images.githubusercontent.com/1306050/87994826-32b56f80-caee-11ea-93af-8ac4df89242f.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 20/Jul/20 23:08 zregvart commented on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-661419548 @AemieJ I think @aashnajena is talking about the vertical padding between two items on the version of the footer for smaller screens. I think that padding can be a bit smaller， the one on @aashnajena version looks okay to me. @aashnajena perhaps you can add a [suggestion] ( https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/reviewing-proposed-changes-in-a-pull-request#starting-a-review ) with the change you made on your end. ! [Screenshot_2020-07-21 Home - Apache Camel] ( https://user-images.githubusercontent.com/1306050/87994826-32b56f80-caee-11ea-93af-8ac4df89242f.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 21/Jul/20 02:06 AemieJ removed a comment on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-660474374 @zregvart I have made use of checkbox for the toggling effect instead of using javascript for the same now. Also as the toggling works with CSS itself， can we adapt this for the dropdown menu item toggling within the navbar as well and the navbar burger as this will minimize the use of javascript as a whole? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 21/Jul/20 02:06 AemieJ removed a comment on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-660474374 @zregvart I have made use of checkbox for the toggling effect instead of using javascript for the same now. Also as the toggling works with CSS itself， can we adapt this for the dropdown menu item toggling within the navbar as well and the navbar burger as this will minimize the use of javascript as a whole? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 21/Jul/20 04:23 AemieJ commented on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-661624880 @zregvart this is achievable I was just unsure whether we require it or not. I will make the required changes based on @aashnajena version soon and update the PR. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 21/Jul/20 04:23 AemieJ commented on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-661624880 @zregvart this is achievable I was just unsure whether we require it or not. I will make the required changes based on @aashnajena version soon and update the PR. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 24/Jul/20 06:54 AemieJ commented on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-663374570 @zregvart does this PR require any further changes or it's fine now? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 24/Jul/20 06:54 AemieJ commented on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-663374570 @zregvart does this PR require any further changes or it's fine now? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 24/Jul/20 06:56 AemieJ edited a comment on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-663374570 @zregvart does this PR require any further changes or it's fine with the current changes? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 24/Jul/20 06:56 AemieJ edited a comment on pull request #428: URL: https://github.com/apache/camel-website/pull/428#issuecomment-663374570 @zregvart does this PR require any further changes or it's fine with the current changes? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 25/Jul/20 21:04 zregvart merged pull request #428: URL: https://github.com/apache/camel-website/pull/428 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 25/Jul/20 21:04 zregvart merged pull request #428: URL: https://github.com/apache/camel-website/pull/428 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 27/Jul/20 06:16 oscerd opened a new pull request #440: URL: https://github.com/apache/camel-website/pull/440 Reverts apache/camel-website#428 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/Jul/20 06:16 oscerd opened a new pull request #440: URL: https://github.com/apache/camel-website/pull/440 Reverts apache/camel-website#428 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 27/Jul/20 06:17 oscerd merged pull request #440: URL: https://github.com/apache/camel-website/pull/440 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/Jul/20 06:17 oscerd merged pull request #440: URL: https://github.com/apache/camel-website/pull/440 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 27/Jul/20 06:17 oscerd commented on pull request #440: URL: https://github.com/apache/camel-website/pull/440#issuecomment-664142728 Reverting it， because the website build seems to be broken. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/Jul/20 06:17 oscerd commented on pull request #440: URL: https://github.com/apache/camel-website/pull/440#issuecomment-664142728 Reverting it， because the website build seems to be broken. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 27/Jul/20 09:14 AemieJ commented on pull request #440: URL: https://github.com/apache/camel-website/pull/440#issuecomment-664227864 @oscerd when I do `yarn checks` for the footer-design I receive `page not found from components/3.4.x/eips/request-reply.html to community/support` however request-reply.html isn't present anymore within the website and the PR #428 preview works perfectly. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/Jul/20 09:14 AemieJ commented on pull request #440: URL: https://github.com/apache/camel-website/pull/440#issuecomment-664227864 @oscerd when I do `yarn checks` for the footer-design I receive `page not found from components/3.4.x/eips/request-reply.html to community/support` however request-reply.html isn't present anymore within the website and the PR #428 preview works perfectly. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 27/Jul/20 09:36 oscerd commented on pull request #440: URL: https://github.com/apache/camel-website/pull/440#issuecomment-664240883 preview build doesn't do what the CI build does there is no checks for link there. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/Jul/20 09:36 oscerd commented on pull request #440: URL: https://github.com/apache/camel-website/pull/440#issuecomment-664240883 preview build doesn't do what the CI build does there is no checks for link there. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 27/Jul/20 09:55 zregvart commented on pull request #440: URL: https://github.com/apache/camel-website/pull/440#issuecomment-664250308 Yes， we don’t run checks on Netlify because running them would use up the free build minutes we have there. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/Jul/20 09:55 zregvart commented on pull request #440: URL: https://github.com/apache/camel-website/pull/440#issuecomment-664250308 Yes， we don’t run checks on Netlify because running them would use up the free build minutes we have there. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 27/Jul/20 09:56 zregvart commented on pull request #440: URL: https://github.com/apache/camel-website/pull/440#issuecomment-664251068 @aemiej remove everything from the public directory and rebuild， we don’t have a way to remove just the deleted pages. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/Jul/20 09:56 zregvart commented on pull request #440: URL: https://github.com/apache/camel-website/pull/440#issuecomment-664251068 @aemiej remove everything from the public directory and rebuild， we don’t have a way to remove just the deleted pages. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 29/Jul/20 07:18 AemieJ removed a comment on pull request #440: URL: https://github.com/apache/camel-website/pull/440#issuecomment-664531838 @zregvart I did that still `yarn checks` failed for `integration.html` under *camel-k* and I observed that it is present in the other PR that has been merged and built as well. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 29/Jul/20 07:18 AemieJ removed a comment on pull request #440: URL: https://github.com/apache/camel-website/pull/440#issuecomment-664531838 @zregvart I did that still `yarn checks` failed for `integration.html` under * camel-k * and I observed that it is present in the other PR that has been merged and built as well. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 29/Jul/20 07:25 zregvart commented on a change in pull request #428: URL: https://github.com/apache/camel-website/pull/428#discussion_r461120721 ########## File path: antora-ui-camel/src/partials/footer-content.hbs ########## @@ -3，41 +3，86 @@ </div> <footer> <div class="footer"> <figure class="logo"> <img src="siteRootPath/_/img/logo-d.svg" class="logo-small mt-60" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <dl> + <figure class="logo"> + <img src="siteRootPath/_/img/logo-d.svg" class="logo-small mt-60" alt="Apache Camel Logo" + aria-label="white silhouette of a camel in front of a sand dune"> + </figure> <dt>Overview</dt> <dd><a href="siteRootPath/blog/">Blog</a></dd> <dd><a href="siteRootPath/components/latest/">Components</a></dd> <dd><a href="siteRootPath/download/">Download</a></dd> <dd><a href="siteRootPath/manual/latest/getting-started.html">Getting started</a></dd> <dd><a href="siteRootPath/manual/latest/faq/index.html">FAQ</a></dd> + <input type="checkbox" id="show-overview"/> + <label for="show-overview"><img class="show-menu" src="siteRootPath/_/img/show-footer-menu.svg"></label> + <label for="show-overview"><img class="hide-menu" src="siteRootPath/_/img/hide-footer-menu.svg"></label> + <div class="footer-menu"> + <dd><a href="siteRootPath/blog/">Blog</a></dd> + <dd><a href="siteRootPath/docs/">Documentation</a></dd> + <dd><a href="siteRootPath/community/support">COmmunity</a></dd> Review comment: @AemieJ this needs to be: ```suggestion <dd><a href="siteRootPath/community/support/">Community</a></dd> ``` Note the `/` at the end of `support/`， without it the URL would point to a file， with it it points to `index.html` in the `support` directory. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 29/Jul/20 07:25 zregvart commented on a change in pull request #428: URL: https://github.com/apache/camel-website/pull/428#discussion_r461120721 ########## File path: antora-ui-camel/src/partials/footer-content.hbs ########## @@ -3，41 +3，86 @@ </div> <footer> <div class="footer"> <figure class="logo"> <img src=" siteRootPath /_/img/logo-d.svg" class="logo-small mt-60" alt="Apache Camel Logo" aria-label="white silhouette of a camel in front of a sand dune"> </figure> <dl> + <figure class="logo"> + <img src=" siteRootPath /_/img/logo-d.svg" class="logo-small mt-60" alt="Apache Camel Logo" + aria-label="white silhouette of a camel in front of a sand dune"> + </figure> <dt>Overview</dt> <dd><a href=" siteRootPath /blog/">Blog</a></dd> <dd><a href=" siteRootPath /components/latest/">Components</a></dd> <dd><a href=" siteRootPath /download/">Download</a></dd> <dd><a href=" siteRootPath /manual/latest/getting-started.html">Getting started</a></dd> <dd><a href=" siteRootPath /manual/latest/faq/index.html">FAQ</a></dd> + <input type="checkbox" id="show-overview"/> + <label for="show-overview"><img class="show-menu" src=" siteRootPath /_/img/show-footer-menu.svg"></label> + <label for="show-overview"><img class="hide-menu" src=" siteRootPath /_/img/hide-footer-menu.svg"></label> + <div class="footer-menu"> + <dd><a href=" siteRootPath /blog/">Blog</a></dd> + <dd><a href=" siteRootPath /docs/">Documentation</a></dd> + <dd><a href=" siteRootPath /community/support">COmmunity</a></dd> Review comment: @AemieJ this needs to be: ```suggestion <dd><a href=" siteRootPath /community/support/">Community</a></dd> ``` Note the `/` at the end of `support/`， without it the URL would point to a file， with it it points to `index.html` in the `support` directory. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 29/Jul/20 08:01 AemieJ opened a new pull request #441: URL: https://github.com/apache/camel-website/pull/441 In PR #428， the PR wasn't being built due to an issue within the `footer-content.hbs`. Thus， creating a new PR fixing it as the previous one has been merged and I can't push any further commits to it. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 29/Jul/20 08:01 AemieJ opened a new pull request #441: URL: https://github.com/apache/camel-website/pull/441 In PR #428， the PR wasn't being built due to an issue within the `footer-content.hbs`. Thus， creating a new PR fixing it as the previous one has been merged and I can't push any further commits to it. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 29/Jul/20 17:38 zregvart merged pull request #441: URL: https://github.com/apache/camel-website/pull/441 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 29/Jul/20 17:38 zregvart merged pull request #441: URL: https://github.com/apache/camel-website/pull/441 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 29/Jul/20 17:52 zregvart commented on pull request #441: URL: https://github.com/apache/camel-website/pull/441#issuecomment-665524905 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 29/Jul/20 17:52 zregvart commented on pull request #441: URL: https://github.com/apache/camel-website/pull/441#issuecomment-665524905 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 30/Jul/20 20:52 zregvart commented on pull request #441: URL: https://github.com/apache/camel-website/pull/441#issuecomment-666688422 This is causing [HTML validation issues](https://issues.apache.org/jira/browse/CAMEL-15360)， I'll try to fix those now. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 30/Jul/20 20:52 zregvart commented on pull request #441: URL: https://github.com/apache/camel-website/pull/441#issuecomment-666688422 This is causing [HTML validation issues] ( https://issues.apache.org/jira/browse/CAMEL-15360 )， I'll try to fix those now. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Zoran Regvart added a comment - 01/Aug/20 18:34 Thanks Aemie! Show Zoran Regvart added a comment - 01/Aug/20 18:34 Thanks Aemie ! Hide Permalink Aemie added a comment - 02/Aug/20 17:39 Thanks Zoran Regvart for removing all the HTML validation issues， it was a great help! Show Aemie added a comment - 02/Aug/20 17:39 Thanks Zoran Regvart for removing all the HTML validation issues， it was a great help!
CAMEL-15184,Claus Ibsen,2020-06-16T02:19:31+0000,1592259571， where 1592259571 is the epoch,See CAMEL-15813 and the Prhttps://github.com/apache/camel/pull/3911,Hide Permalink Dixon Whitmire added a comment - 16/Jun/20 02:19 - edited The findImplementation method uses a predicate/filter， AssignableToPackageScanFilter， to find matching classes. It seems that it would be ideal to add an additional filter， isConcreteClass， and update findImplementation to utilize both filters， AssignableToPackageScanFilter and isConcreteClass， using getCompositeFilter. From what I can tell， this approach leaves the AssignableToPackageScanFilter intact so that it may be utilized within Spring/Spring Boot without issue. Show Dixon Whitmire added a comment - 16/Jun/20 02:19 - edited The findImplementation method uses a predicate/filter， AssignableToPackageScanFilter ， to find matching classes. It seems that it would be ideal to add an additional filter， isConcreteClass， and update findImplementation to utilize both filters， AssignableToPackageScanFilter and isConcreteClass， using getCompositeFilter . From what I can tell， this approach leaves the AssignableToPackageScanFilter intact so that it may be utilized within Spring/Spring Boot without issue. Hide Permalink Claus Ibsen added a comment - 16/Jun/20 07:27 Okay sounds good Show Claus Ibsen added a comment - 16/Jun/20 07:27 Okay sounds good
CAMEL-15183,Unassigned,2020-06-13T02:28:19+0000,1592000899， where 1592000899 is the epoch,My team is developing a "stand-alone" Camel Main application which utilizes route builder discovery using the package scanning feature. The current implementation instantiates any class within the package which extend RouteBuilder. If an abstract class which extends RouteBuilder is in the package， the Camel Context fails to load since the abstract class cannot be instantiated.Our application currently utilizes an abstract class within a "scanned" package， so we wanted to see if the scanning algorithm could be updated to exclude abstract classes.This PR updates the package scanning algorithm and the corresponding test case.,There are no comments yet on this issue.
CAMEL-15182,David Jencks,2020-06-12T19:57:20+0000,1591977440， where 1591977440 is the epoch,We can generate the lists of components on component summary pages and standardize the layout a bit. e.g aws-summary. This needs some .adoc updates and a version bump in the website package.json.,Hide Permalink ASF GitHub Bot added a comment - 12/Jun/20 19:57 djencks opened a new pull request #395: URL: https://github.com/apache/camel-website/pull/395 This is the camel-website change for the issue. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 12/Jun/20 19:57 djencks opened a new pull request #395: URL: https://github.com/apache/camel-website/pull/395 This is the camel-website change for the issue. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink David Jencks added a comment - 12/Jun/20 20:01 camel-website pr: https://github.com/apache/camel-website/pull/395 (apply first!) camel master pr: https://github.com/apache/camel/pull/3910 Show David Jencks added a comment - 12/Jun/20 20:01 camel-website pr: https://github.com/apache/camel-website/pull/395 (apply first!) camel master pr: https://github.com/apache/camel/pull/3910 Hide Permalink ASF GitHub Bot added a comment - 13/Jun/20 02:07 djencks commented on pull request #395: URL: https://github.com/apache/camel-website/pull/395#issuecomment-643553385 I don't see any information about what the problem at netlify is， and it looks like almost all our builds there fail with identical minimal information. Is this PR safe to apply? It works fine locally. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 13/Jun/20 02:07 djencks commented on pull request #395: URL: https://github.com/apache/camel-website/pull/395#issuecomment-643553385 I don't see any information about what the problem at netlify is， and it looks like almost all our builds there fail with identical minimal information. Is this PR safe to apply? It works fine locally. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 14/Jun/20 14:00 djencks merged pull request #395: URL: https://github.com/apache/camel-website/pull/395 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 14/Jun/20 14:00 djencks merged pull request #395: URL: https://github.com/apache/camel-website/pull/395 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink David Jencks added a comment - 14/Jun/20 14:05 PRs applied Show David Jencks added a comment - 14/Jun/20 14:05 PRs applied Hide Permalink ASF GitHub Bot added a comment - 15/Jun/20 12:06 zregvart commented on pull request #395: URL: https://github.com/apache/camel-website/pull/395#issuecomment-644088631 @djencks see the [discussion](https://lists.apache.org/thread.html/rce07ea051ffe43b0cbd0aedea68c7e6f836e286a88507286efb22687%40%3Cdev.camel.apache.org%3E) on the mailing list for the Netlify issue. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 15/Jun/20 12:06 zregvart commented on pull request #395: URL: https://github.com/apache/camel-website/pull/395#issuecomment-644088631 @djencks see the [discussion] ( https://lists.apache.org/thread.html/rce07ea051ffe43b0cbd0aedea68c7e6f836e286a88507286efb22687%40%3Cdev.camel.apache.org%3E ) on the mailing list for the Netlify issue. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org
CAMEL-15181,Omar Al-Safi,2020-06-12T17:15:31+0000,1591967731， where 1591967731 is the epoch,Currently we have these headers:CamelAzureStorageBlobAppendBlobCreated CamelAzureStorageBlobPageBlockCreated being set to `false` by default. However this is bit confusing to the user， hence these new headers would make sense instead of the above ones being set to falseCamelAzureStorageBlobCreateAppendBlobCamelAzureStorageBlobCreatePageBlob,There are no comments yet on this issue.
CAMEL-15180,Unassigned,2020-06-12T04:44:24+0000,1591922664， where 1591922664 is the epoch,Hey all， wanted to give the plugin a spin as we look to migrate some services from mule to camel and couldn't get the plugin to work for a simple project. Checked out plugin code and the tests are failing. I'll try to dig in and see what I can figure out but though I'd create an ticket for this.Here's the report from maven: [INFO] — maven-invoker-plugin:3.2.1:verify (integration-test) @ camel-restdsl-openapi-plugin — -[INFO] -------------------------------------------------- [INFO] Build Summary: [INFO] Passed: 5， Failed: 6， Errors: 0， Skipped: 0 -[INFO] -------------------------------------------------- [ERROR] The following builds failed: [ERROR] * customized-v3/pom.xml [ERROR] * simple-dto-v3/pom.xml [ERROR] * simple-xml-dto-v3/pom.xml [ERROR] * customized/pom.xml [ERROR] * simple-dto/pom.xml [ERROR] * simple-xml-dto/pom.xmlEdit:The failing integration tests were an error on my part when running the tests locally. However I found the cause for the original issue I was having where the plugin was not generating routes. I used the OpenAPI available here https://github.com/OAI/OpenAPI-Specification/blob/master/examples/v3.0/petstore-expanded.yaml The generator failed to parse it correctly because one of its parameters is of type `form` but does not explicitly set `explode` to anything so it results in a NPE. The spec states that `form` defaults to `true`,Hide Permalink Claus Ibsen added a comment - 12/Jun/20 04:44 Are you able to work on a fix as a PR? Show Claus Ibsen added a comment - 12/Jun/20 04:44 Are you able to work on a fix as a PR? Hide Permalink Jose Montoya added a comment - 12/Jun/20 04:49 - edited Already done https://github.com/apache/camel/pull/3906 Show Jose Montoya added a comment - 12/Jun/20 04:49 - edited Already done https://github.com/apache/camel/pull/3906 Hide Permalink Claus Ibsen added a comment - 12/Jun/20 05:00 Awesome thanks for reporting and the PR Show Claus Ibsen added a comment - 12/Jun/20 05:00 Awesome thanks for reporting and the PR
CAMEL-15179,Unassigned,2020-06-12T13:16:17+0000,1591953377， where 1591953377 is the epoch,If you see the traits navigation on the left side https://camel.apache.org/camel-k/latest/traits/gc.htmlThen the items are displayed as first letter upper cased and rest lower. This makes some of the items "ugly"Gc -> GC Jvm -> JVM 3scale -> 3ScaleIn the camel 3 repo we have tooling that allows us to specify a title and override the generate named， so we can say title = "JVM".I wonder if we could get something for the camel-k tooling that generates this navigation.,Hide Permalink Aemie added a comment - 12/Jun/20 13:16 Claus Ibsen you want the autogeneration of traits navigation similar to that of component nav autogeneration in camel， right? Show Aemie added a comment - 12/Jun/20 13:16 Claus Ibsen you want the autogeneration of traits navigation similar to that of component nav autogeneration in camel， right? Hide Permalink Claus Ibsen added a comment - 13/Jun/20 07:20 Yeah (if its auto generated， which I assume) Show Claus Ibsen added a comment - 13/Jun/20 07:20 Yeah (if its auto generated， which I assume) Hide Permalink Aemie added a comment - 20/Jun/20 15:37 Claus Ibsen in the nav.adoc the traits are autogenerated， where is the code written to generate the traits index within nav.adoc [https://github.com/apache/camel-k/blob/master/docs/modules/ROOT/nav.adoc] . Also， I thought if I were to create an adoc file with all the traits， it's best to create a separate adoc within ROOT as nav-traits.adoc and then include that within the a*ntora.yml* Show Aemie added a comment - 20/Jun/20 15:37 Claus Ibsen in the nav.adoc the traits are autogenerated， where is the code written to generate the traits index within nav.adoc [ https://github.com/apache/camel-k/blob/master/docs/modules/ROOT/nav.adoc ] . Also， I thought if I were to create an adoc file with all the traits， it's best to create a separate adoc within ROOT as nav-traits.adoc and then include that within the a*ntora.yml* Hide Permalink Zoran Regvart added a comment - 27/Jun/20 18:57 I think the issue is caused by calling strings.Title on this line https://github.com/apache/camel-k/blob/cdbb25cca61e9df62e8442c310afe4f4f029561c/cmd/util/doc-gen/generators/traitdocgen.go#L156. Perhaps Nicola Ferraro can help us understand the need for that. Nicola Ferraro can strings.Title be removed? Show Zoran Regvart added a comment - 27/Jun/20 18:57 I think the issue is caused by calling strings.Title on this line https://github.com/apache/camel-k/blob/cdbb25cca61e9df62e8442c310afe4f4f029561c/cmd/util/doc-gen/generators/traitdocgen.go#L156 . Perhaps Nicola Ferraro can help us understand the need for that. Nicola Ferraro can strings.Title be removed?
CAMEL-15178,Claus Ibsen,2020-06-11T11:45:30+0000,1591861530， where 1591861530 is the epoch,Lets make this like the others with its own properites class， and have it exposed in tooling metdata. Then we can also make this configurable for spring boot， and the same across all runtimes.,There are no comments yet on this issue.
CAMEL-15177,Andrea Cosentino,2020-11-30T08:33:01+0000,1606707181， where 1606707181 is the epoch,,Hide Permalink Serge Shikov added a comment - 6 days ago - edited Can't understand the idea behind this task. Reason is camel-hdfs does not work on Camel Kafka Connector? And so what? If it doesn't work in some cases， why remove it? This is just karaf feature xml file， if for somebody it doesn't work for some reason - why somebody installed it? Show Serge Shikov added a comment - 6 days ago - edited Can't understand the idea behind this task. Reason is camel-hdfs does not work on Camel Kafka Connector? And so what? If it doesn't work in some cases， why remove it? This is just karaf feature xml file， if for somebody it doesn't work for some reason - why somebody installed it? Hide Permalink Andrea Cosentino added a comment - 6 days ago The reason is that camel-hdfs won't even install in camel-karaf. The other issue is just related. After upgrading to a newer version the Karaf feature wasn't working anymore， it wasn't installing at all. So there was no reason to maintain the feature in the camel-karaf repository. This is the reason. I don't get your point. If something doesn't even install， why do we have to maintain it in the feature list? Show Andrea Cosentino added a comment - 6 days ago The reason is that camel-hdfs won't even install in camel-karaf. The other issue is just related. After upgrading to a newer version the Karaf feature wasn't working anymore， it wasn't installing at all. So there was no reason to maintain the feature in the camel-karaf repository. This is the reason. I don't get your point. If something doesn't even install， why do we have to maintain it in the feature list? Hide Permalink Serge Shikov added a comment - 6 days ago Ok， get it. So， its unrelated to CAMEL-15169， and this is generic issue with Hadoop and Karaf? And this is not possible to install Hadoop feature into Karaf for some reasons， right? Show Serge Shikov added a comment - 6 days ago Ok， get it. So， its unrelated to CAMEL-15169 ， and this is generic issue with Hadoop and Karaf? And this is not possible to install Hadoop feature into Karaf for some reasons， right? Hide Permalink Andrea Cosentino added a comment - 6 days ago Yes Show Andrea Cosentino added a comment - 6 days ago Yes Hide Permalink Serge Shikov added a comment - 6 days ago >After upgrading to a newer version the Karaf Is it possible to use it in older versions? Show Serge Shikov added a comment - 6 days ago >After upgrading to a newer version the Karaf Is it possible to use it in older versions? Hide Permalink Andrea Cosentino added a comment - 6 days ago You can't use the camel hdfs of 3.4.0 with older versions. But you can use an older version of camel and use the old camel-hdfs Show Andrea Cosentino added a comment - 6 days ago You can't use the camel hdfs of 3.4.0 with older versions. But you can use an older version of camel and use the old camel-hdfs
CAMEL-15176,Unassigned,2020-08-19T16:34:41+0000,1597840481， where 1597840481 is the epoch,,Hide Permalink Claus Ibsen added a comment - 19/Aug/20 16:34 There is a file that tracks the status at https://github.com/apache/camel/blob/master/components/components-init-work-in-progress.md Show Claus Ibsen added a comment - 19/Aug/20 16:34 There is a file that tracks the status at https://github.com/apache/camel/blob/master/components/components-init-work-in-progress.md Hide Permalink Omar Al-Safi added a comment - 06/Nov/20 13:57 Hey Claus Ibsen， I have a question in regards to this， as far as I understood any client creation operations should be moved to doInit instead of doStart only for static stuff as long that it does not create threads， runtime depending operating ... etc， isn't? What if for example the client would create its own threads to interact with the service， for example EventHub client， I'd assume in this case we just leave it under doStart? Or at least create the client in the doInit and start it under doStart ? Show Omar Al-Safi added a comment - 06/Nov/20 13:57 Hey Claus Ibsen ， I have a question in regards to this， as far as I understood any client creation operations should be moved to doInit instead of doStart only for static stuff as long that it does not create threads， runtime depending operating ... etc， isn't? What if for example the client would create its own threads to interact with the service， for example EventHub client ， I'd assume in this case we just leave it under doStart ? Or at least create the client in the doInit and start it under doStart ? Hide Permalink Claus Ibsen added a comment - 06/Nov/20 15:11 Yes exactly. init is most useable for dependecy injection， loading resources from classpath， creating basic objects etc. And yes if a client as you talk about have a start method that creates threads， then that should be in doStart. But creating the client via new XXX may sometimes be possible in init， unless it starts threads etc in its constrcutor. So a good thing is to look inside the source of the client what it does to be sure. Show Claus Ibsen added a comment - 06/Nov/20 15:11 Yes exactly. init is most useable for dependecy injection， loading resources from classpath， creating basic objects etc. And yes if a client as you talk about have a start method that creates threads， then that should be in doStart. But creating the client via new XXX may sometimes be possible in init， unless it starts threads etc in its constrcutor. So a good thing is to look inside the source of the client what it does to be sure. Hide Permalink Omar Al-Safi added a comment - 06/Nov/20 15:25 Thanks for the tip， will keep it in mind Show Omar Al-Safi added a comment - 06/Nov/20 15:25 Thanks for the tip， will keep it in mind
CAMEL-15175,Unassigned,2020-06-10T16:13:43+0000,1591791223， where 1591791223 is the epoch,It would be great to support larger camel version numbers.,Hide Permalink Andrea Cosentino added a comment - 10/Jun/20 16:13 Can you explain a bit more about this? Show Andrea Cosentino added a comment - 10/Jun/20 16:13 Can you explain a bit more about this? Hide Permalink Thomas Cunningham added a comment - 15/Jun/20 16:18 I was running into an issue building camel locally with specialized version numbers with the handling of the third version part in CamelVersionHelper.java. The int handling wasn't large enough to handle the versions I was trying to use. Submitted #3905 to change the int handling to long. https://github.com/apache/camel/pull/3905 I think this can be closed out. Show Thomas Cunningham added a comment - 15/Jun/20 16:18 I was running into an issue building camel locally with specialized version numbers with the handling of the third version part in CamelVersionHelper.java. The int handling wasn't large enough to handle the versions I was trying to use. Submitted #3905 to change the int handling to long. https://github.com/apache/camel/pull/3905 I think this can be closed out.
CAMEL-15174,Freeman Yue Fang,2020-06-10T14:48:18.608Z,1591786098.608， where 1591786098.608 is the epoch,so configuration in spring file could be picked up by camel-cxfrs endpoint,There are no comments yet on this issue.
CAMEL-15173,Unassigned,2020-06-10T08:29:06.416Z,1591763346.416， where 1591763346.416 is the epoch,Example where the example code section is missingSpring-Security Correct text can be seen on Talend websiteI have stumbled upon other examples where I resorted to the Talend site， but I can't find them just now. They are not easy to spot.,Hide Permalink Claus Ibsen added a comment - 10/Jun/20 08:48 Thanks for spotting those. You are welcome to provide a PR with the example， eg just find the example code in the source where it was and copy it in the adoc file Show Claus Ibsen added a comment - 10/Jun/20 08:48 Thanks for spotting those. You are welcome to provide a PR with the example， eg just find the example code in the source where it was and copy it in the adoc file Hide Permalink Zoran Regvart added a comment - 10/Jun/20 19:31 We have a warning printed at the build of the website for one of the missing examples: asciidoctor: WARNING: content-enricher.adoc: line 48: tag 'example' not found in include file: modules/eips/examples/core/camel-core/src/test/java/org/apache/camel/processor/TransformViaDSLTest.java asciidoctor: WARNING: content-enricher.adoc: line 56: tag 'example' not found in include file: modules/eips/examples/core/camel-core/src/test/java/org/apache/camel/processor/TransformTest.java I would assume that other cases of this issue were caused by omiting the examples when we migrated the documentation to git from wiki， could be that the tooling we used did not successfuly detect the examples. For example in this case: https://github.com/apache/camel/blob/909f6c0bb52dcc2076c13b3741ecba9003493e38/components/camel-spring-security/src/main/docs/spring-security.adoc#L75-L81 Show Zoran Regvart added a comment - 10/Jun/20 19:31 We have a warning printed at the build of the website for one of the missing examples: asciidoctor: WARNING: content-enricher.adoc: line 48: tag 'example' not found in include file: modules/eips/examples/core/camel-core/src/test/java/org/apache/camel/processor/TransformViaDSLTest.java asciidoctor: WARNING: content-enricher.adoc: line 56: tag 'example' not found in include file: modules/eips/examples/core/camel-core/src/test/java/org/apache/camel/processor/TransformTest.java I would assume that other cases of this issue were caused by omiting the examples when we migrated the documentation to git from wiki， could be that the tooling we used did not successfuly detect the examples. For example in this case: https://github.com/apache/camel/blob/909f6c0bb52dcc2076c13b3741ecba9003493e38/components/camel-spring-security/src/main/docs/spring-security.adoc#L75-L81
CAMEL-15172,Claus Ibsen,2020-06-10T08:07:54+0000,1591762074， where 1591762074 is the epoch,We should make this possible for non JMX too (and as default).,There are no comments yet on this issue.
CAMEL-15171,Unassigned,2020-06-09T20:45:31+0000,1591721131， where 1591721131 is the epoch,While migrating an application from camel 2.24.3 to 3.3.0 it was noticed that fetching a web application was failing with:2020-06-09 19:13:21，142 DEBUG http-nio-127.0.0.1-9080-exec-4 [] [] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost] - Processing ErrorPage[errorCode=0， location=/error]2020-06-09 19:13:21，142 ERROR http-nio-127.0.0.1-9080-exec-4 [] [] org.apache.catalina.core.ContainerBase.[Tomcat].[localhost] - Exception Processing ErrorPage[errorCode=0， location=/error]java.lang.NoSuchMethodError: javax.servlet.http.HttpServletRequest.getHttpServletMapping()Ljavax/servlet/http/HttpServletMapping; With camel 2.24.3 the camel-http dependency tree in the application contains:[INFO] +- org.apache.camel:camel-http:jar:2.24.3:compile[INFO] | +- org.apache.camel:camel-http-common:jar:2.24.3:compile[INFO] | +- javax.servlet:javax.servlet-api:jar:4.0.1:compile[INFO] | \- commons-httpclient:commons-httpclient:jar:3.1:compileWith camel 3.3.0 the camel-http dependency tree in the application contains:[INFO] | +- org.apache.camel:camel-http:jar:3.3.0:compile[INFO] | | +- org.apache.camel:camel-cloud:jar:3.3.0:compile[INFO] | | +- org.apache.camel:camel-http-common:jar:3.3.0:compile[INFO] | | | +- org.apache.camel:camel-http-base:jar:3.3.0:compile[INFO] | | | \- org.apache.camel:camel-attachments:jar:3.3.0:compile[INFO] | | | \- com.sun.activation:javax.activation:jar:1.2.0:compile[INFO] | | \- javax.servlet:javax.servlet-api:jar:3.1.0:compileFor camel-http 3.3.0 it was noticed that in maven central the javax.servlet:javax.servlet-api dependency version is hard-coded to 3.1.0， see: https://repo1.maven.org/maven2/org/apache/camel/camel-http/3.3.0/camel-http-3.3.0.pom.For camel-http 2.24.3 the javax.servlet:javax.servlet-api dependency version is not hard-coded， and can be overriden by setting defining the javax.servlet-api-version property， see: https://repo1.maven.org/maven2/org/apache/camel/camel-http/2.24.3/camel-http-2.24.3.pomCan you please verify whether this is an issue with the Camel release 3.3.0 deployment?Thanks for your time!,Hide Permalink Andrea Cosentino added a comment - 09/Jun/20 20:45 You're able to override it anyway. You can exclude the 3.1.0 javax.servlet from camel-http dependency in your POM and then declare your own version Show Andrea Cosentino added a comment - 09/Jun/20 20:45 You're able to override it anyway. You can exclude the 3.1.0 javax.servlet from camel-http dependency in your POM and then declare your own version Hide Permalink Jh. To. added a comment - 09/Jun/20 20:52 Yes， the exclusion/override might work， however it would be good for the camel-http component to work without exclusions but by just overriding the javax.servlet-api-version when needed. Show Jh. To. added a comment - 09/Jun/20 20:52 Yes， the exclusion/override might work， however it would be good for the camel-http component to work without exclusions but by just overriding the javax.servlet-api-version when needed.
CAMEL-15170,Unassigned,2020-06-09T20:47:56+0000,1591721276， where 1591721276 is the epoch,It would be quite useful for the JT400 component to have support for message queues. For instance， I'd like to take some action when a message shows up in the *SYSOPR message queue. Or， I'd like to send a message when something happens.,Hide Permalink Andrea Cosentino added a comment - 09/Jun/20 20:47 You're welcome to work on this. Show Andrea Cosentino added a comment - 09/Jun/20 20:47 You're welcome to work on this. Hide Permalink Jesse Gorzinski added a comment - 15/Jun/20 22:19 This issue may be assigned to me Show Jesse Gorzinski added a comment - 15/Jun/20 22:19 This issue may be assigned to me Hide Permalink Jesse Gorzinski added a comment - 15/Jun/20 23:14 Draft PR started https://github.com/apache/camel/pull/3917 Show Jesse Gorzinski added a comment - 15/Jun/20 23:14 Draft PR started https://github.com/apache/camel/pull/3917 Hide Permalink Claus Ibsen added a comment - 19/Jun/20 07:48 Thanks for the work Show Claus Ibsen added a comment - 19/Jun/20 07:48 Thanks for the work
CAMEL-15169,Andrea Cosentino,2020-06-11T12:58:21+0000,1591865901， where 1591865901 is the epoch,This is a problem that was originally referenced on the Camel Kafka Connector issue #263 on Github and describes a problem trying to load the HDFS connector on the Kafka Connect runtime. ---It seems that the HDFS Connector cannot be loaded due to conflicts between the dependencies used by the component and the ones available on the connect runtime.Without manipulating the classpath， loading the dependencies fail because a dependency carried by either one of them does not seem to contain the getProperties on the Application class (which comes from javax.ws.rs:javax.ws.rs-api). Manipulating the classpath to include this library and/or exclude specific dependencies cause the connector to fail to load due to other classpath related issues (ie.: ClassNotFoundException).—According to the discussion on the ticket， it may be more suitable to perform the fix on the Camel HDFS component. Therefore， raising this issue.,Hide Permalink Andrea Cosentino added a comment - 11/Jun/20 12:58 Updated to 3.2.1 Show Andrea Cosentino added a comment - 11/Jun/20 12:58 Updated to 3.2.1
CAMEL-15168,Unassigned,2020-06-09T12:45:44+0000,1591692344， where 1591692344 is the epoch,A route like this <!-- consumer route (providing the actual web service) --> <route> <from uri="spring-ws:soapaction:http://www.stockquotes.edu/GetQuote?endpointMapping=#endpointMapping"/> <to uri="responseProcessor"/> </route>fails to start in camel-3.3.0 with ...Caused by: org.apache.camel.FailedToCreateRouteException: Failed to create route route8 at: >>> To[responseProcessor] <<< in route: Route(route8)[From[spring-ws:soapaction:http://www.stockquot... because of No endpoint could be found for: #responseProcessor， please check your classpath contains the needed Camel component jar. at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:393) at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:117) at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:374) at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:348) at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2617) at org.apache.camel.support.service.BaseService.init(BaseService.java:83) at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2450) at org.apache.camel.support.service.BaseService.start(BaseService.java:111) at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2467) at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:121) at org.wildfly.extension.camel.service.CamelContextActivationService$1.run(CamelContextActivationService.java:63) at org.wildfly.camel.proxy.ProxyUtils$1.invoke(ProxyUtils.java:51) at com.sun.proxy.$Proxy59.run(Unknown Source) at org.wildfly.camel.proxy.ProxyUtils.invokeProxied(ProxyUtils.java:55) at org.wildfly.extension.camel.service.CamelContextActivationService.start(CamelContextActivationService.java:60) ... 8 moreCaused by: org.apache.camel.NoSuchEndpointException: No endpoint could be found for: responseProcessor， please check your classpath contains the needed Camel component jar. at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:829) at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:766) at org.apache.camel.support.CamelContextHelper.resolveEndpoint(CamelContextHelper.java:122) at org.apache.camel.reifier.SendReifier.resolveEndpoint(SendReifier.java:43) at org.apache.camel.reifier.SendReifier.createProcessor(SendReifier.java:36) at org.apache.camel.reifier.ProcessorReifier.makeProcessor(ProcessorReifier.java:766) at org.apache.camel.reifier.ProcessorReifier.addRoutes(ProcessorReifier.java:511) at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:391) ... 22 moreThe migration guide doesn't mention required changes in this area AFAICS.,Hide Permalink Claus Ibsen added a comment - 09/Jun/20 12:45 Use ref:xxx in the uri if its an endpoint， or if its a processor， then use <process ref="xxx"> Show Claus Ibsen added a comment - 09/Jun/20 12:45 Use ref:xxx in the uri if its an endpoint， or if its a processor， then use <process ref="xxx"> Hide Permalink Claus Ibsen added a comment - 10/Jun/20 05:29 Or use bean， eg bean:xxx Show Claus Ibsen added a comment - 10/Jun/20 05:29 Or use bean， eg bean:xxx
CAMEL-15167,Unassigned,2020-06-09T12:06:19+0000,1591689979， where 1591689979 is the epoch,According to this commit it is necessary to set some system properties to get the HazelcastCachingProvider to work. <systemProperties> <property> <name>hazelcast.named.jcache.instance</name> <value>false</value> </property> <property> <name>hazelcast.jcache.provider.type</name> <value>server</value> </property> </systemProperties>Is this really the propper way to configure this cache provider (i.e. global sysprops instead of component/endpoint props)?A required migration is not documented hereA camel route like this does not start any more ... try (CamelContext camelctx = new DefaultCamelContext()) { camelctx.addRoutes(new RouteBuilder() { public void configure() { from("jcache://test-cacheA?cachingProvider=com.hazelcast.cache.HazelcastCachingProvider") .to("mock:resultA"); } }); // Just ensure we can start up without any class loading issues camelctx.start(); },Hide Permalink Thomas Diesler added a comment - 09/Jun/20 12:06 If additional hazelcast properties are needed， it would perhaps be sensible that the component provided the necessary defaults and a way to explicitly override those defaults. If additional steps need to be done by the user (i.e. spin up an hazelcast server) that would need to be documented. Show Thomas Diesler added a comment - 09/Jun/20 12:06 If additional hazelcast properties are needed， it would perhaps be sensible that the component provided the necessary defaults and a way to explicitly override those defaults. If additional steps need to be done by the user (i.e. spin up an hazelcast server) that would need to be documented. Hide Permalink Claus Ibsen added a comment - 10/Jun/20 05:36 You can configure the configurationUri option to point to a hazelcast.xml configuration file etc that it will use for its configuration. Show Claus Ibsen added a comment - 10/Jun/20 05:36 You can configure the configurationUri option to point to a hazelcast.xml configuration file etc that it will use for its configuration. Hide Permalink Claus Ibsen added a comment - 10/Jun/20 05:37 Hazelcast have some examples at https://github.com/hazelcast/hazelcast-code-samples/tree/master/hazelcast-integration Show Claus Ibsen added a comment - 10/Jun/20 05:37 Hazelcast have some examples at https://github.com/hazelcast/hazelcast-code-samples/tree/master/hazelcast-integration Hide Permalink Claus Ibsen added a comment - 10/Jun/20 06:09 You can configure the provider on the component like this JCacheComponent jcache = context.getComponent("jcache"， JCacheComponent.class); jcache.setCachingProvider("com.hazelcast.cache.impl.HazelcastServerCachingProvider"); Otherwise it uses service-loaded and then it may finder either a client or server provided on the classpath (depending on ordering) and chose the wrong one. And in hazelcast you can only control this using those JVM system properties. They dont have a hazelcast-server or hazelcast-client JAR anyone in 4.x where you can use to separate them Show Claus Ibsen added a comment - 10/Jun/20 06:09 You can configure the provider on the component like this JCacheComponent jcache = context.getComponent("jcache"， JCacheComponent.class); jcache.setCachingProvider("com.hazelcast.cache.impl.HazelcastServerCachingProvider"); Otherwise it uses service-loaded and then it may finder either a client or server provided on the classpath (depending on ordering) and chose the wrong one. And in hazelcast you can only control this using those JVM system properties. They dont have a hazelcast-server or hazelcast-client JAR anyone in 4.x where you can use to separate them
CAMEL-15166,Jean-Baptiste Onofré,2020-06-09T06:57:46+0000,1591671466， where 1591671466 is the epoch,Since the move to the camel-karaf repository， adding camel repository in a karaf distribution adds both 4.2.x and 4.3.x artifacts.It works fine with Camel 2.25.1 to it has been introduced in Camel 3.3.0.,Hide Permalink Andrea Cosentino added a comment - 09/Jun/20 06:57 Can you please explain a bit better what is happening? Show Andrea Cosentino added a comment - 09/Jun/20 06:57 Can you please explain a bit better what is happening?
CAMEL-15165,Unassigned,2020-06-10T07:48:20+0000,1591760900， where 1591760900 is the epoch,Code like this used to work with 3.1.0， but fails with 3.3.0 CamelContext camelctx = new DefaultCamelContext(false); camelctx.setLoadTypeConverters(true); camelctx.init(); camelctx.addRoutes(new RouteBuilder() { @Override public void configure() throws Exception { from("direct:start").convertBodyTo(Map.class); } }); camelctx.start(); try { ProducerTemplate producer = camelctx.createProducerTemplate(); Map<?， ?> result = producer.requestBody("direct:start"， new Customer("John"， "Doe")， Map.class); Assert.assertEquals("{firstName=John， lastName=Doe}"， result.toString()); } finally { camelctx.close(); }Caused by: org.apache.camel.component.direct.DirectConsumerNotAvailableException: No consumers available on endpoint: direct://start. Exchange[] at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:59) at org.apache.camel.processor.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:212) at org.apache.camel.processor.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:110) at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83) at org.apache.camel.processor.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:107) at org.apache.camel.impl.engine.DefaultProducerCache.send(DefaultProducerCache.java:185) at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176) at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172) at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:390) ... 150 moreit seems to have to do with the use of ... camelctx.setLoadTypeConverters(true); camelctx.init();Is this an intentional change that requires code migration?,Hide Permalink Claus Ibsen added a comment - 10/Jun/20 07:48 Okay you need to remove the context.init() so the routes are added before initialization Show Claus Ibsen added a comment - 10/Jun/20 07:48 Okay you need to remove the context.init() so the routes are added before initialization Hide Permalink Claus Ibsen added a comment - 10/Jun/20 07:51 See this test https://github.com/apache/camel/commit/cefb0bd9b7f081635ab971feb586e86d2bd733bf Show Claus Ibsen added a comment - 10/Jun/20 07:51 See this test https://github.com/apache/camel/commit/cefb0bd9b7f081635ab971feb586e86d2bd733bf
CAMEL-15164,Claus Ibsen,2020-06-09T14:09:01+0000,1591697341， where 1591697341 is the epoch,This issue came across https://github.com/apache/camel-k/issues/1097We expect the service to be recognized automatically. Also properties should be recognized by Camel main in order to be used in Camel K.,Hide Permalink Claus Ibsen added a comment - 09/Jun/20 14:09 The Camel K example is at https://github.com/apache/camel-k/tree/master/examples/saga Show Claus Ibsen added a comment - 09/Jun/20 14:09 The Camel K example is at https://github.com/apache/camel-k/tree/master/examples/saga Hide Permalink Claus Ibsen added a comment - 09/Jun/20 14:17 We can make camel-core discover the lra-service which we do in others with the jdk service stutf And then in camel-main we add support for camel.lra. properties so you can configure it ala what you can do in spring-boot Show Claus Ibsen added a comment - 09/Jun/20 14:17 We can make camel-core discover the lra-service which we do in others with the jdk service stutf And then in camel-main we add support for camel.lra. properties so you can configure it ala what you can do in spring-boot Hide Permalink Claus Ibsen added a comment - 11/Jun/20 10:06 You can now configure this via camel-main / camel-quarkus etc if you do camel.lra.enabled = true (default true if other properties are provided) camel.lra.coordinatorUrl=xxx camel.lra.localParticipantUrl=localhost:xxxx Show Claus Ibsen added a comment - 11/Jun/20 10:06 You can now configure this via camel-main / camel-quarkus etc if you do camel.lra.enabled = true (default true if other properties are provided) camel.lra.coordinatorUrl=xxx camel.lra.localParticipantUrl=localhost:xxxx Hide Permalink Claus Ibsen added a comment - 11/Jun/20 10:16 For Spring Boot users camel-lra-starter - Use same keys in auto configuration as camel-main: camel.service.lra -> camel.lra Show Claus Ibsen added a comment - 11/Jun/20 10:16 For Spring Boot users camel-lra-starter - Use same keys in auto configuration as camel-main: camel.service.lra -> camel.lra Hide Permalink Zheng Feng added a comment - 11/Jun/20 14:34 Thanks Claus Ibsen ! Show Zheng Feng added a comment - 11/Jun/20 14:34 Thanks Claus Ibsen !
CAMEL-15163,Unassigned,2020-06-08T20:01:34+0000,1591632094， where 1591632094 is the epoch,Within https://issues.apache.org/jira/browse/CAMEL-9312 support was added for defaulting query string values in the REST DSL. Other frameworks such as spring mvc also provide support for this in the request header fields:@RequestMapping(value = "/test") public String test(@RequestHeader(value="X-SOME-HEADER"， defaultValue="A VALUE") String someHeader) In camel this is possible however when the route is called the default value is not set from the rest definition..param() .name("X-SOME-HEADER") .type(RestParamType.header) .defaultValue("A VALUE").endParam(),There are no comments yet on this issue.
CAMEL-15162,Andrea Cosentino,2020-06-10T19:37:36+0000,1591803456， where 1591803456 is the epoch,Lets make the Quarkus description similiar to the others， as its really to run Camel on X.Apache Camel Quarkus is a set of extensions for Quarkus.-->Apache Camel Quarkus run Camel on Quarkus.,Hide Permalink Zoran Regvart added a comment - 10/Jun/20 19:37 The change is needed here: https://github.com/apache/camel-website/blob/b74f8f204951cb1a240cf88f6a48662392d21330/content/_index.md#L84 Show Zoran Regvart added a comment - 10/Jun/20 19:37 The change is needed here: https://github.com/apache/camel-website/blob/b74f8f204951cb1a240cf88f6a48662392d21330/content/_index.md#L84 Hide Permalink ASF GitHub Bot added a comment - 11/Jun/20 06:44 oscerd opened a new pull request #390: URL: https://github.com/apache/camel-website/pull/390 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 11/Jun/20 06:44 oscerd opened a new pull request #390: URL: https://github.com/apache/camel-website/pull/390 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 11/Jun/20 06:45 oscerd merged pull request #390: URL: https://github.com/apache/camel-website/pull/390 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 11/Jun/20 06:45 oscerd merged pull request #390: URL: https://github.com/apache/camel-website/pull/390 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org
CAMEL-15161,Unassigned,2020-06-13T14:46:10.864Z,1592045170.864， where 1592045170.864 is the epoch,On the front page then the 4 panels for: patterns， components， runtimes， data formats take up too much space.See the screenshot.Maybe we can rework this to make those panels smaller or something. It would be great so end users can see that 6 Camel projects that come if you scroll further down.,Hide Permalink Aemie added a comment - 13/Jun/20 14:47 - edited Claus Ibsen BELOW IS THE PREVIOUS DESIGN THAT COVERS A LOT OF SPACE I THINK AS THE SOLUTION WE COULD INTRODUCE THE SAME LAYOUT AS THE MANNER PROJECTS ARE PRESENTED AND IT COVERS LESSER SPACE COMPARATIVELY. Show Aemie added a comment - 13/Jun/20 14:47 - edited Claus Ibsen BELOW IS THE PREVIOUS DESIGN THAT COVERS A LOT OF SPACE I THINK AS THE SOLUTION WE COULD INTRODUCE THE SAME LAYOUT AS THE MANNER PROJECTS ARE PRESENTED AND IT COVERS LESSER SPACE COMPARATIVELY. Hide Permalink Claus Ibsen added a comment - 14/Jun/20 14:41 Yes this is much better IMHO Show Claus Ibsen added a comment - 14/Jun/20 14:41 Yes this is much better IMHO Hide Permalink ASF GitHub Bot added a comment - 16/Jun/20 12:26 AemieJ opened a new pull request #396: URL: https://github.com/apache/camel-website/pull/396 In JIRA Issue 15161， the issue mentioned was that on the front page then the 4 panels for patterns， components， runtimes， data formats take up too much space. Thus， I modified such that the design for the panel is similar to that of the project section on the frontpage， it gives a minimalist and consistent effect and takes less space also. BEFORE ![old-functionality](https://user-images.githubusercontent.com/44139348/84773009-684fd000-aff9-11ea-9c68-a94996c8ff1d.png) AFTER ![new-functionality](https://user-images.githubusercontent.com/44139348/84773048-77cf1900-aff9-11ea-9bf4-2f354d294286.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 16/Jun/20 12:26 AemieJ opened a new pull request #396: URL: https://github.com/apache/camel-website/pull/396 In JIRA Issue 15161， the issue mentioned was that on the front page then the 4 panels for patterns， components， runtimes， data formats take up too much space. Thus， I modified such that the design for the panel is similar to that of the project section on the frontpage， it gives a minimalist and consistent effect and takes less space also. BEFORE ! [old-functionality] ( https://user-images.githubusercontent.com/44139348/84773009-684fd000-aff9-11ea-9c68-a94996c8ff1d.png ) AFTER ! [new-functionality] ( https://user-images.githubusercontent.com/44139348/84773048-77cf1900-aff9-11ea-9bf4-2f354d294286.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 16/Jun/20 19:27 zregvart commented on a change in pull request #396: URL: https://github.com/apache/camel-website/pull/396#discussion_r441089100 ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -197，12 +197，14 @@ section.frontpage h2 { } .frontpage .box { flex: 50%; padding: 1.2rem 0; + flex: 33%; + flex-direction: column; + margin: 1rem; + padding: 1.2rem 0.75rem; + border: 1px solid #e1e1e1; Review comment: We need to use variables ```suggestion border: 1px solid var(--color-smoke-90); ``` ########## File path: antora-ui-camel/src/css/vars.css ########## @@ -117，7 +117，7 @@ /* static */ --static-margin: 0 auto; /* frontpage */ -frontpage-max-width: calc(1140 / var(-rem-base) * 1rem); + -frontpage-max-width: calc(1350 / var(-rem-base) * 1rem); Review comment: With the Antora rebase we have 1366px as width， would be good to be consistent here. ```suggestion -frontpage-max-width: calc(1366 / var(-rem-base) * 1rem); ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 16/Jun/20 19:27 zregvart commented on a change in pull request #396: URL: https://github.com/apache/camel-website/pull/396#discussion_r441089100 ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -197，12 +197，14 @@ section.frontpage h2 { } .frontpage .box { flex: 50%; padding: 1.2rem 0; + flex: 33%; + flex-direction: column; + margin: 1rem; + padding: 1.2rem 0.75rem; + border: 1px solid #e1e1e1; Review comment: We need to use variables ```suggestion border: 1px solid var(--color-smoke-90); ``` ########## File path: antora-ui-camel/src/css/vars.css ########## @@ -117，7 +117，7 @@ /* static */ --static-margin: 0 auto; /* frontpage */ - frontpage-max-width: calc(1140 / var( -rem-base) * 1rem); + - frontpage-max-width: calc(1350 / var( -rem-base) * 1rem); Review comment: With the Antora rebase we have 1366px as width， would be good to be consistent here. ```suggestion - frontpage-max-width: calc(1366 / var( -rem-base) * 1rem); ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 17/Jun/20 04:33 AemieJ commented on a change in pull request #396: URL: https://github.com/apache/camel-website/pull/396#discussion_r441274375 ########## File path: antora-ui-camel/src/css/vars.css ########## @@ -117，7 +117，7 @@ /* static */ --static-margin: 0 auto; /* frontpage */ -frontpage-max-width: calc(1140 / var(-rem-base) * 1rem); + -frontpage-max-width: calc(1350 / var(-rem-base) * 1rem); Review comment: Applied the changes as per suggestions. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 17/Jun/20 04:33 AemieJ commented on a change in pull request #396: URL: https://github.com/apache/camel-website/pull/396#discussion_r441274375 ########## File path: antora-ui-camel/src/css/vars.css ########## @@ -117，7 +117，7 @@ /* static */ --static-margin: 0 auto; /* frontpage */ - frontpage-max-width: calc(1140 / var( -rem-base) * 1rem); + - frontpage-max-width: calc(1350 / var( -rem-base) * 1rem); Review comment: Applied the changes as per suggestions. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 18/Jun/20 20:01 zregvart merged pull request #396: URL: https://github.com/apache/camel-website/pull/396 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 18/Jun/20 20:01 zregvart merged pull request #396: URL: https://github.com/apache/camel-website/pull/396 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Zoran Regvart added a comment - 18/Jun/20 20:02 We have changed the Packed with functionality section so it takes up less space. What I think the original intent of this issue was to design the frontpage so that the projects visible (perhaps partially?) above the fold as well. Show Zoran Regvart added a comment - 18/Jun/20 20:02 We have changed the Packed with functionality section so it takes up less space. What I think the original intent of this issue was to design the frontpage so that the projects visible (perhaps partially?) above the fold as well. Hide Permalink Aemie added a comment - 20/Jun/20 08:32 Zoran Regvart Claus Ibsen I am not exactly clear with what you mean but are you trying to infer that within the frontpage when the user scrolls down to the Packed With Functionality， the project blocks should be slightly visible? If that's the case， my opinion on it is that within the section， there is comparatively more information for each block in this section and that's why in spite of reducing the space， the projects section is not directly visible. If the concern is to reduce space as well as make the projects section visible， how about we make the use of collapsible sections for the blocks. To elaborate， originally we keep the section with the icon and the title name and when the user hovers over it， it expands smoothly. If the user wants to expand the whole section， we could keep and expand toggle along with heading. I am not much sure about this， but it is just a suggestion for improvement. Show Aemie added a comment - 20/Jun/20 08:32 Zoran Regvart Claus Ibsen I am not exactly clear with what you mean but are you trying to infer that within the frontpage when the user scrolls down to the Packed With Functionality， the project blocks should be slightly visible? If that's the case， my opinion on it is that within the section， there is comparatively more information for each block in this section and that's why in spite of reducing the space， the projects section is not directly visible. If the concern is to reduce space as well as make the projects section visible， how about we make the use of collapsible sections for the blocks. To elaborate， originally we keep the section with the icon and the title name and when the user hovers over it， it expands smoothly. If the user wants to expand the whole section， we could keep and expand toggle along with heading. I am not much sure about this， but it is just a suggestion for improvement. Hide Permalink Zoran Regvart added a comment - 20/Jun/20 20:32 Claus Ibsen are you okay with what's been done on this or did you want something else here? Show Zoran Regvart added a comment - 20/Jun/20 20:32 Claus Ibsen are you okay with what's been done on this or did you want something else here? Hide Permalink Claus Ibsen added a comment - 21/Jun/20 07:02 Yeah what we have now is great. We can mark this as resolved. Show Claus Ibsen added a comment - 21/Jun/20 07:02 Yeah what we have now is great. We can mark this as resolved.
CAMEL-15160,Claus Ibsen,2020-08-17T14:57:26+0000,1597661846， where 1597661846 is the epoch,It would be good if we can make configurer generate what type a Map/List contains， if they have a specialized type.We can use this to know if we configurer something via the configurer and need to insert new data into the map/list， then we can know the class type， and create a new instance (if none exists).For example when configuring health-checks in camel-main.,Hide Permalink Claus Ibsen added a comment - 17/Aug/20 14:57 We now has an method on the configurer to return this information for an option. For list，array its the type of the value elements. for a map， its also the type of the value elements， and NOT they key (which often is a string type). Show Claus Ibsen added a comment - 17/Aug/20 14:57 We now has an method on the configurer to return this information for an option. For list，array its the type of the value elements. for a map， its also the type of the value elements， and NOT they key (which often is a string type).
CAMEL-15159,Claus Ibsen,2020-06-08T08:54:31+0000,1591592071， where 1591592071 is the epoch,There is a few spots in PropertyBindingSupport we can use a configurer (if any) when doing some complex configurations.,There are no comments yet on this issue.
CAMEL-15158,Unassigned,2020-06-08T08:04:42+0000,1591589082， where 1591589082 is the epoch,Currently the OpenAPI generator does not produce descriptions of request or response bodies.Request to provide a mechanism to describe bodies based on reflection upon pojo types and/or examples provided by the developer. Possibly as schema references.,There are no comments yet on this issue.
CAMEL-15157,Unassigned,2020-06-08T05:00:34+0000,1591578034， where 1591578034 is the epoch,we use Persistent Custom MDC Logging in Apache Camel as mentioned in this link.https://developers.redhat.com/blog/2016/05/12/persistent-custom-mdc-logging-in-apache-camel/ After we upgrade Apache Camel version from 2.25.0 to 3.2.0 ， we started seeing issue of thread is being hold for 30-40 ms when calling CustomUnitOFWork which internally call MDCUnitOfWork. What we noticed is thread hold time is keep on increasing every hour and not able to understand this issue.,Hide Permalink Claus Ibsen added a comment - 08/Jun/20 05:00 Can you build a small sample project that reproduces this for others to look at and use to investigate. And you need to better explain and point out your problem. This JIRA is too vague. Show Claus Ibsen added a comment - 08/Jun/20 05:00 Can you build a small sample project that reproduces this for others to look at and use to investigate. And you need to better explain and point out your problem. This JIRA is too vague. Hide Permalink Minal added a comment - 08/Jun/20 05:08 in Camel 3 ，MDCUnitOFWork and DefaultUnitOfWork class are not camel-core package， it's in camel-base package. https://www.javadoc.io/doc/org.apache.camel/camel-base/3.2.0/org/apache/camel/impl/engine/MDCUnitOfWork.html https://www.javadoc.io/doc/org.apache.camel/camel-base/3.2.0/index.html Show Minal added a comment - 08/Jun/20 05:08 in Camel 3 ，MDCUnitOFWork and DefaultUnitOfWork class are not camel-core package， it's in camel-base package. https://www.javadoc.io/doc/org.apache.camel/camel-base/3.2.0/org/apache/camel/impl/engine/MDCUnitOfWork.html https://www.javadoc.io/doc/org.apache.camel/camel-base/3.2.0/index.html Hide Permalink Minal added a comment - 09/Jun/20 22:01 - edited Claus Ibsen This issue is extremely hard to re-produce， I read about known MDC issue in Camel 3 upgrade guide : https://camel.apache.org/manual/latest/camel-3-migration-guide.html I don't understand the details of this issue in MDC. How do I get more details around it? At the same time if you can guide me with all known issue with Camel 3 with that I might be able to co-relate this issue. Show Minal added a comment - 09/Jun/20 22:01 - edited Claus Ibsen This issue is extremely hard to re-produce， I read about known MDC issue in Camel 3 upgrade guide : https://camel.apache.org/manual/latest/camel-3-migration-guide.html I don't understand the details of this issue in MDC. How do I get more details around it? At the same time if you can guide me with all known issue with Camel 3 with that I might be able to co-relate this issue. Hide Permalink Minal added a comment - 11/Jun/20 00:49 Claus Ibsen we have identified the issue. it's not DefaultUnitOfWork. it's below code that we are using in our application : ProducerTemplate template = exchange.getContext().createProducerTemplate(); we are creating instance of ProducerTemplate for each request， that is not the right way and we are planning to update it. I see one difference is when we call createProducerTemplate method without any parameter， camel-3 sets maximumCacheSize to 0 and camel-2 to 1000. I want to understand intent behind this change. what ProducerCache does? How exactly maximumCacheSize is being used? Just let me know what is the right source to find these answers. Show Minal added a comment - 11/Jun/20 00:49 Claus Ibsen we have identified the issue. it's not DefaultUnitOfWork. it's below code that we are using in our application : ProducerTemplate template = exchange.getContext().createProducerTemplate(); we are creating instance of ProducerTemplate for each request， that is not the right way and we are planning to update it. I see one difference is when we call createProducerTemplate method without any parameter， camel-3 sets maximumCacheSize to 0 and camel-2 to 1000. I want to understand intent behind this change. what ProducerCache does? How exactly maximumCacheSize is being used? Just let me know what is the right source to find these answers. Hide Permalink Claus Ibsen added a comment - 11/Jun/20 07:30 Yeah see this FAQ https://camel.apache.org/manual/latest/faq/why-does-camel-use-too-many-threads-with-producertemplate.html Show Claus Ibsen added a comment - 11/Jun/20 07:30 Yeah see this FAQ https://camel.apache.org/manual/latest/faq/why-does-camel-use-too-many-threads-with-producertemplate.html
CAMEL-15156,Unassigned,2020-06-07T20:04:41.856Z,1591545881.856， where 1591545881.856 is the epoch,There is an issue with smtp endpoint， it fails with a null pointer exception when the project is run as a standalone jar file. NOTE: This is not an issue when I use the mvn compile exec:java. Steps to replicate: create a simple maven project with apache-camel arch (Here is bare bone code sample https://github.com/drkaleem/test_camel_mail) Use any fake smtp server running on port 25. Or run "sudo python -m smtpd -n -c DebuggingServer localhost:25" to fire up one on your local machine. THE GOOD - Run the code with "mvn compile exec:java". This runs successfully. Generate a standalone jar with the command "mvn clean package". This will generate required jar files in target folder. THE BAD - Run the java jar file with "java -jar .\target\TestCamelMail-1.0-SNAPSHOT-jar-with-dependencies.jar". It fails with "java.lang.NullPointerException"Stacktrace --------------------------------------------------------------------------------------------------------------------------------------- java.lang.NullPointerException: null at org.apache.camel.component.mail.MailBinding.populateMailMessage(MailBinding.java:133) ~[TestCamelMail-1.0-SNAPSHOT-jar-with-dependencies.jar: ?] at org.apache.camel.component.mail.MailProducer.process(MailProducer.java:66) ~[TestCamelMail-1.0-SNAPSHOT-jar-with-dependencies.jar:?] at org.apache.camel.processor.SendDynamicProcessor.lambda$process$0(SendDynamicProcessor.java:197) ~[TestCamelMail-1.0-SNAPSHOT-jar-with-depende ncies.jar:?] at org.apache.camel.impl.engine.DefaultProducerCache.doInAsyncProducer(DefaultProducerCache.java:309) ~[TestCamelMail-1.0-SNAPSHOT-jar-with-depe ndencies.jar:?] at org.apache.camel.processor.SendDynamicProcessor.process(SendDynamicProcessor.java:182) ~[TestCamelMail-1.0-SNAPSHOT-jar-with-dependencies.jar :?] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) [TestCamelMail-1.0-SNAPSHOT-ja r-with-dependencies.jar:?] at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) [TestCamelMail-1.0-SNAPSHOT-jar-with-d ependencies.jar:?] at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:60) [TestCamelMail-1.0-SNAPSHOT-jar-with-depen dencies.jar:?] at org.apache.camel.processor.Pipeline.process(Pipeline.java:147) [TestCamelMail-1.0-SNAPSHOT-jar-with-dependencies.jar:?] at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:286) [TestCamelMail-1.0-SNAPSHOT-jar-with-dependencies. jar:?] at org.apache.camel.component.timer.TimerConsumer.sendTimerExchange(TimerConsumer.java:198) [TestCamelMail-1.0-SNAPSHOT-jar-with-dependencies.ja r:?] at org.apache.camel.component.timer.TimerConsumer$1.run(TimerConsumer.java:78) [TestCamelMail-1.0-SNAPSHOT-jar-with-dependencies.jar:?] at java.util.TimerThread.mainLoop(Timer.java:555) [?:1.8.0_161] at java.util.TimerThread.run(Timer.java:505) [?:1.8.0_161] [1) thread #2 - timer://mytimer] TimerConsumer WARN Error processing exchange. Exchange[ID-DEMHAS-KA-1591558798961-0-1]. Caused by: [j ava.lang.NullPointerException - null] java.lang.NullPointerException: null at org.apache.camel.component.mail.MailBinding.populateMailMessage(MailBinding.java:133) ~[TestCamelMail-1.0-SNAPSHOT-jar-with-dependencies.jar: ?] at org.apache.camel.component.mail.MailProducer.process(MailProducer.java:66) ~[TestCamelMail-1.0-SNAPSHOT-jar-with-dependencies.jar:?] at org.apache.camel.processor.SendDynamicProcessor.lambda$process$0(SendDynamicProcessor.java:197) ~[TestCamelMail-1.0-SNAPSHOT-jar-with-depende ncies.jar:?] at org.apache.camel.impl.engine.DefaultProducerCache.doInAsyncProducer(DefaultProducerCache.java:309) ~[TestCamelMail-1.0-SNAPSHOT-jar-with-depe ndencies.jar:?] at org.apache.camel.processor.SendDynamicProcessor.process(SendDynamicProcessor.java:182) ~[TestCamelMail-1.0-SNAPSHOT-jar-with-dependencies.jar :?] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[TestCamelMail-1.0-SNAPSHOT-j ar-with-dependencies.jar:?] at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) [TestCamelMail-1.0-SNAPSHOT-jar-with-d ependencies.jar:?] at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:60) [TestCamelMail-1.0-SNAPSHOT-jar-with-depen dencies.jar:?] at org.apache.camel.processor.Pipeline.process(Pipeline.java:147) [TestCamelMail-1.0-SNAPSHOT-jar-with-dependencies.jar:?] at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:286) [TestCamelMail-1.0-SNAPSHOT-jar-with-dependencies. jar:?] at org.apache.camel.component.timer.TimerConsumer.sendTimerExchange(TimerConsumer.java:198) [TestCamelMail-1.0-SNAPSHOT-jar-with-dependencies.ja r:?] at org.apache.camel.component.timer.TimerConsumer$1.run(TimerConsumer.java:78) [TestCamelMail-1.0-SNAPSHOT-jar-with-dependencies.jar:?] at java.util.TimerThread.mainLoop(Timer.java:555) [?:1.8.0_161] at java.util.TimerThread.run(Timer.java:505) [?:1.8.0_161],Hide Permalink Jan Bednar added a comment - 07/Jun/20 20:58 maven-assembly-plugin does not work well with Apache Camel because it overrides type converter manifests. Use maven-shade-plugin. https://camel.apache.org/manual/latest/faq/how-to-create-executable-jar-camel-main.html . Show Jan Bednar added a comment - 07/Jun/20 20:58 maven-assembly-plugin does not work well with Apache Camel because it overrides type converter manifests. Use maven-shade-plugin. https://camel.apache.org/manual/latest/faq/how-to-create-executable-jar-camel-main.html . Hide Permalink kaleem ahmed added a comment - 08/Jun/20 02:31 Thanks a lot Jan Bendnar. That helped resolve the issue Show kaleem ahmed added a comment - 08/Jun/20 02:31 Thanks a lot Jan Bendnar. That helped resolve the issue
CAMEL-15155,Claus Ibsen,2020-06-07T11:23:08+0000,1591514588， where 1591514588 is the epoch,So you can say password=#property:fooTo refer to a property placeholder with id foo. Then this is not replaced during uri generation and the uri stays as-is. Seehttps://camel.465427.n5.nabble.com/hash-pound-sign-notation-in-Camel-3-x-tp5869961.htmlhttps://camel.465427.n5.nabble.com/Passwords-in-Camel-endpoint-URIs-and-limitations-of-RAW-syntax-tp5869639.html,There are no comments yet on this issue.
CAMEL-15154,Zoran Regvart,2020-06-07T13:24:50+0000,1591521890， where 1591521890 is the epoch,Hugo and Antora both create the sitemap.xml， since we run Hugo last the Hugo's version overwrites the combined Antora sitemap.xml. I think the solution would be to configure Hugo to generate the sitemap under a different file name and reference that file from the sitemap.xml built by Antora that already contains references to other sitemaps generated by Antora.,Hide Permalink ASF GitHub Bot added a comment - 07/Jun/20 13:24 zregvart opened a new pull request #384: URL: https://github.com/apache/camel-website/pull/384 This configures Hugo to output the sitemap in `sitemap-website.xml` and adds a build step to add it to the sitemap index in `sitemap.xml` already generated by Antora. With this the `sitemap.xml` should contain pointers to all relevant sitemap files. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 07/Jun/20 13:24 zregvart opened a new pull request #384: URL: https://github.com/apache/camel-website/pull/384 This configures Hugo to output the sitemap in `sitemap-website.xml` and adds a build step to add it to the sitemap index in `sitemap.xml` already generated by Antora. With this the `sitemap.xml` should contain pointers to all relevant sitemap files. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 07/Jun/20 13:52 zregvart merged pull request #384: URL: https://github.com/apache/camel-website/pull/384 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 07/Jun/20 13:52 zregvart merged pull request #384: URL: https://github.com/apache/camel-website/pull/384 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Zoran Regvart added a comment - 07/Jun/20 13:53 Should be fixed， I'll double check the Google search console that we point to the correct sitemap.xml file. Show Zoran Regvart added a comment - 07/Jun/20 13:53 Should be fixed， I'll double check the Google search console that we point to the correct sitemap.xml file.
CAMEL-15153,Unassigned,2020-06-11T07:52:43+0000,1591847563， where 1591847563 is the epoch,It looks like some tests for the new AWS2 components are inadvertently referencing the original `aws` (not `aws2`) components. Will submit a PR with the suspicious stuff.,Hide Permalink Claus Ibsen added a comment - 11/Jun/20 07:52 Thanks for the PRs Show Claus Ibsen added a comment - 11/Jun/20 07:52 Thanks for the PRs
CAMEL-15152,Unassigned,2020-06-06T11:20:42+0000,1591428042， where 1591428042 is the epoch,Follow on work to round out CAMEL-14992， namely the following comment from https://github.com/apache/camel/pull/3891 components/camel-aws2-athena/src/main/docs/aws2-athena-component.adoc// TODO where does this come from???include::camel-spring-boot::page$aws2-athena-starter.adoc[] jonchase 22 hours ago AuthorI couldn't figure out where this file lives. The other aws2 components all seem to have one. Not sure how the magic happens. ;) oscerd 22 hours ago ContributorAh yeah :-) This comes from https://github.com/apache/camel-spring-boot， but it could be something coming in a subsequent PR.,Hide Permalink Jon Chase added a comment - 06/Jun/20 11:20 I will try to get this in shortly - is it just a configuration class I need to write， and the rest is generated off of that? Show Jon Chase added a comment - 06/Jun/20 11:20 I will try to get this in shortly - is it just a configuration class I need to write， and the rest is generated off of that? Hide Permalink Jon Chase added a comment - 06/Jun/20 11:38 > I will try to get this in shortly - is it just a configuration class I need to write， and the rest is generated off of that? CC: Andrea Cosentino Show Jon Chase added a comment - 06/Jun/20 11:38 > I will try to get this in shortly - is it just a configuration class I need to write， and the rest is generated off of that? CC: Andrea Cosentino Hide Permalink Andrea Cosentino added a comment - 06/Jun/20 16:26 There is a starter-create script. You need to do starter-create aws2-athena， recompile everything and then add a test under tests/camel-itests-sprimg-boot. There already the other aws2 tests Show Andrea Cosentino added a comment - 06/Jun/20 16:26 There is a starter-create script. You need to do starter-create aws2-athena， recompile everything and then add a test under tests/camel-itests-sprimg-boot. There already the other aws2 tests Hide Permalink Jon Chase added a comment - 07/Jun/20 11:37 PR is up: https://github.com/apache/camel-spring-boot/pull/84 Show Jon Chase added a comment - 07/Jun/20 11:37 PR is up: https://github.com/apache/camel-spring-boot/pull/84
CAMEL-15151,Guillaume Nodet,2020-06-05T00:09:34+0000,1591301374， where 1591301374 is the epoch,<redeliveryPolicy retryAttemptedLogLevel="{{placeholder}}"/> does not work due to IllegalArgumentException: no enum constant org.apache.camel.LoggingLevel.{{placeholder}}.,Hide Permalink Brad Harvey added a comment - 05/Jun/20 00:09 Proposed Solution: Change ExceptionPolicy#createRedeliveryPolicy to use CamelContext#parseText prior to calling LoggingLevel.valueOf https://github.com/apache/camel/blob/master/core/camel-base/src/main/java/org/apache/camel/processor/errorhandler/ExceptionPolicy.java Show Brad Harvey added a comment - 05/Jun/20 00:09 Proposed Solution: Change ExceptionPolicy#createRedeliveryPolicy to use CamelContext#parseText prior to calling LoggingLevel.valueOf https://github.com/apache/camel/blob/master/core/camel-base/src/main/java/org/apache/camel/processor/errorhandler/ExceptionPolicy.java Hide Permalink Guillaume Nodet added a comment - 05/Jun/20 04:09 Created a PR at https://github.com/apache/camel/pull/3888 Show Guillaume Nodet added a comment - 05/Jun/20 04:09 Created a PR at https://github.com/apache/camel/pull/3888
CAMEL-15150,Claus Ibsen,2020-06-04T04:41:58+0000,1591231318， where 1591231318 is the epoch,Pass exchange to IdempotentRepository methods so it can be used if necessary.,Hide Permalink Claus Ibsen added a comment - 04/Jun/20 04:41 Thanks for the PR Show Claus Ibsen added a comment - 04/Jun/20 04:41 Thanks for the PR
CAMEL-15149,Claus Ibsen,2020-07-03T07:56:40+0000,1593748600， where 1593748600 is the epoch,[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.6.0:java (default) on project wildfly-camel-catalog: An exception occured while executing the Java class. Invalid UTF-8 middle byte 0x5c[ERROR] at [Source: (File); line: 6， column: 103][tdiesler@MacBook3 wildfly-camel]$ cat /Users/tdiesler/git/wildfly-camel/catalog/target/camel-catalog/org/apache/camel/catalog/components/iec60870-server.json{ "component": { "kind": "component"， "name": "iec60870-server"， "title": "IEC 60870 Server"， "description": "IEC 60870 supervisory control and data acquisition (SCADA) server using NeoSCADA?\u0084? implementation."， "deprecated": false， "firstVersion": "2.20.0"， "label": "iot"， "javaType": "org.apache.camel.component.iec60870.server.ServerComponent"，,Hide Permalink Thomas Diesler added a comment - 03/Jul/20 07:56 - edited This does not seem to be fixed in the camel-catalog binary [tdiesler@MacBook3 target]$ cp ~/.m2/repository/org/apache/camel/camel-catalog/3.4.0/camel-catalog-3.4.0.jar . [tdiesler@MacBook3 target]$ tar xzf camel-catalog-3.4.0.jar [tdiesler@MacBook3 target]$ cat org/apache/camel/catalog/components/iec60870-server.json | grep SCADA "description": "IEC 60870 supervisory control and data acquisition (SCADA) server using NeoSCADA?\u0084? implementation."， Show Thomas Diesler added a comment - 03/Jul/20 07:56 - edited This does not seem to be fixed in the camel-catalog binary [tdiesler@MacBook3 target]$ cp ~/.m2/repository/org/apache/camel/camel-catalog/3.4.0/camel-catalog-3.4.0.jar . [tdiesler@MacBook3 target]$ tar xzf camel-catalog-3.4.0.jar [tdiesler@MacBook3 target]$ cat org/apache/camel/catalog/components/iec60870-server.json | grep SCADA "description" : "IEC 60870 supervisory control and data acquisition (SCADA) server using NeoSCADA?\u0084? implementation." ， Hide Permalink Claus Ibsen added a comment - 03/Jul/20 13:45 Fixed already in 3.5， checking 3.4.x Show Claus Ibsen added a comment - 03/Jul/20 13:45 Fixed already in 3.5， checking 3.4.x
CAMEL-15148,Claus Ibsen,2020-06-03T11:24:28+0000,1591169068， where 1591169068 is the epoch,Looks like if you configure via java fluent builder alamain configure rest with XXX with YYYthen its not taken in use， according to looking at the source code.The same for some of the other for CBs,There are no comments yet on this issue.
CAMEL-15147,Unassigned,2020-06-09T06:48:10+0000,1591670890， where 1591670890 is the epoch,Start supervising route: netty with back-off: BackOff[delay=PT2S， maxDelay=PT2562047788015H12M55.807S， maxElapsedTime=PT2562047788015H12M55.807S， maxAttempts=10， multiplier=1.0]Lets avoid those ugly duration logs with something human understandable,Hide Permalink Chandrakant Hardahe added a comment - 09/Jun/20 06:48 Hi Claus Ibsen， can we show it in milliseconds? Show Chandrakant Hardahe added a comment - 09/Jun/20 06:48 Hi Claus Ibsen ， can we show it in milliseconds? Hide Permalink Claus Ibsen added a comment - 09/Jun/20 07:07 Yeah sure that would be better Show Claus Ibsen added a comment - 09/Jun/20 07:07 Yeah sure that would be better
CAMEL-15146,James Netherton,2020-06-02T07:57:44+0000,1591070264， where 1591070264 is the epoch,Seems there's the intention of being able to provide a custom ValidatorFactory to BeanValidatorComponent. But， there's no getter or setter method for the private validatorFactory field. Thus it can never be handled by BeanValidatorComponentConfigurer.,There are no comments yet on this issue.
CAMEL-15145,Unassigned,2020-06-01T16:03:49+0000,1591013029， where 1591013029 is the epoch,It'd be good for Quarkus integration if the the gRPC component could support vertx-grpc (for both producer & consumer).Not sure if it's feasible or correct to modify the existing camel-grpc component to support this. Hence I propose a new component.Dmitry Volodin what do you think?,Hide Permalink Dmitry Volodin added a comment - 01/Jun/20 16:03 James Netherton， yes， sounds good， but I would like to try investigate is it possible to migrate current implementation to the vertx-grpc I would be nice to have just one implementation for gRPC rather than more one. Otherwise， I think it possible to extend vertx-grpc for unsupported features if needed. Show Dmitry Volodin added a comment - 01/Jun/20 16:03 James Netherton ， yes， sounds good， but I would like to try investigate is it possible to migrate current implementation to the vertx-grpc I would be nice to have just one implementation for gRPC rather than more one. Otherwise， I think it possible to extend vertx-grpc for unsupported features if needed. Hide Permalink James Netherton added a comment - 02/Jun/20 06:22 Ok， that makes sense. Let me know if you find whether its possible to update the current component. Show James Netherton added a comment - 02/Jun/20 06:22 Ok， that makes sense. Let me know if you find whether its possible to update the current component.
CAMEL-15144,James Netherton,2020-06-01T13:39:55+0000,1591004395， where 1591004395 is the epoch,camel-grpc uses Javassist to extend and proxy gRPC BindableService abstract classes.This is problematic for Quarkus native support as the camel component dynamically creates and instantiates the class at runtime. It'd be nice if some abstraction existed to customize how this is done， as Quarkus has its own build time class generation tooling and therefore does not need Javassist.,There are no comments yet on this issue.
CAMEL-15143,Claus Ibsen,2020-06-10T08:37:06+0000,1591763826， where 1591763826 is the epoch,The camel-openapi-java and camel-swagger-java requires to dump rest definitions to xml and then re-parse the definition: https://github.com/apache/camel/blob/35eea9156d9828363825de3a12cc2ebd8dfeef27/components/camel-openapi-java/src/main/java/org/apache/camel/openapi/RestOpenApiSupport.java#L195-L237 https://github.com/apache/camel/blob/35eea9156d9828363825de3a12cc2ebd8dfeef27/components/camel-swagger-java/src/main/java/org/apache/camel/swagger/RestSwaggerSupport.java#L147-L189This seems to be overkilling and requires to bring jaxb to the game which has negative impact on camel-quarkus,Hide Permalink Claus Ibsen added a comment - 10/Jun/20 08:37 - edited So the problem is that we dont know if the rest model are using property placeholders foo which we dont want to output in the openapi doc， but instead replace those with their actual values. So instead of using JAXB and dump as XML (xml-io do not support model -> xml) we nee to walk the route graph (defs) and check the string options if they are {{ }} and replace them with their actual values. And to do a clone of the model to not changing the internal model. Show Claus Ibsen added a comment - 10/Jun/20 08:37 - edited So the problem is that we dont know if the rest model are using property placeholders foo which we dont want to output in the openapi doc， but instead replace those with their actual values. So instead of using JAXB and dump as XML (xml-io do not support model -> xml) we nee to walk the route graph (defs) and check the string options if they are {{ }} and replace them with their actual values. And to do a clone of the model to not changing the internal model. Hide Permalink Claus Ibsen added a comment - 10/Jun/20 08:46 Ah okay its actually just better to check for {{ }} in the openapi reader that walks the rest model， then we only do this for attributes that are actually in-use Show Claus Ibsen added a comment - 10/Jun/20 08:46 Ah okay its actually just better to check for {{ }} in the openapi reader that walks the rest model， then we only do this for attributes that are actually in-use
CAMEL-15142,Unassigned,2020-06-02T07:08:36+0000,1591067316， where 1591067316 is the epoch,I observed that for certain pages including https://camel.apache.org/camel-spring-boot/latest/spring-cloud-zookeeper.html & https://camel.apache.org/camel-spring-boot/latest/spring-cloud-consul.html， the documentation is yet not written however published on the website. So in such cases， I believe it is a good practice to include a construction page handlebar as a user would be informed about if documentation is yet to be made or not. What are your opinions on this， Zoran Regvart?,Hide Permalink Zoran Regvart added a comment - 02/Jun/20 07:08 How did you reach those pages? If we link to those pages either they’re no longer relevant and links need do be removed， and in that case the broken link checker should have failed to find them so we need to fix the link checker as well. Show Zoran Regvart added a comment - 02/Jun/20 07:08 How did you reach those pages? If we link to those pages either they’re no longer relevant and links need do be removed， and in that case the broken link checker should have failed to find them so we need to fix the link checker as well. Hide Permalink Aemie added a comment - 02/Jun/20 10:03 They are easy to navigate through the camel spring documentation and it was just completely empty. Yea， if those pages are not meant to be found， it must be fixed but if that's the case why are they existing within the nav.adoc file? Show Aemie added a comment - 02/Jun/20 10:03 They are easy to navigate through the camel spring documentation and it was just completely empty. Yea， if those pages are not meant to be found， it must be fixed but if that's the case why are they existing within the nav.adoc file? Hide Permalink Zoran Regvart added a comment - 05/Jun/20 20:20 Aemie I think we had those documents before， not sure if the code generation overwritten them or they should not be linked to. Perhaps Andrea Cosentino might know. In any case we're going to have work in progress documents， that might appear empty， not sure how to handle that other than to find all those documents and put a notice in them. It's a bit unclear to me what "construction page handlebar" would be and how would it be implemented. Show Zoran Regvart added a comment - 05/Jun/20 20:20 Aemie I think we had those documents before， not sure if the code generation overwritten them or they should not be linked to. Perhaps Andrea Cosentino might know. In any case we're going to have work in progress documents， that might appear empty， not sure how to handle that other than to find all those documents and put a notice in them. It's a bit unclear to me what "construction page handlebar" would be and how would it be implemented.
CAMEL-15141,Unassigned,2020-06-04T13:09:31.530Z,1591261771.53， where 1591261771.53 is the epoch,See this pagehttps://camel.apache.org/manual/latest/faq/using-getin-or-getout-methods-on-exchange.htmlThere is an image that is not displayed,Hide Permalink Aemie added a comment - 04/Jun/20 11:36 I find it a weird flaw， the file I changed includes the image in it. Is the website yet to be built with the changes? Show Aemie added a comment - 04/Jun/20 11:36 I find it a weird flaw， the file I changed includes the image in it. Is the website yet to be built with the changes? Hide Permalink Mauro Filanti added a comment - 04/Jun/20 13:21 - edited Hi Aemie， This path inside the html page is src="_images/images/using-getin-or-getout-methods-on-exchange/message-flow-in-route.png" where there is _images/images/ and this doesn't work. I think the problem could be that you include images/ in the png's path. From your commit but those two images are in the same directory， so maybe you don't need to include that directory inside the path. Show Mauro Filanti added a comment - 04/Jun/20 13:21 - edited Hi Aemie， This path inside the html page is src= "_images/images/using-getin-or-getout-methods-on-exchange/message-flow-in-route.png" where there is _ images/images/ and this doesn't work. I think the problem could be that you include images/ in the png's path. From your commit but those two images are in the same directory， so maybe you don't need to include that directory inside the path. Hide Permalink Aemie added a comment - 05/Jun/20 05:37 - edited Mauro Filanti I changed the format to include assets/images within the faq folder to maintain the antora structure and used the following method to insert the block image: images::using-getin-or-getout-methods-on-exchange/message-flow-in-route.png[image] Show Aemie added a comment - 05/Jun/20 05:37 - edited Mauro Filanti I changed the format to include assets/images within the faq folder to maintain the antora structure and used the following method to insert the block image: images::using-getin-or-getout-methods-on-exchange/message-flow-in-route.png [image] Hide Permalink Mauro Filanti added a comment - 05/Jun/20 10:20 - edited Nice! When the site will go live with this new commits? Show Mauro Filanti added a comment - 05/Jun/20 10:20 - edited Nice! When the site will go live with this new commits? Hide Permalink Zoran Regvart added a comment - 07/Jun/20 13:20 Thanks Aemie for fixing this! Show Zoran Regvart added a comment - 07/Jun/20 13:20 Thanks Aemie for fixing this!
CAMEL-15140,Unassigned,2020-07-22T06:51:00.640Z,1595386260.64， where 1595386260.64 is the epoch,Our current menu for mobile screens is a list of text items with a small drop-down arrow， which don't really make for a good touch target. I like how the facebook app displays menu items - they take up the full screen and each menu item has an icon and text enclosed in a box-like structure. I also like Amazon app's menu， where sub-menus replace the menu space instead of opening up as drop-downs. I can post some mock-ups if we are open to changing the design of the menu on mobile screens,Hide Permalink Zoran Regvart added a comment - 30/May/20 11:31 Sounds like a good thing to improve， please do post some mockups. Show Zoran Regvart added a comment - 30/May/20 11:31 Sounds like a good thing to improve， please do post some mockups. Hide Permalink Aashna Jena added a comment - 30/May/20 16:06 - edited This is what I have in mind， something very similar to this. We've got six items to show， so we can have some space left at the top which we can utilize for a search bar/social media icons Show Aashna Jena added a comment - 30/May/20 16:06 - edited This is what I have in mind， something very similar to this. We've got six items to show， so we can have some space left at the top which we can utilize for a search bar/social media icons Hide Permalink Aashna Jena added a comment - 30/May/20 17:21 Or we could have a single-column menu， making sure we don't hide too much of the screen (left example). If we want our menu to have more text than icons， we can take the right side approach - have icons， text， and perhaps differentiate two items by difference in color/some boundary. Show Aashna Jena added a comment - 30/May/20 17:21 Or we could have a single-column menu， making sure we don't hide too much of the screen (left example). If we want our menu to have more text than icons， we can take the right side approach - have icons， text， and perhaps differentiate two items by difference in color/some boundary. Hide Permalink Aemie added a comment - 01/Jun/20 07:23 I prefer the second inline one， it will be good to put incline icons for the main menu items. Zoran Regvart I also wanted to ask when the user clicks the menu panel for smaller screen within the component sections and click on the navbar at the same time， both cover up the screen， looks clustered. So won't it be better to keep track of when nav-burger is active and nav-menu is active using *Mutation Observer* so whichever is selected at the latest is observed on-screen? If you think it's not the expected behavior， I Could create a separate issue 'cause personally I think this is a problem. Show Aemie added a comment - 01/Jun/20 07:23 I prefer the second inline one， it will be good to put incline icons for the main menu items. Zoran Regvart I also wanted to ask when the user clicks the menu panel for smaller screen within the component sections and click on the navbar at the same time， both cover up the screen， looks clustered. So won't it be better to keep track of when nav-burger is active and nav-menu is active using * Mutation Observer * so whichever is selected at the latest is observed on-screen? If you think it's not the expected behavior， I Could create a separate issue 'cause personally I think this is a problem. Hide Permalink Zoran Regvart added a comment - 01/Jun/20 07:43 I think adding icons and text to provide larger touch targets makes sense， any thoughts on how the sub menus would be done? On the second issue Aemie raised， I think both menus should take up the full width， like the default Antora UI does. Show Zoran Regvart added a comment - 01/Jun/20 07:43 I think adding icons and text to provide larger touch targets makes sense， any thoughts on how the sub menus would be done? On the second issue Aemie raised， I think both menus should take up the full width， like the default Antora UI does. Hide Permalink Aemie added a comment - 01/Jun/20 09:42 Zoran Regvart it's easy to do that through CSS， it seems a much cleaner option too. Show Aemie added a comment - 01/Jun/20 09:42 Zoran Regvart it's easy to do that through CSS， it seems a much cleaner option too. Hide Permalink Aashna Jena added a comment - 04/Jun/20 09:45 I explored a lot of ways to make the menu better， I've attached 5 mockups of the menus I found decent-looking and with better touch targets than before. Design for sub-menus is not part of this iteration. Show Aashna Jena added a comment - 04/Jun/20 09:45 I explored a lot of ways to make the menu better， I've attached 5 mockups of the menus I found decent-looking and with better touch targets than before. Design for sub-menus is not part of this iteration. Hide Permalink Aemie added a comment - 04/Jun/20 11:02 First one design is my absolute favorite 👌👌 Show Aemie added a comment - 04/Jun/20 11:02 First one design is my absolute favorite 👌👌 Hide Permalink Claus Ibsen added a comment - 04/Jun/20 11:08 Yeah mockup-1 looks fantastic Show Claus Ibsen added a comment - 04/Jun/20 11:08 Yeah mockup-1 looks fantastic Hide Permalink Aemie added a comment - 04/Jun/20 11:21 Aashna Jena how are we looking for the sub-menus for the about and community nav-items. Is it that when we click let's say community nav-item， it opens up to a new range of items where we could make use of either mockup-5. Show Aemie added a comment - 04/Jun/20 11:21 Aashna Jena how are we looking for the sub-menus for the about and community nav-items. Is it that when we click let's say community nav-item， it opens up to a new range of items where we could make use of either mockup-5. Hide Permalink Aashna Jena added a comment - 04/Jun/20 14:22 Claus Ibsen and Aemie I agree， that one's my preference as well. However， that's a big change to make from the current menu， so I'd wait for Zoran Regvart's opinion as well. Some more opinions for menus : Since we are adding icons， should these icons be visible for big screens as well? They will take up more horizontal space if we place icons just before the text. My suggestion is to not have icons for big screens for now， maybe we can look at a different design for including icons in the header menu in a later iteration. For the sub-menus， it was Zoran Regvart's and my opinion that we should do away with them and rather start very simple landing pages for About and Community. We want feedback on this. I will start a new Jira issue for making these pages. The other option is to keep the sub-menus， for which we can use the mockup-4 or mockup-5 design. What are your opinions Claus Ibsen Maria Arias de Reyna Dominguez Aemie? Show Aashna Jena added a comment - 04/Jun/20 14:22 Claus Ibsen and Aemie I agree， that one's my preference as well. However， that's a big change to make from the current menu， so I'd wait for Zoran Regvart 's opinion as well. Some more opinions for menus : Since we are adding icons， should these icons be visible for big screens as well? They will take up more horizontal space if we place icons just before the text. My suggestion is to not have icons for big screens for now， maybe we can look at a different design for including icons in the header menu in a later iteration. For the sub-menus， it was Zoran Regvart 's and my opinion that we should do away with them and rather start very simple landing pages for About and Community. We want feedback on this. I will start a new Jira issue for making these pages. The other option is to keep the sub-menus， for which we can use the mockup-4 or mockup-5 design. What are your opinions Claus Ibsen Maria Arias de Reyna Dominguez Aemie ? Hide Permalink Aemie added a comment - 04/Jun/20 17:51 For the first one， I don't think the mockup-design 1 would be good for the larger screen width i.e 675px - 1024px where the navbar burger appears. The current one looks pretty neat as the navbar covers full width for it but we can think of other alternatives as well. With <= 675px， your design would look amazing. Personally， I don't know if it is a good idea to include separate pages for simple navigation pages. What I mean is Community and About dropdowns are the basic one， you wouldn't want the user to navigate to a separate page just for those 2 sections. It's easier for me for as simple segregation of a community to access it directly from the dropdown then be directed to another page for it. For the documentation page， it is alright for the user to be navigated to another page which lists all the summarized info 'cause it is complex already. I would prefer the latter option for this. Show Aemie added a comment - 04/Jun/20 17:51 For the first one， I don't think the mockup-design 1 would be good for the larger screen width i.e 675px - 1024px where the navbar burger appears. The current one looks pretty neat as the navbar covers full width for it but we can think of other alternatives as well. With <= 675px， your design would look amazing. Personally， I don't know if it is a good idea to include separate pages for simple navigation pages. What I mean is Community and About dropdowns are the basic one， you wouldn't want the user to navigate to a separate page just for those 2 sections. It's easier for me for as simple segregation of a community to access it directly from the dropdown then be directed to another page for it. For the documentation page， it is alright for the user to be navigated to another page which lists all the summarized info 'cause it is complex already. I would prefer the latter option for this. Hide Permalink Maria Arias de Reyna Dominguez added a comment - 05/Jun/20 07:35 I agree that mockup-1 is the best. > Since we are adding icons， should these icons be visible for big screens as well? As a general rule I think it makes sense to be consistent on style. So if an icon is associated with an action or a section， that icon should be kept on all screen types. But， not as big， you know. If it is a touch screen I need space for my finger. If it is not， I prefer smaller links. > They will take up more horizontal space if we place icons just before the text. My suggestion is to not have icons for big screens for now， maybe we can look at a different design for including icons in the header menu in a later iteration. If the icon is small enough I don't think it will be a problem to eat a bit more horizontal space， right? I am not a good stylist so maybe I'm wrong On an ideal world， the change between mobile and desktop is "just" CSS resizing and reshaping stuff， not adding or removing. > The other option is to keep the sub-menus， for which we can use the mockup-4 or mockup-5 design. There should be some kind of breadcrumb to know where I am so I don't get lost on navigation. I should be able to easily jump a level up inside the hierarchy of menus. But it doesn't have to show all the possible top menu options. It may be just that， a button to jump one level higher. That could allow us to keep the design 1. Show Maria Arias de Reyna Dominguez added a comment - 05/Jun/20 07:35 I agree that mockup-1 is the best. > Since we are adding icons， should these icons be visible for big screens as well? As a general rule I think it makes sense to be consistent on style. So if an icon is associated with an action or a section， that icon should be kept on all screen types. But， not as big， you know. If it is a touch screen I need space for my finger. If it is not， I prefer smaller links. > They will take up more horizontal space if we place icons just before the text. My suggestion is to not have icons for big screens for now， maybe we can look at a different design for including icons in the header menu in a later iteration. If the icon is small enough I don't think it will be a problem to eat a bit more horizontal space， right? I am not a good stylist so maybe I'm wrong On an ideal world， the change between mobile and desktop is "just" CSS resizing and reshaping stuff， not adding or removing. > The other option is to keep the sub-menus， for which we can use the mockup-4 or mockup-5 design. There should be some kind of breadcrumb to know where I am so I don't get lost on navigation. I should be able to easily jump a level up inside the hierarchy of menus. But it doesn't have to show all the possible top menu options. It may be just that， a button to jump one level higher. That could allow us to keep the design 1. Hide Permalink Maria Arias de Reyna Dominguez added a comment - 05/Jun/20 07:39 > For the first one， I don't think the mockup-design 1 would be good for the larger screen width i.e 675px - 1024px I agree on that. I wouldn't like to have a third intermediate style， that's too much work. Do we have to redefine what is mobile and what is desktop? For tablets as a general rule， desktop version is usually enough. Unless we make links too small. I don't have a tablet with me to test the current desktop style， sorry. Show Maria Arias de Reyna Dominguez added a comment - 05/Jun/20 07:39 > For the first one， I don't think the mockup-design 1 would be good for the larger screen width i.e 675px - 1024px I agree on that. I wouldn't like to have a third intermediate style， that's too much work. Do we have to redefine what is mobile and what is desktop? For tablets as a general rule， desktop version is usually enough. Unless we make links too small. I don't have a tablet with me to test the current desktop style， sorry. Hide Permalink Zoran Regvart added a comment - 05/Jun/20 20:12 I think this is a good direction， I think the first option has the highest contrast so from accessibility it might be the best option. I like that the icons are large， we should consider increasing the sizes of other icons and the hamburger menu itself， perhaps by removing the "Apache Camel" text and having just the logo on smaller screens. I find the hamburger menu is pushed too much to the right side of the screen and all icons a bit too small at 375pt. I think we need to think about applying the same design choices to the front page and to the menu icons， right now on the front page we have icons with outline on white background， here we have filled icons on inverse background， I think we should choose one of those and apply it consistently (I would choose the latter for both). I think we should also take advantage of the vertical space to incorporate the menu (hamburger icon) on the second row along with the search similar to how it's done at https://getbootstrap.com/docs/， I left a comment about this on CAMEL-14958 as well. This could also allow the current icons we have (GitHub， Gitter， Twitter) to occupy more space and perhaps allow space for more icons (e.g. Stackoverflow). Show Zoran Regvart added a comment - 05/Jun/20 20:12 I think this is a good direction， I think the first option has the highest contrast so from accessibility it might be the best option. I like that the icons are large， we should consider increasing the sizes of other icons and the hamburger menu itself， perhaps by removing the "Apache Camel" text and having just the logo on smaller screens. I find the hamburger menu is pushed too much to the right side of the screen and all icons a bit too small at 375pt. I think we need to think about applying the same design choices to the front page and to the menu icons， right now on the front page we have icons with outline on white background， here we have filled icons on inverse background， I think we should choose one of those and apply it consistently (I would choose the latter for both). I think we should also take advantage of the vertical space to incorporate the menu (hamburger icon) on the second row along with the search similar to how it's done at https://getbootstrap.com/docs/ ， I left a comment about this on CAMEL-14958 as well. This could also allow the current icons we have (GitHub， Gitter， Twitter) to occupy more space and perhaps allow space for more icons (e.g. Stackoverflow). Hide Permalink Aashna Jena added a comment - 07/Jun/20 07:57 - edited Aemie Maria Arias de Reyna Dominguez I was thinking that for screens < 675px， we can find the width : height ratio and then have either a vertical menu with 2-2-2 menu items in a row or 3-3 menu items in a row (see mobile-menu-mockup-6). Is this what the concern is about? Horizontal vs vertical screens? The only change we will be making here is to change the width of each block from 50% to 33%. Show Aashna Jena added a comment - 07/Jun/20 07:57 - edited Aemie Maria Arias de Reyna Dominguez I was thinking that for screens < 675px， we can find the width : height ratio and then have either a vertical menu with 2-2-2 menu items in a row or 3-3 menu items in a row (see mobile-menu-mockup-6). Is this what the concern is about? Horizontal vs vertical screens? The only change we will be making here is to change the width of each block from 50% to 33%. Hide Permalink Aemie added a comment - 08/Jun/20 05:37 Aashna Jena Like the arrangement however compared to the icons in the navbar， they seem really large and I think provided a smaller width and height to each icon could look sophisticated relative to the navbar. Zoran Regvart I think the use of bootstrap design is quite neat. I implemented the design in design-navbar.png and increasing the size of the social tools increases its readability as well compared to prev design. Show Aemie added a comment - 08/Jun/20 05:37 Aashna Jena Like the arrangement however compared to the icons in the navbar， they seem really large and I think provided a smaller width and height to each icon could look sophisticated relative to the navbar. Zoran Regvart I think the use of bootstrap design is quite neat. I implemented the design in design-navbar.png and increasing the size of the social tools increases its readability as well compared to prev design. Hide Permalink Maria Arias de Reyna Dominguez added a comment - 08/Jun/20 06:40 - edited > Is this what the concern is about? Horizontal vs vertical screens? Well， that was not my concern， but that would be a great idea. And the css rules are there to help you decide: https://www.w3schools.com/cssref/css3_pr_mediaquery.asp My concern is more focused on what happens for example on a screen of a tablet (or a high resolution smartphone). It still has a touchable screen， you use your fingers， but the screen is bigger than 675px. Would it work? (And the answer may be yes) Some numbers on resolutions on touch screens: https://bobmckay.com/web/tablet-smartphone-resolutions-screen-sizes/ https://gs.statcounter.com/screen-resolution-stats/tablet/worldwide Maybe it would be good to play with some tools: https://developer.mozilla.org/en-US/docs/Tools/Responsive_Design_Mode https://chrome.google.com/webstore/detail/resolution-test/idhfcdbheobinplaamokffboaccidbal Show Maria Arias de Reyna Dominguez added a comment - 08/Jun/20 06:40 - edited > Is this what the concern is about? Horizontal vs vertical screens? Well， that was not my concern， but that would be a great idea. And the css rules are there to help you decide: https://www.w3schools.com/cssref/css3_pr_mediaquery.asp My concern is more focused on what happens for example on a screen of a tablet (or a high resolution smartphone). It still has a touchable screen， you use your fingers， but the screen is bigger than 675px. Would it work? (And the answer may be yes) Some numbers on resolutions on touch screens: https://bobmckay.com/web/tablet-smartphone-resolutions-screen-sizes/ https://gs.statcounter.com/screen-resolution-stats/tablet/worldwide Maybe it would be good to play with some tools: https://developer.mozilla.org/en-US/docs/Tools/Responsive_Design_Mode https://chrome.google.com/webstore/detail/resolution-test/idhfcdbheobinplaamokffboaccidbal Hide Permalink Aashna Jena added a comment - 09/Jul/20 16:13 Since the menu now has only 5 items， not 6， should we think about changing the mobile design? When we had six items， two in a row or 3 in a row made sense. Should we consider adding a "home" menu item to redirect to the home page? Show Aashna Jena added a comment - 09/Jul/20 16:13 Since the menu now has only 5 items， not 6， should we think about changing the mobile design? When we had six items， two in a row or 3 in a row made sense. Should we consider adding a "home" menu item to redirect to the home page? Hide Permalink Aemie added a comment - 10/Jul/20 04:37 I think it's a better option to include the home link as well 'cause not everyone would have the idea to click the logo for the home page. So I prefer the current design and idea to include home menu items. I just had one question， how are you dealing with the dropdown menu of community and about? Show Aemie added a comment - 10/Jul/20 04:37 I think it's a better option to include the home link as well 'cause not everyone would have the idea to click the logo for the home page. So I prefer the current design and idea to include home menu items. I just had one question， how are you dealing with the dropdown menu of community and about? Hide Permalink Aashna Jena added a comment - 11/Jul/20 15:54 - edited Zoran Regvart Maria Arias de Reyna Dominguez What's the final word on sub-menus? I was thinking we can design a Community landing page similar to the Documentation landing page， but this is just my opinion. Would you prefer to have drop-down sub-menus or landing pages? If we're going with sub-menus， I was thinking we can use something similar to mockup-5 to display the sub-menu items and have a back-arrow on top to go back to the main menu. Mockup-7 shows the main-menu with the new search bar and home icon Show Aashna Jena added a comment - 11/Jul/20 15:54 - edited Zoran Regvart Maria Arias de Reyna Dominguez What's the final word on sub-menus? I was thinking we can design a Community landing page similar to the Documentation landing page， but this is just my opinion. Would you prefer to have drop-down sub-menus or landing pages? If we're going with sub-menus， I was thinking we can use something similar to mockup-5 to display the sub-menu items and have a back-arrow on top to go back to the main menu. Mockup-7 shows the main-menu with the new search bar and home icon Hide Permalink Aemie added a comment - 11/Jul/20 17:09 Sorry to nitpick， but I am just talking in the perspective of why these dropdowns are a better option than the separate landing pages. Firstly， the documentation describes important links to projects and docs， and a separate page dedicated to them is a good idea as people will prefer navigating in that manner. However， under Community and About， they have menu items specifying books and teams and user stories and such. These are additional pages， describing ASF or the benefits or any additional resources to the user. As a user， I would prefer navigating directly through the dropdown for the Community & About dropdown items rather than landing on another page and then linking from there. It's just my perspective on this. Dropdown menu items are meant for easy navigation so for items where we want the user to easily navigate， it's good to keep the dropdown. Show Aemie added a comment - 11/Jul/20 17:09 Sorry to nitpick， but I am just talking in the perspective of why these dropdowns are a better option than the separate landing pages. Firstly， the documentation describes important links to projects and docs， and a separate page dedicated to them is a good idea as people will prefer navigating in that manner. However， under Community and About， they have menu items specifying books and teams and user stories and such. These are additional pages， describing ASF or the benefits or any additional resources to the user. As a user， I would prefer navigating directly through the dropdown for the Community & About dropdown items rather than landing on another page and then linking from there. It's just my perspective on this. Dropdown menu items are meant for easy navigation so for items where we want the user to easily navigate， it's good to keep the dropdown. Hide Permalink Aashna Jena added a comment - 11/Jul/20 23:10 Yes Aemie， I hear you! I just want to have some more opinions Apple's website has a nice clean header menu and a landing page for "Support"， maybe we can take some inspiration from here! Show Aashna Jena added a comment - 11/Jul/20 23:10 Yes Aemie ， I hear you! I just want to have some more opinions Apple's website has a nice clean header menu and a landing page for "Support"， maybe we can take some inspiration from here! Hide Permalink Aemie added a comment - 21/Jul/20 17:09 Zoran Regvart Maria Arias de Reyna Dominguez Aashna Jena I was giving a thought on drop-downs and I asked a couple of my colleagues about their views on the same. All of them were in favor of dropdown for the contents under community and about. Could we proceed with taking opinions of the ones on the mailing list so we could make a decision on whether we require dropdowns or not for the community and about nav items as we are unable to settle to a particular decision as of now? Show Aemie added a comment - 21/Jul/20 17:09 Zoran Regvart Maria Arias de Reyna Dominguez Aashna Jena I was giving a thought on drop-downs and I asked a couple of my colleagues about their views on the same. All of them were in favor of dropdown for the contents under community and about. Could we proceed with taking opinions of the ones on the mailing list so we could make a decision on whether we require dropdowns or not for the community and about nav items as we are unable to settle to a particular decision as of now? Hide Permalink Zoran Regvart added a comment - 21/Jul/20 19:07 I think a landing page for the now Community section could be an interesting option. There is a recommendation that for small number of items a landing page is not the best option. The About is also present in the footer， we are required to have those links on the website by ASF， I'm not sure if there is a recommendation to put them in the header or footer though. Team link from Community could belong to the About menu/section. Based on the recommendation above， I think we can leave the submenus， I'm not sure how the menu can be done with a grid of icons containing a submenus. I haven't seen this option used. Show Zoran Regvart added a comment - 21/Jul/20 19:07 I think a landing page for the now Community section could be an interesting option. There is a recommendation that for small number of items a landing page is not the best option. The About is also present in the footer， we are required to have those links on the website by ASF， I'm not sure if there is a recommendation to put them in the header or footer though. Team link from Community could belong to the About menu/section. Based on the recommendation above， I think we can leave the submenus， I'm not sure how the menu can be done with a grid of icons containing a submenus. I haven't seen this option used. Hide Permalink Aemie added a comment - 21/Jul/20 19:33 Zoran Regvart Alright so as we prefer the icons mockup for this let's create a community page similar to docs and shift the about to just the footer. This leaves us with 4 icons for the navbar item that can be achieved through the mockups presented. Other than that， just additional tip instead of the color change of items within navbar (desktop version) we can now easily present them with a minimal border-bottom after the first 2 changes related to community and about are done. What's your say in it? Show Aemie added a comment - 21/Jul/20 19:33 Zoran Regvart Alright so as we prefer the icons mockup for this let's create a community page similar to docs and shift the about to just the footer. This leaves us with 4 icons for the navbar item that can be achieved through the mockups presented. Other than that， just additional tip instead of the color change of items within navbar (desktop version) we can now easily present them with a minimal border-bottom after the first 2 changes related to community and about are done. What's your say in it? Hide Permalink Aemie added a comment - 22/Jul/20 07:28 Zoran Regvart if creating a new community page is the direction we want to take this into to avoid any dropdown or sub-menus in the navbar， I have added the design for the community-section(#1 #2 #3).png Show Aemie added a comment - 22/Jul/20 07:28 Zoran Regvart if creating a new community page is the direction we want to take this into to avoid any dropdown or sub-menus in the navbar， I have added the design for the community-section(#1 #2 #3).png Hide Permalink Zoran Regvart added a comment - 22/Jul/20 22:42 Aemie let's create a separate issue for the community landing page and keep this issue about the mobile menu. Show Zoran Regvart added a comment - 22/Jul/20 22:42 Aemie let's create a separate issue for the community landing page and keep this issue about the mobile menu. Hide Permalink ASF GitHub Bot added a comment - 06/Aug/20 18:47 aashnajena opened a new pull request #451: URL: https://github.com/apache/camel-website/pull/451 In this PR I have : Removed the "About" menu-item from the header， because it now present in the footer Changed header.hbs and header.html layout files to remove code for sub-menus Removed styling for submenus (.navbar-dropdown class is no longer required) Changed the design of the main menu on smaller screens as discussed on the JIRA issue. Here's how it looks for smaller screens in landscape and portrait mode respectively : ![image](https://user-images.githubusercontent.com/32356795/89569755-cdc67d00-d842-11ea-93de-6e66bbfc9c2a.png) ![image](https://user-images.githubusercontent.com/32356795/89569805-dfa82000-d842-11ea-8513-81c5a83f9ff3.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 06/Aug/20 18:47 aashnajena opened a new pull request #451: URL: https://github.com/apache/camel-website/pull/451 In this PR I have : Removed the "About" menu-item from the header， because it now present in the footer Changed header.hbs and header.html layout files to remove code for sub-menus Removed styling for submenus (.navbar-dropdown class is no longer required) Changed the design of the main menu on smaller screens as discussed on the JIRA issue. Here's how it looks for smaller screens in landscape and portrait mode respectively : ! [image] ( https://user-images.githubusercontent.com/32356795/89569755-cdc67d00-d842-11ea-93de-6e66bbfc9c2a.png ) ! [image] ( https://user-images.githubusercontent.com/32356795/89569805-dfa82000-d842-11ea-8513-81c5a83f9ff3.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 06/Aug/20 18:54 AemieJ commented on pull request #451: URL: https://github.com/apache/camel-website/pull/451#issuecomment-670133995 @aashnajena PR #448 deals with those changes along with the desktop version as well. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 06/Aug/20 18:54 AemieJ commented on pull request #451: URL: https://github.com/apache/camel-website/pull/451#issuecomment-670133995 @aashnajena PR #448 deals with those changes along with the desktop version as well. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 06/Aug/20 19:58 aashnajena commented on pull request #451: URL: https://github.com/apache/camel-website/pull/451#issuecomment-670162196 Thanks for pointing out， I didn't realise you're working on this issue. Please link it to the JIRA issue so that it's easier to track. Since I've already implemented it now， maybe we can take some implementation bits from here and use them eg. the images， the resizable menu (so that it doesn't go to scroll even if orientation is landscape)， the dynamic sizes of menu-items which change with height & width of screen， and having paths of logo-images as part of config.toml， so that they are easy to map， if we want to change the images. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 06/Aug/20 19:58 aashnajena commented on pull request #451: URL: https://github.com/apache/camel-website/pull/451#issuecomment-670162196 Thanks for pointing out， I didn't realise you're working on this issue. Please link it to the JIRA issue so that it's easier to track. Since I've already implemented it now， maybe we can take some implementation bits from here and use them eg. the images， the resizable menu (so that it doesn't go to scroll even if orientation is landscape)， the dynamic sizes of menu-items which change with height & width of screen， and having paths of logo-images as part of config.toml， so that they are easy to map， if we want to change the images. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 12/Aug/20 18:38 zregvart commented on pull request #451: URL: https://github.com/apache/camel-website/pull/451#issuecomment-673042866 @aashnajena having merged #448， is there something that we miss from this or can this PR be closed? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 12/Aug/20 18:38 zregvart commented on pull request #451: URL: https://github.com/apache/camel-website/pull/451#issuecomment-673042866 @aashnajena having merged #448， is there something that we miss from this or can this PR be closed? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 12/Aug/20 19:09 aashnajena commented on pull request #451: URL: https://github.com/apache/camel-website/pull/451#issuecomment-673057382 This can be closed now ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 12/Aug/20 19:09 aashnajena commented on pull request #451: URL: https://github.com/apache/camel-website/pull/451#issuecomment-673057382 This can be closed now ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 12/Aug/20 19:10 aashnajena closed pull request #451: URL: https://github.com/apache/camel-website/pull/451 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 12/Aug/20 19:10 aashnajena closed pull request #451: URL: https://github.com/apache/camel-website/pull/451 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org
CAMEL-15139,Claus Ibsen,2020-06-03T08:59:04+0000,1591160344， where 1591160344 is the epoch,It would be good if we can add some API to camel-health in camel-api that the health check is specialized for either readiness or liveness (default both).For example context and routes health check is for readiness.Then there can be component specific health check for liveness (database connection is valid， and so on).Then we can allow to perform checks based on filtering (all by default， but you can say only readiness， or only liveness etc.). There is some logic for that in the microprofile-health-check.,Hide Permalink Claus Ibsen added a comment - 03/Jun/20 08:59 The context and routes health check are now readiness only - as they are intended to mark whether Camel is ready for handling incoming traffic. The liveness checks are the custom health checks. Show Claus Ibsen added a comment - 03/Jun/20 08:59 The context and routes health check are now readiness only - as they are intended to mark whether Camel is ready for handling incoming traffic. The liveness checks are the custom health checks.
CAMEL-15138,Omar Al-Safi,2020-05-30T08:29:03+0000,1590812943， where 1590812943 is the epoch,Per the modification being added in CAMEL-15136. Currently the code generation will create a time based duration as fraction based which is not supported by Camel， e.g: 0.5s should be back to 500ms and so on. A detailed discussion about this is in CAMEL-15137,There are no comments yet on this issue.
CAMEL-15137,Unassigned,2020-05-29T16:04:34+0000,1590753874， where 1590753874 is the epoch,In the DurationConverter， there are some edge cases are not handled correctly when fractions being used， e.g: DurationConverter.toDuration("5s").toMillis() will give the correct value of 5000 meanwhile DurationConverter.toDuration("5.5s").toMillis() will give 5005 which is wrong. Here is list of some edge cases: DurationConverter.toDuration("5.5s").toMillis() -> 5001 DurationConverter.toDuration("0.01s").toMillis() -> 1 DurationConverter.toDuration("0.1").toMillis() -> 1 DurationConverter.toDuration("0.5s").toMillis() -> 5,Hide Permalink Omar Al-Safi added a comment - 29/May/20 16:04 Guillaume Nodet Claus Ibsen this is basically used for the extended string seconds introduced in CAMEL-14878， however wouldn't just make sense to parse the text directly in this format， e.g: Duration.parse("PT0.1s") under the DurationConverter instead of TimeUtils.toMilliSeconds()， I felt the logic there was pretty complex to comprehend. I wanted to change it but wasn't sure if it will break other stuff. Ideas? Show Omar Al-Safi added a comment - 29/May/20 16:04 Guillaume Nodet Claus Ibsen this is basically used for the extended string seconds introduced in CAMEL-14878 ， however wouldn't just make sense to parse the text directly in this format， e.g: Duration.parse("PT0.1s") under the DurationConverter instead of TimeUtils.toMilliSeconds() ， I felt the logic there was pretty complex to comprehend. I wanted to change it but wasn't sure if it will break other stuff. Ideas? Hide Permalink Claus Ibsen added a comment - 29/May/20 18:22 - edited This is not a bug， as Camels shorthand format is not fraction based. You use 5s for 5000 millis， But if you want 5500 millis， then you cannot do 5.5s. Instead you can do 5s500ms， or just numeric only with 5500. The shorthand is less ideal for small values， but great for even values 90s， or 5m30s etc. Show Claus Ibsen added a comment - 29/May/20 18:22 - edited This is not a bug， as Camels shorthand format is not fraction based. You use 5s for 5000 millis， But if you want 5500 millis， then you cannot do 5.5s. Instead you can do 5s500ms， or just numeric only with 5500. The shorthand is less ideal for small values， but great for even values 90s， or 5m30s etc. Hide Permalink Claus Ibsen added a comment - 29/May/20 18:22 And the converter has a combo of the Camel shorthand style and the java.util.Duration (starts with PT) Show Claus Ibsen added a comment - 29/May/20 18:22 And the converter has a combo of the Camel shorthand style and the java.util.Duration (starts with PT) Hide Permalink Omar Al-Safi added a comment - 29/May/20 22:42 - edited Thanks Claus Ibsen for the explanation as I wasn't aware that actually is not intended to handle time in fraction based. Hence I will need then to add some proper modifications in debezium code generation. However， as you mentioned， it could be less idea when it comes to small values， then wouldn't make sense to have it more forgiving to handle the fraction in small values， for example values less than 1m? However， If adding such enhancements may add more complexity to the converter， I would definitely keep it as it is. Show Omar Al-Safi added a comment - 29/May/20 22:42 - edited Thanks Claus Ibsen for the explanation as I wasn't aware that actually is not intended to handle time in fraction based. Hence I will need then to add some proper modifications in debezium code generation. However， as you mentioned， it could be less idea when it comes to small values， then wouldn't make sense to have it more forgiving to handle the fraction in small values， for example values less than 1m? However， If adding such enhancements may add more complexity to the converter， I would definitely keep it as it is. Hide Permalink Claus Ibsen added a comment - 30/May/20 05:58 So I think the current code is currently a bit wrong. The defaults such as 0，5s should be changed back to just 500， and so on. Also when you use fraction (which was not supported as explained above) but then it seems the source code generator may be locate dependent， and generate either with dot or comma. So when I build the current source I see alot of changed files. Show Claus Ibsen added a comment - 30/May/20 05:58 So I think the current code is currently a bit wrong. The defaults such as 0，5s should be changed back to just 500， and so on. Also when you use fraction (which was not supported as explained above) but then it seems the source code generator may be locate dependent， and generate either with dot or comma. So when I build the current source I see alot of changed files. Hide Permalink Omar Al-Safi added a comment - 30/May/20 08:00 Yes you are right， currently is not correct as you mentioned. I will fix these in the code generator Show Omar Al-Safi added a comment - 30/May/20 08:00 Yes you are right， currently is not correct as you mentioned. I will fix these in the code generator Hide Permalink Omar Al-Safi added a comment - 30/May/20 08:32 Closing this for now as is an intended by design and debezium code generation should respect this， added CAMEL-15138 to fix the issue in DBZ Show Omar Al-Safi added a comment - 30/May/20 08:32 Closing this for now as is an intended by design and debezium code generation should respect this， added CAMEL-15138 to fix the issue in DBZ
CAMEL-15136,Omar Al-Safi,2020-05-29T12:10:52+0000,1590739852， where 1590739852 is the epoch,Due to CAMEL-14878， DBZ source code generation still generate duration fields， eg. time based， as long. Hence， it will make sense to make the code generator aware of these fields and generate them as `duration` if possible or mark the type in the annotations.,There are no comments yet on this issue.
CAMEL-15135,Guillaume Nodet,2020-05-29T12:02:52+0000,1590739372， where 1590739372 is the epoch,If we have the following in the component configuration: @UriParam(javaType = "java.time.Duration"， defaultValue = "10s") private Long writeTimeoutMillis = 100L; Here the field is long， but the javaType being overiden to java.time.Duration with default value 10s. And then will be converted to Duration in the generated configurer.However in the spring boot maven plugin， when it generates the spring boot starter component configuration， the logic is not fully adopted， for example， it will take the default value of 10s and it will assign it to the long type field， e.g:private Long writeTimeoutMillis = 10sL;Which as result it will produce compilation errors.,Hide Permalink Omar Al-Safi added a comment - 29/May/20 12:02 https://github.com/apache/camel-spring-boot/commit/60b3958c65884de16d3a39a558ff4ca129192865 Show Omar Al-Safi added a comment - 29/May/20 12:02 https://github.com/apache/camel-spring-boot/commit/60b3958c65884de16d3a39a558ff4ca129192865
CAMEL-15134,Claus Ibsen,2020-05-29T09:57:39+0000,1590731859， where 1590731859 is the epoch,Lets simplify the health check api and the default implementations.The routes check is overlapping what monitoring systems can do by checking and reporting on metrics， such as if N errors within last Y minute then YELLOW etc.This job is better handled by those tools， than Camel.So the health checks become a basic API that are invoked on demand (ala spring boot acutators).And then we only need one kind of registry so removing the additional repository layer.,Hide Permalink Claus Ibsen added a comment - 29/May/20 09:57 Okay so the trick was that we needed a new HealthCheck per route to make it fine grained in the reporting， and not a single HealthCheck class for all the routes. The latter would be too coarse grained， as a check per routes allows to report builder with details per route in the same key - route.id = foo. But we can remove the JMX evaluators as its the job of the monitoring tools to setup rules. Show Claus Ibsen added a comment - 29/May/20 09:57 Okay so the trick was that we needed a new HealthCheck per route to make it fine grained in the reporting， and not a single HealthCheck class for all the routes. The latter would be too coarse grained， as a check per routes allows to report builder with details per route in the same key - route.id = foo. But we can remove the JMX evaluators as its the job of the monitoring tools to setup rules.
CAMEL-15133,Unassigned,2020-05-29T08:46:13+0000,1590727573， where 1590727573 is the epoch,We can look at making writing custom HealthCheck be discoverable from classpath， so they can be automatic installed.You can then build checks for Camel components (check ala spring boot actuators) that can be registered in health check registry.And then if you run on spring boot， they can become adapted to spring boot actuators.And for camel-main and camel-quarkus then we can look at using microprofile-health.This need some more thought at first. Also this should be configurable to turn on|off， and maybe a way to configure each health checks. And have some tool that can generate documentation about the checks and their options. And then we need reflection free configuration (via configurer classes) and so on.,There are no comments yet on this issue.
CAMEL-15132,Claus Ibsen,2020-05-29T08:19:42+0000,1590725982， where 1590725982 is the epoch,Lets look at enabling core threads to timeout in the default thread pool profile setting in Camel. As this allows idle threads to terminate.For example with EIPs in parallel like splitter then you have 10 threads by default. And if they become idle， then they stay around. We could allow those threads to terminate as well.This is a newer option in JDK but we are 8 as minimum so its safe to use now.,Hide Permalink Claus Ibsen added a comment - 29/May/20 08:19 See the default thread pool profile here https://camel.apache.org/manual/latest/threading-model.html#ThreadingModel-Threadpoolprofiles So its a matter of flipping the allowCore... option Show Claus Ibsen added a comment - 29/May/20 08:19 See the default thread pool profile here https://camel.apache.org/manual/latest/threading-model.html#ThreadingModel-Threadpoolprofiles So its a matter of flipping the allowCore... option Hide Permalink Claus Ibsen added a comment - 12/Jun/20 05:09 Working on this for 3.4 Show Claus Ibsen added a comment - 12/Jun/20 05:09 Working on this for 3.4
CAMEL-15131,Claus Ibsen,2020-05-29T07:25:13+0000,1590722713， where 1590722713 is the epoch,This was not really in use. Spring Boot had some special Camel health check service that was not using spring boot actuators.Lets make the health check simpler and have basic checks and then for main， microprofile and spring boot just use those， and let the checks be on-demand triggered， which is how for example they are done on containers with liveness/readiness probes.,There are no comments yet on this issue.
CAMEL-15130,Guillaume Nodet,2020-05-29T06:01:31+0000,1590717691， where 1590717691 is the epoch,/** Maximum number of milliseconds to wait for records to flush and partition offset data to be committed to offset storage before cancelling the process and restoring the offset data to be committed in a future attempt. The default is 5 seconds. */ private Long offsetCommitTimeoutMs = 5sL; /** Interval at which to try committing offsets. The default is 1 minute. */ private Long offsetFlushIntervalMs = 60sL;,Hide Permalink Claus Ibsen added a comment - 29/May/20 06:01 [INFO] ------------------------------------------------------------------------ [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project camel-debezium-mongodb-starter: Compilation failure: Compilation failure: [ERROR] /Users/davsclaus/workspace/camel-spring-boot/components-starter/camel-debezium-mongodb-starter/src/main/java/org/apache/camel/component/debezium/springboot/DebeziumMongodbComponentConfiguration.java:[87，43] ';' expected [ERROR] /Users/davsclaus/workspace/camel-spring-boot/components-starter/camel-debezium-mongodb-starter/src/main/java/org/apache/camel/component/debezium/springboot/DebeziumMongodbComponentConfiguration.java:[87，45] <identifier> expected [ERROR] /Users/davsclaus/workspace/camel-spring-boot/components-starter/camel-debezium-mongodb-starter/src/main/java/org/apache/camel/component/debezium/springboot/DebeziumMongodbComponentConfiguration.java:[91，44] ';' expected [ERROR] /Users/davsclaus/workspace/camel-spring-boot/components-starter/camel-debezium-mongodb-starter/src/main/java/org/apache/camel/component/debezium/springboot/DebeziumMongodbComponentConfiguration.java:[91，46] <identifier> expected [ERROR] -> [Help 1] Show Claus Ibsen added a comment - 29/May/20 06:01 [INFO] ------------------------------------------------------------------------ [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project camel-debezium-mongodb-starter: Compilation failure: Compilation failure: [ERROR] /Users/davsclaus/workspace/camel-spring-boot/components-starter/camel-debezium-mongodb-starter/src/main/java/org/apache/camel/component/debezium/springboot/DebeziumMongodbComponentConfiguration.java: [87，43] ';' expected [ERROR] /Users/davsclaus/workspace/camel-spring-boot/components-starter/camel-debezium-mongodb-starter/src/main/java/org/apache/camel/component/debezium/springboot/DebeziumMongodbComponentConfiguration.java: [87，45] <identifier> expected [ERROR] /Users/davsclaus/workspace/camel-spring-boot/components-starter/camel-debezium-mongodb-starter/src/main/java/org/apache/camel/component/debezium/springboot/DebeziumMongodbComponentConfiguration.java: [91，44] ';' expected [ERROR] /Users/davsclaus/workspace/camel-spring-boot/components-starter/camel-debezium-mongodb-starter/src/main/java/org/apache/camel/component/debezium/springboot/DebeziumMongodbComponentConfiguration.java: [91，46] <identifier> expected [ERROR] -> [Help 1] Hide Permalink Claus Ibsen added a comment - 29/May/20 06:02 So we need for the debezium tooling to detect its a "duration" type and then use String as the type Show Claus Ibsen added a comment - 29/May/20 06:02 So we need for the debezium tooling to detect its a "duration" type and then use String as the type Hide Permalink Omar Al-Safi added a comment - 29/May/20 10:05 Apparently is producible， I have created this bug report https://issues.apache.org/jira/browse/CAMEL-15135， when you have a default value e.g `10s` and we have the type of `long`， it will give this issues. Regarding Debezium， yeah the source code generator needs to adopt to the duration as not it will produce long fields. Show Omar Al-Safi added a comment - 29/May/20 10:05 Apparently is producible， I have created this bug report https://issues.apache.org/jira/browse/CAMEL-15135 ， when you have a default value e.g `10s` and we have the type of `long`， it will give this issues. Regarding Debezium， yeah the source code generator needs to adopt to the duration as not it will produce long fields. Hide Permalink Guillaume Nodet added a comment - 29/May/20 11:44 https://github.com/apache/camel-spring-boot/commit/60b3958c65884de16d3a39a558ff4ca129192865 Show Guillaume Nodet added a comment - 29/May/20 11:44 https://github.com/apache/camel-spring-boot/commit/60b3958c65884de16d3a39a558ff4ca129192865 Hide Permalink Omar Al-Safi added a comment - 29/May/20 11:57 Guillaume Nodet I think the fix would be for this bug https://issues.apache.org/jira/browse/CAMEL-15135 ， isn't? Actually on this ticket scope， there are still autogenerated properties from debezium that are long for durations which I am currently working on it Show Omar Al-Safi added a comment - 29/May/20 11:57 Guillaume Nodet I think the fix would be for this bug https://issues.apache.org/jira/browse/CAMEL-15135 ， isn't? Actually on this ticket scope， there are still autogenerated properties from debezium that are long for durations which I am currently working on it Hide Permalink Omar Al-Safi added a comment - 29/May/20 12:02 - edited Tested now， indeed it fixes CAMEL-15135， if you don't mind Guillaume Nodet， I will assign you on the other ticket and re-assign this to me since is I am working on it now Show Omar Al-Safi added a comment - 29/May/20 12:02 - edited Tested now， indeed it fixes CAMEL-15135 ， if you don't mind Guillaume Nodet ， I will assign you on the other ticket and re-assign this to me since is I am working on it now Hide Permalink Omar Al-Safi added a comment - 29/May/20 12:07 Nevermind， I will just create another Jira for the DBZ long -> duration fields， sorry for the noise Show Omar Al-Safi added a comment - 29/May/20 12:07 Nevermind， I will just create another Jira for the DBZ long -> duration fields， sorry for the noise Hide Permalink Guillaume Nodet added a comment - 29/May/20 12:19 Omar Al-Safi not sure what you have in mind， could you be more precise ? I think we have several possibilities regarding to those fields， but from a user POV， I think we want to support the extended syntax `5s`， so the only way to deal with those is to use a String field and let the converter do the work later. Show Guillaume Nodet added a comment - 29/May/20 12:19 Omar Al-Safi not sure what you have in mind， could you be more precise ? I think we have several possibilities regarding to those fields， but from a user POV， I think we want to support the extended syntax `5s`， so the only way to deal with those is to use a String field and let the converter do the work later. Hide Permalink Omar Al-Safi added a comment - 29/May/20 12:29 - edited Guillaume Nodet I mean the generated config for debezium connectors， for example in camel-debezium-mysql， are still generated like this: @UriParam(label = LABEL_NAME， defaultValue = "500") private long pollIntervalMs = 500; As result， isn't yet known for these fields you can use extended syntax， e.g `0.5s`. I am working on this now on CAMEL-15136， so the generated config something like this: @UriParam(label = LABEL_NAME， defaultValue = "0.5s"， javaType = "java.time.Duration") private long pollIntervalMs = 500; In order for the converter to pick these fields as well. I hope it makes sense now Show Omar Al-Safi added a comment - 29/May/20 12:29 - edited Guillaume Nodet I mean the generated config for debezium connectors， for example in camel-debezium-mysql， are still generated like this: @UriParam(label = LABEL_NAME， defaultValue = "500" ) private long pollIntervalMs = 500; As result， isn't yet known for these fields you can use extended syntax， e.g `0.5s`. I am working on this now on CAMEL-15136 ， so the generated config something like this: @UriParam(label = LABEL_NAME， defaultValue = "0.5s" ， javaType = "java.time.Duration" ) private long pollIntervalMs = 500; In order for the converter to pick these fields as well. I hope it makes sense now
CAMEL-15129,Andrea Cosentino,2020-05-29T18:43:46+0000,1590763426， where 1590763426 is the epoch,If option throwExceptionOnFailure=true then UndertowClientCallback suppresses all exceptions that are not even related to HttpStatusCode (failed responses from the remote server).,Hide Permalink Claus Ibsen added a comment - 29/May/20 18:43 Can you point out in the code where you think something is wrong Show Claus Ibsen added a comment - 29/May/20 18:43 Can you point out in the code where you think something is wrong Hide Permalink Yaroslav Chukhno added a comment - 04/Jun/20 07:38 I think the mistake in line 186 of [UndertowClientCallback|https://github.com/apache/camel/blob/master/components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowClientCallback.java] - the condition is redundant. Show Yaroslav Chukhno added a comment - 04/Jun/20 07:38 I think the mistake in line 186 of [UndertowClientCallback| https://github.com/apache/camel/blob/master/components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowClientCallback.java ] - the condition is redundant. Hide Permalink Chandrakant Hardahe added a comment - 05/Jun/20 06:05 Hi Yaroslav Chukhno， if throwExceptionOnFailure=true then it'll throw HttpOperationFailedException in case of failed responses from the remote server https://github.com/apache/camel/blob/master/components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowClientCallback.java#L235 ， can you please provide a test scenario for any other exception? Show Chandrakant Hardahe added a comment - 05/Jun/20 06:05 Hi Yaroslav Chukhno ， if throwExceptionOnFailure=true then it'll throw HttpOperationFailedException in case of failed responses from the remote server https://github.com/apache/camel/blob/master/components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowClientCallback.java#L235 ， can you please provide a test scenario for any other exception? Hide Permalink Yaroslav Chukhno added a comment - 05/Jun/20 07:03 Sorry guys， i made mistake in description. On throwExceptionOnFailure=false all exceptions in UndertowClientCallback will be suppressed. As example， if in https://github.com/apache/camel/blob/7df7778b1a2afe4a2da0730c11f6b1926f613943/components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowClientCallback.java#L279 will be thrown IOException， then it will be supressed in https://github.com/apache/camel/blob/7df7778b1a2afe4a2da0730c11f6b1926f613943/components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowClientCallback.java#L291 because the https://github.com/apache/camel/blob/7df7778b1a2afe4a2da0730c11f6b1926f613943/components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowClientCallback.java#L187 has not be executed Show Yaroslav Chukhno added a comment - 05/Jun/20 07:03 Sorry guys， i made mistake in description. On throwExceptionOnFailure=false all exceptions in UndertowClientCallback will be suppressed. As example， if in https://github.com/apache/camel/blob/7df7778b1a2afe4a2da0730c11f6b1926f613943/components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowClientCallback.java#L279 will be thrown IOException， then it will be supressed in https://github.com/apache/camel/blob/7df7778b1a2afe4a2da0730c11f6b1926f613943/components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowClientCallback.java#L291 because the https://github.com/apache/camel/blob/7df7778b1a2afe4a2da0730c11f6b1926f613943/components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowClientCallback.java#L187 has not be executed Hide Permalink Chandrakant Hardahe added a comment - 05/Jun/20 07:07 Thanks Yaroslav Chukhno， for the clarification，I'm looking into it Show Chandrakant Hardahe added a comment - 05/Jun/20 07:07 Thanks Yaroslav Chukhno ， for the clarification，I'm looking into it
CAMEL-15128,Claus Ibsen,2020-05-28T11:55:46+0000,1590652546， where 1590652546 is the epoch,If you run camel standalone and have camel-health on the classpath， we should include a basic camel context health check.,There are no comments yet on this issue.
CAMEL-15127,Claus Ibsen,2020-05-28T07:51:27+0000,1590637887， where 1590637887 is the epoch,We can potentially replace HealthCheckRegistry with Registry as we can bind to registry now. And we can use that to store HealthCheck and HealthCheckRepository in there instead of the HC registry.This is also how Spring Boot does it by registering HealthCheck in the registry,Hide Permalink Luca Burgazzoli added a comment - 28/May/20 07:51 +1 or maybe transform it into a BeansRepository Show Luca Burgazzoli added a comment - 28/May/20 07:51 +1 or maybe transform it into a BeansRepository Hide Permalink Claus Ibsen added a comment - 29/May/20 09:04 The BeanRepository tend to have too many APIs for find/lookup etc and for arbitrary types. Instead lets simplify the health api and make it a bit more basic. Show Claus Ibsen added a comment - 29/May/20 09:04 The BeanRepository tend to have too many APIs for find/lookup etc and for arbitrary types. Instead lets simplify the health api and make it a bit more basic.
CAMEL-15126,Claus Ibsen,2020-05-28T07:14:17+0000,1590635657， where 1590635657 is the epoch,It would be good to get this more aligned and similar across runtimes， and also to let Camel log on startup which health-check implementation is in use: main， spring boot， microprofile etc.spring boot is discovered and installed via spring boot auto-configurationmicroprofile health is not discoverd and registered by camel， but MP onlymain currently is manual and limited.,There are no comments yet on this issue.
CAMEL-15125,Unassigned,2020-05-27T21:15:34+0000,1590599734， where 1590599734 is the epoch,The setProperty DSL currently does not allow for the usage of a java.util.function.Supplier like the setHeader DSL already does.I went ahead and created a PR for this functionality.,There are no comments yet on this issue.
CAMEL-15124,Guillaume Nodet,2020-05-27T14:42:11+0000,1590576131， where 1590576131 is the epoch,DefaultErrorHandlerBuilder and the other ErrorHandlerBuilders have the following fields:public class DefaultErrorHandlerBuilder extends ErrorHandlerBuilderSupport { protected CamelLogger logger; protected RedeliveryPolicy redeliveryPolicy; protected Processor onRedelivery; protected Predicate retryWhile; protected String retryWhileRef; protected Processor failureProcessor; protected Endpoint deadLetter; protected String deadLetterUri; protected boolean deadLetterHandleNewException = true; protected boolean useOriginalMessage; protected boolean useOriginalBody; protected boolean asyncDelayedRedelivery; protected String executorServiceRef; protected ScheduledExecutorService executorService; protected Processor onPrepareFailure; protected Processor onExceptionOccurred; public DefaultErrorHandlerBuilder() { }so there's no xyxRef as example， there's no onExceptionOccurredRef however it looks like those refs are available with spring xml (and probably blueprint) so wonder if we can add the refs on the ErrorHandlerBuilder.,There are no comments yet on this issue.
CAMEL-15123,Unassigned,2020-05-27T14:21:21+0000,1590574881， where 1590574881 is the epoch,According to this question and answer on StackOverflow， camel-rabbitmq creates its own queue instead of using an existing one when the queue properties and the connection string properties do not match.This is especially confusing when the queue property is provided， but the consumer does not consume or produce to/from the predefined queue.And it can be tricky too: differences can be hidden in default values of the Camel consumer. In the mentioned SO answer， the property autoDelete was the difference (by default true in Camel， but false on the predefined queue).From a user perspective， camel-rabbitmq should always connect to the predefined queue if the queue name and the rabbitmq exchange match an existing exchange/queue. Even if some other properties do not match. It could perhaps warn in the logs about any differences in properties.,There are no comments yet on this issue.
CAMEL-15122,Unassigned,2020-05-27T12:54:56+0000,1590569696， where 1590569696 is the epoch,The jslt library offers the ability to customize the object filtering. By default， empty array， empty object and null values are filtered out. We can customize it with a custom JsonFilter.The attached PR implements a way to pass a custom object filter to the JsltComponent and provides unit tests,There are no comments yet on this issue.
CAMEL-15121,Andrea Cosentino,2020-05-27T12:52:20+0000,1590569540， where 1590569540 is the epoch,While trying to create a custom HeaderFilterStrategy for camel-kafka I noticed that the two methods of the strategy are used interchanged. The KafkaConsumer calls applyFilterToCamelHeaders The KafkaProducer calls applyFilterToExternalHeadersAccording to the HeaderFilterStrategy Interface， it should be the other way round.I guess this bug is there since the beginning of the component (therefore affects all released versions).I have submitted the pull request 3864 to fix this.As easy as the code is to fix， this is sort of a breaking change for all existing (intentionally wrong) custom HeaderFilterStrategies for camel-kafka.,There are no comments yet on this issue.
CAMEL-15120,Unassigned,2020-05-27T12:17:34+0000,1590567454， where 1590567454 is the epoch,The jslt library allows to pass external variables when applying a jslt to an input json. This issue is implemented by using the headers of the message as external variables. The header values are converted using the jackson library to a JsonNode. The attached PR provides the unit tests and the code that implements this new functionality. NB: the component camel-jslt does not exist yet,There are no comments yet on this issue.
CAMEL-15119,Claus Ibsen,2020-05-28T05:12:07+0000,1590628327， where 1590628327 is the epoch,Original report https://github.com/apache/camel-quarkus/issues/1108AbstractApiComponent is currently the superclass of Box， Braintree， FHIR， Google*， Olingo*， Twillio and Zendesk.Configuration classes such as BraintreeConfiguration and all its generated subclasses (AddOnGatewayEndpointConfiguration， AddressGatewayEndpointConfiguration， ClientTokenGatewayEndpointConfiguration， ...) require registering for reflection on Camel Quarkus.If would be nice if the configurer approach could cover these too.,Hide Permalink Claus Ibsen added a comment - 28/May/20 05:12 Those are auto generated and lacks documentation on their options， which currently the tools require Show Claus Ibsen added a comment - 28/May/20 05:12 Those are auto generated and lacks documentation on their options， which currently the tools require Hide Permalink Claus Ibsen added a comment - 22/Jun/20 10:32 https://issues.apache.org/jira/browse/CAMEL-15224 fixes this Show Claus Ibsen added a comment - 22/Jun/20 10:32 https://issues.apache.org/jira/browse/CAMEL-15224 fixes this
CAMEL-15118,Unassigned,2020-05-27T08:25:10+0000,1590553510， where 1590553510 is the epoch,We do have a profile to check the code against the standards we want， but then as to be manually fixed. We could fail is there's a problem at build time but that slows down people and can become very annoying.There are plugins that do reformat the source code during the compilation phase， this should ensure that all committed code follows the standard， without causing any disturbance to the developers.,Hide Permalink ASF GitHub Bot added a comment - 27/May/20 08:25 AemieJ commented on pull request #371: URL: https://github.com/apache/camel-website/pull/371#issuecomment-634509223 @lburgazzoli I have created a separate issue with the website component and made the changes， is that okay with you now? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/May/20 08:25 AemieJ commented on pull request #371: URL: https://github.com/apache/camel-website/pull/371#issuecomment-634509223 @lburgazzoli I have created a separate issue with the website component and made the changes， is that okay with you now? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 28/May/20 22:03 zregvart merged pull request #371: URL: https://github.com/apache/camel-website/pull/371 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 28/May/20 22:03 zregvart merged pull request #371: URL: https://github.com/apache/camel-website/pull/371 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org
CAMEL-15117,Unassigned,2020-05-27T07:57:45+0000,1590551865， where 1590551865 is the epoch,It seems that， sporadically， the code may throw an NPE. I am speculating*because I cannot confirm entirely due to the sporadic nature of the issue， but by looking at the logs and the behavior， it seems that the onMessage handler for subscriptions can still be called during the shutdown. 2020-05-27 09:19:21，017 [orceConnector-0] INFO org.apache.camel.impl.engine.DefaultShutdownStrategy - Graceful shutdown of 1 routes completed in 0 seconds2020-05-27 09:19:21，018 [orceConnector-0] DEBUG org.cometd.client.BayeuxClient.67a9cb3f - State updated: CONNECTED -> DISCONNECTING2020-05-27 09:19:21，018 [orceConnector-0] DEBUG org.cometd.client.BayeuxClient.67a9cb3f - Sending messages [\{clientId=hr1cjxz3pqn37al6x32wuz369e0， channel=/meta/disconnect， id=19}]2020-05-27 09:19:21，018 [orceConnector-0] DEBUG org.cometd.client.BayeuxClient.67a9cb3f - Sent disconnect {clientId=hr1cjxz3pqn37al6x32wuz369e0， channel=/meta/disconnect， id=19}2020-05-27 09:19:21，018 [orceConnector-0] DEBUG org.cometd.client.BayeuxClient.67a9cb3f - Notifying threads in waitFor()2020-05-27 09:19:21，018 [orceConnector-0] DEBUG org.cometd.client.BayeuxClient.67a9cb3f - Waiting 60000ms for [DISCONNECTED]2020-05-27 09:19:21，147 [nt@4ae82baa-204] DEBUG org.apache.camel.component.salesforce.internal.streaming.SubscriptionHelper$5 - Received messages [\{clientId=hr1cjxz3pqn37al6x32wuz369e0， channel=/meta/disconnect， id=19， successful=true}]09:19:21，147 [nt@4ae82baa-204] DEBUG org.cometd.client.BayeuxClient.67a9cb3f - Processing {clientId=hr1cjxz3pqn37al6x32wuz369e0， channel=/meta/disconnect， id=19， successful=true}2020-05-27 09:19:21，147 [nt@4ae82baa-204] DEBUG org.cometd.client.BayeuxClient.67a9cb3f - State updated: DISCONNECTING -> TERMINATING2020-05-27 09:19:21，147 [nt@4ae82baa-203] DEBUG org.apache.camel.component.salesforce.internal.streaming.SubscriptionHelper$5 - Received messages [\{clientId=hr1cjxz3pqn37al6x32wuz369e0， channel=/meta/connect， id=17， successful=true}]27 09:19:21，147 [nt@4ae82baa-203] DEBUG org.cometd.client.BayeuxClient.67a9cb3f - Processing {clientId=hr1cjxz3pqn37al6x32wuz369e0， channel=/meta/connect， id=17， successful=true}2020-05-27 09:19:21，148 [nt@4ae82baa-204] DEBUG org.cometd.client.BayeuxClient.67a9cb3f - State updated: TERMINATING -> DISCONNECTED2020-05-27 09:19:21，148 [nt@4ae82baa-204] DEBUG org.cometd.client.BayeuxClient.67a9cb3f - Notifying threads in waitFor()2020-05-27 09:19:21，148 [orceConnector-0] DEBUG org.cometd.client.BayeuxClient.67a9cb3f - Waited 129/60000ms for [DISCONNECTED]， state is DISCONNECTED2020-05-27 09:19:21，148 [nt@4ae82baa-203] DEBUG org.cometd.client.BayeuxClient.67a9cb3f - State not updated: DISCONNECTED -> CONNECTED2020-05-27 09:19:21，148 [nt@4ae82baa-203] DEBUG org.cometd.client.BayeuxClient.67a9cb3f - Notifying threads in waitFor()2020-05-27 09:19:21，169 [nt@4ae82baa-209] DEBUG org.apache.camel.component.salesforce.internal.streaming.SubscriptionHelper$5 - Received messages [\{clientId=hr1cjxz3pqn37al6x32wuz369e0， channel=/meta/subscribe， id=18， subscription=/topic/CamelKafkaConnectorTopic， successful=true}]td.client.BayeuxClient.67a9cb3f - Processing {clientId=hr1cjxz3pqn37al6x32wuz369e0， channel=/meta/subscribe， id=18， subscription=/topic/CamelKafkaConnectorTopic， successful=true}7 09:19:21，169 [nt@4ae82baa-209] DEBUG org.apache.camel.component.salesforce.internal.streaming.SubscriptionHelper - [CHANNEL:META_SUBSCRIBE]: {clientId=hr1cjxz3pqn37al6x32wuz369e0， channel=/meta/subscribe， id=18， subscription=/topic/CamelKafkaConnectorTopic， successful=true}mel.component.salesforce.internal.streaming.SubscriptionHelper - Subscribed to channel /topic/CamelKafkaConnectorTopic2020-05-27 09:19:21，169 [nt@4ae82baa-209] INFO org.cometd.bayeux.client.ClientSession - Exception while invoking listener org.apache.camel.component.salesforce.internal.streaming.SubscriptionHelper$7@62e79206java.lang.NullPointerException: null at org.apache.camel.component.salesforce.internal.streaming.SubscriptionHelper$7.onMessage(SubscriptionHelper.java:458) ~[camel-salesforce-3.3.0.jar:3.3.0] at org.cometd.common.AbstractClientSession$AbstractSessionChannel.notifyOnMessage(AbstractClientSession.java:583) ~[cometd-java-common-4.0.4.jar:4.0.4] at org.cometd.common.AbstractClientSession$AbstractSessionChannel.notifyMessageListeners(AbstractClientSession.java:568) ~[cometd-java-common-4.0.4.jar:4.0.4] at org.cometd.common.AbstractClientSession.notifyListeners(AbstractClientSession.java:308) ~[cometd-java-common-4.0.4.jar:4.0.4] at org.cometd.common.AbstractClientSession.lambda$receive$4(AbstractClientSession.java:269) ~[cometd-java-common-4.0.4.jar:4.0.4] at org.cometd.bayeux.Promise$2.succeed(Promise.java:103) [bayeux-api-4.0.4.jar:4.0.4] ...,Hide Permalink Otavio Rodolfo Piske added a comment - 27/May/20 07:57 I will send a PR with a proposed fix for this. Show Otavio Rodolfo Piske added a comment - 27/May/20 07:57 I will send a PR with a proposed fix for this.
CAMEL-15116,Claus Ibsen,2020-05-27T06:54:04.850Z,1590548044.85， where 1590548044.85 is the epoch,The examples listed in the exception-clause page do no appear as a link so you cannot easilly jump to them,There are no comments yet on this issue.
CAMEL-15115,Claus Ibsen,2020-05-30T18:50:26+0000,1590850226， where 1590850226 is the epoch,See this tablehttps://camel.apache.org/components/latest/And then make this table the same columns and data similarhttps://camel.apache.org/camel-quarkus/latest/list-of-camel-quarkus-extensions.html,Hide Permalink Aashna Jena added a comment - 30/May/20 18:50 The columns are the same in both the tables : Component， Artifact， Support Level， Since， Description. What exactly do we want to change here? Show Aashna Jena added a comment - 30/May/20 18:50 The columns are the same in both the tables : Component， Artifact， Support Level， Since， Description. What exactly do we want to change here? Hide Permalink Claus Ibsen added a comment - 31/May/20 05:33 This has been implemented， the JIRA tis resolved Show Claus Ibsen added a comment - 31/May/20 05:33 This has been implemented， the JIRA tis resolved
CAMEL-15114,Claus Ibsen,2020-05-26T17:22:02+0000,1590499322， where 1590499322 is the epoch,Reported on user forum， for a user upgrading from 2.x to 3.x,Hide Permalink Claus Ibsen added a comment - 26/May/20 17:22 There is a date:exchangeCreated function you can use now Show Claus Ibsen added a comment - 26/May/20 17:22 There is a date:exchangeCreated function you can use now
CAMEL-15113,Jan Bednar,2020-07-04T07:23:14+0000,1593832994， where 1593832994 is the epoch,There is no support to declare dead letter queues with custom arguments. I can find a TODO in RabbitMQDeclareSupport class.https://github.com/apache/camel/blob/88f46b1ce46f5cdace73b2721a1cb96a290d42dd/components/camel-rabbitmq/src/main/java/org/apache/camel/component/rabbitmq/RabbitMQDeclareSupport.java#L41 My requirement is to set a TTL on messages in dead letter queue while queue is declared by Camel. What I have tried:If I create DLQ separately by camel with TTL and use that queue name in original queue then I get exception that TTL value can't be different. Because the declare parameter in RabbitMQEndpoint class declares both original queue and dead letter queue， there is no separate option if someone don't want to declare dead letter queue.Let me know if there is any workaround except creating queues manually.,Hide Permalink Claus Ibsen added a comment - 04/Jul/20 07:23 Anyone able to work on a fix for this? Show Claus Ibsen added a comment - 04/Jul/20 07:23 Anyone able to work on a fix for this? Hide Permalink Jan Bednar added a comment - 09/Jul/20 08:54 Added skipDlqDeclare option and extended args option with dlq.queue and dlq.binding prefixes. Show Jan Bednar added a comment - 09/Jul/20 08:54 Added skipDlqDeclare option and extended args option with dlq.queue and dlq.binding prefixes.
CAMEL-15112,Claus Ibsen,2020-05-26T14:14:07+0000,1590488047， where 1590488047 is the epoch,Lets deprecate hystrix as hystrix itself is EOL and we have 2 other CB implementationshttps://github.com/Netflix/Hystrix,There are no comments yet on this issue.
CAMEL-15111,Unassigned,2020-05-26T10:32:51+0000,1590474771， where 1590474771 is the epoch,AS2 component can receive only messages that has the following content-type: application/edifact application/edi-x12 application/edi-consentin case of a PLAIN interchange it works fine， however when i try to receive an ENCRYPTED/SIGNED/COMPRESSED messages camel don't recognize the content type of the interchange.Here is the message sent by my trading partner : AS2-From: ESALINKAS2-To: YSF2AS2-Version: 1.2Date: Mon， 25 May 2020 22:04:47 GMTDisposition-Notification-Options: signed-receipt-protocol=optional，pkcs7-signature;signed-receipt-micalg=optional，md5Disposition-Notification-To: ediint-sync-mdnEDIINT-Features: multiple-attachmentsMessage-ID: <20200525220447.3200.111@DESKTOP-OT6I4JG>Subject: message from YSFContent-Type: multipart/signed; protocol="application/pkcs7-signature"; micalg=md5; boundary="------15ECC40FF5D299411590444287BC801"--------15ECC40FF5D299411590444287BC801Content-Transfer-Encoding: binaryContent-Disposition: attachment; filename="smime.p7m"Content-Type: application/pkcs7-mime; smime-type=compressed-data; name="smime.p7m"0€*†H†÷ €0€0*†H†÷ 0€ *†H†÷ €$€‚îxrÎÏ+IÍ+Ñ)JÌ+NK-ÒuÍKÎOÉÌK- RHÊÌK，ªäår†*qÉ，.È/Î，ÉÌÏ³RH，)ILÎÈjµVHËÌIÍKÌMµU*ÎÍÌMÕ+0ÏUBh©，Hª/(ÈÉLNiÖ/ÈN.6×)µVëÐ-ª±MÍ+KÍÉ/HMÑMI，I´VÀ4'—Ë ‰©€S«Í£í;/#;ó‚&¦D P，#ƒaãqƒ&ÆÃ@¦Aã*ƒÆ%†ÜœlÌ¡，lÂLnA†ü¼ ‡0›Ð§É©†|< vaÖ€Ä¢ÌbC1ŸK˜×=5/µ(³BÁ½(¿´ÀPÆ@$Î-，ìšö»0¨RR#ŠR‹‹øA²ÌÂ‰E%@}F†Úšpr2ŠÉ"€"W€•;¤CŒN™¬—œŸr，/\5##+K#ƒYOú¿¥Šw6ßíiJ(»œqÉj­ã±_bE§fýÖas®XµxÚ'Ï™|ý;ûÄNN7ßÕÆs{é|ƒ|wïkž<×\ý>- ú!ûFƒ™>{Ÿ™Yîúa:ÙúÊšÚÞná°|zu†- è=îwÅ—VßøW§ÿùëãÎ þg¥nš«½n°tzwË{Lb]0Kÿ¿ÅÛcamel will send an MDN containing this message: Failed to parse entity content,There are no comments yet on this issue.
CAMEL-15110,Unassigned,2020-05-26T07:08:21+0000,1590462501， where 1590462501 is the epoch,We should add method to ResourceHelper so resource based components can use this to know if it will be loaded from classpath or not.This can be used to optimize for build time optimization as classpath can be initializer earlier. Where as file/http has to be loaded at runtime.,There are no comments yet on this issue.
CAMEL-15109,Luca Burgazzoli,2020-05-25T10:45:25+0000,1590389125， where 1590389125 is the epoch,,There are no comments yet on this issue.
CAMEL-15108,Zheng Feng,2020-05-25T05:11:32+0000,1590369092， where 1590369092 is the epoch,This issue came across the https://github.com/apache/camel-quarkus/issues/1197It looks like the JtaTransactionPolicy does not depend on CDI except it introduces the transactionManager via @Resource. So it could be helpful to extract this implementation in the camel-jta module， and the camel-quarkus would like to leverage the narayana-jta extension to support the transactd() in the camel-quarkus.,Hide Permalink Claus Ibsen added a comment - 25/May/20 05:11 Yeah sure this is a good idea Show Claus Ibsen added a comment - 25/May/20 05:11 Yeah sure this is a good idea
CAMEL-15107,Unassigned,2020-05-25T06:08:21+0000,1590372501， where 1590372501 is the epoch,Hi Camel Team，Note: I received email delivery failure with issues@camel.apache.org and hence raising Jira. I’m not sure if it’s a bug or missing something as part of upgrade camel 3.1.0 to 3.3.0. I’m getting a Jackson error from swagger UI api doc page for my springboot application after camel 3.3upgrade. I’m using camel 3.3.0. With camel-swagger-java dependency 3.3.0 and springboot 2.3.0. I use org.webjars.swagger-ui version 3.25.3 dependency as well.I use camel-Servlet in REST DSL for my camel REST apis being exposed. It was working perfectly fine in camel 3.1.0 with spring boot 2.2.6. But not in camel 3.3.0 Could you please help? Error details: //Caused by: java.lang.NoSuchMethodError:com.fasterxml.jackson.databind.introspect.AnnotatedMember.getType(Lcom/fasterxml/jackson/databind/type/TypeBindings;)Lcom/fasterxml/jackson/databind/JavaType;at io.swagger.jackson.ModelResolver.resolve(ModelResolver.java:425) [swagger-core-1.5.24.jar:1.5.24]at io.swaggerjackson.ModelResolver.resolve ModelResolver.java:203) Iswagger-core-1.5.24jar:1.5.24]at io.swagger.comverter.ModelConverterContextimpl.resolve(ModelConverterContextlmpl.java:103) [swagger-core-1.5.24.jar:1.5.24]at io.swagger.converter.ModelConverters.read(ModelConverters.java:76) swagger-core-1.5.24.jar:1.5.24]at io.swagger.converter. ModelConverters.read(ModelConverters.java:67)*[swagger-core-1.5.24.jar:1.5.24]at org.apache.camel.swagger. RestModel Converters.readClass(RestModel Converters.java:33) "[camel-swagger-java-3.3.0.jar:3.3.0]at org.apache.camel.swagger.Restwagger Reader.appendModels(Restswagger Reader.java:755) [camel-swagger-java-3.3.0，jar:3.3.0at org.apache.camel.swagger.RestSwaggerReader.parse(RestSwageerReader.java:225) camel-swagger-java-3.3.0.jar:3.3.0]at org.apache.camel.swagger.RestSwaggerReader.read(RestSwaggerReader.java:111) [camel-swagger-java-3.3.0.jar:3.3.0]at org.apache.camel.swagger.RestSwaggerSupport.renderResourceListing(RestSwaggerSupport.java:263) [camel-swagger-java-3.3.0.jar:3.3.0at org.apache.camel.swagger. RestSwaggerProcessor.process(RestSwaggerProcessor.java:119) [camel-swagger-java-3.3.0.jar:3.3.0]at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:67)camel-support-3.3.0.jar:3.3.0]59 common frames omitted,Hide Permalink Claus Ibsen added a comment - 25/May/20 06:08 You can try using camel-openapi-java that is more modern. Show Claus Ibsen added a comment - 25/May/20 06:08 You can try using camel-openapi-java that is more modern. Hide Permalink Claus Ibsen added a comment - 25/May/20 07:59 Oh btw the error smells like you have mixed versions of jackson on the classpath Show Claus Ibsen added a comment - 25/May/20 07:59 Oh btw the error smells like you have mixed versions of jackson on the classpath Hide Permalink Sunil Sudhakaran added a comment - 25/May/20 09:00 could you please share an example for open api with a ui? I tried with camel-openapi-java. It works again in camel 3.1 with openapi 3.0.2 and can be displayed on User interface of Swagger UI or with springdoc ui. but， in camel 3.3 it fails. It a different error this time // failed to start route doc-api because of null. caused by java.lang.IllegalStateException: Cannot find RestApiProcessorFactory in Registry or classpath (such as the camel-openapi-java component) at org.apache.camel.component.rest.RestApiEndpoint.createProducer(RestApiEndpoint.java:207) ~[camel-rest-3.3.0.jar:3.3.0] Show Sunil Sudhakaran added a comment - 25/May/20 09:00 could you please share an example for open api with a ui? I tried with camel-openapi-java. It works again in camel 3.1 with openapi 3.0.2 and can be displayed on User interface of Swagger UI or with springdoc ui. but， in camel 3.3 it fails. It a different error this time // failed to start route doc-api because of null . caused by java.lang.IllegalStateException: Cannot find RestApiProcessorFactory in Registry or classpath (such as the camel-openapi-java component) at org.apache.camel.component. rest .RestApiEndpoint.createProducer(RestApiEndpoint.java:207) ~[camel- rest -3.3.0.jar:3.3.0] Hide Permalink Sunil Sudhakaran added a comment - 25/May/20 09:04 Also my code has dependency camel-jackson 3.3.0. It uses the bom Which internally is jackson-core2.11.0.jar which comes along with above camel jackson Show Sunil Sudhakaran added a comment - 25/May/20 09:04 Also my code has dependency camel-jackson 3.3.0. It uses the bom Which internally is jackson-core2.11.0.jar which comes along with above camel jackson Hide Permalink Claus Ibsen added a comment - 25/May/20 12:27 Oh it may be due to https://issues.apache.org/jira/browse/CAMEL-15109 which is fixed in 3.4.0 Show Claus Ibsen added a comment - 25/May/20 12:27 Oh it may be due to https://issues.apache.org/jira/browse/CAMEL-15109 which is fixed in 3.4.0 Hide Permalink Claus Ibsen added a comment - 25/May/20 12:28 For jackson issue then you need to fix the classpath to use same version， not mixed. Show Claus Ibsen added a comment - 25/May/20 12:28 For jackson issue then you need to fix the classpath to use same version， not mixed. Hide Permalink Sunil Sudhakaran added a comment - 25/May/20 16:53 Sure thank you for update. I will check into the jackson jar version issue. One last question， as per the Jira ticket for the component camel-rest-openapi will it support servlet component in camel 3.4.0 ? Show Sunil Sudhakaran added a comment - 25/May/20 16:53 Sure thank you for update. I will check into the jackson jar version issue. One last question， as per the Jira ticket for the component camel-rest-openapi will it support servlet component in camel 3.4.0 ? Hide Permalink Claus Ibsen added a comment - 26/May/20 14:11 yeah rest-dsl should support servlet. And if you keep having problems then I suggest to put together a sample project and put up on github somewhere， or attach here as .zip file. Show Claus Ibsen added a comment - 26/May/20 14:11 yeah rest-dsl should support servlet. And if you keep having problems then I suggest to put together a sample project and put up on github somewhere， or attach here as .zip file. Hide Permalink Sunil Sudhakaran added a comment - 26/May/20 18:58 sure thank you for all help Show Sunil Sudhakaran added a comment - 26/May/20 18:58 sure thank you for all help
CAMEL-15106,Viral Gohel,2020-05-24T19:50:25.658Z,1590335425.658， where 1590335425.658 is the epoch,Can KafkaConsumer support suspend and resume using Kafka's consumer.pause() and consumer.resume(). This keeps consumers alive and avoids recreating consumers and rebalance.rough attempt attached.,Hide Permalink Viral Gohel added a comment - 09/Jun/20 11:42 I am looking into this. Show Viral Gohel added a comment - 09/Jun/20 11:42 I am looking into this. Hide Permalink Claus Ibsen added a comment - 24/Aug/20 08:03 Also talked on user mailing list http://camel.465427.n5.nabble.com/Access-native-KafkaConsumer-in-Camel-RoutePolicy-td5879508.html Show Claus Ibsen added a comment - 24/Aug/20 08:03 Also talked on user mailing list http://camel.465427.n5.nabble.com/Access-native-KafkaConsumer-in-Camel-RoutePolicy-td5879508.html
CAMEL-15105,Unassigned,2020-05-24T08:24:17+0000,1590294257， where 1590294257 is the epoch,We should revisit the way we access plugins in CamelContext via either Extension or getter/setter on ExtendedCamelContext.They are currently separated， and could be uniform and consistent.,There are no comments yet on this issue.
CAMEL-15104,Unassigned,2020-05-22T16:34:19+0000,1590150859， where 1590150859 is the epoch,I'm trying to connect to a CB cluster while configuring the connector in the following way:.to("couchbase:http://{{couchbase.server}}/{{couchbase.bucket}}?operation=CCB_PUT&password={{bucket.pass}}") with application properties:couchbase.server=cb-cluster.unicredit.svc:8091couchbase.bucket=my-bucketbucket.pass=password after noticing that the most recent authentication mode (RBAC) with username and password is not really supported but the client is automatically calling the SASL authentication mode. So had to create a user with the same bucket name as its username. The result of the connection initialization in logs is:2020-05-22 15:35:13.552 INFO net.spy.memcached.auth.AuthThread: Authenticated to cb-cluster.unicredit.svc/10.128.0.81:112102020-05-22 15:35:13.580 WARN com.couchbase.client.vbucket.provider.BucketConfigurationProvider: Could not parse config， retrying bootstrap.java.text.ParseException: JSONObject["proxy"] not found.,Hide Permalink Andrea Cosentino added a comment - 22/May/20 16:34 The component uses an old java client that won't work with newest couchbase. There is an issue for upgrading to newer client Show Andrea Cosentino added a comment - 22/May/20 16:34 The component uses an old java client that won't work with newest couchbase. There is an issue for upgrading to newer client
CAMEL-15103,Unassigned,2020-05-22T14:28:16+0000,1590143296， where 1590143296 is the epoch,I see that Camel 3.x is using the latest version 2.5 of kafka-clientsIs that something we could do in Camel 2.25.x as well?,Hide Permalink Andrea Cosentino added a comment - 22/May/20 14:28 2.25.x is based on 2.1.0， and we already released a 2.25.1， we cannot break existing users by bumping to 2.5.0， so in my opinion， no， it cannot be done for 2.25.x Show Andrea Cosentino added a comment - 22/May/20 14:28 2.25.x is based on 2.1.0， and we already released a 2.25.1， we cannot break existing users by bumping to 2.5.0， so in my opinion， no， it cannot be done for 2.25.x Hide Permalink Darius Cooper added a comment - 23/May/20 01:52 Thanks for the response. I tried looking for the roadmap blog but couldn't find: is a Camel 2.26 planned in the future? I'm wondering if a Kafka version upgrade would be acceptable if there were to be a Camel 2.26 at some point? Just as an FYI， we use Camel 2.24.3 and override kafka-clients to use 2.3， and is seems good. Would definitely like to move to Camel 3.x， but on a really large project， it's a multi-month endeavor. Show Darius Cooper added a comment - 23/May/20 01:52 Thanks for the response. I tried looking for the roadmap blog but couldn't find: is a Camel 2.26 planned in the future? I'm wondering if a Kafka version upgrade would be acceptable if there were to be a Camel 2.26 at some point? Just as an FYI， we use Camel 2.24.3 and override kafka-clients to use 2.3， and is seems good. Would definitely like to move to Camel 3.x， but on a really large project， it's a multi-month endeavor.
CAMEL-15102,Jean-Baptiste Onofré,2020-05-26T11:30:54+0000,1590478254， where 1590478254 is the epoch,We should create a camel-karaf-examples git repo and move the osgi/blueprint examples from camel-examples there.,Hide Permalink Jean-Baptiste Onofré added a comment - 26/May/20 11:30 It sounds good. I will tackle that. Show Jean-Baptiste Onofré added a comment - 26/May/20 11:30 It sounds good. I will tackle that. Hide Permalink Andrea Cosentino added a comment - 26/May/20 11:31 I'm already working on this. Show Andrea Cosentino added a comment - 26/May/20 11:31 I'm already working on this. Hide Permalink Jean-Baptiste Onofré added a comment - 26/May/20 11:32 Andrea Cosentino cool， thanks for the update ! Show Jean-Baptiste Onofré added a comment - 26/May/20 11:32 Andrea Cosentino cool， thanks for the update ! Hide Permalink Jean-Baptiste Onofré added a comment - 22/Jun/20 11:28 I'm also planning new examples to show coming improvements (whiteboard， etc). Show Jean-Baptiste Onofré added a comment - 22/Jun/20 11:28 I'm also planning new examples to show coming improvements (whiteboard， etc). Hide Permalink Jean-Baptiste Onofré added a comment - 22/Jun/20 11:29 Andrea Cosentino do you mind if I push the example in https://github.com/apache/camel-karaf-examples as I'm working on the cleanup/improvements on camel-karaf ? Show Jean-Baptiste Onofré added a comment - 22/Jun/20 11:29 Andrea Cosentino do you mind if I push the example in https://github.com/apache/camel-karaf-examples as I'm working on the cleanup/improvements on camel-karaf ? Hide Permalink Andrea Cosentino added a comment - 22/Jun/20 12:01 sure Show Andrea Cosentino added a comment - 22/Jun/20 12:01 sure Hide Permalink Claus Ibsen added a comment - 06/Aug/20 07:59 The examples has been moved https://github.com/apache/camel-karaf-examples Show Claus Ibsen added a comment - 06/Aug/20 07:59 The examples has been moved https://github.com/apache/camel-karaf-examples
CAMEL-15101,Zoran Regvart,2020-05-22T10:50:16+0000,1590130216， where 1590130216 is the epoch,When Camel headers are populated from Netty HttpRequest if the scheme of the URL in the request is "https" and the port is not specified (e.g. "https://example.com") the Exchange.HTTP_PORT is set to 80 instead of 443.If the absolute URL is present on the Netty HttpRequest， i.e. when used as proxy， the Exchange.HTTP_URL gets set to the concatenation of the consumer URL and the producer URL.,There are no comments yet on this issue.
CAMEL-15100,Zoran Regvart,2020-05-22T10:45:07+0000,1590129907， where 1590129907 is the epoch,The SSL context initialization requires that the keystore or truststore is specified as file or as resource. We could create a default SSL context when none of those is specified， making it more user friendly to configure/use the component.,There are no comments yet on this issue.
CAMEL-15099,Zoran Regvart,2020-05-22T10:42:34+0000,1590129754， where 1590129754 is the epoch,When netty-http is used as a with https url， for example with to("netty-http:https://...")， we should set the ssl property to true. This is already done when the component is used as a part of the REST producer contract and having it configured as default provides a nice symmetry and makes it more user friendly.,There are no comments yet on this issue.
CAMEL-15098,Andrea Cosentino,2020-05-22T09:42:59+0000,1590126179， where 1590126179 is the epoch,Seems that docs/user-manual/modules/ROOT/pages/camel-3x-upgrade-guide-3_4.adoc was malformed by merge conflict.,There are no comments yet on this issue.
CAMEL-15097,Claus Ibsen,2020-05-22T06:58:29+0000,1590116309， where 1590116309 is the epoch,Routes have 1 input in camel 3. There was a variation in java dsl which we have not preventedfrom a from b from c to foo,There are no comments yet on this issue.
CAMEL-15096,Jean-Baptiste Onofré,2020-05-22T07:13:13+0000,1590117193， where 1590117193 is the epoch,Spring Boot comes with 9.4.28.v20200408And we are using an older version.Apache Karaf should upgrade too.,Hide Permalink Claus Ibsen added a comment - 22/May/20 07:13 Karaf seems to have upgraded https://github.com/apache/karaf/blob/karaf-4.2.x/pom.xml#L267 Show Claus Ibsen added a comment - 22/May/20 07:13 Karaf seems to have upgraded https://github.com/apache/karaf/blob/karaf-4.2.x/pom.xml#L267 Hide Permalink Claus Ibsen added a comment - 22/May/20 12:09 Karaf are in the works on doing a new release Show Claus Ibsen added a comment - 22/May/20 12:09 Karaf are in the works on doing a new release
CAMEL-15095,Unassigned,2020-05-22T03:03:03+0000,1590102183， where 1590102183 is the epoch,add a line break before stack trace detail to help print a more readable and friendly log.the example below shows the changes:before: Failed delivery for (MessageId: xxx). Exhausted after delivery attempt: 1 caught: com.example.exception.SomeException: xxxMessage History---------------...Stacktrace--------------- com.example.exception.SomeException: xxx at ... at ...afterFailed delivery for (MessageId: xxx). Exhausted after delivery attempt: 1 caught: com.example.exception.SomeException: xxxMessage History---------------...Stacktrace---------------com.example.exception.SomeException: xxx at ... at ...,There are no comments yet on this issue.
CAMEL-15094,Unassigned,2020-10-29T21:23:20+0000,1603992200， where 1603992200 is the epoch,,Hide Permalink Praveen Kottarathil added a comment - 29/Oct/20 21:23 I am picking this up. I noticed that Andrea Cosentino recently moved springboot & karaf archetype to their respective projects. Since endpoint DSL is a part of Camel core， planning to keep this under `camel/archetypes`， just like `camel-archetype-java`. Is this alright? Show Praveen Kottarathil added a comment - 29/Oct/20 21:23 I am picking this up. I noticed that Andrea Cosentino recently moved springboot & karaf archetype to their respective projects. Since endpoint DSL is a part of Camel core， planning to keep this under `camel/archetypes`， just like `camel-archetype-java`. Is this alright? Hide Permalink Claus Ibsen added a comment - 30/Oct/20 05:16 Yes correct Show Claus Ibsen added a comment - 30/Oct/20 05:16 Yes correct Hide Permalink Praveen Kottarathil added a comment - 30/Oct/20 15:01 Thanks Claus Ibsen PR4542 is ready Show Praveen Kottarathil added a comment - 30/Oct/20 15:01 Thanks Claus Ibsen PR4542 is ready
CAMEL-15093,Unassigned,2020-05-21T08:19:17+0000,1590034757， where 1590034757 is the epoch,Expected functionality I send 100 messages to the queue The camel consumer consumes the messages and sends it to the Backend Mocking system The backend mock sends back a 500 status message The messages is retries three times and send back to failover queue. And all 100 messages are cleared from the main queue and pushed to failover queue. Actual error I send 100 messages to the queue The camel consumer consumes the messages and sends it to the Backend Mocking system The backend mock sends back a 500 status message The messages is retries three times and send back to failover queue. After 19 messages are processed and exception is throwncom.rabbitmq.client.AlreadyClosedException: channel is already closed due to channel error; protocol method: #method<channel.close>(reply-code=406， reply-text=PRECONDITION_FAILED - unknown delivery tag 101， And inconsistency in message count is also found 86 messages are present in the main queue and 19 messages are present in the failover queue UPDATEAfter adding the options "prefetchEnabled=true&prefetchCount=1"The below exception is thrownConsumer org.apache.camel.component.rabbitmq.RabbitConsumer@3240f425 (amq.ctag-SyXWmiQnlsHRDZ9sQAj99Q) method handleDelivery for channel AMQChannel(amqp://microserviceuser@172.16.2.200:5672/，1) threw an exception for channel AMQChannel(amqp://microserviceuser@172.16.2.200:5672/，1)com.rabbitmq.client.AlreadyClosedException: connection is already closed due to connection error; cause: java.io.EOFException The consumer code from("rabbitmq:amq-direct?connectionFactory=#rabbitConnectionFactory&" + "autoDelete=false&prefetchEnabled=true&autoAck=false&prefetchCount=1&" + "routingKey=eis.ncts.ctc.oodes.request&queue=eis.ncts.ctc.oodes.request.queue") The exception that is thrown on a rabbit Mq server 2020-05-20 14:40:44.089 [error] <0.2931.0> Channel error on connection <0.2913.0> (127.0.0.1:36072 -> 127.0.0.1:5672， vhost: '/'， user: 'microserviceuser')， channel 1:operation basic.ack caused a channel exception precondition_failed: unknown delivery tag 8,Hide Permalink Claus Ibsen added a comment - 21/May/20 08:19 Can you try with Camel 2.25.1 or 3.3.0 release first. And report back Show Claus Ibsen added a comment - 21/May/20 08:19 Can you try with Camel 2.25.1 or 3.3.0 release first. And report back Hide Permalink Sacintha Raj added a comment - 21/May/20 08:20 Forgot to Add that it is a Kubernetes cluster Show Sacintha Raj added a comment - 21/May/20 08:20 Forgot to Add that it is a Kubernetes cluster Hide Permalink Sacintha Raj added a comment - 21/May/20 08:21 I will try to test in the versions mentioned Show Sacintha Raj added a comment - 21/May/20 08:21 I will try to test in the versions mentioned Hide Permalink Claus Ibsen added a comment - 04/Jul/20 07:24 Have you tested with newer version， there is also Camel 3.4.0 released. Show Claus Ibsen added a comment - 04/Jul/20 07:24 Have you tested with newer version， there is also Camel 3.4.0 released.
CAMEL-15092,Unassigned,2020-05-20T17:57:55+0000,1589983075， where 1589983075 is the epoch,To keep the dependencies to a minimum (that would help in subprojects like camel-kafka-connector and camel-quarkus) would be good to investigate if is possible to rewrite the camel-elasticsearch-rest component just depending on: <dependency> <groupId>org.elasticsearch.client</groupId> <artifactId>elasticsearch-rest-client</artifactId> </dependency>instead of: <dependency> <groupId>org.elasticsearch.client</groupId> <artifactId>elasticsearch-rest-high-level-client</artifactId> </dependency>,There are no comments yet on this issue.
CAMEL-15091,Andrea Tarocchi,2020-05-20T09:18:57+0000,1589951937， where 1589951937 is the epoch,If the first port tried is in use an exception is thrown https://github.com/apache/camel/blob/master/components/camel-test/src/main/java/org/apache/camel/test/AvailablePortFinder.java#L75 and no other port in the provided range is tested.,There are no comments yet on this issue.
CAMEL-15090,Unassigned,2020-05-20T07:50:51.300Z,1589946651.3， where 1589946651.3 is the epoch,See screenshot.Using OSGi blueprint with Camelshould be moved up under the Resources & Guides where such things are located.,Hide Permalink Zoran Regvart added a comment - 20/May/20 11:57 The change needs to be made to docs/user-manual/modules/ROOT/nav.adoc Show Zoran Regvart added a comment - 20/May/20 11:57 The change needs to be made to docs/user-manual/modules/ROOT/nav.adoc Hide Permalink Aemie added a comment - 25/May/20 04:23 This is a pretty minor job just the moving of link required. Apart from that， Zoran Regvart if I wanted to open suggestions on the website layout， could I just simply create issues with the `outreachy 2020` label or must I inform either of the mentors first. Show Aemie added a comment - 25/May/20 04:23 This is a pretty minor job just the moving of link required. Apart from that， Zoran Regvart if I wanted to open suggestions on the website layout， could I just simply create issues with the `outreachy 2020` label or must I inform either of the mentors first. Hide Permalink Zoran Regvart added a comment - 25/May/20 06:55 Aemie I would create a new issue if one doesn’t exist yet and set the component to website. Show Zoran Regvart added a comment - 25/May/20 06:55 Aemie I would create a new issue if one doesn’t exist yet and set the component to website.
CAMEL-15089,Zheng Feng,2020-05-20T01:51:34+0000,1589925094， where 1589925094 is the epoch,Since the kafka 2.5.0 does not incompatible with the scala 2.11 and now we use the testcontainer to launch a kafka instance for testing， I prefer to remove the kafka_2.12.,There are no comments yet on this issue.
CAMEL-15088,Unassigned,2020-05-19T15:05:28+0000,1589886328， where 1589886328 is the epoch,We should create a darp component to interact with dapr APIs: https://github.com/dapr/docs/tree/master/reference/api so we can as examplefrom("dapr:pubsub/topic") .to("dapr:invoke/${appName}/${appMethod}"),There are no comments yet on this issue.
CAMEL-15087,Claus Ibsen,2020-05-20T08:57:59+0000,1589950679， where 1589950679 is the epoch,From camel 3.1 and up， I have detected that <doD/> doesn't resolve variables in propertyPlaceholders.For example:if i have an etc/uri.properties with:example=http://${headers.url} And in camel Context xml: ...<camelContext id="example" xmlns="http://camel.apache.org/schema/spring"> <propertyPlaceholder id="myProperties" location="classpath:etc/uri.properties"/> <route id="test"> <from uri="timer:hello?period=3000"/> <setHeader name="url"><constant>www.google.es</constant></setHeader> <log message="{{example}}"/> <!-- It logs: http://www.google.es/ --> <toD uri="example"/> <!-- It resolves: http://${headers.url} instead of http://www.google.es/ --> </route> </camelContext> But if i do a kind of a workarround like this， it works:...<camelContext id="example" xmlns="http://camel.apache.org/schema/spring"> <propertyPlaceholder id="myProperties" location="classpath:etc/uri.properties"/> <route id="test"> <from uri="timer:hello?period=3000"/> <setHeader name="url"><constant>www.google.es</constant></setHeader> <setHeader name="workarround"><simple>{{example}}</simple></setHeader> <toD uri="${headers.workarround}"/> <!-- It now resolves: http://www.google.es --> </route> </camelContext>,Hide Permalink Chandrakant Hardahe added a comment - 20/May/20 08:57 Hi， I'm working on this Show Chandrakant Hardahe added a comment - 20/May/20 08:57 Hi， I'm working on this Hide Permalink Chandrakant Hardahe added a comment - 21/May/20 06:08 Andreu Font Bardolet， isn't it <toD uri="example"/> ?? Show Chandrakant Hardahe added a comment - 21/May/20 06:08 Andreu Font Bardolet ， isn't it <toD uri=" example "/> ?? Hide Permalink Andreu Font Bardolet added a comment - 21/May/20 16:39 Sorry， I had problems writing an example in Jira it autoremoved some characters， I just discovered it has a codeblock funcion: In response of your question， it is: <toD uri="{{example}}"/> To give more clarity， here is a full rewrite of the example I have post the first time: In a etc/uri.properties file: example=http://${headers.url} In camel context xml: <camelContext id="example" xmlns="http://camel.apache.org/schema/spring"> <propertyPlaceholder id="myProperties" location="classpath:etc/uri.properties"/> <route id="test"> <from uri="timer:hello?period=3000"/> <setHeader name="url"><constant>www.google.es</constant></setHeader> <log message="{{example}}"/> <!-- it logs: http://www.google.es --> <toD uri="{{example}}"/> <!-- It resolves: http://${headers.url} --> </route> </camelContext> A way to workarround the issue， is making a camel context like this: <camelContext id="example" xmlns="http://camel.apache.org/schema/spring"> <propertyPlaceholder id="myProperties" location="classpath:etc/uri.properties"/> <route id="test"> <from uri="timer:hello?period=3000"/> <setHeader name="url"><constant>www.google.es</constant></setHeader> <log message="{{example}}"/> <!-- it logs: http://www.google.es --> <setHeader name="workarround"><simple>{{example}}</simple></setHeader> <toD uri="${headers.workarround}"/> <!-- It resolves: http://www.google.es --> </route> </camelContext> Sorry for the poor fisrst message， It was my first time Show Andreu Font Bardolet added a comment - 21/May/20 16:39 Sorry， I had problems writing an example in Jira it autoremoved some characters， I just discovered it has a codeblock funcion: In response of your question， it is: <toD uri= "{{example}}" /> To give more clarity， here is a full rewrite of the example I have post the first time: In a etc/uri.properties file: example=http: //${headers.url} In camel context xml: <camelContext id= "example" xmlns= "http: //camel.apache.org/schema/spring" > <propertyPlaceholder id= "myProperties" location= "classpath:etc/uri.properties" /> <route id= "test" > <from uri= "timer:hello?period=3000" /> <setHeader name= "url" ><constant>www.google.es</constant></setHeader> <log message= "{{example}}" /> <!-- it logs: http: //www.google.es --> <toD uri= "{{example}}" /> <!-- It resolves: http: //${headers.url} --> </route> </camelContext> A way to workarround the issue， is making a camel context like this: <camelContext id= "example" xmlns= "http: //camel.apache.org/schema/spring" > <propertyPlaceholder id= "myProperties" location= "classpath:etc/uri.properties" /> <route id= "test" > <from uri= "timer:hello?period=3000" /> <setHeader name= "url" ><constant>www.google.es</constant></setHeader> <log message= "{{example}}" /> <!-- it logs: http: //www.google.es --> <setHeader name= "workarround" ><simple>{{example}}</simple></setHeader> <toD uri= "${headers.workarround}" /> <!-- It resolves: http: //www.google.es --> </route> </camelContext> Sorry for the poor fisrst message， It was my first time Hide Permalink Chandrakant Hardahe added a comment - 21/May/20 20:17 Thanks for the correction Does it log [http://[www.google.es|http://[www.google.es/] or {{example}}， <log message="example"/> <!-- it logs: http://www.google.es --> in 3.1 there are some changes[1] have been done for property resolution inside definitions I'm using 3.1 and it's logging {{example}} [1] https://issues.apache.org/jira/browse/CAMEL-14445 Show Chandrakant Hardahe added a comment - 21/May/20 20:17 Thanks for the correction Does it log [http://[www.google.es|http://[www.google.es/] or {{ example }}， <log message=" example "/> <!-- it logs: http://www.google.es --> in 3.1 there are some changes [1] have been done for property resolution inside definitions I'm using 3.1 and it's logging {{ example }} [1] https://issues.apache.org/jira/browse/CAMEL-14445 Hide Permalink Claus Ibsen added a comment - 22/May/20 18:34 Thanks Andreu for reporting and Chandrakant for looking into this. Show Claus Ibsen added a comment - 22/May/20 18:34 Thanks Andreu for reporting and Chandrakant for looking into this.
CAMEL-15086,Unassigned,2020-05-19T12:15:52+0000,1589876152， where 1589876152 is the epoch,Hello when i try to use args/args option with concurrentConsumers > 1 i get this exception from("rabbitmq:test?queue=test&arg.queue.x-max-priority=10&prefetchEnabled=true&prefetchCount=10&concurrentConsumers=2") .to("log:cheese");java.io.IOException: null at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:129) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:125) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQChannel.exnWrappingRpc(AMQChannel.java:147) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.ChannelN.queueDeclare(ChannelN.java:968) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.recovery.AutorecoveringChannel.queueDeclare(AutorecoveringChannel.java:333) ~[amqp-client-5.7.3.jar:5.7.3] at org.apache.camel.component.rabbitmq.RabbitMQDeclareSupport.declareAndBindQueue(RabbitMQDeclareSupport.java:132) ~[camel-rabbitmq-3.3.0.jar:3.3.0] at org.apache.camel.component.rabbitmq.RabbitMQDeclareSupport.declareAndBindExchangeWithQueue(RabbitMQDeclareSupport.java:55) ~[camel-rabbitmq-3.3.0.jar:3.3.0] at org.apache.camel.component.rabbitmq.RabbitMQDeclareSupport.declareAndBindExchangesAndQueuesUsing(RabbitMQDeclareSupport.java:36) ~[camel-rabbitmq-3.3.0.jar:3.3.0] at org.apache.camel.component.rabbitmq.RabbitMQEndpoint.declareExchangeAndQueue(RabbitMQEndpoint.java:243) ~[camel-rabbitmq-3.3.0.jar:3.3.0] at org.apache.camel.component.rabbitmq.RabbitConsumer.openChannel(RabbitConsumer.java:353) ~[camel-rabbitmq-3.3.0.jar:3.3.0] at org.apache.camel.component.rabbitmq.RabbitConsumer.reconnect(RabbitConsumer.java:324) ~[camel-rabbitmq-3.3.0.jar:3.3.0] at org.apache.camel.component.rabbitmq.RabbitMQConsumer$StartConsumerCallable.call(RabbitMQConsumer.java:221) [camel-rabbitmq-3.3.0.jar:3.3.0] at org.apache.camel.component.rabbitmq.RabbitMQConsumer$StartConsumerCallable.call(RabbitMQConsumer.java:201) [camel-rabbitmq-3.3.0.jar:3.3.0] at java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_201] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_201] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_201] at java.lang.Thread.run(Thread.java:748) [na:1.8.0_201]Caused by: com.rabbitmq.client.ShutdownSignalException: channel error; protocol method: #method<channel.close>(reply-code=406， reply-text=PRECONDITION_FAILED - inequivalent arg 'x-max-priority' for queue 'test' in vhost '/': received none but current is the value '10' of type 'signedint'， class-id=50， method-id=10) at com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:66) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:36) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:502) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQChannel.privateRpc(AMQChannel.java:293) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQChannel.exnWrappingRpc(AMQChannel.java:141) ~[amqp-client-5.7.3.jar:5.7.3] ... 14 common frames omittedCaused by: com.rabbitmq.client.ShutdownSignalException: channel error; protocol method: #method<channel.close>(reply-code=406， reply-text=PRECONDITION_FAILED - inequivalent arg 'x-max-priority' for queue 'test' in vhost '/': received none but current is the value '10' of type 'signedint'， class-id=50， method-id=10) at com.rabbitmq.client.impl.ChannelN.asyncShutdown(ChannelN.java:522) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.ChannelN.processAsync(ChannelN.java:346) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQChannel.handleCompleteInboundCommand(AMQChannel.java:182) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQChannel.handleFrame(AMQChannel.java:114) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQConnection.readFrame(AMQConnection.java:672) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQConnection.access$300(AMQConnection.java:48) ~[amqp-client-5.7.3.jar:5.7.3] at com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:599) ~[amqp-client-5.7.3.jar:5.7.3] ... 1 common frames omittedThanks for the help,Hide Permalink Andrea Cosentino added a comment - 19/May/20 12:15 There is already another issue for this. Show Andrea Cosentino added a comment - 19/May/20 12:15 There is already another issue for this. Hide Permalink michael elbaz added a comment - 19/May/20 12:50 - edited A ok sorry Show michael elbaz added a comment - 19/May/20 12:50 - edited A ok sorry Hide Permalink Claus Ibsen added a comment - 20/May/20 04:54 Ah I got a hunch that something may have been wrong when it was 2+ consumers. So I took a look and found a potential problem with the args being removed after setting for 1st consumer. So I have a fix in for next release. Show Claus Ibsen added a comment - 20/May/20 04:54 Ah I got a hunch that something may have been wrong when it was 2+ consumers. So I took a look and found a potential problem with the args being removed after setting for 1st consumer. So I have a fix in for next release. Hide Permalink michael elbaz added a comment - 21/May/20 07:12 - edited Claus Ibsen thanks for feedback. Don't know if it's related or if i'm doing something wrong but this code not working (using EndpointRouteBuilder) public class CcamRoute extends EndpointRouteBuilder { @Override public void configure() throws Exception { from(rabbit()).log("log:something"); } private EndpointConsumerBuilder rabbit() { return rabbitmq("test") .queue("test") .advanced() // .args(Collections.singletonMap("x-max-priority"， "10")) .args(Collections.singletonMap("arg.queue.x-max-priority"， "10")); } } Show michael elbaz added a comment - 21/May/20 07:12 - edited Claus Ibsen thanks for feedback. Don't know if it's related or if i'm doing something wrong but this code not working (using EndpointRouteBuilder) public class CcamRoute extends EndpointRouteBuilder { @Override public void configure() throws Exception { from(rabbit()).log( "log:something" ); } private EndpointConsumerBuilder rabbit() { return rabbitmq( "test" ) .queue( "test" ) .advanced() // .args(Collections.singletonMap( "x-max-priority" ， "10" )) .args(Collections.singletonMap( "arg.queue.x-max-priority" ， "10" )); } } Hide Permalink Claus Ibsen added a comment - 21/May/20 08:05 Yeah wait for 3.4 release Show Claus Ibsen added a comment - 21/May/20 08:05 Yeah wait for 3.4 release Hide Permalink michael elbaz added a comment - 21/May/20 19:48 Ok thanks Show michael elbaz added a comment - 21/May/20 19:48 Ok thanks
CAMEL-15085,Claus Ibsen,2020-05-19T08:42:27+0000,1589863347， where 1589863347 is the epoch,So you can set this in one property instead of changing all the SQL queries,There are no comments yet on this issue.
CAMEL-15084,Claus Ibsen,2020-05-24T09:01:07+0000,1590296467， where 1590296467 is the epoch,We can make health base/support classes more optional as we did with camel-cloud etc. And move it out of camel-base. As there is some base/support classes that 3rd party may reuse. We can then make it more auto-detectable and so if you have camel-health on classpath then all the health check wiring kicks in.,Hide Permalink Claus Ibsen added a comment - 24/May/20 09:01 camel-spring-boot and camel-karaf will include camel-health out of the box. camel-main does not， you can then add it to have health check integrated， like for other extensions. Show Claus Ibsen added a comment - 24/May/20 09:01 camel-spring-boot and camel-karaf will include camel-health out of the box. camel-main does not， you can then add it to have health check integrated， like for other extensions.
CAMEL-15083,Unassigned,2020-05-18T17:32:22+0000,1589808742， where 1589808742 is the epoch,See tweet for issuehttps://twitter.com/snicoll/status/1262396233034928128?s=20On the start.spring.io we should see if we can use BOM for camel spring boot dependencies instead so its like the examples with 2 BOMs for spring-boot and another for camel.,There are no comments yet on this issue.
CAMEL-15082,Claus Ibsen,2020-05-18T17:47:22+0000,1589809642， where 1589809642 is the epoch,,Hide Permalink Claus Ibsen added a comment - 18/May/20 17:47 This now also supports different bean scopes - singleton， prototype， request etc so the options are set either once or per usage etc. Show Claus Ibsen added a comment - 18/May/20 17:47 This now also supports different bean scopes - singleton， prototype， request etc so the options are set either once or per usage etc.
CAMEL-15081,Claus Ibsen,2020-05-26T11:38:49+0000,1590478729， where 1590478729 is the epoch,There are some health configuration options you can set. We should make it easy to configure in camel-main， so you can configure them across runtimes.,Hide Permalink Claus Ibsen added a comment - 26/May/20 11:38 The current camel SB health check has too many configurations so we are going to reduce this and make it similar across runtimes. Show Claus Ibsen added a comment - 26/May/20 11:38 The current camel SB health check has too many configurations so we are going to reduce this and make it similar across runtimes.
CAMEL-15080,Claus Ibsen,2020-05-18T12:47:32+0000,1589791652， where 1589791652 is the epoch,The table in the src/main/docs is not updated. The maven tooling needs to be fixed for this,There are no comments yet on this issue.
CAMEL-15079,Claus Ibsen,2020-05-18T12:46:14+0000,1589791574， where 1589791574 is the epoch,Currently it does not accept parameters. But we can add that as we have it for constructors now. So there can be some code reuse.,There are no comments yet on this issue.
CAMEL-15078,Claus Ibsen,2020-05-18T11:25:41+0000,1589786741， where 1589786741 is the epoch,,There are no comments yet on this issue.
CAMEL-15077,Claus Ibsen,2020-05-18T10:49:41+0000,1589784581， where 1589784581 is the epoch,This tend to cause upgrade issues with SB as they change their actutator API in non backwards change.Also this information is not needed as part of actuating for health checks etc. And the details are in the management api anyway. And other runtimes dont provide this either， so lets keep this easier for us to maintain.,There are no comments yet on this issue.
CAMEL-15076,Claus Ibsen,2020-05-18T09:36:37+0000,1589780197， where 1589780197 is the epoch,Not sure if this is a genuine issue or my misunderstanding of how things are supposed to work. I was experimenting with camel-rest-openapi and had a little problem.The docs state that REST capable components can be discovered from the registry. Is the expectation from users that the components are initialised in some way before they are bound to the registry?E.g if I do this:NettyHttpComponent component = new NettyHttpComponent();camelContext.getRegistry().bind("netty-http"， component);Then I eventually end up hitting an NPE because NettyHttpComponent does the following in createProducer， and getCamelContext() returns null:RestConfiguration config = CamelContextHelper.getRestConfiguration(getCamelContext()， "netty-http");It's easily fixed by doing setCamelContext on the component before binding it to the registry. But， do we expect users to do this themselves? Or should camel take care of doing this after it has discovered the component in the registry (E.g after this)?,Hide Permalink Claus Ibsen added a comment - 18/May/20 09:36 You should use addComponent on CamelContext to add it as a component Show Claus Ibsen added a comment - 18/May/20 09:36 You should use addComponent on CamelContext to add it as a component Hide Permalink Claus Ibsen added a comment - 18/May/20 11:17 But yeah we can make the fallback registry automatic inject camel context if its aware - then there is no surprises Show Claus Ibsen added a comment - 18/May/20 11:17 But yeah we can make the fallback registry automatic inject camel context if its aware - then there is no surprises
CAMEL-15075,Unassigned,2020-05-18T08:04:30+0000,1589774670， where 1589774670 is the epoch,The ssl parameters in kafka can be set using a camel SSLContextParameter object (see CAMEL-10705). But it doesn't work as expected.Camel allows many ways to specify a keystore location， ie a file path， a class path or an URL of the resource. Camel tries all possible ways to read the keystore. (Eg SSLContextParameters.getTrustManagers().getKeyStore().getResource()).For kafka this resolution doesn't take place. Kafka receives just the raw resource string (org.apache.camel.component.kafka.KafkaConfiguration:511): addPropertyIfNotNull(props， SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG， keyStore.getResource());Kafka has a different expectation on this location from camel. In particular setting the camel keystore resource to a classpath location doesn't work for kafka (see also KAFKA-7685 for an attempt to support classpath resources).,Hide Permalink Claus Ibsen added a comment - 18/May/20 08:04 Thanks can you check Camel 3.3.0 release. If its still a problem then we should add a note that loading from classpath is a limitation in Kafka (Camel is just the facade on top). And that the location should be a file based resource. Show Claus Ibsen added a comment - 18/May/20 08:04 Thanks can you check Camel 3.3.0 release. If its still a problem then we should add a note that loading from classpath is a limitation in Kafka (Camel is just the facade on top). And that the location should be a file based resource. Hide Permalink Peter Kullmann added a comment - 18/May/20 11:44 I can see no difference in 3.3.0. Show Peter Kullmann added a comment - 18/May/20 11:44 I can see no difference in 3.3.0. Hide Permalink Claus Ibsen added a comment - 18/May/20 13:53 Okay so it looks like it just uses the SSLContextParameters as parameters to set them via that. And then copy its configuration into karaf configuration. So can you provide more details what you think is wrong such as sample code， configuration， a reproducer etc. Show Claus Ibsen added a comment - 18/May/20 13:53 Okay so it looks like it just uses the SSLContextParameters as parameters to set them via that. And then copy its configuration into karaf configuration. So can you provide more details what you think is wrong such as sample code， configuration， a reproducer etc. Hide Permalink Peter Kullmann added a comment - 20/May/20 15:14 I think it's easy to reproduce: Just take the example in the docs: // Configure the SSLContextParameters object KeyStoreParameters ksp = new KeyStoreParameters(); ksp.setResource("/path/to/keystore.jks"); ksp.setPassword("changeit"); KeyManagersParameters kmp = new KeyManagersParameters(); kmp.setKeyStore(ksp); kmp.setKeyPassword("changeit"); SSLContextParameters scp = new SSLContextParameters(); scp.setKeyManagers(kmp); // Bind this SSLContextParameters into the Camel registry Registry registry = createCamelRegistry(); registry.bind("ssl"， scp); // Configure the camel context DefaultCamelContext camelContext = new DefaultCamelContext(registry); camelContext.addRoutes(new RouteBuilder() { @Override public void configure() throws Exception { from("kafka:" + TOPIC + "?brokers=localhost:{{kafkaPort}}" + // Setup the topic and broker address "&groupId=A" + // The consumer processor group ID "&sslContextParameters=#ssl" + // The security protocol "&securityProtocol=SSL) // Reference the SSL configuration .to("mock:result"); } }); The /path/to/keystore.jks should point to a classpath resource. Then kafka will complain: [main] ERROR org.apache.kafka.common.security.ssl.SslEngineBuilder - Modification time of key store could not be obtained: blabla java.nio.file.NoSuchFileException: blabla at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:79) at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97) I tried to produce a small running example but the archetype produces non compilable code and gave up: Main main = new Main(); main.addRouteBuilder(new MyRouteBuilder()); main.run(args); I think， it would be enough to mention this in the docs. Show Peter Kullmann added a comment - 20/May/20 15:14 I think it's easy to reproduce: Just take the example in the docs: // Configure the SSLContextParameters object KeyStoreParameters ksp = new KeyStoreParameters(); ksp.setResource( "/path/to/keystore.jks" ); ksp.setPassword( "changeit" ); KeyManagersParameters kmp = new KeyManagersParameters(); kmp.setKeyStore(ksp); kmp.setKeyPassword( "changeit" ); SSLContextParameters scp = new SSLContextParameters(); scp.setKeyManagers(kmp); // Bind this SSLContextParameters into the Camel registry Registry registry = createCamelRegistry(); registry.bind( "ssl" ， scp); // Configure the camel context DefaultCamelContext camelContext = new DefaultCamelContext(registry); camelContext.addRoutes( new RouteBuilder() { @Override public void configure() throws Exception { from( "kafka:" + TOPIC + "?brokers=localhost:{{kafkaPort}}" + // Setup the topic and broker address "&groupId=A" + // The consumer processor group ID "&sslContextParameters=#ssl" + // The security protocol "&securityProtocol=SSL) // Reference the SSL configuration .to( "mock:result" ); } }); The /path/to/keystore.jks should point to a classpath resource. Then kafka will complain: [main] ERROR org.apache.kafka.common.security.ssl.SslEngineBuilder - Modification time of key store could not be obtained: blabla java.nio.file.NoSuchFileException: blabla at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:79) at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97) I tried to produce a small running example but the archetype produces non compilable code and gave up: Main main = new Main(); main.addRouteBuilder( new MyRouteBuilder()); main.run(args); I think， it would be enough to mention this in the docs. Hide Permalink Claus Ibsen added a comment - 22/May/20 12:15 Ah okay but Camel's SSLContextParameters uses classpath as default， so change your example to use file:xxx in the configuration. Show Claus Ibsen added a comment - 22/May/20 12:15 Ah okay but Camel's SSLContextParameters uses classpath as default， so change your example to use file:xxx in the configuration. Hide Permalink Claus Ibsen added a comment - 25/May/20 19:04 Okay so I tried the camel-kafka-example from camel， and copied over a keystore.jks file and modified the example to use SSL and read the keystore file. So when I type in the correct file path then its loaded by kafka. Show Claus Ibsen added a comment - 25/May/20 19:04 Okay so I tried the camel-kafka-example from camel， and copied over a keystore.jks file and modified the example to use SSL and read the keystore file. So when I type in the correct file path then its loaded by kafka. Hide Permalink Peter Kullmann added a comment - 26/May/20 06:04 The point is: The javadoc in KeyStoreParameters.setResource says "Sets the optional file path， class path resource， or URL of the resource used to load the key store.". But only file path works when used for kafka. Show Peter Kullmann added a comment - 26/May/20 06:04 The point is: The javadoc in KeyStoreParameters.setResource says "Sets the optional file path， class path resource， or URL of the resource used to load the key store.". But only file path works when used for kafka. Hide Permalink Claus Ibsen added a comment - 26/May/20 07:28 Thats a generic javadoc. I added a note in the kafka docs for Camel 3.4 Show Claus Ibsen added a comment - 26/May/20 07:28 Thats a generic javadoc. I added a note in the kafka docs for Camel 3.4
CAMEL-15074,Unassigned,2020-05-22T19:09:02+0000,1590160142， where 1590160142 is the epoch,On the front page we have links for each sub project documentation.We should have a single landing page for examples that tell the user where to find examples for each sub project， eg point to examples per sub project page.And this page then tells a bit about the sub project and where the examples are on github， and that there is a tag per release.And the front page， could have a link to Examples like we have for documentationDocumentation | Examples,Hide Permalink Aashna Jena added a comment - 22/May/20 19:09 I can include this in the projects page， as discussed in issue 14994， and we can do something similar but more concise on the front page. Would that be fine? Show Aashna Jena added a comment - 22/May/20 19:09 I can include this in the projects page， as discussed in issue 14994， and we can do something similar but more concise on the front page. Would that be fine? Hide Permalink Claus Ibsen added a comment - 24/May/20 07:55 Yeah good idea Show Claus Ibsen added a comment - 24/May/20 07:55 Yeah good idea Hide Permalink Claus Ibsen added a comment - 06/Aug/20 08:30 There are links now https://camel.apache.org/docs/ Show Claus Ibsen added a comment - 06/Aug/20 08:30 There are links now https://camel.apache.org/docs/
CAMEL-15073,Zoran Regvart,2020-05-16T19:02:15+0000,1589641335， where 1589641335 is the epoch,The version picker is 3.2.x - it should be updated to 3.3.x in the component reference guide. And maybe elsewhere.You can do a git grep "3.2.x" to find old spots.,Hide Permalink Claus Ibsen added a comment - 16/May/20 19:02 Zoran Regvart is it just to change the playbook files? antora-playbook-xrefcheck.yml: branches: master， camel-3.2.x antora-playbook-xrefcheck.yml: branches: master， camel-3.2.x antora-playbook-xrefcheck.yml: branches: master， camel-3.2.x antora-playbook-xrefcheck.yml: branches: master， camel-3.2.x， camel-2.x antora-playbook.yml: branches: camel-3.2.x Show Claus Ibsen added a comment - 16/May/20 19:02 Zoran Regvart is it just to change the playbook files? antora-playbook-xrefcheck.yml: branches: master， camel-3.2.x antora-playbook-xrefcheck.yml: branches: master， camel-3.2.x antora-playbook-xrefcheck.yml: branches: master， camel-3.2.x antora-playbook-xrefcheck.yml: branches: master， camel-3.2.x， camel-2.x antora-playbook.yml: branches: camel-3.2.x Hide Permalink Zoran Regvart added a comment - 20/May/20 07:54 Should be just antora-playbook.yml that needs to change， I'd run a local build just to make sure links are not broken. Show Zoran Regvart added a comment - 20/May/20 07:54 Should be just antora-playbook.yml that needs to change， I'd run a local build just to make sure links are not broken.
CAMEL-15072,Claus Ibsen,2020-05-16T17:31:02+0000,1589635862， where 1589635862 is the epoch,After the 3.3 release then the component list on master shows all components as preview， but the new in 3.3 were Preview. This is because the tool just go 1 version back， eg on master its 3.4-SNAPSHOT.So we should make it 3.3 = preview， 3.4 = preview， 3.5=stable by default.,There are no comments yet on this issue.
CAMEL-15071,Unassigned,2020-05-16T07:28:01+0000,1589599681， where 1589599681 is the epoch,09:25:17 asciidoctor: WARNING: content-enricher.adoc: line 48: tag 'example' not found in include file: modules/eips/examples/core/camel-core/src/test/java/org/apache/camel/processor/TransformViaDSLTest.java09:25:17 asciidoctor: WARNING: content-enricher.adoc: line 56: tag 'example' not found in include file: modules/eips/examples/core/camel-core/src/test/java/org/apache/camel/processor/TransformTest.java09:25:39 asciidoctor: WARNING: content-enricher.adoc: line 48: tag 'example' not found in include file: modules/eips/examples/core/camel-core/src/test/java/org/apache/camel/processor/TransformViaDSLTest.java09:25:39 asciidoctor: WARNING: content-enricher.adoc: line 56: tag 'example' not found in include file: modules/eips/examples/core/camel-core/src/test/java/org/apache/camel/processor/TransformTest.java09:26:35 asciidoctor: WARNING: kotlin.adoc: line 56: no callout found for <1>09:26:35 asciidoctor: WARNING: kotlin.adoc: line 57: no callout found for <2>09:26:35 asciidoctor: WARNING: kotlin.adoc: line 58: no callout found for <3>,There are no comments yet on this issue.
CAMEL-15070,Zoran Regvart,2020-05-15T16:41:50+0000,1589546510， where 1589546510 is the epoch,New feature part is missing in Resolve issues list on the page https://camel.apache.org/releases/release-3.3.0/,Hide Permalink Claus Ibsen added a comment - 15/May/20 16:41 Its not a LTS release. You can see the JIRA tickets whats changed. For LTS releases we will do separate blog posts， and also sometimes for other releases. But not for 3.3. 3.4 comes next month. Show Claus Ibsen added a comment - 15/May/20 16:41 Its not a LTS release. You can see the JIRA tickets whats changed. For LTS releases we will do separate blog posts， and also sometimes for other releases. But not for 3.3. 3.4 comes next month. Hide Permalink Claus Ibsen added a comment - 16/May/20 19:14 I wrote a blog entry of whats new in 3.3 https://camel.apache.org/blog/Camel33-Whatsnew/ Show Claus Ibsen added a comment - 16/May/20 19:14 I wrote a blog entry of whats new in 3.3 https://camel.apache.org/blog/Camel33-Whatsnew/ Hide Permalink Zoran Regvart added a comment - 18/May/20 10:31 Content of that page is generated from Jira. If there were no Jira iisues with type set to New feature it will not be listed there. Show Zoran Regvart added a comment - 18/May/20 10:31 Content of that page is generated from Jira. If there were no Jira iisues with type set to New feature it will not be listed there. Hide Permalink Marat Gubaidullin added a comment - 19/May/20 16:53 Zoran Regvart thats why I have opened this ticket. Jira issues contains New features but there is no New features on the site https://issues.apache.org/jira/secure/ReleaseNote.jspa?version=12347798&projectId=12311211 Show Marat Gubaidullin added a comment - 19/May/20 16:53 Zoran Regvart thats why I have opened this ticket. Jira issues contains New features but there is no New features on the site https://issues.apache.org/jira/secure/ReleaseNote.jspa?version=12347798&projectId=12311211 Hide Permalink Zoran Regvart added a comment - 19/May/20 18:09 Seems like we're fetching only first 50 issues of a release Show Zoran Regvart added a comment - 19/May/20 18:09 Seems like we're fetching only first 50 issues of a release Hide Permalink Zoran Regvart added a comment - 19/May/20 18:54 Thanks Marat Gubaidullin for bringing this to our attention Show Zoran Regvart added a comment - 19/May/20 18:54 Thanks Marat Gubaidullin for bringing this to our attention
CAMEL-15069,Claus Ibsen,2020-05-17T08:45:55+0000,1589690755， where 1589690755 is the epoch,Spring Boot 2.3 has just been released.Upgrade guidehttps://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.3-Release-Notes,Hide Permalink Claus Ibsen added a comment - 17/May/20 08:45 Okay there is a NPE in javac compiler with SB 2.3.0. So the upgrade is a bit more difficult. Show Claus Ibsen added a comment - 17/May/20 08:45 Okay there is a NPE in javac compiler with SB 2.3.0. So the upgrade is a bit more difficult. Hide Permalink Claus Ibsen added a comment - 17/May/20 08:47 [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project camel-spring-boot: Compilation failure: Compilation failure: [ERROR] /Users/davsclaus/workspace/camel-spring-boot/core/camel-spring-boot/src/main/java/org/apache/camel/spring/boot/actuate/endpoint/CamelRoutesEndpointAutoConfiguration.java:[21，72] error: cannot find symbol [ERROR] symbol: class ConditionalOnEnabledEndpoint [ERROR] location: package org.springframework.boot.actuate.autoconfigure.endpoint.condition [ERROR] /Users/davsclaus/workspace/camel-spring-boot/core/camel-spring-boot/src/main/java/org/apache/camel/spring/boot/actuate/endpoint/CamelRouteControllerEndpointAutoConfiguration.java:[21，72] error: cannot find symbol [ERROR] symbol: class ConditionalOnEnabledEndpoint [ERROR] location: package org.springframework.boot.actuate.autoconfigure.endpoint.condition [ERROR] /Users/davsclaus/workspace/camel-spring-boot/core/camel-spring-boot/src/main/java/org/apache/camel/spring/boot/actuate/endpoint/CamelRoutesEndpointAutoConfiguration.java:[49，5] error: cannot find symbol [ERROR] symbol: class ConditionalOnEnabledEndpoint [ERROR] location: class CamelRoutesEndpointAutoConfiguration [ERROR] /Users/davsclaus/workspace/camel-spring-boot/core/camel-spring-boot/src/main/java/org/apache/camel/spring/boot/actuate/endpoint/CamelRouteControllerEndpointAutoConfiguration.java:[40，5] error: cannot find symbol [ERROR] symbol: class ConditionalOnEnabledEndpoint [ERROR] location: class CamelRouteControllerEndpointAutoConfiguration [ERROR] -> [Help 1] Show Claus Ibsen added a comment - 17/May/20 08:47 [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:compile (default-compile) on project camel-spring-boot: Compilation failure: Compilation failure: [ERROR] /Users/davsclaus/workspace/camel-spring-boot/core/camel-spring-boot/src/main/java/org/apache/camel/spring/boot/actuate/endpoint/CamelRoutesEndpointAutoConfiguration.java: [21，72] error: cannot find symbol [ERROR] symbol: class ConditionalOnEnabledEndpoint [ERROR] location: package org.springframework.boot.actuate.autoconfigure.endpoint.condition [ERROR] /Users/davsclaus/workspace/camel-spring-boot/core/camel-spring-boot/src/main/java/org/apache/camel/spring/boot/actuate/endpoint/CamelRouteControllerEndpointAutoConfiguration.java: [21，72] error: cannot find symbol [ERROR] symbol: class ConditionalOnEnabledEndpoint [ERROR] location: package org.springframework.boot.actuate.autoconfigure.endpoint.condition [ERROR] /Users/davsclaus/workspace/camel-spring-boot/core/camel-spring-boot/src/main/java/org/apache/camel/spring/boot/actuate/endpoint/CamelRoutesEndpointAutoConfiguration.java: [49，5] error: cannot find symbol [ERROR] symbol: class ConditionalOnEnabledEndpoint [ERROR] location: class CamelRoutesEndpointAutoConfiguration [ERROR] /Users/davsclaus/workspace/camel-spring-boot/core/camel-spring-boot/src/main/java/org/apache/camel/spring/boot/actuate/endpoint/CamelRouteControllerEndpointAutoConfiguration.java: [40，5] error: cannot find symbol [ERROR] symbol: class ConditionalOnEnabledEndpoint [ERROR] location: class CamelRouteControllerEndpointAutoConfiguration [ERROR] -> [Help 1] Hide Permalink Claus Ibsen added a comment - 17/May/20 08:47 https://bugs.openjdk.java.net/browse/JDK-8216202 <forceJavacCompilerUse>true</forceJavacCompilerUse> Show Claus Ibsen added a comment - 17/May/20 08:47 https://bugs.openjdk.java.net/browse/JDK-8216202 <forceJavacCompilerUse>true</forceJavacCompilerUse>
CAMEL-15068,Claus Ibsen,2020-05-15T08:12:50+0000,1589515970， where 1589515970 is the epoch,We should make an example using endpoint-dsl that are not in spring-boot， but in the camel-examples repo.https://github.com/apache/camel-examples,There are no comments yet on this issue.
CAMEL-15067,Claus Ibsen,2020-05-15T07:52:29+0000,1589514749， where 1589514749 is the epoch,When using camel-test modules then we bring in camel-management and therefore enable JMX out of the box. But lets make this optional as the end user should decide if JMX should be in use or not by adding camel-management as dependency.,There are no comments yet on this issue.
CAMEL-15066,Claus Ibsen,2020-05-15T07:41:24+0000,1589514084， where 1589514084 is the epoch,See CAMEL-15053This dont normally happen now as bean introspection is eager created. But nevertheless we should fix the code so the stackoverflow wont happen.,There are no comments yet on this issue.
CAMEL-15065,Claus Ibsen,2020-05-15T07:04:47+0000,1589511887， where 1589511887 is the epoch,We have some components that can do multi values， so you can repeat the option by with new values， eg so its built as a map.We should make the endpoint dsl aware of this and build this up as a map.,There are no comments yet on this issue.
CAMEL-15064,Omar Al-Safi,2020-07-18T20:44:09+0000,1595090649， where 1595090649 is the epoch,With Camel 3.2.0， my route does not receive the messages from Google Pubsub. The exact same route works well if I downgrade to 3.1.0.I've created following test case to reproduce easily the issue:@Componentpublic class SimplePubsubRouteBuilder extends RouteBuilder { @Override public void configure() throws Exception { from("google-pubsub://project-id:subs-name") .to("log:myLog?showHeaders=true"); }}Result with Camel 3.2.0: nothing happens， no errors even with DEBUG log level.Result with Camel 3.1.0: error 404 as expected since Pubsub subscription path is invalid.I've tried to fix the issue myself with no success. But by tracing with debugger， I think the issue is because of bad version of Guava library.,Hide Permalink Ramesh Venkitaswaran added a comment - 18/Jul/20 20:44 This issue still seems to persist with camel 3.4.1 When I don't pass GOOGLE_APPLICATION_CREDENTIALS， it silently comes up without any errors， whereas， with Camel 3.1.0， it errors out as expected Show Ramesh Venkitaswaran added a comment - 18/Jul/20 20:44 This issue still seems to persist with camel 3.4.1 When I don't pass GOOGLE_APPLICATION_CREDENTIALS， it silently comes up without any errors， whereas， with Camel 3.1.0， it errors out as expected Hide Permalink Omar Al-Safi added a comment - 20/Jul/20 08:57 Hi Ramesh Venkitaswaran， is pretty weird indeed， I have tested here on my end and I get the following in the logs if I don't pass `GOOGLE_APPLICATION_CREDENTIALS`: 2020-07-20 10:52:56，365 [ngupInterceptor] INFO DefaultMainShutdownStrategy - Received hang up - stopping the main instance. 2020-07-20 10:52:56，366 [main ] INFO AbstractCamelContext - Apache Camel 3.4.1 (camel-1) is shutting down 2020-07-20 10:52:56，365 [nsumer[testSub]] ERROR GooglePubsubConsumer - Failure getting messages from PubSub java.lang.IllegalStateException: Expected the service InnerService [FAILED] to be RUNNING， but the service has FAILED at com.google.common.util.concurrent.AbstractService.checkCurrentState(AbstractService.java:366) ~[guava-28.2-jre.jar:?] at com.google.common.util.concurrent.AbstractService.awaitRunning(AbstractService.java:302) ~[guava-28.2-jre.jar:?] at com.google.api.core.AbstractApiService.awaitRunning(AbstractApiService.java:96) ~[api-common-1.8.1.jar:?] at org.apache.camel.component.google.pubsub.GooglePubsubConsumer$SubscriberWrapper.asynchronousPull(GooglePubsubConsumer.java:131) [camel-google-pubsub-3.4.1.jar:3.4.1] at org.apache.camel.component.google.pubsub.GooglePubsubConsumer$SubscriberWrapper.run(GooglePubsubConsumer.java:115) [camel-google-pubsub-3.4.1.jar:3.4.1] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_222] at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_222] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_222] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_222] at java.lang.Thread.run(Thread.java:748) [?:1.8.0_222] Caused by: java.lang.IllegalStateException: java.io.IOException: The Application Default Credentials are not available. They are available if running in Google Compute Engine. Otherwise， the environment variable GOOGLE_APPLICATION_CREDENTIALS must be defined pointing to a file defining the credentials. See https://developers.google.com/accounts/docs/application-default-credentials for more information. at com.google.cloud.pubsub.v1.Subscriber.doStart(Subscriber.java:265) ~[google-cloud-pubsub-1.102.0.jar:1.102.0] at com.google.api.core.AbstractApiService$InnerService.doStart(AbstractApiService.java:148) ~[api-common-1.8.1.jar:?] at com.google.common.util.concurrent.AbstractService.startAsync(AbstractService.java:248) ~[guava-28.2-jre.jar:?] at com.google.api.core.AbstractApiService.startAsync(AbstractApiService.java:120) ~[api-common-1.8.1.jar:?] at com.google.cloud.pubsub.v1.Subscriber.startAsync(Subscriber.java:254) ~[google-cloud-pubsub-1.102.0.jar:1.102.0] ... 7 more I could think of the logger perhaps. Is it possible if you can attach the logs from your end to check this out? Show Omar Al-Safi added a comment - 20/Jul/20 08:57 Hi Ramesh Venkitaswaran ， is pretty weird indeed， I have tested here on my end and I get the following in the logs if I don't pass `GOOGLE_APPLICATION_CREDENTIALS`: 2020-07-20 10:52:56，365 [ngupInterceptor] INFO DefaultMainShutdownStrategy - Received hang up - stopping the main instance. 2020-07-20 10:52:56，366 [main ] INFO AbstractCamelContext - Apache Camel 3.4.1 (camel-1) is shutting down 2020-07-20 10:52:56，365 [nsumer[testSub]] ERROR GooglePubsubConsumer - Failure getting messages from PubSub java.lang.IllegalStateException: Expected the service InnerService [FAILED] to be RUNNING， but the service has FAILED at com.google.common.util.concurrent.AbstractService.checkCurrentState(AbstractService.java:366) ~[guava-28.2-jre.jar:?] at com.google.common.util.concurrent.AbstractService.awaitRunning(AbstractService.java:302) ~[guava-28.2-jre.jar:?] at com.google.api.core.AbstractApiService.awaitRunning(AbstractApiService.java:96) ~[api-common-1.8.1.jar:?] at org.apache.camel.component.google.pubsub.GooglePubsubConsumer$SubscriberWrapper.asynchronousPull(GooglePubsubConsumer.java:131) [camel-google-pubsub-3.4.1.jar:3.4.1] at org.apache.camel.component.google.pubsub.GooglePubsubConsumer$SubscriberWrapper.run(GooglePubsubConsumer.java:115) [camel-google-pubsub-3.4.1.jar:3.4.1] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_222] at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_222] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_222] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_222] at java.lang. Thread .run( Thread .java:748) [?:1.8.0_222] Caused by: java.lang.IllegalStateException: java.io.IOException: The Application Default Credentials are not available. They are available if running in Google Compute Engine. Otherwise， the environment variable GOOGLE_APPLICATION_CREDENTIALS must be defined pointing to a file defining the credentials. See https: //developers.google.com/accounts/docs/application- default -credentials for more information. at com.google.cloud.pubsub.v1.Subscriber.doStart(Subscriber.java:265) ~[google-cloud-pubsub-1.102.0.jar:1.102.0] at com.google.api.core.AbstractApiService$InnerService.doStart(AbstractApiService.java:148) ~[api-common-1.8.1.jar:?] at com.google.common.util.concurrent.AbstractService.startAsync(AbstractService.java:248) ~[guava-28.2-jre.jar:?] at com.google.api.core.AbstractApiService.startAsync(AbstractApiService.java:120) ~[api-common-1.8.1.jar:?] at com.google.cloud.pubsub.v1.Subscriber.startAsync(Subscriber.java:254) ~[google-cloud-pubsub-1.102.0.jar:1.102.0] ... 7 more I could think of the logger perhaps. Is it possible if you can attach the logs from your end to check this out? Hide Permalink Ramesh Venkitaswaran added a comment - 20/Jul/20 11:11 Here are the logs from 3.1 and 3.4 and a test groovy script. The groovy version details are Groovy Version: 3.0.4 JVM: 11.0.6 Vendor: Azul Systems， Inc. OS: Mac OS X Show Ramesh Venkitaswaran added a comment - 20/Jul/20 11:11 Here are the logs from 3.1 and 3.4 and a test groovy script. The groovy version details are Groovy Version: 3.0.4 JVM: 11.0.6 Vendor: Azul Systems， Inc. OS: Mac OS X Hide Permalink Ramesh Venkitaswaran added a comment - 20/Jul/20 11:14 Camel 3.4 06:03:59.267 [Camel Thread #0 - LRUCacheFactory] DEBUG org.apache.camel.component.caffeine.lrucache.CaffeineLRUCacheFactory - Warming up LRUCache ... 06:03:59.267 [main] INFO org.apache.camel.support.LRUCacheFactory - Detected and using LRUCacheFactory: camel-caffeine-lrucache 06:03:59.456 [Camel Thread #0 - LRUCacheFactory] DEBUG org.apache.camel.component.caffeine.lrucache.CaffeineLRUCacheFactory - Warming up LRUCache complete in 194 millis 06:03:59.463 [main] DEBUG org.apache.camel.impl.engine.AbstractCamelContext - Setting up management with factory: org.apache.camel.impl.engine.DefaultManagementStrategyFactory@62d59d60 06:03:59.486 [main] DEBUG org.apache.camel.impl.engine.BaseServiceResolver - Found HealthCheckRegistry: org.apache.camel.impl.health.DefaultHealthCheckRegistry via: META-INF/services/org/apache/camel/health-check-registry 06:03:59.496 [main] DEBUG org.apache.camel.impl.engine.BaseServiceResolver - Detected and using HealthCheckRegistry: org.apache.camel.impl.health.DefaultHealthCheckRegistry@6d2d04ef 06:03:59.546 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Loading file META-INF/services/org/apache/camel/TypeConverterLoader to retrieve list of type converters， from url: jar:file:/Users/ramesh/.groovy/grapes/org.apache.camel/camel-support/jars/camel-support-3.4.0.jar!/META-INF/services/org/apache/camel/TypeConverterLoader 06:03:59.552 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Loading file META-INF/services/org/apache/camel/TypeConverterLoader to retrieve list of type converters， from url: jar:file:/Users/ramesh/.groovy/grapes/org.apache.camel/camel-base/jars/camel-base-3.4.0.jar!/META-INF/services/org/apache/camel/TypeConverterLoader 06:03:59.555 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Loading file META-INF/services/org/apache/camel/TypeConverterLoader to retrieve list of type converters， from url: jar:file:/Users/ramesh/.groovy/grapes/org.apache.camel/camel-file/jars/camel-file-3.4.0.jar!/META-INF/services/org/apache/camel/TypeConverterLoader 06:03:59.559 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Loading file META-INF/services/org/apache/camel/TypeConverterLoader to retrieve list of type converters， from url: jar:file:/Users/ramesh/.groovy/grapes/org.apache.camel/camel-xml-jaxp/jars/camel-xml-jaxp-3.4.0.jar!/META-INF/services/org/apache/camel/TypeConverterLoader 06:03:59.563 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.stream.StreamCacheConverterLoader 06:03:59.567 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.stream.StreamCacheConverterLoader loading converters 06:03:59.576 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.CamelConverterLoader 06:03:59.579 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.CamelConverterLoader loading converters 06:03:59.581 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.CollectionConverterLoader 06:03:59.584 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.CollectionConverterLoader loading converters 06:03:59.589 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.DateTimeConverterLoader 06:03:59.591 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.DateTimeConverterLoader loading converters 06:03:59.596 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.DurationConverterLoader 06:03:59.599 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.DurationConverterLoader loading converters 06:03:59.601 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.IOConverterLoader 06:03:59.605 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.IOConverterLoader loading converters 06:03:59.623 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.NIOConverterLoader 06:03:59.626 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.NIOConverterLoader loading converters 06:03:59.631 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.ObjectConverterLoader 06:03:59.633 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.ObjectConverterLoader loading converters 06:03:59.645 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.SQLConverterLoader 06:03:59.646 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.SQLConverterLoader loading converters 06:03:59.647 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.impl.converter.UriTypeConverterLoader 06:03:59.648 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.impl.converter.UriTypeConverterLoader loading converters 06:03:59.649 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.component.file.GenericFileConverterLoader 06:03:59.653 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.component.file.GenericFileConverterLoader loading converters 06:03:59.662 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.jaxp.DomConverterLoader 06:03:59.666 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.jaxp.DomConverterLoader loading converters 06:03:59.668 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.jaxp.StaxConverterLoader 06:03:59.672 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.jaxp.StaxConverterLoader loading converters 06:03:59.678 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.jaxp.StreamSourceConverterLoader 06:03:59.679 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.jaxp.StreamSourceConverterLoader loading converters 06:03:59.680 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.jaxp.XmlConverterLoader 06:03:59.685 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.jaxp.XmlConverterLoader loading converters 06:03:59.713 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.util.xml.StreamSourceConverterLoader 06:03:59.715 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.util.xml.StreamSourceConverterLoader loading converters 06:03:59.724 [main] DEBUG org.apache.camel.impl.converter.DefaultTypeConverter - Loaded 197 type converters in 0.178 seconds 06:04:00.330 [main] DEBUG org.apache.camel.impl.engine.AbstractCamelContext - Adding routes from builder: Routes: [] 06:04:00.489 [main] DEBUG org.apache.camel.impl.engine.BaseServiceResolver - Found RestRegistryFactory: org.apache.camel.component.rest.DefaultRestRegistryFactory via: META-INF/services/org/apache/camel/rest-registry-factory 06:04:00.489 [main] DEBUG org.apache.camel.impl.engine.BaseServiceResolver - Detected and using RestRegistryFactory: org.apache.camel.component.rest.DefaultRestRegistryFactory@2121d0ed 06:04:00.507 [main] DEBUG org.apache.camel.impl.engine.BaseServiceResolver - Found PropertiesComponent: org.apache.camel.component.properties.PropertiesComponent via: META-INF/services/org/apache/camel/properties-component-factory 06:04:00.524 [main] DEBUG org.apache.camel.impl.engine.BaseServiceResolver - Detected and using PropertiesComponent: org.apache.camel.component.properties.PropertiesComponent@1ee1c0cc 06:04:00.532 [main] DEBUG org.apache.camel.support.ResolverHelper - Lookup Language with name simple in registry. Found: null 06:04:00.533 [main] DEBUG org.apache.camel.support.ResolverHelper - Lookup Language with name simple-language in registry. Found: null 06:04:00.670 [main] DEBUG org.apache.camel.impl.engine.AbstractCamelContext - Using ComponentResolver: org.apache.camel.impl.engine.DefaultComponentResolver@705a793a to resolve component with name: google-pubsub 06:04:00.670 [main] DEBUG org.apache.camel.support.ResolverHelper - Lookup Component with name google-pubsub in registry. Found: null 06:04:00.670 [main] DEBUG org.apache.camel.support.ResolverHelper - Lookup Component with name google-pubsub-component in registry. Found: null 06:04:00.681 [main] DEBUG org.apache.camel.impl.engine.DefaultComponentResolver - Found component: google-pubsub via type: org.apache.camel.component.google.pubsub.GooglePubsubComponent via: META-INF/services/org/apache/camel/component/google-pubsub 06:04:00.837 [main] DEBUG org.apache.camel.impl.engine.DefaultConfigurerResolver - Found configurer: google-pubsub-component via type: org.apache.camel.component.google.pubsub.GooglePubsubComponentConfigurer via: META-INF/services/org/apache/camel/configurer/google-pubsub-component 06:04:00.841 [main] DEBUG org.apache.camel.impl.engine.DefaultConfigurerResolver - Found configurer: google-pubsub-endpoint via type: org.apache.camel.component.google.pubsub.GooglePubsubEndpointConfigurer via: META-INF/services/org/apache/camel/configurer/google-pubsub-endpoint 06:04:00.846 [main] DEBUG org.apache.camel.support.DefaultComponent - Creating endpoint uri=[google-pubsub://GCP-PROJECT-NAME:transaction-test-subscriber?ackMode=AUTO]， path=[GCP-PROJECT-NAME:transaction-test-subscriber] 06:04:00.872 [main] DEBUG org.apache.camel.impl.converter.CoreTypeConverterRegistry - Promoting fallback type converter as a known type converter to convert from: org.apache.camel.component.google.pubsub.GooglePubsubConstants.AckMode to: java.lang.String for the fallback converter: org.apache.camel.impl.converter.EnumTypeConverter@63e148cb 06:04:00.882 [main] DEBUG org.apache.camel.impl.engine.AbstractCamelContext - google-pubsub://GCP-PROJECT-NAME:transaction-test-subscriber?ackMode=AUTO converted to endpoint: google-pubsub://GCP-PROJECT-NAME:transaction-test-subscriber?ackMode=AUTO by component: org.apache.camel.component.google.pubsub.GooglePubsubComponent@1bc4ec31 06:04:00.898 [main] DEBUG org.apache.camel.impl.engine.AbstractCamelContext - Using ComponentResolver: org.apache.camel.impl.engine.DefaultComponentResolver@705a793a to resolve component with name: log 06:04:00.898 [main] DEBUG org.apache.camel.support.ResolverHelper - Lookup Component with name log in registry. Found: null 06:04:00.898 [main] DEBUG org.apache.camel.support.ResolverHelper - Lookup Component with name log-component in registry. Found: null 06:04:00.902 [main] DEBUG org.apache.camel.impl.engine.DefaultComponentResolver - Found component: log via type: org.apache.camel.component.log.LogComponent via: META-INF/services/org/apache/camel/component/log 06:04:00.906 [main] DEBUG org.apache.camel.impl.engine.DefaultConfigurerResolver - Found configurer: log-component via type: org.apache.camel.component.log.LogComponentConfigurer via: META-INF/services/org/apache/camel/configurer/log-component 06:04:00.910 [main] DEBUG org.apache.camel.impl.engine.DefaultConfigurerResolver - Found configurer: log-endpoint via type: org.apache.camel.component.log.LogEndpointConfigurer via: META-INF/services/org/apache/camel/configurer/log-endpoint 06:04:00.910 [main] DEBUG org.apache.camel.support.DefaultComponent - Creating endpoint uri=[log://input?showAll=true]， path=[input] 06:04:00.926 [main] DEBUG org.apache.camel.impl.engine.AbstractCamelContext - log://input?showAll=true converted to endpoint: log://input?showAll=true by component: org.apache.camel.component.log.LogComponent@69e0f16 06:04:01.026 [main] DEBUG org.apache.camel.reifier.LogReifier - LogName is not configured， using route id as logName: route1 06:04:01.047 [main] INFO org.apache.camel.impl.engine.AbstractCamelContext - Apache Camel 3.4.0 (camel-1) is starting 06:04:01.047 [main] DEBUG org.apache.camel.impl.engine.AbstractCamelContext - Using ClassResolver=org.apache.camel.impl.engine.DefaultClassResolver@6a6b4536， PackageScanClassResolver=org.apache.camel.impl.engine.DefaultPackageScanClassResolver@5582249c， ApplicationContextClassLoader=null， RouteController=org.apache.camel.impl.engine.DefaultRouteController@19801b8d 06:04:01.049 [main] INFO org.apache.camel.impl.engine.AbstractCamelContext - StreamCaching is not in use. If using streams then its recommended to enable stream caching. See more details at http://camel.apache.org/stream-caching.html 06:04:01.049 [main] DEBUG org.apache.camel.impl.engine.AbstractCamelContext - Using HeadersMapFactory: org.apache.camel.impl.engine.DefaultHeadersMapFactory@f6776e2 06:04:01.049 [main] DEBUG org.apache.camel.impl.engine.AbstractCamelContext - Using ReactiveExecutor: org.apache.camel.impl.engine.DefaultReactiveExecutor@79e1f733 06:04:01.049 [main] INFO org.apache.camel.impl.engine.AbstractCamelContext - Using HealthCheck: camel-health 06:04:01.052 [main] DEBUG org.apache.camel.impl.engine.InternalRouteStartupManager - Warming up route id: route1 having autoStartup=true 06:04:01.071 [main] DEBUG org.apache.camel.support.DefaultProducer - Starting producer: Producer[log://input?showAll=true] 06:04:01.072 [main] DEBUG org.apache.camel.impl.engine.InternalRouteStartupManager - Route: route1 >>> Route[google-pubsub://GCP-PROJECT-NAME:transaction-test-subscriber?ackMode=AUTO -> null] 06:04:01.072 [main] DEBUG org.apache.camel.impl.engine.InternalRouteStartupManager - Starting consumer (order: 1000) on route: route1 06:04:01.073 [main] DEBUG org.apache.camel.support.DefaultConsumer - Init consumer: Consumer[google-pubsub://GCP-PROJECT-NAME:transaction-test-subscriber?ackMode=AUTO] 06:04:01.073 [main] DEBUG org.apache.camel.support.DefaultConsumer - Starting consumer: Consumer[google-pubsub://GCP-PROJECT-NAME:transaction-test-subscriber?ackMode=AUTO] 06:04:01.073 [main] INFO org.apache.camel.component.google.pubsub.GooglePubsubConsumer - Starting Google PubSub consumer for GCP-PROJECT-NAME/transaction-test-subscriber 06:04:01.078 [main] DEBUG org.apache.camel.impl.engine.BaseExecutorServiceManager - Created new ThreadPool for source: google-pubsub://GCP-PROJECT-NAME:transaction-test-subscriber?ackMode=AUTO with name: GooglePubsubConsumer[transaction-test-subscriber]. -> org.apache.camel.util.concurrent.RejectableThreadPoolExecutor@11306ed7[Running， pool size = 0， active threads = 0， queued tasks = 0， completed tasks = 0][GooglePubsubConsumer[transaction-test-subscriber]] 06:04:01.295 [Camel (camel-1) thread #1 - GooglePubsubConsumer[transaction-test-subscriber]] DEBUG org.apache.camel.component.google.pubsub.GooglePubsubConsumer - Subscribing to projects/GCP-PROJECT-NAME/subscriptions/transaction-test-subscriber 06:04:01.299 [main] INFO org.apache.camel.impl.engine.InternalRouteStartupManager - Route: route1 started and consuming from: google-pubsub://GCP-PROJECT-NAME:transaction-test-subscriber 06:04:01.316 [main] INFO org.apache.camel.impl.engine.AbstractCamelContext - Total 1 routes， of which 1 are started 06:04:01.317 [main] INFO org.apache.camel.impl.engine.AbstractCamelContext - Apache Camel 3.4.0 (camel-1) started in 0.270 seconds Show Ramesh Venkitaswaran added a comment - 20/Jul/20 11:14 Camel 3.4 06:03:59.267 [Camel Thread #0 - LRUCacheFactory] DEBUG org.apache.camel.component.caffeine.lrucache.CaffeineLRUCacheFactory - Warming up LRUCache ... 06:03:59.267 [main] INFO org.apache.camel.support.LRUCacheFactory - Detected and using LRUCacheFactory: camel-caffeine-lrucache 06:03:59.456 [Camel Thread #0 - LRUCacheFactory] DEBUG org.apache.camel.component.caffeine.lrucache.CaffeineLRUCacheFactory - Warming up LRUCache complete in 194 millis 06:03:59.463 [main] DEBUG org.apache.camel.impl.engine.AbstractCamelContext - Setting up management with factory: org.apache.camel.impl.engine.DefaultManagementStrategyFactory@62d59d60 06:03:59.486 [main] DEBUG org.apache.camel.impl.engine.BaseServiceResolver - Found HealthCheckRegistry: org.apache.camel.impl.health.DefaultHealthCheckRegistry via: META-INF/services/org/apache/camel/health-check-registry 06:03:59.496 [main] DEBUG org.apache.camel.impl.engine.BaseServiceResolver - Detected and using HealthCheckRegistry: org.apache.camel.impl.health.DefaultHealthCheckRegistry@6d2d04ef 06:03:59.546 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Loading file META-INF/services/org/apache/camel/TypeConverterLoader to retrieve list of type converters， from url: jar:file:/Users/ramesh/.groovy/grapes/org.apache.camel/camel-support/jars/camel-support-3.4.0.jar!/META-INF/services/org/apache/camel/TypeConverterLoader 06:03:59.552 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Loading file META-INF/services/org/apache/camel/TypeConverterLoader to retrieve list of type converters， from url: jar:file:/Users/ramesh/.groovy/grapes/org.apache.camel/camel-base/jars/camel-base-3.4.0.jar!/META-INF/services/org/apache/camel/TypeConverterLoader 06:03:59.555 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Loading file META-INF/services/org/apache/camel/TypeConverterLoader to retrieve list of type converters， from url: jar:file:/Users/ramesh/.groovy/grapes/org.apache.camel/camel-file/jars/camel-file-3.4.0.jar!/META-INF/services/org/apache/camel/TypeConverterLoader 06:03:59.559 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Loading file META-INF/services/org/apache/camel/TypeConverterLoader to retrieve list of type converters， from url: jar:file:/Users/ramesh/.groovy/grapes/org.apache.camel/camel-xml-jaxp/jars/camel-xml-jaxp-3.4.0.jar!/META-INF/services/org/apache/camel/TypeConverterLoader 06:03:59.563 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.stream.StreamCacheConverterLoader 06:03:59.567 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.stream.StreamCacheConverterLoader loading converters 06:03:59.576 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.CamelConverterLoader 06:03:59.579 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.CamelConverterLoader loading converters 06:03:59.581 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.CollectionConverterLoader 06:03:59.584 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.CollectionConverterLoader loading converters 06:03:59.589 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.DateTimeConverterLoader 06:03:59.591 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.DateTimeConverterLoader loading converters 06:03:59.596 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.DurationConverterLoader 06:03:59.599 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.DurationConverterLoader loading converters 06:03:59.601 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.IOConverterLoader 06:03:59.605 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.IOConverterLoader loading converters 06:03:59.623 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.NIOConverterLoader 06:03:59.626 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.NIOConverterLoader loading converters 06:03:59.631 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.ObjectConverterLoader 06:03:59.633 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.ObjectConverterLoader loading converters 06:03:59.645 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.SQLConverterLoader 06:03:59.646 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.SQLConverterLoader loading converters 06:03:59.647 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.impl.converter.UriTypeConverterLoader 06:03:59.648 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.impl.converter.UriTypeConverterLoader loading converters 06:03:59.649 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.component.file.GenericFileConverterLoader 06:03:59.653 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.component.file.GenericFileConverterLoader loading converters 06:03:59.662 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.jaxp.DomConverterLoader 06:03:59.666 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.jaxp.DomConverterLoader loading converters 06:03:59.668 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.jaxp.StaxConverterLoader 06:03:59.672 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.jaxp.StaxConverterLoader loading converters 06:03:59.678 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.jaxp.StreamSourceConverterLoader 06:03:59.679 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.jaxp.StreamSourceConverterLoader loading converters 06:03:59.680 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.converter.jaxp.XmlConverterLoader 06:03:59.685 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.converter.jaxp.XmlConverterLoader loading converters 06:03:59.713 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - Resolving TypeConverterLoader: org.apache.camel.util.xml.StreamSourceConverterLoader 06:03:59.715 [main] DEBUG org.apache.camel.impl.converter.BaseTypeConverterRegistry - TypeConverterLoader: org.apache.camel.util.xml.StreamSourceConverterLoader loading converters 06:03:59.724 [main] DEBUG org.apache.camel.impl.converter.DefaultTypeConverter - Loaded 197 type converters in 0.178 seconds 06:04:00.330 [main] DEBUG org.apache.camel.impl.engine.AbstractCamelContext - Adding routes from builder: Routes: [] 06:04:00.489 [main] DEBUG org.apache.camel.impl.engine.BaseServiceResolver - Found RestRegistryFactory: org.apache.camel.component. rest .DefaultRestRegistryFactory via: META-INF/services/org/apache/camel/ rest -registry-factory 06:04:00.489 [main] DEBUG org.apache.camel.impl.engine.BaseServiceResolver - Detected and using RestRegistryFactory: org.apache.camel.component. rest .DefaultRestRegistryFactory@2121d0ed 06:04:00.507 [main] DEBUG org.apache.camel.impl.engine.BaseServiceResolver - Found PropertiesComponent: org.apache.camel.component.properties.PropertiesComponent via: META-INF/services/org/apache/camel/properties-component-factory 06:04:00.524 [main] DEBUG org.apache.camel.impl.engine.BaseServiceResolver - Detected and using PropertiesComponent: org.apache.camel.component.properties.PropertiesComponent@1ee1c0cc 06:04:00.532 [main] DEBUG org.apache.camel.support.ResolverHelper - Lookup Language with name simple in registry. Found: null 06:04:00.533 [main] DEBUG org.apache.camel.support.ResolverHelper - Lookup Language with name simple-language in registry. Found: null 06:04:00.670 [main] DEBUG org.apache.camel.impl.engine.AbstractCamelContext - Using ComponentResolver: org.apache.camel.impl.engine.DefaultComponentResolver@705a793a to resolve component with name: google-pubsub 06:04:00.670 [main] DEBUG org.apache.camel.support.ResolverHelper - Lookup Component with name google-pubsub in registry. Found: null 06:04:00.670 [main] DEBUG org.apache.camel.support.ResolverHelper - Lookup Component with name google-pubsub-component in registry. Found: null 06:04:00.681 [main] DEBUG org.apache.camel.impl.engine.DefaultComponentResolver - Found component: google-pubsub via type: org.apache.camel.component.google.pubsub.GooglePubsubComponent via: META-INF/services/org/apache/camel/component/google-pubsub 06:04:00.837 [main] DEBUG org.apache.camel.impl.engine.DefaultConfigurerResolver - Found configurer: google-pubsub-component via type: org.apache.camel.component.google.pubsub.GooglePubsubComponentConfigurer via: META-INF/services/org/apache/camel/configurer/google-pubsub-component 06:04:00.841 [main] DEBUG org.apache.camel.impl.engine.DefaultConfigurerResolver - Found configurer: google-pubsub-endpoint via type: org.apache.camel.component.google.pubsub.GooglePubsubEndpointConfigurer via: META-INF/services/org/apache/camel/configurer/google-pubsub-endpoint 06:04:00.846 [main] DEBUG org.apache.camel.support.DefaultComponent - Creating endpoint uri=[google-pubsub: //GCP-PROJECT-NAME:transaction-test-subscriber?ackMode=AUTO]， path=[GCP-PROJECT-NAME:transaction-test-subscriber] 06:04:00.872 [main] DEBUG org.apache.camel.impl.converter.CoreTypeConverterRegistry - Promoting fallback type converter as a known type converter to convert from: org.apache.camel.component.google.pubsub.GooglePubsubConstants.AckMode to: java.lang. String for the fallback converter: org.apache.camel.impl.converter.EnumTypeConverter@63e148cb 06:04:00.882 [main] DEBUG org.apache.camel.impl.engine.AbstractCamelContext - google-pubsub: //GCP-PROJECT-NAME:transaction-test-subscriber?ackMode=AUTO converted to endpoint: google-pubsub://GCP-PROJECT-NAME:transaction-test-subscriber?ackMode=AUTO by component: org.apache.camel.component.google.pubsub.GooglePubsubComponent@1bc4ec31 06:04:00.898 [main] DEBUG org.apache.camel.impl.engine.AbstractCamelContext - Using ComponentResolver: org.apache.camel.impl.engine.DefaultComponentResolver@705a793a to resolve component with name: log 06:04:00.898 [main] DEBUG org.apache.camel.support.ResolverHelper - Lookup Component with name log in registry. Found: null 06:04:00.898 [main] DEBUG org.apache.camel.support.ResolverHelper - Lookup Component with name log-component in registry. Found: null 06:04:00.902 [main] DEBUG org.apache.camel.impl.engine.DefaultComponentResolver - Found component: log via type: org.apache.camel.component.log.LogComponent via: META-INF/services/org/apache/camel/component/log 06:04:00.906 [main] DEBUG org.apache.camel.impl.engine.DefaultConfigurerResolver - Found configurer: log-component via type: org.apache.camel.component.log.LogComponentConfigurer via: META-INF/services/org/apache/camel/configurer/log-component 06:04:00.910 [main] DEBUG org.apache.camel.impl.engine.DefaultConfigurerResolver - Found configurer: log-endpoint via type: org.apache.camel.component.log.LogEndpointConfigurer via: META-INF/services/org/apache/camel/configurer/log-endpoint 06:04:00.910 [main] DEBUG org.apache.camel.support.DefaultComponent - Creating endpoint uri=[log: //input?showAll= true ]， path=[input] 06:04:00.926 [main] DEBUG org.apache.camel.impl.engine.AbstractCamelContext - log: //input?showAll= true converted to endpoint: log://input?showAll= true by component: org.apache.camel.component.log.LogComponent@69e0f16 06:04:01.026 [main] DEBUG org.apache.camel.reifier.LogReifier - LogName is not configured， using route id as logName: route1 06:04:01.047 [main] INFO org.apache.camel.impl.engine.AbstractCamelContext - Apache Camel 3.4.0 (camel-1) is starting 06:04:01.047 [main] DEBUG org.apache.camel.impl.engine.AbstractCamelContext - Using ClassResolver=org.apache.camel.impl.engine.DefaultClassResolver@6a6b4536， PackageScanClassResolver=org.apache.camel.impl.engine.DefaultPackageScanClassResolver@5582249c， ApplicationContextClassLoader= null ， RouteController=org.apache.camel.impl.engine.DefaultRouteController@19801b8d 06:04:01.049 [main] INFO org.apache.camel.impl.engine.AbstractCamelContext - StreamCaching is not in use. If using streams then its recommended to enable stream caching. See more details at http: //camel.apache.org/stream-caching.html 06:04:01.049 [main] DEBUG org.apache.camel.impl.engine.AbstractCamelContext - Using HeadersMapFactory: org.apache.camel.impl.engine.DefaultHeadersMapFactory@f6776e2 06:04:01.049 [main] DEBUG org.apache.camel.impl.engine.AbstractCamelContext - Using ReactiveExecutor: org.apache.camel.impl.engine.DefaultReactiveExecutor@79e1f733 06:04:01.049 [main] INFO org.apache.camel.impl.engine.AbstractCamelContext - Using HealthCheck: camel-health 06:04:01.052 [main] DEBUG org.apache.camel.impl.engine.InternalRouteStartupManager - Warming up route id: route1 having autoStartup= true 06:04:01.071 [main] DEBUG org.apache.camel.support.DefaultProducer - Starting producer: Producer[log: //input?showAll= true ] 06:04:01.072 [main] DEBUG org.apache.camel.impl.engine.InternalRouteStartupManager - Route: route1 >>> Route[google-pubsub: //GCP-PROJECT-NAME:transaction-test-subscriber?ackMode=AUTO -> null ] 06:04:01.072 [main] DEBUG org.apache.camel.impl.engine.InternalRouteStartupManager - Starting consumer (order: 1000) on route: route1 06:04:01.073 [main] DEBUG org.apache.camel.support.DefaultConsumer - Init consumer: Consumer[google-pubsub: //GCP-PROJECT-NAME:transaction-test-subscriber?ackMode=AUTO] 06:04:01.073 [main] DEBUG org.apache.camel.support.DefaultConsumer - Starting consumer: Consumer[google-pubsub: //GCP-PROJECT-NAME:transaction-test-subscriber?ackMode=AUTO] 06:04:01.073 [main] INFO org.apache.camel.component.google.pubsub.GooglePubsubConsumer - Starting Google PubSub consumer for GCP-PROJECT-NAME/transaction-test-subscriber 06:04:01.078 [main] DEBUG org.apache.camel.impl.engine.BaseExecutorServiceManager - Created new ThreadPool for source: google-pubsub: //GCP-PROJECT-NAME:transaction-test-subscriber?ackMode=AUTO with name: GooglePubsubConsumer[transaction-test-subscriber]. -> org.apache.camel.util.concurrent.RejectableThreadPoolExecutor@11306ed7[Running， pool size = 0， active threads = 0， queued tasks = 0， completed tasks = 0][GooglePubsubConsumer[transaction-test-subscriber]] 06:04:01.295 [Camel (camel-1) thread #1 - GooglePubsubConsumer[transaction-test-subscriber]] DEBUG org.apache.camel.component.google.pubsub.GooglePubsubConsumer - Subscribing to projects/GCP-PROJECT-NAME/subscriptions/transaction-test-subscriber 06:04:01.299 [main] INFO org.apache.camel.impl.engine.InternalRouteStartupManager - Route: route1 started and consuming from: google-pubsub: //GCP-PROJECT-NAME:transaction-test-subscriber 06:04:01.316 [main] INFO org.apache.camel.impl.engine.AbstractCamelContext - Total 1 routes， of which 1 are started 06:04:01.317 [main] INFO org.apache.camel.impl.engine.AbstractCamelContext - Apache Camel 3.4.0 (camel-1) started in 0.270 seconds Hide Permalink Ramesh Venkitaswaran added a comment - 20/Jul/20 11:15 @Grapes([ @Grab(group='org.apache.camel'， module='camel-core'， version='3.1.0')， @Grab(group='org.apache.camel'， module='camel-google-pubsub'， version='3.1.0')， @Grab(group='org.slf4j'， module='slf4j-api'， version='1.7.30')， @Grab(group='ch.qos.logback'， module='logback-classic'， version='1.2.3')， ]) import org.apache.camel.CamelContext import org.apache.camel.impl.DefaultCamelContext import org.apache.camel.builder.RouteBuilder import org.apache.camel.Exchange import org.apache.camel.Message import org.apache.camel.Processor main() def main() { println "downloaded camel dependencies" CamelContext context = new DefaultCamelContext() context.addRoutes(new ReadFromQueueWithPubsub()) context.start() addShutdownHook { context.stop() } synchronized(this){ this.wait() } } class ReadFromQueueWithPubsub extends RouteBuilder { @Override void configure() { from("google-pubsub://GCP-PROJECT-NAME:transaction-test-subscriber?ackMode=AUTO") .to("log:input?showAll=true") .log("Done") } } class Work { Integer runCommand(String body) { println "RUNNING COMMAND with ${body}" Process cmd = "/bin/bash /Users/ramesh/Code/groovy/emulate-long-running.sh".execute() String text = cmd.text return cmd.exitValue() } String useHeaders(Exchange ex) { Message msg = ex.getIn() String body = msg.getBody(String.class) def msgAttribs = msg.getHeader("CamelGooglePubsub.Attributes"， HashMap.class) def ack = msg.getHeader("CamelGooglePubsub.MsgAckId"， String.class) println "Body = ${body}; Ack = ${ack}" return body } } Show Ramesh Venkitaswaran added a comment - 20/Jul/20 11:15 @Grapes([ @Grab(group= 'org.apache.camel' ， module= 'camel-core' ， version= '3.1.0' )， @Grab(group= 'org.apache.camel' ， module= 'camel-google-pubsub' ， version= '3.1.0' )， @Grab(group= 'org.slf4j' ， module= 'slf4j-api' ， version= '1.7.30' )， @Grab(group= 'ch.qos.logback' ， module= 'logback-classic' ， version= '1.2.3' )， ]) import org.apache.camel.CamelContext import org.apache.camel.impl.DefaultCamelContext import org.apache.camel.builder.RouteBuilder import org.apache.camel.Exchange import org.apache.camel.Message import org.apache.camel.Processor main() def main() { println "downloaded camel dependencies" CamelContext context = new DefaultCamelContext() context.addRoutes( new ReadFromQueueWithPubsub()) context.start() addShutdownHook { context.stop() } synchronized ( this ){ this .wait() } } class ReadFromQueueWithPubsub extends RouteBuilder { @Override void configure() { from( "google-pubsub: //GCP-PROJECT-NAME:transaction-test-subscriber?ackMode=AUTO" ) .to( "log:input?showAll= true " ) .log( "Done" ) } } class Work { Integer runCommand( String body) { println "RUNNING COMMAND with ${body}" Process cmd = "/bin/bash /Users/ramesh/Code/groovy/emulate- long -running.sh" .execute() String text = cmd.text return cmd.exitValue() } String useHeaders(Exchange ex) { Message msg = ex.getIn() String body = msg.getBody( String .class) def msgAttribs = msg.getHeader( "CamelGooglePubsub.Attributes" ， HashMap.class) def ack = msg.getHeader( "CamelGooglePubsub.MsgAckId" ， String .class) println "Body = ${body}; Ack = ${ack}" return body } } Hide Permalink Ramesh Venkitaswaran added a comment - 20/Jul/20 11:17 Sorry， I couldn't edit my comment - Please replace the Grapes version for camel to 3.4.0 - I was testing it again with 3.1.0 to reconfirm that it worked Show Ramesh Venkitaswaran added a comment - 20/Jul/20 11:17 Sorry， I couldn't edit my comment - Please replace the Grapes version for camel to 3.4.0 - I was testing it again with 3.1.0 to reconfirm that it worked Hide Permalink Omar Al-Safi added a comment - 20/Jul/20 11:26 Sorry Ramesh Venkitaswaran， I still can't reproduce the issue， in case I don't pass `GOOGLE_APPLICATION_CREDENTIALS` env， camel route will show an error and will shutdown the route as I'd expect it but I don't see the same in your logs unfortunately. Another idea to reproduce this issue， can you please use this maven project https://github.com/omarsmak/camel-talk-examples/tree/master/camel-main-timer as a start to replicate the issue and attach the maven project once you succeed on replicating it? Thanks Show Omar Al-Safi added a comment - 20/Jul/20 11:26 Sorry Ramesh Venkitaswaran ， I still can't reproduce the issue， in case I don't pass `GOOGLE_APPLICATION_CREDENTIALS` env， camel route will show an error and will shutdown the route as I'd expect it but I don't see the same in your logs unfortunately. Another idea to reproduce this issue， can you please use this maven project https://github.com/omarsmak/camel-talk-examples/tree/master/camel-main-timer as a start to replicate the issue and attach the maven project once you succeed on replicating it? Thanks Hide Permalink Ramesh Venkitaswaran added a comment - 21/Jul/20 11:23 I was able to use your repo， modify the code slightly and it works correctly as designed. However， when I copy the code to a groovy script with all the @Grab dependencies， it does not work. So it looks like there's some issue when running it via groovy， and not related to this JIRA Show Ramesh Venkitaswaran added a comment - 21/Jul/20 11:23 I was able to use your repo， modify the code slightly and it works correctly as designed. However， when I copy the code to a groovy script with all the @Grab dependencies， it does not work. So it looks like there's some issue when running it via groovy， and not related to this JIRA Hide Permalink Omar Al-Safi added a comment - 21/Jul/20 11:58 Thanks Ramesh Venkitaswaran for troubleshooting. Would be great if you can file another JIRA in relation to groovy script and your findings. Thanks Show Omar Al-Safi added a comment - 21/Jul/20 11:58 Thanks Ramesh Venkitaswaran for troubleshooting. Would be great if you can file another JIRA in relation to groovy script and your findings. Thanks Hide Permalink Ramesh Venkitaswaran added a comment - 22/Jul/20 11:39 Thank you so much for your help. As per your suggestion， I have filed https://issues.apache.org/jira/browse/CAMEL-15325 with all the details. Show Ramesh Venkitaswaran added a comment - 22/Jul/20 11:39 Thank you so much for your help. As per your suggestion， I have filed https://issues.apache.org/jira/browse/CAMEL-15325 with all the details. Hide Permalink Ramesh Venkitaswaran added a comment - 26/Aug/20 11:53 Omar Al-Safi My apologies - I came back to this on Camel 3.4.3 on Java 11 and this still seems to be an open issue. When I attempt to consume a pubsub message， it just waits there silently. It seems like it's not connecting to Google pubsub at all. Here is the attached POM and the test code Show Ramesh Venkitaswaran added a comment - 26/Aug/20 11:53 Omar Al-Safi My apologies - I came back to this on Camel 3.4.3 on Java 11 and this still seems to be an open issue. When I attempt to consume a pubsub message， it just waits there silently. It seems like it's not connecting to Google pubsub at all. Here is the attached POM and the test code Hide Permalink Ramesh Venkitaswaran added a comment - 26/Aug/20 11:59 Sorry - the attachment didnt go through. Here is the gist https://gist.github.com/rameshvenk/041f18695721ef97a1cd4f5bec87ac7e Show Ramesh Venkitaswaran added a comment - 26/Aug/20 11:59 Sorry - the attachment didnt go through. Here is the gist https://gist.github.com/rameshvenk/041f18695721ef97a1cd4f5bec87ac7e Hide Permalink Omar Al-Safi added a comment - 26/Aug/20 12:06 Hey Ramesh Venkitaswaran out of curiosity， does it work in Java8? If yes， please create a JIRA ticket highlighting this issue occurs in Java 11 only so we can take care of it Show Omar Al-Safi added a comment - 26/Aug/20 12:06 Hey Ramesh Venkitaswaran out of curiosity， does it work in Java8? If yes， please create a JIRA ticket highlighting this issue occurs in Java 11 only so we can take care of it Hide Permalink Andrea Cosentino added a comment - 26/Aug/20 12:14 Camel 3.4.3 is based on Spring Boot 2.3.2， try by using it， instead of 2.2.9 Show Andrea Cosentino added a comment - 26/Aug/20 12:14 Camel 3.4.3 is based on Spring Boot 2.3.2， try by using it， instead of 2.2.9 Hide Permalink Ramesh Venkitaswaran added a comment - 26/Aug/20 12:45 I changed my pom to Spring v2.3.2.RELEASE as follows <parent> <groupId>org.springframework.boot</groupId> <artifactId>spring-boot-starter-parent</artifactId> <version>2.3.2.RELEASE</version> <relativePath/> <!-- lookup parent from repository --> </parent> I tested it on Java 8 by commenting this out from my pom and using Jdk as follows % java -version openjdk version "1.8.0_262" OpenJDK Runtime Environment (Zulu 8.48.0.51-CA-macosx) (build 1.8.0_262-b19) OpenJDK 64-Bit Server VM (Zulu 8.48.0.51-CA-macosx) (build 25.262-b19， mixed mode) % <!-- <properties>--> <!-- <java.version>11</java.version>--> <!-- </properties>--> It fails to function on 2.3.2 with both Java 8 and Java 11 Show Ramesh Venkitaswaran added a comment - 26/Aug/20 12:45 I changed my pom to Spring v2.3.2.RELEASE as follows <parent> <groupId> org.springframework.boot </groupId> <artifactId> spring-boot-starter-parent </artifactId> <version> 2.3.2.RELEASE </version> <relativePath/> <!-- lookup parent from repository --> </parent> I tested it on Java 8 by commenting this out from my pom and using Jdk as follows % java -version openjdk version "1.8.0_262" OpenJDK Runtime Environment (Zulu 8.48.0.51-CA-macosx) (build 1.8.0_262-b19) OpenJDK 64-Bit Server VM (Zulu 8.48.0.51-CA-macosx) (build 25.262-b19， mixed mode) % <!-- <properties> --> <!-- <java.version> 11 </java.version> --> <!-- </properties> --> It fails to function on 2.3.2 with both Java 8 and Java 11 Hide Permalink Andrea Cosentino added a comment - 26/Aug/20 12:49 I think your POM is incorrect， try to follow the camel-spring-boot example https://github.com/apache/camel-spring-boot-examples/blob/master/camel-example-spring-boot/pom.xml Show Andrea Cosentino added a comment - 26/Aug/20 12:49 I think your POM is incorrect， try to follow the camel-spring-boot example https://github.com/apache/camel-spring-boot-examples/blob/master/camel-example-spring-boot/pom.xml Hide Permalink Ramesh Venkitaswaran added a comment - 26/Aug/20 13:08 I generated this POM via https://start.spring.io - I will， of course， try what you suggested and report back. Also， if you feel that this Jira is inappropriate to continue discussions， I can also subscribe to the camel mailing lists and continue there. Show Ramesh Venkitaswaran added a comment - 26/Aug/20 13:08 I generated this POM via https://start.spring.io - I will， of course， try what you suggested and report back. Also， if you feel that this Jira is inappropriate to continue discussions， I can also subscribe to the camel mailing lists and continue there.
CAMEL-15063,Unassigned,2020-05-14T15:56:13+0000,1589457373， where 1589457373 is the epoch,While working on an integration test for the Camel Kafka Connector， which uses 3.2.0， I found what appears to be a problem in Camel Salesforce. 2020-05-14 17:22:48，758 [ool-68-thread-1] ERROR org.apache.camel.impl.engine.AbstractCamelContext - Error starting CamelContext (camel-1) due to exception thrown: nulljava.lang.NullPointerException: null at org.apache.camel.component.salesforce.internal.streaming.SubscriptionHelper.createClient(SubscriptionHelper.java:343) ~[camel-salesforce-3.2.0.jar:3.2.0] at org.apache.camel.component.salesforce.internal.streaming.SubscriptionHelper.doStart(SubscriptionHelper.java:111) ~[camel-salesforce-3.2.0.jar:3.2.0] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[camel-api-3.2.0.jar:3.2.0] at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:84) ~[camel-api-3.2.0.jar:3.2.0] at org.apache.camel.component.salesforce.SalesforceConsumer.doStart(SalesforceConsumer.java:320) ~[camel-salesforce-3.2.0.jar:3.2.0] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[camel-api-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.startService(AbstractCamelContext.java:3056) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartOrResumeRouteConsumers(AbstractCamelContext.java:3394) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartRouteConsumers(AbstractCamelContext.java:3325) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.safelyStartRouteServices(AbstractCamelContext.java:3230) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartOrResumeRoutes(AbstractCamelContext.java:2992) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartCamel(AbstractCamelContext.java:2790) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartContext(AbstractCamelContext.java:2643) [camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStart(AbstractCamelContext.java:2606) [camel-base-3.2.0.jar:3.2.0] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) [camel-api-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2448) [camel-base-3.2.0.jar:3.2.0] at org.apache.camel.main.Main.doStart(Main.java:118) [camel-main-3.2.0.jar:3.2.0] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) [camel-api-3.2.0.jar:3.2.0] at org.apache.camel.main.MainSupport.run(MainSupport.java:83) [camel-main-3.2.0.jar:3.2.0] at org.apache.camel.kafkaconnector.utils.CamelMainSupport$CamelContextStarter.run(CamelMainSupport.java:224) [classes/:?] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_252] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_252] The problem seems to be related to the following set of conditions. A SalesforceHTTPClient is not defined: https://github.com/apache/camel/blob/release/3.2.0/components/camel-salesforce/camel-salesforce-component/src/main/java/org/apache/camel/component/salesforce/SalesforceComponent.java#L328 Therefore， the default Jetty one would be created: https://github.com/apache/camel/blob/release/3.2.0/components/camel-salesforce/camel-salesforce-component/src/main/java/org/apache/camel/component/salesforce/SalesforceComponent.java#L335 Subsequently， the ServiceHelper performs the initialization of the SubscriptionHelper: https://github.com/apache/camel/blob/release/3.2.0/components/camel-salesforce/camel-salesforce-component/src/main/java/org/apache/camel/component/salesforce/SalesforceComponent.java#L371 This， eventually， would call the doStart() method of the SubscriptionHelper: https://github.com/apache/camel/blob/399f352a2e1a25d6a8af78d0ff7048c60c659522/components/camel-salesforce/camel-salesforce-component/src/main/java/org/apache/camel/component/salesforce/internal/streaming/SubscriptionHelper.java#L108 Which would try to create the Bayeux client: https://github.com/apache/camel/blob/399f352a2e1a25d6a8af78d0ff7048c60c659522/components/camel-salesforce/camel-salesforce-component/src/main/java/org/apache/camel/component/salesforce/internal/streaming/SubscriptionHelper.java#L111 However， to do so， it tries uses the shared that Jetty HTTP client: https://github.com/apache/camel/blob/399f352a2e1a25d6a8af78d0ff7048c60c659522/components/camel-salesforce/camel-salesforce-component/src/main/java/org/apache/camel/component/salesforce/internal/streaming/SubscriptionHelper.java#L340 The problem is that it tries to use the http client from the SalesforceEndpointConfig instance and， in no point between steps 1 and 6， it seems to have set the instanced created on the step 1 to the instance of that class.,There are no comments yet on this issue.
CAMEL-15062,Claus Ibsen,2020-05-14T11:39:50+0000,1589441990， where 1589441990 is the epoch,As a Camel client， I need to define binding parameters in an URI that describes a from point of a Camel path. The way suggested by the documentation is not working.Following is an example of the URI of a RabbitMQ that fails to set binding parameters:rabbitmq://rabbitmq.dev.mycompany.net/myExchange?username=guest&password=guest&queue=myQueue&exchangeType=headers&vhost=all&autoAck=false&autoDelete=false&automaticRecoveryEnabled=true&args=arg.binding.country=CZ&args=arg.binding.type=myMessageType&args=arg.binding.x-match=all.A short look into the code uncovers that the RabbitMQEndpointConfigurer expects the related 'args' (multi)value be stored in a map， but the URI scanner always encodes multivalues into a list with a (sub)name and a related value kept together in a single string. In turn， the whole 'args' parameter is ignored.,Hide Permalink Andrea Cosentino added a comment - 14/May/20 11:39 You shold do something like HashMap<String， Object> args = new HashMap<>(); args.put(..) args.put(..) args.put(..) Then bind you map to the registry (with name for example 'args' ) and use that in your endpoint with the bean notation rabbitmq://rabbitmq.dev.mycompany.net/myExchange?username=guest&password=guest&queue=myQueue&exchangeType=headers&vhost=all&autoAck=false&autoDelete=false&automaticRecoveryEnabled=true&args=#args Show Andrea Cosentino added a comment - 14/May/20 11:39 You shold do something like HashMap< String ， Object > args = new HashMap<>(); args.put(..) args.put(..) args.put(..) Then bind you map to the registry (with name for example 'args' ) and use that in your endpoint with the bean notation rabbitmq: //rabbitmq.dev.mycompany.net/myExchange?username=guest&password=guest&queue=myQueue&exchangeType=headers&vhost=all&autoAck= false &autoDelete= false &automaticRecoveryEnabled= true &args=#args Hide Permalink Andrea Cosentino added a comment - 14/May/20 11:40 https://github.com/apache/camel/blob/master/components/camel-rabbitmq/src/test/java/org/apache/camel/component/rabbitmq/integration/RabbitMQInOutIntTest.java#L80 Show Andrea Cosentino added a comment - 14/May/20 11:40 https://github.com/apache/camel/blob/master/components/camel-rabbitmq/src/test/java/org/apache/camel/component/rabbitmq/integration/RabbitMQInOutIntTest.java#L80 Hide Permalink Claus Ibsen added a comment - 14/May/20 13:20 I wonder if we can make args multi-valued then you can set it more than once in the uri - a few other options are that. Show Claus Ibsen added a comment - 14/May/20 13:20 I wonder if we can make args multi-valued then you can set it more than once in the uri - a few other options are that.
CAMEL-15061,Grzegorz Grzybek,2020-05-14T11:30:14+0000,1589441414， where 1589441414 is the epoch,When Camel routes start， there are unnecessary calls from class DefaultFactoryFinder in method protected Class<?> addToClassMap(String key， ClassSupplier mappingFunction) throws ClassNotFoundException， IOException { try { return classMap.computeIfAbsent(key， (String classKey) -> { ...In a Karaf environment with the Java security manager enabled， this causes a massive delay in starting Camel routes， since there are thousands of calls into org.apache.felix.framework.BundleImpl.getEntry()， which is then authorised by the Java Security Manager. Its seems a bulk of these calls could be avoided if the call to classMap.computeIfAbsent() dealt with null values as well.,Hide Permalink Grzegorz Grzybek added a comment - 14/May/20 11:30 Fixed here in https://github.com/apache/camel/commits/camel-2.25.x. Show Grzegorz Grzybek added a comment - 14/May/20 11:30 Fixed here in https://github.com/apache/camel/commits/camel-2.25.x . Hide Permalink Grzegorz Grzybek added a comment - 14/May/20 14:35 FIxed here in https://github.com/apache/camel/commits/master. Fixed here in https://github.com/apache/camel-karaf/commits/master. Show Grzegorz Grzybek added a comment - 14/May/20 14:35 FIxed here in https://github.com/apache/camel/commits/master . Fixed here in https://github.com/apache/camel-karaf/commits/master .
CAMEL-15060,Andrea Cosentino,2020-05-13T18:25:25+0000,1589379925， where 1589379925 is the epoch,The library is not OSGi friendly and it won't v work in an OSGi container， in this form.,There are no comments yet on this issue.
CAMEL-15059,Claus Ibsen,2020-05-15T05:34:18+0000,1589506458， where 1589506458 is the epoch,Lets see if we can make Camel support dependency inject and endpoint via@EndpointInjectprivate Endpoint foo = kafka("cheese").brokers("somebrokers").xxxx;In POJO classes. Currently the endpoint-dsl requires to call resolve(context) to build the endpoint. But maybe we can find a way via @EndpointInject to help trigger this， or something ala@EndpointInject(builder = kafka("cheese").brokers("somebrokers"))private Endpoint foo;,Hide Permalink Claus Ibsen added a comment - 15/May/20 05:34 Okay we can do something like private final EndpointProducerBuilder foo = mock("result").expectedCount(3); And then use that in the EndpointRouteBuilder and FluentProducerTemplate Show Claus Ibsen added a comment - 15/May/20 05:34 Okay we can do something like private final EndpointProducerBuilder foo = mock("result").expectedCount(3); And then use that in the EndpointRouteBuilder and FluentProducerTemplate
CAMEL-15058,Denis Istomin,2020-05-14T13:21:34+0000,1589448094， where 1589448094 is the epoch,Create spring boot project via maven archetype Generate RestController using camel-restdsl-openapi:generate Send requestGenerated conroller has code:String path = request.getRequestURI();request.getServletContext().getRequestDispatcher("/camel/" + path).forward(request， response); when path starts with "/"， concatenated string becomes "/camel//path",Hide Permalink Claus Ibsen added a comment - 14/May/20 13:21 - edited There are unit test failures now according to CI. Can you take a look https://builds.apache.org/job/Camel/job/master/lastCompletedBuild/testReport/ Show Claus Ibsen added a comment - 14/May/20 13:21 - edited There are unit test failures now according to CI. Can you take a look https://builds.apache.org/job/Camel/job/master/lastCompletedBuild/testReport/ Hide Permalink Denis Istomin added a comment - 14/May/20 14:22 Claus Ibsen thanks， my fault， I'll fix it Show Denis Istomin added a comment - 14/May/20 14:22 Claus Ibsen thanks， my fault， I'll fix it
CAMEL-15057,Zheng Feng,2020-05-14T08:01:24+0000,1589428884， where 1589428884 is the epoch,This issue comes across camel-quarkus issue #1200 . The following routerfrom("webhook:telegram:bots") .log("${body}");which is added before the camel context is started. So the doStart() in the TelegramEndpoint is deferred and that causes the WebHookEndpoint invokes the registerWebhook() throws NPE.It could be considered to move the codes to the doInit() which seems safer as this can also happens outside quarkus etc,Hide Permalink Claus Ibsen added a comment - 14/May/20 08:01 Thanks for reporting， the PR and testing my PR. Good we found a solution. Show Claus Ibsen added a comment - 14/May/20 08:01 Thanks for reporting， the PR and testing my PR. Good we found a solution.
CAMEL-15056,Luca Burgazzoli,2020-05-13T13:04:23+0000,1589360663， where 1589360663 is the epoch,,There are no comments yet on this issue.
CAMEL-15055,Andrea Cosentino,2020-05-13T12:09:47+0000,1589357387， where 1589357387 is the epoch,When breakOnFirstError=true exception is not loggedhttps://github.com/apache/camel/blob/master/components/camel-kafka/src/main/java/org/apache/camel/component/kafka/KafkaConsumer.java#L354,Hide Permalink Oleksandr Dmytrov added a comment - 13/May/20 12:09 https://github.com/apache/camel/pull/3819 Show Oleksandr Dmytrov added a comment - 13/May/20 12:09 https://github.com/apache/camel/pull/3819
CAMEL-15054,Claus Ibsen,2020-05-13T17:10:36+0000,1589375436， where 1589375436 is the epoch,Instead of having to hunt down the 100's different builder classes for each component， then lets have a single class where they all are// import static org.apache.camel.builder.endpoint.dsl.DirectEndpointBuilderFactory.direct;That above is what the end user need to static import. Lets make this simpler.,Hide Permalink Claus Ibsen added a comment - 13/May/20 17:10 Okay so this class has all static methods to use the endpoint-dsl from outside the route builder org.apache.camel.builder.endpoint.StaticEndpointBuilders Show Claus Ibsen added a comment - 13/May/20 17:10 Okay so this class has all static methods to use the endpoint-dsl from outside the route builder org.apache.camel.builder.endpoint.StaticEndpointBuilders Hide Permalink Claus Ibsen added a comment - 13/May/20 17:32 Okay we have this now， the only little negative is that the javadoc is not preserved with nice formatting (empty lines). Its due that we parse the existing file via Roaster to be able to know which existing source code there is to not loose them. We may in the future come up with a different way to not rewrite the entire file when rebuilding， but its a bit more tricky. Show Claus Ibsen added a comment - 13/May/20 17:32 Okay we have this now， the only little negative is that the javadoc is not preserved with nice formatting (empty lines). Its due that we parse the existing file via Roaster to be able to know which existing source code there is to not loose them. We may in the future come up with a different way to not rewrite the entire file when rebuilding， but its a bit more tricky. Hide Permalink Luca Burgazzoli added a comment - 14/May/20 06:33 - edited I think the static method on the *BuilderFactory has been introduced to support generating the endpoint dsl for component outside camel repo in the future， maybe we should have both ? Show Luca Burgazzoli added a comment - 14/May/20 06:33 - edited I think the static method on the *BuilderFactory has been introduced to support generating the endpoint dsl for component outside camel repo in the future， maybe we should have both ? Hide Permalink Claus Ibsen added a comment - 14/May/20 07:51 Lets cross that bridge later. There are other implications when doing so. So lets get this tool working well for Camel 3 itself. And so far its only camel-knative that sits in camel-k-runtime. Maybe it can be move to camel 3?. Show Claus Ibsen added a comment - 14/May/20 07:51 Lets cross that bridge later. There are other implications when doing so. So lets get this tool working well for Camel 3 itself. And so far its only camel-knative that sits in camel-k-runtime. Maybe it can be move to camel 3?. Hide Permalink Luca Burgazzoli added a comment - 14/May/20 08:02 Yup no problem to fix it later. About camel-knative it can't be moved yet as there's still to many moving part tightly related to the runtime but I'm not really concerned about that particular component but more for allowing external component developers to leverage the same goodies we have in camel Show Luca Burgazzoli added a comment - 14/May/20 08:02 Yup no problem to fix it later. About camel-knative it can't be moved yet as there's still to many moving part tightly related to the runtime but I'm not really concerned about that particular component but more for allowing external component developers to leverage the same goodies we have in camel
CAMEL-15053,Claus Ibsen,2020-05-12T13:42:44+0000,1589276564， where 1589276564 is the epoch,I'm having a stackoverflow error while trying to run a really simple project to see what was the issue in the project i am working on. I uploaded the small test project to github: [github_project|https://github.com/TiagoManso/apache-camelquarkus-test] so it is easier to reproduce the error. The error is the following:java.lang.StackOverflowError at java.base/jdk.internal.misc.Unsafe.allocateUninitializedArray(Unsafe.java:1269) at java.base/java.lang.invoke.StringConcatFactory$MethodHandleInlineCopyStrategy.newArray(StringConcatFactory.java:1633) at java.management/com.sun.jmx.mbeanserver.Introspector.implementsMBean(Introspector.java:526) at java.management/com.sun.jmx.mbeanserver.Introspector.findMBeanInterface(Introspector.java:381) at java.management/com.sun.jmx.mbeanserver.Introspector.getStandardMBeanInterface(Introspector.java:329) at java.management/com.sun.jmx.mbeanserver.Introspector.checkCompliance(Introspector.java:158) at java.management/com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:313) at java.management/com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:522) at org.apache.camel.management.DefaultManagementAgent.registerMBeanWithServer(DefaultManagementAgent.java:420) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:306) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1399) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1395) at org.apache.camel.impl.engine.AbstractCamelContext.setBeanIntrospection(AbstractCamelContext.java:3794) at org.apache.camel.impl.engine.AbstractCamelContext.getBeanIntrospection(AbstractCamelContext.java:3785) at org.apache.camel.support.management.MBeanInfoAssembler.doDoExtractAttributesAndOperations(MBeanInfoAssembler.java:196) at org.apache.camel.support.management.MBeanInfoAssembler.doExtractAttributesAndOperations(MBeanInfoAssembler.java:166) at org.apache.camel.support.management.MBeanInfoAssembler.extractAttributesAndOperations(MBeanInfoAssembler.java:147) at org.apache.camel.support.management.MBeanInfoAssembler.getMBeanInfo(MBeanInfoAssembler.java:118) at org.apache.camel.support.management.DefaultManagementMBeanAssembler.assemble(DefaultManagementMBeanAssembler.java:76) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:310) at org.apache.camel.management.DefaultManagementAgent.register(DefaultManagementAgent.java:300) at org.apache.camel.management.JmxManagementStrategy.manageObject(JmxManagementStrategy.java:67) at org.apache.camel.management.JmxManagementLifecycleStrategy.manageObject(JmxManagementLifecycleStrategy.java:901) at org.apache.camel.management.JmxManagementLifecycleStrategy.onServiceAdd(JmxManagementLifecycleStrategy.java:450) at org.apache.camel.impl.engine.AbstractCamelContext.internalAddService(AbstractCamelContext.java:1428) at org.apache.camel.impl.engine.AbstractCamelContext.doAddService(AbstractCamelContext.java:1404)Process finished with exit code 255,Hide Permalink Andrea Cosentino added a comment - 12/May/20 13:42 Please， the camel-quarkus issues must be reported in the github issues tracker of camel-quarkus project. https://github.com/apache/camel-quarkus/issues Show Andrea Cosentino added a comment - 12/May/20 13:42 Please， the camel-quarkus issues must be reported in the github issues tracker of camel-quarkus project. https://github.com/apache/camel-quarkus/issues Hide Permalink Claus Ibsen added a comment - 13/May/20 07:15 Oh sorry Tiago， yeah ideally we report camel-quarkus issues in the github issue tracker. As Camel has 6 sub projects now so this JIRA would become harder to use when all 6 projects are here. I will take a look later when I get a bit time. First I need to work on a few other things. Thanks for reporting. Show Claus Ibsen added a comment - 13/May/20 07:15 Oh sorry Tiago， yeah ideally we report camel-quarkus issues in the github issue tracker. As Camel has 6 sub projects now so this JIRA would become harder to use when all 6 projects are here. I will take a look later when I get a bit time. First I need to work on a few other things. Thanks for reporting. Hide Permalink Claus Ibsen added a comment - 15/May/20 07:42 Okay had a a look so its a problem with mixing camel 3.1 and 3.2 in your example and also a bug in older Camel version. I cannot reproduce with Camel 3.3. The bug is when the a mbean is registered and the bean introspection has not been eager started and is then also created while creating the mbean， and this causes the stackoveflow. I have created a new ticket about this bug. Show Claus Ibsen added a comment - 15/May/20 07:42 Okay had a a look so its a problem with mixing camel 3.1 and 3.2 in your example and also a bug in older Camel version. I cannot reproduce with Camel 3.3. The bug is when the a mbean is registered and the bean introspection has not been eager started and is then also created while creating the mbean， and this causes the stackoveflow. I have created a new ticket about this bug.
CAMEL-15052,Unassigned,2020-05-12T09:03:12.162Z,1589259792.162， where 1589259792.162 is the epoch,In pom.xml file， API is restricted to getProfile only:https://github.com/apache/camel/blob/master/components/camel-google-mail/pom.xml#L169-L175But there are two other methods that are useful : watch and stop.See here:https://developers.google.com/gmail/api/v1/reference/users/watchI've attached a patch to fix.,Hide Permalink Jean-Pierre Matsumoto added a comment - 12/May/20 09:04 If the fix is accepted， let me know if I should update the documentation too. Show Jean-Pierre Matsumoto added a comment - 12/May/20 09:04 If the fix is accepted， let me know if I should update the documentation too. Hide Permalink Omar Al-Safi added a comment - 12/May/20 09:06 Thank you Jean-Pierre Matsumoto for the fix! Would be nice if you can add the patch your fix as PR here: https://github.com/apache/camel. Regards， Omar Show Omar Al-Safi added a comment - 12/May/20 09:06 Thank you Jean-Pierre Matsumoto for the fix! Would be nice if you can add the patch your fix as PR here: https://github.com/apache/camel . Regards， Omar Hide Permalink Claus Ibsen added a comment - 12/May/20 09:06 Yes you are welcome to update the docs， its in the src/main/docs folder Show Claus Ibsen added a comment - 12/May/20 09:06 Yes you are welcome to update the docs， its in the src/main/docs folder
CAMEL-15051,Andrea Cosentino,2020-05-12T12:47:18+0000,1589273238， where 1589273238 is the epoch,When cloning a repository from a server (tested with GitHub) with the following Camel endpoint/options:git:///F:\localpath?operation=clone&remotePath=https://github.com/xxxxxxxx/cust-ir.git&username=xxxxxxxx&password=yyyyyyyy&remoteName=origin&branchName=branch_uat&synchronous=trueThe remote repository was correctly cloned to the localpath， but the branch specified is not created locally and not checked out. The localpath working copy is the master branch. Since Camel GIT does not have a checkout command， one would have to manually checkout the branch thus defeat the purpose of using the component.,Hide Permalink Andrea Cosentino added a comment - 12/May/20 12:47 The operation of clone can be followed by a checkout operation in a subsequent .to() step. 1) operation=clone 2) operation=checkout with a specified branchName Show Andrea Cosentino added a comment - 12/May/20 12:47 The operation of clone can be followed by a checkout operation in a subsequent .to() step. 1) operation=clone 2) operation=checkout with a specified branchName Hide Permalink Andrea Cosentino added a comment - 12/May/20 13:02 Anyway in Camel 3.4.0 (when available) if you specifiy the branchName and clone operation the branch will be set. Show Andrea Cosentino added a comment - 12/May/20 13:02 Anyway in Camel 3.4.0 (when available) if you specifiy the branchName and clone operation the branch will be set. Hide Permalink John Yin added a comment - 12/May/20 15:48 Andrea， first thank you very much for investigating this matter and for suggesting to use the "checkout" operation which is not mentioned in the latest Camel GIT doc https://camel.apache.org/components/latest/git-component.html). I tried the "checkout" operation which did not work as expected. Let's say the repo that was cloned has two branches: master and branch_uat， and the master branch is behind the branch_uat. When the clone is done， the master branch is checked out and the origin/branch_uat is "hidden" in the local repository. After running the checkout operation， a local branch branch_uat is created by Camel GIT but it is based on the master branch (thus behind the origin/branch_uat). Even if I do another pull operation on the branch_uat， it still does not advance the branch_uat to the origin/branch_uat. So I am essentially stuck with the master branch. I will try any other workaround that you may suggest， but also look forward to the permanent fix in 3.4.0. Thanks! Show John Yin added a comment - 12/May/20 15:48 Andrea， first thank you very much for investigating this matter and for suggesting to use the "checkout" operation which is not mentioned in the latest Camel GIT doc https://camel.apache.org/components/latest/git-component.html ). I tried the "checkout" operation which did not work as expected. Let's say the repo that was cloned has two branches: master and branch_uat， and the master branch is behind the branch_uat. When the clone is done， the master branch is checked out and the origin/branch_uat is "hidden" in the local repository. After running the checkout operation， a local branch branch_uat is created by Camel GIT but it is based on the master branch (thus behind the origin/branch_uat). Even if I do another pull operation on the branch_uat， it still does not advance the branch_uat to the origin/branch_uat. So I am essentially stuck with the master branch. I will try any other workaround that you may suggest， but also look forward to the permanent fix in 3.4.0. Thanks!
CAMEL-15050,Claus Ibsen,2020-05-12T06:01:40+0000,1589248900， where 1589248900 is the epoch,The templating components would normally only need data from the message body/headers. So lets make this the default exposed. And add option to expose additional context like camel context which is for advanced use-cases only.,Hide Permalink Claus Ibsen added a comment - 12/May/20 06:01 - edited Camel 3 chunk DONE freemarker DONE mustache DONE mvel DONE robotframework DONE stringtemplate DONE velocity DONE Camel 2 chunk DONE freemarker DONE mustache DONE mvel DONE stringtemplate DONE velocity DONE Show Claus Ibsen added a comment - 12/May/20 06:01 - edited Camel 3 chunk DONE freemarker DONE mustache DONE mvel DONE robotframework DONE stringtemplate DONE velocity DONE Camel 2 chunk DONE freemarker DONE mustache DONE mvel DONE stringtemplate DONE velocity DONE
CAMEL-15049,Claus Ibsen,2020-05-12T12:11:36+0000,1589271096， where 1589271096 is the epoch,It is not so uncommon to have multiple ActiveMQComponent beans in projects I worked on.It is desirable to have an option to specify bean name in camel-endpoint dsl something like this way ( assuming that there exists two ActiveMQComponent， one called 'activemq' and the other called 'activemqservice' ).from(activemq("queueName").componentName("activemqservice"))Instead of just having the option to do this using URIs likefrom("activemqservice:queueName?...")...,Hide Permalink Claus Ibsen added a comment - 12/May/20 12:11 Just wonder what a good method name would be? I have this little unit test SedaComponent seda2 = new SedaComponent(); context.addComponent("seda2"， seda2); from(seda("foo")).to(mock("result")); from(seda("foo").customName("seda2")).to(mock("result")); from("direct:foo").to(seda("foo").customName("seda2")); Where we use customName as new method where you can define a new name - eg I use seda2 Show Claus Ibsen added a comment - 12/May/20 12:11 Just wonder what a good method name would be? I have this little unit test SedaComponent seda2 = new SedaComponent(); context.addComponent( "seda2" ， seda2); from(seda( "foo" )).to(mock( "result" )); from(seda( "foo" ).customName( "seda2" )).to(mock( "result" )); from( "direct:foo" ).to(seda( "foo" ).customName( "seda2" )); Where we use customName as new method where you can define a new name - eg I use seda2 Hide Permalink aboudi rawas added a comment - 12/May/20 12:30 I think componentBeanName(String beanName) or componentCustomName(String beanName) are a bit long but descriptive enough method names. When I first searched for the method to see if it is there.. 'name'， 'custom'， 'component' and 'bean' were the first words to pop into my head. Show aboudi rawas added a comment - 12/May/20 12:30 I think componentBeanName( String beanName) or componentCustomName( String beanName) are a bit long but descriptive enough method names. When I first searched for the method to see if it is there.. 'name'， 'custom'， 'component' and 'bean' were the first words to pop into my head. Hide Permalink aboudi rawas added a comment - 12/May/20 12:50 - edited Now that I thought about it. Something worth's mentioning that when using this method， some type checking needs to be implemented because it would be bad to point the builder to a bean having a different type than SedaComponent or in my example case ActiveMQComponent. SedaComponent seda2 = new SedaComponent(); context.addComponent("seda2"， seda2); // the following line should fail because "seda2" has the same type as seda(...). Not direct(...)， nor timer(...)， etc... from(direct("foo").customName("seda2")).to(mock("result")); Show aboudi rawas added a comment - 12/May/20 12:50 - edited Now that I thought about it. Something worth's mentioning that when using this method， some type checking needs to be implemented because it would be bad to point the builder to a bean having a different type than SedaComponent or in my example case ActiveMQComponent. SedaComponent seda2 = new SedaComponent(); context.addComponent( "seda2" ， seda2); // the following line should fail because "seda2" has the same type as seda(...). Not direct(...)， nor timer(...)， etc... from(direct( "foo" ).customName( "seda2" )).to(mock( "result" )); Hide Permalink Claus Ibsen added a comment - 13/May/20 05:31 Okay found a different way so you can set the custom name in seda itself， eg: SedaComponent seda2 = new SedaComponent(); context.addComponent("seda2"， seda2); from(seda("foo")).to(mock("result")); from(seda("seda2"， "foo")).to(mock("result")); from("direct:foo").to(seda("seda2"， "foo")); Show Claus Ibsen added a comment - 13/May/20 05:31 Okay found a different way so you can set the custom name in seda itself， eg: SedaComponent seda2 = new SedaComponent(); context.addComponent( "seda2" ， seda2); from(seda( "foo" )).to(mock( "result" )); from(seda( "seda2" ， "foo" )).to(mock( "result" )); from( "direct:foo" ).to(seda( "seda2" ， "foo" ));
CAMEL-15048,Claus Ibsen,2020-05-11T14:56:36+0000,1589194596， where 1589194596 is the epoch,When a route is exhausted (could not restart) then we should keep its state around so JMX management and Java API can still query and find its details， such as its error message etc.,There are no comments yet on this issue.
CAMEL-15047,Claus Ibsen,2020-05-11T14:06:00+0000,1589191560， where 1589191560 is the epoch,The internal services has a few problems with correctly doing start|stop with the Camel service concept.Some services use constructor for start logic which is wrong.Need to cleanup this so its consistent.,There are no comments yet on this issue.
CAMEL-15046,Claus Ibsen,2020-05-18T13:33:29+0000,1589794409， where 1589794409 is the epoch,Lets add some kind of option to allow supervising route controller， to let exhausted routes (failed to start and restart) affect the health check to make it DOWN.This should be configurable with route filtering. As some routes may be okay to not be up and running. But there can be some important routes which ideally should make the application unhealthy.Btw for cloud native apps then it may be better to not use supervising and just let camel fail and let the cloud restart the entire app (its monitoring).,Hide Permalink Claus Ibsen added a comment - 18/May/20 13:33 This was already implemented in the routes health check Show Claus Ibsen added a comment - 18/May/20 13:33 This was already implemented in the routes health check
CAMEL-15045,Claus Ibsen,2020-05-11T12:12:40+0000,1589184760， where 1589184760 is the epoch,Lets allow to configure how much to log and at which logging level. You may want to be verbose on DEBUG level during development， and tone it down for INFO for production.,There are no comments yet on this issue.
CAMEL-15044,Claus Ibsen,2020-05-11T11:45:11+0000,1589183111， where 1589183111 is the epoch,This causes various tools to potentially think there are 2 maven projects. For example IDEA.,There are no comments yet on this issue.
CAMEL-15043,Andrea Cosentino,2020-05-11T01:22:11.997Z,1589145731.997， where 1589145731.997 is the epoch,Intention: To create my own Camel component. Steps: Run `mvn archetype:generate -DarchetypeGroupId=org.apache.camel.archetypes -DarchetypeArtifactId=camel-archetype-component -DarchetypeVersion=3.2.0 -DgroupId=org.apache.camel -DartifactId=camel-mycomponent -Dname=MyComponent -Dscheme=mycomponent -Dpackage=org.apache.camel.component.mycomponent` and it'll create `camel-mycomponent` directory. Then open the `pom.xml` and delete the `OSGi` part because I don't need it. Under `camel-mycomponent` run `mvn clean install` Result:Got error[ERROR] Failed to execute goal org.apache.camel:camel-package-maven-plugin:3.2.0:generate-component (generate) on project camel-mycomponent: Error generating data org.apache.maven.plugin.MojoFailureException: Unable to create mojo: Could not find component java type -> [Help 1] Expected: Build successfully with a jar output.,Hide Permalink Claus Ibsen added a comment - 11/May/20 14:13 Thanks for reporting. Yeah we should get the maven archetypes fixed if they have problems. And also remove the osgi bits and make them use java 11 by default. Contributions is welcome Show Claus Ibsen added a comment - 11/May/20 14:13 Thanks for reporting. Yeah we should get the maven archetypes fixed if they have problems. And also remove the osgi bits and make them use java 11 by default. Contributions is welcome Hide Permalink Andrea Cosentino added a comment - 21/May/20 15:16 Fixed archetypes: blueprint cdi java java8 main We have still troubles with the component and the api-component. Also I believe we can have a single java archetype. Show Andrea Cosentino added a comment - 21/May/20 15:16 Fixed archetypes: blueprint cdi java java8 main We have still troubles with the component and the api-component. Also I believe we can have a single java archetype. Hide Permalink Andrea Cosentino added a comment - 22/May/20 19:39 I removed the archetype-web So now we have blueprint cdi java java8 main spring spring-boot I still have some troubles with component， api-component and dataformat， because of the following error [ERROR] Failed to execute goal org.apache.camel:camel-package-maven-plugin:3.4.0-SNAPSHOT:generate-component (generate) on project daje: Error generating data org.apache.maven.plugin.MojoFailureException: Unable to create mojo: Could not find component java type -> [Help 1] This is because at compile time we still don't have those information. Claus Ibsen FYI Show Andrea Cosentino added a comment - 22/May/20 19:39 I removed the archetype-web So now we have blueprint cdi java java8 main spring spring-boot I still have some troubles with component， api-component and dataformat， because of the following error [ERROR] Failed to execute goal org.apache.camel:camel- package -maven-plugin:3.4.0-SNAPSHOT:generate-component (generate) on project daje: Error generating data org.apache.maven.plugin.MojoFailureException: Unable to create mojo: Could not find component java type -> [Help 1] This is because at compile time we still don't have those information. Claus Ibsen FYI Hide Permalink Claus Ibsen added a comment - 24/May/20 15:35 Lets just drop java8 so we have one normal for java Show Claus Ibsen added a comment - 24/May/20 15:35 Lets just drop java8 so we have one normal for java Hide Permalink Claus Ibsen added a comment - 24/May/20 15:35 Also I think we can drop spring， as spring-boot is the default choice for spring users now. Show Claus Ibsen added a comment - 24/May/20 15:35 Also I think we can drop spring， as spring-boot is the default choice for spring users now. Hide Permalink Claus Ibsen added a comment - 24/May/20 18:59 component， api-component and dataformat DONE Show Claus Ibsen added a comment - 24/May/20 18:59 component， api-component and dataformat DONE Hide Permalink Claus Ibsen added a comment - 25/May/20 07:57 Okay lets keep spring as its for XML DSL. And then drop java8 DONE Show Claus Ibsen added a comment - 25/May/20 07:57 Okay lets keep spring as its for XML DSL. And then drop java8 DONE Hide Permalink Ahmed M added a comment - 11/Jul/20 12:35 - edited Hi， I'am having a similar issue with the camel-archetype-api-component archetype. The generated component fails to build due to missing Junit5 dependencies: $ mvn archetype:generate \ -DarchetypeGroupId=org.apache.camel.archetypes \ -DarchetypeArtifactId=camel-archetype-api-component \ -DarchetypeVersion=3.4.0 \ -DgroupId=org.acme \ -DartifactId=camel-dummy-api \ -Dversion=1.0.0 \ -Dname="DummyApiComponent" \ -Dscheme=dummy $ cd camel-dummy-api/ $ mvn clean pacakge ... [INFO] Reactor Summary for Camel DummyApiComponent Component Parent 1.0.0: [INFO] [INFO] Camel DummyApiComponent Component Parent ........... SUCCESS [ 1.041 s] [INFO] Camel DummyApiComponent Component API .............. SUCCESS [ 2.946 s] [INFO] Camel DummyApiComponent Component .................. FAILURE [ 2.343 s] [INFO] ------------------------------------------------------------------------ [INFO] BUILD FAILURE [INFO] ------------------------------------------------------------------------ [INFO] Total time: 6.465 s [INFO] Finished at: 2020-07-11T12:17:59Z [INFO] ------------------------------------------------------------------------ [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:testCompile (default-testCompile) on project camel-dummy-api: Compilation failure: Compilation failure: [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[11，29] package org.junit.jupiter.api does not exist [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[12，29] package org.junit.jupiter.api does not exist [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[19，36] package org.junit.jupiter.api does not exist [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[19，1] static import only from classes and interfaces [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[11，29] package org.junit.jupiter.api does not exist [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[12，29] package org.junit.jupiter.api does not exist [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[19，36] package org.junit.jupiter.api does not exist [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[19，1] static import only from classes and interfaces [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[32，6] cannot find symbol [ERROR] symbol: class Disabled [ERROR] location: class org.acme.DummyApiComponentFileHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[33，6] cannot find symbol [ERROR] symbol: class Test [ERROR] location: class org.acme.DummyApiComponentFileHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[43，6] cannot find symbol [ERROR] symbol: class Disabled [ERROR] location: class org.acme.DummyApiComponentFileHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[44，6] cannot find symbol [ERROR] symbol: class Test [ERROR] location: class org.acme.DummyApiComponentFileHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[58，6] cannot find symbol [ERROR] symbol: class Disabled [ERROR] location: class org.acme.DummyApiComponentFileHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[59，6] cannot find symbol [ERROR] symbol: class Test [ERROR] location: class org.acme.DummyApiComponentFileHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[32，6] cannot find symbol [ERROR] symbol: class Disabled [ERROR] location: class org.acme.DummyApiComponentJavadocHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[33，6] cannot find symbol [ERROR] symbol: class Test [ERROR] location: class org.acme.DummyApiComponentJavadocHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[43，6] cannot find symbol [ERROR] symbol: class Disabled [ERROR] location: class org.acme.DummyApiComponentJavadocHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[44，6] cannot find symbol [ERROR] symbol: class Test [ERROR] location: class org.acme.DummyApiComponentJavadocHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[58，6] cannot find symbol [ERROR] symbol: class Disabled [ERROR] location: class org.acme.DummyApiComponentJavadocHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[59，6] cannot find symbol [ERROR] symbol: class Test [ERROR] location: class org.acme.DummyApiComponentJavadocHelloIntegrationTest [ERROR] -> [Help 1] [ERROR] [ERROR] To see the full stack trace of the errors， re-run Maven with the -e switch. [ERROR] Re-run Maven using the -X switch to enable full debug logging. [ERROR] [ERROR] For more information about the errors and possible solutions， please read the following articles: [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException [ERROR] [ERROR] After correcting the problems， you can resume the build with the command [ERROR] mvn <args> -rf :camel-dummy-api Show Ahmed M added a comment - 11/Jul/20 12:35 - edited Hi， I'am having a similar issue with the camel-archetype-api-component archetype. The generated component fails to build due to missing Junit5 dependencies: $ mvn archetype:generate \ -DarchetypeGroupId=org.apache.camel.archetypes \ -DarchetypeArtifactId=camel-archetype-api-component \ -DarchetypeVersion=3.4.0 \ -DgroupId=org.acme \ -DartifactId=camel-dummy-api \ -Dversion=1.0.0 \ -Dname= "DummyApiComponent" \ -Dscheme=dummy $ cd camel-dummy-api/ $ mvn clean pacakge ... [INFO] Reactor Summary for Camel DummyApiComponent Component Parent 1.0.0: [INFO] [INFO] Camel DummyApiComponent Component Parent ........... SUCCESS [ 1.041 s] [INFO] Camel DummyApiComponent Component API .............. SUCCESS [ 2.946 s] [INFO] Camel DummyApiComponent Component .................. FAILURE [ 2.343 s] [INFO] ------------------------------------------------------------------------ [INFO] BUILD FAILURE [INFO] ------------------------------------------------------------------------ [INFO] Total time: 6.465 s [INFO] Finished at: 2020-07-11T12:17:59Z [INFO] ------------------------------------------------------------------------ [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.8.1:testCompile ( default -testCompile) on project camel-dummy-api: Compilation failure: Compilation failure: [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[11，29] package org.junit.jupiter.api does not exist [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[12，29] package org.junit.jupiter.api does not exist [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[19，36] package org.junit.jupiter.api does not exist [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[19，1] static import only from classes and interfaces [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[11，29] package org.junit.jupiter.api does not exist [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[12，29] package org.junit.jupiter.api does not exist [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[19，36] package org.junit.jupiter.api does not exist [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[19，1] static import only from classes and interfaces [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[32，6] cannot find symbol [ERROR] symbol: class Disabled [ERROR] location: class org.acme.DummyApiComponentFileHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[33，6] cannot find symbol [ERROR] symbol: class Test [ERROR] location: class org.acme.DummyApiComponentFileHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[43，6] cannot find symbol [ERROR] symbol: class Disabled [ERROR] location: class org.acme.DummyApiComponentFileHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[44，6] cannot find symbol [ERROR] symbol: class Test [ERROR] location: class org.acme.DummyApiComponentFileHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[58，6] cannot find symbol [ERROR] symbol: class Disabled [ERROR] location: class org.acme.DummyApiComponentFileHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentFileHelloIntegrationTest.java:[59，6] cannot find symbol [ERROR] symbol: class Test [ERROR] location: class org.acme.DummyApiComponentFileHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[32，6] cannot find symbol [ERROR] symbol: class Disabled [ERROR] location: class org.acme.DummyApiComponentJavadocHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[33，6] cannot find symbol [ERROR] symbol: class Test [ERROR] location: class org.acme.DummyApiComponentJavadocHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[43，6] cannot find symbol [ERROR] symbol: class Disabled [ERROR] location: class org.acme.DummyApiComponentJavadocHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[44，6] cannot find symbol [ERROR] symbol: class Test [ERROR] location: class org.acme.DummyApiComponentJavadocHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[58，6] cannot find symbol [ERROR] symbol: class Disabled [ERROR] location: class org.acme.DummyApiComponentJavadocHelloIntegrationTest [ERROR] /workspaces/camel-workspace/camel-dummy-api/camel-dummy-api-component/target/generated-test-sources/camel-component/org/acme/DummyApiComponentJavadocHelloIntegrationTest.java:[59，6] cannot find symbol [ERROR] symbol: class Test [ERROR] location: class org.acme.DummyApiComponentJavadocHelloIntegrationTest [ERROR] -> [Help 1] [ERROR] [ERROR] To see the full stack trace of the errors， re-run Maven with the -e switch . [ERROR] Re-run Maven using the -X switch to enable full debug logging. [ERROR] [ERROR] For more information about the errors and possible solutions， please read the following articles: [ERROR] [Help 1] http: //cwiki.apache.org/confluence/display/MAVEN/MojoFailureException [ERROR] [ERROR] After correcting the problems， you can resume the build with the command [ERROR] mvn <args> -rf :camel-dummy-api Hide Permalink Ahmed M added a comment - 12/Jul/20 13:04 - edited I created PR #3995 and #3996 to fix the remaining issue i found Show Ahmed M added a comment - 12/Jul/20 13:04 - edited I created PR #3995 and #3996 to fix the remaining issue i found
CAMEL-2983,Onder Sezgin,2020-07-23T14:19:57+0000,1595499597， where 1595499597 is the epoch,,Hide Permalink Onder Sezgin added a comment - 23/Jul/20 14:19 1- did a refactoring to remove ResteasyHttpBinding and DefaultResteasyHttpBinding. so it is now basically relying on httpBinding from camel-http-common unless any custom implementation is provided. 2- rather than plain streams， streamcache kind of streams are used while copying HttpServletRequest and HttpServletResponse. 3- as far as i can see， copying streams are needed via filtering..it may require a little bit of more exploration on how that could be done without filtering which i have not found a way yet. Show Onder Sezgin added a comment - 23/Jul/20 14:19 1- did a refactoring to remove ResteasyHttpBinding and DefaultResteasyHttpBinding. so it is now basically relying on httpBinding from camel-http-common unless any custom implementation is provided. 2- rather than plain streams， streamcache kind of streams are used while copying HttpServletRequest and HttpServletResponse. 3- as far as i can see， copying streams are needed via filtering..it may require a little bit of more exploration on how that could be done without filtering which i have not found a way yet.
CAMEL-2983,Onder Sezgin,2020-05-18T21:00:06+0000,1589821206， where 1589821206 is the epoch,,Hide Permalink Onder Sezgin added a comment - 18/May/20 21:00 done the changes as mentioned here https://github.com/apache/camel/pull/3777#issuecomment-626410269 Show Onder Sezgin added a comment - 18/May/20 21:00 done the changes as mentioned here https://github.com/apache/camel/pull/3777#issuecomment-626410269
CAMEL-2983,Unassigned,2020-07-23T14:22:36+0000,1595499756， where 1595499756 is the epoch,,Hide Permalink Onder Sezgin added a comment - 23/Jul/20 14:22 httpbinding removed and now relying on camel-http-common Show Onder Sezgin added a comment - 23/Jul/20 14:22 httpbinding removed and now relying on camel-http-common Hide Permalink Onder Sezgin added a comment - 23/Jul/20 14:25 sorry it is now gone into ResteasyProducer， reopening to follow up possibly Show Onder Sezgin added a comment - 23/Jul/20 14:25 sorry it is now gone into ResteasyProducer， reopening to follow up possibly
CAMEL-2983,Unassigned,2020-05-11T00:07:22+0000,1589141242， where 1589141242 is the epoch,,There are no comments yet on this issue.
CAMEL-2983,Unassigned,2020-05-11T00:05:52+0000,1589141152， where 1589141152 is the epoch,,There are no comments yet on this issue.
CAMEL-15037,Claus Ibsen,2020-05-10T11:37:27+0000,1589096247， where 1589096247 is the epoch,I reopen this one because this is still not working as expected on latest camel version (3.2.0) This test should fail:import org.apache.camel.RoutesBuilder;import org.apache.camel.builder.RouteBuilder;import org.apache.camel.component.mock.MockEndpoint;import org.apache.camel.test.junit4.CamelTestSupport;import org.assertj.core.api.Assertions;import org.junit.Test;public class MyRouteTest extends CamelTestSupport { private static final String ROUTE_ID = "mytest"; @Override public RoutesBuilder createRouteBuilder() throws Exception { return new RouteBuilder() { @Override public void configure() throws Exception { from("direct:foo") .id(ROUTE_ID) .to("mock:extract"); } }; } @Test public void shouldFail() throws InterruptedException { // given final MockEndpoint mock = getMockEndpoint("mock:extract"); // declare mock.expectedHeaderReceived("foo"， "bar"); // when//template.sendBody("direct:foo"， "test"); // then mock.assertIsSatisfied(); }}Because we were expecting some headers， but none headers were received,Hide Permalink michael elbaz added a comment - 10/May/20 11:37 - edited Just in case for those have the same problem (as a workaround): // Some test code... // Then assertMockEndpointsSatisfied(); out.getExchanges().stream() .map(Exchange::getIn) .map(Message::getHeaders) .forEach(headers -> Try.run(() -> asserts(headers)).get()); } private void asserts(Map<String， Object> headers) throws ParseException { assertEquals("F001"， headers.get(FORMAT)); assertEquals(new SimpleDateFormat("yyyyMMdd").parse("20200401")， headers.get(VALIDITY_DATE)); } Show michael elbaz added a comment - 10/May/20 11:37 - edited Just in case for those have the same problem (as a workaround): // Some test code... // Then assertMockEndpointsSatisfied(); out.getExchanges().stream() .map(Exchange::getIn) .map(Message::getHeaders) .forEach(headers -> Try.run(() -> asserts(headers)).get()); } private void asserts(Map< String ， Object > headers) throws ParseException { assertEquals( "F001" ， headers.get(FORMAT)); assertEquals( new SimpleDateFormat( "yyyyMMdd" ).parse( "20200401" )， headers.get(VALIDITY_DATE)); } Hide Permalink Claus Ibsen added a comment - 10/May/20 15:18 Cannot reproduce https://github.com/apache/camel/commit/5c6d63c7d5dab3e460e888448e967c7d75a0ac95 Show Claus Ibsen added a comment - 10/May/20 15:18 Cannot reproduce https://github.com/apache/camel/commit/5c6d63c7d5dab3e460e888448e967c7d75a0ac95 Hide Permalink michael elbaz added a comment - 10/May/20 18:03 - edited Here a reproductible test case i see it's happen only when using producer template package fr.aphp.referential.load.route; import org.apache.camel.EndpointInject; import org.apache.camel.Produce; import org.apache.camel.ProducerTemplate; import org.apache.camel.RoutesBuilder; import org.apache.camel.builder.RouteBuilder; import org.apache.camel.component.mock.MockEndpoint; import org.apache.camel.test.junit4.CamelTestSupport; import org.junit.Test; public class HeadersTest extends CamelTestSupport { @Produce(value = "direct:in") protected ProducerTemplate in; @EndpointInject(value = "mock:out") private MockEndpoint out; @Override protected RoutesBuilder createRouteBuilder() throws Exception { return new RouteBuilder() { @Override public void configure() throws Exception { // from("timer:test?repeatCount=1") // This one will work as expected from(in.getDefaultEndpoint()) .to(out); } }; } @Test public void test() throws InterruptedException { in.sendBody("test"); out.expectedHeaderReceived("header"， "value"); // Must fail but not :| assertMockEndpointsSatisfied(); } } Show michael elbaz added a comment - 10/May/20 18:03 - edited Here a reproductible test case i see it's happen only when using producer template package fr.aphp.referential.load.route; import org.apache.camel.EndpointInject; import org.apache.camel.Produce; import org.apache.camel.ProducerTemplate; import org.apache.camel.RoutesBuilder; import org.apache.camel.builder.RouteBuilder; import org.apache.camel.component.mock.MockEndpoint; import org.apache.camel.test.junit4.CamelTestSupport; import org.junit.Test; public class HeadersTest extends CamelTestSupport { @Produce(value = "direct:in" ) protected ProducerTemplate in; @EndpointInject(value = "mock:out" ) private MockEndpoint out; @Override protected RoutesBuilder createRouteBuilder() throws Exception { return new RouteBuilder() { @Override public void configure() throws Exception { // from( "timer:test?repeatCount=1" ) // This one will work as expected from(in.getDefaultEndpoint()) .to(out); } }; } @Test public void test() throws InterruptedException { in.sendBody( "test" ); out.expectedHeaderReceived( "header" ， "value" ); // Must fail but not :| assertMockEndpointsSatisfied(); } } Hide Permalink Claus Ibsen added a comment - 11/May/20 14:24 You should set your expecations BEFORE you send messages Should be out.expectedHeaderReceived("header"， "value"); // Must fail but not :| in.sendBody("test"); assertMockEndpointsSatisfied(); Show Claus Ibsen added a comment - 11/May/20 14:24 You should set your expecations BEFORE you send messages Should be out.expectedHeaderReceived("header"， "value"); // Must fail but not :| in.sendBody("test"); assertMockEndpointsSatisfied(); Hide Permalink michael elbaz added a comment - 11/May/20 22:48 A yes you're right i forgot this one ! (even if i think we need more documentation about this) sorry for the ticket thanks Show michael elbaz added a comment - 11/May/20 22:48 A yes you're right i forgot this one ! (even if i think we need more documentation about this) sorry for the ticket thanks
CAMEL-15036,Claus Ibsen,2020-05-11T10:49:12+0000,1589179752， where 1589179752 is the epoch,We can merge them together in a way so the API on CamelContext and a bit elsewhere is a bit easier to turn supervising on|off， by just setting a boolean flag， and the controller react accordingly.Today you would essentially need to set a different implementation which the auto configuration in SB/main hides. But we can benefit from having one implementation that can work on both modes.,Hide Permalink Claus Ibsen added a comment - 11/May/20 10:49 Okay keep separate implementation as we have an 3rd experimental cluster route controller. But made it easy to swap to use supervised in java， main， spring boot. Show Claus Ibsen added a comment - 11/May/20 10:49 Okay keep separate implementation as we have an 3rd experimental cluster route controller. But made it easy to swap to use supervised in java， main， spring boot. Hide Permalink Claus Ibsen added a comment - 11/May/20 12:11 Ohh that took a bit of time to add nice support for XML DSL as well. Show Claus Ibsen added a comment - 11/May/20 12:11 Ohh that took a bit of time to add nice support for XML DSL as well.
CAMEL-15035,Claus Ibsen,2020-05-10T16:05:04+0000,1589112304， where 1589112304 is the epoch,Lets make the route controller managed in JMX so you can see details of its status. Especially for supervised where you can see backoff details and the state of routes that may be in restarting phases or errors.,Hide Permalink Claus Ibsen added a comment - 10/May/20 16:05 - edited We should make the controller capture the caused exception for startup error， and expose this in JMX api as well， so you can see this - tabular data. DONE Show Claus Ibsen added a comment - 10/May/20 16:05 - edited We should make the controller capture the caused exception for startup error， and expose this in JMX api as well， so you can see this - tabular data. DONE Hide Permalink Claus Ibsen added a comment - 11/May/20 07:34 - edited TODO: Move JMX management from service to routecontroller as we have the default there already DONE Show Claus Ibsen added a comment - 11/May/20 07:34 - edited TODO: Move JMX management from service to routecontroller as we have the default there already DONE
CAMEL-15034,Claus Ibsen,2020-05-09T05:54:50+0000,1588989290， where 1588989290 is the epoch,To make it easy to specify routes to include|exclude by route id patterns， or uri patterns.Before it was somewhat only possible with spring boot， but we need to make it generic.,There are no comments yet on this issue.
CAMEL-15033,David Jencks,2020-05-11T06:06:03+0000,1589162763， where 1589162763 is the epoch,Use antora indexer extension to generate the index tables in the 2.x branch， similar to the latest and 3.2.x branches.,Hide Permalink David Jencks added a comment - 11/May/20 06:06 PR applied. Show David Jencks added a comment - 11/May/20 06:06 PR applied. Hide Permalink Andrea Cosentino added a comment - 11/May/20 13:12 The website build is broken on the 2.x branch https://builds.apache.org/view/C/view/Apache%20Camel/job/Camel.website/job/master/164/console David Jencks can you have a look? Thanks. Show Andrea Cosentino added a comment - 11/May/20 13:12 The website build is broken on the 2.x branch https://builds.apache.org/view/C/view/Apache%20Camel/job/Camel.website/job/master/164/console David Jencks can you have a look? Thanks. Hide Permalink David Jencks added a comment - 11/May/20 17:42 xrefs fixed with 2nd PR Show David Jencks added a comment - 11/May/20 17:42 xrefs fixed with 2nd PR
CAMEL-15032,Claus Ibsen,2020-05-08T15:58:48+0000,1588939128， where 1588939128 is the epoch,With CAMEL-13535 we are making it easier to use the new supervising route controller.It has a few too advanced features with filters and allow per route settings. Its often too much so lets just have a default configuration that are unified across the runtimes.Then remove the complex code in camel-spring-boot and use this from camel-core / camel-main.,Hide Permalink Claus Ibsen added a comment - 08/May/20 15:58 Okay have something in the works. Show Claus Ibsen added a comment - 08/May/20 15:58 Okay have something in the works.
CAMEL-15031,Unassigned,2020-05-08T11:57:13+0000,1588924633， where 1588924633 is the epoch,As of now the splunk-hec component accepts only local domains and not FQHNs. A FQHN is at least needed when you're talking to Splunks SAS offer， but might come in handy in other cases.See https://github.com/apache/camel/pull/3811 for a possible fix.,Hide Permalink Mario Rutz added a comment - 08/May/20 11:57 I will file a PR on github to fix this. Show Mario Rutz added a comment - 08/May/20 11:57 I will file a PR on github to fix this.
CAMEL-15030,Unassigned,2020-05-08T07:30:34+0000,1588908634， where 1588908634 is the epoch,[INFO] Updated doc file: /Users/davsclaus/workspace/camel/components/camel-bindy/src/main/docs/bindy-dataformat.adoc[INFO] Updated doc file: /Users/davsclaus/workspace/camel/components/camel-bindy/src/main/docs/bindy-dataformat.adoc[INFO] Updated doc file: /Users/davsclaus/workspace/camel/components/camel-bindy/src/main/docs/bindy-dataformat.adoc,There are no comments yet on this issue.
CAMEL-15029,Andrea Cosentino,2020-05-14T07:41:20+0000,1589427680， where 1589427680 is the epoch,We should move the examples to its own repo like we have for camel itself and other sub projects.Its actually easier to maintain and also for end users quicker to pull from github to try as its just examples and not all the other stuff.,Hide Permalink Claus Ibsen added a comment - 14/May/20 07:41 There is a repo now https://github.com/apache/camel-spring-boot-examples Show Claus Ibsen added a comment - 14/May/20 07:41 There is a repo now https://github.com/apache/camel-spring-boot-examples
CAMEL-15028,Unassigned,2020-05-08T06:33:05+0000,1588905185， where 1588905185 is the epoch,In camel 3.2.0 my tests started to fail with errors like 'No consumers available on endpoint: direct://message' To reproduce run mvn package in official camel-examples repo:/camel-examples/examples/camel-example-cdi-test ((camel-examples-3.2.0)) Result[ERROR] Failures:[ERROR] AdviceTest Timeout waiting for endpoints to receive enough messages. mock://messages timed out.,Hide Permalink Dennis added a comment - 08/May/20 06:33 Hi Claus， so advising in CDI will not be supported anymore? Den Show Dennis added a comment - 08/May/20 06:33 Hi Claus， so advising in CDI will not be supported anymore? Den
CAMEL-15027,Unassigned,2020-05-08T07:46:36+0000,1588909596， where 1588909596 is the epoch,https://issues.apache.org/jira/browse/CAMEL-11935 https://github.com/apache/camel/blob/camel-3.2.0/components/camel-kafka/src/main/java/org/apache/camel/component/kafka/KafkaEndpoint.java#L172-L176The KafkaEndpoint now populates Camel Message header values based on the Kafka record attributes. These are values specific to the Kafka record read from the poll.https://issues.apache.org/jira/browse/CAMEL-12503 The KafkaConsumer and KafkaProducer support propagation of Camel Headers to Kafka.When combining these two behaviours， this means that we set the 'kafka.' headers originally from the record， we produce these headers onto any subsequent Kafka messages. If camel-kafka then reads this message， it will overwrite the correct KafkaEndpoint set values for record specific information such as Topic name and timestamp， overwriting with the header values it had propagated from a prior Kafka record.Ultimately， camel-kafka sets incorrect message headers if reading a Kafka record produced by camel-kafka from a Kafka input previously.,Hide Permalink Claus Ibsen added a comment - 08/May/20 07:46 Can you provide an unit test or sample project that demonstrates/reproduces this issue， or a sample Camel route as it helps better to understand the problem and use as test for ensuring its fixed Show Claus Ibsen added a comment - 08/May/20 07:46 Can you provide an unit test or sample project that demonstrates/reproduces this issue， or a sample Camel route as it helps better to understand the problem and use as test for ensuring its fixed Hide Permalink Louis Burton added a comment - 08/May/20 23:38 Claus Ibsen thanks for coming back to me. I've added a couple of tests and a suggested fix in a PR as mentioned: https://github.com/apache/camel/pull/3813 Show Louis Burton added a comment - 08/May/20 23:38 Claus Ibsen thanks for coming back to me. I've added a couple of tests and a suggested fix in a PR as mentioned: https://github.com/apache/camel/pull/3813 Hide Permalink Claus Ibsen added a comment - 09/May/20 05:50 Thanks for reporting and the PR Show Claus Ibsen added a comment - 09/May/20 05:50 Thanks for reporting and the PR
CAMEL-15026,Unassigned,2020-05-07T12:34:00+0000,1588840440， where 1588840440 is the epoch,Camel throws an TypeConversionException when receiving a HTTP response， where the Content-Type header includes extended information， e.g. version info.org.apache.http.headers - [CID=879adbb4-d406-40e7-8529-5a20427157bf] - http-outgoing-0 << HTTP/1.1 400 Bad Requestorg.apache.http.headers - [CID=879adbb4-d406-40e7-8529-5a20427157bf] - http-outgoing-0 << Content-Type: application/json; charset=utf-8; v=1.0...org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: java.lang.String with value [Body is instance of java.io.InputStream] due utf-8; v=1.0....Caused by: java.io.UnsupportedEncodingException: utf-8; v=1.0 at sun.nio.cs.StreamDecoder.forInputStreamReader(StreamDecoder.java:71)The exception throw is TypeConversionException and the response to the caller of route will get a 404 error back， even though the original response code was 400.It appears that Camel doesn't handle the ; v=1.0 part of the content-type header.,Hide Permalink Jan Bednar added a comment - 07/May/20 12:34 I believe this is fixed with CAMEL-12424 in 2.21.1. Can you try to upgrade? Show Jan Bednar added a comment - 07/May/20 12:34 I believe this is fixed with CAMEL-12424 in 2.21.1. Can you try to upgrade? Hide Permalink Benny Slater added a comment - 07/May/20 23:39 - edited I've tried with version 2.21.1， 2.21.5 (and 2.23.2.fuse-760030-redhat-00001 as we use Redhat Fuse)， but I get exactly the same exception. All my camel dependencies were updated to the mentioned version not only core and http4. Is there a way where I can overwrite or register a modified TypeConverter， without recompiling Camel HTTP4， as a temporary workaround ? Show Benny Slater added a comment - 07/May/20 23:39 - edited I've tried with version 2.21.1， 2.21.5 (and 2.23.2.fuse-760030-redhat-00001 as we use Redhat Fuse)， but I get exactly the same exception. All my camel dependencies were updated to the mentioned version not only core and http4. Is there a way where I can overwrite or register a modified TypeConverter， without recompiling Camel HTTP4， as a temporary workaround ?
CAMEL-15025,Unassigned,2020-05-07T10:10:26+0000,1588831826， where 1588831826 is the epoch,pass correct value to swagger-codegen-maven-plugin and set default value to 'false' for backward compatibility,There are no comments yet on this issue.
CAMEL-15024,Unassigned,2020-05-07T09:50:17+0000,1588830617， where 1588830617 is the epoch,,There are no comments yet on this issue.
CAMEL-15023,Unassigned,2020-05-07T04:43:13+0000,1588812193， where 1588812193 is the epoch,There are a lot of useful options [1].Usage:<configuration> <configOptions> <library>jersey2</library> <dateLibrary>java8</dateLibrary> </configOptions>...</configuration> https://github.com/swagger-api/swagger-codegen/issues/7795,Hide Permalink Claus Ibsen added a comment - 07/May/20 04:43 Thanks for reporting and the PR Show Claus Ibsen added a comment - 07/May/20 04:43 Thanks for reporting and the PR
CAMEL-15022,Andrea Cosentino,2020-05-06T17:47:34+0000,1588772854， where 1588772854 is the epoch,In Kafka the headers are stored as byte arrays rather then string. OpenTracing with Jaeger inserts a string header uber-trace-id which works. However when it tries to read it as a string when the message is consumed it presumably does a toString which doesn't return the actual string since the header is returned as a byte array.This can be worked around by using a KafkaHeaderDeserializer as per here:https://github.com/gnunn1/seating/blob/master/seat-listener/src/main/java/com/redhat/demo/HeaderDeserializer.javaNote you need to deserialize the kafka.TOPIC as well since the KafkaSpanDecorator tries to cast the header as a string which fails the header is returned as byte array.https://github.com/apache/camel/blob/camel-2.23.x/components/camel-opentracing/src/main/java/org/apache/camel/opentracing/decorators/KafkaSpanDecorator.java#L49,Hide Permalink Claus Ibsen added a comment - 06/May/20 17:47 Thanks are you able to work on a fix. It should be on master branch for Camel 3.x. Then we can look at whether we can backport this to 2.25.x branch aftetwards. Show Claus Ibsen added a comment - 06/May/20 17:47 Thanks are you able to work on a fix. It should be on master branch for Camel 3.x. Then we can look at whether we can backport this to 2.25.x branch aftetwards. Hide Permalink Gerald Nunn added a comment - 06/May/20 17:52 Unfortunately I'm not familiar enough with the camel-opentracing architecture to put together a proper fix. Show Gerald Nunn added a comment - 06/May/20 17:52 Unfortunately I'm not familiar enough with the camel-opentracing architecture to put together a proper fix.
CAMEL-15021,Unassigned,2020-05-06T15:41:46+0000,1588765306， where 1588765306 is the epoch,Hi!Just updated from 3.0.0-RC3 to 3.2.0 and creating a timed route like: from("timer://timer?fixedRate=true&period=10s")in conjunction with Spring throws the following exception: java.lang.IllegalStateException: Failed to load ApplicationContextjava.lang.IllegalStateException: Failed to load ApplicationContext at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:125) at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:108) at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:99) at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:79) at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:54) at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:246) at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:97) at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$invokeTestInstancePostProcessors$5(ClassTestDescriptor.java:349) at org.junit.jupiter.engine.descriptor.JupiterTestDescriptor.executeAndMaskThrowable(JupiterTestDescriptor.java:215) at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$invokeTestInstancePostProcessors$6(ClassTestDescriptor.java:349) at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195) at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177) at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1654) at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484) at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474) at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312) at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658) at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.invokeTestInstancePostProcessors(ClassTestDescriptor.java:348) at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.instantiateAndPostProcessTestInstance(ClassTestDescriptor.java:270) at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$testInstanceProvider$2(ClassTestDescriptor.java:259) at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$testInstanceProvider$3(ClassTestDescriptor.java:263) at java.base/java.util.Optional.orElseGet(Optional.java:369) at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.lambda$testInstanceProvider$4(ClassTestDescriptor.java:262) at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:82) at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:59) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$0(NodeTestTask.java:83) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72) at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:83) at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:69) at java.base/java.util.ArrayList.forEach(ArrayList.java:1540) at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$4(NodeTestTask.java:112) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72) at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:98) at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:74) at java.base/java.util.ArrayList.forEach(ArrayList.java:1540) at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38) at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$4(NodeTestTask.java:112) at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:72) at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:98) at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:74) at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32) at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51) at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:220) at org.junit.platform.launcher.core.DefaultLauncher.lambda$execute$6(DefaultLauncher.java:188) at org.junit.platform.launcher.core.DefaultLauncher.withInterceptedStreams(DefaultLauncher.java:202) at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:181) at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:128) at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69) at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33) at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230) at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)Caused by: org.apache.camel.FailedToCreateRouteException: Failed to create route TimerPlaylistCurrent: Route(TimerPlaylistCurrent)[From[timer://timer?fixedRate=tru... because of Failed to resolve endpoint: timer://timer?fixedRate=true&period=10s due to: Error binding property (period=10s) with name: period on bean: timer://timer?fixedRate=true&period=10s with value: 10s at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:123) at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:353) at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:327) at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2598) at org.apache.camel.support.service.BaseService.init(BaseService.java:83) at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2431) at org.apache.camel.support.service.BaseService.start(BaseService.java:111) at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2448) at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:121) at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:157) at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172) at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165) at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139) at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:402) at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:359) at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:896) at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:552) at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775) at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:127) at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99) at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:117) ... 54 moreCaused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: timer://timer?fixedRate=true&period=10s due to: Error binding property (period=10s) with name: period on bean: timer://timer?fixedRate=true&period=10s with value: 10s at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:874) at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:764) at org.apache.camel.support.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:57) at org.apache.camel.reifier.AbstractReifier.resolveEndpoint(AbstractReifier.java:166) at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:259) at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:117) ... 76 moreCaused by: org.apache.camel.PropertyBindingException: Error binding property (period=10s) with name: period on bean: timer://timer?fixedRate=true&period=10s with value: 10s at org.apache.camel.support.PropertyBindingSupport.doBindProperties(PropertyBindingSupport.java:555) at org.apache.camel.support.PropertyBindingSupport.access$000(PropertyBindingSupport.java:71) at org.apache.camel.support.PropertyBindingSupport$Builder.bind(PropertyBindingSupport.java:255) at org.apache.camel.support.DefaultEndpoint.setProperties(DefaultEndpoint.java:433) at org.apache.camel.support.DefaultEndpoint.configureProperties(DefaultEndpoint.java:401) at org.apache.camel.support.DefaultComponent.setProperties(DefaultComponent.java:449) at org.apache.camel.component.timer.TimerComponent.createEndpoint(TimerComponent.java:112) at org.apache.camel.support.DefaultComponent.createEndpoint(DefaultComponent.java:233) at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:842) ... 81 moreCaused by: org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: long with value 10s due to java.lang.NumberFormatException: For input string: "10s" at org.apache.camel.support.SimpleTypeConverter.convertTo(SimpleTypeConverter.java:103) at org.apache.camel.impl.converter.CoreTypeConverterRegistry.doConvertTo(CoreTypeConverterRegistry.java:338) at org.apache.camel.impl.converter.CoreTypeConverterRegistry.doConvertTo(CoreTypeConverterRegistry.java:234) at org.apache.camel.impl.converter.CoreTypeConverterRegistry.convertTo(CoreTypeConverterRegistry.java:164) at org.apache.camel.impl.converter.CoreTypeConverterRegistry.convertTo(CoreTypeConverterRegistry.java:119) at org.apache.camel.support.component.PropertyConfigurerSupport.property(PropertyConfigurerSupport.java:73) at org.apache.camel.component.timer.TimerEndpointConfigurer.configure(TimerEndpointConfigurer.java:37) at org.apache.camel.support.PropertyBindingSupport.doBindProperties(PropertyBindingSupport.java:550) ... 89 moreCaused by: java.lang.NumberFormatException: For input string: "10s" at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) at java.base/java.lang.Long.parseLong(Long.java:692) at java.base/java.lang.Long.valueOf(Long.java:1144) at org.apache.camel.converter.ObjectConverter.toLong(ObjectConverter.java:177) at org.apache.camel.converter.ObjectConverterLoader.lambda$registerConverters$17(ObjectConverterLoader.java:63) at org.apache.camel.support.SimpleTypeConverter.convertTo(SimpleTypeConverter.java:99) ... 96 moreMaybe the documentation has not beed updated? https://camel.apache.org/components/latest/timer-component.htmlfrom("timer://timer?fixedRate=true&period=10000")works just fine.,Hide Permalink Claus Ibsen added a comment - 06/May/20 15:41 See the upgrade guide https://camel.apache.org/manual/latest/camel-3x-upgrade-guide.html Show Claus Ibsen added a comment - 06/May/20 15:41 See the upgrade guide https://camel.apache.org/manual/latest/camel-3x-upgrade-guide.html Hide Permalink Kamil added a comment - 06/May/20 16:21 I see， thanks! Still "Instead of 60000 you can use period=60s which is more friendly to read." should be removed from https://camel.apache.org/components/latest/timer-component.html IMHO. Show Kamil added a comment - 06/May/20 16:21 I see， thanks! Still "Instead of 60000 you can use period=60s which is more friendly to read." should be removed from https://camel.apache.org/components/latest/timer-component.html IMHO. Hide Permalink Claus Ibsen added a comment - 06/May/20 16:43 Ah yeah it should be removed， you are welcome to help and fix it with a PR Show Claus Ibsen added a comment - 06/May/20 16:43 Ah yeah it should be removed， you are welcome to help and fix it with a PR Hide Permalink Claus Ibsen added a comment - 06/May/20 17:46 I found some time to fix the docs， thanks for reporting this Show Claus Ibsen added a comment - 06/May/20 17:46 I found some time to fix the docs， thanks for reporting this
CAMEL-15020,Claus Ibsen,2020-05-06T17:49:09+0000,1588772949， where 1588772949 is the epoch,The FAQ article Why is the exception null when I use onException? states that exchange.getException() returns null if onException() is used in conjunction with handled(true).Whether it's handled or not， exchange.getException() return always null since the default error handling mechanism clears the exception already:RedeliveryErrorHandler.deliverToFailureProcessor() - Camel 2.25.0// we did not success with the redelivery so now we let the failure processor handle it// clear exception as we let the failure processor handle itexchange.setException(null);I'm fairly new too Camel error handling， it would've been helpful in advance to know it.References: Exception in Exchange is null Apache Camel: exchange.getException() vs CamelExceptionCaught property,Hide Permalink Claus Ibsen added a comment - 06/May/20 17:49 - edited Just because it says handled(true) does not imply that when you dont do this that its not null. But I agree it can be confusing so lets update the FAQ. Thanks for reporting. Show Claus Ibsen added a comment - 06/May/20 17:49 - edited Just because it says handled(true) does not imply that when you dont do this that its not null. But I agree it can be confusing so lets update the FAQ. Thanks for reporting.
CAMEL-15019,James Netherton,2020-05-06T14:36:15+0000,1588761375， where 1588761375 is the epoch,Since camel-mongo already migrated to using the Mongo 4.x client libs， it'd be good to get camel-mongo-gridfs upgraded too.,There are no comments yet on this issue.
CAMEL-15018,Unassigned,2020-05-06T08:12:37+0000,1588738357， where 1588738357 is the epoch,We should not log record's payload by default， as it may contain sensitive information. Anyway it is useful to have a configuration option to enable/disable it for debugging purpose.,Hide Permalink Andrea Cosentino added a comment - 06/May/20 08:12 Please report on the github issues tracker for camel-kafka-connector. Show Andrea Cosentino added a comment - 06/May/20 08:12 Please report on the github issues tracker for camel-kafka-connector.
CAMEL-15017,Claus Ibsen,2020-05-06T07:43:51+0000,1588736631， where 1588736631 is the epoch,Hi，I came across this error while trying to use a Quartz scheduler with a JPA component but I guess it applies to all the endpoints extending ScheduledPollEndpoint.If I usefrom("jpa://myEntity?scheduler=quartz2&scheduler.cron=0+*+*+?+*+*+*") /* ... */I receive the following error:org.apache.camel.FailedToCreateConsumerException: Failed to create Consumer for endpoint: jpa://myEntity?scheduler=quartz2&scheduler.cron=0+*+*+%3F+*+*+*. Reason: There are 1 scheduler parameters that couldn't be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{cron=0 * * ? * * *}]at org.apache.camel.impl.ScheduledPollConsumer.doStart(ScheduledPollConsumer.java:433) ~[camel-core-2.25.1.jar:2.25.1] at org.apache.camel.component.jpa.JpaConsumer.doStart(JpaConsumer.java:530) ~[camel-jpa-2.25.1.jar:2.25.1]This happens because the scheduler is an instance of DefaultScheduledPollConsumerScheduler. After some debugging I found out that when ScheduledPollEndpoint#configureScheduledPollConsumerProperties is called， schedulerName is always null (Endpoint.configureProperties is invoked before setting endpoint properties using reflection).The only workaround I've found so far is to write a custom component and force the scheduler on the endpoint:public class MyJpaComponent extends JpaComponent { @Override protected Endpoint createEndpoint(String uri， String path， Map<String， Object> options) throws Exception { JpaEndpoint endpoint = (JpaEndpoint) super.createEndpoint(uri， path， options); endpoint.setScheduler("quartz2"); return endpoint; }}Thanks，lorenzo,Hide Permalink Claus Ibsen added a comment - 06/May/20 07:43 Can you try and test with Camel 3.2.x release. Show Claus Ibsen added a comment - 06/May/20 07:43 Can you try and test with Camel 3.2.x release. Hide Permalink Lorenzo Benvenuti added a comment - 06/May/20 09:36 I'm struggling to make my application work with Camel 3.2.0. Bumping the version caused some dependency issues; once I fixed those， I started receiving an error: Caused by: javax.persistence.PersistenceException: No Persistence provider for EntityManager named camel at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:85) ~[javax.persistence-api-2.2.jar:2.2] at org.springframework.orm.jpa.LocalEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalEntityManagerFactoryBean.java:96) ~[spring-orm-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:390) ~[spring-orm-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:377) ~[spring-orm-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.apache.camel.component.jpa.JpaEndpoint.createEntityManagerFactory(JpaEndpoint.java:539) ~[camel-jpa-3.2.0.jar:3.2.0] error. It looks like EntityManagerFactory is not properly injected in the JPA component. When the JPA endpoint is created using JpaEndpoint(String uri， JpaComponent component) constructor， in Camel 2.25.1 component.getEntityManagerFactory() returns the Spring auto-configured EntityManagerFactory， in Camel 3.2.0 it returns null and this causes Camel to try to create a new EntityManagerFactory. Thanks， lorenzo Show Lorenzo Benvenuti added a comment - 06/May/20 09:36 I'm struggling to make my application work with Camel 3.2.0. Bumping the version caused some dependency issues; once I fixed those， I started receiving an error: Caused by: javax.persistence.PersistenceException: No Persistence provider for EntityManager named camel at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:85) ~[javax.persistence-api-2.2.jar:2.2] at org.springframework.orm.jpa.LocalEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalEntityManagerFactoryBean.java:96) ~[spring-orm-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:390) ~[spring-orm-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:377) ~[spring-orm-5.1.5.RELEASE.jar:5.1.5.RELEASE] at org.apache.camel.component.jpa.JpaEndpoint.createEntityManagerFactory(JpaEndpoint.java:539) ~[camel-jpa-3.2.0.jar:3.2.0] error. It looks like EntityManagerFactory is not properly injected in the JPA component. When the JPA endpoint is created using JpaEndpoint(String uri， JpaComponent component) constructor， in Camel 2.25.1 component.getEntityManagerFactory() returns the Spring auto-configured EntityManagerFactory ， in Camel 3.2.0 it returns null and this causes Camel to try to create a new EntityManagerFactory . Thanks， lorenzo Hide Permalink Claus Ibsen added a comment - 06/May/20 12:16 When the JPA component starts in 3.2 it logs that it auto discover this EMF (its start method). If it cannot find one it logs at DEBUG otherwise at INFO LOG.debug("Could not find a single EntityManagerFactory in registry as there was {} instances."， map.size()); What do you see? Show Claus Ibsen added a comment - 06/May/20 12:16 When the JPA component starts in 3.2 it logs that it auto discover this EMF (its start method). If it cannot find one it logs at DEBUG otherwise at INFO LOG.debug("Could not find a single EntityManagerFactory in registry as there was {} instances."， map.size()); What do you see? Hide Permalink Claus Ibsen added a comment - 06/May/20 12:27 It works in 3.x https://github.com/apache/camel/commit/50e8b4c0c55df9bf164e94e4a474ef298106240e Show Claus Ibsen added a comment - 06/May/20 12:27 It works in 3.x https://github.com/apache/camel/commit/50e8b4c0c55df9bf164e94e4a474ef298106240e Hide Permalink Lorenzo Benvenuti added a comment - 06/May/20 13:09 - edited 2020-05-06T14:31:33.964+0200 INFO 17321 --- [ restartedMain] o.a.camel.component.jpa.JpaComponent : Using EntityManagerFactory found in registry with id [entityManagerFactory] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@13645b9b But I see the JpaComponent#doStart method， which loads the entityManagerFactory from the context in case it's null， is called after the JpaComponent#createEndpoint method; so when the JpaEndpoint constructor is invoked component.getEntityManagerFactory() returns null. Show Lorenzo Benvenuti added a comment - 06/May/20 13:09 - edited 2020-05-06T14:31:33.964+0200 INFO 17321 --- [ restartedMain] o.a.camel.component.jpa.JpaComponent : Using EntityManagerFactory found in registry with id [entityManagerFactory] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean@13645b9b But I see the JpaComponent#doStart method， which loads the entityManagerFactory from the context in case it's null， is called after the JpaComponent#createEndpoint method; so when the JpaEndpoint constructor is invoked component.getEntityManagerFactory() returns null. Hide Permalink Claus Ibsen added a comment - 06/May/20 17:42 yeah we have improved jpa component in camel 3.3 where this works. Show Claus Ibsen added a comment - 06/May/20 17:42 yeah we have improved jpa component in camel 3.3 where this works.
CAMEL-15016,Unassigned,2020-05-05T20:30:47+0000,1588696247， where 1588696247 is the epoch,Lets look at if we can add some support for kafka transactions in the consumer and producer. But mind this is Kafka specific and not for XA transactions etc.But it can benefit to be able to rollback sending to kafka in the producer if for example you consume from X and send to kafka and then send to something else and that fails and then you want to rollback sending to kafka.,Hide Permalink Claus Ibsen added a comment - 05/May/20 20:30 A guide for kafka transactions https://www.baeldung.com/kafka-exactly-once Show Claus Ibsen added a comment - 05/May/20 20:30 A guide for kafka transactions https://www.baeldung.com/kafka-exactly-once Hide Permalink Zheng Feng added a comment - 20/May/20 01:42 It looks interesting and I wonder how to control the kafka transactions in the camel ? Is it possible to introduce the kafka-tx component to do such things， just like "kafka-tx:begin"， "kafka-tx:commit"， "kafka-tx:rollback" ? Or we can use the LAST RESOURCE COMMIT OPTIMIZATION (LRCO) to add it in the XA transaction ? we can introduce a bridge from the kafka transaction to the xa and implement the LRCO. Show Zheng Feng added a comment - 20/May/20 01:42 It looks interesting and I wonder how to control the kafka transactions in the camel ? Is it possible to introduce the kafka-tx component to do such things， just like "kafka-tx:begin"， "kafka-tx:commit"， "kafka-tx:rollback" ? Or we can use the LAST RESOURCE COMMIT OPTIMIZATION (LRCO) to add it in the XA transaction ? we can introduce a bridge from the kafka transaction to the xa and implement the LRCO.
CAMEL-15015,Claus Ibsen,2020-05-05T20:21:44+0000,1588695704， where 1588695704 is the epoch,It would be nice if we add support for RAW() in endpoint dsl so you can use that for options that should be unencoded such as a passwordSee SOhttps://stackoverflow.com/questions/61600307/using-raw-in-camel-3-endpoint-dsl,There are no comments yet on this issue.
CAMEL-15014,Unassigned,2020-05-05T15:29:49+0000,1588678189， where 1588678189 is the epoch,When generating a Camel Spring project with the following archetypeVersion:mvn archetype:generate \-DarchetypeGroupId=org.apache.camel.archetypes \ -DarchetypeArtifactId=camel-archetype-spring \ -DarchetypeVersion=3.2.0 \ -DgroupId=myGroupId \ -DartifactId=demoThen when I run it with:mvn camel:runThe following error is reported:Cannot run OSGi Blueprint Main because camel-blueprint-main JAR is not available on classpath -> [Help 1],Hide Permalink Jan Bednar added a comment - 05/May/20 15:29 This is already fixed. 3.3 is expected to be released by weekend. Show Jan Bednar added a comment - 05/May/20 15:29 This is already fixed. 3.3 is expected to be released by weekend.
CAMEL-15013,Claus Ibsen,2020-05-05T09:42:17+0000,1588657337， where 1588657337 is the epoch,freemarker， velocity， mvel， mustache etc should have option on component level to turn on|off allowing to accept headers with override template.And by default turned off， so the template is used from the resource in the endpoint (no surprises).,Hide Permalink Claus Ibsen added a comment - 05/May/20 09:42 - edited For Camel 3.x freemarker DONE velocity DONE mvel DONE mustache DONE string-template DONE chunk DONE jolt DONE jslt DONE robotframework DONE Show Claus Ibsen added a comment - 05/May/20 09:42 - edited For Camel 3.x freemarker DONE velocity DONE mvel DONE mustache DONE string-template DONE chunk DONE jolt DONE jslt DONE robotframework DONE Hide Permalink Claus Ibsen added a comment - 05/May/20 18:38 For Camel 2.x freemarker DONE velocity DONE mvel DONE mustache DONE string-template DONE chunk DONE jolt DONE Show Claus Ibsen added a comment - 05/May/20 18:38 For Camel 2.x freemarker DONE velocity DONE mvel DONE mustache DONE string-template DONE chunk DONE jolt DONE
CAMEL-15012,Andrea Cosentino,2020-05-05T08:56:16+0000,1588654576， where 1588654576 is the epoch,The proxyHost and proxyPort query parameters are ignored by the camel-http compoment. They probably should be handled in org.apache.camel.component.http.HttpComponent#configureHttpProxy. Right now that method only handles proxyAuthHost and proxyAuthPort. Using those query parameters seems to be the workaround， too， as org.apache.camel.component.http.ProxyHttpClientConfigurer makes no distinction between authentication and non-authenticating proxies. Relates to CAMEL-10216.,There are no comments yet on this issue.
CAMEL-15011,Unassigned,2020-05-05T06:34:30+0000,1588646070， where 1588646070 is the epoch,The AWS SDK v2 supports asynchronous mode [1] so it would be nice if our aws2 component would support that model. We should also investigate if and how we can share the event loop between camel and the aws2 sdk for an end2end reactive story.[1] https://docs.aws.amazon.com/sdk-for-java/v2/developer-guide/basics-async.html,There are no comments yet on this issue.
CAMEL-15010,Unassigned,2020-05-05T06:41:10+0000,1588646470， where 1588646470 is the epoch,,Hide Permalink Francois Papon added a comment - 05/May/20 06:41 Already done with another commit. Show Francois Papon added a comment - 05/May/20 06:41 Already done with another commit.
CAMEL-15009,Claus Ibsen,2020-05-05T07:47:38+0000,1588650458， where 1588650458 is the epoch,In ActiveMQComponentConfiguration the documentation states that 'usePooledConnection' is true by default， while the property is initialized to false,Hide Permalink Claus Ibsen added a comment - 05/May/20 07:47 Thanks for reporting and the PR Show Claus Ibsen added a comment - 05/May/20 07:47 Thanks for reporting and the PR
CAMEL-15008,Claus Ibsen,2020-05-04T14:00:55+0000,1588586455， where 1588586455 is the epoch,The EIPs and routing engine may favour scheduling their own tasks first， which can lead to some tasks being executed after instead of in the queue order.The use-case with splitter and aggregator using a single thread showed this from CAMEL-14996. This lead to the splitter task being scheduled first and was executed until its finished and then queued up internal tasks for the aggregator completion that was scheduled last.,There are no comments yet on this issue.
CAMEL-15007,Jiri Ondrusek,2020-05-04T10:50:06+0000,1588575006， where 1588575006 is the epoch,With improvement https://issues.apache.org/jira/browse/CAMEL-14950 there should be an example of usage of this component,There are no comments yet on this issue.
CAMEL-15006,Luca Burgazzoli,2020-05-04T10:34:54+0000,1588574094， where 1588574094 is the epoch,,There are no comments yet on this issue.
CAMEL-15005,Luca Burgazzoli,2020-05-21T13:36:52+0000,1590053812， where 1590053812 is the epoch,,Hide Permalink Zoran Regvart added a comment - 21/May/20 13:36 This broke backward compatibility and is not mentioned in the migration guide. Show Zoran Regvart added a comment - 21/May/20 13:36 This broke backward compatibility and is not mentioned in the migration guide. Hide Permalink Luca Burgazzoli added a comment - 21/May/20 16:06 Should be fixed by https://github.com/apache/camel/pull/3848 Show Luca Burgazzoli added a comment - 21/May/20 16:06 Should be fixed by https://github.com/apache/camel/pull/3848
CAMEL-15004,Luca Burgazzoli,2020-05-04T08:16:46+0000,1588565806， where 1588565806 is the epoch,The VertxPlatformHttpServer class is package protected so it is not possible to use it outside the package,There are no comments yet on this issue.
CAMEL-15003,Luca Burgazzoli,2020-05-04T07:48:51+0000,1588564131， where 1588564131 is the epoch,The PropertyBindingSupport::autowireSingletonPropertiesFromRegistry uses Class::getSimpleName to determine the name of a component configurer but in case of a component created using an anonymous class i.e. to override some behaviors， PropertyBindingSupport will fails as Class::getSimpleName returns an empty string.,There are no comments yet on this issue.
CAMEL-15002,Guillaume Nodet,2020-05-04T15:03:50+0000,1588590230， where 1588590230 is the epoch,,Hide Permalink Claus Ibsen added a comment - 04/May/20 15:03 In the future we may wonder having an interface for BaseMainSupport that end user can depend on， so we can more safely work on BaseMainSupport as an internal implementation detail. Show Claus Ibsen added a comment - 04/May/20 15:03 In the future we may wonder having an interface for BaseMainSupport that end user can depend on， so we can more safely work on BaseMainSupport as an internal implementation detail. Hide Permalink Guillaume Nodet added a comment - 04/May/20 15:46 Yes， I fully agree an interface would be welcomed here. Show Guillaume Nodet added a comment - 04/May/20 15:46 Yes， I fully agree an interface would be welcomed here.
CAMEL-15001,Jan Bednar,2020-05-04T09:40:49+0000,1588570849， where 1588570849 is the epoch,Tooling should support `@Metadata(excludeProperties)` on component class.Eg to exclude `bridgeErrorHandler`， which is not supported on JMS and ActiveMQ component， from model.https://stackoverflow.com/questions/61578332/jms-components-bridge-error-handler-not-working,Hide Permalink Jan Bednar added a comment - 04/May/20 09:40 Implemented in master@92c0295. Show Jan Bednar added a comment - 04/May/20 09:40 Implemented in master@92c0295 .
CAMEL-15000,Unassigned,2020-05-04T09:04:41+0000,1588568681， where 1588568681 is the epoch,I've defined a Blueprint DSL file with a securityHandler configuration for multiple paths as following<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd"> <bean id="constraint_TSTISP001" class="org.eclipse.jetty.util.security.Constraint"> <property name="name" value="BASIC" /> <property name="authenticate" value="true" /> <property name="roles"> <list> <value>TSTISP001</value> </list> </property> </bean> <bean id="constraintMapping_TSTISP001" class="org.eclipse.jetty.security.ConstraintMapping"> <property name="constraint" ref="constraint_TSTISP001" /> <property name="pathSpec" value="/hello1" /> </bean> <bean id="constraint_TSTISP002" class="org.eclipse.jetty.util.security.Constraint"> <property name="name" value="BASIC" /> <property name="authenticate" value="true" /> <property name="roles"> <list> <value>TSTISP002</value> </list> </property> </bean> <bean id="constraintMapping_TSTISP002" class="org.eclipse.jetty.security.ConstraintMapping"> <property name="constraint" ref="constraint_TSTISP002" /> <property name="pathSpec" value="/hello2" /> </bean> <bean id="securityHandlerImpl" class="org.eclipse.jetty.security.ConstraintSecurityHandler"> <property name="loginService"> <bean class="org.eclipse.jetty.security.HashLoginService"> <property name="config" value="/opt/apache-karaf/etc/users.properties" /> </bean> </property> <property name="authenticator"> <bean class="org.eclipse.jetty.security.authentication.BasicAuthenticator" /> </property> <property name="constraintMappings"> <list> <ref component-id="constraintMapping_TSTISP001" /> <ref component-id="constraintMapping_TSTISP002" /> </list> </property> </bean> <service id="securityHandlerIsp" ref="securityHandlerImpl" interface="org.eclipse.jetty.server.Handler" /> <sslContextParameters id="sslContextParameters" xmlns="http://camel.apache.org/schema/blueprint"> ... </sslContextParameters> <service ref="sslContextParameters" auto-export="all-classes" /></blueprint>The use in another Blueprint DSL file as attached<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:ext="http://aries.apache.org/blueprint/xmlns/blueprint-ext/v1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cm="http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.1.0" xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd"> <!-- set reference to the SSLContextParameters --> <reference id="sslContextParameters" interface="org.apache.camel.support.jsse.SSLContextParameters" ext:proxy-method="classes" /> <!-- set reference to the securityHandler --> <reference id="securityHandlerIsp" interface="org.eclipse.jetty.server.Handler" /> <camelContext id="isp.context.user.TSTISP001" xmlns="http://camel.apache.org/schema/blueprint" streamCache="true" useBreadcrumb="true"> <route id="isp.route.user.TSTISP001"> <from uri="jetty:https://0.0.0.0:8444/hello1?sslContextParameters=#sslContextParameters&amp;handlers=securityHandlerIsp" /> <setBody><constant>Hello 1</constant></setBody> </route> </camelContext></blueprint>causes an error2020-05-02T19:15:46，202 | ERROR | Blueprint Event Dispatcher: 1 | BlueprintCamelContext | 92 - org.apache.camel.camel-api - 3.0.0 | Error starting CamelContext (isp.context.user.TSTISP001) due to exception thrown: STARTEDjava.lang.IllegalStateException: STARTED at org.eclipse.jetty.server.handler.AbstractHandlerContainer.setServer(AbstractHandlerContainer.java:131) ~[!/:9.4.20.v20190813] at Proxyb4d61c20_c161_4396_a800_1fa982bbaaea.setServer(Unknown Source) ~[?:?] at org.eclipse.jetty.server.handler.HandlerCollection.updateHandlers(HandlerCollection.java:117) ~[!/:9.4.20.v20190813] at org.eclipse.jetty.server.handler.HandlerCollection.addHandler(HandlerCollection.java:180) ~[!/:9.4.20.v20190813] at org.apache.camel.component.jetty.JettyHttpComponent.addJettyHandlers(JettyHttpComponent.java:1182) ~[!/:3.0.0] at org.apache.camel.component.jetty.JettyHttpComponent.createServletForConnector(JettyHttpComponent.java:1145) ~[!/:3.0.0] at org.apache.camel.component.jetty.JettyHttpComponent.connect(JettyHttpComponent.java:329) ~[!/:3.0.0] at org.apache.camel.http.common.HttpCommonEndpoint.connect(HttpCommonEndpoint.java:177) ~[!/:3.0.0] at org.apache.camel.http.common.HttpConsumer.doStart(HttpConsumer.java:58) ~[!/:3.0.0] at org.apache.camel.component.jetty.JettyHttpConsumer.doStart(JettyHttpConsumer.java:31) ~[!/:3.0.0] at org.apache.camel.support.service.ServiceSupport.start(ServiceSupport.java:117) ~[!/:3.0.0] at org.apache.camel.impl.engine.AbstractCamelContext.startService(AbstractCamelContext.java:2900) ~[!/:3.0.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartOrResumeRouteConsumers(AbstractCamelContext.java:3227) ~[!/:3.0.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartRouteConsumers(AbstractCamelContext.java:3161) ~[!/:3.0.0] at org.apache.camel.impl.engine.AbstractCamelContext.safelyStartRouteServices(AbstractCamelContext.java:3071) ~[!/:3.0.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartOrResumeRoutes(AbstractCamelContext.java:2836) ~[!/:3.0.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartCamel(AbstractCamelContext.java:2640) ~[!/:3.0.0] at org.apache.camel.impl.engine.AbstractCamelContext.lambda$doStart$2(AbstractCamelContext.java:2445) ~[!/:3.0.0] at org.apache.camel.impl.engine.AbstractCamelContext.doWithDefinedClassLoader(AbstractCamelContext.java:2462) ~[!/:3.0.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStart(AbstractCamelContext.java:2443) ~[!/:3.0.0] at org.apache.camel.support.service.ServiceSupport.start(ServiceSupport.java:117) ~[!/:3.0.0] at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2352) [!/:3.0.0] at org.apache.camel.blueprint.BlueprintCamelContext.start(BlueprintCamelContext.java:244) [!/:3.0.0] at org.apache.camel.blueprint.BlueprintCamelContext.maybeStart(BlueprintCamelContext.java:286) [!/:3.0.0] at org.apache.camel.blueprint.BlueprintCamelContext.blueprintEvent(BlueprintCamelContext.java:183) [!/:3.0.0] at org.apache.aries.blueprint.container.BlueprintEventDispatcher$3.call(BlueprintEventDispatcher.java:190) [!/:1.10.2] at org.apache.aries.blueprint.container.BlueprintEventDispatcher$3.call(BlueprintEventDispatcher.java:188) [!/:1.10.2] at java.util.concurrent.FutureTask.run(Unknown Source) [?:?] at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [?:?] at java.util.concurrent.FutureTask.run(Unknown Source) [?:?] at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) [?:?] at java.util.concurrent.FutureTask.run(Unknown Source) [?:?] at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source) [?:?] at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [?:?] at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [?:?] at java.lang.Thread.run(Unknown Source) [?:?]An approach with the definition of the securityHandler and the route in one single Blueprint DSL file is working.,Hide Permalink Gerald Kallas added a comment - 04/May/20 09:04 Claus Ibsen I was digging into the details a bit more. When I'm going to update the first Blueprint file with the securityHandler definition than the embedded Jetty seems to be stopped gracefully und restarted again after updating the securityHandler. 2020-05-04T08:52:18，722 | INFO | fileinstall-/opt/apache-karaf-4.2.7/deploy | fileinstall | 10 - org.apache.felix.fileinstall - 3.6.4 | Updating bundle isp.jettyHttpComponent.xml / 0.0.0 2020-05-04T08:52:18，723 | INFO | fileinstall-/opt/apache-karaf-4.2.7/deploy | BlueprintExtender | 84 - org.apache.aries.blueprint.core - 1.10.2 | Destroying container for blueprint bundle isp.jettyHttpComponent.xml/0.0.0 2020-05-04T08:52:19，200 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.karaf.webconsole.gogo [178]] 2020-05-04T08:52:19，210 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.felix.inventory [154]] 2020-05-04T08:52:19，249 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.karaf.webconsole.console [176]] 2020-05-04T08:52:19，253 | INFO | paxweb-config-2-thread-3 | ContextHandler | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Stopped HttpServiceContext{httpContext=DefaultHttpContext [bundle=org.apache.karaf.webconsole.console [176]， contextID=custom]} 2020-05-04T08:52:19，301 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.ops4j.pax.web.pax-web-extender-whiteboard [255]] 2020-05-04T08:52:19，331 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.karaf.webconsole.instance [180]] 2020-05-04T08:52:19，332 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.karaf.webconsole.features [177]] 2020-05-04T08:52:19，381 | INFO | paxweb-config-2-thread-3 | AuthenticationFilter | 63 - io.hawt.hawtio-war - 2.9.1 | Destroying hawtio authentication filter 2020-05-04T08:52:19，417 | INFO | activator-1-thread-5 | CommandExtension | 34 - org.apache.karaf.shell.core - 4.2.7 | Unregistering commands for bundle org.apache.karaf.http.core/4.2.7 2020-05-04T08:52:19，433 | INFO | activator-1-thread-5 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.karaf.webconsole.http [179]] 2020-05-04T08:52:19，516 | INFO | activator-1-thread-5 | HttpPlugin | 179 - org.apache.karaf.webconsole.http - 4.2.7 | Http plugin deactivated 2020-05-04T08:52:19，583 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [io.hawt.hawtio-war [63]] 2020-05-04T08:52:19，596 | INFO | paxweb-config-2-thread-3 | HawtioContextListener | 63 - io.hawt.hawtio-war - 2.9.1 | Destroying hawtio services 2020-05-04T08:52:19，597 | INFO | paxweb-config-2-thread-3 | ContextHandler | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Stopped HttpServiceContext{httpContext=WebAppHttpContext{io.hawt.hawtio-war - 63}} 2020-05-04T08:52:19，598 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.felix.webconsole.plugins.ds [156]] 2020-05-04T08:52:19，598 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.felix.webconsole.plugins.memoryusage [158]] 2020-05-04T08:52:19，600 | INFO | paxweb-config-2-thread-3 | CamelHttpTransportServlet | 326 - org.apache.camel.camel-servlet - 3.0.0 | Destroyed CamelHttpTransportServlet[CamelServlet] 2020-05-04T08:52:19，600 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [isp.servletHttpComponent.xml [324]] 2020-05-04T08:52:19，615 | INFO | paxweb-config-2-thread-3 | ContextHandler | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Stopped HttpServiceContext{httpContext=DefaultHttpContext [bundle=isp.servletHttpComponent.xml [324]， contextID=default]} 2020-05-04T08:52:19，617 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.felix.webconsole.plugins.event [157]] 2020-05-04T08:52:19，617 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.karaf.http.core [168]] 2020-05-04T08:52:19，635 | INFO | paxweb-config-2-thread-3 | AbstractConnector | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Stopped default@41bdd8b2{HTTP/1.1，[http/1.1]}{0.0.0.0:8181} 2020-05-04T08:52:19，653 | INFO | paxweb-config-2-thread-3 | AbstractConnector | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Stopped secureDefault@7b15cda7{SSL，[ssl， http/1.1]}{0.0.0.0:8443} 2020-05-04T08:52:19，655 | INFO | paxweb-config-2-thread-3 | session | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | node0 Stopped scavenging 2020-05-04T08:52:19，688 | INFO | paxweb-config-2-thread-3 | Activator | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | ServerControllerFactory is gone， HTTP Service is not available now. 2020-05-04T08:52:19，713 | INFO | fileinstall-/opt/apache-karaf-4.2.7/deploy | BlueprintContainerImpl | 84 - org.apache.aries.blueprint.core - 1.10.2 | Blueprint bundle isp.jettyHttpComponent.xml/0.0.0 has been started 2020-05-04T08:52:19，728 | INFO | fileinstall-/opt/apache-karaf-4.2.7/deploy | fileinstall | 10 - org.apache.felix.fileinstall - 3.6.4 | Started bundle: blueprint:file:/opt/apache-karaf-4.2.7/deploy/isp.jettyHttpComponent.xml 2020-05-04T08:52:20，002 | INFO | paxweb-config-2-thread-3 | JettyFactoryImpl | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | No ALPN class available 2020-05-04T08:52:20，003 | INFO | paxweb-config-2-thread-3 | JettyFactoryImpl | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | HTTP/2 not available， creating standard ServerConnector for Http 2020-05-04T08:52:20，003 | INFO | paxweb-config-2-thread-3 | JettyServerImpl | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | Pax Web available at [0.0.0.0]:[8181] 2020-05-04T08:52:20，039 | INFO | paxweb-config-2-thread-3 | JettyFactoryImpl | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | No ALPN class available 2020-05-04T08:52:20，040 | INFO | paxweb-config-2-thread-3 | JettyFactoryImpl | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | SPDY not available， creating standard ServerConnector for Https 2020-05-04T08:52:20，042 | INFO | paxweb-config-2-thread-3 | JettyServerImpl | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | Pax Web available at [0.0.0.0]:[8443] 2020-05-04T08:52:20，055 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.karaf.webconsole.gogo [178]] to http service 2020-05-04T08:52:20，057 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.felix.inventory [154]] to http service 2020-05-04T08:52:20，058 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.karaf.webconsole.console [176]] to http service 2020-05-04T08:52:20，092 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | will add org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer to ServletContainerInitializers 2020-05-04T08:52:20，799 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | added ServletContainerInitializer: org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer 2020-05-04T08:52:20，800 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | will add org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer to ServletContainerInitializers 2020-05-04T08:52:20，801 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | added ServletContainerInitializer: org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer 2020-05-04T08:52:20，802 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | will add org.apache.jasper.servlet.JasperInitializer to ServletContainerInitializers 2020-05-04T08:52:20，802 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | Skipt org.apache.jasper.servlet.JasperInitializer， because specialized handler will be present 2020-05-04T08:52:20，817 | INFO | paxweb-config-2-thread-3 | HttpServiceContext | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | registering context DefaultHttpContext [bundle=org.apache.karaf.webconsole.console [176]， contextID=custom]， with context-name: 2020-05-04T08:52:20，820 | INFO | paxweb-config-2-thread-3 | HttpServiceContext | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | registering JasperInitializer 2020-05-04T08:52:20，873 | INFO | paxweb-config-2-thread-3 | WebSocketServerFactory | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | No DecoratedObjectFactory provided， using new org.eclipse.jetty.util.DecoratedObjectFactory[decorators=1] 2020-05-04T08:52:20，933 | INFO | paxweb-config-2-thread-3 | session | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | DefaultSessionIdManager workerName=node0 2020-05-04T08:52:20，934 | INFO | paxweb-config-2-thread-3 | session | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | No SessionScavenger set， using defaults 2020-05-04T08:52:20，935 | INFO | paxweb-config-2-thread-3 | session | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | node0 Scavenging every 600000ms 2020-05-04T08:52:20，969 | INFO | paxweb-config-2-thread-3 | ContextHandler | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Started HttpServiceContext{httpContext=DefaultHttpContext [bundle=org.apache.karaf.webconsole.console [176]， contextID=custom]} 2020-05-04T08:52:20，970 | INFO | paxweb-config-2-thread-3 | Server | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | jetty-9.4.20.v20190813; built: 2019-08-13T21:28:18.144Z; git: 84700530e645e812b336747464d6fbbf370c9a20; jvm 11.0.7+10 2020-05-04T08:52:21，041 | INFO | paxweb-config-2-thread-3 | AbstractConnector | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Started default@78aba5ca{HTTP/1.1，[http/1.1]}{0.0.0.0:8181} 2020-05-04T08:52:21，113 | INFO | paxweb-config-2-thread-3 | SslContextFactory | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | x509=X509@31adf640(casag，h=[]，w=[]) for Server@b8fb8cf[provider=null，keyStore=file:///opt/apache-karaf-4.2.7/etc/casag.p12，trustStore=null] 2020-05-04T08:52:21，150 | INFO | paxweb-config-2-thread-3 | AbstractConnector | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Started secureDefault@50fdffa1{SSL，[ssl， http/1.1]}{0.0.0.0:8443} 2020-05-04T08:52:21，151 | INFO | paxweb-config-2-thread-3 | Server | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Started @135585467ms 2020-05-04T08:52:21，154 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.ops4j.pax.web.pax-web-extender-whiteboard [255]] to http service 2020-05-04T08:52:21，157 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.karaf.http.core [168]] to http service 2020-05-04T08:52:21，163 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.karaf.webconsole.instance [180]] to http service 2020-05-04T08:52:21，164 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.karaf.webconsole.features [177]] to http service 2020-05-04T08:52:21，166 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [io.hawt.hawtio-war [63]] to http service 2020-05-04T08:52:21，183 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | will add org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer to ServletContainerInitializers 2020-05-04T08:52:21，189 | INFO | activator-1-thread-6 | CommandExtension | 34 - org.apache.karaf.shell.core - 4.2.7 | Registering commands for bundle org.apache.karaf.http.core/4.2.7 2020-05-04T08:52:21，245 | INFO | activator-1-thread-6 | HttpPlugin | 179 - org.apache.karaf.webconsole.http - 4.2.7 | Http plugin activated 2020-05-04T08:52:21，255 | INFO | activator-1-thread-6 | ServletWebElement | 255 - org.ops4j.pax.web.pax-web-extender-whiteboard - 7.2.11 | Ignoring servlet [459] without valid alias or url patterns property. 2020-05-04T08:52:21，256 | INFO | activator-1-thread-6 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.karaf.webconsole.http [179]] to http service 2020-05-04T08:52:28，181 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | added ServletContainerInitializer: org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer 2020-05-04T08:52:28，182 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | will add org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer to ServletContainerInitializers 2020-05-04T08:52:28，182 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | added ServletContainerInitializer: org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer 2020-05-04T08:52:28，183 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | will add org.apache.jasper.servlet.JasperInitializer to ServletContainerInitializers 2020-05-04T08:52:28，183 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | Skipt org.apache.jasper.servlet.JasperInitializer， because specialized handler will be present 2020-05-04T08:52:28，184 | INFO | paxweb-config-2-thread-3 | HttpServiceContext | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | registering context WebAppHttpContext{io.hawt.hawtio-war - 63}， with context-name: hawtio 2020-05-04T08:52:28，234 | INFO | paxweb-config-2-thread-3 | HttpServiceContext | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | registering JasperInitializer 2020-05-04T08:52:28，235 | INFO | paxweb-config-2-thread-3 | WebSocketServerFactory | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | No DecoratedObjectFactory provided， using new org.eclipse.jetty.util.DecoratedObjectFactory[decorators=1] 2020-05-04T08:52:28，279 | INFO | paxweb-config-2-thread-3 | HawtioContextListener | 63 - io.hawt.hawtio-war - 2.9.1 | Initialising hawtio services 2020-05-04T08:52:28，281 | INFO | paxweb-config-2-thread-3 | ConfigManager | 63 - io.hawt.hawtio-war - 2.9.1 | Configuration will be discovered via system properties 2020-05-04T08:52:28，281 | INFO | paxweb-config-2-thread-3 | default | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Loading Blueprint contexts [bundle://63.0:2/OSGI-INF/blueprint/blueprint.xml] 2020-05-04T08:52:28，399 | INFO | paxweb-config-2-thread-3 | AuthenticationConfiguration | 63 - io.hawt.hawtio-war - 2.9.1 | Starting hawtio authentication filter， JAAS realm: "karaf" authorized role(s): "admin，manager，viewer" role principal classes: "org.apache.karaf.jaas.boot.principal.RolePrincipal，org.apache.karaf.jaas.modules.RolePrincipal，org.apache.karaf.jaas.boot.principal.GroupPrincipal" 2020-05-04T08:52:28，401 | INFO | paxweb-config-2-thread-3 | ProxyWhitelist | 63 - io.hawt.hawtio-war - 2.9.1 | Probing local addresses ... 2020-05-04T08:52:28，402 | INFO | paxweb-config-2-thread-3 | ProxyWhitelist | 63 - io.hawt.hawtio-war - 2.9.1 | Initial proxy whitelist: [localhost， 127.0.0.1， 172.20.0.4， dd6d194e18e1] 2020-05-04T08:52:28，403 | INFO | paxweb-config-2-thread-3 | JolokiaConfiguredAgentServlet | 63 - io.hawt.hawtio-war - 2.9.1 | Jolokia has not found any overriden configuration property passed at launch time; Default configuration values will be used. 2020-05-04T08:52:28，421 | INFO | paxweb-config-2-thread-3 | RBACMBeanInvoker | 63 - io.hawt.hawtio-war - 2.9.1 | Using MBean [org.apache.karaf:type=security，area=jmx，name=root] for role based access control 2020-05-04T08:52:28，422 | INFO | paxweb-config-2-thread-3 | default | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | jolokia-agent: Using restrictor io.hawt.system.RBACRestrictor 2020-05-04T08:52:28，473 | INFO | paxweb-config-2-thread-3 | LoginServlet | 63 - io.hawt.hawtio-war - 2.9.1 | Hawtio login is using 1800 sec. HttpSession timeout 2020-05-04T08:52:28，474 | INFO | paxweb-config-2-thread-3 | KeycloakServlet | 63 - io.hawt.hawtio-war - 2.9.1 | Keycloak integration is disabled 2020-05-04T08:52:28，477 | INFO | paxweb-config-2-thread-3 | ContextHandler | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Started HttpServiceContext{httpContext=WebAppHttpContext{io.hawt.hawtio-war - 63}} 2020-05-04T08:52:28，485 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.felix.webconsole.plugins.ds [156]] to http service 2020-05-04T08:52:28，486 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.felix.webconsole.plugins.memoryusage [158]] to http service 2020-05-04T08:52:28，487 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [isp.servletHttpComponent.xml [324]] to http service 2020-05-04T08:52:28，496 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | will add org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer to ServletContainerInitializers 2020-05-04T08:52:28，578 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | added ServletContainerInitializer: org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer 2020-05-04T08:52:28，579 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | will add org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer to ServletContainerInitializers 2020-05-04T08:52:28，579 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | added ServletContainerInitializer: org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer 2020-05-04T08:52:28，579 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | will add org.apache.jasper.servlet.JasperInitializer to ServletContainerInitializers 2020-05-04T08:52:28，580 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | Skipt org.apache.jasper.servlet.JasperInitializer， because specialized handler will be present 2020-05-04T08:52:28，580 | INFO | paxweb-config-2-thread-3 | HttpServiceContext | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | registering context DefaultHttpContext [bundle=isp.servletHttpComponent.xml [324]， contextID=default]， with context-name: 2020-05-04T08:52:28，581 | INFO | paxweb-config-2-thread-3 | HttpServiceContext | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | registering JasperInitializer 2020-05-04T08:52:28，665 | INFO | paxweb-config-2-thread-3 | WebSocketServerFactory | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | No DecoratedObjectFactory provided， using new org.eclipse.jetty.util.DecoratedObjectFactory[decorators=1] 2020-05-04T08:52:28，684 | INFO | paxweb-config-2-thread-3 | CamelHttpTransportServlet | 326 - org.apache.camel.camel-servlet - 3.0.0 | Initialized CamelHttpTransportServlet[name=CamelServlet， contextPath=] 2020-05-04T08:52:28，687 | INFO | paxweb-config-2-thread-3 | ContextHandler | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Started HttpServiceContext{httpContext=DefaultHttpContext [bundle=isp.servletHttpComponent.xml [324]， contextID=default]} 2020-05-04T08:52:28，699 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.felix.webconsole.plugins.event [157]] to http service All Jetty service are up and running again. When updating the 2nd Blueprint file this line <from uri="jetty:https://0.0.0.0:8444/hello1?sslContextParameters=#sslContextParameters&amp;handlers=securityHandlerIsp" /> causes finally the error while trying to set the securityHandler on a running Jetty server. (I found this one for https://stackoverflow.com/questions/53293147/how-to-configure-security-handler-in-embedded-jetty-after-jetty-start). Seems that the Jetty Server needs to be stopped before setting the securityContext on the Camel consumer endpoint. Not sure if this should be part of the camel-jetty component but I'm assuming yes? Show Gerald Kallas added a comment - 04/May/20 09:04 Claus Ibsen I was digging into the details a bit more. When I'm going to update the first Blueprint file with the securityHandler definition than the embedded Jetty seems to be stopped gracefully und restarted again after updating the securityHandler. 2020-05-04T08:52:18，722 | INFO | fileinstall-/opt/apache-karaf-4.2.7/deploy | fileinstall | 10 - org.apache.felix.fileinstall - 3.6.4 | Updating bundle isp.jettyHttpComponent.xml / 0.0.0 2020-05-04T08:52:18，723 | INFO | fileinstall-/opt/apache-karaf-4.2.7/deploy | BlueprintExtender | 84 - org.apache.aries.blueprint.core - 1.10.2 | Destroying container for blueprint bundle isp.jettyHttpComponent.xml/0.0.0 2020-05-04T08:52:19，200 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.karaf.webconsole.gogo [178]] 2020-05-04T08:52:19，210 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.felix.inventory [154]] 2020-05-04T08:52:19，249 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.karaf.webconsole.console [176]] 2020-05-04T08:52:19，253 | INFO | paxweb-config-2-thread-3 | ContextHandler | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Stopped HttpServiceContext{httpContext=DefaultHttpContext [bundle=org.apache.karaf.webconsole.console [176]， contextID=custom]} 2020-05-04T08:52:19，301 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.ops4j.pax.web.pax-web-extender-whiteboard [255]] 2020-05-04T08:52:19，331 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.karaf.webconsole.instance [180]] 2020-05-04T08:52:19，332 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.karaf.webconsole.features [177]] 2020-05-04T08:52:19，381 | INFO | paxweb-config-2-thread-3 | AuthenticationFilter | 63 - io.hawt.hawtio-war - 2.9.1 | Destroying hawtio authentication filter 2020-05-04T08:52:19，417 | INFO | activator-1-thread-5 | CommandExtension | 34 - org.apache.karaf.shell.core - 4.2.7 | Unregistering commands for bundle org.apache.karaf.http.core/4.2.7 2020-05-04T08:52:19，433 | INFO | activator-1-thread-5 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.karaf.webconsole.http [179]] 2020-05-04T08:52:19，516 | INFO | activator-1-thread-5 | HttpPlugin | 179 - org.apache.karaf.webconsole.http - 4.2.7 | Http plugin deactivated 2020-05-04T08:52:19，583 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [io.hawt.hawtio-war [63]] 2020-05-04T08:52:19，596 | INFO | paxweb-config-2-thread-3 | HawtioContextListener | 63 - io.hawt.hawtio-war - 2.9.1 | Destroying hawtio services 2020-05-04T08:52:19，597 | INFO | paxweb-config-2-thread-3 | ContextHandler | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Stopped HttpServiceContext{httpContext=WebAppHttpContext{io.hawt.hawtio-war - 63}} 2020-05-04T08:52:19，598 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.felix.webconsole.plugins.ds [156]] 2020-05-04T08:52:19，598 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.felix.webconsole.plugins.memoryusage [158]] 2020-05-04T08:52:19，600 | INFO | paxweb-config-2-thread-3 | CamelHttpTransportServlet | 326 - org.apache.camel.camel-servlet - 3.0.0 | Destroyed CamelHttpTransportServlet[CamelServlet] 2020-05-04T08:52:19，600 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [isp.servletHttpComponent.xml [324]] 2020-05-04T08:52:19，615 | INFO | paxweb-config-2-thread-3 | ContextHandler | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Stopped HttpServiceContext{httpContext=DefaultHttpContext [bundle=isp.servletHttpComponent.xml [324]， contextID= default ]} 2020-05-04T08:52:19，617 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.felix.webconsole.plugins.event [157]] 2020-05-04T08:52:19，617 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Unbinding bundle: [org.apache.karaf.http.core [168]] 2020-05-04T08:52:19，635 | INFO | paxweb-config-2-thread-3 | AbstractConnector | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Stopped default @41bdd8b2{HTTP/1.1，[http/1.1]}{0.0.0.0:8181} 2020-05-04T08:52:19，653 | INFO | paxweb-config-2-thread-3 | AbstractConnector | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Stopped secureDefault@7b15cda7{SSL，[ssl， http/1.1]}{0.0.0.0:8443} 2020-05-04T08:52:19，655 | INFO | paxweb-config-2-thread-3 | session | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | node0 Stopped scavenging 2020-05-04T08:52:19，688 | INFO | paxweb-config-2-thread-3 | Activator | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | ServerControllerFactory is gone， HTTP Service is not available now. 2020-05-04T08:52:19，713 | INFO | fileinstall-/opt/apache-karaf-4.2.7/deploy | BlueprintContainerImpl | 84 - org.apache.aries.blueprint.core - 1.10.2 | Blueprint bundle isp.jettyHttpComponent.xml/0.0.0 has been started 2020-05-04T08:52:19，728 | INFO | fileinstall-/opt/apache-karaf-4.2.7/deploy | fileinstall | 10 - org.apache.felix.fileinstall - 3.6.4 | Started bundle: blueprint:file:/opt/apache-karaf-4.2.7/deploy/isp.jettyHttpComponent.xml 2020-05-04T08:52:20，002 | INFO | paxweb-config-2-thread-3 | JettyFactoryImpl | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | No ALPN class available 2020-05-04T08:52:20，003 | INFO | paxweb-config-2-thread-3 | JettyFactoryImpl | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | HTTP/2 not available， creating standard ServerConnector for Http 2020-05-04T08:52:20，003 | INFO | paxweb-config-2-thread-3 | JettyServerImpl | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | Pax Web available at [0.0.0.0]:[8181] 2020-05-04T08:52:20，039 | INFO | paxweb-config-2-thread-3 | JettyFactoryImpl | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | No ALPN class available 2020-05-04T08:52:20，040 | INFO | paxweb-config-2-thread-3 | JettyFactoryImpl | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | SPDY not available， creating standard ServerConnector for Https 2020-05-04T08:52:20，042 | INFO | paxweb-config-2-thread-3 | JettyServerImpl | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | Pax Web available at [0.0.0.0]:[8443] 2020-05-04T08:52:20，055 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.karaf.webconsole.gogo [178]] to http service 2020-05-04T08:52:20，057 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.felix.inventory [154]] to http service 2020-05-04T08:52:20，058 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.karaf.webconsole.console [176]] to http service 2020-05-04T08:52:20，092 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | will add org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer to ServletContainerInitializers 2020-05-04T08:52:20，799 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | added ServletContainerInitializer: org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer 2020-05-04T08:52:20，800 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | will add org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer to ServletContainerInitializers 2020-05-04T08:52:20，801 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | added ServletContainerInitializer: org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer 2020-05-04T08:52:20，802 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | will add org.apache.jasper.servlet.JasperInitializer to ServletContainerInitializers 2020-05-04T08:52:20，802 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | Skipt org.apache.jasper.servlet.JasperInitializer， because specialized handler will be present 2020-05-04T08:52:20，817 | INFO | paxweb-config-2-thread-3 | HttpServiceContext | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | registering context DefaultHttpContext [bundle=org.apache.karaf.webconsole.console [176]， contextID=custom]， with context-name: 2020-05-04T08:52:20，820 | INFO | paxweb-config-2-thread-3 | HttpServiceContext | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | registering JasperInitializer 2020-05-04T08:52:20，873 | INFO | paxweb-config-2-thread-3 | WebSocketServerFactory | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | No DecoratedObjectFactory provided， using new org.eclipse.jetty.util.DecoratedObjectFactory[decorators=1] 2020-05-04T08:52:20，933 | INFO | paxweb-config-2-thread-3 | session | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | DefaultSessionIdManager workerName=node0 2020-05-04T08:52:20，934 | INFO | paxweb-config-2-thread-3 | session | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | No SessionScavenger set， using defaults 2020-05-04T08:52:20，935 | INFO | paxweb-config-2-thread-3 | session | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | node0 Scavenging every 600000ms 2020-05-04T08:52:20，969 | INFO | paxweb-config-2-thread-3 | ContextHandler | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Started HttpServiceContext{httpContext=DefaultHttpContext [bundle=org.apache.karaf.webconsole.console [176]， contextID=custom]} 2020-05-04T08:52:20，970 | INFO | paxweb-config-2-thread-3 | Server | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | jetty-9.4.20.v20190813; built: 2019-08-13T21:28:18.144Z; git: 84700530e645e812b336747464d6fbbf370c9a20; jvm 11.0.7+10 2020-05-04T08:52:21，041 | INFO | paxweb-config-2-thread-3 | AbstractConnector | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Started default @78aba5ca{HTTP/1.1，[http/1.1]}{0.0.0.0:8181} 2020-05-04T08:52:21，113 | INFO | paxweb-config-2-thread-3 | SslContextFactory | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | x509=X509@31adf640(casag，h=[]，w=[]) for Server@b8fb8cf[provider= null ，keyStore=file: ///opt/apache-karaf-4.2.7/etc/casag.p12，trustStore= null ] 2020-05-04T08:52:21，150 | INFO | paxweb-config-2-thread-3 | AbstractConnector | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Started secureDefault@50fdffa1{SSL，[ssl， http/1.1]}{0.0.0.0:8443} 2020-05-04T08:52:21，151 | INFO | paxweb-config-2-thread-3 | Server | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Started @135585467ms 2020-05-04T08:52:21，154 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.ops4j.pax.web.pax-web-extender-whiteboard [255]] to http service 2020-05-04T08:52:21，157 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.karaf.http.core [168]] to http service 2020-05-04T08:52:21，163 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.karaf.webconsole.instance [180]] to http service 2020-05-04T08:52:21，164 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.karaf.webconsole.features [177]] to http service 2020-05-04T08:52:21，166 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [io.hawt.hawtio-war [63]] to http service 2020-05-04T08:52:21，183 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | will add org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer to ServletContainerInitializers 2020-05-04T08:52:21，189 | INFO | activator-1-thread-6 | CommandExtension | 34 - org.apache.karaf.shell.core - 4.2.7 | Registering commands for bundle org.apache.karaf.http.core/4.2.7 2020-05-04T08:52:21，245 | INFO | activator-1-thread-6 | HttpPlugin | 179 - org.apache.karaf.webconsole.http - 4.2.7 | Http plugin activated 2020-05-04T08:52:21，255 | INFO | activator-1-thread-6 | ServletWebElement | 255 - org.ops4j.pax.web.pax-web-extender-whiteboard - 7.2.11 | Ignoring servlet [459] without valid alias or url patterns property. 2020-05-04T08:52:21，256 | INFO | activator-1-thread-6 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.karaf.webconsole.http [179]] to http service 2020-05-04T08:52:28，181 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | added ServletContainerInitializer: org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer 2020-05-04T08:52:28，182 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | will add org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer to ServletContainerInitializers 2020-05-04T08:52:28，182 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | added ServletContainerInitializer: org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer 2020-05-04T08:52:28，183 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | will add org.apache.jasper.servlet.JasperInitializer to ServletContainerInitializers 2020-05-04T08:52:28，183 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | Skipt org.apache.jasper.servlet.JasperInitializer， because specialized handler will be present 2020-05-04T08:52:28，184 | INFO | paxweb-config-2-thread-3 | HttpServiceContext | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | registering context WebAppHttpContext{io.hawt.hawtio-war - 63}， with context-name: hawtio 2020-05-04T08:52:28，234 | INFO | paxweb-config-2-thread-3 | HttpServiceContext | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | registering JasperInitializer 2020-05-04T08:52:28，235 | INFO | paxweb-config-2-thread-3 | WebSocketServerFactory | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | No DecoratedObjectFactory provided， using new org.eclipse.jetty.util.DecoratedObjectFactory[decorators=1] 2020-05-04T08:52:28，279 | INFO | paxweb-config-2-thread-3 | HawtioContextListener | 63 - io.hawt.hawtio-war - 2.9.1 | Initialising hawtio services 2020-05-04T08:52:28，281 | INFO | paxweb-config-2-thread-3 | ConfigManager | 63 - io.hawt.hawtio-war - 2.9.1 | Configuration will be discovered via system properties 2020-05-04T08:52:28，281 | INFO | paxweb-config-2-thread-3 | default | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Loading Blueprint contexts [bundle: //63.0:2/OSGI-INF/blueprint/blueprint.xml] 2020-05-04T08:52:28，399 | INFO | paxweb-config-2-thread-3 | AuthenticationConfiguration | 63 - io.hawt.hawtio-war - 2.9.1 | Starting hawtio authentication filter， JAAS realm: "karaf" authorized role(s): "admin，manager，viewer" role principal classes: "org.apache.karaf.jaas.boot.principal.RolePrincipal，org.apache.karaf.jaas.modules.RolePrincipal，org.apache.karaf.jaas.boot.principal.GroupPrincipal" 2020-05-04T08:52:28，401 | INFO | paxweb-config-2-thread-3 | ProxyWhitelist | 63 - io.hawt.hawtio-war - 2.9.1 | Probing local addresses ... 2020-05-04T08:52:28，402 | INFO | paxweb-config-2-thread-3 | ProxyWhitelist | 63 - io.hawt.hawtio-war - 2.9.1 | Initial proxy whitelist: [localhost， 127.0.0.1， 172.20.0.4， dd6d194e18e1] 2020-05-04T08:52:28，403 | INFO | paxweb-config-2-thread-3 | JolokiaConfiguredAgentServlet | 63 - io.hawt.hawtio-war - 2.9.1 | Jolokia has not found any overriden configuration property passed at launch time; Default configuration values will be used. 2020-05-04T08:52:28，421 | INFO | paxweb-config-2-thread-3 | RBACMBeanInvoker | 63 - io.hawt.hawtio-war - 2.9.1 | Using MBean [org.apache.karaf:type=security，area=jmx，name=root] for role based access control 2020-05-04T08:52:28，422 | INFO | paxweb-config-2-thread-3 | default | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | jolokia-agent: Using restrictor io.hawt.system.RBACRestrictor 2020-05-04T08:52:28，473 | INFO | paxweb-config-2-thread-3 | LoginServlet | 63 - io.hawt.hawtio-war - 2.9.1 | Hawtio login is using 1800 sec. HttpSession timeout 2020-05-04T08:52:28，474 | INFO | paxweb-config-2-thread-3 | KeycloakServlet | 63 - io.hawt.hawtio-war - 2.9.1 | Keycloak integration is disabled 2020-05-04T08:52:28，477 | INFO | paxweb-config-2-thread-3 | ContextHandler | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Started HttpServiceContext{httpContext=WebAppHttpContext{io.hawt.hawtio-war - 63}} 2020-05-04T08:52:28，485 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.felix.webconsole.plugins.ds [156]] to http service 2020-05-04T08:52:28，486 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.felix.webconsole.plugins.memoryusage [158]] to http service 2020-05-04T08:52:28，487 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [isp.servletHttpComponent.xml [324]] to http service 2020-05-04T08:52:28，496 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | will add org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer to ServletContainerInitializers 2020-05-04T08:52:28，578 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | added ServletContainerInitializer: org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer 2020-05-04T08:52:28，579 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | will add org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer to ServletContainerInitializers 2020-05-04T08:52:28，579 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | added ServletContainerInitializer: org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer 2020-05-04T08:52:28，579 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | will add org.apache.jasper.servlet.JasperInitializer to ServletContainerInitializers 2020-05-04T08:52:28，580 | INFO | paxweb-config-2-thread-3 | ServletContainerInitializerScanner | 251 - org.ops4j.pax.web.pax-web-api - 7.2.11 | Skipt org.apache.jasper.servlet.JasperInitializer， because specialized handler will be present 2020-05-04T08:52:28，580 | INFO | paxweb-config-2-thread-3 | HttpServiceContext | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | registering context DefaultHttpContext [bundle=isp.servletHttpComponent.xml [324]， contextID= default ]， with context-name: 2020-05-04T08:52:28，581 | INFO | paxweb-config-2-thread-3 | HttpServiceContext | 256 - org.ops4j.pax.web.pax-web-jetty - 7.2.11 | registering JasperInitializer 2020-05-04T08:52:28，665 | INFO | paxweb-config-2-thread-3 | WebSocketServerFactory | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | No DecoratedObjectFactory provided， using new org.eclipse.jetty.util.DecoratedObjectFactory[decorators=1] 2020-05-04T08:52:28，684 | INFO | paxweb-config-2-thread-3 | CamelHttpTransportServlet | 326 - org.apache.camel.camel-servlet - 3.0.0 | Initialized CamelHttpTransportServlet[name=CamelServlet， contextPath=] 2020-05-04T08:52:28，687 | INFO | paxweb-config-2-thread-3 | ContextHandler | 223 - org.eclipse.jetty.util - 9.4.20.v20190813 | Started HttpServiceContext{httpContext=DefaultHttpContext [bundle=isp.servletHttpComponent.xml [324]， contextID= default ]} 2020-05-04T08:52:28，699 | INFO | paxweb-config-2-thread-3 | HttpServiceFactoryImpl | 258 - org.ops4j.pax.web.pax-web-runtime - 7.2.11 | Binding bundle: [org.apache.felix.webconsole.plugins.event [157]] to http service All Jetty service are up and running again. When updating the 2nd Blueprint file this line <from uri= "jetty:https: //0.0.0.0:8444/hello1?sslContextParameters=#sslContextParameters&amp;handlers=securityHandlerIsp" /> causes finally the error while trying to set the securityHandler on a running Jetty server. (I found this one for https://stackoverflow.com/questions/53293147/how-to-configure-security-handler-in-embedded-jetty-after-jetty-start ). Seems that the Jetty Server needs to be stopped before setting the securityContext on the Camel consumer endpoint. Not sure if this should be part of the camel-jetty component but I'm assuming yes? Hide Permalink Gerald Kallas added a comment - 04/May/20 17:21 The line <from uri="jetty:https://0.0.0.0:8444/hello1?sslContextParameters=#sslContextParameters&amp;handlers=#securityHandlerIsp" /> with a '#' doesn't work either. Show Gerald Kallas added a comment - 04/May/20 17:21 The line <from uri= "jetty:https: //0.0.0.0:8444/hello1?sslContextParameters=#sslContextParameters&amp;handlers=#securityHandlerIsp" /> with a '#' doesn't work either. Hide Permalink Claus Ibsen added a comment - 05/May/20 07:48 So what happens if you have a clean karaf， and then first install those blueprint files with the configuration， and then only last install the blueprint with camel jetty. Show Claus Ibsen added a comment - 05/May/20 07:48 So what happens if you have a clean karaf， and then first install those blueprint files with the configuration， and then only last install the blueprint with camel jetty. Hide Permalink Gerald Kallas added a comment - 05/May/20 09:59 - edited Claus Ibsen At 1st I've done a vanilla installation of karaf 4.2.8. The deployed files for reference see at the bottom. My etc/user.properties looks like .. ... username1 = password1，TSTISP001 Afterwards I did execute these commands .. feature:repo-add camel 3.2.0 feature:install camel camel-jetty No error but the security handler seems to be ignored completely. The blueprint all-in-one works but the security handler is being ignored. The 2 blueprints separated show no errors during deployment， the security handler is being ignored either (means the route is working but with no auth). At 2nd I've done again a vanilla installation of karaf 4.2.8. Same etc/user.properties. I did execute (you may recognize additionally the webconsole feature) feature:repo-add camel 3.2.0 feature:install webconsole camel camel-jetty The blueprint all-in-one now works with authentication. The 2 blueprints separated shows the errors during deployment .. 2020-05-05T09:55:57，808 | INFO | fileinstall-/opt/apache-karaf-4.2.8/deploy | fileinstall | 10 - org.apache.felix.fileinstall - 3.6.4 | Installing bundle isp.jettyHttpComponent.xml / 0.0.0 2020-05-05T09:55:57，845 | INFO | paxweb-config-1-thread-2 | HttpServiceFactoryImpl | 160 - org.ops4j.pax.web.pax-web-runtime - 7.2.14 | Unbinding bundle: [org.apache.karaf.webconsole.console [117]] 2020-05-05T09:55:57，850 | INFO | paxweb-config-1-thread-2 | ContextHandler | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | Stopped HttpServiceContext{httpContext=DefaultHttpContext [bundle=org.apache.karaf.webconsole.console [117]， contextID=custom]} 2020-05-05T09:55:57，851 | INFO | paxweb-config-1-thread-2 | HttpServiceFactoryImpl | 160 - org.ops4j.pax.web.pax-web-runtime - 7.2.14 | Unbinding bundle: [org.apache.karaf.http.core [113]] 2020-05-05T09:55:57，856 | INFO | activator-1-thread-3 | CommandExtension | 34 - org.apache.karaf.shell.core - 4.2.8 | Unregistering commands for bundle org.apache.karaf.http.core/4.2.8 2020-05-05T09:55:57，895 | INFO | activator-1-thread-3 | HttpPlugin | 120 - org.apache.karaf.webconsole.http - 4.2.8 | Http plugin deactivated 2020-05-05T09:55:57，897 | INFO | paxweb-config-1-thread-2 | AbstractConnector | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | Stopped default@4dcfa0eb{HTTP/1.1，[http/1.1]}{0.0.0.0:8181} 2020-05-05T09:55:57，897 | INFO | paxweb-config-1-thread-2 | session | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | node0 Stopped scavenging 2020-05-05T09:55:57，900 | INFO | paxweb-config-1-thread-2 | Activator | 160 - org.ops4j.pax.web.pax-web-runtime - 7.2.14 | ServerControllerFactory is gone， HTTP Service is not available now. 2020-05-05T09:55:57，902 | INFO | fileinstall-/opt/apache-karaf-4.2.8/deploy | BlueprintContainerImpl | 49 - org.apache.aries.blueprint.core - 1.10.2 | Blueprint bundle isp.jettyHttpComponent.xml/0.0.0 has been started 2020-05-05T09:55:57，910 | INFO | fileinstall-/opt/apache-karaf-4.2.8/deploy | fileinstall | 10 - org.apache.felix.fileinstall - 3.6.4 | Started bundle: blueprint:file:/opt/apache-karaf-4.2.8/deploy/isp.jettyHttpComponent.xml 2020-05-05T09:55:57，931 | INFO | paxweb-config-1-thread-2 | JettyFactoryImpl | 159 - org.ops4j.pax.web.pax-web-jetty - 7.2.14 | No ALPN class available 2020-05-05T09:55:57，931 | INFO | paxweb-config-1-thread-2 | JettyFactoryImpl | 159 - org.ops4j.pax.web.pax-web-jetty - 7.2.14 | HTTP/2 not available， creating standard ServerConnector for Http 2020-05-05T09:55:57，932 | INFO | paxweb-config-1-thread-2 | JettyServerImpl | 159 - org.ops4j.pax.web.pax-web-jetty - 7.2.14 | Pax Web available at [0.0.0.0]:[8181] 2020-05-05T09:55:57，936 | INFO | paxweb-config-1-thread-2 | HttpServiceFactoryImpl | 160 - org.ops4j.pax.web.pax-web-runtime - 7.2.14 | Binding bundle: [org.apache.karaf.http.core [113]] to http service 2020-05-05T09:55:57，941 | INFO | paxweb-config-1-thread-2 | HttpServiceFactoryImpl | 160 - org.ops4j.pax.web.pax-web-runtime - 7.2.14 | Binding bundle: [org.apache.karaf.webconsole.console [117]] to http service 2020-05-05T09:55:57，949 | INFO | paxweb-config-1-thread-2 | ServletContainerInitializerScanner | 158 - org.ops4j.pax.web.pax-web-api - 7.2.14 | will add org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer to ServletContainerInitializers 2020-05-05T09:55:57，949 | INFO | paxweb-config-1-thread-2 | ServletContainerInitializerScanner | 158 - org.ops4j.pax.web.pax-web-api - 7.2.14 | added ServletContainerInitializer: org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer 2020-05-05T09:55:57，951 | INFO | paxweb-config-1-thread-2 | ServletContainerInitializerScanner | 158 - org.ops4j.pax.web.pax-web-api - 7.2.14 | will add org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer to ServletContainerInitializers 2020-05-05T09:55:57，964 | INFO | activator-1-thread-4 | CommandExtension | 34 - org.apache.karaf.shell.core - 4.2.8 | Registering commands for bundle org.apache.karaf.http.core/4.2.8 2020-05-05T09:55:57，983 | INFO | activator-1-thread-4 | HttpPlugin | 120 - org.apache.karaf.webconsole.http - 4.2.8 | Http plugin activated 2020-05-05T09:55:58，090 | INFO | paxweb-config-1-thread-2 | ServletContainerInitializerScanner | 158 - org.ops4j.pax.web.pax-web-api - 7.2.14 | added ServletContainerInitializer: org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer 2020-05-05T09:55:58，092 | INFO | paxweb-config-1-thread-2 | HttpServiceContext | 159 - org.ops4j.pax.web.pax-web-jetty - 7.2.14 | registering context DefaultHttpContext [bundle=org.apache.karaf.webconsole.console [117]， contextID=custom]， with context-name: 2020-05-05T09:55:58，097 | INFO | paxweb-config-1-thread-2 | WebSocketServerFactory | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | No DecoratedObjectFactory provided， using new org.eclipse.jetty.util.DecoratedObjectFactory[decorators=1] 2020-05-05T09:55:58，101 | INFO | paxweb-config-1-thread-2 | session | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | DefaultSessionIdManager workerName=node0 2020-05-05T09:55:58，101 | INFO | paxweb-config-1-thread-2 | session | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | No SessionScavenger set， using defaults 2020-05-05T09:55:58，102 | INFO | paxweb-config-1-thread-2 | session | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | node0 Scavenging every 660000ms 2020-05-05T09:55:58，110 | INFO | paxweb-config-1-thread-2 | ContextHandler | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | Started HttpServiceContext{httpContext=DefaultHttpContext [bundle=org.apache.karaf.webconsole.console [117]， contextID=custom]} 2020-05-05T09:55:58，111 | INFO | paxweb-config-1-thread-2 | Server | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | jetty-9.4.22.v20191022; built: 2019-10-22T13:37:13.455Z; git: b1e6b55512e008f7fbdf1cbea4ff8a6446d1073b; jvm 11.0.6+10-LTS 2020-05-05T09:55:58，119 | INFO | paxweb-config-1-thread-2 | AbstractConnector | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | Started default@2db6caad{HTTP/1.1，[http/1.1]}{0.0.0.0:8181} 2020-05-05T09:55:58，119 | INFO | paxweb-config-1-thread-2 | Server | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | Started @127384ms 2020-05-05T09:56:00，942 | INFO | fileinstall-/opt/apache-karaf-4.2.8/deploy | fileinstall | 10 - org.apache.felix.fileinstall - 3.6.4 | Installing bundle isp.route.TSTISP001.xml / 0.0.0 2020-05-05T09:56:01，155 | INFO | fileinstall-/opt/apache-karaf-4.2.8/deploy | BlueprintContainerImpl | 49 - org.apache.aries.blueprint.core - 1.10.2 | Blueprint bundle isp.route.TSTISP001.xml/0.0.0 has been started 2020-05-05T09:56:01，155 | INFO | Blueprint Event Dispatcher: 1 | BlueprintCamelContext | 100 - org.apache.camel.karaf.camel-blueprint - 3.2.0 | Attempting to start CamelContext: isp.context.user.TSTISP001 2020-05-05T09:56:01，158 | INFO | Blueprint Event Dispatcher: 1 | DefaultManagementStrategy | 57 - org.apache.camel.camel-base - 3.2.0 | JMX is enabled 2020-05-05T09:56:01，163 | INFO | Blueprint Event Dispatcher: 1 | AbstractCamelContext | 57 - org.apache.camel.camel-base - 3.2.0 | Apache Camel 3.2.0 (CamelContext: isp.context.user.TSTISP001) is starting 2020-05-05T09:56:01，163 | INFO | Blueprint Event Dispatcher: 1 | AbstractCamelContext | 57 - org.apache.camel.camel-base - 3.2.0 | StreamCaching is enabled on CamelContext: isp.context.user.TSTISP001 2020-05-05T09:56:01，193 | INFO | Blueprint Event Dispatcher: 1 | DefaultStreamCachingStrategy | 57 - org.apache.camel.camel-base - 3.2.0 | StreamCaching in use with spool directory: /opt/apache-karaf-4.2.8/data/tmp/camel/camel-tmp-ID-ip-10-0-0-147-eu-central-1-compute-internal-1588672515655-1-1 and rules: [Spool > 128K body size] 2020-05-05T09:56:01，198 | ERROR | Blueprint Event Dispatcher: 1 | AbstractCamelContext | 57 - org.apache.camel.camel-base - 3.2.0 | Error starting CamelContext (isp.context.user.TSTISP001) due to exception thrown: STARTED java.lang.IllegalStateException: STARTED at org.eclipse.jetty.server.handler.AbstractHandlerContainer.setServer(AbstractHandlerContainer.java:131) ~[!/:9.4.22.v20191022] at Proxy47994b98_4d05_494d_af04_51ba95ee0e4a.setServer(Unknown Source) ~[?:?] at org.eclipse.jetty.server.handler.HandlerCollection.updateHandlers(HandlerCollection.java:117) ~[!/:9.4.22.v20191022] at org.eclipse.jetty.server.handler.HandlerCollection.addHandler(HandlerCollection.java:180) ~[!/:9.4.22.v20191022] at org.apache.camel.component.jetty.JettyHttpComponent.addJettyHandlers(JettyHttpComponent.java:1169) ~[!/:3.2.0] at org.apache.camel.component.jetty.JettyHttpComponent.createServletForConnector(JettyHttpComponent.java:1127) ~[!/:3.2.0] at org.apache.camel.component.jetty.JettyHttpComponent.connect(JettyHttpComponent.java:332) ~[!/:3.2.0] at org.apache.camel.http.common.HttpCommonEndpoint.connect(HttpCommonEndpoint.java:177) ~[!/:3.2.0] at org.apache.camel.http.common.HttpConsumer.doStart(HttpConsumer.java:58) ~[!/:3.2.0] at org.apache.camel.component.jetty.JettyHttpConsumer.doStart(JettyHttpConsumer.java:31) ~[!/:3.2.0] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.startService(AbstractCamelContext.java:3056) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartOrResumeRouteConsumers(AbstractCamelContext.java:3394) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartRouteConsumers(AbstractCamelContext.java:3325) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.safelyStartRouteServices(AbstractCamelContext.java:3230) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartOrResumeRoutes(AbstractCamelContext.java:2992) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartCamel(AbstractCamelContext.java:2790) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartContext(AbstractCamelContext.java:2643) [!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStart(AbstractCamelContext.java:2606) [!/:3.2.0] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) [!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2448) [!/:3.2.0] at org.apache.camel.blueprint.BlueprintCamelContext.start(BlueprintCamelContext.java:241) [!/:3.2.0] at org.apache.camel.blueprint.BlueprintCamelContext.maybeStart(BlueprintCamelContext.java:283) [!/:3.2.0] at org.apache.camel.blueprint.BlueprintCamelContext.blueprintEvent(BlueprintCamelContext.java:187) [!/:3.2.0] at org.apache.aries.blueprint.container.BlueprintEventDispatcher$3.call(BlueprintEventDispatcher.java:190) [!/:1.10.2] at org.apache.aries.blueprint.container.BlueprintEventDispatcher$3.call(BlueprintEventDispatcher.java:188) [!/:1.10.2] at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?] at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?] at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?] at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) [?:?] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?] at java.lang.Thread.run(Thread.java:834) [?:?] 2020-05-05T09:56:01，210 | INFO | Blueprint Event Dispatcher: 1 | AbstractCamelContext | 57 - org.apache.camel.camel-base - 3.2.0 | Apache Camel 3.2.0 (CamelContext: isp.context.user.TSTISP001) is shutting down 2020-05-05T09:56:01，227 | INFO | Blueprint Event Dispatcher: 1 | AbstractCamelContext | 57 - org.apache.camel.camel-base - 3.2.0 | Apache Camel 3.2.0 (CamelContext: isp.context.user.TSTISP001) uptime 0.064 seconds 2020-05-05T09:56:01，227 | INFO | Blueprint Event Dispatcher: 1 | AbstractCamelContext | 57 - org.apache.camel.camel-base - 3.2.0 | Apache Camel 3.2.0 (CamelContext: isp.context.user.TSTISP001) is shutdown in 0.017 seconds 2020-05-05T09:56:01，228 | WARN | Blueprint Event Dispatcher: 1 | BlueprintCamelStateService | 100 - org.apache.camel.karaf.camel-blueprint - 3.2.0 | Changing Camel state for bundle 168 to Failure 2020-05-05T09:56:01，228 | ERROR | Blueprint Event Dispatcher: 1 | BlueprintCamelContext | 100 - org.apache.camel.karaf.camel-blueprint - 3.2.0 | Error occurred during starting CamelContext: isp.context.user.TSTISP001 java.lang.IllegalStateException: STARTED at org.eclipse.jetty.server.handler.AbstractHandlerContainer.setServer(AbstractHandlerContainer.java:131) ~[?:?] at Proxy47994b98_4d05_494d_af04_51ba95ee0e4a.setServer(Unknown Source) ~[?:?] at org.eclipse.jetty.server.handler.HandlerCollection.updateHandlers(HandlerCollection.java:117) ~[?:?] at org.eclipse.jetty.server.handler.HandlerCollection.addHandler(HandlerCollection.java:180) ~[?:?] at org.apache.camel.component.jetty.JettyHttpComponent.addJettyHandlers(JettyHttpComponent.java:1169) ~[?:?] at org.apache.camel.component.jetty.JettyHttpComponent.createServletForConnector(JettyHttpComponent.java:1127) ~[?:?] at org.apache.camel.component.jetty.JettyHttpComponent.connect(JettyHttpComponent.java:332) ~[?:?] at org.apache.camel.http.common.HttpCommonEndpoint.connect(HttpCommonEndpoint.java:177) ~[?:?] at org.apache.camel.http.common.HttpConsumer.doStart(HttpConsumer.java:58) ~[?:?] at org.apache.camel.component.jetty.JettyHttpConsumer.doStart(JettyHttpConsumer.java:31) ~[?:?] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.startService(AbstractCamelContext.java:3056) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartOrResumeRouteConsumers(AbstractCamelContext.java:3394) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartRouteConsumers(AbstractCamelContext.java:3325) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.safelyStartRouteServices(AbstractCamelContext.java:3230) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartOrResumeRoutes(AbstractCamelContext.java:2992) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartCamel(AbstractCamelContext.java:2790) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartContext(AbstractCamelContext.java:2643) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStart(AbstractCamelContext.java:2606) ~[!/:3.2.0] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2448) ~[!/:3.2.0] at org.apache.camel.blueprint.BlueprintCamelContext.start(BlueprintCamelContext.java:241) ~[!/:3.2.0] at org.apache.camel.blueprint.BlueprintCamelContext.maybeStart(BlueprintCamelContext.java:283) ~[!/:3.2.0] at org.apache.camel.blueprint.BlueprintCamelContext.blueprintEvent(BlueprintCamelContext.java:187) [!/:3.2.0] at org.apache.aries.blueprint.container.BlueprintEventDispatcher$3.call(BlueprintEventDispatcher.java:190) [!/:1.10.2] at org.apache.aries.blueprint.container.BlueprintEventDispatcher$3.call(BlueprintEventDispatcher.java:188) [!/:1.10.2] at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?] at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?] at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?] at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) [?:?] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?] at java.lang.Thread.run(Thread.java:834) [?:?] 2020-05-05T09:56:01，233 | INFO | fileinstall-/opt/apache-karaf-4.2.8/deploy | fileinstall | 10 - org.apache.felix.fileinstall - 3.6.4 | Started bundle: blueprint:file:/opt/apache-karaf-4.2.8/deploy/isp.route.TSTISP001.xml Files for reference blueprint all-in-one <blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:ext="http://aries.apache.org/blueprint/xmlns/blueprint-ext/v1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cm="http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.1.0" xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd"> <bean id="constraint_TSTISP001" class="org.eclipse.jetty.util.security.Constraint"> <property name="name" value="BASIC" /> <property name="authenticate" value="true" /> <property name="roles"> <list> <value>TSTISP001</value> </list> </property> </bean> <bean id="constraintMapping_TSTISP001" class="org.eclipse.jetty.security.ConstraintMapping"> <property name="constraint" ref="constraint_TSTISP001" /> <property name="pathSpec" value="/hello1" /> </bean> <bean id="securityHandlerImpl" class="org.eclipse.jetty.security.ConstraintSecurityHandler"> <property name="loginService"> <bean class="org.eclipse.jetty.security.HashLoginService"> <property name="config" value="/opt/apache-karaf-4.2.8/etc/users.properties" /> </bean> </property> <property name="authenticator"> <bean class="org.eclipse.jetty.security.authentication.BasicAuthenticator" /> </property> <property name="constraintMappings"> <list> <ref component-id="constraintMapping_TSTISP001" /> </list> </property> </bean> <camelContext id="isp.context.user.TSTISP001" xmlns="http://camel.apache.org/schema/blueprint" streamCache="true" useBreadcrumb="true"> <route id="isp.route.user.TSTISP001"> <from uri="jetty:http://0.0.0.0:8182/hello1?handlers=securityHandlerImpl" /> <setBody><constant>Hello 1</constant></setBody> </route> </camelContext> </blueprint> blueprints separated <blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd"> <bean id="constraint_TSTISP001" class="org.eclipse.jetty.util.security.Constraint"> <property name="name" value="BASIC" /> <property name="authenticate" value="true" /> <property name="roles"> <list> <value>TSTISP001</value> </list> </property> </bean> <bean id="constraintMapping_TSTISP001" class="org.eclipse.jetty.security.ConstraintMapping"> <property name="constraint" ref="constraint_TSTISP001" /> <property name="pathSpec" value="/hello1" /> </bean> <bean id="securityHandlerImpl" class="org.eclipse.jetty.security.ConstraintSecurityHandler"> <property name="loginService"> <bean class="org.eclipse.jetty.security.HashLoginService"> <property name="config" value="/opt/apache-karaf-4.2.8/etc/users.properties" /> </bean> </property> <property name="authenticator"> <bean class="org.eclipse.jetty.security.authentication.BasicAuthenticator" /> </property> <property name="constraintMappings"> <list> <ref component-id="constraintMapping_TSTISP001" /> </list> </property> </bean> <service id="securityHandlerIsp" ref="securityHandlerImpl" interface="org.eclipse.jetty.server.Handler" /> </blueprint> <blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:ext="http://aries.apache.org/blueprint/xmlns/blueprint-ext/v1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cm="http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.1.0" xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd"> <!-- set reference to the securityHandler --> <reference id="securityHandlerIsp" interface="org.eclipse.jetty.server.Handler" ext:proxy-method="classes" /> <camelContext id="isp.context.user.TSTISP001" xmlns="http://camel.apache.org/schema/blueprint" streamCache="true" useBreadcrumb="true"> <route id="isp.route.user.TSTISP001"> <from uri="jetty:http://0.0.0.0:8182/hello1?handlers=#securityHandlerIsp" /> <setBody><constant>Hello 1</constant></setBody> </route> </camelContext> </blueprint> Show Gerald Kallas added a comment - 05/May/20 09:59 - edited Claus Ibsen At 1st I've done a vanilla installation of karaf 4.2.8. The deployed files for reference see at the bottom. My etc/user.properties looks like .. ... username1 = password1，TSTISP001 Afterwards I did execute these commands .. feature:repo-add camel 3.2.0 feature:install camel camel-jetty No error but the security handler seems to be ignored completely. The blueprint all-in-one works but the security handler is being ignored. The 2 blueprints separated show no errors during deployment， the security handler is being ignored either (means the route is working but with no auth). At 2nd I've done again a vanilla installation of karaf 4.2.8. Same etc/user.properties. I did execute (you may recognize additionally the webconsole feature) feature:repo-add camel 3.2.0 feature:install webconsole camel camel-jetty The blueprint all-in-one now works with authentication. The 2 blueprints separated shows the errors during deployment .. 2020-05-05T09:55:57，808 | INFO | fileinstall-/opt/apache-karaf-4.2.8/deploy | fileinstall | 10 - org.apache.felix.fileinstall - 3.6.4 | Installing bundle isp.jettyHttpComponent.xml / 0.0.0 2020-05-05T09:55:57，845 | INFO | paxweb-config-1-thread-2 | HttpServiceFactoryImpl | 160 - org.ops4j.pax.web.pax-web-runtime - 7.2.14 | Unbinding bundle: [org.apache.karaf.webconsole.console [117]] 2020-05-05T09:55:57，850 | INFO | paxweb-config-1-thread-2 | ContextHandler | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | Stopped HttpServiceContext{httpContext=DefaultHttpContext [bundle=org.apache.karaf.webconsole.console [117]， contextID=custom]} 2020-05-05T09:55:57，851 | INFO | paxweb-config-1-thread-2 | HttpServiceFactoryImpl | 160 - org.ops4j.pax.web.pax-web-runtime - 7.2.14 | Unbinding bundle: [org.apache.karaf.http.core [113]] 2020-05-05T09:55:57，856 | INFO | activator-1-thread-3 | CommandExtension | 34 - org.apache.karaf.shell.core - 4.2.8 | Unregistering commands for bundle org.apache.karaf.http.core/4.2.8 2020-05-05T09:55:57，895 | INFO | activator-1-thread-3 | HttpPlugin | 120 - org.apache.karaf.webconsole.http - 4.2.8 | Http plugin deactivated 2020-05-05T09:55:57，897 | INFO | paxweb-config-1-thread-2 | AbstractConnector | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | Stopped default @4dcfa0eb{HTTP/1.1，[http/1.1]}{0.0.0.0:8181} 2020-05-05T09:55:57，897 | INFO | paxweb-config-1-thread-2 | session | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | node0 Stopped scavenging 2020-05-05T09:55:57，900 | INFO | paxweb-config-1-thread-2 | Activator | 160 - org.ops4j.pax.web.pax-web-runtime - 7.2.14 | ServerControllerFactory is gone， HTTP Service is not available now. 2020-05-05T09:55:57，902 | INFO | fileinstall-/opt/apache-karaf-4.2.8/deploy | BlueprintContainerImpl | 49 - org.apache.aries.blueprint.core - 1.10.2 | Blueprint bundle isp.jettyHttpComponent.xml/0.0.0 has been started 2020-05-05T09:55:57，910 | INFO | fileinstall-/opt/apache-karaf-4.2.8/deploy | fileinstall | 10 - org.apache.felix.fileinstall - 3.6.4 | Started bundle: blueprint:file:/opt/apache-karaf-4.2.8/deploy/isp.jettyHttpComponent.xml 2020-05-05T09:55:57，931 | INFO | paxweb-config-1-thread-2 | JettyFactoryImpl | 159 - org.ops4j.pax.web.pax-web-jetty - 7.2.14 | No ALPN class available 2020-05-05T09:55:57，931 | INFO | paxweb-config-1-thread-2 | JettyFactoryImpl | 159 - org.ops4j.pax.web.pax-web-jetty - 7.2.14 | HTTP/2 not available， creating standard ServerConnector for Http 2020-05-05T09:55:57，932 | INFO | paxweb-config-1-thread-2 | JettyServerImpl | 159 - org.ops4j.pax.web.pax-web-jetty - 7.2.14 | Pax Web available at [0.0.0.0]:[8181] 2020-05-05T09:55:57，936 | INFO | paxweb-config-1-thread-2 | HttpServiceFactoryImpl | 160 - org.ops4j.pax.web.pax-web-runtime - 7.2.14 | Binding bundle: [org.apache.karaf.http.core [113]] to http service 2020-05-05T09:55:57，941 | INFO | paxweb-config-1-thread-2 | HttpServiceFactoryImpl | 160 - org.ops4j.pax.web.pax-web-runtime - 7.2.14 | Binding bundle: [org.apache.karaf.webconsole.console [117]] to http service 2020-05-05T09:55:57，949 | INFO | paxweb-config-1-thread-2 | ServletContainerInitializerScanner | 158 - org.ops4j.pax.web.pax-web-api - 7.2.14 | will add org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer to ServletContainerInitializers 2020-05-05T09:55:57，949 | INFO | paxweb-config-1-thread-2 | ServletContainerInitializerScanner | 158 - org.ops4j.pax.web.pax-web-api - 7.2.14 | added ServletContainerInitializer: org.eclipse.jetty.websocket.server.NativeWebSocketServletContainerInitializer 2020-05-05T09:55:57，951 | INFO | paxweb-config-1-thread-2 | ServletContainerInitializerScanner | 158 - org.ops4j.pax.web.pax-web-api - 7.2.14 | will add org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer to ServletContainerInitializers 2020-05-05T09:55:57，964 | INFO | activator-1-thread-4 | CommandExtension | 34 - org.apache.karaf.shell.core - 4.2.8 | Registering commands for bundle org.apache.karaf.http.core/4.2.8 2020-05-05T09:55:57，983 | INFO | activator-1-thread-4 | HttpPlugin | 120 - org.apache.karaf.webconsole.http - 4.2.8 | Http plugin activated 2020-05-05T09:55:58，090 | INFO | paxweb-config-1-thread-2 | ServletContainerInitializerScanner | 158 - org.ops4j.pax.web.pax-web-api - 7.2.14 | added ServletContainerInitializer: org.eclipse.jetty.websocket.jsr356.server.deploy.WebSocketServerContainerInitializer 2020-05-05T09:55:58，092 | INFO | paxweb-config-1-thread-2 | HttpServiceContext | 159 - org.ops4j.pax.web.pax-web-jetty - 7.2.14 | registering context DefaultHttpContext [bundle=org.apache.karaf.webconsole.console [117]， contextID=custom]， with context-name: 2020-05-05T09:55:58，097 | INFO | paxweb-config-1-thread-2 | WebSocketServerFactory | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | No DecoratedObjectFactory provided， using new org.eclipse.jetty.util.DecoratedObjectFactory[decorators=1] 2020-05-05T09:55:58，101 | INFO | paxweb-config-1-thread-2 | session | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | DefaultSessionIdManager workerName=node0 2020-05-05T09:55:58，101 | INFO | paxweb-config-1-thread-2 | session | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | No SessionScavenger set， using defaults 2020-05-05T09:55:58，102 | INFO | paxweb-config-1-thread-2 | session | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | node0 Scavenging every 660000ms 2020-05-05T09:55:58，110 | INFO | paxweb-config-1-thread-2 | ContextHandler | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | Started HttpServiceContext{httpContext=DefaultHttpContext [bundle=org.apache.karaf.webconsole.console [117]， contextID=custom]} 2020-05-05T09:55:58，111 | INFO | paxweb-config-1-thread-2 | Server | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | jetty-9.4.22.v20191022; built: 2019-10-22T13:37:13.455Z; git: b1e6b55512e008f7fbdf1cbea4ff8a6446d1073b; jvm 11.0.6+10-LTS 2020-05-05T09:55:58，119 | INFO | paxweb-config-1-thread-2 | AbstractConnector | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | Started default @2db6caad{HTTP/1.1，[http/1.1]}{0.0.0.0:8181} 2020-05-05T09:55:58，119 | INFO | paxweb-config-1-thread-2 | Server | 142 - org.eclipse.jetty.util - 9.4.22.v20191022 | Started @127384ms 2020-05-05T09:56:00，942 | INFO | fileinstall-/opt/apache-karaf-4.2.8/deploy | fileinstall | 10 - org.apache.felix.fileinstall - 3.6.4 | Installing bundle isp.route.TSTISP001.xml / 0.0.0 2020-05-05T09:56:01，155 | INFO | fileinstall-/opt/apache-karaf-4.2.8/deploy | BlueprintContainerImpl | 49 - org.apache.aries.blueprint.core - 1.10.2 | Blueprint bundle isp.route.TSTISP001.xml/0.0.0 has been started 2020-05-05T09:56:01，155 | INFO | Blueprint Event Dispatcher: 1 | BlueprintCamelContext | 100 - org.apache.camel.karaf.camel-blueprint - 3.2.0 | Attempting to start CamelContext: isp.context.user.TSTISP001 2020-05-05T09:56:01，158 | INFO | Blueprint Event Dispatcher: 1 | DefaultManagementStrategy | 57 - org.apache.camel.camel-base - 3.2.0 | JMX is enabled 2020-05-05T09:56:01，163 | INFO | Blueprint Event Dispatcher: 1 | AbstractCamelContext | 57 - org.apache.camel.camel-base - 3.2.0 | Apache Camel 3.2.0 (CamelContext: isp.context.user.TSTISP001) is starting 2020-05-05T09:56:01，163 | INFO | Blueprint Event Dispatcher: 1 | AbstractCamelContext | 57 - org.apache.camel.camel-base - 3.2.0 | StreamCaching is enabled on CamelContext: isp.context.user.TSTISP001 2020-05-05T09:56:01，193 | INFO | Blueprint Event Dispatcher: 1 | DefaultStreamCachingStrategy | 57 - org.apache.camel.camel-base - 3.2.0 | StreamCaching in use with spool directory: /opt/apache-karaf-4.2.8/data/tmp/camel/camel-tmp-ID-ip-10-0-0-147-eu-central-1-compute-internal-1588672515655-1-1 and rules: [Spool > 128K body size] 2020-05-05T09:56:01，198 | ERROR | Blueprint Event Dispatcher: 1 | AbstractCamelContext | 57 - org.apache.camel.camel-base - 3.2.0 | Error starting CamelContext (isp.context.user.TSTISP001) due to exception thrown: STARTED java.lang.IllegalStateException: STARTED at org.eclipse.jetty.server.handler.AbstractHandlerContainer.setServer(AbstractHandlerContainer.java:131) ~[!/:9.4.22.v20191022] at Proxy47994b98_4d05_494d_af04_51ba95ee0e4a.setServer(Unknown Source) ~[?:?] at org.eclipse.jetty.server.handler.HandlerCollection.updateHandlers(HandlerCollection.java:117) ~[!/:9.4.22.v20191022] at org.eclipse.jetty.server.handler.HandlerCollection.addHandler(HandlerCollection.java:180) ~[!/:9.4.22.v20191022] at org.apache.camel.component.jetty.JettyHttpComponent.addJettyHandlers(JettyHttpComponent.java:1169) ~[!/:3.2.0] at org.apache.camel.component.jetty.JettyHttpComponent.createServletForConnector(JettyHttpComponent.java:1127) ~[!/:3.2.0] at org.apache.camel.component.jetty.JettyHttpComponent.connect(JettyHttpComponent.java:332) ~[!/:3.2.0] at org.apache.camel.http.common.HttpCommonEndpoint.connect(HttpCommonEndpoint.java:177) ~[!/:3.2.0] at org.apache.camel.http.common.HttpConsumer.doStart(HttpConsumer.java:58) ~[!/:3.2.0] at org.apache.camel.component.jetty.JettyHttpConsumer.doStart(JettyHttpConsumer.java:31) ~[!/:3.2.0] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.startService(AbstractCamelContext.java:3056) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartOrResumeRouteConsumers(AbstractCamelContext.java:3394) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartRouteConsumers(AbstractCamelContext.java:3325) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.safelyStartRouteServices(AbstractCamelContext.java:3230) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartOrResumeRoutes(AbstractCamelContext.java:2992) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartCamel(AbstractCamelContext.java:2790) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartContext(AbstractCamelContext.java:2643) [!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStart(AbstractCamelContext.java:2606) [!/:3.2.0] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) [!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2448) [!/:3.2.0] at org.apache.camel.blueprint.BlueprintCamelContext.start(BlueprintCamelContext.java:241) [!/:3.2.0] at org.apache.camel.blueprint.BlueprintCamelContext.maybeStart(BlueprintCamelContext.java:283) [!/:3.2.0] at org.apache.camel.blueprint.BlueprintCamelContext.blueprintEvent(BlueprintCamelContext.java:187) [!/:3.2.0] at org.apache.aries.blueprint.container.BlueprintEventDispatcher$3.call(BlueprintEventDispatcher.java:190) [!/:1.10.2] at org.apache.aries.blueprint.container.BlueprintEventDispatcher$3.call(BlueprintEventDispatcher.java:188) [!/:1.10.2] at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?] at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?] at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?] at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) [?:?] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?] at java.lang. Thread .run( Thread .java:834) [?:?] 2020-05-05T09:56:01，210 | INFO | Blueprint Event Dispatcher: 1 | AbstractCamelContext | 57 - org.apache.camel.camel-base - 3.2.0 | Apache Camel 3.2.0 (CamelContext: isp.context.user.TSTISP001) is shutting down 2020-05-05T09:56:01，227 | INFO | Blueprint Event Dispatcher: 1 | AbstractCamelContext | 57 - org.apache.camel.camel-base - 3.2.0 | Apache Camel 3.2.0 (CamelContext: isp.context.user.TSTISP001) uptime 0.064 seconds 2020-05-05T09:56:01，227 | INFO | Blueprint Event Dispatcher: 1 | AbstractCamelContext | 57 - org.apache.camel.camel-base - 3.2.0 | Apache Camel 3.2.0 (CamelContext: isp.context.user.TSTISP001) is shutdown in 0.017 seconds 2020-05-05T09:56:01，228 | WARN | Blueprint Event Dispatcher: 1 | BlueprintCamelStateService | 100 - org.apache.camel.karaf.camel-blueprint - 3.2.0 | Changing Camel state for bundle 168 to Failure 2020-05-05T09:56:01，228 | ERROR | Blueprint Event Dispatcher: 1 | BlueprintCamelContext | 100 - org.apache.camel.karaf.camel-blueprint - 3.2.0 | Error occurred during starting CamelContext: isp.context.user.TSTISP001 java.lang.IllegalStateException: STARTED at org.eclipse.jetty.server.handler.AbstractHandlerContainer.setServer(AbstractHandlerContainer.java:131) ~[?:?] at Proxy47994b98_4d05_494d_af04_51ba95ee0e4a.setServer(Unknown Source) ~[?:?] at org.eclipse.jetty.server.handler.HandlerCollection.updateHandlers(HandlerCollection.java:117) ~[?:?] at org.eclipse.jetty.server.handler.HandlerCollection.addHandler(HandlerCollection.java:180) ~[?:?] at org.apache.camel.component.jetty.JettyHttpComponent.addJettyHandlers(JettyHttpComponent.java:1169) ~[?:?] at org.apache.camel.component.jetty.JettyHttpComponent.createServletForConnector(JettyHttpComponent.java:1127) ~[?:?] at org.apache.camel.component.jetty.JettyHttpComponent.connect(JettyHttpComponent.java:332) ~[?:?] at org.apache.camel.http.common.HttpCommonEndpoint.connect(HttpCommonEndpoint.java:177) ~[?:?] at org.apache.camel.http.common.HttpConsumer.doStart(HttpConsumer.java:58) ~[?:?] at org.apache.camel.component.jetty.JettyHttpConsumer.doStart(JettyHttpConsumer.java:31) ~[?:?] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.startService(AbstractCamelContext.java:3056) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartOrResumeRouteConsumers(AbstractCamelContext.java:3394) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartRouteConsumers(AbstractCamelContext.java:3325) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.safelyStartRouteServices(AbstractCamelContext.java:3230) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartOrResumeRoutes(AbstractCamelContext.java:2992) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartCamel(AbstractCamelContext.java:2790) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStartContext(AbstractCamelContext.java:2643) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doStart(AbstractCamelContext.java:2606) ~[!/:3.2.0] at org.apache.camel.support.service.BaseService.start(BaseService.java:115) ~[!/:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2448) ~[!/:3.2.0] at org.apache.camel.blueprint.BlueprintCamelContext.start(BlueprintCamelContext.java:241) ~[!/:3.2.0] at org.apache.camel.blueprint.BlueprintCamelContext.maybeStart(BlueprintCamelContext.java:283) ~[!/:3.2.0] at org.apache.camel.blueprint.BlueprintCamelContext.blueprintEvent(BlueprintCamelContext.java:187) [!/:3.2.0] at org.apache.aries.blueprint.container.BlueprintEventDispatcher$3.call(BlueprintEventDispatcher.java:190) [!/:1.10.2] at org.apache.aries.blueprint.container.BlueprintEventDispatcher$3.call(BlueprintEventDispatcher.java:188) [!/:1.10.2] at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?] at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?] at java.util.concurrent.FutureTask.run(FutureTask.java:264) [?:?] at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304) [?:?] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?] at java.lang. Thread .run( Thread .java:834) [?:?] 2020-05-05T09:56:01，233 | INFO | fileinstall-/opt/apache-karaf-4.2.8/deploy | fileinstall | 10 - org.apache.felix.fileinstall - 3.6.4 | Started bundle: blueprint:file:/opt/apache-karaf-4.2.8/deploy/isp.route.TSTISP001.xml Files for reference blueprint all-in-one <blueprint xmlns= "http: //www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:ext= "http: //aries.apache.org/blueprint/xmlns/blueprint-ext/v1.0.0" xmlns:xsi= "http: //www.w3.org/2001/XMLSchema-instance" xmlns:cm= "http: //aries.apache.org/blueprint/xmlns/blueprint-cm/v1.1.0" xsi:schemaLocation= "http: //www.osgi.org/xmlns/blueprint/v1.0.0 https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd" > <bean id= "constraint_TSTISP001" class= "org.eclipse.jetty.util.security.Constraint" > <property name= "name" value= "BASIC" /> <property name= "authenticate" value= " true " /> <property name= "roles" > <list> <value>TSTISP001</value> </list> </property> </bean> <bean id= "constraintMapping_TSTISP001" class= "org.eclipse.jetty.security.ConstraintMapping" > <property name= "constraint" ref= "constraint_TSTISP001" /> <property name= "pathSpec" value= "/hello1" /> </bean> <bean id= "securityHandlerImpl" class= "org.eclipse.jetty.security.ConstraintSecurityHandler" > <property name= "loginService" > <bean class= "org.eclipse.jetty.security.HashLoginService" > <property name= "config" value= "/opt/apache-karaf-4.2.8/etc/users.properties" /> </bean> </property> <property name= "authenticator" > <bean class= "org.eclipse.jetty.security.authentication.BasicAuthenticator" /> </property> <property name= "constraintMappings" > <list> <ref component-id= "constraintMapping_TSTISP001" /> </list> </property> </bean> <camelContext id= "isp.context.user.TSTISP001" xmlns= "http: //camel.apache.org/schema/blueprint" streamCache= " true " useBreadcrumb= " true " > <route id= "isp.route.user.TSTISP001" > <from uri= "jetty:http: //0.0.0.0:8182/hello1?handlers=securityHandlerImpl" /> <setBody><constant>Hello 1</constant></setBody> </route> </camelContext> </blueprint> blueprints separated <blueprint xmlns= "http: //www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:xsi= "http: //www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation= "http: //www.osgi.org/xmlns/blueprint/v1.0.0 https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd" > <bean id= "constraint_TSTISP001" class= "org.eclipse.jetty.util.security.Constraint" > <property name= "name" value= "BASIC" /> <property name= "authenticate" value= " true " /> <property name= "roles" > <list> <value>TSTISP001</value> </list> </property> </bean> <bean id= "constraintMapping_TSTISP001" class= "org.eclipse.jetty.security.ConstraintMapping" > <property name= "constraint" ref= "constraint_TSTISP001" /> <property name= "pathSpec" value= "/hello1" /> </bean> <bean id= "securityHandlerImpl" class= "org.eclipse.jetty.security.ConstraintSecurityHandler" > <property name= "loginService" > <bean class= "org.eclipse.jetty.security.HashLoginService" > <property name= "config" value= "/opt/apache-karaf-4.2.8/etc/users.properties" /> </bean> </property> <property name= "authenticator" > <bean class= "org.eclipse.jetty.security.authentication.BasicAuthenticator" /> </property> <property name= "constraintMappings" > <list> <ref component-id= "constraintMapping_TSTISP001" /> </list> </property> </bean> <service id= "securityHandlerIsp" ref= "securityHandlerImpl" interface = "org.eclipse.jetty.server.Handler" /> </blueprint> <blueprint xmlns= "http: //www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:ext= "http: //aries.apache.org/blueprint/xmlns/blueprint-ext/v1.0.0" xmlns:xsi= "http: //www.w3.org/2001/XMLSchema-instance" xmlns:cm= "http: //aries.apache.org/blueprint/xmlns/blueprint-cm/v1.1.0" xsi:schemaLocation= "http: //www.osgi.org/xmlns/blueprint/v1.0.0 https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd" > <!-- set reference to the securityHandler --> <reference id= "securityHandlerIsp" interface = "org.eclipse.jetty.server.Handler" ext:proxy-method= "classes" /> <camelContext id= "isp.context.user.TSTISP001" xmlns= "http: //camel.apache.org/schema/blueprint" streamCache= " true " useBreadcrumb= " true " > <route id= "isp.route.user.TSTISP001" > <from uri= "jetty:http: //0.0.0.0:8182/hello1?handlers=#securityHandlerIsp" /> <setBody><constant>Hello 1</constant></setBody> </route> </camelContext> </blueprint>
CAMEL-14999,Jan Bednar,2020-05-02T15:18:42+0000,1588418322， where 1588418322 is the epoch,Take this simple case:CamelContext ctx = new DefaultCamelContext();ctx.addRoutes(new RouteBuilder() { @Override public void configure() throws Exception { from("direct:input") .doTry() .throwException(new Exception("Something wrong")) .doCatch(Exception.class) .end() .to("log:error?level=WARN&showCaughtException=true"); }});ctx.start();ctx.createProducerTemplate().sendBody("direct:input"， null);In Camel 2.x (tested with 2.24.1 and 2.25.1)， we get the expected log:13:58:06，685 | WARN | main | error | Exchange[ExchangePattern: InOnly， BodyType: null， Body: [Body is null]， CaughtExceptionType: java.lang.Exception， CaughtExceptionMessage: Something wrong]But in Camel 3.x (tested with 3.0.0， 3.1.0 and 3.2.0)， the caught exception is not shown:13:55:19，904 | WARN | main | error | Exchange[ExchangePattern: InOnly， BodyType: null， Body: [Body is null]]However， with showAll=true， the caught exception is correctly shown:13:58:41，258 | WARN | main | error | Exchange[Id: ID-EBEBRPCLDV0019-1588420721258-0-1， ExchangePattern: InOnly， Properties: {CamelExceptionCaught=java.lang.Exception: Something wrong， CamelToEndpoint=log://error?level=WARN&showAll=true}， Headers: {}， BodyType: null， Body: [Body is null]， CaughtExceptionType: java.lang.Exception， CaughtExceptionMessage: Something wrong， StackTrace: java.lang.Exception: Something wrong at LogTest$1.configure(LogTest.java:16) [...]I went through the different migration guides but couldn't find anything about this.This is really blocking for our Camel 3.x migration; any workaround is welcome! (preferably through endpoint parameters),Hide Permalink Laurent Chabot added a comment - 02/May/20 15:18 This part of the logic of LogComponent seems flawed somehow: // first， try to pick up the ExchangeFormatter from the registry ExchangeFormatter logFormatter = getCamelContext().getRegistry().lookupByNameAndType("logFormatter"， ExchangeFormatter.class); if (logFormatter != null) { setProperties(logFormatter， parameters); } else if (exchangeFormatter != null) { // do not set properties， the exchangeFormatter is explicitly set， therefore the // user would have set its properties explicitly too logFormatter = exchangeFormatter; } If I explicitly bind a DefaultExchangeFormatter instance named logFormatter in the registry， then the if condition is met， setProperties is called， and things work as expected. But this shouldn't be needed， right? Why isn't this the default behavior? Show Laurent Chabot added a comment - 02/May/20 15:18 This part of the logic of LogComponent seems flawed somehow: // first， try to pick up the ExchangeFormatter from the registry ExchangeFormatter logFormatter = getCamelContext().getRegistry().lookupByNameAndType( "logFormatter" ， ExchangeFormatter.class); if (logFormatter != null ) { setProperties(logFormatter， parameters); } else if (exchangeFormatter != null ) { // do not set properties， the exchangeFormatter is explicitly set， therefore the // user would have set its properties explicitly too logFormatter = exchangeFormatter; } If I explicitly bind a DefaultExchangeFormatter instance named logFormatter in the registry， then the if condition is met， setProperties is called， and things work as expected. But this shouldn't be needed， right? Why isn't this the default behavior? Hide Permalink Jan Bednar added a comment - 02/May/20 18:50 Fixed in master@ffb362e (+master@1ded844) Show Jan Bednar added a comment - 02/May/20 18:50 Fixed in master@ffb362e (+ master@1ded844 )
CAMEL-14998,Claus Ibsen,2020-05-02T19:39:52+0000,1588433992， where 1588433992 is the epoch,When we add new components etc then we should mark it as preview when they are just added to Camel (by default) - you can override this explicit.We can consider whether its 1 or 2 versions back we do this.,Hide Permalink Claus Ibsen added a comment - 02/May/20 19:39 Newly added components are preview by default now. Show Claus Ibsen added a comment - 02/May/20 19:39 Newly added components are preview by default now.
CAMEL-14997,Unassigned,2020-05-01T21:59:09+0000,1588355949， where 1588355949 is the epoch,I have two bundles， A and B. Both have a camel context defined at OSGI-INF/blueprint/something.xml. Bundle A is dependent on Bundle B. I have unit tests written for Bundle A's routes written using CamelBlueprintTestSupport. I expect that during the setUp for each test， the routes I defined in Bundle A will be started. However， intermittently， those routes do not start and the routes in Bundle B do instead.When trying to diagnose the issue， I was able to pinpoint the cause as this code here， which requests any currently loaded CamelContext service， but doesn't apply any sort of filter to make sure it's the same camelcontext that was created by CamelBlueprintTestSupport itself. It should be possible to fix this by adding some filter， e.g. on the camel.context.symbolicname.,There are no comments yet on this issue.
CAMEL-14996,Claus Ibsen,2020-05-02T19:58:06.065Z,1588435086.065， where 1588435086.065 is the epoch,I get stack overflow exception when i do aggregation with small completionSize onlyI have about 50000 lines to process if i use .completionSize(1000) it's fine but if i do .completionSize(10) i got java.lang.StackOverflowErrorfrom("direct:iSplitSomethingBefore") .routeId("myRouteId") .aggregate(header(FILE_NAME_ONLY)， new GroupedBodyAggregationStrategy()) .eagerCheckCompletion() .completionSize(10) // Only when i use small number .completionPredicate(exchangeProperty(SPLIT_COMPLETE)) // Some code....;java.lang.StackOverflowError: null at java.base/java.lang.ClassLoader.defineClass1(Native Method) ~[na:na] at java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1016) ~[na:na] at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:174) ~[na:na] at java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:800) ~[na:na] at java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:698) ~[na:na] at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:621) ~[na:na] at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:579) ~[na:na] at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178) ~[na:na] at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na] at ch.qos.logback.classic.spi.PackagingDataCalculator.populateFrames(PackagingDataCalculator.java:74) ~[logback-classic-1.2.3.jar:na] at ch.qos.logback.classic.spi.PackagingDataCalculator.calculate(PackagingDataCalculator.java:58) ~[logback-classic-1.2.3.jar:na] at ch.qos.logback.classic.spi.ThrowableProxy.calculatePackagingData(ThrowableProxy.java:142) ~[logback-classic-1.2.3.jar:na] at ch.qos.logback.classic.spi.LoggingEvent.<init>(LoggingEvent.java:122) ~[logback-classic-1.2.3.jar:na] at ch.qos.logback.classic.Logger.buildLoggingEventAndAppend(Logger.java:419) ~[logback-classic-1.2.3.jar:na] at ch.qos.logback.classic.Logger.filterAndLog_0_Or3Plus(Logger.java:383) ~[logback-classic-1.2.3.jar:na] at ch.qos.logback.classic.Logger.warn(Logger.java:692) ~[logback-classic-1.2.3.jar:na] at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:150) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:401) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:323) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0]....,Hide Permalink Chandrakant Hardahe added a comment - 01/May/20 17:09 Hi， Thanks for reporting， I'll look into it Show Chandrakant Hardahe added a comment - 01/May/20 17:09 Hi， Thanks for reporting， I'll look into it Hide Permalink Claus Ibsen added a comment - 02/May/20 07:04 Thanks for reporting， so you have a file with 50000 lines or something and then you aggregate that with a completion size of 10? But you refer to a split completion. So do you have a splitter beforehand? In other words can you maybe put together a small sample unit test or project that reproduces this and attach as zip to this JIRA or put on github etc. Show Claus Ibsen added a comment - 02/May/20 07:04 Thanks for reporting， so you have a file with 50000 lines or something and then you aggregate that with a completion size of 10? But you refer to a split completion. So do you have a splitter beforehand? In other words can you maybe put together a small sample unit test or project that reproduces this and attach as zip to this JIRA or put on github etc. Hide Permalink michael elbaz added a comment - 02/May/20 19:58 - edited stackoverflow.zip Claus IbsenChandrakant Hardahe Reproducible test Show michael elbaz added a comment - 02/May/20 19:58 - edited stackoverflow.zip Claus Ibsen Chandrakant Hardahe Reproducible test Hide Permalink Claus Ibsen added a comment - 03/May/20 08:04 Thanks for reporting， as a workaround you can enable parallel processing on the splitter. Show Claus Ibsen added a comment - 03/May/20 08:04 Thanks for reporting， as a workaround you can enable parallel processing on the splitter. Hide Permalink Claus Ibsen added a comment - 04/May/20 07:23 Okay so this is a combo of splitter and aggregator (but main issue are in splitter/multicast processor) that under certain situations causes to reuse the same thread for splitting all the content but the stackframe doesnt not collapse and it grows and you hit max 1024 and the jvm cant cope with this. The parallel processing option causes the splitter to not reuse the same main thread and therefore does not have this problem. Show Claus Ibsen added a comment - 04/May/20 07:23 Okay so this is a combo of splitter and aggregator (but main issue are in splitter/multicast processor) that under certain situations causes to reuse the same thread for splitting all the content but the stackframe doesnt not collapse and it grows and you hit max 1024 and the jvm cant cope with this. The parallel processing option causes the splitter to not reuse the same main thread and therefore does not have this problem. Hide Permalink michael elbaz added a comment - 04/May/20 07:54 Thanks for investigating so is it a defect or i just have to increase my jvm option or using parallel option ? Show michael elbaz added a comment - 04/May/20 07:54 Thanks for investigating so is it a defect or i just have to increase my jvm option or using parallel option ? Hide Permalink Claus Ibsen added a comment - 04/May/20 07:58 Use parallel， then the splitted messages may be out of order as the default thread pool has 10 worker threads. You can configure this to 1 worker thread， then its not out of order - if you must process the rows one by one in the exact order of your input file. Show Claus Ibsen added a comment - 04/May/20 07:58 Use parallel， then the splitted messages may be out of order as the default thread pool has 10 worker threads. You can configure this to 1 worker thread， then its not out of order - if you must process the rows one by one in the exact order of your input file. Hide Permalink Claus Ibsen added a comment - 04/May/20 15:28 Okay have a fix via CAMEL-15008 thanks for reporting Michael and providing the sample reproducer. Running your sample now works for me. Show Claus Ibsen added a comment - 04/May/20 15:28 Okay have a fix via CAMEL-15008 thanks for reporting Michael and providing the sample reproducer. Running your sample now works for me. Hide Permalink michael elbaz added a comment - 04/May/20 15:48 Ok Claus Ibsen thanks you for your great work ! Show michael elbaz added a comment - 04/May/20 15:48 Ok Claus Ibsen thanks you for your great work !
CAMEL-14995,David Jencks,2020-05-01T07:04:40+0000,1588302280， where 1588302280 is the epoch,While working on https://issues.apache.org/jira/browse/CAMEL-14993 I noticed that these pages are not actually generated: delete mode 100755 docs/modules/ROOT/pages/traits/3scale.adoc delete mode 100755 docs/modules/ROOT/pages/traits/debug.adoc delete mode 100755 docs/modules/ROOT/pages/traits/master.adocI also see:MacBook-Pro-2:camel-k david$ ./script/gen_doc.shGenerating traits documentation...W0430 09:59:35.227985 60469 parse.go:246] Ignoring child directory addons/master: unable to import "addons/master": package addons/master is not in GOROOT (/usr/local/Cellar/go/1.14.2_1/libexec/src/addons/master)W0430 09:59:35.329228 60469 parse.go:246] Ignoring child directory addons/threescale: unable to import "addons/threescale": package addons/threescale is not in GOROOT (/usr/local/Cellar/go/1.14.2_1/libexec/src/addons/threescale)I didn't see any instructions on how to generate the documentation， so I tried things until something happened.I think there are two problems: some pages aren't getting generated this isn't blindingly obvious.I suggest that to partly fix the second problem， the go doc generation for traits start by removing all the traits pages except the index page， traits.adoc. At least git status will then indicate a change. I don't know how to do this in go.,Hide Permalink Andrea Cosentino added a comment - 01/May/20 07:04 - edited We are losing some documentation， the PR must be reviewed with Nicola Ferraro Show Andrea Cosentino added a comment - 01/May/20 07:04 - edited We are losing some documentation， the PR must be reviewed with Nicola Ferraro Hide Permalink Andrea Cosentino added a comment - 01/May/20 07:05 For Camel-K issues， by the way， we use the Github issues tracker， to avoid confusion. Show Andrea Cosentino added a comment - 01/May/20 07:05 For Camel-K issues， by the way， we use the Github issues tracker， to avoid confusion. Hide Permalink David Jencks added a comment - 07/May/20 17:16 I found how to generate the 2 missing pages that still exist， https://github.com/apache/camel-k/pull/1441. I will leave fixing the build so this is less likely to occur again to others. Show David Jencks added a comment - 07/May/20 17:16 I found how to generate the 2 missing pages that still exist， https://github.com/apache/camel-k/pull/1441 . I will leave fixing the build so this is less likely to occur again to others.
CAMEL-14994,Unassigned,2020-05-22T18:39:35.197Z,1590158375.197， where 1590158375.197 is the epoch,The pagehttps://camel.apache.org/projects/List the projects (we should btw add Camel itself IMHO). So basically can we add the logos that we have on the front page， and list them with same caption too. This would make it more appealing as today its a bit dull. And if you go to the front page you have to scroll down to see those projects and logos， so some users may miss seeing that.Also order them so its camel camel k camel kafka camel spring boot camel quarkus camel karaf,Hide Permalink Aashna Jena added a comment - 20/May/20 06:50 Zoran Regvart Can I take this up? I'll add camel， and the logos for each of the projects. PR #360 is for this issue， but it's merely just adding the svg files on top of each project description. I think we can do something better， I can share mockups for some ideas. Show Aashna Jena added a comment - 20/May/20 06:50 Zoran Regvart Can I take this up? I'll add camel， and the logos for each of the projects. PR #360 is for this issue， but it's merely just adding the svg files on top of each project description. I think we can do something better， I can share mockups for some ideas. Hide Permalink Zoran Regvart added a comment - 20/May/20 12:07 Aashna Jena feel free to. Please do share mockups， for inspiration have a look at the spring.io projects page， Akka modules page or CNCF projects page pages. I think what we need is short text on what the project does and links to documentation， downloads， GitHub repositories and similar. Show Zoran Regvart added a comment - 20/May/20 12:07 Aashna Jena feel free to. Please do share mockups， for inspiration have a look at the spring.io projects page ， Akka modules page or CNCF projects page pages. I think what we need is short text on what the project does and links to documentation， downloads， GitHub repositories and similar. Hide Permalink Aashna Jena added a comment - 22/May/20 12:31 - edited This is what I felt looks best. First I tried to have images on the left and text on the right， but since our logos are more wide than tall， it looks odd. Let me know what improvements we can make on this. One thought : do we need to have text explaining the icons for mailing list， documentation and github code? For smaller screens， we can shift to one column instead of two. We can also have simpler icons， if this looks cleaner. Show Aashna Jena added a comment - 22/May/20 12:31 - edited This is what I felt looks best. First I tried to have images on the left and text on the right， but since our logos are more wide than tall， it looks odd. Let me know what improvements we can make on this. One thought : do we need to have text explaining the icons for mailing list， documentation and github code? For smaller screens， we can shift to one column instead of two. We can also have simpler icons， if this looks cleaner. Hide Permalink Claus Ibsen added a comment - 22/May/20 18:43 Oh this is a great step in the right direction. About the first icon (email icon) what does that represent / link to ? Show Claus Ibsen added a comment - 22/May/20 18:43 Oh this is a great step in the right direction. About the first icon (email icon) what does that represent / link to ? Hide Permalink Aashna Jena added a comment - 22/May/20 18:45 That's for the mailing list. Show Aashna Jena added a comment - 22/May/20 18:45 That's for the mailing list. Hide Permalink Claus Ibsen added a comment - 22/May/20 18:48 Ah thanks， yeah okay but these projects have the same mailing list. I dont think that we should have a link for that. We should have as few as possible Documentation Examples Source code (eg github) And for documentation can we use a book icon， see for example what they do here: https://quarkus.io/support/ Show Claus Ibsen added a comment - 22/May/20 18:48 Ah thanks， yeah okay but these projects have the same mailing list. I dont think that we should have a link for that. We should have as few as possible Documentation Examples Source code (eg github) And for documentation can we use a book icon， see for example what they do here: https://quarkus.io/support/ Hide Permalink Aashna Jena added a comment - 22/May/20 19:01 Yes， I noticed the common mailing list too. Maybe we can have an introduction on the projects page which mentions the link to the communication channels (mailing list， gitter). Could you point me to where I can find those icons? Currently， I am looking at Eva Icons because the icons in the "packed with functionality" section on the front page use these. Also， which icon is suggested for "Examples"? Show Aashna Jena added a comment - 22/May/20 19:01 Yes， I noticed the common mailing list too. Maybe we can have an introduction on the projects page which mentions the link to the communication channels (mailing list， gitter). Could you point me to where I can find those icons? Currently， I am looking at Eva Icons because the icons in the "packed with functionality" section on the front page use these. Also， which icon is suggested for "Examples"? Hide Permalink ASF GitHub Bot added a comment - 23/May/20 20:12 aashnajena opened a new pull request #370: URL: https://github.com/apache/camel-website/pull/370 First draft for improving the projects page. I'm opening the PR so that the preview is available. Need feedback on a couple of things : I've taken icons from Eva， from where icons in the "Packed with Functionality" section (on front page) are taken. Do the outlined icons look better or the filled ones? Do we need to add text explaining the icons? As pointed out on the JIRA issue， the mailing list is common for all projects， so should we include that in each project box? As pointed out on the JIRA issue， we should be adding links to examples. What's the best way to add those? Quarkus has a separate Gitter chat. Do other projects have this too? We can add links to those. Also， in <1024 screens， the h1 headings were becoming smaller than other headings， so I removed that. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 23/May/20 20:12 aashnajena opened a new pull request #370: URL: https://github.com/apache/camel-website/pull/370 First draft for improving the projects page. I'm opening the PR so that the preview is available. Need feedback on a couple of things : I've taken icons from Eva， from where icons in the "Packed with Functionality" section (on front page) are taken. Do the outlined icons look better or the filled ones? Do we need to add text explaining the icons? As pointed out on the JIRA issue， the mailing list is common for all projects， so should we include that in each project box? As pointed out on the JIRA issue， we should be adding links to examples. What's the best way to add those? Quarkus has a separate Gitter chat. Do other projects have this too? We can add links to those. Also， in <1024 screens， the h1 headings were becoming smaller than other headings， so I removed that. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 27/May/20 03:23 aashnajena removed a comment on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-634297521 > There's a comment on the [issue](https://issues.apache.org/jira/browse/CAMEL-14994) to include the examples. In addition I think we should have text labels along with icons to make the touch targets a bit bigger on smaller screens and to make the distinction between the source and example repositories clearer. > > The projects.css rules need to be scoped to `.projects` and it would be better to use semantic markup where applicable. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/May/20 03:23 aashnajena removed a comment on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-634297521 > There's a comment on the [issue] ( https://issues.apache.org/jira/browse/CAMEL-14994 ) to include the examples. In addition I think we should have text labels along with icons to make the touch targets a bit bigger on smaller screens and to make the distinction between the source and example repositories clearer. > > The projects.css rules need to be scoped to `.projects` and it would be better to use semantic markup where applicable. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 27/May/20 03:29 aashnajena closed pull request #370: URL: https://github.com/apache/camel-website/pull/370 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/May/20 03:29 aashnajena closed pull request #370: URL: https://github.com/apache/camel-website/pull/370 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 27/May/20 03:39 aashnajena commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-634297521 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/May/20 03:39 aashnajena commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-634297521 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 27/May/20 03:58 aashnajena opened a new pull request #370: URL: https://github.com/apache/camel-website/pull/370 First draft for improving the projects page. I'm opening the PR so that the preview is available. Need feedback on a couple of things : I've taken icons from Eva， from where icons in the "Packed with Functionality" section (on front page) are taken. Do the outlined icons look better or the filled ones? Do we need to add text explaining the icons? As pointed out on the JIRA issue， the mailing list is common for all projects， so should we include that in each project box? As pointed out on the JIRA issue， we should be adding links to examples. What's the best way to add those? Quarkus has a separate Gitter chat. Do other projects have this too? We can add links to those. Also， in <1024 screens， the h1 headings were becoming smaller than other headings， so I removed that. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/May/20 03:58 aashnajena opened a new pull request #370: URL: https://github.com/apache/camel-website/pull/370 First draft for improving the projects page. I'm opening the PR so that the preview is available. Need feedback on a couple of things : I've taken icons from Eva， from where icons in the "Packed with Functionality" section (on front page) are taken. Do the outlined icons look better or the filled ones? Do we need to add text explaining the icons? As pointed out on the JIRA issue， the mailing list is common for all projects， so should we include that in each project box? As pointed out on the JIRA issue， we should be adding links to examples. What's the best way to add those? Quarkus has a separate Gitter chat. Do other projects have this too? We can add links to those. Also， in <1024 screens， the h1 headings were becoming smaller than other headings， so I removed that. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 27/May/20 04:11 zregvart commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-634286045 There's a comment on the [issue](https://issues.apache.org/jira/browse/CAMEL-14994) to include the examples. In addition I think we should have text labels along with icons to make the touch targets a bit bigger on smaller screens and to make the distinction between the source and example repositories clearer. The projects.css rules need to be scoped to `.projects` and it would be better to use semantic markup where applicable. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/May/20 04:11 zregvart commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-634286045 There's a comment on the [issue] ( https://issues.apache.org/jira/browse/CAMEL-14994 ) to include the examples. In addition I think we should have text labels along with icons to make the touch targets a bit bigger on smaller screens and to make the distinction between the source and example repositories clearer. The projects.css rules need to be scoped to `.projects` and it would be better to use semantic markup where applicable. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 27/May/20 04:48 davsclaus commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-634426090 Yeah nice with icon and a little text Docs Examples Source ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/May/20 04:48 davsclaus commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-634426090 Yeah nice with icon and a little text Docs Examples Source ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 30/May/20 13:20 aashnajena commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-636330127 Please review the changes. Also， are there any changes needed in the projects section on the front-page? Since all important links are on this page now， I think it would be good if we link the projects displayed on the front page to their corresponding entries on the "Projects" page. On the front page， instead of providing description+links， we can just have the logo， one-line description， and make it clickable so that it links to the projects page. I think having a link to just "documentation" on the front page makes it look like that's the only important link. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 30/May/20 13:20 aashnajena commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-636330127 Please review the changes. Also， are there any changes needed in the projects section on the front-page? Since all important links are on this page now， I think it would be good if we link the projects displayed on the front page to their corresponding entries on the "Projects" page. On the front page， instead of providing description+links， we can just have the logo， one-line description， and make it clickable so that it links to the projects page. I think having a link to just "documentation" on the front page makes it look like that's the only important link. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 30/May/20 13:22 aashnajena edited a comment on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-636330127 Please review the changes. Also， are there any changes needed in the projects section on the front-page? Since all important links are on this page now， I think it would be good if we link the projects displayed on the front page to their corresponding entries on the "Projects" page. On the front page， instead of providing description+links， we can just have the logo， one-line description， and make it clickable so that it links to the projects page. I think having a link to just "documentation" on the front page makes it look like that's the only important link. @zregvart also mentioned that we should do away with the "Camel Sub-Projects Documentation" section under the "Documentation" menu ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 30/May/20 13:22 aashnajena edited a comment on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-636330127 Please review the changes. Also， are there any changes needed in the projects section on the front-page? Since all important links are on this page now， I think it would be good if we link the projects displayed on the front page to their corresponding entries on the "Projects" page. On the front page， instead of providing description+links， we can just have the logo， one-line description， and make it clickable so that it links to the projects page. I think having a link to just "documentation" on the front page makes it look like that's the only important link. @zregvart also mentioned that we should do away with the "Camel Sub-Projects Documentation" section under the "Documentation" menu ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 01/Jun/20 07:47 zregvart commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-636673556 What I’ve noticed Is that in the mobile version the links overlap. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 01/Jun/20 07:47 zregvart commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-636673556 What I’ve noticed Is that in the mobile version the links overlap. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 02/Jun/20 11:51 aashnajena commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-637489066 What's the smallest width for which we need to adjust our design? Right now， the buttons get broken at <400px width， so I will fix that. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Jun/20 11:51 aashnajena commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-637489066 What's the smallest width for which we need to adjust our design? Right now， the buttons get broken at <400px width， so I will fix that. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 03/Jun/20 06:47 zregvart commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-637993771 @aashnajena I test on my phone， which has 375 points width (750 pixels)， when testnih in the browser I test with Samsung Galaxy 6/9 which has 360 points (IIRC). Here are some statistics to consider: https://gs.statcounter.com/screen-resolution-stats/mobile/worldwide ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 03/Jun/20 06:47 zregvart commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-637993771 @aashnajena I test on my phone， which has 375 points width (750 pixels)， when testnih in the browser I test with Samsung Galaxy 6/9 which has 360 points (IIRC). Here are some statistics to consider: https://gs.statcounter.com/screen-resolution-stats/mobile/worldwide ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 03/Jun/20 20:05 zregvart commented on a change in pull request #370: URL: https://github.com/apache/camel-website/pull/370#discussion_r434822637 ########## File path: antora-ui-camel/src/css/projects.css ########## @@ -0，0 +1，94 @@ +.projects h2 { + text-align: center; +} + +.projects .box { + display: inline-flex; + border: 1px solid var(--color-smoke-90); + width: 46%; + flex-direction: column; + align-items: center; + padding: 1rem; + margin: 1rem; +} + +.projects .box a > img { + display: inline-block; + width: auto; + height: 5rem; +} + +.projects .box a > img + img { + padding-left: 1rem; +} + +.projects .box .description { + padding: 1rem; + text-align: center; +} + +.projects .box .links { + align-items: center; + margin: 1.5rem 0; +} + +.projects .box .links img { + display: inline-flex; + margin: 0 0.25rem; + width: 1rem; + height: 1rem; + vertical-align: -0.18rem; + filter: invert(24%) sepia(38%) saturate(1353%) hue-rotate(200deg) brightness(89%) contrast(99%); +} + +.projects .box .links span { + padding: 0.5rem; + margin: 0 0.4rem; + border: 1px solid var(--color-gray-10); + border-radius: 10rem; + color: var(--body-font-color); +} + +.projects .box .links span:hover { + color: var(--body-font-color); + border: 2px solid var(--color-gray-30); +} + +.projects .box .links a:hover { + text-decoration: none; +} + +@media screen and (max-width: 1023px) { + .projects .box { + width: 100%; + margin: 1rem 0; + } +} + +@media screen and (max-width: 480px) { + .projects .box .links { + padding: 0.4rem 0; + } + + .projects .box .links span { + margin: 0 0.2rem; + padding: 0.4rem; + } + + .projects .box { + padding: 1rem 0.4rem; + } + + .projects .box .links img { + height: 0.8rem; + width: 0.8rem; + vertical-align: -0.1rem; + margin: 0 0.2rem; Review comment: This looks very odd， we should a simpler and more straightforward way to center images. ########## File path: antora-ui-camel/src/css/projects.css ########## @@ -0，0 +1，94 @@ +.projects h2 { + text-align: center; +} + +.projects .box { + display: inline-flex; + border: 1px solid var(--color-smoke-90); + width: 46%; + flex-direction: column; + align-items: center; + padding: 1rem; + margin: 1rem; +} + +.projects .box a > img { + display: inline-block; + width: auto; + height: 5rem; +} + +.projects .box a > img + img { + padding-left: 1rem; +} + +.projects .box .description { + padding: 1rem; + text-align: center; +} + +.projects .box .links { + align-items: center; + margin: 1.5rem 0; +} + +.projects .box .links img { + display: inline-flex; + margin: 0 0.25rem; + width: 1rem; + height: 1rem; + vertical-align: -0.18rem; + filter: invert(24%) sepia(38%) saturate(1353%) hue-rotate(200deg) brightness(89%) contrast(99%); Review comment: This seems overly complex to change the color of a path in SVG， have a look at how we use SVGs for the social/GitHub icons and can change the color via SVG. We need the color to be managed via a variable in the vars.css. ########## File path: content/projects/_index.md ########## @@ -2，36 +2，140 @@ title: Apache Camel Projects — +< div "box" > + +[![Camel](/_/img/logo-d.svg)](/manual/latest/) + +## Camel + +< div "description" > + +Apache Camel is the Swiss knife of integration. It is an open source integration framework that is packed with several hundred components that are used to access databases， message queues and APIs， helping you integrate with everything. + +< /div > + +< div "links" > + +[<span><img src="../img/icons/book-icon.svg" />Docs</span>](/manual/latest/) Review comment: Can we put the images in the `img` directory， they already have the `-icon` in the name no need for a separate directory to hold them. I think we can use the absolute paths to images， i.e. `/_/img/`， as we do for the Camel logo above. ########## File path: static/img/icons/book-icon.svg ########## @@ -0，0 +1 @@ +<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="book"><rect width="24" height="24" opacity="0"/><path d="M19 3H7a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zM7 5h11v10H7a3 3 0 0 0-1 .18V6a1 1 0 0 1 1-1zm0 14a1 1 0 0 1 0-2h11v2z"/></g></g></svg> Review comment: Images need to be placed in the `antora-ui-camel/src/img` directory， we have a pipeline for optimizing SVGs at build time. ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -652，11 +652，6 @@ kbd， } @media screen and (max-width: 1023px) and (min-width: 480px) { .doc > h1.page:first-child， .static > h1:first-child { - font-size: inherit; - } - Review comment: I'm wondering why this was removed? ########## File path: antora-ui-camel/src/css/projects.css ########## @@ -0，0 +1，94 @@ +.projects h2 { + text-align: center; +} + +.projects .box { + display: inline-flex; + border: 1px solid var(--color-smoke-90); + width: 46%; + flex-direction: column; + align-items: center; + padding: 1rem; + margin: 1rem; +} + +.projects .box a > img { + display: inline-block; + width: auto; + height: 5rem; +} + +.projects .box a > img + img { + padding-left: 1rem; +} + +.projects .box .description { + padding: 1rem; + text-align: center; +} + +.projects .box .links { + align-items: center; + margin: 1.5rem 0; +} + +.projects .box .links img { + display: inline-flex; + margin: 0 0.25rem; + width: 1rem; + height: 1rem; + vertical-align: -0.18rem; + filter: invert(24%) sepia(38%) saturate(1353%) hue-rotate(200deg) brightness(89%) contrast(99%); +} + +.projects .box .links span { + padding: 0.5rem; + margin: 0 0.4rem; + border: 1px solid var(--color-gray-10); + border-radius: 10rem; + color: var(--body-font-color); +} + +.projects .box .links span:hover { + color: var(--body-font-color); + border: 2px solid var(--color-gray-30); Review comment: This changes the metrics of the link and causes a reflow. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 03/Jun/20 20:05 zregvart commented on a change in pull request #370: URL: https://github.com/apache/camel-website/pull/370#discussion_r434822637 ########## File path: antora-ui-camel/src/css/projects.css ########## @@ -0，0 +1，94 @@ +.projects h2 { + text-align: center; +} + +.projects .box { + display: inline-flex; + border: 1px solid var(--color-smoke-90); + width: 46%; + flex-direction: column; + align-items: center; + padding: 1rem; + margin: 1rem; +} + +.projects .box a > img { + display: inline-block; + width: auto; + height: 5rem; +} + +.projects .box a > img + img { + padding-left: 1rem; +} + +.projects .box .description { + padding: 1rem; + text-align: center; +} + +.projects .box .links { + align-items: center; + margin: 1.5rem 0; +} + +.projects .box .links img { + display: inline-flex; + margin: 0 0.25rem; + width: 1rem; + height: 1rem; + vertical-align: -0.18rem; + filter: invert(24%) sepia(38%) saturate(1353%) hue-rotate(200deg) brightness(89%) contrast(99%); +} + +.projects .box .links span { + padding: 0.5rem; + margin: 0 0.4rem; + border: 1px solid var(--color-gray-10); + border-radius: 10rem; + color: var(--body-font-color); +} + +.projects .box .links span:hover { + color: var(--body-font-color); + border: 2px solid var(--color-gray-30); +} + +.projects .box .links a:hover { + text-decoration: none; +} + +@media screen and (max-width: 1023px) { + .projects .box { + width: 100%; + margin: 1rem 0; + } +} + +@media screen and (max-width: 480px) { + .projects .box .links { + padding: 0.4rem 0; + } + + .projects .box .links span { + margin: 0 0.2rem; + padding: 0.4rem; + } + + .projects .box { + padding: 1rem 0.4rem; + } + + .projects .box .links img { + height: 0.8rem; + width: 0.8rem; + vertical-align: -0.1rem; + margin: 0 0.2rem; Review comment: This looks very odd， we should a simpler and more straightforward way to center images. ########## File path: antora-ui-camel/src/css/projects.css ########## @@ -0，0 +1，94 @@ +.projects h2 { + text-align: center; +} + +.projects .box { + display: inline-flex; + border: 1px solid var(--color-smoke-90); + width: 46%; + flex-direction: column; + align-items: center; + padding: 1rem; + margin: 1rem; +} + +.projects .box a > img { + display: inline-block; + width: auto; + height: 5rem; +} + +.projects .box a > img + img { + padding-left: 1rem; +} + +.projects .box .description { + padding: 1rem; + text-align: center; +} + +.projects .box .links { + align-items: center; + margin: 1.5rem 0; +} + +.projects .box .links img { + display: inline-flex; + margin: 0 0.25rem; + width: 1rem; + height: 1rem; + vertical-align: -0.18rem; + filter: invert(24%) sepia(38%) saturate(1353%) hue-rotate(200deg) brightness(89%) contrast(99%); Review comment: This seems overly complex to change the color of a path in SVG， have a look at how we use SVGs for the social/GitHub icons and can change the color via SVG. We need the color to be managed via a variable in the vars.css. ########## File path: content/projects/_index.md ########## @@ -2，36 +2，140 @@ title: Apache Camel Projects — + < div "box" > + +[! [Camel] (/_/img/logo-d.svg)](/manual/latest/) + +## Camel + + < div "description" > + +Apache Camel is the Swiss knife of integration. It is an open source integration framework that is packed with several hundred components that are used to access databases， message queues and APIs， helping you integrate with everything. + + < /div > + + < div "links" > + + [<span><img src="../img/icons/book-icon.svg" />Docs</span>] (/manual/latest/) Review comment: Can we put the images in the `img` directory， they already have the `-icon` in the name no need for a separate directory to hold them. I think we can use the absolute paths to images， i.e. `/_/img/`， as we do for the Camel logo above. ########## File path: static/img/icons/book-icon.svg ########## @@ -0，0 +1 @@ +<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="book"><rect width="24" height="24" opacity="0"/><path d="M19 3H7a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zM7 5h11v10H7a3 3 0 0 0-1 .18V6a1 1 0 0 1 1-1zm0 14a1 1 0 0 1 0-2h11v2z"/></g></g></svg> Review comment: Images need to be placed in the `antora-ui-camel/src/img` directory， we have a pipeline for optimizing SVGs at build time. ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -652，11 +652，6 @@ kbd， } @media screen and (max-width: 1023px) and (min-width: 480px) { .doc > h1.page:first-child， .static > h1:first-child { - font-size: inherit; - } - Review comment: I'm wondering why this was removed? ########## File path: antora-ui-camel/src/css/projects.css ########## @@ -0，0 +1，94 @@ +.projects h2 { + text-align: center; +} + +.projects .box { + display: inline-flex; + border: 1px solid var(--color-smoke-90); + width: 46%; + flex-direction: column; + align-items: center; + padding: 1rem; + margin: 1rem; +} + +.projects .box a > img { + display: inline-block; + width: auto; + height: 5rem; +} + +.projects .box a > img + img { + padding-left: 1rem; +} + +.projects .box .description { + padding: 1rem; + text-align: center; +} + +.projects .box .links { + align-items: center; + margin: 1.5rem 0; +} + +.projects .box .links img { + display: inline-flex; + margin: 0 0.25rem; + width: 1rem; + height: 1rem; + vertical-align: -0.18rem; + filter: invert(24%) sepia(38%) saturate(1353%) hue-rotate(200deg) brightness(89%) contrast(99%); +} + +.projects .box .links span { + padding: 0.5rem; + margin: 0 0.4rem; + border: 1px solid var(--color-gray-10); + border-radius: 10rem; + color: var(--body-font-color); +} + +.projects .box .links span:hover { + color: var(--body-font-color); + border: 2px solid var(--color-gray-30); Review comment: This changes the metrics of the link and causes a reflow. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 04/Jun/20 15:54 aashnajena commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-638946145 > I think this change bites more than it needs to， I would make it much simpler for the first iteration. > > I have concerns about introducing new design elements without incorporating them with the rest of the website， e.g. looking at the difference between the way similarly purposed design is presented on the frontpage and on the projects page links that look like buttons are very much different than the current design; underlining the headings for project names; abbreviating "Documentation" to "Docs"; having a border around project cards. > > I think we should consolidate the design across the frontpage and the projects page. Okay， I understand. Here's what I think we can do : 1) Make the CSS as much common as possible for front page projects section and projects page. We can include the border on the front page and remove the underlined headings on the projects page (although this is the default behaviour of H2 on the rest of the website) 2) We can either remove the button-shaped links on the projects page and make them similar to the frontpage : eg ``` option1 | option2 | option3 ``` or we could adapt the frontpage - have just the icons for each project card， because the buttons with icons+text would be too big. 3) As for the abbreviations， documentation -> docs was done to reduce the length. I agree， on the menu and the front page， we have used the term "documentation"， but I feel that "docs" is quite an accepted abbreviation and earlier we used to have a "read the docs" button on the front page. I'm not sure about this issue though， please tell me what to do here. As mentioned in (2)， we can replicate the way links are presented on the front page. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 04/Jun/20 15:54 aashnajena commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-638946145 > I think this change bites more than it needs to， I would make it much simpler for the first iteration. > > I have concerns about introducing new design elements without incorporating them with the rest of the website， e.g. looking at the difference between the way similarly purposed design is presented on the frontpage and on the projects page links that look like buttons are very much different than the current design; underlining the headings for project names; abbreviating "Documentation" to "Docs"; having a border around project cards. > > I think we should consolidate the design across the frontpage and the projects page. Okay， I understand. Here's what I think we can do : 1) Make the CSS as much common as possible for front page projects section and projects page. We can include the border on the front page and remove the underlined headings on the projects page (although this is the default behaviour of H2 on the rest of the website) 2) We can either remove the button-shaped links on the projects page and make them similar to the frontpage : eg ``` option1 | option2 | option3 ``` or we could adapt the frontpage - have just the icons for each project card， because the buttons with icons+text would be too big. 3) As for the abbreviations， documentation -> docs was done to reduce the length. I agree， on the menu and the front page， we have used the term "documentation"， but I feel that "docs" is quite an accepted abbreviation and earlier we used to have a "read the docs" button on the front page. I'm not sure about this issue though， please tell me what to do here. As mentioned in (2)， we can replicate the way links are presented on the front page. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 05/Jun/20 19:25 zregvart commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-639741181 @aashnajena sounds great， I'd like to unify the design across the front page and the projects page， I suggest that we start with the simplest design and work from that. I'm really adverse to shortening the words， e.g. documentation to docs， this is my personal preference， doesn't have to be universally shared. I strongly believe that making things simpler takes more effort and that it pays of in the future by making maintenance/changes easier to do. We need to have a consistent design， I suggest that we start with the minimal changes and unify/change design between the front page and the projects page. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 05/Jun/20 19:25 zregvart commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-639741181 @aashnajena sounds great， I'd like to unify the design across the front page and the projects page， I suggest that we start with the simplest design and work from that. I'm really adverse to shortening the words， e.g. documentation to docs， this is my personal preference， doesn't have to be universally shared. I strongly believe that making things simpler takes more effort and that it pays of in the future by making maintenance/changes easier to do. We need to have a consistent design， I suggest that we start with the minimal changes and unify/change design between the front page and the projects page. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 06/Jun/20 09:04 aashnajena commented on a change in pull request #370: URL: https://github.com/apache/camel-website/pull/370#discussion_r436252592 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -652，11 +652，6 @@ kbd， } @media screen and (max-width: 1023px) and (min-width: 480px) { .doc > h1.page:first-child， .static > h1:first-child { - font-size: inherit; - } - Review comment: This piece of code is causing h1's font-size to become smaller than other headings (only for 480px-1023px). ![image](https://user-images.githubusercontent.com/32356795/83940521-64a29900-a802-11ea-8320-77a70822b633.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 06/Jun/20 09:04 aashnajena commented on a change in pull request #370: URL: https://github.com/apache/camel-website/pull/370#discussion_r436252592 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -652，11 +652，6 @@ kbd， } @media screen and (max-width: 1023px) and (min-width: 480px) { .doc > h1.page:first-child， .static > h1:first-child { - font-size: inherit; - } - Review comment: This piece of code is causing h1's font-size to become smaller than other headings (only for 480px-1023px). ! [image] ( https://user-images.githubusercontent.com/32356795/83940521-64a29900-a802-11ea-8320-77a70822b633.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 07/Jun/20 09:51 aashnajena commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640187864 @zregvart Okay， here's what I think : On the rest of the website， links are never presented as buttons， and I don't see icons associated with links either. I think it's best to keep the project card simple like shown below : ![projects-design-simple](https://user-images.githubusercontent.com/32356795/83965506-cc73e500-a8d1-11ea-8634-d44b3a1575e1.png) I feel that we're repeating too much information on the front page， like description and links. When I visit the front page and see the projects section， I think that documentation is the only available link for each project. I propose that we make the front page "projects" section much simpler， with logos， heading and one-line description. This is completely reusing the design from the projects page. ![frontpage-projects-simple](https://user-images.githubusercontent.com/32356795/83965560-1d83d900-a8d2-11ea-9538-f8bbb85af3b0.png) If the user wants to read more about this project， they can click on the card， which can take them to the projects page. Right now， clicking on the logo takes you to the manual for the project. I think we can maintain the hierarchy as frontpage-project-card (small description) --> projects-section project card (longer description + useful links) --> project manuals (detailed documentation). Would we prefer this or do we want links on the front page as well? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 07/Jun/20 09:51 aashnajena commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640187864 @zregvart Okay， here's what I think : On the rest of the website， links are never presented as buttons， and I don't see icons associated with links either. I think it's best to keep the project card simple like shown below : ! [projects-design-simple] ( https://user-images.githubusercontent.com/32356795/83965506-cc73e500-a8d1-11ea-8634-d44b3a1575e1.png ) I feel that we're repeating too much information on the front page， like description and links. When I visit the front page and see the projects section， I think that documentation is the only available link for each project. I propose that we make the front page "projects" section much simpler， with logos， heading and one-line description. This is completely reusing the design from the projects page. ! [frontpage-projects-simple] ( https://user-images.githubusercontent.com/32356795/83965560-1d83d900-a8d2-11ea-9538-f8bbb85af3b0.png ) If the user wants to read more about this project， they can click on the card， which can take them to the projects page. Right now， clicking on the logo takes you to the manual for the project. I think we can maintain the hierarchy as frontpage-project-card (small description) --> projects-section project card (longer description + useful links) --> project manuals (detailed documentation). Would we prefer this or do we want links on the front page as well? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 07/Jun/20 09:54 aashnajena edited a comment on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640187864 @zregvart Okay， here's what I think : On the rest of the website， links are never presented as buttons， and I don't see icons associated with links either. I think it's best to keep the project card simple like shown below : ![projects-design-simple](https://user-images.githubusercontent.com/32356795/83965506-cc73e500-a8d1-11ea-8634-d44b3a1575e1.png) I feel that we're repeating too much information on the front page， like description and links. When I visit the front page and see the projects section， I think that documentation is the only available link for each project. I propose that we make the front page "projects" section much simpler， with logos， heading and one-line description. This is completely reusing the design from the projects page. ![image](https://user-images.githubusercontent.com/32356795/83965666-d9dd9f00-a8d2-11ea-814f-36b699aed920.png) If the user wants to read more about this project， they can click on the card， which can take them to the projects page. Right now， clicking on the logo takes you to the manual for the project. I think we can maintain the hierarchy as frontpage-project-card (small description) --> projects-section project card (longer description + useful links) --> project manuals (detailed documentation). Would we prefer this or do we want links on the front page as well? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 07/Jun/20 09:54 aashnajena edited a comment on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640187864 @zregvart Okay， here's what I think : On the rest of the website， links are never presented as buttons， and I don't see icons associated with links either. I think it's best to keep the project card simple like shown below : ! [projects-design-simple] ( https://user-images.githubusercontent.com/32356795/83965506-cc73e500-a8d1-11ea-8634-d44b3a1575e1.png ) I feel that we're repeating too much information on the front page， like description and links. When I visit the front page and see the projects section， I think that documentation is the only available link for each project. I propose that we make the front page "projects" section much simpler， with logos， heading and one-line description. This is completely reusing the design from the projects page. ! [image] ( https://user-images.githubusercontent.com/32356795/83965666-d9dd9f00-a8d2-11ea-814f-36b699aed920.png ) If the user wants to read more about this project， they can click on the card， which can take them to the projects page. Right now， clicking on the logo takes you to the manual for the project. I think we can maintain the hierarchy as frontpage-project-card (small description) --> projects-section project card (longer description + useful links) --> project manuals (detailed documentation). Would we prefer this or do we want links on the front page as well? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 07/Jun/20 09:54 aashnajena edited a comment on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640187864 @zregvart Okay， here's what I think : On the rest of the website， links are never presented as buttons， and I don't see icons associated with links either. I think it's best to keep the project card simple like shown below : ![projects-design-simple](https://user-images.githubusercontent.com/32356795/83965506-cc73e500-a8d1-11ea-8634-d44b3a1575e1.png) I feel that we're repeating too much information on the front page， like description and links. When I visit the front page and see the projects section， I think that documentation is the only available link for each project. I propose that we make the front page "projects" section much simpler， with logos， heading and one-line description. This is completely reusing the design from the projects page. ![image](https://user-images.githubusercontent.com/32356795/83965666-d9dd9f00-a8d2-11ea-814f-36b699aed920.png) If the user wants to read more about this project， they can click on the card， which can take them to the projects page. Right now， clicking on the logo takes you to the manual for the project. I think we can maintain the hierarchy as frontpage-project-card (small description) --> projects-page-project-card (longer description + useful links) --> project manuals (detailed documentation). Would we prefer this or do we want links on the front page as well? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 07/Jun/20 09:54 aashnajena edited a comment on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640187864 @zregvart Okay， here's what I think : On the rest of the website， links are never presented as buttons， and I don't see icons associated with links either. I think it's best to keep the project card simple like shown below : ! [projects-design-simple] ( https://user-images.githubusercontent.com/32356795/83965506-cc73e500-a8d1-11ea-8634-d44b3a1575e1.png ) I feel that we're repeating too much information on the front page， like description and links. When I visit the front page and see the projects section， I think that documentation is the only available link for each project. I propose that we make the front page "projects" section much simpler， with logos， heading and one-line description. This is completely reusing the design from the projects page. ! [image] ( https://user-images.githubusercontent.com/32356795/83965666-d9dd9f00-a8d2-11ea-814f-36b699aed920.png ) If the user wants to read more about this project， they can click on the card， which can take them to the projects page. Right now， clicking on the logo takes you to the manual for the project. I think we can maintain the hierarchy as frontpage-project-card (small description) --> projects-page-project-card (longer description + useful links) --> project manuals (detailed documentation). Would we prefer this or do we want links on the front page as well? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 07/Jun/20 11:04 aashnajena commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640198967 Pushed changes which resolve/undo most of the issues mentioned above， and simplify the front-page. @zregvart @davsclaus Please go through how the front-page and projects-page look for different screen sizes now. If we want to restore the bigger descriptions/ links on front-page， it wouldn't be hard. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 07/Jun/20 11:04 aashnajena commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640198967 Pushed changes which resolve/undo most of the issues mentioned above， and simplify the front-page. @zregvart @davsclaus Please go through how the front-page and projects-page look for different screen sizes now. If we want to restore the bigger descriptions/ links on front-page， it wouldn't be hard. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 07/Jun/20 13:51 zregvart commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640222277 This also needs to be rebased on latest changes in master branch. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 07/Jun/20 13:51 zregvart commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640222277 This also needs to be rebased on latest changes in master branch. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 07/Jun/20 13:56 aashnajena commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640223047 I'm not using the icons in this iteration， since links are not accompanied by icons anywhere else on the website. I'll delete the icons. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 07/Jun/20 13:56 aashnajena commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640223047 I'm not using the icons in this iteration， since links are not accompanied by icons anywhere else on the website. I'll delete the icons. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 07/Jun/20 14:08 aashnajena edited a comment on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640223047 I'm not using the icons in this iteration， since links are not accompanied by icons anywhere else on the website. I'll delete the icons. [edit] Made all required changes. It's great to have the previews back! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 07/Jun/20 14:08 aashnajena edited a comment on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640223047 I'm not using the icons in this iteration， since links are not accompanied by icons anywhere else on the website. I'll delete the icons. [edit] Made all required changes. It's great to have the previews back! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 08/Jun/20 08:35 zregvart merged pull request #370: URL: https://github.com/apache/camel-website/pull/370 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 08/Jun/20 08:35 zregvart merged pull request #370: URL: https://github.com/apache/camel-website/pull/370 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 08/Jun/20 10:08 oscerd commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640507449 Build is failing after merging this 11:03:47 $ antora --generator @antora/xref-validator antora-playbook.yml 11:06:11 $ link-checker --disable-external --mkdocs --allow-hash-href public --url-ignore='#top' 11:07:07 anchor not found from index.html to projects#camel 11:07:07 anchor not found from index.html to projects#camel-k 11:07:07 anchor not found from index.html to projects#camel-kafka-connector 11:07:07 anchor not found from index.html to projects#camel-spring-boot 11:07:07 anchor not found from index.html to projects#camel-karaf https://builds.apache.org/view/C/view/Apache%20Camel/job/Camel.website/job/master/236/console ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 08/Jun/20 10:08 oscerd commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640507449 Build is failing after merging this 11:03:47 $ antora --generator @antora/xref-validator antora-playbook.yml 11:06:11 $ link-checker --disable-external --mkdocs --allow-hash-href public --url-ignore='#top' 11:07:07 anchor not found from index.html to projects#camel 11:07:07 anchor not found from index.html to projects#camel-k 11:07:07 anchor not found from index.html to projects#camel-kafka-connector 11:07:07 anchor not found from index.html to projects#camel-spring-boot 11:07:07 anchor not found from index.html to projects#camel-karaf https://builds.apache.org/view/C/view/Apache%20Camel/job/Camel.website/job/master/236/console ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 08/Jun/20 10:42 aashnajena commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640524223 What's the workaround for this? The redirects work fine on the preview ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 08/Jun/20 10:42 aashnajena commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640524223 What's the workaround for this? The redirects work fine on the preview ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 08/Jun/20 10:50 oscerd commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640527895 There shouldn't be a workaround， we need to always build the website. This should fail OOTB while building. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 08/Jun/20 10:50 oscerd commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640527895 There shouldn't be a workaround， we need to always build the website. This should fail OOTB while building. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 08/Jun/20 10:59 aashnajena edited a comment on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640187864 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 08/Jun/20 10:59 aashnajena edited a comment on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640187864 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Zoran Regvart added a comment - 08/Jun/20 11:03 Thanks Aashna Jena! Show Zoran Regvart added a comment - 08/Jun/20 11:03 Thanks Aashna Jena ! Hide Permalink ASF GitHub Bot added a comment - 09/Jun/20 16:04 oscerd commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640537179 There is a PR from @zregvart ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 09/Jun/20 16:04 oscerd commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640537179 There is a PR from @zregvart ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 09/Jun/20 16:26 zregvart commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640538443 This should be fixed with 855259a14f2a1cf10f52c19bd2635f5e98ac24be， I think the link checker should report errors. Perhaps it's the `CAMEL_ENV=production` which triggers minification that introduces the broken links. Anyhow the correct way to link to `index.html` pages is either by specifying the `/path/index.html` or to put the trailing slash on the path， e.g. `/path/`. That only works because Apache tolerates both， I think there's an extra roundtrip with a redirect， so this comes at a cost. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 09/Jun/20 16:26 zregvart commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640538443 This should be fixed with 855259a14f2a1cf10f52c19bd2635f5e98ac24be， I think the link checker should report errors. Perhaps it's the `CAMEL_ENV=production` which triggers minification that introduces the broken links. Anyhow the correct way to link to `index.html` pages is either by specifying the `/path/index.html` or to put the trailing slash on the path， e.g. `/path/`. That only works because Apache tolerates both， I think there's an extra roundtrip with a redirect， so this comes at a cost. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 09/Jun/20 16:39 aashnajena commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640534560 Running `yarn checks` locally isn't giving me any errors under `$ link-checker`. How can I correct these links? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 09/Jun/20 16:39 aashnajena commented on pull request #370: URL: https://github.com/apache/camel-website/pull/370#issuecomment-640534560 Running `yarn checks` locally isn't giving me any errors under `$ link-checker`. How can I correct these links? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 27/Jun/20 20:14 zregvart merged pull request #397: URL: https://github.com/apache/camel-website/pull/397 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/Jun/20 20:14 zregvart merged pull request #397: URL: https://github.com/apache/camel-website/pull/397 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org
CAMEL-14993,David Jencks,2020-04-30T17:18:29+0000,1588252709， where 1588252709 is the epoch,I propose moving traits to a 'traits' module and generating the list of traits on 'traits.adoc' using antora rather than go.I believe there is a problem with traits doc generation; the pages for threescale and main are not generated locally. I'll open a separate issue to discuss this,Hide Permalink David Jencks added a comment - 30/Apr/20 17:18 As a follow up， are there any attributes of the traits that would be useful displayed in an index table? Perhaps planning for the future， "since". Show David Jencks added a comment - 30/Apr/20 17:18 As a follow up， are there any attributes of the traits that would be useful displayed in an index table? Perhaps planning for the future， "since". Hide Permalink Zoran Regvart added a comment - 27/Jun/20 19:02 Nicola Ferraro perhaps you're not aware of this issue. Should we keep the go generator or should we go (excuse the pun) with a Antora + indexTable plugin instead? We have the indexTable for the Camel components and it's data comes from Asciidoc attributes. Show Zoran Regvart added a comment - 27/Jun/20 19:02 Nicola Ferraro perhaps you're not aware of this issue. Should we keep the go generator or should we go (excuse the pun) with a Antora + indexTable plugin instead? We have the indexTable for the Camel components and it's data comes from Asciidoc attributes .
CAMEL-14992,Andrea Cosentino,2020-06-05T11:35:51.892Z,1591342551.892， where 1591342551.892 is the epoch,,Hide Permalink Jon Chase added a comment - 22/May/20 12:22 I'm working on an Athena Camel component and would be happy to contribute it to this effort. It's based on the other Camel AWS2 components， so the pattern is pretty much copy/paste from those. While the basic API invocations are supported (StartQueryExecution， GetQueryExecution， etc.)， I'm also building support for higher level workflows like "execute the query， poll until it's complete， if there was a failure that is retryable， retry， and finally return the results (or give up on failure) in out.body". I'd be happy to contribute this if it'd be useful. Show Jon Chase added a comment - 22/May/20 12:22 I'm working on an Athena Camel component and would be happy to contribute it to this effort. It's based on the other Camel AWS2 components， so the pattern is pretty much copy/paste from those. While the basic API invocations are supported (StartQueryExecution， GetQueryExecution， etc.)， I'm also building support for higher level workflows like "execute the query， poll until it's complete， if there was a failure that is retryable， retry， and finally return the results (or give up on failure) in out.body". I'd be happy to contribute this if it'd be useful. Hide Permalink Andrea Cosentino added a comment - 22/May/20 12:28 You're more than welcome to contribute it Thanks a lot! Show Andrea Cosentino added a comment - 22/May/20 12:28 You're more than welcome to contribute it Thanks a lot! Hide Permalink Jon Chase added a comment - 22/May/20 13:51 Great - I'll have something shareable soon. Show Jon Chase added a comment - 22/May/20 13:51 Great - I'll have something shareable soon. Hide Permalink Jon Chase added a comment - 22/May/20 17:08 Here's what it's looking like so far: String s = "amazonAthenaClient=#athenaClient"; from("direct:executeQuery") .setBody(constant("select 1 as foo")) .to("aws2-athena://executeQuery?outputLocation=" + s3Bucket + "&" + s); from("direct:getQueryExecution") .setBody(constant("select 'getQueryExecutionTest'")) .to("aws2-athena://startQueryExecution?outputLocation=" + s3Bucket + "&" + s) .setHeader(Athena2Constants.QUERY_EXECUTION_ID， simple("${body}")) .to("aws2-athena://getQueryExecution?" + s); from("direct:listQueryExecutions") .setBody(constant("select 1 as foo")) .to("aws2-athena://startQueryExecution?outputLocation=" + s3Bucket + "&" + s) .log("ensured there will be a query execution to return from the following listQueryExecutions call") .to("aws2-athena://listQueryExecutions?" + s); from("direct:startQueryExecution") .setBody(constant("select 1 as foo")) .to("aws2-athena://startQueryExecution?outputLocation=" + s3Bucket + "&" + s); Show Jon Chase added a comment - 22/May/20 17:08 Here's what it's looking like so far: String s = "amazonAthenaClient=#athenaClient" ; from( "direct:executeQuery" ) .setBody(constant( "select 1 as foo" )) .to( "aws2-athena: //executeQuery?outputLocation=" + s3Bucket + "&" + s); from( "direct:getQueryExecution" ) .setBody(constant( "select 'getQueryExecutionTest' " )) .to( "aws2-athena: //startQueryExecution?outputLocation=" + s3Bucket + "&" + s) .setHeader(Athena2Constants.QUERY_EXECUTION_ID， simple( "${body}" )) .to( "aws2-athena: //getQueryExecution?" + s); from( "direct:listQueryExecutions" ) .setBody(constant( "select 1 as foo" )) .to( "aws2-athena: //startQueryExecution?outputLocation=" + s3Bucket + "&" + s) .log( "ensured there will be a query execution to return from the following listQueryExecutions call" ) .to( "aws2-athena: //listQueryExecutions?" + s); from( "direct:startQueryExecution" ) .setBody(constant( "select 1 as foo" )) .to( "aws2-athena: //startQueryExecution?outputLocation=" + s3Bucket + "&" + s); Hide Permalink Andrea Cosentino added a comment - 22/May/20 19:43 Great start! I would probably add the operation like startQueryExecution or listQueryExecution， in an operation URIparam instead of the URIpath like you're doing， but it's matter of design. Your decision in the end. Looks really promising， we're waiting for your contribution Jon Chase， thanks a lot! Show Andrea Cosentino added a comment - 22/May/20 19:43 Great start! I would probably add the operation like startQueryExecution or listQueryExecution， in an operation URIparam instead of the URIpath like you're doing， but it's matter of design. Your decision in the end. Looks really promising， we're waiting for your contribution Jon Chase ， thanks a lot! Hide Permalink Jon Chase added a comment - 23/May/20 10:15 Makes sense. I previously had operation as a parameter and the URI format was like that of the EC2 URI (aws2-athena://label[?options]) - e.g. just using 'label' as a placeholder. Unlike a lot of the other AWS APIs， there's no central 'thing' common to all of the Athena API endpoints to use in the base of the URI. But given your comment， I'll likely change it back (put operation as a parameter) for the sake of consistency with the other AWS components. Show Jon Chase added a comment - 23/May/20 10:15 Makes sense. I previously had operation as a parameter and the URI format was like that of the EC2 URI (aws2-athena://label [?options] ) - e.g. just using 'label' as a placeholder. Unlike a lot of the other AWS APIs， there's no central 'thing' common to all of the Athena API endpoints to use in the base of the URI. But given your comment， I'll likely change it back (put operation as a parameter) for the sake of consistency with the other AWS components. Hide Permalink Jon Chase added a comment - 25/May/20 13:04 I've changed the URI to accept the operation as a parameter instead of part of the path. I've also added a few additional endpoints: getQueryExecution， getQueryResults， listQueryExecutions， startQueryExecution， I can add support for more， but those are the interesting ones to me. I will likely round out the query-centric endpoints (e.g. StopQueryExecution， etc.). If there are specific requests for other endpoints， I'll happily add them now， but otherwise I'm not planning on writing support for e.g "UntagResource"， "UpdateWorkGroup"， etc (I don't use these myself). Either way， it'd be easy to add support for those when desired. I've tried to make `getQueryResults` similar to the JDBC component in that it supports different return types: `outputType=[StreamList，SelectList，S3Pointer]`: /** * Represents various ways to return query results from Athena. For example， choose between a streaming iterator * that will yield all results， a static list of rows， or a pointer to the results in S3. */ public enum Athena2OutputType { /** * When using an endpoint that returns rows directly back to the caller， such as {@code getQueryResults}， use * AWS 2 Athena {@link GetQueryResultsIterable} to return a streaming list of results. Returning a streaming * result means that no API requests happen until the streaming result is accessed. * * <p>This is the type to use if you need to process large result sets in memory (as opposed to， e.g. an EMR job)， * as the iterator returned using this method will stream results from AWS a page at a time， thus limiting the amount * of memory consumed at any one point. */ StreamList， /** * Return a static list of rows. The amount of rows returned is limited to the max response size of Athena's * {@code GetQueryResults} (currently 1，000). * * @see <a href="https://docs.aws.amazon.com/athena/latest/APIReference/API_GetQueryResults.html">GetQueryResults</a> */ SelectList， /** * Return the path to the results in S3. This may be preferred if you want to pass the pointer to the results to * another process for handling. */ S3Pointer } I've got some clean up to do， after which I'll put up a PR. I expect it to take this week to find the time for the clean up. Here's what the routes from the integration test look like now: @Override protected RouteBuilder createRouteBuilder() throws Exception { return new RouteBuilder() { @Override public void configure() throws Exception { // String s = "&accessKey=xxx&secretKey=yyy&region=eu-west-1"; String s = "amazonAthenaClient=#athenaClient"; from("direct:athenaExecuteQueryTest") .setBody(constant( "SELECT * FROM (" + " VALUES" + " (1， 'a')，" + " (2， 'b')" + ") AS t (id， name)")) .to("aws2-athena://label?operation=executeQuery&outputLocation=" + s3Bucket + "&" + s); from("direct:athenaExecuteQueryHandlesPermFailTest") .setBody(constant( "SELECT INVALID SQL")) .to("aws2-athena://label?operation=executeQuery&outputLocation=" + s3Bucket + "&" + s); from("direct:athenaGetQueryExecutionTest") .setBody(constant("SELECT 'foo'")) .to("aws2-athena://label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + s) .to("aws2-athena://label?operation=getQueryExecution&" + s); from("direct:athenaGetQueryResultsAsStreamListTest") .setBody(constant( "SELECT * FROM (" + " VALUES" + " (1， 'a')，" + " (2， 'b')" + ") AS t (id， name)")) .to("aws2-athena://label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + s) .to("aws2-athena://label?operation=getQueryResults&outputType=StreamList&" + s); from("direct:athenaGetQueryResultsAsStaticListTest") .setBody(constant( "SELECT * FROM (" + " VALUES" + " (1， 'a')，" + " (2， 'b')" + ") AS t (id， name)")) .to("aws2-athena://label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + s) .to("aws2-athena://label?operation=getQueryResults&outputType=SelectList&" + s); from("direct:athenaGetQueryResultsAsS3PointerTest") .setBody(constant("SELECT 1 as foo")) .to("aws2-athena://label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + s) .to("aws2-athena://label?operation=getQueryResults&outputType=S3Pointer&" + s); from("direct:athenaListQueryExecutionsTest") .setBody(constant("SELECT 1 AS foo")) .to("aws2-athena://label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + s) .log("ensured there will be a query execution to return from the following listQueryExecutions call") .to("aws2-athena://label?operation=listQueryExecutions&" + s); from("direct:athenaStartQueryExecutionTest") .setBody(constant("SELECT 1 AS foo")) .to("aws2-athena://label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + s); from("direct:athenaStartQueryExecutionAndGetQueryExecutionUsingHeaders") .setBody(constant("SELECT 1")) .to("aws2-athena://label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + s) .to("aws2-athena://label?operation=getQueryExecution&" + s); } }; } Show Jon Chase added a comment - 25/May/20 13:04 I've changed the URI to accept the operation as a parameter instead of part of the path. I've also added a few additional endpoints: getQueryExecution， getQueryResults， listQueryExecutions， startQueryExecution， I can add support for more， but those are the interesting ones to me. I will likely round out the query-centric endpoints (e.g. StopQueryExecution， etc.). If there are specific requests for other endpoints， I'll happily add them now， but otherwise I'm not planning on writing support for e.g "UntagResource"， "UpdateWorkGroup"， etc (I don't use these myself). Either way， it'd be easy to add support for those when desired. I've tried to make `getQueryResults` similar to the JDBC component in that it supports different return types: `outputType= [StreamList，SelectList，S3Pointer] `: /** * Represents various ways to return query results from Athena. For example， choose between a streaming iterator * that will yield all results， a static list of rows， or a pointer to the results in S3. */ public enum Athena2OutputType { /** * When using an endpoint that returns rows directly back to the caller， such as {@code getQueryResults}， use * AWS 2 Athena {@link GetQueryResultsIterable} to return a streaming list of results. Returning a streaming * result means that no API requests happen until the streaming result is accessed. * * <p>This is the type to use if you need to process large result sets in memory (as opposed to， e.g. an EMR job)， * as the iterator returned using this method will stream results from AWS a page at a time， thus limiting the amount * of memory consumed at any one point. */ StreamList， /** * Return a static list of rows. The amount of rows returned is limited to the max response size of Athena's * {@code GetQueryResults} (currently 1，000). * * @see <a href= "https: //docs.aws.amazon.com/athena/latest/APIReference/API_GetQueryResults.html" >GetQueryResults</a> */ SelectList， /** * Return the path to the results in S3. This may be preferred if you want to pass the pointer to the results to * another process for handling. */ S3Pointer } I've got some clean up to do， after which I'll put up a PR. I expect it to take this week to find the time for the clean up. Here's what the routes from the integration test look like now: @Override protected RouteBuilder createRouteBuilder() throws Exception { return new RouteBuilder() { @Override public void configure() throws Exception { // String s = "&accessKey=xxx&secretKey=yyy&region=eu-west-1" ; String s = "amazonAthenaClient=#athenaClient" ; from( "direct:athenaExecuteQueryTest" ) .setBody(constant( "SELECT * FROM (" + " VALUES" + " (1， 'a' )，" + " (2， 'b' )" + ") AS t (id， name)" )) .to( "aws2-athena: //label?operation=executeQuery&outputLocation=" + s3Bucket + "&" + s); from( "direct:athenaExecuteQueryHandlesPermFailTest" ) .setBody(constant( "SELECT INVALID SQL" )) .to( "aws2-athena: //label?operation=executeQuery&outputLocation=" + s3Bucket + "&" + s); from( "direct:athenaGetQueryExecutionTest" ) .setBody(constant( "SELECT 'foo' " )) .to( "aws2-athena: //label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + s) .to( "aws2-athena: //label?operation=getQueryExecution&" + s); from( "direct:athenaGetQueryResultsAsStreamListTest" ) .setBody(constant( "SELECT * FROM (" + " VALUES" + " (1， 'a' )，" + " (2， 'b' )" + ") AS t (id， name)" )) .to( "aws2-athena: //label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + s) .to( "aws2-athena: //label?operation=getQueryResults&outputType=StreamList&" + s); from( "direct:athenaGetQueryResultsAsStaticListTest" ) .setBody(constant( "SELECT * FROM (" + " VALUES" + " (1， 'a' )，" + " (2， 'b' )" + ") AS t (id， name)" )) .to( "aws2-athena: //label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + s) .to( "aws2-athena: //label?operation=getQueryResults&outputType=SelectList&" + s); from( "direct:athenaGetQueryResultsAsS3PointerTest" ) .setBody(constant( "SELECT 1 as foo" )) .to( "aws2-athena: //label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + s) .to( "aws2-athena: //label?operation=getQueryResults&outputType=S3Pointer&" + s); from( "direct:athenaListQueryExecutionsTest" ) .setBody(constant( "SELECT 1 AS foo" )) .to( "aws2-athena: //label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + s) .log( "ensured there will be a query execution to return from the following listQueryExecutions call" ) .to( "aws2-athena: //label?operation=listQueryExecutions&" + s); from( "direct:athenaStartQueryExecutionTest" ) .setBody(constant( "SELECT 1 AS foo" )) .to( "aws2-athena: //label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + s); from( "direct:athenaStartQueryExecutionAndGetQueryExecutionUsingHeaders" ) .setBody(constant( "SELECT 1" )) .to( "aws2-athena: //label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + s) .to( "aws2-athena: //label?operation=getQueryExecution&" + s); } }; } Hide Permalink Andrea Cosentino added a comment - 25/May/20 13:29 Looks awesome! Cannot wait to try out the component! My suggestions is to focus on what we have and what is interesting for you， we can always improve and more operations later. Show Andrea Cosentino added a comment - 25/May/20 13:29 Looks awesome! Cannot wait to try out the component! My suggestions is to focus on what we have and what is interesting for you， we can always improve and more operations later. Hide Permalink Jon Chase added a comment - 30/May/20 16:15 If things go according to plan， I should have a PR up this weekend. Here's what I wound up with in terms of the URI feel: @Override protected RouteBuilder createRouteBuilder() { return new RouteBuilder() { @Override public void configure() { // String awsCreds = "&accessKey=xxx&secretKey=yyy&region=eu-west-1"; String awsCreds = "amazonAthenaClient=#athenaClient"; from("direct:athenaGetQueryExecutionTest") .setBody(constant("SELECT 1")) .to("aws2-athena://label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + awsCreds) .to("aws2-athena://label?operation=getQueryExecution&" + awsCreds); from("direct:athenaGetQueryResultsAsStreamListTest") .setBody(constant( "SELECT * FROM (" + " VALUES" + " (1， 'a')，" + " (2， 'b')" + ") AS t (id， name)")) .to("aws2-athena://label?operation=startQueryExecution&waitTimeout=60000&outputLocation=" + s3Bucket + "&" + awsCreds) .to("aws2-athena://label?operation=getQueryResults&outputType=StreamList&" + awsCreds); from("direct:athenaGetQueryResultsAsSelectListTest") .setBody(constant( "SELECT * FROM (" + " VALUES" + " (1， 'a')，" + " (2， 'b')" + ") AS t (id， name)")) .to("aws2-athena://label?operation=startQueryExecution&waitTimeout=60000&outputLocation=" + s3Bucket + "&" + awsCreds) .to("aws2-athena://label?operation=getQueryResults&outputType=SelectList&" + awsCreds); from("direct:athenaGetQueryResultsAsS3PointerTest") .setBody(constant("SELECT 1")) .to("aws2-athena://label?operation=startQueryExecution&waitTimeout=60000&outputLocation=" + s3Bucket + "&" + awsCreds) .to("aws2-athena://label?operation=getQueryResults&outputType=S3Pointer&" + awsCreds); from("direct:athenaListQueryExecutionsTest") .setBody(constant("SELECT 1")) .to("aws2-athena://label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + awsCreds) .to("aws2-athena://label?operation=listQueryExecutions&" + awsCreds); from("direct:athenaListQueryExecutionsSetsNextTokenTest") .loop(2) .setBody(constant("SELECT 1")) .to("aws2-athena://label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + awsCreds) .end() .to("aws2-athena://label?operation=listQueryExecutions&maxResults=1&" + awsCreds); from("direct:athenaStartQueryExecutionIncludesTraceInQuery") .setBody(constant("SELECT 1")) .to("aws2-athena://label?operation=startQueryExecution&includeTrace=true&outputLocation=" + s3Bucket + "&" + awsCreds) .to("aws2-athena://label?operation=getQueryExecution&" + awsCreds); from("direct:athenaStartQueryExecutionWaitForQueryCompletionTest") .setBody(constant("SELECT 1")) .to("aws2-athena://label?operation=startQueryExecution&waitTimeout=60000&outputLocation=" + s3Bucket + "&" + awsCreds); from("direct:athenaStartQueryExecutionByDefaultDoesNotWaitForCompletionTest") .setBody(constant("SELECT 1")) .to("aws2-athena://label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + awsCreds); from("direct:athenaStartQueryExecutionHandlesInvalidSqlTest") .setBody(constant("SELECT INVALID SQL")) // parses， but query fails to complete .to("aws2-athena://label?operation=startQueryExecution&waitTimeout=60000&maxAttempts=3&retry=always&outputLocation=" + s3Bucket + "&" + awsCreds); from("direct:athenaStartQueryExecutionHandlesMalformedSqlTest") .setBody(constant("MALFORMED SQL")) // unparseable by athena .to("aws2-athena://label?operation=startQueryExecution&waitTimeout=60000&maxAttempts=3&outputLocation=" + s3Bucket + "&" + awsCreds); from("direct:athenaStartQueryExecutionTest") .setBody(constant("SELECT 1")) .to("aws2-athena://label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + awsCreds); from("direct:athenaStartQueryExecutionAndGetQueryExecutionUsingHeaders") .setBody(constant("SELECT 1")) .to("aws2-athena://label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + awsCreds) .to("aws2-athena://label?operation=getQueryExecution&" + awsCreds); from("direct:athenaStartQueryExecutionAndGetQueryResultsByWaitingWithALoop") .setBody(constant("SELECT 1")) .to("aws2-athena://label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + awsCreds) .loopDoWhile(simple("${header." + Athena2Constants.QUERY_EXECUTION_STATE + "} != 'SUCCEEDED'")) .delay(1_000) .to("aws2-athena://label?operation=getQueryExecution&" + awsCreds) .end() .to("aws2-athena://label?operation=getQueryResults&outputType=S3Pointer&" + awsCreds); } }; } Show Jon Chase added a comment - 30/May/20 16:15 If things go according to plan， I should have a PR up this weekend. Here's what I wound up with in terms of the URI feel: @Override protected RouteBuilder createRouteBuilder() { return new RouteBuilder() { @Override public void configure() { // String awsCreds = "&accessKey=xxx&secretKey=yyy&region=eu-west-1" ; String awsCreds = "amazonAthenaClient=#athenaClient" ; from( "direct:athenaGetQueryExecutionTest" ) .setBody(constant( "SELECT 1" )) .to( "aws2-athena: //label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + awsCreds) .to( "aws2-athena: //label?operation=getQueryExecution&" + awsCreds); from( "direct:athenaGetQueryResultsAsStreamListTest" ) .setBody(constant( "SELECT * FROM (" + " VALUES" + " (1， 'a' )，" + " (2， 'b' )" + ") AS t (id， name)" )) .to( "aws2-athena: //label?operation=startQueryExecution&waitTimeout=60000&outputLocation=" + s3Bucket + "&" + awsCreds) .to( "aws2-athena: //label?operation=getQueryResults&outputType=StreamList&" + awsCreds); from( "direct:athenaGetQueryResultsAsSelectListTest" ) .setBody(constant( "SELECT * FROM (" + " VALUES" + " (1， 'a' )，" + " (2， 'b' )" + ") AS t (id， name)" )) .to( "aws2-athena: //label?operation=startQueryExecution&waitTimeout=60000&outputLocation=" + s3Bucket + "&" + awsCreds) .to( "aws2-athena: //label?operation=getQueryResults&outputType=SelectList&" + awsCreds); from( "direct:athenaGetQueryResultsAsS3PointerTest" ) .setBody(constant( "SELECT 1" )) .to( "aws2-athena: //label?operation=startQueryExecution&waitTimeout=60000&outputLocation=" + s3Bucket + "&" + awsCreds) .to( "aws2-athena: //label?operation=getQueryResults&outputType=S3Pointer&" + awsCreds); from( "direct:athenaListQueryExecutionsTest" ) .setBody(constant( "SELECT 1" )) .to( "aws2-athena: //label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + awsCreds) .to( "aws2-athena: //label?operation=listQueryExecutions&" + awsCreds); from( "direct:athenaListQueryExecutionsSetsNextTokenTest" ) .loop(2) .setBody(constant( "SELECT 1" )) .to( "aws2-athena: //label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + awsCreds) .end() .to( "aws2-athena: //label?operation=listQueryExecutions&maxResults=1&" + awsCreds); from( "direct:athenaStartQueryExecutionIncludesTraceInQuery" ) .setBody(constant( "SELECT 1" )) .to( "aws2-athena: //label?operation=startQueryExecution&includeTrace= true &outputLocation=" + s3Bucket + "&" + awsCreds) .to( "aws2-athena: //label?operation=getQueryExecution&" + awsCreds); from( "direct:athenaStartQueryExecutionWaitForQueryCompletionTest" ) .setBody(constant( "SELECT 1" )) .to( "aws2-athena: //label?operation=startQueryExecution&waitTimeout=60000&outputLocation=" + s3Bucket + "&" + awsCreds); from( "direct:athenaStartQueryExecutionByDefaultDoesNotWaitForCompletionTest" ) .setBody(constant( "SELECT 1" )) .to( "aws2-athena: //label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + awsCreds); from( "direct:athenaStartQueryExecutionHandlesInvalidSqlTest" ) .setBody(constant( "SELECT INVALID SQL" )) // parses， but query fails to complete .to( "aws2-athena: //label?operation=startQueryExecution&waitTimeout=60000&maxAttempts=3&retry=always&outputLocation=" + s3Bucket + "&" + awsCreds); from( "direct:athenaStartQueryExecutionHandlesMalformedSqlTest" ) .setBody(constant( "MALFORMED SQL" )) // unparseable by athena .to( "aws2-athena: //label?operation=startQueryExecution&waitTimeout=60000&maxAttempts=3&outputLocation=" + s3Bucket + "&" + awsCreds); from( "direct:athenaStartQueryExecutionTest" ) .setBody(constant( "SELECT 1" )) .to( "aws2-athena: //label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + awsCreds); from( "direct:athenaStartQueryExecutionAndGetQueryExecutionUsingHeaders" ) .setBody(constant( "SELECT 1" )) .to( "aws2-athena: //label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + awsCreds) .to( "aws2-athena: //label?operation=getQueryExecution&" + awsCreds); from( "direct:athenaStartQueryExecutionAndGetQueryResultsByWaitingWithALoop" ) .setBody(constant( "SELECT 1" )) .to( "aws2-athena: //label?operation=startQueryExecution&outputLocation=" + s3Bucket + "&" + awsCreds) .loopDoWhile(simple( "${header." + Athena2Constants.QUERY_EXECUTION_STATE + "} != 'SUCCEEDED' " )) .delay(1_000) .to( "aws2-athena: //label?operation=getQueryExecution&" + awsCreds) .end() .to( "aws2-athena: //label?operation=getQueryResults&outputType=S3Pointer&" + awsCreds); } }; } Hide Permalink Andrea Cosentino added a comment - 30/May/20 16:27 Great stuff! Show Andrea Cosentino added a comment - 30/May/20 16:27 Great stuff! Hide Permalink Andrea Cosentino added a comment - 04/Jun/20 06:43 What's the status on this? It would be great to have it in 3.4.0 Show Andrea Cosentino added a comment - 04/Jun/20 06:43 What's the status on this? It would be great to have it in 3.4.0 Hide Permalink Jon Chase added a comment - 05/Jun/20 11:36 PR is up! https://github.com/apache/camel/pull/3891 I've attached the doc HTML， as that might be the best place to start for an overview. aws2-athena-component.html Show Jon Chase added a comment - 05/Jun/20 11:36 PR is up! https://github.com/apache/camel/pull/3891 I've attached the doc HTML， as that might be the best place to start for an overview. aws2-athena-component.html Hide Permalink Jon Chase added a comment - 06/Jun/20 11:20 I suspect fix version should be set to 3.4.0 (I don't have permissions). Show Jon Chase added a comment - 06/Jun/20 11:20 I suspect fix version should be set to 3.4.0 (I don't have permissions). Hide Permalink Andrea Cosentino added a comment - 08/Jun/20 06:39 Thanks Jon Chase! Show Andrea Cosentino added a comment - 08/Jun/20 06:39 Thanks Jon Chase ! Hide Permalink Jon Chase added a comment - 08/Jun/20 09:24 My pleasure. Thank you for all the quick and useful feedback. Show Jon Chase added a comment - 08/Jun/20 09:24 My pleasure. Thank you for all the quick and useful feedback.
CAMEL-14991,Andrea Cosentino,2020-08-04T13:24:44+0000,1596533084， where 1596533084 is the epoch,,Hide Permalink Andrea Cosentino added a comment - 04/Aug/20 13:24 Looking at the features and how it is possible to retrieve what we store， it doesn't totally make sense to have a component like this Show Andrea Cosentino added a comment - 04/Aug/20 13:24 Looking at the features and how it is possible to retrieve what we store， it doesn't totally make sense to have a component like this
CAMEL-14990,Unassigned,2020-04-30T15:28:45+0000,1588246125， where 1588246125 is the epoch,I've created two Blueprint DSLs. The 1st one works as expected w/ basic auth.<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:ext="http://aries.apache.org/blueprint/xmlns/blueprint-ext/v1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cm="http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.1.0" xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd"> <!-- set security constraints --> <bean id="constraint_TSTISP001" class="org.eclipse.jetty.util.security.Constraint"> <property name="name" value="BASIC"/> <property name="authenticate" value="true"/> <property name="roles"> <list> <value>TSTISP001</value> </list> </property> </bean> <bean id="constraintMapping_TSTISP001" class="org.eclipse.jetty.security.ConstraintMapping"> <property name="constraint" ref="constraint_TSTISP001"/> <property name="pathSpec" value="/hello1"/> </bean> <bean id="securityHandler_TSTISP001" class="org.eclipse.jetty.security.ConstraintSecurityHandler"> <property name="loginService"> <bean class="org.eclipse.jetty.security.HashLoginService"> <property name="config" value="/opt/apache-karaf/etc/TSTISP001.properties"/> </bean> </property> <property name="authenticator"> <bean class="org.eclipse.jetty.security.authentication.BasicAuthenticator"/> </property> <property name="constraintMappings"> <list> <ref component-id="constraintMapping_TSTISP001"/> </list> </property> </bean> <camelContext xmlns="http://camel.apache.org/schema/blueprint" streamCache="true" useBreadcrumb="true"> <route id="isp.route.user.TSTISP001"> <from uri="jetty:http://0.0.0.0:8182/hello1?handlers=securityHandler_TSTISP001" />...The property file TSTISP001.properties looks likeusername1=password1，TSTISP001After deploying a 2nd Blueprint DSL like<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:ext="http://aries.apache.org/blueprint/xmlns/blueprint-ext/v1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cm="http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.1.0" xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd"> <!-- set security constraints --> <bean id="constraint_TSTISP002" class="org.eclipse.jetty.util.security.Constraint"> <property name="name" value="BASIC"/> <property name="authenticate" value="true"/> <property name="roles"> <list> <value>TSTISP002</value> </list> </property> </bean> <bean id="constraintMapping_TSTISP002" class="org.eclipse.jetty.security.ConstraintMapping"> <property name="constraint" ref="constraint_TSTISP002"/> <property name="pathSpec" value="/hello2"/> </bean> <bean id="securityHandler_TSTISP002" class="org.eclipse.jetty.security.ConstraintSecurityHandler"> <property name="loginService"> <bean class="org.eclipse.jetty.security.HashLoginService"> <property name="config" value="/opt/apache-karaf/etc/TSTISP002.properties"/> </bean> </property> <property name="authenticator"> <bean class="org.eclipse.jetty.security.authentication.BasicAuthenticator"/> </property> <property name="constraintMappings"> <list> <ref component-id="constraintMapping_TSTISP002"/> </list> </property> </bean> <camelContext xmlns="http://camel.apache.org/schema/blueprint" streamCache="true" useBreadcrumb="true"> <route> <from uri="jetty:http://0.0.0.0:8182/hello2?handlers=securityHandler_TSTISP002" />...with the corresponding TSTISP002.properties fileusername2=password2，TSTISP002the 2nd route works as expected.The 1st route doesn't have any authentication anymore after the deployment of the 1st route.A platform restart doesn't help. The 2nd route started of both has authentication， the 1st one is loosing the authentication.,Hide Permalink Gerald Kallas added a comment - 30/Apr/20 15:28 - edited I added even a different realm name to each， no success. <property name="realmName" value="TSTISP001" /> and <property name="realmName" value="TSTISP002" /> Show Gerald Kallas added a comment - 30/Apr/20 15:28 - edited I added even a different realm name to each， no success. <property name= "realmName" value= "TSTISP001" /> and <property name= "realmName" value= "TSTISP002" /> Hide Permalink Claus Ibsen added a comment - 01/May/20 04:56 They are on the same port， you cannot AFAIK have different authentication per context-path. So change one of them to use another port number. Show Claus Ibsen added a comment - 01/May/20 04:56 They are on the same port， you cannot AFAIK have different authentication per context-path. So change one of them to use another port number. Hide Permalink Gerald Kallas added a comment - 01/May/20 09:12 Tx Claus Ibsen. Following your comment I've created a Blueprint DSL that works as expected. It contains 2 different constraintMappings w/ a constraint each referring to a dedicated path 1 securityHandler that includes both contraintMappings 2 different camel contexts w/ a route each listening on same port and on a different path With this approach the authentication works. See the Blueprint DSL below. One question .. Is there a way to externalize the constraint / constraintMapping / securityHandler configuration to another Blueprint DSL file and refer to it (as the same w/ sslContextParameters) in the Blueprint DSL files containing the camel context / camel routes? I tried several ways but no one works. <blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:ext="http://aries.apache.org/blueprint/xmlns/blueprint-ext/v1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:cm="http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.1.0" xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd"> <!-- set security constraints --> <bean id="constraint_TSTISP001" class="org.eclipse.jetty.util.security.Constraint"> <property name="name" value="BASIC"/> <property name="authenticate" value="true"/> <property name="roles"> <list> <value>TSTISP001</value> </list> </property> </bean> <bean id="constraintMapping_TSTISP001" class="org.eclipse.jetty.security.ConstraintMapping"> <property name="constraint" ref="constraint_TSTISP001"/> <property name="pathSpec" value="/hello1"/> </bean> <bean id="constraint_TSTISP002" class="org.eclipse.jetty.util.security.Constraint"> <property name="name" value="BASIC"/> <property name="authenticate" value="true"/> <property name="roles"> <list> <value>TSTISP002</value> </list> </property> </bean> <bean id="constraintMapping_TSTISP002" class="org.eclipse.jetty.security.ConstraintMapping"> <property name="constraint" ref="constraint_TSTISP002"/> <property name="pathSpec" value="/hello2"/> </bean> <bean id="securityHandler" class="org.eclipse.jetty.security.ConstraintSecurityHandler"> <property name="loginService"> <bean class="org.eclipse.jetty.security.HashLoginService"> <property name="config" value="/opt/apache-karaf/etc/users.properties"/> </bean> </property> <property name="authenticator"> <bean class="org.eclipse.jetty.security.authentication.BasicAuthenticator"/> </property> <property name="constraintMappings"> <list> <ref component-id="constraintMapping_TSTISP001"/> <ref component-id="constraintMapping_TSTISP002"/> </list> </property> </bean> <!-- set reference to the SSLContextParameters --> <reference id="sslContextParameters" interface="org.apache.camel.support.jsse.SSLContextParameters" ext:proxy-method="classes" /> <camelContext id="isp.context.user.TSTISP001" xmlns="http://camel.apache.org/schema/blueprint" streamCache="true" useBreadcrumb="true"> <route id="isp.route.user.TSTISP001"> <from uri="jetty:https://0.0.0.0:8444/hello1?sslContextParameters=#sslContextParameters&amp;handlers=securityHandler" /> <setBody><constant>Hello 1</constant></setBody> </route> </camelContext> <camelContext id="isp.context.user.TSTISP002" xmlns="http://camel.apache.org/schema/blueprint" streamCache="true" useBreadcrumb="true"> <route id="isp.route.user.TSTISP002"> <from uri="jetty:https://0.0.0.0:8444/hello2?sslContextParameters=#sslContextParameters&amp;handlers=securityHandler" /> <setBody><constant>Hello 2</constant></setBody> </route> </camelContext> </blueprint> Show Gerald Kallas added a comment - 01/May/20 09:12 Tx Claus Ibsen . Following your comment I've created a Blueprint DSL that works as expected. It contains 2 different constraintMappings w/ a constraint each referring to a dedicated path 1 securityHandler that includes both contraintMappings 2 different camel contexts w/ a route each listening on same port and on a different path With this approach the authentication works. See the Blueprint DSL below. One question .. Is there a way to externalize the constraint / constraintMapping / securityHandler configuration to another Blueprint DSL file and refer to it (as the same w/ sslContextParameters) in the Blueprint DSL files containing the camel context / camel routes? I tried several ways but no one works. <blueprint xmlns= "http: //www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:ext= "http: //aries.apache.org/blueprint/xmlns/blueprint-ext/v1.0.0" xmlns:xsi= "http: //www.w3.org/2001/XMLSchema-instance" xmlns:cm= "http: //aries.apache.org/blueprint/xmlns/blueprint-cm/v1.1.0" xsi:schemaLocation= "http: //www.osgi.org/xmlns/blueprint/v1.0.0 https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd" > <!-- set security constraints --> <bean id= "constraint_TSTISP001" class= "org.eclipse.jetty.util.security.Constraint" > <property name= "name" value= "BASIC" /> <property name= "authenticate" value= " true " /> <property name= "roles" > <list> <value>TSTISP001</value> </list> </property> </bean> <bean id= "constraintMapping_TSTISP001" class= "org.eclipse.jetty.security.ConstraintMapping" > <property name= "constraint" ref= "constraint_TSTISP001" /> <property name= "pathSpec" value= "/hello1" /> </bean> <bean id= "constraint_TSTISP002" class= "org.eclipse.jetty.util.security.Constraint" > <property name= "name" value= "BASIC" /> <property name= "authenticate" value= " true " /> <property name= "roles" > <list> <value>TSTISP002</value> </list> </property> </bean> <bean id= "constraintMapping_TSTISP002" class= "org.eclipse.jetty.security.ConstraintMapping" > <property name= "constraint" ref= "constraint_TSTISP002" /> <property name= "pathSpec" value= "/hello2" /> </bean> <bean id= "securityHandler" class= "org.eclipse.jetty.security.ConstraintSecurityHandler" > <property name= "loginService" > <bean class= "org.eclipse.jetty.security.HashLoginService" > <property name= "config" value= "/opt/apache-karaf/etc/users.properties" /> </bean> </property> <property name= "authenticator" > <bean class= "org.eclipse.jetty.security.authentication.BasicAuthenticator" /> </property> <property name= "constraintMappings" > <list> <ref component-id= "constraintMapping_TSTISP001" /> <ref component-id= "constraintMapping_TSTISP002" /> </list> </property> </bean> <!-- set reference to the SSLContextParameters --> <reference id= "sslContextParameters" interface = "org.apache.camel.support.jsse.SSLContextParameters" ext:proxy-method= "classes" /> <camelContext id= "isp.context.user.TSTISP001" xmlns= "http: //camel.apache.org/schema/blueprint" streamCache= " true " useBreadcrumb= " true " > <route id= "isp.route.user.TSTISP001" > <from uri= "jetty:https: //0.0.0.0:8444/hello1?sslContextParameters=#sslContextParameters&amp;handlers=securityHandler" /> <setBody><constant>Hello 1</constant></setBody> </route> </camelContext> <camelContext id= "isp.context.user.TSTISP002" xmlns= "http: //camel.apache.org/schema/blueprint" streamCache= " true " useBreadcrumb= " true " > <route id= "isp.route.user.TSTISP002" > <from uri= "jetty:https: //0.0.0.0:8444/hello2?sslContextParameters=#sslContextParameters&amp;handlers=securityHandler" /> <setBody><constant>Hello 2</constant></setBody> </route> </camelContext> </blueprint> Hide Permalink Gerald Kallas added a comment - 01/May/20 09:33 - edited 2nd question .. when I'm going to remove the handlers=securityHandler from the 2nd route (in the 2nd camel context) it will nevertheless remain there and challenge the basic authentication. <camelContext id="isp.context.user.TSTISP002" xmlns="http://camel.apache.org/schema/blueprint" streamCache="true" useBreadcrumb="true"> <route id="isp.route.user.TSTISP002"> <from uri="jetty:https://0.0.0.0:8444/hello2?sslContextParameters=#sslContextParameters" /> <setBody><constant>Hello 2</constant></setBody> </route> </camelContext> The constraintMapping mapping must be explicitly removed from the securityHandler itself. Does that mean that the securityHandler binds to the port? It's a very common use case that an authentication could be set on different paths and same port in a different manner. Seems that this is not possible here? Show Gerald Kallas added a comment - 01/May/20 09:33 - edited 2nd question .. when I'm going to remove the handlers=securityHandler from the 2nd route (in the 2nd camel context) it will nevertheless remain there and challenge the basic authentication. <camelContext id= "isp.context.user.TSTISP002" xmlns= "http: //camel.apache.org/schema/blueprint" streamCache= " true " useBreadcrumb= " true " > <route id= "isp.route.user.TSTISP002" > <from uri= "jetty:https: //0.0.0.0:8444/hello2?sslContextParameters=#sslContextParameters" /> <setBody><constant>Hello 2</constant></setBody> </route> </camelContext> The constraintMapping mapping must be explicitly removed from the securityHandler itself. Does that mean that the securityHandler binds to the port? It's a very common use case that an authentication could be set on different paths and same port in a different manner. Seems that this is not possible here? Hide Permalink Gerald Kallas added a comment - 01/May/20 12:45 It's quite clear now that the securityHandler is bind to a port. I've moved the open questions to the appropriate mailing lists. The bug can be closed as "works as designed". Thanks. Show Gerald Kallas added a comment - 01/May/20 12:45 It's quite clear now that the securityHandler is bind to a port. I've moved the open questions to the appropriate mailing lists. The bug can be closed as "works as designed". Thanks.
CAMEL-14989,Pasquale Congiusti,2020-04-30T09:47:38+0000,1588225658， where 1588225658 is the epoch,When we use default _id document parameter， Mongo assume it's an ObjectId type. If we include a converter we simplify the creation of any route by just adding: .convertBodyTo(ObjectId.class),There are no comments yet on this issue.
CAMEL-14988,Jiri Ondrusek,2020-04-30T08:52:50+0000,1588222370， where 1588222370 is the epoch,There is an issue with junit tests.Tests creates file in meta-inf/services and deletes it afterwards. this is not needed， as this file already exist more important， built artifact doesn't contain this file and can not work properly,There are no comments yet on this issue.
CAMEL-14987,Jiri Ondrusek,2020-04-30T08:26:01+0000,1588220761， where 1588220761 is the epoch,Due to some configuration errors， securityProvider can not be present in time of security handling. In that case， if allowedRoles are defined， access has to be forbidden.,There are no comments yet on this issue.
CAMEL-14986,Jiri Ondrusek,2020-04-30T07:24:00+0000,1588217040， where 1588217040 is the epoch,In case that spring-security configuration is wrong， security provider allows access to resource if there is no authentication token - has to be fixed.It would be nice to have some debug logs from authentication method of provider.,There are no comments yet on this issue.
CAMEL-14985,Unassigned,2020-04-30T04:23:22+0000,1588206202， where 1588206202 is the epoch,The Qute component allows for processing a message using a Qute template. This can be ideal when using Templating to generate responses for requests in Camel Quarkus.First experiment prototype codeFirst experiment prototype documentation,Hide Permalink Claus Ibsen added a comment - 30/Apr/20 04:23 This should be in camel-quarkus Show Claus Ibsen added a comment - 30/Apr/20 04:23 This should be in camel-quarkus Hide Permalink Jan Bednar added a comment - 30/Apr/20 13:32 camel-quarkus already have this extension. I think this can be closed Marat Gubaidullin. Implementation: https://github.com/apache/camel-quarkus/pull/878 Discussion， why this should be part rather of camel-quarkus， instead of camel-components: https://github.com/apache/camel/pull/3605#issuecomment-595416181 Show Jan Bednar added a comment - 30/Apr/20 13:32 camel-quarkus already have this extension. I think this can be closed Marat Gubaidullin . Implementation: https://github.com/apache/camel-quarkus/pull/878 Discussion， why this should be part rather of camel-quarkus， instead of camel-components: https://github.com/apache/camel/pull/3605#issuecomment-595416181
CAMEL-14984,Unassigned,2020-04-30T12:18:30+0000,1588234710， where 1588234710 is the epoch,The `aws2Sqs`consumer is not respecting the delay value and continuously polls every 500ms regardless of its setting in both the EndpointDSL and normal route builder string.Example: // build.gradledependencies { implementation 'org.apache.camel:camel-endpointdsl:3.2.0' implementation 'org.apache.camel.springboot:camel-aws2-sqs-starter:3.2.0' ...}// EncodeQueueRoute.java...@Componentpublic class EncodeQueueRoute extends EndpointRouteBuilder { @Override public void configure() { from(aws2Sqs("queueName") .useFixedDelay(true) .delay(5000) ).to(file("data/output")); }} I have tried both the EndpointDSL as well as normal Route builder，with useFixedDelay explicitly passed and without (it defaults totrue). Original Mailing List Thread: https://camel.465427.n5.nabble.com/Sqs2EndpointBuilder-is-not-respecting-delay-polling-continuously-td5865730.html,Hide Permalink Chandrakant Hardahe added a comment - 30/Apr/20 12:18 Hi Brice， Thanks for reporting. I would look into it https://issues.apache.org/jira/secure/AddComment!default.jspa?id=13301708 Show Chandrakant Hardahe added a comment - 30/Apr/20 12:18 Hi Brice， Thanks for reporting. I would look into it https://issues.apache.org/jira/secure/AddComment!default.jspa?id=13301708 Hide Permalink Andrea Cosentino added a comment - 30/Apr/20 12:31 - edited This seems to be related to CAMEL-14982 Show Andrea Cosentino added a comment - 30/Apr/20 12:31 - edited This seems to be related to CAMEL-14982 Hide Permalink Andrea Cosentino added a comment - 30/Apr/20 13:38 It's a different problem， the SQS2 consumer instantiate a scheduler and set it. The defaultSchedulerPollconsumer uses delay 500 and initialDelay 1000 and its value are not updated. Show Andrea Cosentino added a comment - 30/Apr/20 13:38 It's a different problem， the SQS2 consumer instantiate a scheduler and set it. The defaultSchedulerPollconsumer uses delay 500 and initialDelay 1000 and its value are not updated. Hide Permalink Andrea Cosentino added a comment - 30/Apr/20 13:43 Chandrakant Hardahe please have a look here https://github.com/apache/camel/blob/master/components/camel-aws2-sqs/src/main/java/org/apache/camel/component/aws2/sqs/Sqs2Endpoint.java#L107 If you don't have time， I already have a possible fix. Show Andrea Cosentino added a comment - 30/Apr/20 13:43 Chandrakant Hardahe please have a look here https://github.com/apache/camel/blob/master/components/camel-aws2-sqs/src/main/java/org/apache/camel/component/aws2/sqs/Sqs2Endpoint.java#L107 If you don't have time， I already have a possible fix. Hide Permalink Chandrakant Hardahe added a comment - 30/Apr/20 13:45 Hi Andrea， Thanks， I'll look into it Show Chandrakant Hardahe added a comment - 30/Apr/20 13:45 Hi Andrea， Thanks， I'll look into it
CAMEL-14983,Unassigned,2020-04-29T16:47:46+0000,1588164466， where 1588164466 is the epoch,Jira component uses a repackaged commons-codec package to use the Base64 class. We should the java.util.Base64 class instead.,There are no comments yet on this issue.
CAMEL-14982,Claus Ibsen,2020-04-29T11:05:14+0000,1588143914， where 1588143914 is the epoch,Is not about camel-file-watch but camel-file it doesn't appear in components list... When using file component with delay option the files will never be consummated if timeUnit != milliseconds Il also see that using delay with string (.delay("2s")) is not accepted anymore i got an exception even if the method still accept string...Some codeorg.apache.camel.FailedToCreateRouteException: Failed to create route input-directory-route: Route(input-directory-route)[From[file:D:/2411/_data/l... because of Failed to resolve endpoint: file:D:/2411/_data/load/input?delay=2s&move=D%3A%2F2411%2F_data%2Fload%2Fsuccess&moveFailed=D%3A%2F2411%2F_data%2Fload%2Ffailure due to: Error binding property (delay=2s) with name: delay on bean: file:D:/2411/_data/load/input?delay=2s&move=D%3A%2F2411%2F_data%2Fload%2Fsuccess&moveFailed=D%3A%2F2411%2F_data%2Fload%2Ffailure with value: 2s at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:123) ~[camel-core-engine-3.2.0.jar:3.2.0] at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:353) ~[camel-core-engine-3.2.0.jar:3.2.0] at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:327) ~[camel-core-engine-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2598) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.support.service.BaseService.init(BaseService.java:83) ~[camel-api-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2431) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.support.service.BaseService.start(BaseService.java:111) ~[camel-api-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2448) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:121) ~[camel-spring-3.2.0.jar:3.2.0] at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:157) ~[camel-spring-3.2.0.jar:3.2.0] at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172) ~[spring-context-5.2.5.RELEASE.jar:5.2.5.RELEASE] at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165) ~[spring-context-5.2.5.RELEASE.jar:5.2.5.RELEASE] at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139) ~[spring-context-5.2.5.RELEASE.jar:5.2.5.RELEASE] at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:403) ~[spring-context-5.2.5.RELEASE.jar:5.2.5.RELEASE] at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:360) ~[spring-context-5.2.5.RELEASE.jar:5.2.5.RELEASE] at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:897) ~[spring-context-5.2.5.RELEASE.jar:5.2.5.RELEASE] at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.finishRefresh(ServletWebServerApplicationContext.java:162) ~[spring-boot-2.2.6.RELEASE.jar:2.2.6.RELEASE] at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:553) ~[spring-context-5.2.5.RELEASE.jar:5.2.5.RELEASE] at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:141) ~[spring-boot-2.2.6.RELEASE.jar:2.2.6.RELEASE] at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:747) ~[spring-boot-2.2.6.RELEASE.jar:2.2.6.RELEASE] at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~[spring-boot-2.2.6.RELEASE.jar:2.2.6.RELEASE] at org.springframework.boot.SpringApplication.run(SpringApplication.java:315) ~[spring-boot-2.2.6.RELEASE.jar:2.2.6.RELEASE] at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226) ~[spring-boot-2.2.6.RELEASE.jar:2.2.6.RELEASE] at org.springframework.boot.SpringApplication.run(SpringApplication.java:1215) ~[spring-boot-2.2.6.RELEASE.jar:2.2.6.RELEASE] at fr.aphp.referential.load.LoadMain.main(LoadMain.java:9) ~[classes/:na]Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: file:D:/2411/_data/load/input?delay=2s&move=D%3A%2F2411%2F_data%2Fload%2Fsuccess&moveFailed=D%3A%2F2411%2F_data%2Fload%2Ffailure due to: Error binding property (delay=2s) with name: delay on bean: file:D:/2411/_data/load/input?delay=2s&move=D%3A%2F2411%2F_data%2Fload%2Fsuccess&moveFailed=D%3A%2F2411%2F_data%2Fload%2Ffailure with value: 2s at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:971) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:893) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.builder.endpoint.AbstractEndpointBuilder.resolve(AbstractEndpointBuilder.java:55) ~[camel-endpointdsl-3.2.0.jar:3.2.0] at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:257) ~[camel-core-engine-3.2.0.jar:3.2.0] at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:117) ~[camel-core-engine-3.2.0.jar:3.2.0] ... 24 common frames omittedCaused by: org.apache.camel.PropertyBindingException: Error binding property (delay=2s) with name: delay on bean: file:D:/2411/_data/load/input?delay=2s&move=D%3A%2F2411%2F_data%2Fload%2Fsuccess&moveFailed=D%3A%2F2411%2F_data%2Fload%2Ffailure with value: 2s at org.apache.camel.support.PropertyBindingSupport.doBindProperties(PropertyBindingSupport.java:555) ~[camel-support-3.2.0.jar:3.2.0] at org.apache.camel.support.PropertyBindingSupport.access$000(PropertyBindingSupport.java:71) ~[camel-support-3.2.0.jar:3.2.0] at org.apache.camel.support.PropertyBindingSupport$Builder.bind(PropertyBindingSupport.java:255) ~[camel-support-3.2.0.jar:3.2.0] at org.apache.camel.support.DefaultEndpoint.setProperties(DefaultEndpoint.java:433) ~[camel-support-3.2.0.jar:3.2.0] at org.apache.camel.support.DefaultEndpoint.configureProperties(DefaultEndpoint.java:401) ~[camel-support-3.2.0.jar:3.2.0] at org.apache.camel.support.ScheduledPollEndpoint.configureProperties(ScheduledPollEndpoint.java:111) ~[camel-support-3.2.0.jar:3.2.0] at org.apache.camel.support.DefaultComponent.setProperties(DefaultComponent.java:449) ~[camel-support-3.2.0.jar:3.2.0] at org.apache.camel.component.file.GenericFileComponent.createEndpoint(GenericFileComponent.java:68) ~[camel-file-3.2.0.jar:3.2.0] at org.apache.camel.component.file.GenericFileComponent.createEndpoint(GenericFileComponent.java:38) ~[camel-file-3.2.0.jar:3.2.0] at org.apache.camel.support.DefaultComponent.createEndpoint(DefaultComponent.java:148) ~[camel-support-3.2.0.jar:3.2.0] at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:952) ~[camel-base-3.2.0.jar:3.2.0] ... 28 common frames omittedCaused by: org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: long with value 2s due to org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: java.lang.Long with value 2s due to java.lang.NumberFormatException: For input string: "2s" at org.apache.camel.impl.converter.CoreTypeConverterRegistry.createTypeConversionException(CoreTypeConverterRegistry.java:563) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.converter.CoreTypeConverterRegistry.doConvertTo(CoreTypeConverterRegistry.java:251) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.converter.CoreTypeConverterRegistry.convertTo(CoreTypeConverterRegistry.java:164) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.converter.CoreTypeConverterRegistry.convertTo(CoreTypeConverterRegistry.java:119) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.support.component.PropertyConfigurerSupport.property(PropertyConfigurerSupport.java:73) ~[camel-support-3.2.0.jar:3.2.0] at org.apache.camel.component.file.FileEndpointConfigurer.configure(FileEndpointConfigurer.java:52) ~[camel-file-3.2.0.jar:3.2.0] at org.apache.camel.support.PropertyBindingSupport.doBindProperties(PropertyBindingSupport.java:550) ~[camel-support-3.2.0.jar:3.2.0] ... 38 common frames omittedCaused by: org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.String to the required type: java.lang.Long with value 2s due to java.lang.NumberFormatException: For input string: "2s" at org.apache.camel.support.SimpleTypeConverter.convertTo(SimpleTypeConverter.java:103) ~[camel-support-3.2.0.jar:3.2.0] at org.apache.camel.impl.converter.CoreTypeConverterRegistry.doConvertTo(CoreTypeConverterRegistry.java:360) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.impl.converter.CoreTypeConverterRegistry.doConvertTo(CoreTypeConverterRegistry.java:234) ~[camel-base-3.2.0.jar:3.2.0] ... 43 common frames omittedCaused by: java.lang.NumberFormatException: For input string: "2s" at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) ~[na:na] at java.base/java.lang.Long.parseLong(Long.java:692) ~[na:na] at java.base/java.lang.Long.valueOf(Long.java:1144) ~[na:na] at org.apache.camel.converter.ObjectConverter.toLong(ObjectConverter.java:177) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.converter.ObjectConverterLoader.lambda$registerConverters$17(ObjectConverterLoader.java:63) ~[camel-base-3.2.0.jar:3.2.0] at org.apache.camel.support.SimpleTypeConverter.convertTo(SimpleTypeConverter.java:99) ~[camel-support-3.2.0.jar:3.2.0] ... 45 common frames omitted @Override public void configure() throws Exception { from(fileEndpoint("myDir")) // route... ; } private EndpointConsumerBuilder fileEndpoint(String directory) { return file(directory) .delay(2) .timeUnit(TimeUnit.SECONDS); },Hide Permalink Claus Ibsen added a comment - 29/Apr/20 11:05 Read the upgrade guide about the 2s thingy Show Claus Ibsen added a comment - 29/Apr/20 11:05 Read the upgrade guide about the 2s thingy Hide Permalink michael elbaz added a comment - 29/Apr/20 11:10 Ok thanks what's about the second point ? Show michael elbaz added a comment - 29/Apr/20 11:10 Ok thanks what's about the second point ? Hide Permalink Claus Ibsen added a comment - 29/Apr/20 11:12 Yeah we need to fix that， a PR with an unit test that reproduces this in core/camel-endpointdsl would be nice. Show Claus Ibsen added a comment - 29/Apr/20 11:12 Yeah we need to fix that， a PR with an unit test that reproduces this in core/camel-endpointdsl would be nice. Hide Permalink Claus Ibsen added a comment - 29/Apr/20 11:13 And btw the string parameters are also for property placeholders， eg delay("myDelayKey") Show Claus Ibsen added a comment - 29/Apr/20 11:13 And btw the string parameters are also for property placeholders， eg delay(" myDelayKey ") Hide Permalink Andrea Cosentino added a comment - 29/Apr/20 11:14 We changed the behavior in 3.2.0 and you have to specify them in milliseconds， in 3.3.0 we are planning to reintroduce the normal notation. Guillaume Nodet is working on it. Show Andrea Cosentino added a comment - 29/Apr/20 11:14 We changed the behavior in 3.2.0 and you have to specify them in milliseconds， in 3.3.0 we are planning to reintroduce the normal notation. Guillaume Nodet is working on it. Hide Permalink michael elbaz added a comment - 29/Apr/20 11:19 Ok thanks Show michael elbaz added a comment - 29/Apr/20 11:19 Ok thanks Hide Permalink Claus Ibsen added a comment - 29/Apr/20 15:02 Created an unit test where I cannot reproduce this on master https://github.com/apache/camel/commit/6c41abb76e01ea5a04beaf324e5427cfe0bfb529 Show Claus Ibsen added a comment - 29/Apr/20 15:02 Created an unit test where I cannot reproduce this on master https://github.com/apache/camel/commit/6c41abb76e01ea5a04beaf324e5427cfe0bfb529 Hide Permalink michael elbaz added a comment - 30/Apr/20 06:11 - edited Claus Ibsen maybe i miss something but your test doesn't reproduce my code since your'e using .initialDelay(0). I test with .initialDelay(0) and yes it's work but i must this one by default ? Is in the documentation ? thanks A ok i understand what happening here it's because .timeUnit() have effect on both ! and since initialDelay have default value 1000 it will start to poll in 1000s. So ok but is it a good thing ? Show michael elbaz added a comment - 30/Apr/20 06:11 - edited Claus Ibsen maybe i miss something but your test doesn't reproduce my code since your'e using .initialDelay(0). I test with .initialDelay(0) and yes it's work but i must this one by default ? Is in the documentation ? thanks A ok i understand what happening here it's because .timeUnit() have effect on both ! and since initialDelay have default value 1000 it will start to poll in 1000s. So ok but is it a good thing ? Hide Permalink Claus Ibsen added a comment - 30/Apr/20 06:57 Ah not really with the initial delay thingy Show Claus Ibsen added a comment - 30/Apr/20 06:57 Ah not really with the initial delay thingy Hide Permalink Claus Ibsen added a comment - 30/Apr/20 07:28 Reopen to not forget about the initial delay. Lets change it to be -1 or something internally so we know its the default， and then we can hardcode it to be 1 second Show Claus Ibsen added a comment - 30/Apr/20 07:28 Reopen to not forget about the initial delay. Lets change it to be -1 or something internally so we know its the default， and then we can hardcode it to be 1 second Hide Permalink michael elbaz added a comment - 30/Apr/20 12:24 - edited It doesn't satisfy the requirement because the default delay before the next pool is 500 so in the case you want something like: .timeUnit(TimeUnit.SECONDS) and .initialDelay(20) you will get poll every 500s it still not good i think. Instead you can just take care about .timeUnit() only if value was provided by user (not the default one) for one of them eg if i do something like .delay(2).timeUnit(TimeUnit.SECONDS) this will not affect initialDelay() with default 1000ms The question is how you will know if is user value or default one ? don't know about clean way to do that Show michael elbaz added a comment - 30/Apr/20 12:24 - edited It doesn't satisfy the requirement because the default delay before the next pool is 500 so in the case you want something like: .timeUnit(TimeUnit.SECONDS) and .initialDelay(20) you will get poll every 500s it still not good i think. Instead you can just take care about .timeUnit() only if value was provided by user (not the default one) for one of them eg if i do something like .delay(2).timeUnit(TimeUnit.SECONDS) this will not affect initialDelay() with default 1000ms The question is how you will know if is user value or default one ? don't know about clean way to do that Hide Permalink Claus Ibsen added a comment - 30/Apr/20 19:54 Okay so the defaults now adjusts if you change the time unit so it stays at their level. A general fix in camel-core so it applies to all scheduled components Show Claus Ibsen added a comment - 30/Apr/20 19:54 Okay so the defaults now adjusts if you change the time unit so it stays at their level. A general fix in camel-core so it applies to all scheduled components Hide Permalink michael elbaz added a comment - 30/Apr/20 20:43 Yeah maybe something in this way if it's not too complicated Show michael elbaz added a comment - 30/Apr/20 20:43 Yeah maybe something in this way if it's not too complicated Hide Permalink michael elbaz added a comment - 01/May/20 08:59 - edited Thanks for the fix Claus Ibsen Just one thing i checked the code and this look weird for me if (delay <= 0) { // compute the default delay that are millis to use current time unit currentDelay = timeUnit.convert(DEFAULT_DELAY， TimeUnit.MILLISECONDS); if (currentDelay <= 0) { // This is not necessary i think // delay must be at least 1 currentDelay = 1; } if (delay < 0) { // compute the default delay that are millis to use current time unit long value = timeUnit.convert(DEFAULT_DELAY， TimeUnit.MILLISECONDS); if (value <= 0) { // This is not necessary i think // delay must be at least 1 value = 1; } How currentDelay or value could be less than 0 in this cases ? Show michael elbaz added a comment - 01/May/20 08:59 - edited Thanks for the fix Claus Ibsen Just one thing i checked the code and this look weird for me if (delay <= 0) { // compute the default delay that are millis to use current time unit currentDelay = timeUnit.convert(DEFAULT_DELAY， TimeUnit.MILLISECONDS); if (currentDelay <= 0) { // This is not necessary i think // delay must be at least 1 currentDelay = 1; } if (delay < 0) { // compute the default delay that are millis to use current time unit long value = timeUnit.convert(DEFAULT_DELAY， TimeUnit.MILLISECONDS); if (value <= 0) { // This is not necessary i think // delay must be at least 1 value = 1; } How currentDelay or value could be less than 0 in this cases ?
CAMEL-14981,Jiri Ondrusek,2020-04-29T06:48:21+0000,1588128501， where 1588128501 is the epoch,Backport SPI interface into camel-undertow https://github.com/apache/camel/pull/3652 https://github.com/apache/camel/pull/3767 Be aware that the second change of SPI interface can not update servlet-api version. There has to be some kind of hook to allow other components (camel-undertow-spring-security) to force this behavior.,There are no comments yet on this issue.
CAMEL-14980,Ramu,2020-05-04T15:22:40.738Z,1588591360.738， where 1588591360.738 is the epoch,Hello everyone， I found out i few days ago that if a `SerializationException` is thrown when the consumer tries to poll messages， it will keep leaving and joining the consumer-group indefinitely and without any informative log. The exception cannot either be handled by any camel exception handler.After some searching in the code i found out the culprit:// org.apache.camel.component.kafka.KafkaConsumer (ligns 406-415):catch (KafkaException e) { // some kind of error in kafka， it may happen during // unsubscribing or during normal processing if (unsubscribing){ getExceptionHandler().handleException("Error unsubscribing " + threadId + " from kafka topic " + topicName， e); }else { LOG.debug("KafkaException consuming {} from topic {} causedby {}. Will attempt to re-connect on next run"， threadId， topicName， e.getMessage()); reConnect = true; }} `SerializationException` extends from `KafkaException`， but it is definitely not a recoverable exception.It logs with debug level， which makes it hard to track， there are SO many things logging in debug.It it cannot be handled by any camel exception handling mechanism.I think it would be better to either: change that catch so that it pinpoints the subclasses of `KafkaException` that are actually recoverable from rejoining (maybe `WakeupException` and a couple others) add a `catch` block for `SerializationException` and maybe `ConfigException` and `OAuthBearerConfigException` before， with a log error andallow the user to handle those exceptions remove that catch block entirely and let users handle any KafkaException however they see fit.Thank you,Hide Permalink Ramu added a comment - 30/Apr/20 03:39 - edited joseph m'bimbi-bene Thanks for reporting. It would be good to have multiple catch blocks to understand better about the error. I would look into it Show Ramu added a comment - 30/Apr/20 03:39 - edited joseph m'bimbi-bene Thanks for reporting. It would be good to have multiple catch blocks to understand better about the error. I would look into it Hide Permalink Claus Ibsen added a comment - 02/May/20 07:07 The serialization error is that due to a posion message in kafka， that you cannot deseerialize? And is it the key or the value? And can you maybe post the stacktrace or some more details of this exception? Show Claus Ibsen added a comment - 02/May/20 07:07 The serialization error is that due to a posion message in kafka， that you cannot deseerialize? And is it the key or the value? And can you maybe post the stacktrace or some more details of this exception? Hide Permalink joseph m'bimbi-bene added a comment - 04/May/20 15:13 - edited Hi. Indeed the serialization error is due to an avro message that the consumer cannot deserialize and it is the value. Here are the logs from Camel : 2020-05-04 16:55:18.768 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-1， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Member consumer-1-3ce58863-302b-4be3-9b86-43a963ffe327 sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) 2020-05-04 16:55:18.866 INFO 13972 --- [umer[cont_hist]] o.a.k.clients.consumer.ConsumerConfig : ConsumerConfig values: allow.auto.create.topics = true auto.commit.interval.ms = 5000 auto.offset.reset = latest bootstrap.servers = [http://localhost:9092] [...] 2020-05-04 16:55:18.925 WARN 13972 --- [umer[cont_hist]] o.a.k.clients.consumer.ConsumerConfig : The configuration 'sasl.kerberos.principal.to.local.rules' was supplied but isn't a known config. 2020-05-04 16:55:18.925 INFO 13972 --- [umer[cont_hist]] o.a.kafka.common.utils.AppInfoParser : Kafka version: 2.3.1 2020-05-04 16:55:18.925 INFO 13972 --- [umer[cont_hist]] o.a.kafka.common.utils.AppInfoParser : Kafka commitId: 18a913733fb71c01 2020-05-04 16:55:18.925 INFO 13972 --- [umer[cont_hist]] o.a.kafka.common.utils.AppInfoParser : Kafka startTimeMs: 1588604118925 2020-05-04 16:55:18.927 INFO 13972 --- [umer[cont_hist]] o.a.camel.component.kafka.KafkaConsumer : Reconnecting cont_hist-Thread 0 to topic cont_hist after 5000 ms 2020-05-04 16:55:23.928 INFO 13972 --- [umer[cont_hist]] o.a.camel.component.kafka.KafkaConsumer : Subscribing cont_hist-Thread 0 to topic cont_hist 2020-05-04 16:55:23.928 INFO 13972 --- [umer[cont_hist]] o.a.k.clients.consumer.KafkaConsumer : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Subscribed to topic(s): cont_hist 2020-05-04 16:55:23.934 INFO 13972 --- [umer[cont_hist]] org.apache.kafka.clients.Metadata : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Cluster ID: RN9Osn1cTTONG3zaT0LtOg 2020-05-04 16:55:23.936 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null) 2020-05-04 16:55:23.937 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.ConsumerCoordinator : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Revoking previously assigned partitions [] 2020-05-04 16:55:23.937 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] (Re-)joining group 2020-05-04 16:55:23.943 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] (Re-)joining group 2020-05-04 16:55:23.949 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Successfully joined group with generation 3 2020-05-04 16:55:23.949 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.ConsumerCoordinator : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Setting newly assigned partitions: cont_hist-0 2020-05-04 16:55:23.954 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.ConsumerCoordinator : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Setting offset for partition cont_hist-0 to the committed offset FetchPosition{offset=2， offsetEpoch=Optional.empty， currentLeader=LeaderAndEpoch{leader=localhost:9092 (id: 1 rack: null)， epoch=0}} 2020-05-04 16:55:23.978 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Member consumer-2-54cba12d-1a38-4a5d-8b50-26f2a6b3868a sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) 2020-05-04 16:55:23.998 INFO 13972 --- [umer[cont_hist]] o.a.k.clients.consumer.ConsumerConfig : ConsumerConfig values: allow.auto.create.topics = true auto.commit.interval.ms = 5000 auto.offset.reset = latest bootstrap.servers = [http://localhost:9092] [...] 2020-05-04 16:55:24.014 WARN 13972 --- [umer[cont_hist]] o.a.k.clients.consumer.ConsumerConfig : The configuration 'sasl.kerberos.principal.to.local.rules' was supplied but isn't a known config. 2020-05-04 16:55:24.014 INFO 13972 --- [umer[cont_hist]] o.a.kafka.common.utils.AppInfoParser : Kafka version: 2.3.1 2020-05-04 16:55:24.014 INFO 13972 --- [umer[cont_hist]] o.a.kafka.common.utils.AppInfoParser : Kafka commitId: 18a913733fb71c01 2020-05-04 16:55:24.015 INFO 13972 --- [umer[cont_hist]] o.a.kafka.common.utils.AppInfoParser : Kafka startTimeMs: 1588604124014 2020-05-04 16:55:24.015 INFO 13972 --- [umer[cont_hist]] o.a.camel.component.kafka.KafkaConsumer : Reconnecting cont_hist-Thread 0 to topic cont_hist after 5000 ms 2020-05-04 16:55:29.015 INFO 13972 --- [umer[cont_hist]] o.a.camel.component.kafka.KafkaConsumer : Subscribing cont_hist-Thread 0 to topic cont_hist 2020-05-04 16:55:29.016 INFO 13972 --- [umer[cont_hist]] o.a.k.clients.consumer.KafkaConsumer : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Subscribed to topic(s): cont_hist 2020-05-04 16:55:29.032 INFO 13972 --- [umer[cont_hist]] org.apache.kafka.clients.Metadata : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Cluster ID: RN9Osn1cTTONG3zaT0LtOg 2020-05-04 16:55:29.032 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null) 2020-05-04 16:55:29.033 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.ConsumerCoordinator : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Revoking previously assigned partitions [] 2020-05-04 16:55:29.034 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] (Re-)joining group 2020-05-04 16:55:29.039 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] (Re-)joining group 2020-05-04 16:55:29.048 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Successfully joined group with generation 5 2020-05-04 16:55:29.048 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.ConsumerCoordinator : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Setting newly assigned partitions: cont_hist-0 2020-05-04 16:55:29.050 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.ConsumerCoordinator : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Setting offset for partition cont_hist-0 to the committed offset FetchPosition{offset=2， offsetEpoch=Optional.empty， currentLeader=LeaderAndEpoch{leader=localhost:9092 (id: 1 rack: null)， epoch=0}} 2020-05-04 16:55:29.066 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Member consumer-3-3da59636-0a83-4abc-9293-a7e456d65574 sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) 2020-05-04 16:55:29.090 INFO 13972 --- [umer[cont_hist]] o.a.k.clients.consumer.ConsumerConfig : ConsumerConfig values: allow.auto.create.topics = true There are no stack trace， it just keep leaving and joining the group. But here is the message when i place a breakpoint in org.apache.camel.component.kafka.KafkaConsumer， lign 409， then in the debugger， evaluate `e.printStackTrace` : org.apache.kafka.common.errors.SerializationException: Error deserializing key/value for partition cont_hist-0 at offset 4. If needed， please seek past the record to continue consumption. Caused by: org.apache.kafka.common.errors.SerializationException: Error deserializing Avro message for id 2 Caused by: org.apache.kafka.common.errors.SerializationException: Could not find class fr.ing.payment.cardeventnotifier.secure3d.generated.avro.PocContHist2 specified in writer's schema whilst finding reader's schema for a SpecificRecord. In my re-creation of the error， I deliberately changed the name of the schema avro of the producer. Another case: when i send garbage through the console-producer. Here is what i get when i evaluate `e.printStackTrace()` on the breakpoint: org.apache.kafka.common.errors.SerializationException: Error deserializing key/value for partition cont_hist-0 at offset 5. If needed， please seek past the record to continue consumption. Caused by: org.apache.kafka.common.errors.SerializationException: Error deserializing Avro message for id -1 Caused by: org.apache.kafka.common.errors.SerializationException: Unknown magic byte! In any case， this error is not printed， the consumer doesn't fail， the exception cannot be handled by an exceptionHandler， and the consumer leaves and joins the group indefinitely without any informative message. Is that enough or do you need any other information ? EDIT: I added a .txt file with some logs. EDIT2: I added a executable example if necessary Show joseph m'bimbi-bene added a comment - 04/May/20 15:13 - edited Hi. Indeed the serialization error is due to an avro message that the consumer cannot deserialize and it is the value. Here are the logs from Camel : 2020-05-04 16:55:18.768 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-1， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Member consumer-1-3ce58863-302b-4be3-9b86-43a963ffe327 sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null ) 2020-05-04 16:55:18.866 INFO 13972 --- [umer[cont_hist]] o.a.k.clients.consumer.ConsumerConfig : ConsumerConfig values: allow.auto.create.topics = true auto.commit.interval.ms = 5000 auto.offset.reset = latest bootstrap.servers = [http: //localhost:9092] [...] 2020-05-04 16:55:18.925 WARN 13972 --- [umer[cont_hist]] o.a.k.clients.consumer.ConsumerConfig : The configuration 'sasl.kerberos.principal.to.local.rules' was supplied but isn't a known config. 2020-05-04 16:55:18.925 INFO 13972 --- [umer[cont_hist]] o.a.kafka.common.utils.AppInfoParser : Kafka version: 2.3.1 2020-05-04 16:55:18.925 INFO 13972 --- [umer[cont_hist]] o.a.kafka.common.utils.AppInfoParser : Kafka commitId: 18a913733fb71c01 2020-05-04 16:55:18.925 INFO 13972 --- [umer[cont_hist]] o.a.kafka.common.utils.AppInfoParser : Kafka startTimeMs: 1588604118925 2020-05-04 16:55:18.927 INFO 13972 --- [umer[cont_hist]] o.a.camel.component.kafka.KafkaConsumer : Reconnecting cont_hist- Thread 0 to topic cont_hist after 5000 ms 2020-05-04 16:55:23.928 INFO 13972 --- [umer[cont_hist]] o.a.camel.component.kafka.KafkaConsumer : Subscribing cont_hist- Thread 0 to topic cont_hist 2020-05-04 16:55:23.928 INFO 13972 --- [umer[cont_hist]] o.a.k.clients.consumer.KafkaConsumer : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Subscribed to topic(s): cont_hist 2020-05-04 16:55:23.934 INFO 13972 --- [umer[cont_hist]] org.apache.kafka.clients.Metadata : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Cluster ID: RN9Osn1cTTONG3zaT0LtOg 2020-05-04 16:55:23.936 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null ) 2020-05-04 16:55:23.937 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.ConsumerCoordinator : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Revoking previously assigned partitions [] 2020-05-04 16:55:23.937 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] (Re-)joining group 2020-05-04 16:55:23.943 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] (Re-)joining group 2020-05-04 16:55:23.949 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Successfully joined group with generation 3 2020-05-04 16:55:23.949 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.ConsumerCoordinator : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Setting newly assigned partitions: cont_hist-0 2020-05-04 16:55:23.954 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.ConsumerCoordinator : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Setting offset for partition cont_hist-0 to the committed offset FetchPosition{offset=2， offsetEpoch=Optional.empty， currentLeader=LeaderAndEpoch{leader=localhost:9092 (id: 1 rack: null )， epoch=0}} 2020-05-04 16:55:23.978 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-2， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Member consumer-2-54cba12d-1a38-4a5d-8b50-26f2a6b3868a sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null ) 2020-05-04 16:55:23.998 INFO 13972 --- [umer[cont_hist]] o.a.k.clients.consumer.ConsumerConfig : ConsumerConfig values: allow.auto.create.topics = true auto.commit.interval.ms = 5000 auto.offset.reset = latest bootstrap.servers = [http: //localhost:9092] [...] 2020-05-04 16:55:24.014 WARN 13972 --- [umer[cont_hist]] o.a.k.clients.consumer.ConsumerConfig : The configuration 'sasl.kerberos.principal.to.local.rules' was supplied but isn't a known config. 2020-05-04 16:55:24.014 INFO 13972 --- [umer[cont_hist]] o.a.kafka.common.utils.AppInfoParser : Kafka version: 2.3.1 2020-05-04 16:55:24.014 INFO 13972 --- [umer[cont_hist]] o.a.kafka.common.utils.AppInfoParser : Kafka commitId: 18a913733fb71c01 2020-05-04 16:55:24.015 INFO 13972 --- [umer[cont_hist]] o.a.kafka.common.utils.AppInfoParser : Kafka startTimeMs: 1588604124014 2020-05-04 16:55:24.015 INFO 13972 --- [umer[cont_hist]] o.a.camel.component.kafka.KafkaConsumer : Reconnecting cont_hist- Thread 0 to topic cont_hist after 5000 ms 2020-05-04 16:55:29.015 INFO 13972 --- [umer[cont_hist]] o.a.camel.component.kafka.KafkaConsumer : Subscribing cont_hist- Thread 0 to topic cont_hist 2020-05-04 16:55:29.016 INFO 13972 --- [umer[cont_hist]] o.a.k.clients.consumer.KafkaConsumer : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Subscribed to topic(s): cont_hist 2020-05-04 16:55:29.032 INFO 13972 --- [umer[cont_hist]] org.apache.kafka.clients.Metadata : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Cluster ID: RN9Osn1cTTONG3zaT0LtOg 2020-05-04 16:55:29.032 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null ) 2020-05-04 16:55:29.033 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.ConsumerCoordinator : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Revoking previously assigned partitions [] 2020-05-04 16:55:29.034 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] (Re-)joining group 2020-05-04 16:55:29.039 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] (Re-)joining group 2020-05-04 16:55:29.048 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Successfully joined group with generation 5 2020-05-04 16:55:29.048 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.ConsumerCoordinator : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Setting newly assigned partitions: cont_hist-0 2020-05-04 16:55:29.050 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.ConsumerCoordinator : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Setting offset for partition cont_hist-0 to the committed offset FetchPosition{offset=2， offsetEpoch=Optional.empty， currentLeader=LeaderAndEpoch{leader=localhost:9092 (id: 1 rack: null )， epoch=0}} 2020-05-04 16:55:29.066 INFO 13972 --- [umer[cont_hist]] o.a.k.c.c.internals.AbstractCoordinator : [Consumer clientId=consumer-3， groupId=6dde7e33-87c6-4ea7-a173-49e903d549e6] Member consumer-3-3da59636-0a83-4abc-9293-a7e456d65574 sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null ) 2020-05-04 16:55:29.090 INFO 13972 --- [umer[cont_hist]] o.a.k.clients.consumer.ConsumerConfig : ConsumerConfig values: allow.auto.create.topics = true There are no stack trace， it just keep leaving and joining the group. But here is the message when i place a breakpoint in org.apache.camel.component.kafka.KafkaConsumer， lign 409， then in the debugger， evaluate `e.printStackTrace` : org.apache.kafka.common.errors.SerializationException: Error deserializing key/value for partition cont_hist-0 at offset 4. If needed， please seek past the record to continue consumption. Caused by: org.apache.kafka.common.errors.SerializationException: Error deserializing Avro message for id 2 Caused by: org.apache.kafka.common.errors.SerializationException: Could not find class fr.ing.payment.cardeventnotifier.secure3d.generated.avro.PocContHist2 specified in writer 's schema whilst finding reader' s schema for a SpecificRecord. In my re-creation of the error， I deliberately changed the name of the schema avro of the producer. Another case: when i send garbage through the console-producer. Here is what i get when i evaluate `e.printStackTrace()` on the breakpoint: org.apache.kafka.common.errors.SerializationException: Error deserializing key/value for partition cont_hist-0 at offset 5. If needed， please seek past the record to continue consumption. Caused by: org.apache.kafka.common.errors.SerializationException: Error deserializing Avro message for id -1 Caused by: org.apache.kafka.common.errors.SerializationException: Unknown magic byte ! In any case， this error is not printed， the consumer doesn't fail， the exception cannot be handled by an exceptionHandler， and the consumer leaves and joins the group indefinitely without any informative message. Is that enough or do you need any other information ? EDIT: I added a .txt file with some logs. EDIT2: I added a executable example if necessary Hide Permalink Ramu added a comment - 05/May/20 06:10 Thanks for the logs and example. i will look in to it Show Ramu added a comment - 05/May/20 06:10 Thanks for the logs and example. i will look in to it Hide Permalink Ramu added a comment - 29/Jun/20 03:15 we can get rid of these type of issues by implementing deadletterqueue for kafka . we can implement a failure-strategy similar to kafka-connect failure-strategy : Specify the failure strategy to apply when a message produced from a record is nacked. Values can be fail (default)， ignore， or dead-letter-queue Type: string supports 3 strategies: fail - fail the application， no more records will be processed. (default) The offset of the record that has not been processed correctly is not committed. ignore - the failure is logged， but the processing continue. The offset of the record that has not been processed correctly is committed. dead-letter-queue - the offset of the record that has not been processed correctly is committed， but the record is written to a (Kafka) dead letter topic. The strategy is selected using the failure-strategy attribute. In the case of dead-letter-queue， you can configure the following attributes: dead-letter-queue.topic: the topic to use to write the records not processed correctly， default is dead-letter-topic-$channel， with $channel being the name of the channel. dead-letter-queue.key.serializer: the serializer used to write the record key on the dead letter queue. By default， it deduces the serializer from the key deserializer. dead-letter-queue.value.serializer: the serializer used to write the record value on the dead letter queue. By default， it deduces the serializer from the value deserializer. The record written on the dead letter queue contains the dead-letter-reason header with the nack reason (message from the exception passed to the nack method). It may also contain the dead-letter-cause with the message from the cause， if any. your comments welcome Show Ramu added a comment - 29/Jun/20 03:15 we can get rid of these type of issues by implementing deadletterqueue for kafka . we can implement a failure-strategy similar to kafka-connect failure-strategy : Specify the failure strategy to apply when a message produced from a record is nacked. Values can be fail (default)， ignore， or dead-letter-queue Type: string supports 3 strategies: fail - fail the application， no more records will be processed. (default) The offset of the record that has not been processed correctly is not committed. ignore - the failure is logged， but the processing continue. The offset of the record that has not been processed correctly is committed. dead-letter-queue - the offset of the record that has not been processed correctly is committed， but the record is written to a (Kafka) dead letter topic. The strategy is selected using the failure-strategy attribute. In the case of dead-letter-queue， you can configure the following attributes: dead-letter-queue.topic: the topic to use to write the records not processed correctly， default is dead-letter-topic-$channel， with $channel being the name of the channel. dead-letter-queue.key.serializer: the serializer used to write the record key on the dead letter queue. By default， it deduces the serializer from the key deserializer. dead-letter-queue.value.serializer: the serializer used to write the record value on the dead letter queue. By default， it deduces the serializer from the value deserializer. The record written on the dead letter queue contains the dead-letter-reason header with the nack reason (message from the exception passed to the nack method). It may also contain the dead-letter-cause with the message from the cause， if any. your comments welcome Hide Permalink Jan Bednar added a comment - 15/Oct/20 22:39 I think something like failture strategy is overcomplicating things. It is IMO not needed as Camel already have similar strategies implemented as errorHandler and user can use that with `bridgeErrorHandler=true`. First step is fixing that catch block. Reconnect should be attempted only for instances of `RetriableException`. All other types of `KafkaException` should be delegated to `ExceptionHandler`. There is another user with same problem https://stackoverflow.com/questions/64366380/apache-camel-kafka-bridgeerrorhandler-not-working Show Jan Bednar added a comment - 15/Oct/20 22:39 I think something like failture strategy is overcomplicating things. It is IMO not needed as Camel already have similar strategies implemented as errorHandler and user can use that with `bridgeErrorHandler=true`. First step is fixing that catch block. Reconnect should be attempted only for instances of `RetriableException`. All other types of `KafkaException` should be delegated to `ExceptionHandler`. There is another user with same problem https://stackoverflow.com/questions/64366380/apache-camel-kafka-bridgeerrorhandler-not-working Hide Permalink joseph m'bimbi-bene added a comment - 16/Oct/20 05:16 That's also my thought， and something i put in my original post Show joseph m'bimbi-bene added a comment - 16/Oct/20 05:16 That's also my thought， and something i put in my original post Hide Permalink Claus Ibsen added a comment - 2 days ago There is a new camel-kafka-vertx in 3.7 that rely on vertx-kafka client which should have more roboustness out of the box Show Claus Ibsen added a comment - 2 days ago There is a new camel-kafka-vertx in 3.7 that rely on vertx-kafka client which should have more roboustness out of the box
CAMEL-14979,Andrea Cosentino,2020-04-28T15:07:16.995Z,1588072036.995， where 1588072036.995 is the epoch,First of all: I attached a demo-project to the issue to reproduce the problem.What am I doing:Polling messages from AWS-SQS FIFO queues in a spring-boot 2 environment with java 11， using camel-aws2-sqs-starter.I started with version 3.0.1 and the aws-sqs component， the configuration was fine， up and running. Since I switched to camel 3.1.0/3.2.0 and aws2-sqs component I receive the following error: Caused by: [software.amazon.awssdk.core.exception.SdkClientException - Unable to marshall request to JSON: host must not be null.]software.amazon.awssdk.core.exception.SdkClientException: Unable to marshall request to JSON: host must not be null. at software.amazon.awssdk.core.exception.SdkClientException$BuilderImpl.build(SdkClientException.java:98) ~[sdk-core-2.11.5.jar:na] at software.amazon.awssdk.services.sqs.transform.ReceiveMessageRequestMarshaller.marshall(ReceiveMessageRequestMarshaller.java:52) ~[sqs-2.11.5.jar:na] at software.amazon.awssdk.services.sqs.transform.ReceiveMessageRequestMarshaller.marshall(ReceiveMessageRequestMarshaller.java:31) ~[sqs-2.11.5.jar:na] at software.amazon.awssdk.core.internal.handler.BaseClientHandler.finalizeSdkHttpFullRequest(BaseClientHandler.java:68) ~[sdk-core-2.11.5.jar:na] at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.doExecute(BaseSyncClientHandler.java:131) ~[sdk-core-2.11.5.jar:na] at software.amazon.awssdk.core.internal.handler.BaseSyncClientHandler.execute(BaseSyncClientHandler.java:101) ~[sdk-core-2.11.5.jar:na] at software.amazon.awssdk.core.client.handler.SdkSyncClientHandler.execute(SdkSyncClientHandler.java:45) ~[sdk-core-2.11.5.jar:na] at software.amazon.awssdk.awscore.client.handler.AwsSyncClientHandler.execute(AwsSyncClientHandler.java:55) ~[aws-core-2.11.5.jar:na] at software.amazon.awssdk.services.sqs.DefaultSqsClient.receiveMessage(DefaultSqsClient.java:1046) ~[sqs-2.11.5.jar:na] at org.apache.camel.component.aws2.sqs.Sqs2Consumer.poll(Sqs2Consumer.java:99) ~[camel-aws2-sqs-3.2.0.jar:3.2.0] at org.apache.camel.support.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:187) ~[camel-support-3.2.0.jar:3.2.0] at org.apache.camel.support.ScheduledPollConsumer.run(ScheduledPollConsumer.java:106) ~[camel-support-3.2.0.jar:3.2.0] at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na] at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) ~[na:na] at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) ~[na:na] at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130) ~[na:na] at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630) ~[na:na] at java.base/java.lang.Thread.run(Thread.java:832) ~[na:na]Caused by: java.lang.NullPointerException: host must not be null. at software.amazon.awssdk.utils.Validate.paramNotNull(Validate.java:117) ~[utils-2.11.5.jar:na] at software.amazon.awssdk.http.DefaultSdkHttpFullRequest.<init>(DefaultSdkHttpFullRequest.java:53) ~[http-client-spi-2.11.5.jar:na] at software.amazon.awssdk.http.DefaultSdkHttpFullRequest.<init>(DefaultSdkHttpFullRequest.java:41) ~[http-client-spi-2.11.5.jar:na] at software.amazon.awssdk.http.DefaultSdkHttpFullRequest$Builder.build(DefaultSdkHttpFullRequest.java:331) ~[http-client-spi-2.11.5.jar:na] at software.amazon.awssdk.http.DefaultSdkHttpFullRequest$Builder.build(DefaultSdkHttpFullRequest.java:170) ~[http-client-spi-2.11.5.jar:na] at software.amazon.awssdk.protocols.query.internal.marshall.QueryProtocolMarshaller.marshall(QueryProtocolMarshaller.java:68) ~[aws-query-protocol-2.11.5.jar:na] at software.amazon.awssdk.protocols.query.internal.marshall.QueryProtocolMarshaller.marshall(QueryProtocolMarshaller.java:31) ~[aws-query-protocol-2.11.5.jar:na] at software.amazon.awssdk.services.sqs.transform.ReceiveMessageRequestMarshaller.marshall(ReceiveMessageRequestMarshaller.java:50) ~[sqs-2.11.5.jar:na] ... 16 common frames omitted I tried to find solutions using https://camel.apache.org/camel-spring-boot/latest/aws2-sqs-starter.html and had a short chat with Andrea Cosentino.For the demo project to run you'll need to fill in "camel.component.aws2-sqs.access-key"， "camel.component.aws2-sqs.secret-key" and a ARN "com.example.arn" of your FIFO-queue. All keys are found in the application.properties file.,Hide Permalink Andrea Cosentino added a comment - 28/Apr/20 15:12 Thanks for this， I'll have a look Show Andrea Cosentino added a comment - 28/Apr/20 15:12 Thanks for this， I'll have a look Hide Permalink Chandrakant Hardahe added a comment - 29/Apr/20 06:38 Hi， I'm working on this Show Chandrakant Hardahe added a comment - 29/Apr/20 06:38 Hi， I'm working on this Hide Permalink Andrea Cosentino added a comment - 29/Apr/20 06:40 This is already assigned. Show Andrea Cosentino added a comment - 29/Apr/20 06:40 This is already assigned. Hide Permalink Andrea Cosentino added a comment - 29/Apr/20 06:42 Please always check if there is an assignee or not. Show Andrea Cosentino added a comment - 29/Apr/20 06:42 Please always check if there is an assignee or not. Hide Permalink Andrea Cosentino added a comment - 29/Apr/20 06:55 The problem is in the way you're specifying the region， in AWS2 they changed the behavior a bit so you need to specify eu-west-1 instead of EU_WEST_1， we have some documentation about this 'The region in which SQS client needs to work. When using this parameter， the configuration will expect the lowercase name of the region (for example ap-east-1) You’ll need to use the name Region.EU_WEST_1.id()' Show Andrea Cosentino added a comment - 29/Apr/20 06:55 The problem is in the way you're specifying the region， in AWS2 they changed the behavior a bit so you need to specify eu-west-1 instead of EU_WEST_1， we have some documentation about this 'The region in which SQS client needs to work. When using this parameter， the configuration will expect the lowercase name of the region (for example ap-east-1) You’ll need to use the name Region.EU_WEST_1.id()' Hide Permalink Andrea Cosentino added a comment - 29/Apr/20 06:56 Thanks for the reproducer Jan S， feel free to ask anything else. Show Andrea Cosentino added a comment - 29/Apr/20 06:56 Thanks for the reproducer Jan S ， feel free to ask anything else. Hide Permalink Jan S added a comment - 29/Apr/20 08:53 Andrea Cosentino thanks for your quick help. Show Jan S added a comment - 29/Apr/20 08:53 Andrea Cosentino thanks for your quick help.
CAMEL-14978,Jean-Baptiste Onofré,2020-04-29T06:42:39+0000,1588128159， where 1588128159 is the epoch,Features need to be created in camel-karaf repo for the following components camel-azure-storage-blob camel-azure-storage-queue,Hide Permalink Jean-Baptiste Onofré added a comment - 29/Apr/20 06:42 See PR: https://github.com/apache/camel-karaf/pull/6 Show Jean-Baptiste Onofré added a comment - 29/Apr/20 06:42 See PR: https://github.com/apache/camel-karaf/pull/6
CAMEL-14977,Jiri Ondrusek,2020-04-28T08:45:47+0000,1588049147， where 1588049147 is the epoch,As a follow up of https://issues.apache.org/jira/browse/CAMEL-14950， impementation of UndertowSecurityProvider for spring security has to be created.,There are no comments yet on this issue.
CAMEL-14976,Unassigned,2020-04-28T08:09:50+0000,1588046990， where 1588046990 is the epoch,It will make sense to add some examples for the azure components in the examples folder in order to give the users some clarity of the usage,There are no comments yet on this issue.
CAMEL-14975,David Jencks,2020-04-28T04:39:14+0000,1588034354， where 1588034354 is the epoch,Luca suggested it would make sense to move the camel-k languages documentation， currently here: https://github.com/apache/camel-k/tree/master/docs/modules/ROOT/pages/languages to the camel-k-runtime repo where these are implemented.,Hide Permalink David Jencks added a comment - 28/Apr/20 04:39 - edited I suggest also modifying camel-k to match what I did in camel-k-runtime: removing the antora-playbook-dev.yml and using HEAD as the branch in antora-playbook.yml. There's no good reason to build a tiny part of the site using the local copy of the git repo rather than the worktree. Removing the "dev" script and have the "preview" script build and run the server. Document the "checks" script together with its limitations. Use the standard Antora layout of building the site into "build/site". Show David Jencks added a comment - 28/Apr/20 04:39 - edited I suggest also modifying camel-k to match what I did in camel-k-runtime: removing the antora-playbook-dev.yml and using HEAD as the branch in antora-playbook.yml. There's no good reason to build a tiny part of the site using the local copy of the git repo rather than the worktree. Removing the "dev" script and have the "preview" script build and run the server. Document the "checks" script together with its limitations. Use the standard Antora layout of building the site into "build/site". Hide Permalink David Jencks added a comment - 28/Apr/20 05:26 PRs applied Fix version is for website. Show David Jencks added a comment - 28/Apr/20 05:26 PRs applied Fix version is for website.
CAMEL-14974,Unassigned,2020-04-27T15:36:25+0000,1587987385， where 1587987385 is the epoch,Lets see if we can support both Java 11 and 14 for the 2nd LTS release (eg likely Camel 3.7 at end of 2020).The first LTS is scheduled to support Java 8 and 11. So Java 8 users have a stable platform on 3.x to migrate to， and then later to Java 11， and so on.,There are no comments yet on this issue.
CAMEL-14973,Andrea Cosentino,2020-04-27T14:10:34+0000,1587982234， where 1587982234 is the epoch,it would be cool to have a BOM for springboot-starters similar to what camel-parent provided,Hide Permalink Claus Ibsen added a comment - 27/Apr/20 14:10 We had this before the move out， there is some camel-spring-boot-dependency BOM artifact somewhere. Is this gone now? Show Claus Ibsen added a comment - 27/Apr/20 14:10 We had this before the move out， there is some camel-spring-boot-dependency BOM artifact somewhere. Is this gone now? Hide Permalink Andrea Cosentino added a comment - 13/May/20 18:18 This is already available here as camel-spring-boot-dependencies https://repo1.maven.org/maven2/org/apache/camel/springboot/camel-spring-boot-dependencies/3.2.0/camel-spring-boot-dependencies-3.2.0.pom Show Andrea Cosentino added a comment - 13/May/20 18:18 This is already available here as camel-spring-boot-dependencies https://repo1.maven.org/maven2/org/apache/camel/springboot/camel-spring-boot-dependencies/3.2.0/camel-spring-boot-dependencies-3.2.0.pom
CAMEL-14972,Unassigned,2020-04-27T10:17:08+0000,1587968228， where 1587968228 is the epoch,If the enricher receives a stream cache as original body then the stream is consumed by the enrich endpoint. Therefore the stream cache must be reset before it is forwarded to the aggregator.,There are no comments yet on this issue.
CAMEL-14971,Unassigned,2020-04-27T07:12:00+0000,1587957120， where 1587957120 is the epoch,See below a route that calls an endpoint with NTLM auth.<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.osgi.org/xmlns/blueprint/v1.0.0 https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd" xmlns:ext="http://aries.apache.org/blueprint/xmlns/blueprint-ext/v1.0.0"> <camelContext xmlns="http://camel.apache.org/schema/blueprint"> <route> <from uri="timer:default?period=0&amp;repeatCount=1" /> <setHeader name="CamelHttpMethod"> <constant>GET</constant> </setHeader> <to uri="http://host?authMethod=NTLM&amp;authDomain=xxx&amp;authHost=xxx&amp;authUsername=xxx&amp;authPassword=xxx&amp;throwExceptionOnFailure=false" /> </route> </camelContext></blueprint> When starting the route than I'm getting an error (Camel WARN)2020-04-23T22:36:31，980 | WARN | qtp711860658-153 | HttpAuthenticator | 164 - org.apache.httpcomponents.httpclient - 4.5.10 | NEGOTIATE authentication error: Invalid name provided (Mechanism level: KrbException: Cannot locate default realm),Hide Permalink Claus Ibsen added a comment - 27/Apr/20 07:12 Try to trace what HTTP headers are sent over to the HTTP server in the 2 situations and compare/show us. As you are bridging then in one situation the HTTP url is different that with the timer. And search on the internet what the kerboes error may mean. Show Claus Ibsen added a comment - 27/Apr/20 07:12 Try to trace what HTTP headers are sent over to the HTTP server in the 2 situations and compare/show us. As you are bridging then in one situation the HTTP url is different that with the timer. And search on the internet what the kerboes error may mean. Hide Permalink Gerald Kallas added a comment - 27/Apr/20 09:16 I was executing a couple more tests. First of all I was seen the same error (Camel WARN) as well when using the Timer Consumer. So far the ticket is misleading and I changed the title and description accordingly. The error refers to the point that either the krb5.conf file isn't found or contains the wrong configuration. See for that https://docs.oracle.com/javase/8/docs/technotes/guides/security/jgss/tutorials/KerberosReq.html If you're going to provide both， realm and kdc in the system.properties file like java.security.krb5.realm=EXAMPLE.COM java.security.krb5.kdc=example.com than an other error (Camel WARN) occurs 2020-04-27T09:07:31，480 | WARN | Camel thread #9 - timer://default | HttpAuthenticator | 164 - org.apache.httpcomponents.httpclient - 4.5.10 | NEGOTIATE authentication error: No valid credentials provided (Mechanism level: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)) The content will be properly shown while testing against an IIS instance. I'll proceed with the tests against other targets. Show Gerald Kallas added a comment - 27/Apr/20 09:16 I was executing a couple more tests. First of all I was seen the same error (Camel WARN) as well when using the Timer Consumer. So far the ticket is misleading and I changed the title and description accordingly. The error refers to the point that either the krb5.conf file isn't found or contains the wrong configuration. See for that https://docs.oracle.com/javase/8/docs/technotes/guides/security/jgss/tutorials/KerberosReq.html If you're going to provide both， realm and kdc in the system.properties file like java.security.krb5.realm=EXAMPLE.COM java.security.krb5.kdc=example.com than an other error (Camel WARN) occurs 2020-04-27T09:07:31，480 | WARN | Camel thread #9 - timer: // default | HttpAuthenticator | 164 - org.apache.httpcomponents.httpclient - 4.5.10 | NEGOTIATE authentication error: No valid credentials provided (Mechanism level: No valid credentials provided (Mechanism level: Failed to find any Kerberos tgt)) The content will be properly shown while testing against an IIS instance. I'll proceed with the tests against other targets. Hide Permalink Claus Ibsen added a comment - 19/Jun/20 13:12 Try outside OSGi in just a basing public static void main class， or from unit test etc. It smell of OSGi classloading and whatnot. Show Claus Ibsen added a comment - 19/Jun/20 13:12 Try outside OSGi in just a basing public static void main class， or from unit test etc. It smell of OSGi classloading and whatnot.
CAMEL-14970,Unassigned,2020-04-26T10:58:56+0000,1587884336， where 1587884336 is the epoch,camel-script is removed in 3.x with CAMEL-13113 because of Nashorn Engine deprecation in JDK11. We should implement camel-javascript based on some supported engine (possibly graaljs?).Some users are missing Javascript language in 3.x:https://camel.465427.n5.nabble.com/Re-Camel-script-eip-JavaScript-deprecated-tt5857880.htmlhttps://stackoverflow.com/questions/61435521/camel-3-2-and-javascript,There are no comments yet on this issue.
CAMEL-14969,Claus Ibsen,2020-04-27T15:06:38.342Z,1587985598.342， where 1587985598.342 is the epoch,When loading rest definitions via "xml-rests" path defined in propertycamel.springboot.xml-rests = classpath:folder-camel/folder-rest/*.xmlThe camel 3.2 fails with error Failed to start route first-test-get-id because of duplicate id detected: first-test-to-id. Please correct ids to be unique among all your routes.My rest XML file is defined as<?xml version="1.0" encoding="UTF-8"?><?xml version="1.0" encoding="UTF-8"?> <rests xmlns="http://camel.apache.org/schema/spring" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" {{ xsi:schemaLocation="}} {{ http://camel.apache.org/schema/spring https://camel.apache.org/schema/spring/camel-spring-3.2.0.xsd}} {{ ">}} {{ <rest id="id1" path="/test">}} {{ <get id="id2" uri="/folderuri">}} {\{ <to id="id3" uri="log:test-log-rest" />}} {{ </get>}} {{ </rest>}} </rests>However， when I envelope TO tag in the ROUTE tag， the issue gets resolved<rest id="id1" path="/test"> <get id="id2" uri="/folderuri"> <route id="id4"> <to id="id3" uri="log:test-log-rest" /> </route> </get> </rest>,Hide Permalink Nenad Nesovanovic added a comment - 26/Apr/20 09:09 After investigating the issue found out that it is due to the "RouteDefinitionHelper.validateUniqueIds" method comparing RouteDefinition objects by using == sign and RouteDefinition does not implement "equals" method to compare route URI but leaves it to the basic object reference comparison. This causes that when REST endpoint URI is added to the list of routes of clashes with the endpoint route provided in route XML. Show Nenad Nesovanovic added a comment - 26/Apr/20 09:09 After investigating the issue found out that it is due to the "RouteDefinitionHelper.validateUniqueIds" method comparing RouteDefinition objects by using == sign and RouteDefinition does not implement "equals" method to compare route URI but leaves it to the basic object reference comparison. This causes that when REST endpoint URI is added to the list of routes of clashes with the endpoint route provided in route XML. Hide Permalink Nenad Nesovanovic added a comment - 26/Apr/20 09:15 Route Definitions are compared by reference instead of URI And this causes duplicates in the routes list Which results in multiple routes with the same URI Which than fails validation on having duplicate ROUTES and multiple subscribers routers on the same endpoint And throws exception Show Nenad Nesovanovic added a comment - 26/Apr/20 09:15 Route Definitions are compared by reference instead of URI And this causes duplicates in the routes list Which results in multiple routes with the same URI Which than fails validation on having duplicate ROUTES and multiple subscribers routers on the same endpoint And throws exception Hide Permalink Nenad Nesovanovic added a comment - 26/Apr/20 09:20 Stack traces of the debug points are below 1. RouteDefinition object does not implement "equals" method RouteDefinition(Object).equals(Object) line: 156 RouteDefinition(Object).equals(Object) line: 156 ArrayList<E>.remove(Object) line: 622 DefaultModel.removeRouteDefinition(RouteDefinition) line: 108 DefaultModel.removeRouteDefinitions(Collection<RouteDefinition>) line: 94 DefaultModel.addRouteDefinitions(Collection<RouteDefinition>) line: 79 SpringCamelContext(DefaultCamelContext).addRouteDefinitions(Collection<RouteDefinition>) line: 126 CamelContextFactoryBean(AbstractCamelContextFactoryBean<T>).setupRoutes() line: 476 CamelContextFactoryBean.start() line: 367 CamelContextFactoryBean.onApplicationEvent(ContextRefreshedEvent) line: 420 CamelContextFactoryBean.onApplicationEvent(ApplicationEvent) line: 94 SimpleApplicationEventMulticaster.doInvokeListener(ApplicationListener， ApplicationEvent) line: 172 SimpleApplicationEventMulticaster.invokeListener(ApplicationListener<?>， ApplicationEvent) line: 165 SimpleApplicationEventMulticaster.multicastEvent(ApplicationEvent， ResolvableType) line: 139 AnnotationConfigApplicationContext(AbstractApplicationContext).publishEvent(Object， ResolvableType) line: 403 AnnotationConfigApplicationContext(AbstractApplicationContext).publishEvent(ApplicationEvent) line: 360 AnnotationConfigApplicationContext(AbstractApplicationContext).finishRefresh() line: 897 AnnotationConfigApplicationContext(AbstractApplicationContext).refresh() line: 553 SpringApplication.refresh(ApplicationContext) line: 747 SpringApplication.refreshContext(ConfigurableApplicationContext) line: 397 SpringApplication.run(String...) line: 315 SpringApplication.run(Class<?>[]， String[]) line: 1226 SpringApplication.run(Class<?>， String...) line: 1215 NexusApp.main(String[]) line: 13 2. And because of that when rest endpoint route is created， it is the duplicate of the actual route DefaultModel.addRouteDefinitions(Collection<RouteDefinition>) line: 81 DefaultModel.addRouteDefinitions(Collection<RouteDefinition>) line: 81 SpringCamelContext(DefaultCamelContext).addRouteDefinitions(Collection<RouteDefinition>) line: 126 CamelContextFactoryBean(AbstractCamelContextFactoryBean<T>).setupRoutes() line: 476 CamelContextFactoryBean.start() line: 367 CamelContextFactoryBean.onApplicationEvent(ContextRefreshedEvent) line: 420 CamelContextFactoryBean.onApplicationEvent(ApplicationEvent) line: 94 SimpleApplicationEventMulticaster.doInvokeListener(ApplicationListener， ApplicationEvent) line: 172 SimpleApplicationEventMulticaster.invokeListener(ApplicationListener<?>， ApplicationEvent) line: 165 SimpleApplicationEventMulticaster.multicastEvent(ApplicationEvent， ResolvableType) line: 139 AnnotationConfigApplicationContext(AbstractApplicationContext).publishEvent(Object， ResolvableType) line: 403 AnnotationConfigApplicationContext(AbstractApplicationContext).publishEvent(ApplicationEvent) line: 360 AnnotationConfigApplicationContext(AbstractApplicationContext).finishRefresh() line: 897 AnnotationConfigApplicationContext(AbstractApplicationContext).refresh() line: 553 SpringApplication.refresh(ApplicationContext) line: 747 SpringApplication.refreshContext(ConfigurableApplicationContext) line: 397 SpringApplication.run(String...) line: 315 SpringApplication.run(Class<?>[]， String[]) line: 1226 SpringApplication.run(Class<?>， String...) line: 1215 NexusApp.main(String[]) line: 13 3. Which then fails duplicate Id validation RouteDefinitionHelper.validateUniqueIds(RouteDefinition， List<RouteDefinition>) line: 267 RouteDefinitionHelper.validateUniqueIds(RouteDefinition， List<RouteDefinition>) line: 267 SpringCamelContext(DefaultCamelContext).startRouteDefinitions(List<RouteDefinition>) line: 342 SpringCamelContext(DefaultCamelContext).startRouteDefinitions() line: 327 SpringCamelContext(AbstractCamelContext).doInit() line: 2598 SpringCamelContext(BaseService).init() line: 83 SpringCamelContext(AbstractCamelContext).init() line: 2431 SpringCamelContext(BaseService).start() line: 111 SpringCamelContext(AbstractCamelContext).start() line: 2448 SpringCamelContext.start() line: 121 CamelContextFactoryBean.start() line: 373 CamelContextFactoryBean.onApplicationEvent(ContextRefreshedEvent) line: 420 CamelContextFactoryBean.onApplicationEvent(ApplicationEvent) line: 94 SimpleApplicationEventMulticaster.doInvokeListener(ApplicationListener， ApplicationEvent) line: 172 SimpleApplicationEventMulticaster.invokeListener(ApplicationListener<?>， ApplicationEvent) line: 165 SimpleApplicationEventMulticaster.multicastEvent(ApplicationEvent， ResolvableType) line: 139 AnnotationConfigApplicationContext(AbstractApplicationContext).publishEvent(Object， ResolvableType) line: 403 AnnotationConfigApplicationContext(AbstractApplicationContext).publishEvent(ApplicationEvent) line: 360 AnnotationConfigApplicationContext(AbstractApplicationContext).finishRefresh() line: 897 AnnotationConfigApplicationContext(AbstractApplicationContext).refresh() line: 553 SpringApplication.refresh(ApplicationContext) line: 747 SpringApplication.refreshContext(ConfigurableApplicationContext) line: 397 SpringApplication.run(String...) line: 315 SpringApplication.run(Class<?>[]， String[]) line: 1226 SpringApplication.run(Class<?>， String...) line: 1215 NexusApp.main(String[]) line: 13 Show Nenad Nesovanovic added a comment - 26/Apr/20 09:20 Stack traces of the debug points are below 1. RouteDefinition object does not implement "equals" method RouteDefinition(Object).equals(Object) line: 156 RouteDefinition(Object).equals(Object) line: 156 ArrayList<E>.remove(Object) line: 622 DefaultModel.removeRouteDefinition(RouteDefinition) line: 108 DefaultModel.removeRouteDefinitions(Collection<RouteDefinition>) line: 94 DefaultModel.addRouteDefinitions(Collection<RouteDefinition>) line: 79 SpringCamelContext(DefaultCamelContext).addRouteDefinitions(Collection<RouteDefinition>) line: 126 CamelContextFactoryBean(AbstractCamelContextFactoryBean<T>).setupRoutes() line: 476 CamelContextFactoryBean.start() line: 367 CamelContextFactoryBean.onApplicationEvent(ContextRefreshedEvent) line: 420 CamelContextFactoryBean.onApplicationEvent(ApplicationEvent) line: 94 SimpleApplicationEventMulticaster.doInvokeListener(ApplicationListener， ApplicationEvent) line: 172 SimpleApplicationEventMulticaster.invokeListener(ApplicationListener<?>， ApplicationEvent) line: 165 SimpleApplicationEventMulticaster.multicastEvent(ApplicationEvent， ResolvableType) line: 139 AnnotationConfigApplicationContext(AbstractApplicationContext).publishEvent(Object， ResolvableType) line: 403 AnnotationConfigApplicationContext(AbstractApplicationContext).publishEvent(ApplicationEvent) line: 360 AnnotationConfigApplicationContext(AbstractApplicationContext).finishRefresh() line: 897 AnnotationConfigApplicationContext(AbstractApplicationContext).refresh() line: 553 SpringApplication.refresh(ApplicationContext) line: 747 SpringApplication.refreshContext(ConfigurableApplicationContext) line: 397 SpringApplication.run(String...) line: 315 SpringApplication.run(Class<?>[]， String[]) line: 1226 SpringApplication.run(Class<?>， String...) line: 1215 NexusApp.main(String[]) line: 13 2. And because of that when rest endpoint route is created， it is the duplicate of the actual route DefaultModel.addRouteDefinitions(Collection<RouteDefinition>) line: 81 DefaultModel.addRouteDefinitions(Collection<RouteDefinition>) line: 81 SpringCamelContext(DefaultCamelContext).addRouteDefinitions(Collection<RouteDefinition>) line: 126 CamelContextFactoryBean(AbstractCamelContextFactoryBean<T>).setupRoutes() line: 476 CamelContextFactoryBean.start() line: 367 CamelContextFactoryBean.onApplicationEvent(ContextRefreshedEvent) line: 420 CamelContextFactoryBean.onApplicationEvent(ApplicationEvent) line: 94 SimpleApplicationEventMulticaster.doInvokeListener(ApplicationListener， ApplicationEvent) line: 172 SimpleApplicationEventMulticaster.invokeListener(ApplicationListener<?>， ApplicationEvent) line: 165 SimpleApplicationEventMulticaster.multicastEvent(ApplicationEvent， ResolvableType) line: 139 AnnotationConfigApplicationContext(AbstractApplicationContext).publishEvent(Object， ResolvableType) line: 403 AnnotationConfigApplicationContext(AbstractApplicationContext).publishEvent(ApplicationEvent) line: 360 AnnotationConfigApplicationContext(AbstractApplicationContext).finishRefresh() line: 897 AnnotationConfigApplicationContext(AbstractApplicationContext).refresh() line: 553 SpringApplication.refresh(ApplicationContext) line: 747 SpringApplication.refreshContext(ConfigurableApplicationContext) line: 397 SpringApplication.run(String...) line: 315 SpringApplication.run(Class<?>[]， String[]) line: 1226 SpringApplication.run(Class<?>， String...) line: 1215 NexusApp.main(String[]) line: 13 3. Which then fails duplicate Id validation RouteDefinitionHelper.validateUniqueIds(RouteDefinition， List<RouteDefinition>) line: 267 RouteDefinitionHelper.validateUniqueIds(RouteDefinition， List<RouteDefinition>) line: 267 SpringCamelContext(DefaultCamelContext).startRouteDefinitions(List<RouteDefinition>) line: 342 SpringCamelContext(DefaultCamelContext).startRouteDefinitions() line: 327 SpringCamelContext(AbstractCamelContext).doInit() line: 2598 SpringCamelContext(BaseService).init() line: 83 SpringCamelContext(AbstractCamelContext).init() line: 2431 SpringCamelContext(BaseService).start() line: 111 SpringCamelContext(AbstractCamelContext).start() line: 2448 SpringCamelContext.start() line: 121 CamelContextFactoryBean.start() line: 373 CamelContextFactoryBean.onApplicationEvent(ContextRefreshedEvent) line: 420 CamelContextFactoryBean.onApplicationEvent(ApplicationEvent) line: 94 SimpleApplicationEventMulticaster.doInvokeListener(ApplicationListener， ApplicationEvent) line: 172 SimpleApplicationEventMulticaster.invokeListener(ApplicationListener<?>， ApplicationEvent) line: 165 SimpleApplicationEventMulticaster.multicastEvent(ApplicationEvent， ResolvableType) line: 139 AnnotationConfigApplicationContext(AbstractApplicationContext).publishEvent(Object， ResolvableType) line: 403 AnnotationConfigApplicationContext(AbstractApplicationContext).publishEvent(ApplicationEvent) line: 360 AnnotationConfigApplicationContext(AbstractApplicationContext).finishRefresh() line: 897 AnnotationConfigApplicationContext(AbstractApplicationContext).refresh() line: 553 SpringApplication.refresh(ApplicationContext) line: 747 SpringApplication.refreshContext(ConfigurableApplicationContext) line: 397 SpringApplication.run(String...) line: 315 SpringApplication.run(Class<?>[]， String[]) line: 1226 SpringApplication.run(Class<?>， String...) line: 1215 NexusApp.main(String[]) line: 13 Hide Permalink Nenad Nesovanovic added a comment - 26/Apr/20 09:26 Might be conceptually similar to CAMEL-13651， but it is a different bug. https://issues.apache.org/jira/browse/CAMEL-13651 Show Nenad Nesovanovic added a comment - 26/Apr/20 09:26 Might be conceptually similar to CAMEL-13651 ， but it is a different bug. https://issues.apache.org/jira/browse/CAMEL-13651 Hide Permalink Nenad Nesovanovic added a comment - 26/Apr/20 09:29 When I remove "id" attribute I get different exceptions <rest path="/test"> <get uri="/folderuri"> <to uri="log:test-nexus-rest" /> </get> </rest> org.apache.camel.FailedToStartRouteException: Failed to start route route2 because of Multiple consumers for the same endpoint is not allowed: http://0.0.0.0:8080/test/folderpath?httpMethodRestrict=GET%2COPTIONS Show Nenad Nesovanovic added a comment - 26/Apr/20 09:29 When I remove "id" attribute I get different exceptions <rest path="/test"> <get uri="/folderuri"> <to uri="log:test-nexus-rest" /> </get> </rest> org.apache.camel.FailedToStartRouteException: Failed to start route route2 because of Multiple consumers for the same endpoint is not allowed: http://0.0.0.0:8080/test/folderpath?httpMethodRestrict=GET%2COPTIONS Hide Permalink Nenad Nesovanovic added a comment - 26/Apr/20 09:30 Trace level log included below trace_log1.zip trace_log2.zip Show Nenad Nesovanovic added a comment - 26/Apr/20 09:30 Trace level log included below trace_log1.zip trace_log2.zip Hide Permalink Nenad Nesovanovic added a comment - 27/Apr/20 02:54 My assessment is that for the REST endpoint Camel Spring is automatically creating producer and consumer route with the same name and as REST XML discovered resources are discovered first， then Camel Context end up creating them again from the routes definition created during the XML rest import. If Camel Context XML is importing the same routes through the restContextRef tag， then this issue does not occur， as rest definitions and endpoints are created after the Camel Context is initialised. Happy to provide more details if needed， but you should first go through the attached logs and images and please pay attention to the variable watch list on the images and debug stack trace that points out to the code lines and variable values to prove that route definitions list ends up having two route definitions for the single XML entry. Show Nenad Nesovanovic added a comment - 27/Apr/20 02:54 My assessment is that for the REST endpoint Camel Spring is automatically creating producer and consumer route with the same name and as REST XML discovered resources are discovered first， then Camel Context end up creating them again from the routes definition created during the XML rest import. If Camel Context XML is importing the same routes through the restContextRef tag， then this issue does not occur， as rest definitions and endpoints are created after the Camel Context is initialised. Happy to provide more details if needed， but you should first go through the attached logs and images and please pay attention to the variable watch list on the images and debug stack trace that points out to the code lines and variable values to prove that route definitions list ends up having two route definitions for the single XML entry. Hide Permalink Claus Ibsen added a comment - 27/Apr/20 07:14 Are you able to attach a zip file with a sample project that reproduces this， its easier for us to use to work on this. Show Claus Ibsen added a comment - 27/Apr/20 07:14 Are you able to attach a zip file with a sample project that reproduces this， its easier for us to use to work on this. Hide Permalink Nenad Nesovanovic added a comment - 27/Apr/20 15:09 Hi Claus Ibsen， attached is the test project in Eclipse that will reproduce the issue. CAMEL-14969-Eclipse-Project.zip In the file named "src/main/resources/nenad-rest/nenad-rest.xml" you will find 4 rest definitions. Two that will fail and two that will work. You can uncomment them to test this. Show Nenad Nesovanovic added a comment - 27/Apr/20 15:09 Hi Claus Ibsen ， attached is the test project in Eclipse that will reproduce the issue. CAMEL-14969-Eclipse-Project.zip In the file named "src/main/resources/nenad-rest/nenad-rest.xml" you will find 4 rest definitions. Two that will fail and two that will work. You can uncomment them to test this. Hide Permalink Nenad Nesovanovic added a comment - 27/Apr/20 15:12 Project test parameters are main-class: com.nenad.test.CAMEL14969 jvm-arguments: -Xms256m -Xmx512m --add-opens java.base/sun.nio.ch=ALL-UNNAMED maven command: mvn clean install spring-boot:run test-url: http://0.0.0.0:8080/test/nenad Show Nenad Nesovanovic added a comment - 27/Apr/20 15:12 Project test parameters are main-class: com.nenad.test.CAMEL14969 jvm-arguments: -Xms256m -Xmx512m --add-opens java.base/sun.nio.ch=ALL-UNNAMED maven command: mvn clean install spring-boot:run test-url: http://0.0.0.0:8080/test/nenad Hide Permalink Nenad Nesovanovic added a comment - 27/Apr/20 15:17 Here are the two failing and two working rest definitions from the project CAMEL-14969-Eclipse-Project.zip <?xml version="1.0" encoding="UTF-8"?><?xml version="1.0" encoding="UTF-8"?> <rests xmlns="http://camel.apache.org/schema/spring" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation=" http://camel.apache.org/schema/spring https://camel.apache.org/schema/spring/camel-spring-3.2.0.xsd "> <!-- fail1 --> <!-- rest path="/test"> <get uri="/nenad"> <to uri="direct:test_nenad" /> </get> </rest--> <!-- fail2 --> <rest id="d1" path="/test"> <get id="d2" uri="/nenad"> <to id="d3" uri="direct:test_nenad" /> </get> </rest> <!-- works1 --> <!--rest path="/test"> <get uri="/nenad"> <route id="test_nenad_rest_get_route_id"> <to uri="direct:test_nenad" /> </route> </get> </rest--> <!-- works2 --> <!--rest id="d1" path="/test"> <get id="d2" uri="/nenad"> <route id="test_nenad_rest_get_route_id"> <to id="d3" uri="direct:test_nenad" /> </route> </get> </rest--> </rests> Show Nenad Nesovanovic added a comment - 27/Apr/20 15:17 Here are the two failing and two working rest definitions from the project CAMEL-14969-Eclipse-Project.zip <?xml version="1.0" encoding="UTF-8"?><?xml version="1.0" encoding="UTF-8"?> <rests xmlns="http://camel.apache.org/schema/spring" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation=" http://camel.apache.org/schema/spring https://camel.apache.org/schema/spring/camel-spring-3.2.0.xsd "> <!-- fail1 --> <!-- rest path="/test"> <get uri="/nenad"> <to uri="direct:test_nenad" /> </get> </rest--> <!-- fail2 --> <rest id="d1" path="/test"> <get id="d2" uri="/nenad"> <to id="d3" uri="direct:test_nenad" /> </get> </rest> <!-- works1 --> <!--rest path="/test"> <get uri="/nenad"> <route id="test_nenad_rest_get_route_id"> <to uri="direct:test_nenad" /> </route> </get> </rest--> <!-- works2 --> <!--rest id="d1" path="/test"> <get id="d2" uri="/nenad"> <route id="test_nenad_rest_get_route_id"> <to id="d3" uri="direct:test_nenad" /> </route> </get> </rest--> </rests> Hide Permalink Nenad Nesovanovic added a comment - 28/Apr/20 00:16 Added workaround links on the stackoverflow， so workaround can be accessed in the meantime Failed to start route A because of duplicate id detected: B https://stackoverflow.com/questions/61438807/failed-to-start-route-a-because-of-duplicate-id-detected-b Failed to start route A because of Multiple consumers for the same endpoint is not allowed: E https://stackoverflow.com/questions/61439993/failed-to-start-route-a-because-of-multiple-consumers-for-the-same-endpoint-is Show Nenad Nesovanovic added a comment - 28/Apr/20 00:16 Added workaround links on the stackoverflow， so workaround can be accessed in the meantime Failed to start route A because of duplicate id detected: B https://stackoverflow.com/questions/61438807/failed-to-start-route-a-because-of-duplicate-id-detected-b Failed to start route A because of Multiple consumers for the same endpoint is not allowed: E https://stackoverflow.com/questions/61439993/failed-to-start-route-a-because-of-multiple-consumers-for-the-same-endpoint-is Hide Permalink Nenad Nesovanovic added a comment - 28/Apr/20 21:11 Hi Claus Ibsen， my take is that this is the primary reason that for years Camel had issues with running multiple Camel Contexts in the same JVM. Because Route Definition objects are compared by reference instead of URI， and each Context with have its own autonumbering， you would be much more likely to detect duplicates this way， which would cause phantom errors. Hence route definition comparison has to include Camel Context ID and URI ID in addition to the Route Definition ID， instead of using only Java Object ID as it is done currently. Changing this would require significant framework changes， so I opted to report this as an issue， instead of fixing it myself. Show Nenad Nesovanovic added a comment - 28/Apr/20 21:11 Hi Claus Ibsen ， my take is that this is the primary reason that for years Camel had issues with running multiple Camel Contexts in the same JVM. Because Route Definition objects are compared by reference instead of URI， and each Context with have its own autonumbering， you would be much more likely to detect duplicates this way， which would cause phantom errors. Hence route definition comparison has to include Camel Context ID and URI ID in addition to the Route Definition ID， instead of using only Java Object ID as it is done currently. Changing this would require significant framework changes， so I opted to report this as an issue， instead of fixing it myself. Hide Permalink Claus Ibsen added a comment - 29/Apr/20 15:07 multiple camel contexts dont share route definitions. This is related to having rest xml and routes xml files loaded indepdently and rests are converted into routes Show Claus Ibsen added a comment - 29/Apr/20 15:07 multiple camel contexts dont share route definitions. This is related to having rest xml and routes xml files loaded indepdently and rests are converted into routes Hide Permalink Nenad Nesovanovic added a comment - 29/Apr/20 21:59 Thanks for looking at this Claus Ibsen， appreciate your knowledgable insight. Warm Regards Show Nenad Nesovanovic added a comment - 29/Apr/20 21:59 Thanks for looking at this Claus Ibsen ， appreciate your knowledgable insight. Warm Regards Hide Permalink Claus Ibsen added a comment - 30/Apr/20 06:20 Okay so its because you are mixing spring xml with spring-boot， with the @ImportResource( { "classpath:camel-context.xml"} ) If you dont do this then it works Show Claus Ibsen added a comment - 30/Apr/20 06:20 Okay so its because you are mixing spring xml with spring-boot， with the @ImportResource( { "classpath:camel-context.xml"} ) If you dont do this then it works Hide Permalink Claus Ibsen added a comment - 30/Apr/20 07:04 Okay have a fix in the works， so when you mix spring boot and xml dsl via those <beans> xml files. Show Claus Ibsen added a comment - 30/Apr/20 07:04 Okay have a fix in the works， so when you mix spring boot and xml dsl via those <beans> xml files. Hide Permalink Claus Ibsen added a comment - 30/Apr/20 07:27 Thanks for the detailed reported and the attached test-case Show Claus Ibsen added a comment - 30/Apr/20 07:27 Thanks for the detailed reported and the attached test-case
CAMEL-14968,Claus Ibsen,2020-04-28T13:15:59+0000,1588065359， where 1588065359 is the epoch,Shutdown is forced when RouteController.stopRoute is called and the current batch of pulled messages from KafkaConsumer takes longer than 10 seconds to finish processing， logging lots of InterruptedExceptions from different points inside KafkaConsumer.KafkaConsumer.doStop method does not provide the shutdownAwaitTermination parameter to BaseExecutorServiceManager.shutdownGraceful. The default value is then set to 10 seconds.It would be nice to set in KafkaConsumer the shutdownAwaitTermination value so we dont have those exceptions in a controlled shutdown.,Hide Permalink Claus Ibsen added a comment - 28/Apr/20 13:15 Yeah sure， if you have some time and want， then you are welcome to try to implement this and provide a PR Show Claus Ibsen added a comment - 28/Apr/20 13:15 Yeah sure， if you have some time and want， then you are welcome to try to implement this and provide a PR Hide Permalink Claus Ibsen added a comment - 06/May/20 11:59 Adding an option and using 30 sec as default timeout Show Claus Ibsen added a comment - 06/May/20 11:59 Adding an option and using 30 sec as default timeout Hide Permalink Claus Ibsen added a comment - 06/May/20 12:04 And the timeout is also used for the producer for its worker pool (if in use) Show Claus Ibsen added a comment - 06/May/20 12:04 And the timeout is also used for the producer for its worker pool (if in use)
CAMEL-14967,David Jencks,2020-04-25T14:39:05+0000,1587811145， where 1587811145 is the epoch,Antora 2.3.0 released， simpler xref-check dependencies possible， don't need camel-quarks version in playbook any more.,Hide Permalink David Jencks added a comment - 25/Apr/20 14:39 PR merged Show David Jencks added a comment - 25/Apr/20 14:39 PR merged
CAMEL-14966,Unassigned,2020-05-18T13:42:04+0000,1589794924， where 1589794924 is the epoch,This doc pagehttps://github.com/apache/camel/blob/master/tooling/maven/camel-restdsl-openapi-plugin/src/main/docs/camel-restdsl-openapi-plugin.adocIs a copy from swagger. But its not using swagger its openapi v3 and we should cleanup this doc to not have old swagger bits.,Hide Permalink Claus Ibsen added a comment - 18/May/20 13:42 We use the swagger maven plugin so the docs was partly correct Show Claus Ibsen added a comment - 18/May/20 13:42 We use the swagger maven plugin so the docs was partly correct
CAMEL-14965,Claus Ibsen,2020-04-24T12:46:09+0000,1587717969， where 1587717969 is the epoch,Hi，I am trying to generate rest DSL router and model files using yaml file with the camel-restdsl-openapi-plugin， But I am getting below error，Caused by: com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'openapi': was expecting (JSON String， Number， Array， Object or token 'null'， 'true' or 'false') at [Source: (FileInputStream); line: 1， column: 9] at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:1840) at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:722) at com.fasterxml.jackson.core.json.UTF8StreamJsonParser._reportInvalidToken(UTF8StreamJsonParser.java:3556) at com.fasterxml.jackson.core.json.UTF8StreamJsonParser._handleUnexpectedValue(UTF8StreamJsonParser.java:2651) at com.fasterxml.jackson.core.json.UTF8StreamJsonParser._nextTokenNotInObject(UTF8StreamJsonParser.java:856) at com.fasterxml.jackson.core.json.UTF8StreamJsonParser.nextToken(UTF8StreamJsonParser.java:753) at com.fasterxml.jackson.databind.ObjectMapper._readTreeAndClose(ObjectMapper.java:4231) at com.fasterxml.jackson.databind.ObjectMapper.readTree(ObjectMapper.java:2692) at org.apache.camel.maven.generator.openapi.AbstractGenerateMojo.readOpenApiDoc(AbstractGenerateMojo.java:277) at org.apache.camel.maven.generator.openapi.GenerateMojo.execute(GenerateMojo.java:60) ... 23 moreBelow is my plugin in pom<plugin> <groupId>org.apache.camel</groupId> <artifactId>camel-restdsl-openapi-plugin</artifactId> <version>${camel.version}</version> <configuration> <specificationUri>${project.basedir}/src/spec/openapi.yaml</specificationUri> </configuration> </plugin> It seems like it is expecting json format even though I have specified yaml file.When I send openapi.json instead of yaml file it is successfully generating the files.so do we need to mention anything in the plugin so that it recognizes the yaml file. Thanks，Pradeep,Hide Permalink Claus Ibsen added a comment - 24/Apr/20 12:46 What version of Camel do you use? Show Claus Ibsen added a comment - 24/Apr/20 12:46 What version of Camel do you use? Hide Permalink Pradeep Kalvakolu added a comment - 24/Apr/20 12:47 3.1.0 Show Pradeep Kalvakolu added a comment - 24/Apr/20 12:47 3.1.0 Hide Permalink Claus Ibsen added a comment - 24/Apr/20 12:59 Thanks can you try with Camel 3.2.0 release Show Claus Ibsen added a comment - 24/Apr/20 12:59 Thanks can you try with Camel 3.2.0 release Hide Permalink Pradeep Kalvakolu added a comment - 24/Apr/20 13:03 I am having same issue with Camel 3.2.0 as well. Show Pradeep Kalvakolu added a comment - 24/Apr/20 13:03 I am having same issue with Camel 3.2.0 as well. Hide Permalink Claus Ibsen added a comment - 24/Apr/20 13:33 That tool is a copy of the old swagger plugin that supports both json and yaml so I am actually not aware of whether we have yaml support in this too. But as yaml can be transformed to json then it should be doable. Show Claus Ibsen added a comment - 24/Apr/20 13:33 That tool is a copy of the old swagger plugin that supports both json and yaml so I am actually not aware of whether we have yaml support in this too. But as yaml can be transformed to json then it should be doable. Hide Permalink Pradeep Kalvakolu added a comment - 27/Apr/20 13:07 So is it possible to confirm if the yaml support exists with this plugin. If it doesn't exists， is it possible to include it， may be， in the next version. Show Pradeep Kalvakolu added a comment - 27/Apr/20 13:07 So is it possible to confirm if the yaml support exists with this plugin. If it doesn't exists， is it possible to include it， may be， in the next version. Hide Permalink Claus Ibsen added a comment - 28/Apr/20 13:20 Yeah I think it would be doable by adding the yaml parser that we have in swagger and use it in this module too. Show Claus Ibsen added a comment - 28/Apr/20 13:20 Yeah I think it would be doable by adding the yaml parser that we have in swagger and use it in this module too. Hide Permalink Pradeep Kalvakolu added a comment - 28/Apr/20 13:25 Ok great. When can we expect this change， any idea? Show Pradeep Kalvakolu added a comment - 28/Apr/20 13:25 Ok great. When can we expect this change， any idea? Hide Permalink Claus Ibsen added a comment - 28/Apr/20 14:29 Okay found out the issue and have it fixed for next release Show Claus Ibsen added a comment - 28/Apr/20 14:29 Okay found out the issue and have it fixed for next release
CAMEL-14964,Omar Al-Safi,2020-04-24T11:48:44+0000,1587714524， where 1587714524 is the epoch,References: https://github.com/Azure/azure-sdk-for-java/tree/master/sdk/storage/azure-storage-file-datalake https://docs.microsoft.com/en-us/rest/api/storageservices/data-lake-storage-gen2 https://azuresdkdocs.blob.core.windows.net/$web/java/azure-storage-file-datalake/12.1.0/index.htmlPotential features to add: Write files based on a split strategy or splitter similar to the hadoop component User can write his/her own strategy for simplicity Add the possibility to compress the files...,There are no comments yet on this issue.
CAMEL-14963,Claus Ibsen,2020-06-23T08:46:54+0000,1592887614， where 1592887614 is the epoch,Had some talk with Luca about parameterized route builder/routes so you could specify per route what parameters they has (required and optional) by parameter name.Then this information can be used by tooling， camel component etc to be able to instantiate a route and specify the parameters it requires.Some more details to follow. Just wanted to create a JIRA before forgetting.,Hide Permalink Luca Burgazzoli added a comment - 23/Jun/20 08:46 - edited So assuming we have an application.properties like: foo = bar xyz = abc another.property = test and a pseudo route like from("timer:tick?{{another.property}}") .routeProperty("xyz"， "toto") .log("foo = {{foo}}") .log("xyz = {{xyz}}") Then the logs should be something like foo = bar xyz = toto so xyz is taken from the parameters bound to the route and foo from the global properties as there's no override on the route. Show Luca Burgazzoli added a comment - 23/Jun/20 08:46 - edited So assuming we have an application.properties like: foo = bar xyz = abc another.property = test and a pseudo route like from( "timer:tick?{{another.property}}" ) .routeProperty( "xyz" ， "toto" ) .log( "foo = {{foo}}" ) .log( "xyz = {{xyz}}" ) Then the logs should be something like foo = bar xyz = toto so xyz is taken from the parameters bound to the route and foo from the global properties as there's no override on the route. Hide Permalink Claus Ibsen added a comment - 30/Jun/20 08:07 - edited RouteTemplate TODO: Model DONE TODO: Validation that template parameters are provided DONE TODO: Java DSL DONE TODO: XML DSL DONE TODO: <routeTemplates> XML snippets DONE TODO: Java API to create new routes from route templates DONE TODO: Java unit test DONE TODO: XML unit test DONE TODO: Example DONE TODO: Documentation DONE TODO: Add routes with anonymous route id (eg auto assigned) DONE TODO: JMX API such as dump route template DONE TODO: Add detail on a route if it was created from a template and its template id DONE TODO: Model XML loader DONE TODO: Mark a parameter as optional， and also a default value DONE TODO: camel-main load routeTemplate XML files DONE TODO: routeTemplateContextRef in XML DSL DONE TODO: spring boot routes collector DONE TODO: camel-karaf XML DSL DONE TODO: fluent builder for creating route via template DONE TODO: Property placeholder resolution for creating routes before camel context is started DONE Show Claus Ibsen added a comment - 30/Jun/20 08:07 - edited RouteTemplate TODO: Model DONE TODO: Validation that template parameters are provided DONE TODO: Java DSL DONE TODO: XML DSL DONE TODO: <routeTemplates> XML snippets DONE TODO: Java API to create new routes from route templates DONE TODO: Java unit test DONE TODO: XML unit test DONE TODO: Example DONE TODO: Documentation DONE TODO: Add routes with anonymous route id (eg auto assigned) DONE TODO: JMX API such as dump route template DONE TODO: Add detail on a route if it was created from a template and its template id DONE TODO: Model XML loader DONE TODO: Mark a parameter as optional， and also a default value DONE TODO: camel-main load routeTemplate XML files DONE TODO: routeTemplateContextRef in XML DSL DONE TODO: spring boot routes collector DONE TODO: camel-karaf XML DSL DONE TODO: fluent builder for creating route via template DONE TODO: Property placeholder resolution for creating routes before camel context is started DONE Hide Permalink Claus Ibsen added a comment - 01/Jul/20 12:40 - edited The model needs a bit to be changed due to XML XSD generation problem. So I am refining the model so the template is not extending route and linked in a different way. DONE Show Claus Ibsen added a comment - 01/Jul/20 12:40 - edited The model needs a bit to be changed due to XML XSD generation problem. So I am refining the model so the template is not extending route and linked in a different way. DONE
CAMEL-14962,Jiri Ondrusek,2020-04-24T10:56:58+0000,1587711418， where 1587711418 is the epoch,With improvement https://issues.apache.org/jira/browse/CAMEL-14950 it is possible to secure undertow endpoint using spring security 5.For the correct implementation， there has to be UndertowSecurityProvider for such a case and a configuration required for spring security successful execution.For this purposes there has to be a component or starter containing this configuration.It should be also possible to simplify configuration requested from user to bare minimum by providing some kind of template or parents for security configuration.,There are no comments yet on this issue.
CAMEL-14961,James Netherton,2020-04-24T09:47:40+0000,1587707260， where 1587707260 is the epoch,matchOnUriPrefix is available to the camel-platform-http-vertx consumer but there is currently no logic to handle it.,There are no comments yet on this issue.
CAMEL-14960,Andrea Cosentino,2020-04-24T09:44:55+0000,1587707095， where 1587707095 is the epoch,The Karaf feature.xml does still references "org.apache.camel:camel-commands-core" but it should be now "org.apache.camel.karaf:camel-commands-core". This breaks the build of our Karaf-based microservices.,Hide Permalink Claus Ibsen added a comment - 24/Apr/20 09:44 I think this is a duplicate ticket that has been reported before Show Claus Ibsen added a comment - 24/Apr/20 09:44 I think this is a duplicate ticket that has been reported before Hide Permalink Andrea Cosentino added a comment - 24/Apr/20 09:45 This has been already fixed for 3.3.0 Show Andrea Cosentino added a comment - 24/Apr/20 09:45 This has been already fixed for 3.3.0 Hide Permalink Andrea Cosentino added a comment - 24/Apr/20 09:47 You can add <bundleReplacements> <bundle mode="maven" originalUri="mvn:org.apache.camel/camel-commands-core/3.2.0" replacement="mvn:org.apache.camel.karaf/camel-commands-core/3.2.0"/> </bundleReplacements> in etc/org.apache.karaf.features.xml Show Andrea Cosentino added a comment - 24/Apr/20 09:47 You can add <bundleReplacements> <bundle mode="maven" originalUri="mvn:org.apache.camel/camel-commands-core/3.2.0" replacement="mvn:org.apache.camel.karaf/camel-commands-core/3.2.0"/> </bundleReplacements> in etc/org.apache.karaf.features.xml
CAMEL-14959,Unassigned,2020-05-17T07:39:50.122Z,1589686790.122， where 1589686790.122 is the epoch,In our product， we invoke the Odata endpoint of a different service， it uses an CSRF nonce. So in one post requset， two thing happen， Fetch the CSRF nonce and Post the actual request. Here on processing the response of Fetch， it sets the charset from IOHelper.getCharsetFromContentType. If there is no charset in the response header Content-Type， then UTF-8 is set to default. Thus this charset gets put on the exchange object. and used further in the post request. But when we are creating a request entity. in HttpProducer.createRequestEntity The default charset it uses is ISO-8859-1 which is correct as per HTTP 1.1 standard.,Hide Permalink saksham added a comment - 23/Apr/20 12:30 The problem is because there are other requests which do no require the CSRF nonce， and in that case the encoding is used as ISO-8859-1 which is fine by us. But why while handling the response， the default charset is used as UTF-8. The default charset should be the same in both the cases. Show saksham added a comment - 23/Apr/20 12:30 The problem is because there are other requests which do no require the CSRF nonce， and in that case the encoding is used as ISO-8859-1 which is fine by us. But why while handling the response， the default charset is used as UTF-8. The default charset should be the same in both the cases. Hide Permalink Claus Ibsen added a comment - 25/Apr/20 07:25 Can you maybe better explain this with a sample that reproduces this and with instructions how to run， and try it out， then we can take a look. Also try with latest Camel 2.x version. Show Claus Ibsen added a comment - 25/Apr/20 07:25 Can you maybe better explain this with a sample that reproduces this and with instructions how to run， and try it out， then we can take a look. Also try with latest Camel 2.x version. Hide Permalink saksham added a comment - 17/May/20 07:48 - edited Hi Claus Ibsen Please find the attached projects for reproducing the issue. And below is how to use them: 1. Echo server (echoServer.zip): contains a nodejs based web server. It only has one end point "/echo". This endpoint returns the body it receives. It sets the response header "content-type" as "text/plain". No charset Note， this server starts on default http port : 80. 2. apache-camel-consume.zip : contains a maven project for invoking the echo endpoint of echoserver. It sends a text/plain content-type with body: HÃLLO. It does not set any charset in the content-type. But the body it receives is: H?LLO. Root cause: If you check the org.apache.http.entity.StringEntity， it uses the default charset， if none is provided. And the default is ISO-8859-1. But the while handling the response ， the default charset that is used in IOHelper.getCharsetFromContentType is UTF-8. Thus， there is this difference in the message sent and received. we expect the ISO-8859-1 to be used whenever the charset is not present as it is the default charset as per HTTP 1.1 standards. Also note， I tried to send the charset as utf-8 in the request， then the sent and received body is same as expected. But we want the default charset to be uniform everywhere. Behavior is the same with latest 2.24.x release. Show saksham added a comment - 17/May/20 07:48 - edited Hi Claus Ibsen Please find the attached projects for reproducing the issue. And below is how to use them: 1. Echo server (echoServer.zip): contains a nodejs based web server. It only has one end point "/echo". This endpoint returns the body it receives. It sets the response header "content-type" as "text/plain". No charset Note， this server starts on default http port : 80. 2. apache-camel-consume.zip : contains a maven project for invoking the echo endpoint of echoserver. It sends a text/plain content-type with body: HÃLLO . It does not set any charset in the content-type. But the body it receives is: H?LLO . Root cause: If you check the org.apache.http.entity.StringEntity， it uses the default charset， if none is provided. And the default is ISO-8859-1. But the while handling the response ， the default charset that is used in IOHelper.getCharsetFromContentType is UTF-8. Thus， there is this difference in the message sent and received. we expect the ISO-8859-1 to be used whenever the charset is not present as it is the default charset as per HTTP 1.1 standards. Also note， I tried to send the charset as utf-8 in the request， then the sent and received body is same as expected. But we want the default charset to be uniform everywhere. Behavior is the same with latest 2.24.x release. Hide Permalink Andrea Cosentino added a comment - 17/May/20 11:21 This is a minor priority issue. Show Andrea Cosentino added a comment - 17/May/20 11:21 This is a minor priority issue.
CAMEL-14958,Unassigned,2020-06-06T13:41:19.414Z,1591436479.414， where 1591436479.414 is the epoch,Within the small width screen， the setting is to only display the social icon button as of now. However， I thought it would be a good idea to include the search icon alongside the social button icons. On click of the social button icons， we could include animation， for instance， a fade-in effect of the search bar occupying the entire navbar. The user can do the search as required. On the left side of the search bar， there will be back arrow， which on click would give us the original navbar look with a fade-out effect.Before I start working on this， I would like an opinion about this idea.,Hide Permalink Aemie added a comment - 26/May/20 05:53 Zoran Regvart， Aashna Jena what are your views on this? The state will toggle between 1 & 2 on click. Show Aemie added a comment - 26/May/20 05:53 Zoran Regvart ， Aashna Jena what are your views on this? The state will toggle between 1 & 2 on click. Hide Permalink Aashna Jena added a comment - 26/May/20 07:30 I agree that we should have the search option on smaller screens. Aemie this would also mean that we have to adjust the search result styling for smaller screens. Another thought : If we open up a search bar below the header instead of overwriting it， would that look too cluttered? Show Aashna Jena added a comment - 26/May/20 07:30 I agree that we should have the search option on smaller screens. Aemie this would also mean that we have to adjust the search result styling for smaller screens. Another thought : If we open up a search bar below the header instead of overwriting it， would that look too cluttered? Hide Permalink Zoran Regvart added a comment - 26/May/20 21:32 Looks good. We do need to be careful about the size of the touch targets， making sure that users don't trigger other links by mistake， i.e. having enough padding around the individual icons. I also like the search being embedded in the menu item， some work has been done on this in PR#255， good application of this is in the github.com responsive design. Show Zoran Regvart added a comment - 26/May/20 21:32 Looks good. We do need to be careful about the size of the touch targets， making sure that users don't trigger other links by mistake， i.e. having enough padding around the individual icons. I also like the search being embedded in the menu item， some work has been done on this in PR#255 ， good application of this is in the github.com responsive design. Hide Permalink Aemie added a comment - 27/May/20 03:55 - edited Aashna Jena Aashna， yes I do feel it will look quite clustered if put below the navbar and about the screen result width could be adjusted to the width of the search bar itself. Zoran Regvart Zoran， I have seen that PR， my only concern with that design is its accessibility. Also， if you take a look at the various websites including myntra， Amazon， the searn icon is present in the navbar itself as it can be easily accessed by the user on click. And if you put search embedded with the menu for smaller screen width， when you make a search， due to the light opacity of the search result box， it will make it look messy. Show Aemie added a comment - 27/May/20 03:55 - edited Aashna Jena Aashna， yes I do feel it will look quite clustered if put below the navbar and about the screen result width could be adjusted to the width of the search bar itself. Zoran Regvart Zoran， I have seen that PR， my only concern with that design is its accessibility. Also， if you take a look at the various websites including myntra， Amazon， the searn icon is present in the navbar itself as it can be easily accessed by the user on click. And if you put search embedded with the menu for smaller screen width， when you make a search， due to the light opacity of the search result box， it will make it look messy. Hide Permalink Aemie added a comment - 04/Jun/20 11:30 Zoran Regvart Aashna Jena I have added one of the alternative designs I created using js script. I will try to implement the method Zoran Regvart suggested but I find the use of this alternative better for a docs site. Show Aemie added a comment - 04/Jun/20 11:30 Zoran Regvart Aashna Jena I have added one of the alternative designs I created using js script. I will try to implement the method Zoran Regvart suggested but I find the use of this alternative better for a docs site. Hide Permalink Aashna Jena added a comment - 04/Jun/20 14:33 - edited This seems good to me. I too think that the search icon should be accessible without having to open the menu. I have one suggestion. In this image， the two close buttons are a little confusing. I understand that one is for clearing the search and other for closing the search bar. Can we use a bigger cross icon， identical to the one used for closing the main menu? It's a bigger touch target， plus since it's used for closing the menu， perhaps it would help differentiate between the "clear" and "close" functionalities. Show Aashna Jena added a comment - 04/Jun/20 14:33 - edited This seems good to me. I too think that the search icon should be accessible without having to open the menu. I have one suggestion. In this image， the two close buttons are a little confusing. I understand that one is for clearing the search and other for closing the search bar. Can we use a bigger cross icon， identical to the one used for closing the main menu? It's a bigger touch target， plus since it's used for closing the menu， perhaps it would help differentiate between the "clear" and "close" functionalities. Hide Permalink Aemie added a comment - 04/Jun/20 15:19 - edited Yea that can be done， I just wanted to implement the design concept but yea that change even I thought was necessary to make. Aashna Jena How does this look to you? Show Aemie added a comment - 04/Jun/20 15:19 - edited Yea that can be done， I just wanted to implement the design concept but yea that change even I thought was necessary to make. Aashna Jena How does this look to you? Hide Permalink Aemie added a comment - 05/Jun/20 09:44 Zoran Regvart if we were to include the design method you suggested， then we need to think about how we are going to be presenting the search results as well and this is applicable for width < 1024px only however for width between 1024 <= width <= 1220px， we need to include search too and the method I suggested would be more applicable at that point. What do you think? Show Aemie added a comment - 05/Jun/20 09:44 Zoran Regvart if we were to include the design method you suggested， then we need to think about how we are going to be presenting the search results as well and this is applicable for width < 1024px only however for width between 1024 <= width <= 1220px， we need to include search too and the method I suggested would be more applicable at that point. What do you think? Hide Permalink Zoran Regvart added a comment - 05/Jun/20 19:56 Aemie I guess one option would be to place the search at the bottom of the mobile menu， similar to how https://www.typescriptlang.org/ does it. I was looking at how projects listed on https://docsearch.algolia.com/ approach this， and seems like a fair number of them opt to show the search input always and in almost full width. I think the approach on https://getbootstrap.com/docs/ is particularly good one. Show Zoran Regvart added a comment - 05/Jun/20 19:56 Aemie I guess one option would be to place the search at the bottom of the mobile menu， similar to how https://www.typescriptlang.org/ does it. I was looking at how projects listed on https://docsearch.algolia.com/ approach this， and seems like a fair number of them opt to show the search input always and in almost full width. I think the approach on https://getbootstrap.com/docs/ is particularly good one. Hide Permalink Aemie added a comment - 06/Jun/20 08:14 I don't like the design of search implemented with typescript much but that of bootstrap is really good. Docsearch and my implementation is similar. Also the only problem I am trying to state here is your idea of design and that of bootstrap looks amazing with screen width < 1024px when the nav burger appears. From width ranging from 1024 - 1220 there is no navbar burger and no search bar as well. And using bootstrap design to cover the entire width right below navbar might not look neat. I will implement the idea of bootstrap and see on this range of width and let you know. Show Aemie added a comment - 06/Jun/20 08:14 I don't like the design of search implemented with typescript much but that of bootstrap is really good. Docsearch and my implementation is similar. Also the only problem I am trying to state here is your idea of design and that of bootstrap looks amazing with screen width < 1024px when the nav burger appears. From width ranging from 1024 - 1220 there is no navbar burger and no search bar as well. And using bootstrap design to cover the entire width right below navbar might not look neat. I will implement the idea of bootstrap and see on this range of width and let you know. Hide Permalink Aemie added a comment - 06/Jun/20 13:45 - edited Zoran Regvart Maria Arias de Reyna Dominguez Aashna Jena， as I really like the use of a search bar in the bootstrap website suggested by Zoran so I thought of modifying it but the design really looks good on all the pages， I think we could go ahead with implementing it， what are your opinions? FRONT PAGE DESIGN DOCS PAGES DESIGN Show Aemie added a comment - 06/Jun/20 13:45 - edited Zoran Regvart Maria Arias de Reyna Dominguez Aashna Jena ， as I really like the use of a search bar in the bootstrap website suggested by Zoran so I thought of modifying it but the design really looks good on all the pages， I think we could go ahead with implementing it， what are your opinions? FRONT PAGE DESIGN DOCS PAGES DESIGN Hide Permalink Zoran Regvart added a comment - 10/Jun/20 19:40 Aemie looks good to me， thanks! Show Zoran Regvart added a comment - 10/Jun/20 19:40 Aemie looks good to me， thanks! Hide Permalink Aemie added a comment - 11/Jun/20 05:19 Zoran Regvart I had a query regarding the hierarchy structure， there is a toolbar in blogs and other pages. So for those， we know navbar burger with its menu has higher hierarchy so for search results， I thought it would be better to have a greater hierarchy than the navbar-menu， does that sound good to you? Show Aemie added a comment - 11/Jun/20 05:19 Zoran Regvart I had a query regarding the hierarchy structure， there is a toolbar in blogs and other pages. So for those， we know navbar burger with its menu has higher hierarchy so for search results， I thought it would be better to have a greater hierarchy than the navbar-menu， does that sound good to you? Hide Permalink Zoran Regvart added a comment - 11/Jun/20 07:42 Aemie I’m sorry， I don’t quite understand the question. Are you referring to the categories filter present on blog section? I don’t think that should be part of the menu. Show Zoran Regvart added a comment - 11/Jun/20 07:42 Aemie I’m sorry， I don’t quite understand the question. Are you referring to the categories filter present on blog section? I don’t think that should be part of the menu. Hide Permalink Aemie added a comment - 11/Jun/20 08:42 Zoran Regvart no I am not asking that. What I am asking is when the side menu panel is open and you open the navbar menu， the navbar menu is overlayed on top of the menu panel. In that way， if the navbar is open and I try to search， the search results should overlay the navbar right? So I am asking whether it is the best choice to make the z-index of search greater than that of the navbar menu for the small width screen? Show Aemie added a comment - 11/Jun/20 08:42 Zoran Regvart no I am not asking that. What I am asking is when the side menu panel is open and you open the navbar menu， the navbar menu is overlayed on top of the menu panel. In that way， if the navbar is open and I try to search， the search results should overlay the navbar right? So I am asking whether it is the best choice to make the z-index of search greater than that of the navbar menu for the small width screen? Hide Permalink Aemie added a comment - 11/Jun/20 17:32 Zoran Regvart Maria Arias de Reyna Dominguez I wanted to ask regarding the breakpoints， currently there are three breakpoints， < 1024， 1024 - 1275， >=1275 and I think we need to be consistent with the website and keep only 2 breakpoints one with the navbar burger with the design as show and one with the default design tho with bigger icons. So how do you want to approach this， currently， for width >= 1275， the default design fits perfectly. So I thought it's best to keep the breakpoint at 1275 where the design I showed would be for < 1275 width size. What are your opinions? Show Aemie added a comment - 11/Jun/20 17:32 Zoran Regvart Maria Arias de Reyna Dominguez I wanted to ask regarding the breakpoints， currently there are three breakpoints， < 1024， 1024 - 1275， >=1275 and I think we need to be consistent with the website and keep only 2 breakpoints one with the navbar burger with the design as show and one with the default design tho with bigger icons. So how do you want to approach this， currently， for width >= 1275， the default design fits perfectly. So I thought it's best to keep the breakpoint at 1275 where the design I showed would be for < 1275 width size. What are your opinions? Hide Permalink Maria Arias de Reyna Dominguez added a comment - 11/Jun/20 20:14 - edited Yes， I think we should be consistent and have only two breakpoints. Keep it simple Maybe 1024 is a more standard size than 1275? Check https://www.w3schools.com/browsers/browsers_display.asp Show Maria Arias de Reyna Dominguez added a comment - 11/Jun/20 20:14 - edited Yes， I think we should be consistent and have only two breakpoints. Keep it simple Maybe 1024 is a more standard size than 1275? Check https://www.w3schools.com/browsers/browsers_display.asp Hide Permalink Aemie added a comment - 12/Jun/20 07:00 Maria Arias de Reyna Dominguez yes in the general browser， 1024 is the break-point however in the camel website due to inclusion of a logo， navbar-menu， search and social icons， everything fits perfectly till 1275px itself. At 1024， there is no space for including the search in the navbar at all. That's why I chose 1275 as the break-point in this case. Show Aemie added a comment - 12/Jun/20 07:00 Maria Arias de Reyna Dominguez yes in the general browser， 1024 is the break-point however in the camel website due to inclusion of a logo， navbar-menu， search and social icons， everything fits perfectly till 1275px itself. At 1024， there is no space for including the search in the navbar at all. That's why I chose 1275 as the break-point in this case. Hide Permalink Aemie added a comment - 13/Jun/20 15:27 - edited Zoran Regvart I had a query， I have implemented the design and it works， however it isn't visible in any of the user-manual， components and the individual project pages， is it 'cause the website needs to be built to see the change? And I have based it on 2 breakpoints the common being 1275 as I explained before， so if you're okay with that I will push the code in a day or 2. Show Aemie added a comment - 13/Jun/20 15:27 - edited Zoran Regvart I had a query， I have implemented the design and it works， however it isn't visible in any of the user-manual， components and the individual project pages， is it 'cause the website needs to be built to see the change? And I have based it on 2 breakpoints the common being 1275 as I explained before， so if you're okay with that I will push the code in a day or 2. Hide Permalink Maria Arias de Reyna Dominguez added a comment - 15/Jun/20 07:51 Do you have the netlify link for checking the tested website? Maybe those uris work on a separated set of stylesheets? Show Maria Arias de Reyna Dominguez added a comment - 15/Jun/20 07:51 Do you have the netlify link for checking the tested website? Maybe those uris work on a separated set of stylesheets? Hide Permalink Aemie added a comment - 15/Jun/20 10:04 - edited Maria Arias de Reyna Dominguez I have resolved the issue for that. I will be creating a PR after I am done with complete implementation. Show Aemie added a comment - 15/Jun/20 10:04 - edited Maria Arias de Reyna Dominguez I have resolved the issue for that. I will be creating a PR after I am done with complete implementation. Hide Permalink Aemie added a comment - 16/Jun/20 07:25 Zoran Regvart Aashna Jena Maria Arias de Reyna Dominguez The thing is I have implemented it but obviously， as there is an additional component， I had to make changes to the different areas as well especially nav panel menu. I have resolved any additional issues that raised except one. The only issue I am left with is the explore menu panel under documentation which isn't fixed at the bottom of the screen as it is by default. Show Aemie added a comment - 16/Jun/20 07:25 Zoran Regvart Aashna Jena Maria Arias de Reyna Dominguez The thing is I have implemented it but obviously， as there is an additional component， I had to make changes to the different areas as well especially nav panel menu. I have resolved any additional issues that raised except one. The only issue I am left with is the explore menu panel under documentation which isn't fixed at the bottom of the screen as it is by default. Hide Permalink Zoran Regvart added a comment - 16/Jun/20 20:14 Aemie it'll be easier to help with this when we see the code， so I'll wait for the pull request. One note though， we can't deviate from Antora UI too much， that would make it difficult to rebase on newer versions. That's the reason why make changes via variables and create separate CSS files with class prefixes to avoid collision. Show Zoran Regvart added a comment - 16/Jun/20 20:14 Aemie it'll be easier to help with this when we see the code， so I'll wait for the pull request. One note though， we can't deviate from Antora UI too much， that would make it difficult to rebase on newer versions. That's the reason why make changes via variables and create separate CSS files with class prefixes to avoid collision. Hide Permalink ASF GitHub Bot added a comment - 17/Jun/20 11:54 AemieJ opened a new pull request #398: URL: https://github.com/apache/camel-website/pull/398 DESCRIPTION ON THE PROBLEM Below the width of 1275px for the screen， the search panel couldn't be included. This is very inconvenient as we require the presence of search for all screen width. In addition to this problem， I observed another with the toolbar. When clicked on the nav toggle within the toolbar， the box with the list was shifted to the right and it seemed like a bug present on the website. BEFORE TOOLBAR PANEL DESIGN ![old-toolbar](https://user-images.githubusercontent.com/44139348/84804375-4e75b380-b020-11ea-81d6-30ffbd68ca0e.png) AFTER TOOLBAR PANEL DESIGN ![new-toolbar-design](https://user-images.githubusercontent.com/44139348/84804388-52093a80-b020-11ea-9248-66ba2c669c5b.png) DESIGN ALTERNATIVE PROVIDED The search design has been inspired by the design of https://getbootstrap.com/docs/4.5/getting-started/introduction/. The search bar design is present for the width < 1275 where 1275 is the breakpoint. Here， the search bar is present alongside the navbar burger right below the major navbar. Due to the addition of components， changes are made to the nav-panel on various pages and docs as well. The hierarchy of this design is as follows: ``` – Search Results # If the navbar menu and/or nav panel item are open， the search results will be shown above them – Navbar Menu # If the nav panel item is open， the navbar menu will appear on top of it – Nav Panel Items # Least in the hierarchy ``` BASIC DESIGN IMPLEMENTATION EXAMPLE ![search-bar-design](https://user-images.githubusercontent.com/44139348/84804532-8f6dc800-b020-11ea-9504-b0552a2b210b.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 17/Jun/20 11:54 AemieJ opened a new pull request #398: URL: https://github.com/apache/camel-website/pull/398 DESCRIPTION ON THE PROBLEM Below the width of 1275px for the screen， the search panel couldn't be included. This is very inconvenient as we require the presence of search for all screen width. In addition to this problem， I observed another with the toolbar. When clicked on the nav toggle within the toolbar， the box with the list was shifted to the right and it seemed like a bug present on the website. BEFORE TOOLBAR PANEL DESIGN ! [old-toolbar] ( https://user-images.githubusercontent.com/44139348/84804375-4e75b380-b020-11ea-81d6-30ffbd68ca0e.png ) AFTER TOOLBAR PANEL DESIGN ! [new-toolbar-design] ( https://user-images.githubusercontent.com/44139348/84804388-52093a80-b020-11ea-9248-66ba2c669c5b.png ) DESIGN ALTERNATIVE PROVIDED The search design has been inspired by the design of https://getbootstrap.com/docs/4.5/getting-started/introduction/ . The search bar design is present for the width < 1275 where 1275 is the breakpoint. Here， the search bar is present alongside the navbar burger right below the major navbar. Due to the addition of components， changes are made to the nav-panel on various pages and docs as well. The hierarchy of this design is as follows: ``` – Search Results # If the navbar menu and/or nav panel item are open， the search results will be shown above them – Navbar Menu # If the nav panel item is open， the navbar menu will appear on top of it – Nav Panel Items # Least in the hierarchy ``` BASIC DESIGN IMPLEMENTATION EXAMPLE ! [search-bar-design] ( https://user-images.githubusercontent.com/44139348/84804532-8f6dc800-b020-11ea-9504-b0552a2b210b.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 17/Jun/20 20:44 aashnajena commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-645614676 Hey， how are the search results appearing for <1275px? In the preview， I can see search results appearing only for >1275px screens ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 17/Jun/20 20:44 aashnajena commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-645614676 Hey， how are the search results appearing for <1275px? In the preview， I can see search results appearing only for >1275px screens ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 17/Jun/20 20:46 aashnajena removed a comment on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-645614676 Hey， how are the search results appearing for <1275px? In the preview， I can see search results appearing only for >1275px screens ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 17/Jun/20 20:46 aashnajena removed a comment on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-645614676 Hey， how are the search results appearing for <1275px? In the preview， I can see search results appearing only for >1275px screens ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 17/Jun/20 22:12 zregvart commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r441848880 ########## File path: antora-ui-camel/gulp.d/tasks/build.js ########## @@ -99，8 +99，8 @@ module.exports = (src， dest， preview) => () => { ) .pipe(buffer()) .pipe(terser()) // NOTE use this statement to bundle a JavaScript library that cannot be browserified， like jQuery //vfs.src(require.resolve('<package-name-or-require-path>')， opts).pipe(concat('js/vendor/<library-name>.js'))， + // NOTE use this statement to bundle a JavaScript library that cannot be browserified， like jQuery + //vfs.src(require.resolve('<package-name-or-require-path>')， opts).pipe(concat('js/vendor/<library-name>.js'))， Review comment: Can you move this to a separate commit/pull request. ########## File path: antora-ui-camel/src/css/base.css ########## @@ -62，11 +62，13 @@ th { font-weight: var(--body-font-weight-bold); } -em em { /* stylelint-disable-line */ +em em { + /* stylelint-disable-line */ Review comment: Can you move this to a separate commit/pull request. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -394，6 +399，18 @@ body { text-align: right; } +.search-bar { + top: 4.1rem; + position: sticky; + position: -webkit-sticky; Review comment: Do we need this? ```suggestion ``` ########## File path: antora-ui-camel/src/css/header.css ########## @@ -406，6 +423，28 @@ body { outline: 0; } +.navbar-small input { + width: 93vw; +} + +@media screen and (max-width: 1024px) { + .navbar-small input { + width: 90vw; + } +} + +@media screen and (min-width: 425px) and (max-width: 575px) { + .navbar-small input { + width: 85vw; + } +} + +@media screen and (max-width: 425px) { + .navbar-small input { + width: 80vw; + } +} + .navbar-search input:focus-within { background-color: #fff; border-color: #eaeaec; Review comment: (not part of this change)， we should have used variables here ########## File path: antora-ui-camel/src/css/toc.css ########## @@ -51，11 +51，11 @@ margin: 0; } -.toc .toc-menu li[data-level="2"] a { +.toc .toc-menu li[data-level='2'] a { padding-left: 1.25rem; } -.toc .toc-menu li[data-level="3"] a { +.toc .toc-menu li[data-level='3'] a { Review comment: Style changes in this file should be on a separate commit or in a new pull request. ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -6，10 +6，13 @@ window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') const search = document.querySelector('#search') + const condition = window.innerWidth < 1275 + const search = condition ? document.querySelector('.search-small') : document.querySelector('.search') Review comment: I'd prefer if we had a CSS only solution for this， not sure if there's need for two inputs for search. This way we make the implementation much more complex. ########## File path: antora-ui-camel/src/css/blog.css ########## @@ -25，6 +25，16 @@ article.blog:first-child { margin-top: 3rem; } +@media screen and (max-width: 1023px) { + .blog.list aside { + margin-top: 2.5rem; + } + + article.blog-post:first-child { Review comment: Should this be prefixed with `.blog`? ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -532，6 +538，19 @@ padding: 0.75rem; } +.doc aside { + float: right; + margin-left: 1rem; + width: 25rem; + margin-top: 3.5rem; +} + +@media screen and (max-width: 1023px) { + .doc.side aside { + margin-left: -1rem; Review comment: Not sure about negative margins， seems hacky. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -61，15 +61，15 @@ body { .navbar-burger { color: var(--navbar-font-color); - background: none; + background: #fff; Review comment: ```suggestion background: var(--navbar-background); ``` ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -37，6 +37，12 @@ margin: 1.5rem 0; } +@media screen and (max-width: 1274px) { + .static > h1:first-child { + margin: 4.05556rem 0 1.5rem 0; Review comment: These are very specific numbers， I wonder if we could place them in `vars.css` and derive their values. Think about when someone needs to edit this， they don't have the context as to why this values have 5 decimal places. ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -606，12 +625，12 @@ } .doc b.button::before { Review comment: Perhaps put the codestyle changes in a separate commit/pull request. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -406，6 +423，28 @@ body { outline: 0; } +.navbar-small input { + width: 93vw; +} + +@media screen and (max-width: 1024px) { + .navbar-small input { + width: 90vw; + } +} + +@media screen and (min-width: 425px) and (max-width: 575px) { + .navbar-small input { + width: 85vw; + } +} + +@media screen and (max-width: 425px) { + .navbar-small input { + width: 80vw; + } +} Review comment: I'd either use percentages or rem. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -426，9 +465，9 @@ body { cursor: pointer; } -#search_results { +.search-results { top: 3.38rem; background: #fffe; + background: #fff; Review comment: Use variables ########## File path: antora-ui-camel/src/css/site.css ########## @@ -22，4 +22，4 @@ @import 'release.css'; @import 'misc.css'; @import 'community.css'; -@import 'projects.css' +@import 'projects.css'; Review comment: Style changes in this file should be on a separate commit or in a new pull request. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -394，6 +399，18 @@ body { text-align: right; } +.search-bar { + top: 4.1rem; + position: sticky; + position: -webkit-sticky; + z-index: 4; +} + +.navbar-small { + display: none; + background: #fff; Review comment: Does the element need a background if it's not displayed? ```suggestion background: #fff; ``` ########## File path: antora-ui-camel/src/css/pagination.css ########## @@ -29，11 +29，11 @@ nav.pagination span::before { } nav.pagination .prev::before { Review comment: Style changes in this file should be on a separate commit or in a new pull request. ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -25，17 +28，23 @@ } } + search.addEventListener('click'， function (e) { + e.stopPropagation() + } ) + search.addEventListener( 'keyup'， debounce((key) => { + if (condition) document.querySelector('.navbar-burger').style.marginTop = '1rem' Review comment: I'm not sure that the content security policy will allow changing the style via JavaScript， anyhow we need to minimize the JavaScript and focus on style changes via CSS only. ########## File path: antora-ui-camel/src/css/vars.css ########## @@ -131，11 +131，14 @@ --footer-height: 23rem; /* empirically corresponding current design of the foooter */ /* dimensions */ -navbar-height: calc(73 / var(-rem-base) * 1rem); + -toolbar-nav-height: calc(139.5 / var(-rem-base) * 1rem); + -panel-height: calc(54 / var(-rem-base) * 1rem); Review comment: These are some odd values， how did we came to them? ########## File path: antora-ui-camel/src/partials/header-content.hbs ########## @@ -5，33 +5，46 @@ <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> #withMenuData #each @items Review comment: Not sure about this， the code was indented to make it more readable. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 17/Jun/20 22:12 zregvart commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r441848880 ########## File path: antora-ui-camel/gulp.d/tasks/build.js ########## @@ -99，8 +99，8 @@ module.exports = (src， dest， preview) => () => { ) .pipe(buffer()) .pipe(terser()) // NOTE use this statement to bundle a JavaScript library that cannot be browserified， like jQuery //vfs.src(require.resolve('<package-name-or-require-path>')， opts).pipe(concat('js/vendor/<library-name>.js'))， + // NOTE use this statement to bundle a JavaScript library that cannot be browserified， like jQuery + //vfs.src(require.resolve('<package-name-or-require-path>')， opts).pipe(concat('js/vendor/<library-name>.js'))， Review comment: Can you move this to a separate commit/pull request. ########## File path: antora-ui-camel/src/css/base.css ########## @@ -62，11 +62，13 @@ th { font-weight: var(--body-font-weight-bold); } -em em { /* stylelint-disable-line */ +em em { + /* stylelint-disable-line */ Review comment: Can you move this to a separate commit/pull request. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -394，6 +399，18 @@ body { text-align: right; } +.search-bar { + top: 4.1rem; + position: sticky; + position: -webkit-sticky; Review comment: Do we need this? ```suggestion ``` ########## File path: antora-ui-camel/src/css/header.css ########## @@ -406，6 +423，28 @@ body { outline: 0; } +.navbar-small input { + width: 93vw; +} + +@media screen and (max-width: 1024px) { + .navbar-small input { + width: 90vw; + } +} + +@media screen and (min-width: 425px) and (max-width: 575px) { + .navbar-small input { + width: 85vw; + } +} + +@media screen and (max-width: 425px) { + .navbar-small input { + width: 80vw; + } +} + .navbar-search input:focus-within { background-color: #fff; border-color: #eaeaec; Review comment: (not part of this change)， we should have used variables here ########## File path: antora-ui-camel/src/css/toc.css ########## @@ -51，11 +51，11 @@ margin: 0; } -.toc .toc-menu li [data-level="2"] a { +.toc .toc-menu li [data-level='2'] a { padding-left: 1.25rem; } -.toc .toc-menu li [data-level="3"] a { +.toc .toc-menu li [data-level='3'] a { Review comment: Style changes in this file should be on a separate commit or in a new pull request. ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -6，10 +6，13 @@ window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') const search = document.querySelector('#search') + const condition = window.innerWidth < 1275 + const search = condition ? document.querySelector('.search-small') : document.querySelector('.search') Review comment: I'd prefer if we had a CSS only solution for this， not sure if there's need for two inputs for search. This way we make the implementation much more complex. ########## File path: antora-ui-camel/src/css/blog.css ########## @@ -25，6 +25，16 @@ article.blog:first-child { margin-top: 3rem; } +@media screen and (max-width: 1023px) { + .blog.list aside { + margin-top: 2.5rem; + } + + article.blog-post:first-child { Review comment: Should this be prefixed with `.blog`? ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -532，6 +538，19 @@ padding: 0.75rem; } +.doc aside { + float: right; + margin-left: 1rem; + width: 25rem; + margin-top: 3.5rem; +} + +@media screen and (max-width: 1023px) { + .doc.side aside { + margin-left: -1rem; Review comment: Not sure about negative margins， seems hacky. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -61，15 +61，15 @@ body { .navbar-burger { color: var(--navbar-font-color); - background: none; + background: #fff; Review comment: ```suggestion background: var(--navbar-background); ``` ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -37，6 +37，12 @@ margin: 1.5rem 0; } +@media screen and (max-width: 1274px) { + .static > h1:first-child { + margin: 4.05556rem 0 1.5rem 0; Review comment: These are very specific numbers， I wonder if we could place them in `vars.css` and derive their values. Think about when someone needs to edit this， they don't have the context as to why this values have 5 decimal places. ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -606，12 +625，12 @@ } .doc b.button::before { Review comment: Perhaps put the codestyle changes in a separate commit/pull request. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -406，6 +423，28 @@ body { outline: 0; } +.navbar-small input { + width: 93vw; +} + +@media screen and (max-width: 1024px) { + .navbar-small input { + width: 90vw; + } +} + +@media screen and (min-width: 425px) and (max-width: 575px) { + .navbar-small input { + width: 85vw; + } +} + +@media screen and (max-width: 425px) { + .navbar-small input { + width: 80vw; + } +} Review comment: I'd either use percentages or rem. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -426，9 +465，9 @@ body { cursor: pointer; } -#search_results { +.search-results { top: 3.38rem; background: #fffe; + background: #fff; Review comment: Use variables ########## File path: antora-ui-camel/src/css/site.css ########## @@ -22，4 +22，4 @@ @import 'release.css'; @import 'misc.css'; @import 'community.css'; -@import 'projects.css' +@import 'projects.css'; Review comment: Style changes in this file should be on a separate commit or in a new pull request. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -394，6 +399，18 @@ body { text-align: right; } +.search-bar { + top: 4.1rem; + position: sticky; + position: -webkit-sticky; + z-index: 4; +} + +.navbar-small { + display: none; + background: #fff; Review comment: Does the element need a background if it's not displayed? ```suggestion background: #fff; ``` ########## File path: antora-ui-camel/src/css/pagination.css ########## @@ -29，11 +29，11 @@ nav.pagination span::before { } nav.pagination .prev::before { Review comment: Style changes in this file should be on a separate commit or in a new pull request. ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -25，17 +28，23 @@ } } + search.addEventListener('click'， function (e) { + e.stopPropagation() + } ) + search.addEventListener( 'keyup'， debounce((key) => { + if (condition) document.querySelector('.navbar-burger').style.marginTop = '1rem' Review comment: I'm not sure that the content security policy will allow changing the style via JavaScript， anyhow we need to minimize the JavaScript and focus on style changes via CSS only. ########## File path: antora-ui-camel/src/css/vars.css ########## @@ -131，11 +131，14 @@ --footer-height: 23rem; /* empirically corresponding current design of the foooter */ /* dimensions */ - navbar-height: calc(73 / var( -rem-base) * 1rem); + - toolbar-nav-height: calc(139.5 / var( -rem-base) * 1rem); + - panel-height: calc(54 / var( -rem-base) * 1rem); Review comment: These are some odd values， how did we came to them? ########## File path: antora-ui-camel/src/partials/header-content.hbs ########## @@ -5，33 +5，46 @@ <div id="topbar-nav" class="navbar-menu"> <div class="navbar-end"> #withMenuData #each @items Review comment: Not sure about this， the code was indented to make it more readable. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 17/Jun/20 22:19 zregvart commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r441865179 ########## File path: antora-ui-camel/src/css/vars.css ########## @@ -131，11 +131，14 @@ --footer-height: 23rem; /* empirically corresponding current design of the foooter */ /* dimensions */ -navbar-height: calc(73 / var(-rem-base) * 1rem); + -toolbar-nav-height: calc(139.5 / var(-rem-base) * 1rem); + -panel-height: calc(54 / var(-rem-base) * 1rem); -toolbar-height: calc(45 / var(-rem-base) * 1rem); -drawer-height: var(-toolbar-height); -body-top: calc(var(-navbar-height) + 1rem); -body-min-height: calc(100vh - var(-navbar-height)); -nav-height: calc(var(body-min-height) - var(-toolbar-height)); + -nav-menu-panel-height: calc(100vh - var(-panel-height)); -nav-heightdesktop: var(-body-min-height); -nav-panel-height: calc(var(nav-height) - var(-drawer-height)); Review comment: This value needs to be adjusted， the height of the search bar needs to be subtracted from the height to fit the explore drawer ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 17/Jun/20 22:19 zregvart commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r441865179 ########## File path: antora-ui-camel/src/css/vars.css ########## @@ -131，11 +131，14 @@ --footer-height: 23rem; /* empirically corresponding current design of the foooter */ /* dimensions */ - navbar-height: calc(73 / var( -rem-base) * 1rem); + - toolbar-nav-height: calc(139.5 / var( -rem-base) * 1rem); + - panel-height: calc(54 / var( -rem-base) * 1rem); - toolbar-height: calc(45 / var( -rem-base) * 1rem); - drawer-height: var( -toolbar-height); - body-top: calc(var( -navbar-height) + 1rem); - body-min-height: calc(100vh - var( -navbar-height)); - nav-height: calc(var( body-min-height) - var( -toolbar-height)); + - nav-menu-panel-height: calc(100vh - var( -panel-height)); - nav-height desktop: var( -body-min-height); - nav-panel-height: calc(var( nav-height) - var( -drawer-height)); Review comment: This value needs to be adjusted， the height of the search bar needs to be subtracted from the height to fit the explore drawer ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 18/Jun/20 04:18 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r441959286 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -37，6 +37，12 @@ margin: 1.5rem 0; } +@media screen and (max-width: 1274px) { + .static > h1:first-child { + margin: 4.05556rem 0 1.5rem 0; Review comment: Alright， I believe those values are already calculated within the `vars.css`， I will directly make use of them. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 18/Jun/20 04:18 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r441959286 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -37，6 +37，12 @@ margin: 1.5rem 0; } +@media screen and (max-width: 1274px) { + .static > h1:first-child { + margin: 4.05556rem 0 1.5rem 0; Review comment: Alright， I believe those values are already calculated within the `vars.css`， I will directly make use of them. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 18/Jun/20 04:20 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r441959603 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -532，6 +538，19 @@ padding: 0.75rem; } +.doc aside { + float: right; + margin-left: 1rem; + width: 25rem; + margin-top: 3.5rem; +} + +@media screen and (max-width: 1023px) { + .doc.side aside { + margin-left: -1rem; Review comment: This is for the category issue that I raised. The box has been shifted towards the right， hence this just shifts it back to original position to the left. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 18/Jun/20 04:20 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r441959603 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -532，6 +538，19 @@ padding: 0.75rem; } +.doc aside { + float: right; + margin-left: 1rem; + width: 25rem; + margin-top: 3.5rem; +} + +@media screen and (max-width: 1023px) { + .doc.side aside { + margin-left: -1rem; Review comment: This is for the category issue that I raised. The box has been shifted towards the right， hence this just shifts it back to original position to the left. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 18/Jun/20 04:24 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r441960661 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -394，6 +399，18 @@ body { text-align: right; } +.search-bar { + top: 4.1rem; + position: sticky; + position: -webkit-sticky; Review comment: Yes， we need this 'cause chrome tends to behave in a weird manner at times compared to the other browsers such as firefox and safari. Hence， both the position is required. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 18/Jun/20 04:24 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r441960661 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -394，6 +399，18 @@ body { text-align: right; } +.search-bar { + top: 4.1rem; + position: sticky; + position: -webkit-sticky; Review comment: Yes， we need this 'cause chrome tends to behave in a weird manner at times compared to the other browsers such as firefox and safari. Hence， both the position is required. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 18/Jun/20 04:59 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r441968840 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -6，10 +6，13 @@ window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') const search = document.querySelector('#search') + const condition = window.innerWidth < 1275 + const search = condition ? document.querySelector('.search-small') : document.querySelector('.search') Review comment: I don't know why it seems complex 'cause the ternary operator does make the code readable. And the reason that two searches are included is just for breakpoint differentiation is 'cause if we were to include the single search input that is present within the nav， it will be more complex to position it the way we want in the design ( I will give it a try though ). Also， in my opinion， the use of two different div for the search design for two breakpoints seems much readable and it's easier to differentiate them using CSS as well. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 18/Jun/20 04:59 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r441968840 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -6，10 +6，13 @@ window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') const search = document.querySelector('#search') + const condition = window.innerWidth < 1275 + const search = condition ? document.querySelector('.search-small') : document.querySelector('.search') Review comment: I don't know why it seems complex 'cause the ternary operator does make the code readable. And the reason that two searches are included is just for breakpoint differentiation is 'cause if we were to include the single search input that is present within the nav， it will be more complex to position it the way we want in the design ( I will give it a try though ). Also， in my opinion， the use of two different div for the search design for two breakpoints seems much readable and it's easier to differentiate them using CSS as well. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 18/Jun/20 14:27 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r442268862 ########## File path: antora-ui-camel/src/css/blog.css ########## @@ -25，6 +25，16 @@ article.blog:first-child { margin-top: 3rem; } +@media screen and (max-width: 1023px) { + .blog.list aside { + margin-top: 2.5rem; + } + + article.blog-post:first-child { Review comment: No， this change corresponds particularly to the blog post only. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 18/Jun/20 14:27 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r442268862 ########## File path: antora-ui-camel/src/css/blog.css ########## @@ -25，6 +25，16 @@ article.blog:first-child { margin-top: 3rem; } +@media screen and (max-width: 1023px) { + .blog.list aside { + margin-top: 2.5rem; + } + + article.blog-post:first-child { Review comment: No， this change corresponds particularly to the blog post only. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 18/Jun/20 14:39 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r442277992 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -394，6 +399，18 @@ body { text-align: right; } +.search-bar { + top: 4.1rem; + position: sticky; + position: -webkit-sticky; + z-index: 4; +} + +.navbar-small { + display: none; + background: #fff; Review comment: It is being displayed for width < 1275px. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 18/Jun/20 14:39 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r442277992 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -394，6 +399，18 @@ body { text-align: right; } +.search-bar { + top: 4.1rem; + position: sticky; + position: -webkit-sticky; + z-index: 4; +} + +.navbar-small { + display: none; + background: #fff; Review comment: It is being displayed for width < 1275px. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 18/Jun/20 15:05 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r442297448 ########## File path: antora-ui-camel/src/css/vars.css ########## @@ -131，11 +131，14 @@ --footer-height: 23rem; /* empirically corresponding current design of the foooter */ /* dimensions */ -navbar-height: calc(73 / var(-rem-base) * 1rem); + -toolbar-nav-height: calc(139.5 / var(-rem-base) * 1rem); + -panel-height: calc(54 / var(-rem-base) * 1rem); Review comment: Alright， the toolbar nav height is introduced for the width < 1275 as we introduce the whole search design below the actual navbar including the logo and social icons. Now with the changes， I observed that within the menu panel height under the docs section， the panel items overflow to the footer due to the height defined. Hence， the panel height is used to prevent the overflow. ########## File path: antora-ui-camel/src/css/vars.css ########## @@ -131，11 +131，14 @@ --footer-height: 23rem; /* empirically corresponding current design of the foooter */ /* dimensions */ -navbar-height: calc(73 / var(-rem-base) * 1rem); + -toolbar-nav-height: calc(139.5 / var(-rem-base) * 1rem); + -panel-height: calc(54 / var(-rem-base) * 1rem); Review comment: Alright， the toolbar nav height is introduced for the width < 1275 as we introduce the whole search design below the actual navbar including the logo and social icons. Now with the changes， I observed that within the menu panel height under the docs section， the panel items overflow to the footer due to the height defined. Hence， the panel height is used to prevent the overflow. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 18/Jun/20 15:05 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r442297448 ########## File path: antora-ui-camel/src/css/vars.css ########## @@ -131，11 +131，14 @@ --footer-height: 23rem; /* empirically corresponding current design of the foooter */ /* dimensions */ - navbar-height: calc(73 / var( -rem-base) * 1rem); + - toolbar-nav-height: calc(139.5 / var( -rem-base) * 1rem); + - panel-height: calc(54 / var( -rem-base) * 1rem); Review comment: Alright， the toolbar nav height is introduced for the width < 1275 as we introduce the whole search design below the actual navbar including the logo and social icons. Now with the changes， I observed that within the menu panel height under the docs section， the panel items overflow to the footer due to the height defined. Hence， the panel height is used to prevent the overflow. ########## File path: antora-ui-camel/src/css/vars.css ########## @@ -131，11 +131，14 @@ --footer-height: 23rem; /* empirically corresponding current design of the foooter */ /* dimensions */ - navbar-height: calc(73 / var( -rem-base) * 1rem); + - toolbar-nav-height: calc(139.5 / var( -rem-base) * 1rem); + - panel-height: calc(54 / var( -rem-base) * 1rem); Review comment: Alright， the toolbar nav height is introduced for the width < 1275 as we introduce the whole search design below the actual navbar including the logo and social icons. Now with the changes， I observed that within the menu panel height under the docs section， the panel items overflow to the footer due to the height defined. Hence， the panel height is used to prevent the overflow. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 18/Jun/20 18:01 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r442406788 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -25，17 +28，23 @@ } } + search.addEventListener('click'， function (e) { + e.stopPropagation() + } ) + search.addEventListener( 'keyup'， debounce((key) => { + if (condition) document.querySelector('.navbar-burger').style.marginTop = '1rem' Review comment: Yes， I experimented and it is possible through HTML and CSS only. I will push the changes for the same. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 18/Jun/20 18:01 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r442406788 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -25，17 +28，23 @@ } } + search.addEventListener('click'， function (e) { + e.stopPropagation() + } ) + search.addEventListener( 'keyup'， debounce((key) => { + if (condition) document.querySelector('.navbar-burger').style.marginTop = '1rem' Review comment: Yes， I experimented and it is possible through HTML and CSS only. I will push the changes for the same. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 18/Jun/20 18:24 zregvart commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r442419344 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -394，6 +399，18 @@ body { text-align: right; } +.search-bar { + top: 4.1rem; + position: sticky; + position: -webkit-sticky; Review comment: Should be the same as `sticky`， it can be used unprefixed according to [caniuse.com](https://caniuse.com/#feat=css-sticky) – 91.35% browsers don't require the prefix. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 18/Jun/20 18:24 zregvart commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r442419344 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -394，6 +399，18 @@ body { text-align: right; } +.search-bar { + top: 4.1rem; + position: sticky; + position: -webkit-sticky; Review comment: Should be the same as `sticky`， it can be used unprefixed according to [caniuse.com] ( https://caniuse.com/#feat=css-sticky ) – 91.35% browsers don't require the prefix. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 18/Jun/20 18:56 zregvart commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-646246638 @AemieJ I've created [this JSFiddle](https://jsfiddle.net/ry2Lhwtd/) to illustrate how this can be done with CSS only. The key is that in flex layout you can specify order of the elements， and that a break can be forced after an element pushing the search div to second row. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 18/Jun/20 18:56 zregvart commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-646246638 @AemieJ I've created [this JSFiddle] ( https://jsfiddle.net/ry2Lhwtd/ ) to illustrate how this can be done with CSS only. The key is that in flex layout you can specify order of the elements， and that a break can be forced after an element pushing the search div to second row. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 19/Jun/20 05:25 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-646442106 > @AemieJ I've created [this JSFiddle](https://jsfiddle.net/ry2Lhwtd/) to illustrate how this can be done with CSS only. The key is that in flex layout you can specify the order of the elements and that a break can be forced after an element pushing the search div to the second row. I tried using the method you described in jsfiddle. However， in the output， I observed that at a point it will only push down when there is no more space to be accommodated in the main navbar. I observed at a point where only the navbar is pushed down and the search bar is after the social icon due to ordering， I don't think we want that kind of behavior. ![behavior-flex](https://user-images.githubusercontent.com/44139348/85099315-b98ada00-b21a-11ea-9eb9-a756563b9ea3.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 19/Jun/20 05:25 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-646442106 > @AemieJ I've created [this JSFiddle] ( https://jsfiddle.net/ry2Lhwtd/ ) to illustrate how this can be done with CSS only. The key is that in flex layout you can specify the order of the elements and that a break can be forced after an element pushing the search div to the second row. I tried using the method you described in jsfiddle. However， in the output， I observed that at a point it will only push down when there is no more space to be accommodated in the main navbar. I observed at a point where only the navbar is pushed down and the search bar is after the social icon due to ordering， I don't think we want that kind of behavior. ! [behavior-flex] ( https://user-images.githubusercontent.com/44139348/85099315-b98ada00-b21a-11ea-9eb9-a756563b9ea3.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 19/Jun/20 13:53 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-646649037 @zregvart Another method if we don't want to make use of two search divs， we could increase the height of the navbar and use the translate property of CSS to control it. What do you think about that? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 19/Jun/20 13:53 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-646649037 @zregvart Another method if we don't want to make use of two search divs， we could increase the height of the navbar and use the translate property of CSS to control it. What do you think about that? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 20/Jun/20 06:26 AemieJ edited a comment on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-646649037 @zregvart Another method if we don't want to make use of two search divs， we could increase the height of the navbar and use the translate property of CSS to control it. What do you think about that? ![transform-method](https://user-images.githubusercontent.com/44139348/85195030-d4c61a00-b2ec-11ea-8508-34894a46ee04.png) In this， I just tweaked the translate values to achieve this. I am aware the logo isn't visible but the reason is the logo is used as background image so it's easily overlayed. I was thinking of using the `img` within the `a` tag for it to be visible but I plan to make changes if you're comfortable with the use of transform property of CSS alone. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 20/Jun/20 06:26 AemieJ edited a comment on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-646649037 @zregvart Another method if we don't want to make use of two search divs， we could increase the height of the navbar and use the translate property of CSS to control it. What do you think about that? ! [transform-method] ( https://user-images.githubusercontent.com/44139348/85195030-d4c61a00-b2ec-11ea-8508-34894a46ee04.png ) In this， I just tweaked the translate values to achieve this. I am aware the logo isn't visible but the reason is the logo is used as background image so it's easily overlayed. I was thinking of using the `img` within the `a` tag for it to be visible but I plan to make changes if you're comfortable with the use of transform property of CSS alone. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Aemie added a comment - 20/Jun/20 06:37 Zoran Regvart Maria Arias de Reyna Dominguez Aashna Jena There has been a discussion on PR to not make use of two separate divs to achieve the search design. Zoran Regvart suggested the idea of using order as CSS property to use， however， there was a loophole in it as discussed in the PR but was clever so I thought of using a single CSS property to achieve the same design and I landed up with the translate property of CSS， there are some permanent values to tweak. In this， I just tweaked the translate values to achieve this. I am aware the logo isn't visible but the reason is the logo is used as a background image so it's easily overlayed. I was thinking of using them img within the a tag for it to be visible but I plan to make changes if you're comfortable with the use of transform property of CSS alone. What are your opinions on it? Show Aemie added a comment - 20/Jun/20 06:37 Zoran Regvart Maria Arias de Reyna Dominguez Aashna Jena There has been a discussion on PR to not make use of two separate divs to achieve the search design. Zoran Regvart suggested the idea of using order as CSS property to use， however， there was a loophole in it as discussed in the PR but was clever so I thought of using a single CSS property to achieve the same design and I landed up with the translate property of CSS， there are some permanent values to tweak. In this， I just tweaked the translate values to achieve this. I am aware the logo isn't visible but the reason is the logo is used as a background image so it's easily overlayed. I was thinking of using them img within the a tag for it to be visible but I plan to make changes if you're comfortable with the use of transform property of CSS alone. What are your opinions on it? Hide Permalink ASF GitHub Bot added a comment - 20/Jun/20 20:23 zregvart commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-647041656 @AemieJ I don't think CSS transform should be used for responsive design. I think responsive design should be based on flexbox. Can you research the example I provided and see if it can be applied to the website? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 20/Jun/20 20:23 zregvart commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-647041656 @AemieJ I don't think CSS transform should be used for responsive design. I think responsive design should be based on flexbox. Can you research the example I provided and see if it can be applied to the website? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 21/Jun/20 07:19 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-647089895 @zregvart I found a method using flex-box on [this jsfiddle](https://jsfiddle.net/kh0n9yge/)， please check if you find any loophole. Else， I will move forward on implementing this on the site. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 21/Jun/20 07:19 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-647089895 @zregvart I found a method using flex-box on [this jsfiddle] ( https://jsfiddle.net/kh0n9yge/ )， please check if you find any loophole. Else， I will move forward on implementing this on the site. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 21/Jun/20 07:20 AemieJ edited a comment on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-647089895 @zregvart I found a method using flex-box by creating [this jsfiddle](https://jsfiddle.net/kh0n9yge/)， please check if you find any loophole. Else， I will move forward on implementing this on the site. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 21/Jun/20 07:20 AemieJ edited a comment on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-647089895 @zregvart I found a method using flex-box by creating [this jsfiddle] ( https://jsfiddle.net/kh0n9yge/ )， please check if you find any loophole. Else， I will move forward on implementing this on the site. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 21/Jun/20 15:39 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-647144105 @zregvart I worked with the flexbox method and applied it to the website， it works out neatly. Please take a look at it and do let me know if anything further is required to be done. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 21/Jun/20 15:39 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-647144105 @zregvart I worked with the flexbox method and applied it to the website， it works out neatly. Please take a look at it and do let me know if anything further is required to be done. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 26/Jun/20 09:07 zregvart commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r445436538 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -532，6 +538，19 @@ padding: 0.75rem; } +.doc aside { + float: right; + margin-left: 1rem; + width: 25rem; + margin-top: 3.5rem; +} + +@media screen and (max-width: 1023px) { + .doc.side aside { + margin-left: -1rem; Review comment: That sounds like a workaround， I'd prefer that we don't implement workarounds， they tend to get back at us. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -59，18 +65，26 @@ body { height: var(--navbar-height); } +@media screen and (max-width: 1277px) { + .navbar-brand { + flex-wrap: wrap; + } +} + .navbar-burger { color: var(--navbar-font-color); background: none; + background: var(--navbar-background); border: none; outline: none; line-height: 1; height: var(--navbar-height); + width: 2rem; + height: 2rem; + top: 1.25rem; + float: right; Review comment: Not sure if we want to use float and flex on the same element， do we need this? ########## File path: antora-ui-camel/src/css/header.css ########## @@ -417，18 +445，18 @@ body { } } -#search-cancel { +.search-cancel { position: relative; bottom: calc(50% - 0.15rem); - left: calc(100% - 1.25rem); + left: calc(100% - 1.5rem); height: 1rem; display: none; cursor: pointer; } -#search_results { +.search-results { Review comment: Now we have only one element， should we target by id instead? ########## File path: antora-ui-camel/src/css/header.css ########## @@ -28，7 +34，7 @@ body { padding: 0 0.375rem; } -@media screen and (min-width: 1024px) { +@media screen and (min-width: 1278px) { Review comment: I wonder if we should wait for #397 to get merged so we don't need to change this breakpoint ########## File path: antora-ui-camel/src/css/header.css ########## @@ -59，18 +65，26 @@ body { height: var(--navbar-height); } +@media screen and (max-width: 1277px) { + .navbar-brand { + flex-wrap: wrap; Review comment: I think this is causing some issues on Firefox， oddly not in the responsive tool but when the browser is resized. Not sure if we can prevent this. When the browser is resized: ![Screenshot_2020-06-26 Home - Apache Camel](https://user-images.githubusercontent.com/1306050/85838701-404f3200-b79a-11ea-8579-8cd8b66dac5a.png) In responsive tool: ![Screenshot_2020-06-26 Home - Apache Camel(1)](https://user-images.githubusercontent.com/1306050/85838691-3c231480-b79a-11ea-8af9-9a9c17c3c568.png) ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -532，6 +538，19 @@ padding: 0.75rem; } +.doc aside { + float: right; Review comment: I don think this `float` is needed here ########## File path: antora-ui-camel/src/css/header.css ########## @@ -59，18 +65，26 @@ body { height: var(--navbar-height); } +@media screen and (max-width: 1277px) { + .navbar-brand { + flex-wrap: wrap; + } +} + .navbar-burger { color: var(--navbar-font-color); background: none; + background: var(--navbar-background); border: none; outline: none; line-height: 1; height: var(--navbar-height); Review comment: Could we use `var(--navbar-height)` instead of `2rem` below? ########## File path: antora-ui-camel/src/css/header.css ########## @@ -59，18 +65，26 @@ body { height: var(--navbar-height); } +@media screen and (max-width: 1277px) { + .navbar-brand { + flex-wrap: wrap; + } +} + .navbar-burger { color: var(--navbar-font-color); background: none; + background: var(--navbar-background); Review comment: Not sure if this is needed， doesn't seem to make a difference. Perhaps I'm missing something. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -443，19 +471，19 @@ body { padding-right: 0.5rem; } -#search_results dt { +.search-results dt { padding: 0.5rem; color: var(--color-camel-orange); text-transform: uppercase; border-top: 1px solid var(--navbar-search-result-separator); border-bottom: 1px solid var(--navbar-search-result-separator); } -#search_results a { +.search-results a { Review comment: Now we have only one element， should we target by id instead? ########## File path: antora-ui-camel/src/css/header.css ########## @@ -80，20 +94，20 @@ body { .navbar-burger span { background: var(--navbar-font-color); display: block; height: 1px; + height: 2px; Review comment: Thinner looked more elegant to me， not sure if we need to make it thicker. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -417，18 +445，18 @@ body { } } -#search-cancel { +.search-cancel { Review comment: Now we have only one element， should we target by id instead? ########## File path: antora-ui-camel/src/css/header.css ########## @@ -156，14 +172，19 @@ body { margin: 0.25rem 0; } -@media screen and (max-width: 1023px) and (min-width: 480px) { +@media screen and (max-width: 1277px) { + .navbar-menu.is-active { + top: 7.75rem; Review comment: I think we should derive this from the navbar height， I can see that this will go out of alignment if we change the navbar height variable. Perhaps using the variable here or calculating the hight would be better. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -443，19 +471，19 @@ body { padding-right: 0.5rem; } -#search_results dt { +.search-results dt { Review comment: Now we have only one element， should we target by id instead? ########## File path: antora-ui-camel/src/css/nav.css ########## @@ -24，13 +24，19 @@ } } +@media screen and (max-width: 1023px) { + .nav-container { + top: 7.75rem; Review comment: Perhaps derive a value using `calc` or use a variable here. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -475，7 +503，7 @@ body { color: var(--color-jet-50); } -.results-hidden #search_results { +.results-hidden .search-results { Review comment: Now we have only one element， should we target by id instead? ########## File path: antora-ui-camel/src/css/nav.css ########## @@ -44，10 +50，25 @@ @media screen and (min-width: 1024px) { .nav { top: var(--navbar-height); + height: var(--nav-menu-panel-height); + } + + .nav-category { + top: 8.5rem; box-shadow: none; position: sticky; height: var(--nav-height--desktop); } + + .nav-components { + top: 6.75rem; Review comment: Perhaps derive a value using calc or use a variable here. ########## File path: antora-ui-camel/src/css/nav.css ########## @@ 118，6 +152，12 @@ html.is-clipped-nav { overflow-y: auto; } +@media screen and (max-width: 1277px) { + .nav-menu { + top: 3.5rem; Review comment: Perhaps derive a value using calc or use a variable here. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -387，11 +407，19 @@ body { .navbar-fill { flex-grow: 1; + order: 3; +} + +.break-row { + display: none; + flex-basis: 100%; + height: 0; Review comment: Do we need `height: 0` with `display: none`? ########## File path: antora-ui-camel/src/css/nav.css ########## @@ -44，10 +50，25 @@ @media screen and (min-width: 1024px) { .nav { top: var(--navbar-height); + height: var(--nav-menu-panel-height); + } + + .nav-category { + top: 8.5rem; Review comment: Perhaps derive a value using calc or use a variable here. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -443，19 +471，19 @@ body { padding-right: 0.5rem; } -#search_results dt { +.search-results dt { padding: 0.5rem; color: var(--color-camel-orange); text-transform: uppercase; border-top: 1px solid var(--navbar-search-result-separator); border-bottom: 1px solid var(--navbar-search-result-separator); } -#search_results a { +.search-results a { padding: 0.5rem; } -#search_results a:hover { +.search-results a:hover { Review comment: Now we have only one element， should we target by id instead? ########## File path: antora-ui-camel/src/partials/header-content.hbs ########## @@ -6，32 +6，39 @@ <div class="navbar-end"> #withMenuData #each @items #if children <div class="navbar-item has-dropdown is-hoverable"> + #if children + <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link navbar-topics" href="#">name</a> <div class="navbar-dropdown"> #each children <a class="navbar-item" href="url">name</a> /each </div> </div> else <a class="navbar-item navbar-topics" href="url">name</a> /if + </div> + else + <a class="navbar-item navbar-topics" href="url">name</a> + /if /each /withMenuData </div> </div> <div class="navbar-fill"></div> + <div class="break-row"></div> <div class="navbar-search results-hidden"> <input id="search" class="search" placeholder="Search" autocomplete="off"> <img src= "/_/img/cancel.svg" alt="Clear" id="search-cancel"> <div id="search_results"></div> + <img src= "/_/img/cancel.svg" alt="Clear" id="search-cancel" class="search-cancel"> + <div id="search_results" class="search-results"></div> Review comment: Do we need the `search-results` class here? ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -6，10 +6，12 @@ window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') const search = document.querySelector('#search') + const search = document.querySelector('.search') const container = search.parentNode const results = document.querySelector('#search_results') const cancel = document.querySelector('#search-cancel') + const results = document.querySelector('.search-results') + const cancel = document.querySelector('.search-cancel') + const className = 'navbar-search' + const hiddenClass = 'navbar-search results-hidden' Review comment: Do we still need these changes to the JS code now that we have only one search input? ########## File path: antora-ui-camel/src/partials/header-content.hbs ########## @@ -6，32 +6，39 @@ <div class="navbar-end"> #withMenuData #each @items #if children <div class="navbar-item has-dropdown is-hoverable"> + #if children + <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link navbar-topics" href="#">name</a> <div class="navbar-dropdown"> #each children <a class="navbar-item" href="url">name</a> /each </div> </div> else <a class="navbar-item navbar-topics" href="url">name</a> /if + </div> + else + <a class="navbar-item navbar-topics" href="url">name</a> + /if /each /withMenuData </div> </div> <div class="navbar-fill"></div> + <div class="break-row"></div> <div class="navbar-search results-hidden"> <input id="search" class="search" placeholder="Search" autocomplete="off"> <img src= "/_/img/cancel.svg" alt="Clear" id="search-cancel"> <div id="search_results"></div> + <img src= "/_/img/cancel.svg" alt="Clear" id="search-cancel" class="search-cancel"> Review comment: Do we need the `search-cancel` class here? ########## File path: antora-ui-camel/src/partials/nav.hbs ########## @@ -1，5 +1，9 @@ <div class="nav-container"#if page.component data-component="page.component.name" data-version="page.version"/if> + #if (eq page.component.name 'components') + <aside class="nav nav-components"> + else <aside class="nav"> + /if Review comment: I think this could be simpler， all `aside.nav` should cater to the same positioning， not sure why components would be different， perhaps the parent of this aside (`.nav-container`) should be positioned instead. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 26/Jun/20 09:07 zregvart commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r445436538 ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -532，6 +538，19 @@ padding: 0.75rem; } +.doc aside { + float: right; + margin-left: 1rem; + width: 25rem; + margin-top: 3.5rem; +} + +@media screen and (max-width: 1023px) { + .doc.side aside { + margin-left: -1rem; Review comment: That sounds like a workaround， I'd prefer that we don't implement workarounds， they tend to get back at us. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -59，18 +65，26 @@ body { height: var(--navbar-height); } +@media screen and (max-width: 1277px) { + .navbar-brand { + flex-wrap: wrap; + } +} + .navbar-burger { color: var(--navbar-font-color); background: none; + background: var(--navbar-background); border: none; outline: none; line-height: 1; height: var(--navbar-height); + width: 2rem; + height: 2rem; + top: 1.25rem; + float: right; Review comment: Not sure if we want to use float and flex on the same element， do we need this? ########## File path: antora-ui-camel/src/css/header.css ########## @@ -417，18 +445，18 @@ body { } } -#search-cancel { +.search-cancel { position: relative; bottom: calc(50% - 0.15rem); - left: calc(100% - 1.25rem); + left: calc(100% - 1.5rem); height: 1rem; display: none; cursor: pointer; } -#search_results { +.search-results { Review comment: Now we have only one element， should we target by id instead? ########## File path: antora-ui-camel/src/css/header.css ########## @@ -28，7 +34，7 @@ body { padding: 0 0.375rem; } -@media screen and (min-width: 1024px) { +@media screen and (min-width: 1278px) { Review comment: I wonder if we should wait for #397 to get merged so we don't need to change this breakpoint ########## File path: antora-ui-camel/src/css/header.css ########## @@ -59，18 +65，26 @@ body { height: var(--navbar-height); } +@media screen and (max-width: 1277px) { + .navbar-brand { + flex-wrap: wrap; Review comment: I think this is causing some issues on Firefox， oddly not in the responsive tool but when the browser is resized. Not sure if we can prevent this. When the browser is resized: ![Screenshot_2020-06-26 Home - Apache Camel](https://user-images.githubusercontent.com/1306050/85838701-404f3200-b79a-11ea-8579-8cd8b66dac5a.png) In responsive tool: ![Screenshot_2020-06-26 Home - Apache Camel(1)](https://user-images.githubusercontent.com/1306050/85838691-3c231480-b79a-11ea-8af9-9a9c17c3c568.png) ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -532，6 +538，19 @@ padding: 0.75rem; } +.doc aside { + float: right; Review comment: I don think this `float` is needed here ########## File path: antora-ui-camel/src/css/header.css ########## @@ -59，18 +65，26 @@ body { height: var(--navbar-height); } +@media screen and (max-width: 1277px) { + .navbar-brand { + flex-wrap: wrap; + } +} + .navbar-burger { color: var(--navbar-font-color); background: none; + background: var(--navbar-background); border: none; outline: none; line-height: 1; height: var(--navbar-height); Review comment: Could we use `var(--navbar-height)` instead of `2rem` below? ########## File path: antora-ui-camel/src/css/header.css ########## @@ -59，18 +65，26 @@ body { height: var(--navbar-height); } +@media screen and (max-width: 1277px) { + .navbar-brand { + flex-wrap: wrap; + } +} + .navbar-burger { color: var(--navbar-font-color); background: none; + background: var(--navbar-background); Review comment: Not sure if this is needed， doesn't seem to make a difference. Perhaps I'm missing something. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -443，19 +471，19 @@ body { padding-right: 0.5rem; } -#search_results dt { +.search-results dt { padding: 0.5rem; color: var(--color-camel-orange); text-transform: uppercase; border-top: 1px solid var(--navbar-search-result-separator); border-bottom: 1px solid var(--navbar-search-result-separator); } -#search_results a { +.search-results a { Review comment: Now we have only one element， should we target by id instead? ########## File path: antora-ui-camel/src/css/header.css ########## @@ -80，20 +94，20 @@ body { .navbar-burger span { background: var(--navbar-font-color); display: block; height: 1px; + height: 2px; Review comment: Thinner looked more elegant to me， not sure if we need to make it thicker. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -417，18 +445，18 @@ body { } } -#search-cancel { +.search-cancel { Review comment: Now we have only one element， should we target by id instead? ########## File path: antora-ui-camel/src/css/header.css ########## @@ -156，14 +172，19 @@ body { margin: 0.25rem 0; } -@media screen and (max-width: 1023px) and (min-width: 480px) { +@media screen and (max-width: 1277px) { + .navbar-menu.is-active { + top: 7.75rem; Review comment: I think we should derive this from the navbar height， I can see that this will go out of alignment if we change the navbar height variable. Perhaps using the variable here or calculating the hight would be better. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -443，19 +471，19 @@ body { padding-right: 0.5rem; } -#search_results dt { +.search-results dt { Review comment: Now we have only one element， should we target by id instead? ########## File path: antora-ui-camel/src/css/nav.css ########## @@ -24，13 +24，19 @@ } } +@media screen and (max-width: 1023px) { + .nav-container { + top: 7.75rem; Review comment: Perhaps derive a value using `calc` or use a variable here. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -475，7 +503，7 @@ body { color: var(--color-jet-50); } -.results-hidden #search_results { +.results-hidden .search-results { Review comment: Now we have only one element， should we target by id instead? ########## File path: antora-ui-camel/src/css/nav.css ########## @@ -44，10 +50，25 @@ @media screen and (min-width: 1024px) { .nav { top: var(--navbar-height); + height: var(--nav-menu-panel-height); + } + + .nav-category { + top: 8.5rem; box-shadow: none; position: sticky; height: var(--nav-height--desktop); } + + .nav-components { + top: 6.75rem; Review comment: Perhaps derive a value using calc or use a variable here. ########## File path: antora-ui-camel/src/css/nav.css ########## @@ 118，6 +152，12 @@ html.is-clipped -nav { overflow-y: auto; } +@media screen and (max-width: 1277px) { + .nav-menu { + top: 3.5rem; Review comment: Perhaps derive a value using calc or use a variable here. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -387，11 +407，19 @@ body { .navbar-fill { flex-grow: 1; + order: 3; +} + +.break-row { + display: none; + flex-basis: 100%; + height: 0; Review comment: Do we need `height: 0` with `display: none`? ########## File path: antora-ui-camel/src/css/nav.css ########## @@ -44，10 +50，25 @@ @media screen and (min-width: 1024px) { .nav { top: var(--navbar-height); + height: var(--nav-menu-panel-height); + } + + .nav-category { + top: 8.5rem; Review comment: Perhaps derive a value using calc or use a variable here. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -443，19 +471，19 @@ body { padding-right: 0.5rem; } -#search_results dt { +.search-results dt { padding: 0.5rem; color: var(--color-camel-orange); text-transform: uppercase; border-top: 1px solid var(--navbar-search-result-separator); border-bottom: 1px solid var(--navbar-search-result-separator); } -#search_results a { +.search-results a { padding: 0.5rem; } -#search_results a:hover { +.search-results a:hover { Review comment: Now we have only one element， should we target by id instead? ########## File path: antora-ui-camel/src/partials/header-content.hbs ########## @@ -6，32 +6，39 @@ <div class="navbar-end"> #withMenuData #each @items #if children <div class="navbar-item has-dropdown is-hoverable"> + #if children + <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link navbar-topics" href="#"> name </a> <div class="navbar-dropdown"> #each children <a class="navbar-item" href=" url "> name </a> /each </div> </div> else <a class="navbar-item navbar-topics" href=" url "> name </a> /if + </div> + else + <a class="navbar-item navbar-topics" href=" url "> name </a> + /if /each /withMenuData </div> </div> <div class="navbar-fill"></div> + <div class="break-row"></div> <div class="navbar-search results-hidden"> <input id="search" class="search" placeholder="Search" autocomplete="off"> <img src= "/_/img/cancel.svg" alt="Clear" id="search-cancel"> <div id="search_results"></div> + <img src= "/_/img/cancel.svg" alt="Clear" id="search-cancel" class="search-cancel"> + <div id="search_results" class="search-results"></div> Review comment: Do we need the `search-results` class here? ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -6，10 +6，12 @@ window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') const search = document.querySelector('#search') + const search = document.querySelector('.search') const container = search.parentNode const results = document.querySelector('#search_results') const cancel = document.querySelector('#search-cancel') + const results = document.querySelector('.search-results') + const cancel = document.querySelector('.search-cancel') + const className = 'navbar-search' + const hiddenClass = 'navbar-search results-hidden' Review comment: Do we still need these changes to the JS code now that we have only one search input? ########## File path: antora-ui-camel/src/partials/header-content.hbs ########## @@ -6，32 +6，39 @@ <div class="navbar-end"> #withMenuData #each @items #if children <div class="navbar-item has-dropdown is-hoverable"> + #if children + <div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link navbar-topics" href="#"> name </a> <div class="navbar-dropdown"> #each children <a class="navbar-item" href=" url "> name </a> /each </div> </div> else <a class="navbar-item navbar-topics" href=" url "> name </a> /if + </div> + else + <a class="navbar-item navbar-topics" href=" url "> name </a> + /if /each /withMenuData </div> </div> <div class="navbar-fill"></div> + <div class="break-row"></div> <div class="navbar-search results-hidden"> <input id="search" class="search" placeholder="Search" autocomplete="off"> <img src= "/_/img/cancel.svg" alt="Clear" id="search-cancel"> <div id="search_results"></div> + <img src= "/_/img/cancel.svg" alt="Clear" id="search-cancel" class="search-cancel"> Review comment: Do we need the `search-cancel` class here? ########## File path: antora-ui-camel/src/partials/nav.hbs ########## @@ -1，5 +1，9 @@ <div class="nav-container" #if page.component data-component=" page.component.name " data-version=" page.version " /if > + #if (eq page.component.name 'components') + <aside class="nav nav-components"> + else <aside class="nav"> + /if Review comment: I think this could be simpler， all `aside.nav` should cater to the same positioning， not sure why components would be different， perhaps the parent of this aside (`.nav-container`) should be positioned instead. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 26/Jun/20 09:14 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r446066335 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -387，11 +407，19 @@ body { .navbar-fill { flex-grow: 1; + order: 3; +} + +.break-row { + display: none; + flex-basis: 100%; + height: 0; Review comment: The height: 0 is the reason the row will break. The display: none is only present as we don't need this change above the breakpoint. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 26/Jun/20 09:14 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r446066335 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -387，11 +407，19 @@ body { .navbar-fill { flex-grow: 1; + order: 3; +} + +.break-row { + display: none; + flex-basis: 100%; + height: 0; Review comment: The height: 0 is the reason the row will break. The display: none is only present as we don't need this change above the breakpoint. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 26/Jun/20 09:14 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r446066727 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -417，18 +445，18 @@ body { } } -#search-cancel { +.search-cancel { Review comment: @zregvart yes， I will change it for both search cancel and search results to use it by Id directly. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 26/Jun/20 09:14 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r446066727 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -417，18 +445，18 @@ body { } } -#search-cancel { +.search-cancel { Review comment: @zregvart yes， I will change it for both search cancel and search results to use it by Id directly. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 26/Jun/20 09:22 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-650080705 @zregvart I will take care of it in the future PR to only include one change. Other than that， as I have read your comments I have to make use of variables and revert the algolia search bundle to normal as well as remove class names for search cancel and search results. I don't realize what part is complex yet as I now use only one input and make use of flex box and everything else is css based on the breakpoint? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 26/Jun/20 09:22 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-650080705 @zregvart I will take care of it in the future PR to only include one change. Other than that， as I have read your comments I have to make use of variables and revert the algolia search bundle to normal as well as remove class names for search cancel and search results. I don't realize what part is complex yet as I now use only one input and make use of flex box and everything else is css based on the breakpoint? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 26/Jun/20 09:30 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r446074597 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -28，7 +34，7 @@ body { padding: 0 0.375rem; } -@media screen and (min-width: 1024px) { +@media screen and (min-width: 1278px) { Review comment: Alright， yes as the navbar menu will be changed， the breakpoint will change accordingly. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 26/Jun/20 09:30 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r446074597 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -28，7 +34，7 @@ body { padding: 0 0.375rem; } -@media screen and (min-width: 1024px) { +@media screen and (min-width: 1278px) { Review comment: Alright， yes as the navbar menu will be changed， the breakpoint will change accordingly. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 26/Jun/20 09:30 zregvart commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-650085261 > I don't realize what part is complex yet as I now use only one input and make use of flex box and everything else is css based on the breakpoint? The complexity I see is from adding conditionals to the navigation panel rendering the components reference and that a lot of positioning seems to be done by finding the values and putting them in， rather than deriving them from variables/using `calc`. What I see as a problem is that if we change， say the height of the navbar， this positioning needs to be recalculated again. There's also the element that was added to ensure the break on smaller screens， I'm not sure that it's needed. Using flex layout with `float`. Overall if you look at the changes here and the outcome from those it seems like a lot of changes for not that many changes in the output. I think if we were to redo this knowing the principles that are needed for this change， carefully adding/changing only the CSS that needs to be changed， we'd end up with 33%-50% of the CSS we have now. Anyhow don't let that discourage you， this is excellent work， keep polishing this， we can use a lot of it and hopefully merge it soon. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 26/Jun/20 09:30 zregvart commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-650085261 > I don't realize what part is complex yet as I now use only one input and make use of flex box and everything else is css based on the breakpoint? The complexity I see is from adding conditionals to the navigation panel rendering the components reference and that a lot of positioning seems to be done by finding the values and putting them in， rather than deriving them from variables/using `calc`. What I see as a problem is that if we change， say the height of the navbar， this positioning needs to be recalculated again. There's also the element that was added to ensure the break on smaller screens， I'm not sure that it's needed. Using flex layout with `float`. Overall if you look at the changes here and the outcome from those it seems like a lot of changes for not that many changes in the output. I think if we were to redo this knowing the principles that are needed for this change， carefully adding/changing only the CSS that needs to be changed， we'd end up with 33%-50% of the CSS we have now. Anyhow don't let that discourage you， this is excellent work， keep polishing this， we can use a lot of it and hopefully merge it soon. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 26/Jun/20 09:30 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r446075048 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -59，18 +65，26 @@ body { height: var(--navbar-height); } +@media screen and (max-width: 1277px) { + .navbar-brand { + flex-wrap: wrap; Review comment: I will look into this as I didn't face this issue. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 26/Jun/20 09:30 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r446075048 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -59，18 +65，26 @@ body { height: var(--navbar-height); } +@media screen and (max-width: 1277px) { + .navbar-brand { + flex-wrap: wrap; Review comment: I will look into this as I didn't face this issue. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 26/Jun/20 09:43 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r446075048 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -59，18 +65，26 @@ body { height: var(--navbar-height); } +@media screen and (max-width: 1277px) { + .navbar-brand { + flex-wrap: wrap; Review comment: I found what's causing this issue. I will fix it in my next commit. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 26/Jun/20 09:43 AemieJ commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r446075048 ########## File path: antora-ui-camel/src/css/header.css ########## @@ -59，18 +65，26 @@ body { height: var(--navbar-height); } +@media screen and (max-width: 1277px) { + .navbar-brand { + flex-wrap: wrap; Review comment: I found what's causing this issue. I will fix it in my next commit. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 26/Jun/20 09:45 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-650091358 @zregvart okay as I know what needs to be done with flex box I will try to do this from scratch. It might take a day or 2. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 26/Jun/20 09:45 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-650091358 @zregvart okay as I know what needs to be done with flex box I will try to do this from scratch. It might take a day or 2. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 27/Jun/20 12:53 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-650557635 @zregvart I have done highly specific changes to it from scratch solving each part. Although the breakpoint is defined right now is at 1278px but let's wait for #397 to get merged， then I could change the breakpoint for it. It works fine as I have checked. Please check for any loopholes if you can find. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 27/Jun/20 12:53 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-650557635 @zregvart I have done highly specific changes to it from scratch solving each part. Although the breakpoint is defined right now is at 1278px but let's wait for #397 to get merged， then I could change the breakpoint for it. It works fine as I have checked. Please check for any loopholes if you can find. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 28/Jun/20 05:06 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-650697264 @zregvart With the current changes to the navbar menu， the breakpoint changes from 1278px to 1175px. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 28/Jun/20 05:06 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-650697264 @zregvart With the current changes to the navbar menu， the breakpoint changes from 1278px to 1175px. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 28/Jun/20 22:37 zregvart commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-650831572 @AemieJ what if we shrunk the logo width in the nav bar to 4rem and reduced the padding between menu items from 2rem to 1.5rem， then at 1024px we can still have the big menu: ![Screenshot_2020-06-29 Home - Apache Camel](https://user-images.githubusercontent.com/1306050/85960045-af967300-b9a0-11ea-9ab3-e8232c9cd55e.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 28/Jun/20 22:37 zregvart commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-650831572 @AemieJ what if we shrunk the logo width in the nav bar to 4rem and reduced the padding between menu items from 2rem to 1.5rem， then at 1024px we can still have the big menu: ! [Screenshot_2020-06-29 Home - Apache Camel] ( https://user-images.githubusercontent.com/1306050/85960045-af967300-b9a0-11ea-9ab3-e8232c9cd55e.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 29/Jun/20 02:42 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-650871258 @zregvart that's a good suggestion if we just want the logo to appear in the nav menu. It will space as well. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 29/Jun/20 02:42 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-650871258 @zregvart that's a good suggestion if we just want the logo to appear in the nav menu. It will space as well. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 29/Jun/20 05:16 AemieJ edited a comment on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-650871258 @zregvart that's a good suggestion if we just want the logo to appear in the nav menu. With that， I changed breakpoint to 1024 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 29/Jun/20 05:16 AemieJ edited a comment on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-650871258 @zregvart that's a good suggestion if we just want the logo to appear in the nav menu. With that， I changed breakpoint to 1024 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 29/Jun/20 07:16 Delawen commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-650978244 That's good news! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 29/Jun/20 07:16 Delawen commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-650978244 That's good news! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 29/Jun/20 13:27 aashnajena commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-651119961 Looks good! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 29/Jun/20 13:27 aashnajena commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-651119961 Looks good! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 30/Jun/20 23:46 zregvart commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r448032410 ########## File path: antora-ui-camel/src/css/blog.css ########## @@ -223，3 +223，13 @@ article.blog p { .blog .page-item.active a { color: var(--color-white); } + +@media screen and (max-width: 1023px) { + article.blog:first-child { Review comment: This selector might be a bit problematic as it might target anything (including an element that's absolutely positioned). I'm fairly certain that to accommodate the second row on the top level navigation we need to move or add the padding/margin globaly. I think this change needs to go to `base.css` and cover all pages. We should also base this from the `-navbar-height` variable like we do for the `-body-top`. Remember these variables can change and then `5rem` is not accurate. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -387，11 +407，19 @@ body { .navbar-fill { flex-grow: 1; + order: 3; +} + +.break-row { + display: none; + flex-basis: 100%; + height: 0; Review comment: I'm not sure that elements that have `display:none` have a hight， do they? ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -37，12 +37，18 @@ margin: 1.5rem 0; } -@media screen and (min-width: 769px) { +@media screen and (min-width: 1024px) { .doc > h1.page:first-child { margin-top: 2.5rem; } } +@media screen and (max-width: 1023px) { + .doc > h1.page:first-child { Review comment: Could be unnecessary if we move the `--body-top`. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -59，18 +65，26 @@ body { height: var(--navbar-height); } +@media screen and (max-width: 1277px) { + .navbar-brand { + flex-wrap: wrap; + } +} + .navbar-burger { color: var(--navbar-font-color); background: none; + background: var(--navbar-background); border: none; outline: none; line-height: 1; height: var(--navbar-height); Review comment: Use the `--navbar-height` variable instead. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -351，6 +359，12 @@ body { margin-left: 2rem; } + @media screen and (min-width: 1024px) and (max-width: 1080px) { + .navbar-end { + margin-left: 1rem; Review comment: This is to change the left margin between the top level navigation (i.e. "Blog") and the logo? I think we can make that for all resolutions. ########## File path: antora-ui-camel/src/css/blog.css ########## @@ -223，3 +223，13 @@ article.blog p { .blog .page-item.active a { color: var(--color-white); } + +@media screen and (max-width: 1023px) { + article.blog:first-child { + margin-top: 5rem; + } + + .blog.list aside { + margin-top: 4.5rem; Review comment: If we move the whole `--body-top` then we don't need to reposition the individual elements， like the category menu here. ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -252，12 +252，17 @@ section.frontpage h2 { } @media screen and (max-width: 1023px) { + header.frontpage { + margin-top: var(--navbar-height); + } + header.frontpage h1 { font-size: 9vw; } header.frontpage svg { height: 10rem; + top: 8rem; Review comment: Could be unnecessary if we move the `--body-top`. ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -252，12 +252，17 @@ section.frontpage h2 { } @media screen and (max-width: 1023px) { + header.frontpage { + margin-top: var(--navbar-height); Review comment: Could be unnecessary if we move the `--body-top`. ########## File path: antora-ui-camel/src/css/static.css ########## @@ -9，6 +8，12 @@ } } +@media screen and (max-width: 1023px) { + .static { + margin-top: 5rem; Review comment: Could be unnecessary if we move the `--body-top`. ########## File path: antora-ui-camel/src/css/toc.css ########## @@ -8，6 +8，13 @@ top: var(--toc-top); } +@media screen and (min-width: 1024px) and (max-width: 1174px) { + .toc.sidebar .toc-menu { + margin-top: 4rem; Review comment: Could be unnecessary if we move the `--body-top`. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -225，14 +227，14 @@ body { } } -@media screen and (max-width: 479px) { +@media screen and (max-width: 1023px) { .navbar-menu.is-active { display: block; position: absolute; height: 100vh; box-shadow: 0 16px 16px 0 rgba(10， 10， 10， 0.1); overflow-y: auto; top: 4rem; + top: 8rem; Review comment: Could be unnecessary if we move the `--body-top`. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -318，6 +320，12 @@ body { padding: 1rem 2rem 1rem 0; } + @media screen and (max-width: 1080px) { + .navbar-item { + padding-right: 1.5rem; + } + } Review comment: I'd change this in higher widths， no need for a lot of padding， 1.5rem should look okay in all resolutions. ########## File path: antora-ui-camel/src/css/static.css ########## @@ -1，6 +1，5 @@ .static { margin: var(--static-margin); max-width: var(--static-max-width); Review comment: Not sure about this change， why are we making it? ########## File path: antora-ui-camel/src/partials/header-content.hbs ########## @@ -23，6 +23，7 @@ </div> </div> <div class="navbar-fill"></div> + <div class="break-row"></div> Review comment: Doesn't seem to make a difference， I've removed this from the DOM in developer tools and resized from 1023px to 300px， and the layout remained the same. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 30/Jun/20 23:46 zregvart commented on a change in pull request #398: URL: https://github.com/apache/camel-website/pull/398#discussion_r448032410 ########## File path: antora-ui-camel/src/css/blog.css ########## @@ -223，3 +223，13 @@ article.blog p { .blog .page-item.active a { color: var(--color-white); } + +@media screen and (max-width: 1023px) { + article.blog:first-child { Review comment: This selector might be a bit problematic as it might target anything (including an element that's absolutely positioned). I'm fairly certain that to accommodate the second row on the top level navigation we need to move or add the padding/margin globaly. I think this change needs to go to `base.css` and cover all pages. We should also base this from the `- navbar-height` variable like we do for the ` -body-top`. Remember these variables can change and then `5rem` is not accurate. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -387，11 +407，19 @@ body { .navbar-fill { flex-grow: 1; + order: 3; +} + +.break-row { + display: none; + flex-basis: 100%; + height: 0; Review comment: I'm not sure that elements that have `display:none` have a hight， do they? ########## File path: antora-ui-camel/src/css/doc.css ########## @@ -37，12 +37，18 @@ margin: 1.5rem 0; } -@media screen and (min-width: 769px) { +@media screen and (min-width: 1024px) { .doc > h1.page:first-child { margin-top: 2.5rem; } } +@media screen and (max-width: 1023px) { + .doc > h1.page:first-child { Review comment: Could be unnecessary if we move the `--body-top`. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -59，18 +65，26 @@ body { height: var(--navbar-height); } +@media screen and (max-width: 1277px) { + .navbar-brand { + flex-wrap: wrap; + } +} + .navbar-burger { color: var(--navbar-font-color); background: none; + background: var(--navbar-background); border: none; outline: none; line-height: 1; height: var(--navbar-height); Review comment: Use the `--navbar-height` variable instead. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -351，6 +359，12 @@ body { margin-left: 2rem; } + @media screen and (min-width: 1024px) and (max-width: 1080px) { + .navbar-end { + margin-left: 1rem; Review comment: This is to change the left margin between the top level navigation (i.e. "Blog") and the logo? I think we can make that for all resolutions. ########## File path: antora-ui-camel/src/css/blog.css ########## @@ -223，3 +223，13 @@ article.blog p { .blog .page-item.active a { color: var(--color-white); } + +@media screen and (max-width: 1023px) { + article.blog:first-child { + margin-top: 5rem; + } + + .blog.list aside { + margin-top: 4.5rem; Review comment: If we move the whole `--body-top` then we don't need to reposition the individual elements， like the category menu here. ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -252，12 +252，17 @@ section.frontpage h2 { } @media screen and (max-width: 1023px) { + header.frontpage { + margin-top: var(--navbar-height); + } + header.frontpage h1 { font-size: 9vw; } header.frontpage svg { height: 10rem; + top: 8rem; Review comment: Could be unnecessary if we move the `--body-top`. ########## File path: antora-ui-camel/src/css/frontpage.css ########## @@ -252，12 +252，17 @@ section.frontpage h2 { } @media screen and (max-width: 1023px) { + header.frontpage { + margin-top: var(--navbar-height); Review comment: Could be unnecessary if we move the `--body-top`. ########## File path: antora-ui-camel/src/css/static.css ########## @@ -9，6 +8，12 @@ } } +@media screen and (max-width: 1023px) { + .static { + margin-top: 5rem; Review comment: Could be unnecessary if we move the `--body-top`. ########## File path: antora-ui-camel/src/css/toc.css ########## @@ -8，6 +8，13 @@ top: var(--toc-top); } +@media screen and (min-width: 1024px) and (max-width: 1174px) { + .toc.sidebar .toc-menu { + margin-top: 4rem; Review comment: Could be unnecessary if we move the `--body-top`. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -225，14 +227，14 @@ body { } } -@media screen and (max-width: 479px) { +@media screen and (max-width: 1023px) { .navbar-menu.is-active { display: block; position: absolute; height: 100vh; box-shadow: 0 16px 16px 0 rgba(10， 10， 10， 0.1); overflow-y: auto; top: 4rem; + top: 8rem; Review comment: Could be unnecessary if we move the `--body-top`. ########## File path: antora-ui-camel/src/css/header.css ########## @@ -318，6 +320，12 @@ body { padding: 1rem 2rem 1rem 0; } + @media screen and (max-width: 1080px) { + .navbar-item { + padding-right: 1.5rem; + } + } Review comment: I'd change this in higher widths， no need for a lot of padding， 1.5rem should look okay in all resolutions. ########## File path: antora-ui-camel/src/css/static.css ########## @@ -1，6 +1，5 @@ .static { margin: var(--static-margin); max-width: var(--static-max-width); Review comment: Not sure about this change， why are we making it? ########## File path: antora-ui-camel/src/partials/header-content.hbs ########## @@ -23，6 +23，7 @@ </div> </div> <div class="navbar-fill"></div> + <div class="break-row"></div> Review comment: Doesn't seem to make a difference， I've removed this from the DOM in developer tools and resized from 1023px to 300px， and the layout remained the same. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 01/Jul/20 16:57 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-652535935 @zregvart I simplified a bit further using your suggestion. however certain changes are necessary. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 01/Jul/20 16:57 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-652535935 @zregvart I simplified a bit further using your suggestion. however certain changes are necessary. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 02/Jul/20 08:53 zregvart merged pull request #398: URL: https://github.com/apache/camel-website/pull/398 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Jul/20 08:53 zregvart merged pull request #398: URL: https://github.com/apache/camel-website/pull/398 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 02/Jul/20 08:54 zregvart commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-652879954 Awesome @AemieJ， great effort， and thank you for tolerating my nitpickery! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Jul/20 08:54 zregvart commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-652879954 Awesome @AemieJ， great effort， and thank you for tolerating my nitpickery! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 02/Jul/20 16:39 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-653111799 @zregvart well it certainly helped with simplifying the code as much as possible， so I am glad and thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 02/Jul/20 16:39 AemieJ commented on pull request #398: URL: https://github.com/apache/camel-website/pull/398#issuecomment-653111799 @zregvart well it certainly helped with simplifying the code as much as possible， so I am glad and thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org
CAMEL-14957,Omar Al-Safi,2020-05-06T11:00:48+0000,1588748448， where 1588748448 is the epoch,See CI server or run tests in camel-kafka. And have docker running.,Hide Permalink Omar Al-Safi added a comment - 06/May/20 11:00 Is it this error: [ERROR] Tests run: 1， Failures: 0， Errors: 1， Skipped: 0， Time elapsed: 16.569 s <<< FAILURE! - in org.apache.camel.component.kafka.KafkaConsumerFullTest [ERROR] org.apache.camel.component.kafka.KafkaConsumerFullTest Time elapsed: 16.563 s <<< ERROR! org.testcontainers.containers.ContainerLaunchException: Container startup failed at org.testcontainers.containers.GenericContainer.doStart(GenericContainer.java:320) at org.testcontainers.containers.KafkaContainer.doStart(KafkaContainer.java:102) at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:300) at org.testcontainers.containers.GenericContainer.starting(GenericContainer.java:1011) at org.testcontainers.containers.FailureDetectingExternalResource$1.evaluate(FailureDetectingExternalResource.java:29) at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:54) at org.junit.rules.RunRules.evaluate(RunRules.java:20) at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306) at org.junit.runners.ParentRunner.run(ParentRunner.java:413) ... Caused by: org.testcontainers.shaded.com.fasterxml.jackson.databind.JsonMappingException: Failed to getValue() with method com.github.dockerjava.api.model.ExposedPorts#toPrimitive(0 params): null (through reference chain: com.github.dockerjava.core.command.CreateContainerCmdImpl["ExposedPorts"]->com.github.dockerjava.api.model.ExposedPorts["toPrimitive()"]) at org.testcontainers.shaded.com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:397) at org.testcontainers.shaded.com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:356) ... Caused by: java.lang.IllegalStateException: Duplicate key java.lang.Object@7affc159 at java.util.stream.Collectors.lambda$throwingMerger$0(Collectors.java:133) at java.util.HashMap.merge(HashMap.java:1254) at java.util.stream.Collectors.lambda$toMap$58(Collectors.java:1320) .. If yes， I have digged into it briefly， it looks like the issue is from sharing the container among tests. I will look into it more Show Omar Al-Safi added a comment - 06/May/20 11:00 Is it this error: [ERROR] Tests run: 1， Failures: 0， Errors: 1， Skipped: 0， Time elapsed: 16.569 s <<< FAILURE! - in org.apache.camel.component.kafka.KafkaConsumerFullTest [ERROR] org.apache.camel.component.kafka.KafkaConsumerFullTest Time elapsed: 16.563 s <<< ERROR! org.testcontainers.containers.ContainerLaunchException: Container startup failed at org.testcontainers.containers.GenericContainer.doStart(GenericContainer.java:320) at org.testcontainers.containers.KafkaContainer.doStart(KafkaContainer.java:102) at org.testcontainers.containers.GenericContainer.start(GenericContainer.java:300) at org.testcontainers.containers.GenericContainer.starting(GenericContainer.java:1011) at org.testcontainers.containers.FailureDetectingExternalResource$1.evaluate(FailureDetectingExternalResource.java:29) at org.junit.rules.ExternalResource$1.evaluate(ExternalResource.java:54) at org.junit.rules.RunRules.evaluate(RunRules.java:20) at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306) at org.junit.runners.ParentRunner.run(ParentRunner.java:413) ... Caused by: org.testcontainers.shaded.com.fasterxml.jackson.databind.JsonMappingException: Failed to getValue() with method com.github.dockerjava.api.model.ExposedPorts#toPrimitive(0 params): null (through reference chain: com.github.dockerjava.core.command.CreateContainerCmdImpl[ "ExposedPorts" ]->com.github.dockerjava.api.model.ExposedPorts[ "toPrimitive()" ]) at org.testcontainers.shaded.com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:397) at org.testcontainers.shaded.com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:356) ... Caused by: java.lang.IllegalStateException: Duplicate key java.lang. Object @7affc159 at java.util.stream.Collectors.lambda$throwingMerger$0(Collectors.java:133) at java.util.HashMap.merge(HashMap.java:1254) at java.util.stream.Collectors.lambda$toMap$58(Collectors.java:1320) .. If yes， I have digged into it briefly， it looks like the issue is from sharing the container among tests. I will look into it more Hide Permalink Omar Al-Safi added a comment - 06/May/20 11:52 Okay it is the same error in CI. Looking at it now Show Omar Al-Safi added a comment - 06/May/20 11:52 Okay it is the same error in CI. Looking at it now
CAMEL-14956,James Netherton,2020-04-23T08:19:10+0000,1587615550， where 1587615550 is the epoch,We should have a Vertx based websocket component https://vertx.io/docs/vertx-core/java/#_websocketsMaybe we can have a vertx component with a number of schemes/endpoints: vertx-ws vertx-http etc,There are no comments yet on this issue.
CAMEL-14955,Claus Ibsen,2020-04-23T08:01:05+0000,1587614465， where 1587614465 is the epoch,See issue reported on camel-khttps://github.com/apache/camel-k/issues/1422We can improve this to do 2 passes and setup simple types first which wont have ordering problems. This improves this for normal use-cases.,There are no comments yet on this issue.
CAMEL-14954,Claus Ibsen,2020-04-23T06:22:37+0000,1587608557， where 1587608557 is the epoch,in doSuspend then make it return http status 503.See how jetty does it.,There are no comments yet on this issue.
CAMEL-14953,Andrea Cosentino,2020-04-27T13:13:17+0000,1587978797， where 1587978797 is the epoch,,Hide Permalink Andrea Cosentino added a comment - 27/Apr/20 13:13 This could be already achieved， you need to set the event notification for a bucket on the console， then we could use SQS and SNS to consume messages related to this. An operation to setup the notification is a bit too much. Show Andrea Cosentino added a comment - 27/Apr/20 13:13 This could be already achieved， you need to set the event notification for a bucket on the console， then we could use SQS and SNS to consume messages related to this. An operation to setup the notification is a bit too much. Hide Permalink Basil Brunner added a comment - 29/Apr/20 07:40 - edited I would agree that this should be done via SNS or SQS. But AFAIK， the SNS component can only act as a producer， not as a consumer. https://github.com/apache/camel/blob/master/components/camel-aws-sns/src/main/java/org/apache/camel/component/aws/sns/SnsEndpoint.java#L91 Show Basil Brunner added a comment - 29/Apr/20 07:40 - edited I would agree that this should be done via SNS or SQS. But AFAIK， the SNS component can only act as a producer， not as a consumer. https://github.com/apache/camel/blob/master/components/camel-aws-sns/src/main/java/org/apache/camel/component/aws/sns/SnsEndpoint.java#L91 Hide Permalink Andrea Cosentino added a comment - 29/Apr/20 07:48 Yes， because you can consume from SNS by subscribing an SQS to the topic. SNS has multiple ways of consuming. Show Andrea Cosentino added a comment - 29/Apr/20 07:48 Yes， because you can consume from SNS by subscribing an SQS to the topic. SNS has multiple ways of consuming.
CAMEL-14952,Unassigned,2020-07-12T08:30:14.781Z,1594528214.781， where 1594528214.781 is the epoch,We use Algolia for the search functionality on the website using their free plan for Open Source projects. The index is built by Algolia's crawler using the DocSearch.When this was done we built our own UI on top of Algolia JavaScript API， as one if requirements is that clients use Algolia's JavaScript clients. We did not use Algolia UI as at that point it was rather large JavaScript dependency to add and it would slow down the loading of the website.We also have some initial work on creating our own Algolia index at build time.The current search doesn't seem to index the whole website， some results don't appear in the search， looks like most of the content from Antora is not indexed: trying to search for removeHeader， the FAQ entry is not found. There's also a list of failed searches on the Algolia dashboard we can use to benchmark the search.What we need is to build the search index over the whole content. Approach taken in #74 is good start for Hugo generated content. We need to expand that to Antora built content as well.This search index would be built at the website build time and would include both Hugo and Algolia content in the same file or possibly in several files if we use multi-index search. More on how indexes are built can be seen in the Algolia documentation.We need to figure out what data to send and how to integrate this with Antora， for Hugo we have a good idea from #74， importantly the structure needs to be the same. One good source of inspiration on building the index for Antora content is in the Lunr.js integration.We need to build the index with the search UI in mind， i.e. the index needs to contain the data we wish to present in the UI as well as enough content for Algolia to be able to use the content to perform search. So starting with a mockup of what we wish to present/utilize in the search UI and deriving the data structure for the index from that would be a good start.,Hide Permalink Aashna Jena added a comment - 03/May/20 09:12 As you mentioned， we need to start by thinking about what we want to present in the search UI， because the index will be built according to that. Are we thinking of including Algolia's default UI? Or do we prefer to keep the customized UI that we have created? Show Aashna Jena added a comment - 03/May/20 09:12 As you mentioned， we need to start by thinking about what we want to present in the search UI， because the index will be built according to that. Are we thinking of including Algolia's default UI? Or do we prefer to keep the customized UI that we have created? Hide Permalink Aashna Jena added a comment - 30/May/20 19:19 Want to confirm - currently， we are using the index built by Antora's website crawler right? We are not using our own index for any of Hugo or Antora generated pages? Show Aashna Jena added a comment - 30/May/20 19:19 Want to confirm - currently， we are using the index built by Antora's website crawler right? We are not using our own index for any of Hugo or Antora generated pages? Hide Permalink Zoran Regvart added a comment - 31/May/20 08:19 Yes， we're using index is built by Algolia's crawler using the DocSearch. Show Zoran Regvart added a comment - 31/May/20 08:19 Yes， we're using index is built by Algolia's crawler using the DocSearch . Hide Permalink Aemie added a comment - 02/Jun/20 06:26 Zoran Regvart if the DocSearch scrapes the entire documentation of the website， it is only able to scrape through the parts within the camel-website repo， it doesn't go in-depth indexing through any component or user manual documentation that was created using antora within the camel repository. Show Aemie added a comment - 02/Jun/20 06:26 Zoran Regvart if the DocSearch scrapes the entire documentation of the website， it is only able to scrape through the parts within the camel-website repo， it doesn't go in-depth indexing through any component or user manual documentation that was created using antora within the camel repository. Hide Permalink Zoran Regvart added a comment - 02/Jun/20 07:03 Aemie here is the documentation for the docsearch: https://docsearch.algolia.com/docs/how-does-it-work that is the extent of my knowledge， everything is configured by Algolia and we have no influence on the configuration. From what I understand the sitemaps provide URLs to index. Show Zoran Regvart added a comment - 02/Jun/20 07:03 Aemie here is the documentation for the docsearch: https://docsearch.algolia.com/docs/how-does-it-work that is the extent of my knowledge， everything is configured by Algolia and we have no influence on the configuration. From what I understand the sitemaps provide URLs to index. Hide Permalink Aemie added a comment - 06/Jun/20 16:38 Zoran Regvart so the sitemap isn't generated by us? 'cause in the sitemap of apache camel https://camel.apache.org/sitemap.xml I didn't observe any nested sitemap to include the documentation of components and user-manual separately. It just states the URL of each when I observed. Show Aemie added a comment - 06/Jun/20 16:38 Zoran Regvart so the sitemap isn't generated by us? 'cause in the sitemap of apache camel https://camel.apache.org/sitemap.xml I didn't observe any nested sitemap to include the documentation of components and user-manual separately. It just states the URL of each when I observed. Hide Permalink Zoran Regvart added a comment - 07/Jun/20 10:22 Aemie I've created a separate issue to fix the sitemap: CAMEL-15154 Show Zoran Regvart added a comment - 07/Jun/20 10:22 Aemie I've created a separate issue to fix the sitemap: CAMEL-15154 Hide Permalink Aashna Jena added a comment - 12/Jun/20 08:30 - edited Does correcting the sitemap make a difference in search? I'm pretty certain that Antora generated pages are still not reachable by DocSearch at all. I don't think the problem lies with the "search" part， we just need to investigate why some pages are not getting indexed. One of the FAQ on their website talks about this. Should we investigate this rather than thinking of indexing the whole website ourselves? Show Aashna Jena added a comment - 12/Jun/20 08:30 - edited Does correcting the sitemap make a difference in search? I'm pretty certain that Antora generated pages are still not reachable by DocSearch at all. I don't think the problem lies with the "search" part， we just need to investigate why some pages are not getting indexed. One of the FAQ on their website talks about this. Should we investigate this rather than thinking of indexing the whole website ourselves? Hide Permalink Aashna Jena added a comment - 12/Jun/20 12:39 DocSearch creates a configuration for our website as stated here. Apache Camel website's configuration file is listed here. It draws URLs from the sitemap and we have /docs/ as one of the starting links. Is anyone able to pinpoint any errors in this config file? Also is there a way to see which all pages have been crawled by docsearch? Show Aashna Jena added a comment - 12/Jun/20 12:39 DocSearch creates a configuration for our website as stated here . Apache Camel website's configuration file is listed here . It draws URLs from the sitemap and we have /docs/ as one of the starting links. Is anyone able to pinpoint any errors in this config file? Also is there a way to see which all pages have been crawled by docsearch? Hide Permalink Aemie added a comment - 12/Jun/20 12:57 Aashna Jena all I have observed is that instead of providing a nested sitemap， the doc search is able to only crawl through community， article and docs pages， the starting path， you don't see all the results 'cause only 10 are restricted but it isn't able to alternate through the links within the documentation or any project that are listed in the sitemap & I compared this with other json files generated by docSearch， I can't find any error in it. Show Aemie added a comment - 12/Jun/20 12:57 Aashna Jena all I have observed is that instead of providing a nested sitemap， the doc search is able to only crawl through community， article and docs pages， the starting path， you don't see all the results 'cause only 10 are restricted but it isn't able to alternate through the links within the documentation or any project that are listed in the sitemap & I compared this with other json files generated by docSearch， I can't find any error in it. Hide Permalink Aashna Jena added a comment - 12/Jun/20 13:12 Okay， I'll try to build this locally. If possible， I want to make changes to the config file and see how that affects search. Show Aashna Jena added a comment - 12/Jun/20 13:12 Okay， I'll try to build this locally. If possible， I want to make changes to the config file and see how that affects search. Hide Permalink Aashna Jena added a comment - 13/Jun/20 09:12 - edited I built this locally， made changes in the config.json and crawled our website. I added "/manual/latest/"， "/components/" and "/projects/" as starting URLs， keeping selectors the same as before， i.e. selecting "article". Previously， we had "nb_hits = 575"， now it is 116，449. "nb_hits" is the number of records that were extracted and indexed by DocSearch. I have the list of webpages crawled by Docsearch (in the crawl job that I started)， it now includes all the documentation pages. I am also able to locally test the "algolia search"， and I can see results corresponding to documentation pages. As mentioned in the description of this issue， no entry can be found when searching removeHeader， but I can find the FAQ entry on the new index I have created. This may not be the best representation， and we may want to have the heading "FAQ" etc， but at least we have it appearing on our search now. We can investigate the object which gets returned， and display it on our UI differently. {{}} Show Aashna Jena added a comment - 13/Jun/20 09:12 - edited I built this locally， made changes in the config.json and crawled our website. I added " /manual/latest/ "， " /components/ " and " /projects/ " as starting URLs， keeping selectors the same as before， i.e. selecting "article" . Previously， we had "nb_hits = 575"， now it is 116，449. "nb_hits" is the number of records that were extracted and indexed by DocSearch . I have the list of webpages crawled by Docsearch (in the crawl job that I started)， it now includes all the documentation pages. I am also able to locally test the "algolia search" ， and I can see results corresponding to documentation pages. As mentioned in the description of this issue， no entry can be found when searching removeHeader ， but I can find the FAQ entry on the new index I have created. This may not be the best representation， and we may want to have the heading "FAQ" etc， but at least we have it appearing on our search now. We can investigate the object which gets returned， and display it on our UI differently. {{}} Hide Permalink Aashna Jena added a comment - 13/Jun/20 10:07 Here's the list of crawled webpages in the crawl job I ran [^list_of_crawled_pages.txt] using this configuration file [^camel.json]. I am aware that we're missing pages from subproject documentation. Seems like we need to add all URLs of type "camel.apache.ord/XYZ/" which would include "camel.apache.org/camel-subproject/latest/". Zoran Regvart Maria Arias de Reyna Dominguez Aemie Would be great if you guys can have a quick look at the list of crawled webpages and pinpoint if there's any set of webpages we are missing. I can also share my screen on Monday's meeting and we can test some search queries on the latest index. Show Aashna Jena added a comment - 13/Jun/20 10:07 Here's the list of crawled webpages in the crawl job I ran [^list_of_crawled_pages.txt] using this configuration file [^camel.json] . I am aware that we're missing pages from subproject documentation. Seems like we need to add all URLs of type "camel.apache.ord/XYZ/" which would include "camel.apache.org/camel-subproject/latest/". Zoran Regvart Maria Arias de Reyna Dominguez Aemie Would be great if you guys can have a quick look at the list of crawled webpages and pinpoint if there's any set of webpages we are missing. I can also share my screen on Monday's meeting and we can test some search queries on the latest index. Hide Permalink Aemie added a comment - 13/Jun/20 11:54 Aashna Jena LGTM， however for including the individual projects， the starting point of projects (https://camel.apache.org/projects/) will not do good as we would have to provide starting points to each project manually， so then it could find its respective index based on the sitemap. Show Aemie added a comment - 13/Jun/20 11:54 Aashna Jena LGTM， however for including the individual projects， the starting point of projects ( https://camel.apache.org/projects/) will not do good as we would have to provide starting points to each project manually， so then it could find its respective index based on the sitemap. Hide Permalink Aashna Jena added a comment - 13/Jun/20 14:54 Yes I agree. As I mentioned above， we need to include all links of this form "camel.apache.org/camel-subproject/latest/". Show Aashna Jena added a comment - 13/Jun/20 14:54 Yes I agree. As I mentioned above， we need to include all links of this form "camel.apache.org/camel-subproject/latest/" . Hide Permalink Maria Arias de Reyna Dominguez added a comment - 15/Jun/20 07:49 > Zoran Regvart María Arias de Reyna Aemie Would be great if you guys can have a quick look at the list of crawled webpages and pinpoint if there's any set of webpages we are missing. That's a hard one I think it is complete. Or， at least， has the most relevant pages. Maybe we can compare it with the full sitemap? Show Maria Arias de Reyna Dominguez added a comment - 15/Jun/20 07:49 > Zoran Regvart María Arias de Reyna Aemie Would be great if you guys can have a quick look at the list of crawled webpages and pinpoint if there's any set of webpages we are missing. That's a hard one I think it is complete. Or， at least， has the most relevant pages. Maybe we can compare it with the full sitemap? Hide Permalink Zoran Regvart added a comment - 15/Jun/20 11:56 Aashna Jena I've uploaded "BH4D9OD16A_apache_camel_20200608-20200614_no_result_searches.csv" this is the export of terms searched via Algolia that have no results， you mentioned that you have setup Algolia locally with additional pages in the JSON configuration， please see if you get some results in the terms listed in the file. Show Zoran Regvart added a comment - 15/Jun/20 11:56 Aashna Jena I've uploaded "BH4D9OD16A_apache_camel_20200608-20200614_no_result_searches.csv" this is the export of terms searched via Algolia that have no results， you mentioned that you have setup Algolia locally with additional pages in the JSON configuration， please see if you get some results in the terms listed in the file. Hide Permalink Aashna Jena added a comment - 15/Jun/20 16:23 Attaching List_Of_Crawled_Pages_by_DocSearch.txt which contains the updated list of all 1363 page links crawled by DocSearch using the latest configuration for future reference. Zoran Regvart I have tested several queries from the CSV. I can see relevant search results now. For example， "validationexception"， "threadpool"， "asyncprocessor" and "saxon" are queries which were giving no search result according to the CSV， but I can now see several entries corresponding to them. I also replied to the mail from DocSearch answering their questions and explaining what we investigated， I hope that's alright. Show Aashna Jena added a comment - 15/Jun/20 16:23 Attaching List_Of_Crawled_Pages_by_DocSearch.txt which contains the updated list of all 1363 page links crawled by DocSearch using the latest configuration for future reference. Zoran Regvart I have tested several queries from the CSV. I can see relevant search results now. For example， "validationexception"， "threadpool"， "asyncprocessor" and "saxon" are queries which were giving no search result according to the CSV， but I can now see several entries corresponding to them. I also replied to the mail from DocSearch answering their questions and explaining what we investigated， I hope that's alright. Hide Permalink Aashna Jena added a comment - 16/Jun/20 06:40 The Algolia index has been updated. Zoran Regvart Aemie Maria Arias de Reyna Dominguez We should try searching for some components/user manual bits on our website to make sure it's all included. I also want some opinions on whether we like the way search results are appearing. I'd prefer to have more high-level titles like Components， User Manual etc. and then the heading of the page which has matched on the next level. But I'm not sure how feasible/preferable this is. Are you guys happy with the title， subtitle， and text that's appearing on search results? Show Aashna Jena added a comment - 16/Jun/20 06:40 The Algolia index has been updated. Zoran Regvart Aemie Maria Arias de Reyna Dominguez We should try searching for some components/user manual bits on our website to make sure it's all included. I also want some opinions on whether we like the way search results are appearing. I'd prefer to have more high-level titles like Components， User Manual etc. and then the heading of the page which has matched on the next level. But I'm not sure how feasible/preferable this is. Are you guys happy with the title， subtitle， and text that's appearing on search results? Hide Permalink Aemie added a comment - 16/Jun/20 10:18 Aashna Jena the search works perfectly now， I tried a couple of components and faq， it worked pretty good， gave relevant results. I agree with you， the current design is neat but it's better if we could re-design it and it's better if we talk about that in another issue. Show Aemie added a comment - 16/Jun/20 10:18 Aashna Jena the search works perfectly now， I tried a couple of components and faq， it worked pretty good， gave relevant results. I agree with you， the current design is neat but it's better if we could re-design it and it's better if we talk about that in another issue. Hide Permalink Zoran Regvart added a comment - 16/Jun/20 20:10 An update was made to the docsearch configuration by Algolia. I guess based on the conversation we had with support. I'm not too comfortable with listing URLs in the start_urls. If possible， a better option might be to have no URLs listed and rely on the sitemap alone. With this we have to rely on Algolia to update the configuration， whereas with sitemap we have the control over what pages are indexed. Show Zoran Regvart added a comment - 16/Jun/20 20:10 An update was made to the docsearch configuration by Algolia. I guess based on the conversation we had with support. I'm not too comfortable with listing URLs in the start_urls . If possible， a better option might be to have no URLs listed and rely on the sitemap alone. With this we have to rely on Algolia to update the configuration， whereas with sitemap we have the control over what pages are indexed. Hide Permalink Aashna Jena added a comment - 17/Jun/20 07:37 Zoran Regvart I agree. We had asked DocSearch Support team about this， but seems like they haven't answered this question. Maybe we can try flattening the sitemap? I can locally test if a flattened sitemap is enough for DocSearch to crawl all our pages. I still have a few days of subscription left. I'm not sure how to flatten the sitemap though. Show Aashna Jena added a comment - 17/Jun/20 07:37 Zoran Regvart I agree. We had asked DocSearch Support team about this， but seems like they haven't answered this question. Maybe we can try flattening the sitemap? I can locally test if a flattened sitemap is enough for DocSearch to crawl all our pages. I still have a few days of subscription left. I'm not sure how to flatten the sitemap though. Hide Permalink Zoran Regvart added a comment - 17/Jun/20 19:57 I've asked Algolia explicitly about relying just on the sitemap， so we don't need to change the JSON configuration at Algolia. Show Zoran Regvart added a comment - 17/Jun/20 19:57 I've asked Algolia explicitly about relying just on the sitemap， so we don't need to change the JSON configuration at Algolia. Hide Permalink Aashna Jena added a comment - 19/Jun/20 11:33 Their latest reply isn't very informative. I'll try to investigate this a little further from our end. Show Aashna Jena added a comment - 19/Jun/20 11:33 Their latest reply isn't very informative. I'll try to investigate this a little further from our end. Hide Permalink Aemie added a comment - 19/Jun/20 11:47 The starting urls have been removed to solely depend on the site map indexing， as I saw last. However， when I tried experimenting while searching a few queries， we got a result of a particular topic twice. Show Aemie added a comment - 19/Jun/20 11:47 The starting urls have been removed to solely depend on the site map indexing， as I saw last. However， when I tried experimenting while searching a few queries， we got a result of a particular topic twice. Hide Permalink Zoran Regvart added a comment - 20/Jun/20 20:13 Duplicate results are caused by indexing over several versions of the same page. Show Zoran Regvart added a comment - 20/Jun/20 20:13 Duplicate results are caused by indexing over several versions of the same page. Hide Permalink Claus Ibsen added a comment - 21/Jun/20 07:04 Great work so far， love to see the search actually work and that the results are displayed in real time Show Claus Ibsen added a comment - 21/Jun/20 07:04 Great work so far， love to see the search actually work and that the results are displayed in real time Hide Permalink Aashna Jena added a comment - 21/Jun/20 22:17 Zoran Regvart Why do we have all versions of a page present in the sitemap? We only display the latest versions on our website right? Show Aashna Jena added a comment - 21/Jun/20 22:17 Zoran Regvart Why do we have all versions of a page present in the sitemap? We only display the latest versions on our website right? Hide Permalink Zoran Regvart added a comment - 22/Jun/20 07:02 Claus Ibsen does the search not work for you? Aashna Jena we should have every page in the sitemap， should be easy to check if that is not the case. Show Zoran Regvart added a comment - 22/Jun/20 07:02 Claus Ibsen does the search not work for you? Aashna Jena we should have every page in the sitemap， should be easy to check if that is not the case. Hide Permalink Claus Ibsen added a comment - 22/Jun/20 07:05 It works better but the mixed versions is causing problems. Try search for "mqtt" and all the links are for 2.x. I really think the search needs to have a version picker (and by default it uses latest). Show Claus Ibsen added a comment - 22/Jun/20 07:05 It works better but the mixed versions is causing problems. Try search for "mqtt" and all the links are for 2.x. I really think the search needs to have a version picker (and by default it uses latest). Hide Permalink Aemie added a comment - 24/Jun/20 10:10 - edited Zoran Regvart Maria Arias de Reyna Dominguez Aashna Jena I observed that we're only able to get the top heading of each search which is not what we want but we would like to know its directory i.e. if a user searches endpoint dsl it should appear along with camel-quarkus， it makes it an easier task for the user as the docs are heavy for our website. So we can change the selectors as such - Original selectors by docSearch - "selectors": "lvl0": "article h1"， "lvl1": "article h2"， "lvl2": "article h3"， "lvl3": "article h4"， "lvl4": "article h5"， "lvl5": "article h6"， "text": "article p， article li" We can update those selectors to include the <a> tag for each of list item within toolbars as such - "selectors": "lvl0": "article h1， div.toolbar ul li:nth-child(1) a"， "lvl1": "article h2， div.toolbar ul li:nth-child(2) a"， "lvl2": "article h3， div.toolbar ul li:nth-child(3) a"， "lvl3": "article h4， div.toolbar ul li:nth-child(4) a"， "lvl4": "article h5， div.toolbar ul li:nth-child(5) a"， "lvl5": "article h6， div.toolbar ul li:nth-child(6) a"， "text": "article p， article li" This manner will keep track of the article also as well as the toolbar items within the list it could select. We could think of simpler approach but I find this one way. Show Aemie added a comment - 24/Jun/20 10:10 - edited Zoran Regvart Maria Arias de Reyna Dominguez Aashna Jena I observed that we're only able to get the top heading of each search which is not what we want but we would like to know its directory i.e. if a user searches endpoint dsl it should appear along with camel-quarkus， it makes it an easier task for the user as the docs are heavy for our website. So we can change the selectors as such - Original selectors by docSearch - "selectors": "lvl0": "article h1"， "lvl1": "article h2"， "lvl2": "article h3"， "lvl3": "article h4"， "lvl4": "article h5"， "lvl5": "article h6"， "text": "article p， article li" We can update those selectors to include the <a> tag for each of list item within toolbars as such - "selectors": "lvl0": "article h1， div.toolbar ul li:nth-child(1) a"， "lvl1": "article h2， div.toolbar ul li:nth-child(2) a"， "lvl2": "article h3， div.toolbar ul li:nth-child(3) a"， "lvl3": "article h4， div.toolbar ul li:nth-child(4) a"， "lvl4": "article h5， div.toolbar ul li:nth-child(5) a"， "lvl5": "article h6， div.toolbar ul li:nth-child(6) a"， "text": "article p， article li" This manner will keep track of the article also as well as the toolbar items within the list it could select. We could think of simpler approach but I find this one way. Hide Permalink Aemie added a comment - 29/Jun/20 09:10 Aashna Jena if you want， I added apache_demo.json， you can check that， it works for both components and manuals as I checked. Show Aemie added a comment - 29/Jun/20 09:10 Aashna Jena if you want， I added apache_demo.json ， you can check that， it works for both components and manuals as I checked. Hide Permalink Aashna Jena added a comment - 29/Jun/20 09:17 Yes this is great! We should definitely use this. I'll try to polish this a little to include camel sub-projects and versions. Instead of using all the hierarchy， my preference would be to use "div.toolbar ul li:nth-child(1)" as lvl0 and "article h1" as lvl1， so that search results get grouped by lvl0 but not have a long list of hierarchy. Show Aashna Jena added a comment - 29/Jun/20 09:17 Yes this is great! We should definitely use this. I'll try to polish this a little to include camel sub-projects and versions. Instead of using all the hierarchy， my preference would be to use "div.toolbar ul li:nth-child(1)" as lvl0 and "article h1" as lvl1， so that search results get grouped by lvl0 but not have a long list of hierarchy. Hide Permalink Aemie added a comment - 29/Jun/20 11:59 I don't know about the change in hierarchy levels as for a topic like the support it comes from different related topics on user-manual and community. If we wanted to prevent the long list of hierarchy， we could change the layout of the search results. The one in the picture is from https://getbootstrap.com/ and these results provide much better clarity， in my opinion. Show Aemie added a comment - 29/Jun/20 11:59 I don't know about the change in hierarchy levels as for a topic like the support it comes from different related topics on user-manual and community. If we wanted to prevent the long list of hierarchy， we could change the layout of the search results. The one in the picture is from https://getbootstrap.com/ and these results provide much better clarity， in my opinion. Hide Permalink ASF GitHub Bot added a comment - 06/Jul/20 08:18 aashnajena opened a new pull request #423: URL: https://github.com/apache/camel-website/pull/423 I have linked my own Algolia index to this PR for now， so that everyone can view the changes in search results. Search results are now grouped by higher level headings eg. "Camel Components" or "User Manual" or "Camel Kafka Connector". For Hugo pages， search results are grouped by H1， because that itself is the highest level of heading eg "Articles" or "Books" I wanted to make the config file as simple as possible， and depend on the sitemap instead of the URLs. This is what I'm using : "sitemap_urls": [ "https://camel.apache.org/sitemap.xml" ]， "selectors": { "lvl0": ".toolbar ul li:nth-child(1) a"， "lvl1": ".version-menu a.is-current"， "lvl2": "article h1"， "lvl3": "article h2"， "text": "article p， article li" } ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 06/Jul/20 08:18 aashnajena opened a new pull request #423: URL: https://github.com/apache/camel-website/pull/423 I have linked my own Algolia index to this PR for now， so that everyone can view the changes in search results. Search results are now grouped by higher level headings eg. "Camel Components" or "User Manual" or "Camel Kafka Connector". For Hugo pages， search results are grouped by H1， because that itself is the highest level of heading eg "Articles" or "Books" I wanted to make the config file as simple as possible， and depend on the sitemap instead of the URLs. This is what I'm using : "sitemap_urls": [ "https://camel.apache.org/sitemap.xml" ]， "selectors": { "lvl0": ".toolbar ul li:nth-child(1) a"， "lvl1": ".version-menu a.is-current"， "lvl2": "article h1"， "lvl3": "article h2"， "text": "article p， article li" } ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 06/Jul/20 09:06 AemieJ commented on a change in pull request #423: URL: https://github.com/apache/camel-website/pull/423#discussion_r450085459 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -4，8 +4，8 @@ const algoliasearch = require('algoliasearch/lite') window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') + const client = algoliasearch('QDOJ4LJQCC'， '0fa28c3acc4d5f383b85ae4ad035ac9c') + const index = client.initIndex('aashna') Review comment: The name should be `apache_camel`， I believe. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 06/Jul/20 09:06 AemieJ commented on a change in pull request #423: URL: https://github.com/apache/camel-website/pull/423#discussion_r450085459 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -4，8 +4，8 @@ const algoliasearch = require('algoliasearch/lite') window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') + const client = algoliasearch('QDOJ4LJQCC'， '0fa28c3acc4d5f383b85ae4ad035ac9c') + const index = client.initIndex('aashna') Review comment: The name should be `apache_camel`， I believe. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 06/Jul/20 09:14 aashnajena commented on a change in pull request #423: URL: https://github.com/apache/camel-website/pull/423#discussion_r450090271 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -4，8 +4，8 @@ const algoliasearch = require('algoliasearch/lite') window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') + const client = algoliasearch('QDOJ4LJQCC'， '0fa28c3acc4d5f383b85ae4ad035ac9c') + const index = client.initIndex('aashna') Review comment: As I mentioned， I've linked my personal index here， which is named "aashna". This is just for showing everyone how the search results will look with the new configuration. These two lines are not supposed to be merged， I will revert them before merging. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 06/Jul/20 09:14 aashnajena commented on a change in pull request #423: URL: https://github.com/apache/camel-website/pull/423#discussion_r450090271 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -4，8 +4，8 @@ const algoliasearch = require('algoliasearch/lite') window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') + const client = algoliasearch('QDOJ4LJQCC'， '0fa28c3acc4d5f383b85ae4ad035ac9c') + const index = client.initIndex('aashna') Review comment: As I mentioned， I've linked my personal index here， which is named "aashna". This is just for showing everyone how the search results will look with the new configuration. These two lines are not supposed to be merged， I will revert them before merging. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 06/Jul/20 10:09 aashnajena commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-654142579 @zregvart please trigger the preview now， PR is ready for review ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 06/Jul/20 10:09 aashnajena commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-654142579 @zregvart please trigger the preview now， PR is ready for review ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 06/Jul/20 12:07 AemieJ commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-654193808 I have a few comments on these changes : You have only included the first child of the toolbar list and neglecting the rest. However， if you search for `Bean`， there is Bean under `Components` as well as `EIP`. Hence， I suggested including the links of the toolbar to avoid any cases of such behavior. If we were to use specific selectors， there would be no loophole. Another suggestion: Initially we made changes to the docs pages so that the title wasn't the only thing shown in the search result. I believe we can do the same with blog pages. The hierarchy I would prefer seeing the Blog as - ``` This being for the blog pages Blog ------- Category Name > Title of the blog ``` Another case that is not taken care of is that when you search a particular blog， it gives results from the `https://camel.apache.org/category/<title>` as well. To pass this case， I was thinking that we can't avoid crawling on categories as it could be the page where the user wants to land on however to avoid confusion on whether it is the blog page or the category page， we could provide specific layout such as - ``` This being for the category pages Category Name ------- Title of the Blog ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 06/Jul/20 12:07 AemieJ commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-654193808 I have a few comments on these changes : You have only included the first child of the toolbar list and neglecting the rest. However， if you search for `Bean`， there is Bean under `Components` as well as `EIP`. Hence， I suggested including the links of the toolbar to avoid any cases of such behavior. If we were to use specific selectors， there would be no loophole. Another suggestion: Initially we made changes to the docs pages so that the title wasn't the only thing shown in the search result. I believe we can do the same with blog pages. The hierarchy I would prefer seeing the Blog as - ``` This being for the blog pages Blog ------- Category Name > Title of the blog ``` Another case that is not taken care of is that when you search a particular blog， it gives results from the ` https://camel.apache.org/category/ <title>` as well. To pass this case， I was thinking that we can't avoid crawling on categories as it could be the page where the user wants to land on however to avoid confusion on whether it is the blog page or the category page， we could provide specific layout such as - ``` This being for the category pages Category Name ------- Title of the Blog ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 06/Jul/20 12:08 AemieJ edited a comment on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-654193808 I have a few comments on these changes : You have only included the first child of the toolbar list and neglected the rest. However， if you search for `Bean`， there is Bean under `Components` as well as `EIP`. Hence， I suggested including the links of the toolbar to avoid any cases of such behavior. If we were to use specific selectors， there would be no loophole. If there is another possible workaround and it works， that's good then. Another suggestion: Initially we made changes to the docs pages so that the title wasn't the only thing shown in the search result. I believe we can do the same with blog pages. The hierarchy I would prefer seeing the Blog as - ``` This being for the blog pages Blog ------- Category Name > Title of the blog ``` Another case that is not taken care of is that when you search a particular blog， it gives results from the `https://camel.apache.org/category/<title>` as well. To pass this case， I was thinking that we can't avoid crawling on categories as it could be the page where the user wants to land on however to avoid confusion on whether it is the blog page or the category page， we could provide specific layout such as - ``` This being for the category pages Category Name ------- Title of the Blog ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 06/Jul/20 12:08 AemieJ edited a comment on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-654193808 I have a few comments on these changes : You have only included the first child of the toolbar list and neglected the rest. However， if you search for `Bean`， there is Bean under `Components` as well as `EIP`. Hence， I suggested including the links of the toolbar to avoid any cases of such behavior. If we were to use specific selectors， there would be no loophole. If there is another possible workaround and it works， that's good then. Another suggestion: Initially we made changes to the docs pages so that the title wasn't the only thing shown in the search result. I believe we can do the same with blog pages. The hierarchy I would prefer seeing the Blog as - ``` This being for the blog pages Blog ------- Category Name > Title of the blog ``` Another case that is not taken care of is that when you search a particular blog， it gives results from the ` https://camel.apache.org/category/ <title>` as well. To pass this case， I was thinking that we can't avoid crawling on categories as it could be the page where the user wants to land on however to avoid confusion on whether it is the blog page or the category page， we could provide specific layout such as - ``` This being for the category pages Category Name ------- Title of the Blog ``` ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 06/Jul/20 12:42 aashnajena commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-654210877 About the first point， we can include the toolbar links without specifying selectors， but I don't think it's a good idea to have all the links from the toolbar. That would make the headings very long and repetitive for most components. I'd wait for some more reviews on this part. We need to make a call about how much of the hierarchy we want to show. My intent is to have one high-level topic - which should be used for *grouping* results， and the rest of the headings to consist of h1 and h2 only. I agree that we need to treat blogs differently. I'll try to push some changes for that soon! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 06/Jul/20 12:42 aashnajena commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-654210877 About the first point， we can include the toolbar links without specifying selectors， but I don't think it's a good idea to have all the links from the toolbar. That would make the headings very long and repetitive for most components. I'd wait for some more reviews on this part. We need to make a call about how much of the hierarchy we want to show. My intent is to have one high-level topic - which should be used for * grouping * results， and the rest of the headings to consist of h1 and h2 only. I agree that we need to treat blogs differently. I'll try to push some changes for that soon! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Aemie added a comment - 06/Jul/20 17:20 Zoran Regvart Maria Arias de Reyna Dominguez Aashna Jena I have updated the apache_demo.json. I am aware that it's really long but when I went through the config of a heavily distributed documentation based website， either the versions have different configs or it's a huge config according to specifications. With the one I have created， it will even notify the user that: Which search is under category and which one is under blog. Every menu item under the community will be visible alongside the community. For each doc， the names won't clash and no possible loopholes will be created as I have tested I understand we want to minify the file as much as possible but I strongly believe we require the use of start_urls and the different specific selectors. If Aashna Jena can resolve those earlier stated points with a minified version， then that's good ( I will think about it as well )， or else we could work on this current and move on to minify it. Show Aemie added a comment - 06/Jul/20 17:20 Zoran Regvart Maria Arias de Reyna Dominguez Aashna Jena I have updated the apache_demo.json. I am aware that it's really long but when I went through the config of a heavily distributed documentation based website， either the versions have different configs or it's a huge config according to specifications. With the one I have created， it will even notify the user that: Which search is under category and which one is under blog. Every menu item under the community will be visible alongside the community. For each doc， the names won't clash and no possible loopholes will be created as I have tested I understand we want to minify the file as much as possible but I strongly believe we require the use of start_urls and the different specific selectors. If Aashna Jena can resolve those earlier stated points with a minified version， then that's good ( I will think about it as well )， or else we could work on this current and move on to minify it. Hide Permalink Aashna Jena added a comment - 06/Jul/20 17:54 As I mentioned during the call today， I had prepared a config file with selectors similar to this one， but according to me， this poses maintenance issues. Versions， menu items， and blog categories are not fixed. We keep adding/changing categories， versions， and menu items， that's why I was against the idea of having to specify them explicitly in the config file， especially because it will mean that we have to put a PR on the Algolia repo every time we make a change. We have recently also merged two pages - docs and projects， and we might add/delete more webpages in the future， that's why I don't want to keep explicit start_urls as well - although this we might require to some extent. My idea was to keep the config file that I've suggested on the PR + add one new selector for Blog where lvl0 = "Blog"， lvl1 = header a.category， and lvl2=h1 and add the categories page in stop_urls to stop duplicating results. This way， we won't need an explicit set of categories. I'll wait for some more opinions before I make changes， because Aemie and I seem to be suggesting very different things. Show Aashna Jena added a comment - 06/Jul/20 17:54 As I mentioned during the call today， I had prepared a config file with selectors similar to this one， but according to me， this poses maintenance issues. Versions， menu items， and blog categories are not fixed. We keep adding/changing categories， versions， and menu items， that's why I was against the idea of having to specify them explicitly in the config file， especially because it will mean that we have to put a PR on the Algolia repo every time we make a change. We have recently also merged two pages - docs and projects， and we might add/delete more webpages in the future， that's why I don't want to keep explicit start_urls as well - although this we might require to some extent. My idea was to keep the config file that I've suggested on the PR + add one new selector for Blog where lvl0 = "Blog"， lvl1 = header a.category， and lvl2=h1 and add the categories page in stop_urls to stop duplicating results. This way， we won't need an explicit set of categories. I'll wait for some more opinions before I make changes， because Aemie and I seem to be suggesting very different things. Hide Permalink Zoran Regvart added a comment - 07/Jul/20 11:15 I'd try to make the configuration as simple as possible. Aemie is it possible to omit the values for variables， or that would not work. We release quite often and with the approach you're suggesting we would need to create PRs against Algolia repository every time we release a new version. I'm unsure about indexing the /categories， that seems redundant in addition to indexing /blog. I guess it's somewhat difficult to ascertain which configuration yields better search index， I think we need to define a set of criteria/tests to check. For example: If a documentation page has multiple versions， search results show what version a search hit belongs to In addition to the title we can see abstract of the page text Each search hit belongs to a category (blog， user manual， component reference， camel-k， camel-quarkus， camel-spring-boot， camel-karaf， camel-kafka-connector) Search hits contain breadcrumbs (Camel Components， Components， AWS， AWS Elastic Container Service (ECS)) ... Let's see about compiling a list so we can determine what configuration is an improvement. For the time being， we can start with the suggestions that Aashna Jena did on the PR#423， and make subsequent PRs to improve it. How does that sound? Show Zoran Regvart added a comment - 07/Jul/20 11:15 I'd try to make the configuration as simple as possible. Aemie is it possible to omit the values for variables， or that would not work. We release quite often and with the approach you're suggesting we would need to create PRs against Algolia repository every time we release a new version. I'm unsure about indexing the /categories ， that seems redundant in addition to indexing /blog . I guess it's somewhat difficult to ascertain which configuration yields better search index， I think we need to define a set of criteria/tests to check. For example: If a documentation page has multiple versions， search results show what version a search hit belongs to In addition to the title we can see abstract of the page text Each search hit belongs to a category (blog， user manual， component reference， camel-k， camel-quarkus， camel-spring-boot， camel-karaf， camel-kafka-connector) Search hits contain breadcrumbs (Camel Components， Components， AWS， AWS Elastic Container Service (ECS)) ... Let's see about compiling a list so we can determine what configuration is an improvement. For the time being， we can start with the suggestions that Aashna Jena did on the PR#423 ， and make subsequent PRs to improve it. How does that sound? Hide Permalink Aashna Jena added a comment - 07/Jul/20 11:41 I agree with all the points - I'll make some changes on the PR to index Blog (but not the categories page， since that's redundant). My only question is regarding the last point - do we want our search results to look like this? ----------------------------------- Camel Components ----------------------------------- latest >> Components >> AWS >> AWS Elastic Container Service (ECS) >> h2 heading I tried this and felt that is heading is way too long. I have currently configured it to have : ----------------------------------- Camel Components ----------------------------------- latest >> AWS Elastic Container Service (ECS) >> h2 heading But it's completely possible to include the intermediate levels of hierarchy. Please point out any more problems with the search on PR #423 Show Aashna Jena added a comment - 07/Jul/20 11:41 I agree with all the points - I'll make some changes on the PR to index Blog (but not the categories page， since that's redundant). My only question is regarding the last point - do we want our search results to look like this? ----------------------------------- Camel Components ----------------------------------- latest >> Components >> AWS >> AWS Elastic Container Service (ECS) >> h2 heading I tried this and felt that is heading is way too long. I have currently configured it to have : ----------------------------------- Camel Components ----------------------------------- latest >> AWS Elastic Container Service (ECS) >> h2 heading But it's completely possible to include the intermediate levels of hierarchy. Please point out any more problems with the search on PR #423 Hide Permalink Aemie added a comment - 07/Jul/20 12:28 - edited Aashna Jena For the last point that's what I have been trying to point out the mistake， you need to include all and the reason for that is there are certain topics such as Bean that comes under Component and EIP and their main toolbar link is Camel Components. And we also need to include h3 headings as well or else we are letting go of many possible search results for a query ( ex: URI format or Spring Boot Auto Configuration ) Zoran Regvart yes， the variables can be removed not necessary indeed. But along with that PR， I would like to see the whole configuration file Aashna designed to look through it. Show Aemie added a comment - 07/Jul/20 12:28 - edited Aashna Jena For the last point that's what I have been trying to point out the mistake， you need to include all and the reason for that is there are certain topics such as Bean that comes under Component and EIP and their main toolbar link is Camel Components. And we also need to include h3 headings as well or else we are letting go of many possible search results for a query ( ex: URI format or Spring Boot Auto Configuration ) Zoran Regvart yes， the variables can be removed not necessary indeed. But along with that PR， I would like to see the whole configuration file Aashna designed to look through it. Hide Permalink Aashna Jena added a comment - 07/Jul/20 17:31 I've changed my config file to include intermediate hierarchy levels and blog posts. It's available through the PR. Now， since intermediate levels are associated with each page， entries corresponding to those intermediate levels get recorded for every page， if you search for those intermediate levels， they will get repeated. Example， if you search for "integration patterns"， you'll get all the links which had "integration patterns" as their intermediate level. We can try to remove duplicates on the website side， but the problem is that all these search results have different "links" even though their text is the same. I'm attaching the config file I used as camel.json Show Aashna Jena added a comment - 07/Jul/20 17:31 I've changed my config file to include intermediate hierarchy levels and blog posts. It's available through the PR. Now， since intermediate levels are associated with each page， entries corresponding to those intermediate levels get recorded for every page， if you search for those intermediate levels， they will get repeated. Example， if you search for "integration patterns"， you'll get all the links which had "integration patterns" as their intermediate level. We can try to remove duplicates on the website side， but the problem is that all these search results have different "links" even though their text is the same. I'm attaching the config file I used as camel.json Hide Permalink Aemie added a comment - 07/Jul/20 19:36 Aashna Jena The configuration is minimal and accurate and takes care of the hierarchy. It's only the manner it's presented in the algolia search. We need to include other levels except for lvl0. Hence， algoliasearch.bundle.js needs to be changed to include the versions as well as the hierarchy. Show Aemie added a comment - 07/Jul/20 19:36 Aashna Jena The configuration is minimal and accurate and takes care of the hierarchy. It's only the manner it's presented in the algolia search. We need to include other levels except for lvl0. Hence， algoliasearch.bundle.js needs to be changed to include the versions as well as the hierarchy. Hide Permalink Aashna Jena added a comment - 07/Jul/20 20:20 I think versions and hierarchies are getting displayed with the existing algoliasearch.bundle.js. I'm not sure what you're referring to... Show Aashna Jena added a comment - 07/Jul/20 20:20 I think versions and hierarchies are getting displayed with the existing algoliasearch.bundle.js. I'm not sure what you're referring to... Hide Permalink Aashna Jena added a comment - 08/Jul/20 07:03 Not sure why you're seeing that. I'm on the preview of PR#423 and this is how it looks to me: Show Aashna Jena added a comment - 08/Jul/20 07:03 Not sure why you're seeing that. I'm on the preview of PR#423 and this is how it looks to me: Hide Permalink Aemie added a comment - 08/Jul/20 08:14 - edited No version and no hierarchy ( under the latest and 0.3.x version of camel Kafka connector). I have observed that for a few the version is the latest yet they don't have the version-menu present hence we would need to use the default value. This is from the preview one only for the PR that I tried experimenting with. Show Aemie added a comment - 08/Jul/20 08:14 - edited No version and no hierarchy ( under the latest and 0.3.x version of camel Kafka connector). I have observed that for a few the version is the latest yet they don't have the version-menu present hence we would need to use the default value. This is from the preview one only for the PR that I tried experimenting with. Hide Permalink Aashna Jena added a comment - 08/Jul/20 08:29 Zoran Regvart Maria Arias de Reyna Dominguez Can you please confirm if you're able or unable to see versions and hierarchies on this preview? Also， we need an opinion on whether we should show "latest" for pages that only have one version available on the website. I personally felt that it's not required， we would be unnecessarily confusing the user into thinking that there are other versions present for that page. If and when >1 versions are added for a page， "version-name" will start showing up on Search automatically. Although Aemie's point makes sense as well， so I think we should wait for some more opinions! Show Aashna Jena added a comment - 08/Jul/20 08:29 Zoran Regvart Maria Arias de Reyna Dominguez Can you please confirm if you're able or unable to see versions and hierarchies on this preview ? Also， we need an opinion on whether we should show "latest" for pages that only have one version available on the website. I personally felt that it's not required， we would be unnecessarily confusing the user into thinking that there are other versions present for that page. If and when >1 versions are added for a page， "version-name" will start showing up on Search automatically. Although Aemie 's point makes sense as well， so I think we should wait for some more opinions! Hide Permalink Aemie added a comment - 08/Jul/20 09:52 - edited Aashna Jena I might have had net issues. I observed it again， the hierarchy is working fine now however the version is not visible on a few queries still ( search for properties ) Show Aemie added a comment - 08/Jul/20 09:52 - edited Aashna Jena I might have had net issues. I observed it again， the hierarchy is working fine now however the version is not visible on a few queries still ( search for properties ) Hide Permalink Zoran Regvart added a comment - 08/Jul/20 17:39 If I search for "kafka" this is what I see (on the PR#423 preview): Seems like we have two different ideas on how to implement this， I find it the easiest to write down a set of criteria like the ones in comment， and list what we think is required for the first iteration of the search improvement and then test each implementation against those. Perhaps we can start there and see what do we find important right now and see if one implementation vs the other can deliver the desired results. Show Zoran Regvart added a comment - 08/Jul/20 17:39 If I search for "kafka" this is what I see (on the PR#423 preview ): Seems like we have two different ideas on how to implement this， I find it the easiest to write down a set of criteria like the ones in comment ， and list what we think is required for the first iteration of the search improvement and then test each implementation against those. Perhaps we can start there and see what do we find important right now and see if one implementation vs the other can deliver the desired results. Hide Permalink Aashna Jena added a comment - 08/Jul/20 18:00 - edited Zoran Regvart yes I'm aware of this issue. As I pointed out above， these duplicates are a problem that comes with including hierarchies. I'm sure all of those links that you see on the preview lead to different pages. From what I understand， when Docsearch indexes a page say Camel Components >> EIP >> Log which has 2 h2 headings - "Options" and "Exchange Properties" it will make the following records， all leading to the same URL: lvl0:Camel Components lvl0:Camel Components， lvl1:EIP lvl0:Camel Components， lvl1:EIP， lvl2:Log lvl0:Camel Components， lvl1:EIP， lvl2:Log， lvl3:Options lvl0:Camel Components， lvl1:EIP， lvl2:Log， lvl3:Options， text: some text lvl0:Camel Components， lvl1:EIP， lvl2:Log， lvl3:Exchange Options lvl0:Camel Components， lvl1:EIP， lvl2:Log， lvl3:Exchange Options， text: some text All of these point to the same URL， so basically there is an entry which says "Camel Components" for every page which starts from this hierarchy， and that's what you're seeing in the case of Kafka. I'm trying to understand how we can avoid this， I think we can use page weight to avoid this. Maybe we can remove duplicate text entries through algoliasearch.bundle.js? Show Aashna Jena added a comment - 08/Jul/20 18:00 - edited Zoran Regvart yes I'm aware of this issue. As I pointed out above， these duplicates are a problem that comes with including hierarchies. I'm sure all of those links that you see on the preview lead to different pages. From what I understand， when Docsearch indexes a page say Camel Components >> EIP >> Log which has 2 h2 headings - "Options" and "Exchange Properties" it will make the following records， all leading to the same URL : lvl0:Camel Components lvl0:Camel Components， lvl1:EIP lvl0:Camel Components， lvl1:EIP， lvl2:Log lvl0:Camel Components， lvl1:EIP， lvl2:Log， lvl3:Options lvl0:Camel Components， lvl1:EIP， lvl2:Log， lvl3:Options， text: some text lvl0:Camel Components， lvl1:EIP， lvl2:Log， lvl3:Exchange Options lvl0:Camel Components， lvl1:EIP， lvl2:Log， lvl3:Exchange Options， text: some text All of these point to the same URL， so basically there is an entry which says "Camel Components" for every page which starts from this hierarchy， and that's what you're seeing in the case of Kafka. I'm trying to understand how we can avoid this， I think we can use page weight to avoid this. Maybe we can remove duplicate text entries through algoliasearch.bundle.js? Hide Permalink Aashna Jena added a comment - 10/Jul/20 18:31 I'm starting to notice more problems with DocSearch.. versions are not getting recorded for some pages， although it is completely random and if I try to include them on level4 instead of 1， they show up. Similarly， in some records， intermediate hierarchies are getting lost even though lvl0 and lvl4 are present.. I'm not sure what is causing such behaviour. A lot of records do not have their h1 heading recorded even though it's present for every document. I tried to scrape just one "properties" component page and looked at its records， but I'm really not able to understand why versions are recorded in some records， but are missing in the rest. For example， if you search for "Properties"， you can see multiple entries but no versions. But if you search for "propertyplaceholder"， which is an h2 on the properties page， you can see it coming up with its version. I'm starting to think that we should think about making our own index because : a) I can't understand how the records are being made. It's not very consistent. b) Too many duplicate records getting made and I can't figure out how to remove them. Perhaps we can merge these changes as they do provide a better search experience than before and then proceed to make our own index? Aemie does your config work smoothly for all versions and intermediate levels? Show Aashna Jena added a comment - 10/Jul/20 18:31 I'm starting to notice more problems with DocSearch.. versions are not getting recorded for some pages， although it is completely random and if I try to include them on level4 instead of 1， they show up. Similarly， in some records， intermediate hierarchies are getting lost even though lvl0 and lvl4 are present.. I'm not sure what is causing such behaviour. A lot of records do not have their h1 heading recorded even though it's present for every document. I tried to scrape just one "properties" component page and looked at its records， but I'm really not able to understand why versions are recorded in some records， but are missing in the rest. For example， if you search for "Properties"， you can see multiple entries but no versions. But if you search for "propertyplaceholder"， which is an h2 on the properties page， you can see it coming up with its version. I'm starting to think that we should think about making our own index because : a) I can't understand how the records are being made. It's not very consistent. b) Too many duplicate records getting made and I can't figure out how to remove them. Perhaps we can merge these changes as they do provide a better search experience than before and then proceed to make our own index? Aemie does your config work smoothly for all versions and intermediate levels? Hide Permalink Aemie added a comment - 11/Jul/20 11:30 - edited Aashna Jena as I have included version explicitly as variables， they will always be present for each crawled page with docs. However， you will have to use that variable explicitly. I believe intermediate levels work smoothly according to the config provided. I have updated my config to include the stop URLs you mentioned and removed config for community and category. Try it and let me know. Show Aemie added a comment - 11/Jul/20 11:30 - edited Aashna Jena as I have included version explicitly as variables， they will always be present for each crawled page with docs. However， you will have to use that variable explicitly. I believe intermediate levels work smoothly according to the config provided. I have updated my config to include the stop URLs you mentioned and removed config for community and category. Try it and let me know. Hide Permalink Aashna Jena added a comment - 11/Jul/20 11:41 My free trial has expired so I can't try it locally. Maybe you can share some screenshots of how search results are showing up. For example， is "Properties" showing up with version & intermediate levels， and are the H2s under "Properties" showing up with full hierarchy + H1? Also， is there a way to not hard code the versions? As Zoran mentioned， they change very frequently. Show Aashna Jena added a comment - 11/Jul/20 11:41 My free trial has expired so I can't try it locally. Maybe you can share some screenshots of how search results are showing up. For example， is "Properties" showing up with version & intermediate levels， and are the H2s under "Properties" showing up with full hierarchy + H1? Also， is there a way to not hard code the versions? As Zoran mentioned， they change very frequently. Hide Permalink Aemie added a comment - 11/Jul/20 17:12 Aashna Jena added a specific search result on hazelcast. For the version， I will have to think about trying with the nav-explore-menu as the toolbar ain't working. Show Aemie added a comment - 11/Jul/20 17:12 Aashna Jena added a specific search result on hazelcast. For the version， I will have to think about trying with the nav-explore-menu as the toolbar ain't working. Hide Permalink Aemie added a comment - 12/Jul/20 08:33 Aashna Jena I updated my config to include the version and with this event， the latest can be observed and you don't have to explicitly set it. Below is the hierarchy when I did the crawling through a few records and searched on properties - Show Aemie added a comment - 12/Jul/20 08:33 Aashna Jena I updated my config to include the version and with this event， the latest can be observed and you don't have to explicitly set it. Below is the hierarchy when I did the crawling through a few records and searched on properties - Hide Permalink Aashna Jena added a comment - 13/Jul/20 10:03 Aemie we want the results to group by "Camel Components". So we should have "div.toolbar ul li:nth-child(1) a" on lvl0 and version on lvl1. Basically interchange lvl0 and lvl1 in your config. But as soon as I do that， the versions stop showing up. This is the same problem I was facing before with the old config. Show Aashna Jena added a comment - 13/Jul/20 10:03 Aemie we want the results to group by "Camel Components". So we should have "div.toolbar ul li:nth-child(1) a" on lvl0 and version on lvl1. Basically interchange lvl0 and lvl1 in your config. But as soon as I do that， the versions stop showing up. This is the same problem I was facing before with the old config. Hide Permalink Aashna Jena added a comment - 13/Jul/20 11:06 List of features on search : If a page has multiple versions， the version should be visible. Each search hit should be grouped under User Manual [version]， Camel Components [version]， Blog， Downloads， Community， or some sub-project. No duplicate results should be shown. Each header in the search results should read differently. Each result should contain a snippet of text/abstract with relevant words highlighted. Intermediate levels of hierarchy should be visible in the header/title of each search result. Suggestion : I have noticed that the first level of breadcrumbs for Components 2.x reads "Component Reference" and for higher versions， it reads "Camel Components". When we search for eg "Yammer" which is present in all 3 versions， Yammer 3.4.x and Yammer latest get grouped under "Camel Components" and Yammer 2.x goes under "Component Reference". I think it will be much clearer to have the top-level headings as "Camel Components [latest]"， "Camel Components [3.4.x]" and "Component Reference [2.x]". In such a case all search hits will get grouped by version as well. I'm working on this， hopefully I'll have something to show soon. Show Aashna Jena added a comment - 13/Jul/20 11:06 List of features on search : If a page has multiple versions， the version should be visible. Each search hit should be grouped under User Manual [version] ， Camel Components [version] ， Blog， Downloads， Community， or some sub-project. No duplicate results should be shown. Each header in the search results should read differently. Each result should contain a snippet of text/abstract with relevant words highlighted. Intermediate levels of hierarchy should be visible in the header/title of each search result. Suggestion : I have noticed that the first level of breadcrumbs for Components 2.x reads "Component Reference" and for higher versions， it reads "Camel Components". When we search for eg "Yammer" which is present in all 3 versions， Yammer 3.4.x and Yammer latest get grouped under "Camel Components" and Yammer 2.x goes under "Component Reference". I think it will be much clearer to have the top-level headings as " Camel Components [latest] "， " Camel Components [3.4.x] " and " Component Reference [2.x] ". In such a case all search hits will get grouped by version as well. I'm working on this， hopefully I'll have something to show soon. Hide Permalink ASF GitHub Bot added a comment - 13/Jul/20 14:06 aashnajena commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-657582171 @zregvart @Delawen @AemieJ I've made some changes and pushed a new index. This iteration fixes a lot of previous issues and has the following features : Pages are grouped by versions. Versions are displayed along with the top-level heading. Versions should appear for all documentation pages now Each search result is grouped under User Manual [version]， Camel Components [version]， Blog， Books， Downloads， Community， or some sub-project [version]. No duplicate results are shown. Try searching for "Components" or "Kafka" or an intermediate hierarchy level like "Architecture". You shouldn't be seeing duplicate results as was the case earlier. Each result contains a snippet of text/abstract with relevant words highlighted. Earlier， abstract was not appearing in many cases. Intermediate levels of hierarchy are visible in the header/title of each search result. As far as I have checked， there are no missing levels. Earlier I had observed some inconsistencies with pages like "Properties" Known problems: For Blog， the < > arrows are showing up in abstract. I have removed this in the final config file， however， it's too lengthy for me to create the whole index again. Please overlook this detail. Please review the changes this week， because I'm again on a free Algolia trial， as our community account does not allow me to push >10k records for test app. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 13/Jul/20 14:06 aashnajena commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-657582171 @zregvart @Delawen @AemieJ I've made some changes and pushed a new index. This iteration fixes a lot of previous issues and has the following features : Pages are grouped by versions. Versions are displayed along with the top-level heading. Versions should appear for all documentation pages now Each search result is grouped under User Manual [version] ， Camel Components [version] ， Blog， Books， Downloads， Community， or some sub-project [version] . No duplicate results are shown. Try searching for "Components" or "Kafka" or an intermediate hierarchy level like "Architecture". You shouldn't be seeing duplicate results as was the case earlier. Each result contains a snippet of text/abstract with relevant words highlighted. Earlier， abstract was not appearing in many cases. Intermediate levels of hierarchy are visible in the header/title of each search result. As far as I have checked， there are no missing levels. Earlier I had observed some inconsistencies with pages like "Properties" Known problems: For Blog， the < > arrows are showing up in abstract. I have removed this in the final config file， however， it's too lengthy for me to create the whole index again. Please overlook this detail. Please review the changes this week， because I'm again on a free Algolia trial， as our community account does not allow me to push >10k records for test app. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 13/Jul/20 14:25 aashnajena edited a comment on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-657582171 @zregvart @Delawen @AemieJ I've made some changes and pushed a new index. This iteration fixes a lot of previous issues and has the following features : Pages are grouped by versions. Versions are displayed along with the top-level heading. Versions should appear for all documentation pages now Each search result is grouped under User Manual [version]， Camel Components [version]， Blog， Books， Downloads， Community， or some sub-project [version]. No duplicate results are shown. Try searching for "Components" or "Kafka" or an intermediate hierarchy level like "Architecture". You shouldn't be seeing duplicate results as was the case earlier. Each result contains a snippet of text/abstract with relevant words highlighted. Earlier， abstract was not appearing in many cases. Intermediate levels of hierarchy are visible in the header/title of each search result. As far as I have checked， there are no missing levels. Earlier I had observed some inconsistencies with pages like "Properties" Known problems: For Blog， the < > arrows are showing up in abstract. I have removed this in the final config file， however， it's too lengthy for me to create the whole index again. Please overlook this detail. "Building" page appears separately because it's not included in the user manual. We need to either shift it or decide how to display it. Please review the changes this week， because I'm again on a free Algolia trial， as our community account does not allow me to push >10k records for test app. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 13/Jul/20 14:25 aashnajena edited a comment on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-657582171 @zregvart @Delawen @AemieJ I've made some changes and pushed a new index. This iteration fixes a lot of previous issues and has the following features : Pages are grouped by versions. Versions are displayed along with the top-level heading. Versions should appear for all documentation pages now Each search result is grouped under User Manual [version] ， Camel Components [version] ， Blog， Books， Downloads， Community， or some sub-project [version] . No duplicate results are shown. Try searching for "Components" or "Kafka" or an intermediate hierarchy level like "Architecture". You shouldn't be seeing duplicate results as was the case earlier. Each result contains a snippet of text/abstract with relevant words highlighted. Earlier， abstract was not appearing in many cases. Intermediate levels of hierarchy are visible in the header/title of each search result. As far as I have checked， there are no missing levels. Earlier I had observed some inconsistencies with pages like "Properties" Known problems: For Blog， the < > arrows are showing up in abstract. I have removed this in the final config file， however， it's too lengthy for me to create the whole index again. Please overlook this detail. "Building" page appears separately because it's not included in the user manual. We need to either shift it or decide how to display it. Please review the changes this week， because I'm again on a free Algolia trial， as our community account does not allow me to push >10k records for test app. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 13/Jul/20 14:48 AemieJ commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-657604938 Include `index.html` within `stop_urls` list within the config. ![error](https://user-images.githubusercontent.com/44139348/87318392-e5615d00-c545-11ea-823a-53affa2b9d1a.png) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 13/Jul/20 14:48 AemieJ commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-657604938 Include `index.html` within `stop_urls` list within the config. ! [error] ( https://user-images.githubusercontent.com/44139348/87318392-e5615d00-c545-11ea-823a-53affa2b9d1a.png ) ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 15/Jul/20 10:36 Delawen commented on a change in pull request #423: URL: https://github.com/apache/camel-website/pull/423#discussion_r454955675 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -4，8 +4，8 @@ const algoliasearch = require('algoliasearch/lite') window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') + const client = algoliasearch('XW4Y7DJE2Z'， '2423e9780121b010cad442bfb45a4714') + const index = client.initIndex('camel_test') Review comment: Do we want to call it "test"? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 15/Jul/20 10:36 Delawen commented on a change in pull request #423: URL: https://github.com/apache/camel-website/pull/423#discussion_r454955675 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -4，8 +4，8 @@ const algoliasearch = require('algoliasearch/lite') window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') + const client = algoliasearch('XW4Y7DJE2Z'， '2423e9780121b010cad442bfb45a4714') + const index = client.initIndex('camel_test') Review comment: Do we want to call it "test"? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 15/Jul/20 10:39 Delawen commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-658693183 I love PR that the total count remove lines I like it. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 15/Jul/20 10:39 Delawen commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-658693183 I love PR that the total count remove lines I like it. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 15/Jul/20 10:41 aashnajena commented on a change in pull request #423: URL: https://github.com/apache/camel-website/pull/423#discussion_r454958567 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -4，8 +4，8 @@ const algoliasearch = require('algoliasearch/lite') window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') + const client = algoliasearch('XW4Y7DJE2Z'， '2423e9780121b010cad442bfb45a4714') + const index = client.initIndex('camel_test') Review comment: These two lines of changes will be reverted before merging. "camel_test" is the name of my temporary local index which I have linked here so that everyone can see the improved search results. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 15/Jul/20 10:41 aashnajena commented on a change in pull request #423: URL: https://github.com/apache/camel-website/pull/423#discussion_r454958567 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -4，8 +4，8 @@ const algoliasearch = require('algoliasearch/lite') window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') + const client = algoliasearch('XW4Y7DJE2Z'， '2423e9780121b010cad442bfb45a4714') + const index = client.initIndex('camel_test') Review comment: These two lines of changes will be reverted before merging. "camel_test" is the name of my temporary local index which I have linked here so that everyone can see the improved search results. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 15/Jul/20 10:42 zregvart commented on a change in pull request #423: URL: https://github.com/apache/camel-website/pull/423#discussion_r454958942 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -4，8 +4，8 @@ const algoliasearch = require('algoliasearch/lite') window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') + const client = algoliasearch('XW4Y7DJE2Z'， '2423e9780121b010cad442bfb45a4714') + const index = client.initIndex('camel_test') Review comment: > Do we want to call it "test"? This is against the test index configuration so we can see the different index configuration in the preview， before we merge we'll revert to the production values. That reminds me we also need to create a PR with the configuration change at Algolia. @aashnajena， @AemieJ do we need to merge the configuration change at Algolia before we merge this change? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 15/Jul/20 10:42 zregvart commented on a change in pull request #423: URL: https://github.com/apache/camel-website/pull/423#discussion_r454958942 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -4，8 +4，8 @@ const algoliasearch = require('algoliasearch/lite') window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') + const client = algoliasearch('XW4Y7DJE2Z'， '2423e9780121b010cad442bfb45a4714') + const index = client.initIndex('camel_test') Review comment: > Do we want to call it "test"? This is against the test index configuration so we can see the different index configuration in the preview， before we merge we'll revert to the production values. That reminds me we also need to create a PR with the configuration change at Algolia. @aashnajena， @AemieJ do we need to merge the configuration change at Algolia before we merge this change? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 15/Jul/20 10:52 aashnajena commented on a change in pull request #423: URL: https://github.com/apache/camel-website/pull/423#discussion_r454963783 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -4，8 +4，8 @@ const algoliasearch = require('algoliasearch/lite') window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') + const client = algoliasearch('XW4Y7DJE2Z'， '2423e9780121b010cad442bfb45a4714') + const index = client.initIndex('camel_test') Review comment: This PR is so that everyone can search for keywords on the [preview](https://deploy-preview-423--camel.netlify.app/) and comment on whether we are getting better results than before (in terms of grouping results， duplicates， versions， etc). ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 15/Jul/20 10:52 aashnajena commented on a change in pull request #423: URL: https://github.com/apache/camel-website/pull/423#discussion_r454963783 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -4，8 +4，8 @@ const algoliasearch = require('algoliasearch/lite') window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') + const client = algoliasearch('XW4Y7DJE2Z'， '2423e9780121b010cad442bfb45a4714') + const index = client.initIndex('camel_test') Review comment: This PR is so that everyone can search for keywords on the [preview] ( https://deploy-preview-423--camel.netlify.app/ ) and comment on whether we are getting better results than before (in terms of grouping results， duplicates， versions， etc). ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 15/Jul/20 10:58 aashnajena commented on a change in pull request #423: URL: https://github.com/apache/camel-website/pull/423#discussion_r454966989 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -4，8 +4，8 @@ const algoliasearch = require('algoliasearch/lite') window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') + const client = algoliasearch('XW4Y7DJE2Z'， '2423e9780121b010cad442bfb45a4714') + const index = client.initIndex('camel_test') Review comment: @zregvart Yes， we need to make a PR on Algolia's repository first. If you're satisfied with the current search results， should I go ahead and make that PR? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 15/Jul/20 10:58 aashnajena commented on a change in pull request #423: URL: https://github.com/apache/camel-website/pull/423#discussion_r454966989 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -4，8 +4，8 @@ const algoliasearch = require('algoliasearch/lite') window.addEventListener('load'， () => { const client = algoliasearch('BH4D9OD16A'， '16e3a9155a136e4962dc4c206f8278bd') const index = client.initIndex('apache_camel') + const client = algoliasearch('XW4Y7DJE2Z'， '2423e9780121b010cad442bfb45a4714') + const index = client.initIndex('camel_test') Review comment: @zregvart Yes， we need to make a PR on Algolia's repository first. If you're satisfied with the current search results， should I go ahead and make that PR? ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 15/Jul/20 10:59 AemieJ commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-658701710 Based on `index.html` it creates duplicate results for certain queries as `/` and `/index.html` leads to the same page so if Aashna can check by including `index.html` within `stop_urls`， then I believe it will possibly all the duplicate results. Example - [Community page with index.html within webpage domain](https://camel.apache.org/manual/latest/index.html#_community) and [same community page without the index.html within webpage domain](https://camel.apache.org/manual/latest/#_community) @zregvart I also was thinking of a few tweaks in the design and presentation for the search results but I wanted to tell after this search was updated with max possible efficiency. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 15/Jul/20 10:59 AemieJ commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-658701710 Based on `index.html` it creates duplicate results for certain queries as `/` and `/index.html` leads to the same page so if Aashna can check by including `index.html` within `stop_urls`， then I believe it will possibly all the duplicate results. Example - [Community page with index.html within webpage domain] ( https://camel.apache.org/manual/latest/index.html#_community ) and [same community page without the index.html within webpage domain] ( https://camel.apache.org/manual/latest/#_community ) @zregvart I also was thinking of a few tweaks in the design and presentation for the search results but I wanted to tell after this search was updated with max possible efficiency. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 15/Jul/20 11:27 aashnajena commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-658713360 @AemieJ yes I have included `index.html` under stop_urls. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 15/Jul/20 11:27 aashnajena commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-658713360 @AemieJ yes I have included `index.html` under stop_urls. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 15/Jul/20 12:12 aashnajena commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-658731394 I have opened a [Pull Request](https://github.com/algolia/docsearch-configs/pull/2097) on Algolia's Docsearch Configs repository. @zregvart They require a maintainer of the camel-website repository to approve those changes. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 15/Jul/20 12:12 aashnajena commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-658731394 I have opened a [Pull Request] ( https://github.com/algolia/docsearch-configs/pull/2097 ) on Algolia's Docsearch Configs repository. @zregvart They require a maintainer of the camel-website repository to approve those changes. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 15/Jul/20 19:18 AemieJ commented on a change in pull request #423: URL: https://github.com/apache/camel-website/pull/423#discussion_r455284733 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -53，22 +53，16 @@ const data = hits.reduce((data， hit) => { const d = {} d.url = hit.url + var section = hit.hierarchy.lvl1 + if (hit.hierarchy.lvl0 !== null) section = section + ' [' + hit.hierarchy.lvl0 + ']' var breadcrumbs = Object.values(hit.hierarchy) .slice(1) + .slice(2) .filter((lvl) => lvl !== null) .join(' » ') if (breadcrumbs !== '') { - d.breadcrumbs = breadcrumbs - } else { - d.breadcrumbs = hit.hierarchy.lvl0 - } if (hit._snippetResult !== undefined) { - d.snippet = hit._snippetResult.content.value - } else { - d.snippet = '' - } - const section = hit.hierarchy.lvl0 + Review comment: There is a trailing space here according to netlify， same case with line 65. Remove it and then we could test the preview. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 15/Jul/20 19:18 AemieJ commented on a change in pull request #423: URL: https://github.com/apache/camel-website/pull/423#discussion_r455284733 ########## File path: antora-ui-camel/src/js/vendor/algoliasearch.bundle.js ########## @@ -53，22 +53，16 @@ const data = hits.reduce((data， hit) => { const d = {} d.url = hit.url + var section = hit.hierarchy.lvl1 + if (hit.hierarchy.lvl0 !== null) section = section + ' [' + hit.hierarchy.lvl0 + '] ' var breadcrumbs = Object.values(hit.hierarchy) .slice(1) + .slice(2) .filter((lvl) => lvl !== null) .join(' » ') if (breadcrumbs !== '') { - d.breadcrumbs = breadcrumbs - } else { - d.breadcrumbs = hit.hierarchy.lvl0 - } if (hit._snippetResult !== undefined) { - d.snippet = hit._snippetResult.content.value - } else { - d.snippet = '' - } - const section = hit.hierarchy.lvl0 + Review comment: There is a trailing space here according to netlify， same case with line 65. Remove it and then we could test the preview. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 19/Jul/20 13:03 aashnajena commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-660640718 @zregvart can we merge this? We need these changes for Search to work correctly on the website. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 19/Jul/20 13:03 aashnajena commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-660640718 @zregvart can we merge this? We need these changes for Search to work correctly on the website. ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 20/Jul/20 23:00 zregvart commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-661413199 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 20/Jul/20 23:00 zregvart commented on pull request #423: URL: https://github.com/apache/camel-website/pull/423#issuecomment-661413199 Thanks! ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink ASF GitHub Bot added a comment - 20/Jul/20 23:00 zregvart merged pull request #423: URL: https://github.com/apache/camel-website/pull/423 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Show ASF GitHub Bot added a comment - 20/Jul/20 23:00 zregvart merged pull request #423: URL: https://github.com/apache/camel-website/pull/423 ---------------------------------------------------------------- This is an automated message from the Apache Git Service. To respond to the message， please log on to GitHub and use the URL above to go to the specific comment. For queries about this service， please contact Infrastructure at: users@infra.apache.org Hide Permalink Zoran Regvart added a comment - 01/Aug/20 18:35 Thanks Aashna Jena and Aemie， I think the search performs much better now! Show Zoran Regvart added a comment - 01/Aug/20 18:35 Thanks Aashna Jena and Aemie ， I think the search performs much better now!
CAMEL-14951,Claus Ibsen,2020-04-22T11:22:08+0000,1587540128， where 1587540128 is the epoch,If for example you use a custom thread pool with abort policy and the task is aborted then camels error handler should be able to react,There are no comments yet on this issue.
CAMEL-14950,Jiri Ondrusek,2020-04-22T08:49:58+0000,1587530998， where 1587530998 is the epoch,Spring-security allows various security configurations for running servers.In case of camel-undertow it should be possible to enhance component to be able to use token bearer security with use of UndertowSecurityProvider (https://github.com/apache/camel/pull/3652),There are no comments yet on this issue.
CAMEL-14949,Andrea Cosentino,2020-04-22T08:42:45+0000,1587530565， where 1587530565 is the epoch,Slack is deprecating the "legacy" token authentication. We should migrate from that to OAuth for authentication. Note there are several types of tokens at Slack.,There are no comments yet on this issue.
CAMEL-14948,Ramu,2020-04-30T02:12:09+0000,1588198329， where 1588198329 is the epoch,channels.list API has been deprecated and for new applications will no longer function. We need to migrate from it.,Hide Permalink Ramu added a comment - 30/Apr/20 02:12 started working Show Ramu added a comment - 30/Apr/20 02:12 started working
CAMEL-14947,Claus Ibsen,2020-04-22T07:39:19+0000,1587526759， where 1587526759 is the epoch,In CAMEL-12733 the check for existing directories used by autoCreate was changed from ChannelSftp.cd to ChannelSftp.ls to fix a Windows specific issue.cd is a remote operation while ls will actually load the full directory listing and load it over the wire. This happens for every file that are to be written. If the remote directory has a lot of files this has a heavy performance penalty.In our case the directory some times contains 50.000+ files. Without autoCreate the writes take a few milliseconds. With autoCreate it takes up to 10 seconds due to the huge directory listing being generated and loaded over the wire for every single file to be written.This can be solved by reverting the directory check to a remote operation such as cd and fixing the Windows specific issue in another way.If it turns out that ls has to be used (unlikely) please note that there is another variant that takes a selector that enables you to abort the actual loading of the listing:ls(String path， LsEntrySelector selector),Hide Permalink Claus Ibsen added a comment - 22/Apr/20 07:39 Thanks you are welcome to attempt to provide a fix as PR or patch file. One idea could be to have a new option true|false that choses this and the old way， then the windows users can use this mode and others can use the faster old way. Show Claus Ibsen added a comment - 22/Apr/20 07:39 Thanks you are welcome to attempt to provide a fix as PR or patch file. One idea could be to have a new option true|false that choses this and the old way， then the windows users can use this mode and others can use the faster old way. Hide Permalink Claus Ibsen added a comment - 25/Apr/20 06:53 Thanks I polished the PR and renamed the option， and also by default using the faster LS with the break filter. Show Claus Ibsen added a comment - 25/Apr/20 06:53 Thanks I polished the PR and renamed the option， and also by default using the faster LS with the break filter. Hide Permalink Claus Ibsen added a comment - 25/Apr/20 07:01 If you want to help backport this to branch camel-2.25.x then can you take the commits we have done together and create a new PR. Otherwise we may not have time to do this and this will only be in 3.x. Show Claus Ibsen added a comment - 25/Apr/20 07:01 If you want to help backport this to branch camel-2.25.x then can you take the commits we have done together and create a new PR. Otherwise we may not have time to do this and this will only be in 3.x. Hide Permalink Christian Nedregård added a comment - 25/Apr/20 08:24 - edited Claus Ibsen I thought I'd do the backport. Question: In SftpConfiguration the doc on setExistDirCheckUsingLs states that cd is default but the existDirCheckUsingLs property is actually true by default. Bug? (it was not me that did the 3.x PR) Show Christian Nedregård added a comment - 25/Apr/20 08:24 - edited Claus Ibsen I thought I'd do the backport. Question: In SftpConfiguration the doc on setExistDirCheckUsingLs states that cd is default but the existDirCheckUsingLs property is actually true by default. Bug? (it was not me that did the 3.x PR) Hide Permalink Claus Ibsen added a comment - 25/Apr/20 09:29 Ah yeah the doc is wrong Show Claus Ibsen added a comment - 25/Apr/20 09:29 Ah yeah the doc is wrong Hide Permalink Claus Ibsen added a comment - 25/Apr/20 09:48 I am fixing the doc. And you are also welcome to do a backport of https://issues.apache.org/jira/browse/CAMEL-14915 Show Claus Ibsen added a comment - 25/Apr/20 09:48 I am fixing the doc. And you are also welcome to do a backport of https://issues.apache.org/jira/browse/CAMEL-14915 Hide Permalink Claus Ibsen added a comment - 25/Apr/20 10:05 Okay doc fixed Show Claus Ibsen added a comment - 25/Apr/20 10:05 Okay doc fixed Hide Permalink Jari Lammassaari added a comment - 02/Oct/20 09:39 Any plans to backport this to 2.25 Show Jari Lammassaari added a comment - 02/Oct/20 09:39 Any plans to backport this to 2.25 Hide Permalink Claus Ibsen added a comment - 02/Oct/20 09:50 No 2.25.x is only security fixes and very important bugs Show Claus Ibsen added a comment - 02/Oct/20 09:50 No 2.25.x is only security fixes and very important bugs
CAMEL-14946,Unassigned,2020-04-22T04:48:52+0000,1587516532， where 1587516532 is the epoch,Add a new kamel install switch to allow overriding the buildah image， e.g. "--buildah-image"This switch would work in a similar fashion to "-base-image" and "-operator-image".Whenever a new "kamel run" command gets used， the overriden buildah image would get used.,Hide Permalink Dmitry Volodin added a comment - 22/Apr/20 04:48 Daniel Tremblay， camel-k has own issue tracker on GitHub https://github.com/apache/camel-k/issues Please submit it there Show Dmitry Volodin added a comment - 22/Apr/20 04:48 Daniel Tremblay ， camel-k has own issue tracker on GitHub https://github.com/apache/camel-k/issues Please submit it there Hide Permalink Andrea Cosentino added a comment - 22/Apr/20 06:51 Please report in the github issues tracker for camel-k. Thanks. Show Andrea Cosentino added a comment - 22/Apr/20 06:51 Please report in the github issues tracker for camel-k. Thanks.
CAMEL-14945,David Jencks,2020-04-23T21:35:09+0000,1587663309， where 1587663309 is the epoch,Recent versions of Antora allow you to specify asciidoc attributes in the component descriptor， not just the playbook. Since 'camel-quarkus-last-release' is only used in camel-quarks， it can be defined in the c-q antora.yml component descriptor， avoiding duplication and the need to update the main playbook on every release.I'll submit a PR in a day or two when Antora 2.3.0 is released.,Hide Permalink David Jencks added a comment - 23/Apr/20 21:35 PR applied. Will remove from camel-website playbook soon in a separate PR with an upgrade to Antora 2.3.0 Show David Jencks added a comment - 23/Apr/20 21:35 PR applied. Will remove from camel-website playbook soon in a separate PR with an upgrade to Antora 2.3.0
CAMEL-14944,Unassigned,2020-04-22T04:51:08+0000,1587516668， where 1587516668 is the epoch,Hello，I am defining a REST route with route identifier "mngt-endpoint-stats"restConfiguration().component("undertow").bindingMode(RestBindingMode.json).contextPath("/").host("0.0.0.0").port(9090).apiContextPath("/api-doc").apiContextRouteId("api-doc-endpoint").apiProperty("api.title"， "Producer API").apiProperty("api.version"， "1.0.0").apiProperty("cors"， "true");rest("/mngt").id("mngt-endpoint") .consumes("application/json").produces("application/json") .get("/stats").id("mngt-endpoint-stats").description("Stats Apache Camel") .to(StatsRouteBuilder.DIRECT_STATS) I want to suspend/resume the route dynamically due schedule maintenance periods or return 503 along that time. I am trying to use the controlbus to suspend the route but after call it the endpoint is still available and working. .toD("controlbus:route?routeId=${exchangeProperty.routesIds[${exchangeProperty.CamelLoopIndex}]}&action=suspend");,Hide Permalink Claus Ibsen added a comment - 22/Apr/20 04:51 Use .routeId to set the route id in the rest-dsl Show Claus Ibsen added a comment - 22/Apr/20 04:51 Use .routeId to set the route id in the rest-dsl Hide Permalink Emmerson added a comment - 22/Apr/20 11:09 - edited Many thanks， is working !!! The only problem I found I think is about how to use REST DSL API， because after set the routeId I wasn't able to declare another resource， so I come up with following declaration which is working fine. rest("/mngt").id("mngt-endpoint").description("RabbitMQ Camel Management service") .consumes("application/json").produces("application/json") .get("/stats") .description("Stats Apache Camel").route().routeId("mngt-endpoint-stats") .to(StatsRouteBuilder.DIRECT_STATS) ; rest("/mngt").id("mngt-endpoint").description("RabbitMQ Camel Management service") .consumes("application/json").produces("application/json") .get("/shutdown") .description("Shutdown Apache Camel").route().routeId("mngt-endpoint-shutdown") .to(ShutdownRouteBuilder.DIRECT_SHUTDOWN_MESSAGE_CONSUMERS_ENDPOINT) ; Show Emmerson added a comment - 22/Apr/20 11:09 - edited Many thanks， is working !!! The only problem I found I think is about how to use REST DSL API， because after set the routeId I wasn't able to declare another resource， so I come up with following declaration which is working fine. rest ( "/mngt" ).id( "mngt-endpoint" ).description( "RabbitMQ Camel Management service" ) .consumes( "application/json" ).produces( "application/json" ) .get( "/stats" ) .description( "Stats Apache Camel" ).route().routeId( "mngt-endpoint-stats" ) .to(StatsRouteBuilder.DIRECT_STATS) ; rest ( "/mngt" ).id( "mngt-endpoint" ).description( "RabbitMQ Camel Management service" ) .consumes( "application/json" ).produces( "application/json" ) .get( "/shutdown" ) .description( "Shutdown Apache Camel" ).route().routeId( "mngt-endpoint-shutdown" ) .to(ShutdownRouteBuilder.DIRECT_SHUTDOWN_MESSAGE_CONSUMERS_ENDPOINT) ; Hide Permalink Emmerson added a comment - 22/Apr/20 15:52 Sorry， The component work when I do stop or restart， but not when I use "suspend". Working calls .toD("controlbus:route?routeId=${exchangeProperty.route-id}&action=stop") .toD("controlbus:route?routeId=${exchangeProperty.route-id}&action=restart&restartDelay=10000") NOT Working calls .toD("controlbus:route?routeId=${exchangeProperty.route-id}&action=suspend") Show Emmerson added a comment - 22/Apr/20 15:52 Sorry， The component work when I do stop or restart， but not when I use " suspend ". Working calls .toD("controlbus:route?routeId=${exchangeProperty.route-id}&action=stop") .toD("controlbus:route?routeId=${exchangeProperty.route-id}&action=restart&restartDelay=10000") NOT Working calls .toD("controlbus:route?routeId=${exchangeProperty.route-id}&action=suspend") Hide Permalink Claus Ibsen added a comment - 23/Apr/20 06:20 The stop vs suspend has nothing to do with rest-dsl， and depends on the implementation of the camel-undertow component if it supports suspension nor not. Show Claus Ibsen added a comment - 23/Apr/20 06:20 The stop vs suspend has nothing to do with rest-dsl， and depends on the implementation of the camel-undertow component if it supports suspension nor not. Hide Permalink Claus Ibsen added a comment - 23/Apr/20 06:23 See https://issues.apache.org/jira/browse/CAMEL-14954 Show Claus Ibsen added a comment - 23/Apr/20 06:23 See https://issues.apache.org/jira/browse/CAMEL-14954
CAMEL-14943,Claus Ibsen,2020-04-21T19:22:13+0000,1587482533， where 1587482533 is the epoch,For example to set the allow optimized components then its a bit tricky currently in Java DSL.,There are no comments yet on this issue.
CAMEL-14940,David Jencks,2020-04-21T17:02:13+0000,1587474133， where 1587474133 is the epoch,The playbook also needs to mention the eip part of the components component.,Hide Permalink David Jencks added a comment - 21/Apr/20 17:02 See https://github.com/apache/camel-website/pull/350 Show David Jencks added a comment - 21/Apr/20 17:02 See https://github.com/apache/camel-website/pull/350
CAMEL-14940,David Jencks,2020-04-21T17:01:46+0000,1587474106， where 1587474106 is the epoch,This is the camel-3.2.x @camel docs fixes.,Hide Permalink David Jencks added a comment - 21/Apr/20 17:01 https://github.com/apache/camel/pull/3764 Show David Jencks added a comment - 21/Apr/20 17:01 https://github.com/apache/camel/pull/3764
CAMEL-14940,David Jencks,2020-04-21T16:29:21+0000,1587472161， where 1587472161 is the epoch,Backport generation of index tables for component modules index pages from 'latest' Since supportLevel is not available， have a 'deprecated' column instead. Add the EIPs to components and nav as they are now versioned along with components. Fix the broken user manual faq xrefs so the maven build can succeed.,Hide Permalink Andrea Cosentino added a comment - 21/Apr/20 16:29 I don't think this is critical， we won't release 3.2.1， because it's just a release through 3.4.0 LTS， so it's an effort that may be avoided actually. Show Andrea Cosentino added a comment - 21/Apr/20 16:29 I don't think this is critical， we won't release 3.2.1， because it's just a release through 3.4.0 LTS， so it's an effort that may be avoided actually. Hide Permalink David Jencks added a comment - 21/Apr/20 16:39 It might not be critical， but I think it's a bit nice to have until the LTS release， and I already made the PRs. Show David Jencks added a comment - 21/Apr/20 16:39 It might not be critical， but I think it's a bit nice to have until the LTS release， and I already made the PRs. Hide Permalink Andrea Cosentino added a comment - 21/Apr/20 16:44 Mine was just a suggestion， there is no need to answer in this way. Show Andrea Cosentino added a comment - 21/Apr/20 16:44 Mine was just a suggestion， there is no need to answer in this way.
CAMEL-14939,Andrea Cosentino,2020-04-21T12:52:42+0000,1587459162， where 1587459162 is the epoch,https://github.com/undertow-io/undertow/pull/878,Hide Permalink Andrea Cosentino added a comment - 21/Apr/20 12:52 Removed the related karaf feature Show Andrea Cosentino added a comment - 21/Apr/20 12:52 Removed the related karaf feature
CAMEL-14938,Unassigned,2020-04-21T08:52:50+0000,1587444770， where 1587444770 is the epoch,Add file name customization to complied classes generated from Groovy expressions for debugging purposes.,There are no comments yet on this issue.
CAMEL-14937,Claus Ibsen,2020-04-22T08:28:39.090Z,1587529719.09， where 1587529719.09 is the epoch,public static <T> Expression headerExpression(final String headerName， final Class<T> type) { return headerExpression(simpleExpression(headerName)， constantExpression(type));{{ }}} and {{ public static Expression headerExpression(final Expression headerName， final Expression typeName)}}}}{{tries to resolve the type viaString text = typeName.evaluate(exchange， String.class);which results in the String "class xxx.yyy.type". Trying to resolve that as a class obviously is bound to fail. I'm not sure whether the type converter should be changed here or the headerExpression code is wrong. This worked in 3.1.0， btw.,Hide Permalink Claus Ibsen added a comment - 22/Apr/20 04:54 Can you attach a reproducer or some more source code that better points out what the problem is. The code you have so far is a bit unclear. Show Claus Ibsen added a comment - 22/Apr/20 04:54 Can you attach a reproducer or some more source code that better points out what the problem is. The code you have so far is a bit unclear. Hide Permalink Jens Kleine-Herzbruch added a comment - 22/Apr/20 06:02 I don't have a rproducer at the ready but the main problem is that typeName.evaluate(exchange， String.class) with typeName being e.g. a constantExpression(String.class) results in the string "class java.lang.String". When that gets fed into the class resolver， it fails. So either the class resolver needs to handle that case (probably not the correct solution)， or the type converter needs to make sure to convert to "java.lang.String"， or the headerExpression code needs to use the passed in class parameter directly instead of converting to class name and back to class. Show Jens Kleine-Herzbruch added a comment - 22/Apr/20 06:02 I don't have a rproducer at the ready but the main problem is that typeName.evaluate(exchange， String.class) with typeName being e.g. a constantExpression(String.class) results in the string "class java.lang.String". When that gets fed into the class resolver， it fails. So either the class resolver needs to handle that case (probably not the correct solution)， or the type converter needs to make sure to convert to "java.lang.String"， or the headerExpression code needs to use the passed in class parameter directly instead of converting to class name and back to class. Hide Permalink Jens Kleine-Herzbruch added a comment - 22/Apr/20 08:28 Here's a simple test case and a possible fix. Show Jens Kleine-Herzbruch added a comment - 22/Apr/20 08:28 Here's a simple test case and a possible fix. Hide Permalink Claus Ibsen added a comment - 22/Apr/20 11:59 Thanks we will take a look at this Show Claus Ibsen added a comment - 22/Apr/20 11:59 Thanks we will take a look at this Hide Permalink Claus Ibsen added a comment - 22/Apr/20 12:29 Yeah Jens this looks good thanks for the patch. Running tests before merging. Show Claus Ibsen added a comment - 22/Apr/20 12:29 Yeah Jens this looks good thanks for the patch. Running tests before merging.
CAMEL-14936,Claus Ibsen,2020-04-21T08:57:58+0000,1587445078， where 1587445078 is the epoch,Its only used by file component so lets remove it as its not really needed and the file component can be made like the others and not use it.,Hide Permalink Claus Ibsen added a comment - 21/Apr/20 08:57 And also remove SubServiceFactory as this would no longer be needed either Show Claus Ibsen added a comment - 21/Apr/20 08:57 And also remove SubServiceFactory as this would no longer be needed either Hide Permalink Claus Ibsen added a comment - 21/Apr/20 09:49 We should also remove reflection calls when creating the factory and invoke its single method. Now we just use regular code. Show Claus Ibsen added a comment - 21/Apr/20 09:49 We should also remove reflection calls when creating the factory and invoke its single method. Now we just use regular code. Hide Permalink Guillaume Nodet added a comment - 21/Apr/20 11:25 - edited Do you plan to simply change the generator to generate a different file for those services ? Or just using a completely different service ? Show Guillaume Nodet added a comment - 21/Apr/20 11:25 - edited Do you plan to simply change the generator to generate a different file for those services ? Or just using a completely different service ? Hide Permalink Claus Ibsen added a comment - 21/Apr/20 11:49 - edited No we actually dont need to generate such file， it was over-engineered in file/ftp components. And that sub service has been removed and also in the maven tooling. Show Claus Ibsen added a comment - 21/Apr/20 11:49 - edited No we actually dont need to generate such file， it was over-engineered in file/ftp components. And that sub service has been removed and also in the maven tooling.
CAMEL-14935,Unassigned,2020-04-25T07:27:49+0000,1587785269， where 1587785269 is the epoch,We are experiencing unexpected offset reset errors occasionally， as well as occasional replay of messages (without an offset reset error).The cause seems to be a failed commit on rebalance， leaving an old value in the hashMap used to store the latest processed offset for a partition. This old value is then re-read and re-committed across rebalances in certain situations.Our relevant configuration details are:autoCommitEnable=false allowManualCommit=true autoOffsetReset=earliestIt seems when the KafkaConsumer experiences an Exception committing the offset (CommitFailedException) upon a rebalance， this leaves the old offset value in the lastProcessedOffset hashMap.A subsequent rebalance that assigns the same partition to the same consumer， that then thereafter experiences another rebalance (before any messages have been processed successfully as this will over write the invalid value and self correct the problem) will commit this old offset again. This offset may be very old if there have been many rebalances in between the original rebalance that failed to commit its offset.If the old offset is beyond the retention period and the message is no longer available the outcome is an offset reset error. If the offset is within the retention period all messages are replayed from that offset without an error being thrown.,Hide Permalink Claus Ibsen added a comment - 25/Apr/20 07:27 Yeah Kafka pushes all the complexities from them to the end users ;( So what can we do? Can we maybe remove/clear that map in case of CommitFailedException so there are no offset stored at all? You are welcome to dive into the code and see if you can provide a fix/improvement as patch or github PR Show Claus Ibsen added a comment - 25/Apr/20 07:27 Yeah Kafka pushes all the complexities from them to the end users ;( So what can we do? Can we maybe remove/clear that map in case of CommitFailedException so there are no offset stored at all? You are welcome to dive into the code and see if you can provide a fix/improvement as patch or github PR Hide Permalink Chris McCarthy added a comment - 01/May/20 05:33 - edited Thanks Claus， Yes performing the delete of the map in a finally block would address this specific vulnerability， or clearing out the map on assignment， We may be better off to upgrade to a newer version first I think. Show Chris McCarthy added a comment - 01/May/20 05:33 - edited Thanks Claus， Yes performing the delete of the map in a finally block would address this specific vulnerability， or clearing out the map on assignment， We may be better off to upgrade to a newer version first I think. Hide Permalink Claus Ibsen added a comment - 02/May/20 07:05 Okay yeah I would also suggest to upgrade if possible as older Camel 2.x releases are not active maintained. Only 2.25.x is and its only for serious bugs or security issues. Show Claus Ibsen added a comment - 02/May/20 07:05 Okay yeah I would also suggest to upgrade if possible as older Camel 2.x releases are not active maintained. Only 2.25.x is and its only for serious bugs or security issues. Hide Permalink Darius Cooper added a comment - 27/May/20 00:12 - edited Claus Ibsen is this a change that has been made in v3.x? It is "Resolved"， but I don't see a PR attached， and you also mentioned that you'd welcome a patch. So， wasn't sure if there's a resolution without such a patch... some work-around? Show Darius Cooper added a comment - 27/May/20 00:12 - edited Claus Ibsen is this a change that has been made in v3.x? It is "Resolved"， but I don't see a PR attached， and you also mentioned that you'd welcome a patch. So， wasn't sure if there's a resolution without such a patch... some work-around? Hide Permalink Darius Cooper added a comment - 27/May/20 18:46 Chris McCarthy， we ran into this too (v2.24.3) and were planning on either patching or overriding the Kafka Consumer. If you've looked at the code and have any pointers about where best to catch that exception， or where best to put the finally， your feedback will be valuable. Thx. Show Darius Cooper added a comment - 27/May/20 18:46 Chris McCarthy ， we ran into this too (v2.24.3) and were planning on either patching or overriding the Kafka Consumer. If you've looked at the code and have any pointers about where best to catch that exception， or where best to put the finally， your feedback will be valuable. Thx. Hide Permalink Chris McCarthy added a comment - 28/May/20 23:31 - edited Darius Cooper I think the vulnerability would be well handled by a change in the KafkaConsumer (the camel component) in the method onPartitionsRevoked that implements the rebalance listener. Wrapping the call to the commitOffset in a try block and removing the offsetKey from the Map lastProcesssedOffset in the corresponding finally block， so exceptions on commit do not prevent the Map being cleaned up. Hope that helps and is clear. Show Chris McCarthy added a comment - 28/May/20 23:31 - edited Darius Cooper I think the vulnerability would be well handled by a change in the KafkaConsumer (the camel component) in the method onPartitionsRevoked that implements the rebalance listener. Wrapping the call to the commitOffset in a try block and removing the offsetKey from the Map lastProcesssedOffset in the corresponding finally block， so exceptions on commit do not prevent the Map being cleaned up. Hope that helps and is clear. Hide Permalink Darius Cooper added a comment - 29/May/20 16:13 - edited Chris McCarthy Very clear， thank you. If you can review this PR on my personal fork， and check that it matches what you were thinking， that'll be helpful. As a next step， I'll work on sending it back into the Camel base repo. Thx. Show Darius Cooper added a comment - 29/May/20 16:13 - edited Chris McCarthy Very clear， thank you. If you can review this PR on my personal fork ， and check that it matches what you were thinking， that'll be helpful. As a next step， I'll work on sending it back into the Camel base repo. Thx. Hide Permalink Chris McCarthy added a comment - 30/May/20 10:58 - edited Darius Cooper Yes that's what I was thinking. I would be inclined to throw the exception as there is useful information in the default handler that prints the below which is useful I think. Also a useful addition may be if you logged the offsetkey and the offset as it may be helpful for diagnostics when searching the log tracing issues with a particular partition or offset. But nice one as this is the fix needed! "org.apache.kafka.clients.consumer.CommitFailedException: Commit cannot be completed since the group has already rebalanced and assigned the partitions to another member. This means that the time between subsequent calls to poll() was longer than the configured max.poll.interval.ms， which typically implies that the poll loop is spending too much time message processing. You can address this either by increasing max.poll.interval.ms or by reducing the maximum size of batches returned in poll() with max.poll.records." Show Chris McCarthy added a comment - 30/May/20 10:58 - edited Darius Cooper Yes that's what I was thinking. I would be inclined to throw the exception as there is useful information in the default handler that prints the below which is useful I think. Also a useful addition may be if you logged the offsetkey and the offset as it may be helpful for diagnostics when searching the log tracing issues with a particular partition or offset. But nice one as this is the fix needed! "org.apache.kafka.clients.consumer.CommitFailedException: Commit cannot be completed since the group has already rebalanced and assigned the partitions to another member. This means that the time between subsequent calls to poll() was longer than the configured max.poll.interval.ms， which typically implies that the poll loop is spending too much time message processing. You can address this either by increasing max.poll.interval.ms or by reducing the maximum size of batches returned in poll() with max.poll.records." Hide Permalink Darius Cooper added a comment - 31/May/20 14:08 Chris McCarthy， please [see my PR to Camel here|https://github.com/apache/camel/pull/3877]. In particular， Claus's question as to whether it is okay to clear in the finally (rather than when we catch an exception). Thanks. Show Darius Cooper added a comment - 31/May/20 14:08 Chris McCarthy ， please [see my PR to Camel here| https://github.com/apache/camel/pull/3877 ]. In particular， Claus's question as to whether it is okay to clear in the finally (rather than when we catch an exception). Thanks. Hide Permalink Darius Cooper added a comment - 02/Jun/20 09:49 - edited Chris McCarthy Claus [suggested the following|https://github.com/apache/camel/pull/3877]， which sounds good to me: On Exception， we clear In the Finally， we remove the current offset key The existing code had: lastProcessedOffset.remove(offsetKey); So， we'd be putting that in the finally block Indeed， I have a question: do we really need to clear within the catch block? Removing the offset for the current partition， within the finally block ought to do it， right? That's the code that was being skipped originally...so， we just need to move it to the finally block? Show Darius Cooper added a comment - 02/Jun/20 09:49 - edited Chris McCarthy Claus [suggested the following| https://github.com/apache/camel/pull/3877 ]， which sounds good to me: On Exception， we clear In the Finally， we remove the current offset key The existing code had: lastProcessedOffset.remove(offsetKey); So， we'd be putting that in the finally block Indeed， I have a question: do we really need to clear within the catch block? Removing the offset for the current partition， within the finally block ought to do it， right? That's the code that was being skipped originally...so， we just need to move it to the finally block? Hide Permalink Chris McCarthy added a comment - 03/Jun/20 00:10 Yes agreed， we dont want to clear as other consumers use that map and we will lose their state Show Chris McCarthy added a comment - 03/Jun/20 00:10 Yes agreed， we dont want to clear as other consumers use that map and we will lose their state
CAMEL-14934,Peter Palaga,2020-04-20T13:44:46+0000,1587375886， where 1587375886 is the epoch,The descriptions of components， languages， data formats， etc. in Camel catalog currently use several inconsistent styles. As agreed on camel-dev https://www.mail-archive.com/dev@camel.apache.org/msg50591.html we should try to stick to a common style characterized by the following rules: Shorter is better. Less/shorter words are faster to read and faster to understand(ii) An application of : Leave out words and information available elsewhere in the Catalog record. Esp. do not repeat the title and kind (component， language， ...) because they are clear from the context. The same holds for the word "Camel".(iii) Concentrate on functionality (what it does)， because that's what most users want to know; preferably start with a verb in the plain (imperative) formExample:old: JacksonXML data format is used for unmarshal a XML payload to POJO or to marshal POJO back to XML payload.new: Unmarshal an XML payload to POJO or marshal a POJO back to XML.,There are no comments yet on this issue.
CAMEL-14933,Luca Burgazzoli,2020-04-20T07:44:11+0000,1587354251， where 1587354251 is the epoch,GenerateConfigurerMojo has a dependency on spring but we can replace such usage by our own reflection helper,There are no comments yet on this issue.
CAMEL-14932,Unassigned,2020-04-20T00:36:42+0000,1587328602， where 1587328602 is the epoch,Create a new component specifically for Splunk HEC (HTTP Event Collector).The existing camel-splunk component is a powerhouse that allows to send and draw data from a Splunk instance. However for most use cases， HEC is used in enterprises to send data to Splunk.,Hide Permalink Antoine Toulme added a comment - 20/Apr/20 00:36 See https://github.com/apache/camel/pull/3760 for a contribution. Show Antoine Toulme added a comment - 20/Apr/20 00:36 See https://github.com/apache/camel/pull/3760 for a contribution. Hide Permalink Claus Ibsen added a comment - 23/Apr/20 05:37 Thanks PR merged. We need spring boot starter and potentially a karaf feature if its possible. Show Claus Ibsen added a comment - 23/Apr/20 05:37 Thanks PR merged. We need spring boot starter and potentially a karaf feature if its possible. Hide Permalink Claus Ibsen added a comment - 23/Apr/20 07:19 An idea could be to change the syntax from splunk-hec:host/token?query to splunk-hec:index?query and allow to specify host token etc as query and component level parameters. The advantage is to allow to configure this globally once on the component. Especially tokens which can then more easily be auto configured via spring boot auto configuration etc. Show Claus Ibsen added a comment - 23/Apr/20 07:19 An idea could be to change the syntax from splunk-hec:host/token?query to splunk-hec:index?query and allow to specify host token etc as query and component level parameters. The advantage is to allow to configure this globally once on the component. Especially tokens which can then more easily be auto configured via spring boot auto configuration etc.
CAMEL-14931,Omar Al-Safi,2020-04-18T22:14:47.664Z,1587233687.664， where 1587233687.664 is the epoch,Camel: 3.2.0SB: 2.2.6Java: 1.8For a kafka producer， it seems the additionalProperties method does not seem to take effect. Specifically， the goal is to set "transactional.id" and I thought additionalProperties is the way to do it.I have attached a log where the kafka properties shows "transactional.id = null" on startup. I assume it should be set on startup. Other values are set as expected.Test code here: https://github.com/gurpal2000/camelproblemdemo3You will need to have a sample broker running. I used a docker one.The documentation mentions prefixing the value with "additionalProperties" also. That does not work either.,Hide Permalink Gurpal2000 added a comment - 18/Apr/20 22:38 - edited Downgrading to minor as I found this workaround: If i replace the string value with a map (overloaded method) then it works as expected. What is the format of the method with String then? .additionalProperties(new HashMap<String， Object>() {{ put("transactional.id"， "ABC"); }}) Show Gurpal2000 added a comment - 18/Apr/20 22:38 - edited Downgrading to minor as I found this workaround: If i replace the string value with a map (overloaded method) then it works as expected. What is the format of the method with String then? .additionalProperties( new HashMap< String ， Object >() {{ put( "transactional.id" ， "ABC" ); }}) Hide Permalink Omar Al-Safi added a comment - 20/Apr/20 08:26 Hey Gurpal2000， This is actually not a bug， indeed it should accept Map since you have used the EndpointDSL as well as ComponentDSL which they will enforce typesafe parameters， thus enforcing the `Map` type which is intended here. However， in case of string prefixed with additionalProperties， this is only valid if you use the plain String URI， e.g: kafka:mytopic?brokers=broker1:12345，broker2:12566&partitioner=com.class.Party&additionalProperties.extra.1=123&additionalProperties.extra.2=test. Hope is clear! Regards， Omar Show Omar Al-Safi added a comment - 20/Apr/20 08:26 Hey Gurpal2000 ， This is actually not a bug， indeed it should accept Map since you have used the EndpointDSL as well as ComponentDSL which they will enforce typesafe parameters， thus enforcing the `Map` type which is intended here. However， in case of string prefixed with additionalProperties ， this is only valid if you use the plain String URI， e.g: kafka:mytopic?brokers=broker1:12345，broker2:12566&partitioner=com.class.Party&additionalProperties.extra.1=123&additionalProperties.extra.2=test . Hope is clear! Regards， Omar Hide Permalink Gurpal2000 added a comment - 23/Apr/20 19:57 thanks! Show Gurpal2000 added a comment - 23/Apr/20 19:57 thanks!
CAMEL-14930,Andrea Cosentino,2020-04-18T16:32:49+0000,1587213169， where 1587213169 is the epoch,I have a Camel CDI project using 3.2 and I trying use controlbus to get stats from some routes using Java DSL: .toD("controlbus:route?routeId=${exchangeProperty.routesIds[${exchangeProperty.CamelLoopIndex}]}&action=stats"); The starting logs are telling me JMX is enabled[ main] DefaultManagementStrategy INFO JMX is enabled But when I run the route I have an error message saying JMX is dissabled.[ XNIO-1 task-1] ControlBusProducer INFO ControlBus task done [stats route mngt-endpoint-stats] with result -> JMX is disabled， cannot get stats,Hide Permalink Andrea Cosentino added a comment - 18/Apr/20 16:32 Did you add the camel-management dependency to your Pom? Show Andrea Cosentino added a comment - 18/Apr/20 16:32 Did you add the camel-management dependency to your Pom? Hide Permalink Andrea Cosentino added a comment - 18/Apr/20 16:33 It's documented in the migration guide. Show Andrea Cosentino added a comment - 18/Apr/20 16:33 It's documented in the migration guide. Hide Permalink Emmerson added a comment - 18/Apr/20 17:48 I didn't， but is working after add that dependency， many thanks. Would you mind update the official documentation to reflect that? https://camel.apache.org/manual/latest/jmx.html Show Emmerson added a comment - 18/Apr/20 17:48 I didn't， but is working after add that dependency， many thanks. Would you mind update the official documentation to reflect that? https://camel.apache.org/manual/latest/jmx.html Hide Permalink Emmerson added a comment - 18/Apr/20 17:49 This is a project from the scratch， that is the reason I didn't read the migration guide. Thanks again Show Emmerson added a comment - 18/Apr/20 17:49 This is a project from the scratch， that is the reason I didn't read the migration guide. Thanks again Hide Permalink Andrea Cosentino added a comment - 18/Apr/20 19:07 Sure thing! Thanks for spotting this. Show Andrea Cosentino added a comment - 18/Apr/20 19:07 Sure thing! Thanks for spotting this. Hide Permalink Andrea Cosentino added a comment - 20/Apr/20 07:34 Added the documentation Show Andrea Cosentino added a comment - 20/Apr/20 07:34 Added the documentation
CAMEL-14929,Andrea Cosentino,2020-04-18T15:43:25+0000,1587210205， where 1587210205 is the epoch,Hi，The component `camel-aws2-s3` should be able to support streaming consume/download to allow the copy/download of large files from S3. The current implementation or 'saves' the contents of input stream into the memory or completely disregard it not giving a change for the next components to manipulate the stream. This seems to be a no ideal implementation.The issue essentially is on class `org.apache.camel.component.aws2.s3.AWS2S3Endpoint` in between lines 169 to 178 and lines 201 to 212.The logic on lines 169 to 178 there is: if the parameter `includeBody` is true it will consume the S3 stream into the memory which is no ideal for large files. if the parameter `includeBody` is false it won't consume the S3 stream however the S3 stream will be lost， I couldn't find any other way to access it therefore the S3 is open for nothing on this case. This doesn't seem reasonable as well. I think the S3 stream should be put in the `body` raw so the next component in the pipeline can consume it.The logic on lines 201 to 212 is: if the parameter `includeBody` is false it surprisingly close the S3 input stream confirming that there will be no way to consume it afterwards. if the parameter `includeBody` is true the S3 input stream will be left open however there is way to access it as it is created on line 77 of `org.apache.camel.component.aws2.s3.AWS2S3Consumer` and afterwards if not included in the body it get lost.The ideal behaviour I think would be: if `includedBody` is true then consume S3 input stream into the memory， save it in the body and close it. if `includeBody` is false then put the raw S3 input stream in the body and don't close it. if `autoCloseBody` is true then schedule the S3 input stream closing for when exchange is finished. if `autoCloseBody` is false then leave to caller to close it which I'm not sure how this can be done in the current implementation.,Hide Permalink Andrea Cosentino added a comment - 18/Apr/20 15:43 This was a porting of aws-s3 component. There is documentation about includeBody and autocloseBody and their usage. I don't totally remember， but I'll take a look Show Andrea Cosentino added a comment - 18/Apr/20 15:43 This was a porting of aws-s3 component. There is documentation about includeBody and autocloseBody and their usage. I don't totally remember， but I'll take a look Hide Permalink Anderson Vaz added a comment - 18/Apr/20 15:55 Andrea Cosentino if the link of the code below is the one that you are referring to then seems that in the old version the behaviour was the same. https://github.com/apache/camel/blob/bf375d75e1c28b4e047c6c767312b23ef1c8b14c/components/camel-aws-s3/src/main/java/org/apache/camel/component/aws/s3/S3Endpoint.java#L159 Show Anderson Vaz added a comment - 18/Apr/20 15:55 Andrea Cosentino if the link of the code below is the one that you are referring to then seems that in the old version the behaviour was the same. https://github.com/apache/camel/blob/bf375d75e1c28b4e047c6c767312b23ef1c8b14c/components/camel-aws-s3/src/main/java/org/apache/camel/component/aws/s3/S3Endpoint.java#L159 Hide Permalink Andrea Cosentino added a comment - 18/Apr/20 16:31 Yes， exactly. In the documentation it is stated that in case includeBody is false， the body will be null. By the way， we can add the raw S3 object and leave the autocloseBody behavior as is. I'll take care of this. Show Andrea Cosentino added a comment - 18/Apr/20 16:31 Yes， exactly. In the documentation it is stated that in case includeBody is false， the body will be null. By the way， we can add the raw S3 object and leave the autocloseBody behavior as is. I'll take care of this. Hide Permalink Anderson Vaz added a comment - 18/Apr/20 17:55 - edited Yes， this is exactly what I would expect from such component. I made a monkey patch on my environment and it worked well when I had to stream get the object from S3 and save it to a local file. Essentially is only 2 lines that needs to be changed. Lines 177 and 201. Show Anderson Vaz added a comment - 18/Apr/20 17:55 - edited Yes， this is exactly what I would expect from such component. I made a monkey patch on my environment and it worked well when I had to stream get the object from S3 and save it to a local file. Essentially is only 2 lines that needs to be changed. Lines 177 and 201. Hide Permalink Andrea Cosentino added a comment - 18/Apr/20 18:25 You're welcome to submit a pull request if you want Show Andrea Cosentino added a comment - 18/Apr/20 18:25 You're welcome to submit a pull request if you want Hide Permalink Anderson Vaz added a comment - 18/Apr/20 18:27 - edited I will be really glad in do that but I'm having difficulties in build apache-camel locally to I can proper test it and if necessary write tests for it. There is any README or similar with the requirements on how to build apache-camel projects for development? I'm getting this error trying to build it with Java 11 (openjdk) Execution generate of goal org.apache.camel:camel-package-maven-plugin:3.3.0-SNAPSHOT:generate failed: An API incompatibility was encountered while executing org.apache.camel:camel-package-maven-plugin:3.3.0-SNAPSHOT:generate: java.lang.VerifyError: (class: ASMAccessorImpl_52219405015872224745234， method: getKnownEgressType signature: ()Ljava/lang/Class Illegal type in constant pool I know that this is not the place if you want we can move this talk to Gitter. Show Anderson Vaz added a comment - 18/Apr/20 18:27 - edited I will be really glad in do that but I'm having difficulties in build apache-camel locally to I can proper test it and if necessary write tests for it. There is any README or similar with the requirements on how to build apache-camel projects for development? I'm getting this error trying to build it with Java 11 (openjdk) Execution generate of goal org.apache.camel:camel- package -maven-plugin:3.3.0-SNAPSHOT:generate failed: An API incompatibility was encountered while executing org.apache.camel:camel- package -maven-plugin:3.3.0-SNAPSHOT:generate: java.lang.VerifyError: (class: ASMAccessorImpl_52219405015872224745234， method: getKnownEgressType signature: ()Ljava/lang/ Class Illegal type in constant pool I know that this is not the place if you want we can move this talk to Gitter. Hide Permalink Andrea Cosentino added a comment - 18/Apr/20 19:12 I cannot reproduce the error actually. For the contribution docs we have this: https://camel.apache.org/manual/latest/contributing.html Anyway， I'll be available on gitter next week Show Andrea Cosentino added a comment - 18/Apr/20 19:12 I cannot reproduce the error actually. For the contribution docs we have this: https://camel.apache.org/manual/latest/contributing.html Anyway， I'll be available on gitter next week Hide Permalink Andrea Cosentino added a comment - 20/Apr/20 07:35 Anderson Vaz were you able to build? Show Andrea Cosentino added a comment - 20/Apr/20 07:35 Anderson Vaz were you able to build? Hide Permalink Anderson Vaz added a comment - 20/Apr/20 08:21 Andrea Cosentino I couldn't work on that yesterday. I will try in the next hours and let you know. Show Anderson Vaz added a comment - 20/Apr/20 08:21 Andrea Cosentino I couldn't work on that yesterday. I will try in the next hours and let you know. Hide Permalink Anderson Vaz added a comment - 20/Apr/20 21:24 Andrea Cosentino， sorry， busy day， anyway I was able to build. I will prepare the fix and submit it. Should I do it for both clients aws-s3 and aws2-s3? Show Anderson Vaz added a comment - 20/Apr/20 21:24 Andrea Cosentino ， sorry， busy day， anyway I was able to build. I will prepare the fix and submit it. Should I do it for both clients aws-s3 and aws2-s3? Hide Permalink Andrea Cosentino added a comment - 20/Apr/20 21:34 Hey， I'd say only for aws2， because it's under heavy development. Thanks! Show Andrea Cosentino added a comment - 20/Apr/20 21:34 Hey， I'd say only for aws2， because it's under heavy development. Thanks! Hide Permalink Andrea Cosentino added a comment - 30/Jul/20 06:09 Anderson Vaz are you still on this stuff? Show Andrea Cosentino added a comment - 30/Jul/20 06:09 Anderson Vaz are you still on this stuff? Hide Permalink Anderson Vaz added a comment - 31/Jul/20 15:36 Hi @Andrea Consentino， I lost track of this due my project demands， I will work to provide a PR this weekend if that is fine for you? Show Anderson Vaz added a comment - 31/Jul/20 15:36 Hi @Andrea Consentino， I lost track of this due my project demands， I will work to provide a PR this weekend if that is fine for you? Hide Permalink Andrea Cosentino added a comment - 31/Jul/20 16:04 Sounds good. Thanks. Show Andrea Cosentino added a comment - 31/Jul/20 16:04 Sounds good. Thanks. Hide Permalink Anderson Vaz added a comment - 22/Sep/20 07:36 Hi Andrea Cosentino， sorry for the huge delay. I just opened the PR 4274 with the changes to address this issue. Show Anderson Vaz added a comment - 22/Sep/20 07:36 Hi Andrea Cosentino ， sorry for the huge delay. I just opened the PR 4274 with the changes to address this issue. Hide Permalink Andrea Cosentino added a comment - 09/Oct/20 10:28 Anderson Vaz are you able to add tests to the PR? Show Andrea Cosentino added a comment - 09/Oct/20 10:28 Anderson Vaz are you able to add tests to the PR? Hide Permalink Anderson Vaz added a comment - 10/Oct/20 16:45 Andrea Cosentino I just pushed the tests and explained the approach in a github PR comment. Show Anderson Vaz added a comment - 10/Oct/20 16:45 Andrea Cosentino I just pushed the tests and explained the approach in a github PR comment.
CAMEL-14928,Claus Ibsen,2020-05-05T08:47:06+0000,1588654026， where 1588654026 is the epoch,If I set properties:camel.component.box.authenticationType = STANDARD_AUTHENTICATIONcamel.component.box.userName = usercamel.component.box.userPassword = passwordcamel.component.box.clientId = foocamel.component.box.clientSecret = barI get exception:Caused by: java.lang.IllegalArgumentException: Unable to connect， Box component configuration is missing at org.apache.camel.component.box.BoxComponent.doStart(BoxComponent.java:92)I wonder if this should call getConfiguration() instead of referencing the @Metadata annotated configuration field?,Hide Permalink Claus Ibsen added a comment - 05/May/20 08:47 Yeah that was wrong， fixing Show Claus Ibsen added a comment - 05/May/20 08:47 Yeah that was wrong， fixing
CAMEL-14927,Claus Ibsen,2020-05-11T04:06:53.927Z,1589155613.927， where 1589155613.927 is the epoch,camel-salesforce component doesn't work in 3.2.0 release.A NPE can happen in the SalesforceComponent (line 260) as httpClient is not initialized.,Hide Permalink Jeremy Ross added a comment - 11/May/20 04:07 - edited Claus Ibsen I'm still seeing this in 3.3.0-SNAPSHOT， which I think may be the same as this issue. camel-stacktrace.txt Show Jeremy Ross added a comment - 11/May/20 04:07 - edited Claus Ibsen I'm still seeing this in 3.3.0-SNAPSHOT， which I think may be the same as this issue. camel-stacktrace.txt Hide Permalink Claus Ibsen added a comment - 11/May/20 14:04 Ah thanks， can you try 3.4.0-SNAPSHOT just pushed some fixes Show Claus Ibsen added a comment - 11/May/20 14:04 Ah thanks， can you try 3.4.0-SNAPSHOT just pushed some fixes Hide Permalink Jeremy Ross added a comment - 11/May/20 14:19 Claus Ibsen I'm not seeing 3.4.0-SNAPSHOT in the snapshot repo or git. Show Jeremy Ross added a comment - 11/May/20 14:19 Claus Ibsen I'm not seeing 3.4.0-SNAPSHOT in the snapshot repo or git. Hide Permalink Andrea Cosentino added a comment - 11/May/20 14:21 It's not moved to 3.4.0-SNAPSHOT， until we release 3.3.0 officialy Show Andrea Cosentino added a comment - 11/May/20 14:21 It's not moved to 3.4.0-SNAPSHOT， until we release 3.3.0 officialy Hide Permalink Jeremy Ross added a comment - 11/May/20 14:34 Claus Ibsen I'm building the salesforce component from master and， as of last night， I'm still getting this exception. Show Jeremy Ross added a comment - 11/May/20 14:34 Claus Ibsen I'm building the salesforce component from master and， as of last night， I'm still getting this exception. Hide Permalink Claus Ibsen added a comment - 11/May/20 14:42 You can also build from source locally Show Claus Ibsen added a comment - 11/May/20 14:42 You can also build from source locally Hide Permalink Jeremy Ross added a comment - 11/May/20 14:47 Claus Ibsen I am building locally. That's what I meant when I said I'm building the salesforce component from master (branch). Should this be sufficient to get the fix? Or do I need to build more than the salesforce component? Show Jeremy Ross added a comment - 11/May/20 14:47 Claus Ibsen I am building locally. That's what I meant when I said I'm building the salesforce component from master (branch). Should this be sufficient to get the fix? Or do I need to build more than the salesforce component? Hide Permalink Claus Ibsen added a comment - 11/May/20 14:50 I would built it all， or at least the core JARs also. Show Claus Ibsen added a comment - 11/May/20 14:50 I would built it all， or at least the core JARs also. Hide Permalink Jeremy Ross added a comment - 12/May/20 18:18 Claus Ibsen Fix looks good. Any chance this can make it in 3.3.0? Show Jeremy Ross added a comment - 12/May/20 18:18 Claus Ibsen Fix looks good. Any chance this can make it in 3.3.0? Hide Permalink Claus Ibsen added a comment - 12/May/20 18:22 Thanks for testing， now 3.3 is not a LTS release so not patches， wait for 3.4.0 to be released next month Show Claus Ibsen added a comment - 12/May/20 18:22 Thanks for testing， now 3.3 is not a LTS release so not patches， wait for 3.4.0 to be released next month
CAMEL-14926,Andrea Cosentino,2020-04-17T09:54:13+0000,1587102853， where 1587102853 is the epoch,We need to remember we'll need to drop the karaf feature,Hide Permalink Andrea Cosentino added a comment - 17/Apr/20 09:54 Same for jgroups from version 5.x Show Andrea Cosentino added a comment - 17/Apr/20 09:54 Same for jgroups from version 5.x Hide Permalink Andrea Cosentino added a comment - 21/Apr/20 16:55 Removed support in camel-karaf for camel-jgroups， camel-jgroups-raft and camel-infinispan Show Andrea Cosentino added a comment - 21/Apr/20 16:55 Removed support in camel-karaf for camel-jgroups， camel-jgroups-raft and camel-infinispan

